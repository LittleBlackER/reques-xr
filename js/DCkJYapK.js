const _0x55853a=(function(){let _0xfcd5ad=!![];return function(_0x20b6eb,_0x4e1218){const _0x291eb6=_0xfcd5ad?function(){if(_0x4e1218){const _0x1caba9=_0x4e1218['apply'](_0x20b6eb,arguments);return _0x4e1218=null,_0x1caba9;}}:function(){};return _0xfcd5ad=![],_0x291eb6;};}()),_0x45e3e0=_0x55853a(this,function(){return _0x45e3e0['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x45e3e0)['search']('(((.+)+)+)'+'+$');});_0x45e3e0();const _0x7ed65f=(function(){let _0x27ca47=!![];return function(_0x1e6dcd,_0x4c4738){const _0x3309b9=_0x27ca47?function(){if(_0x4c4738){const _0x35dcb1=_0x4c4738['apply'](_0x1e6dcd,arguments);return _0x4c4738=null,_0x35dcb1;}}:function(){};return _0x27ca47=![],_0x3309b9;};}());(function(){_0x7ed65f(this,function(){const _0x2dd69d=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x483373=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x2be851=_0x15e975('init');!_0x2dd69d['test'](_0x2be851+'chain')||!_0x483373['test'](_0x2be851+'input')?_0x2be851('0'):_0x15e975();})();}());const _0x45d154=(function(){let _0x422698=!![];return function(_0x4ba577,_0x5aef86){const _0x56aaa0=_0x422698?function(){if(_0x5aef86){const _0x172caa=_0x5aef86['apply'](_0x4ba577,arguments);return _0x5aef86=null,_0x172caa;}}:function(){};return _0x422698=![],_0x56aaa0;};}()),_0x45032d=_0x45d154(this,function(){const _0xd84727=function(){let _0x262893;try{_0x262893=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x4fcf39){_0x262893=window;}return _0x262893;},_0x1a13f0=_0xd84727(),_0xc151a9=_0x1a13f0['console']=_0x1a13f0['console']||{},_0x17ab5b=['log','warn','info','error','exception','table','trace'];for(let _0x40e57b=-0x106b+-0xa86*0x1+0x1af1;_0x40e57b<_0x17ab5b['length'];_0x40e57b++){const _0x219a6b=_0x45d154['constructo'+'r']['prototype']['bind'](_0x45d154),_0x53e57e=_0x17ab5b[_0x40e57b],_0x225d07=_0xc151a9[_0x53e57e]||_0x219a6b;_0x219a6b['__proto__']=_0x45d154['bind'](_0x45d154),_0x219a6b['toString']=_0x225d07['toString']['bind'](_0x225d07),_0xc151a9[_0x53e57e]=_0x219a6b;}});_0x45032d();var qv=Object['defineProp'+'erty'],jv=(_0x15e321,_0x143c80,_0x4f94f2)=>_0x143c80 in _0x15e321?qv(_0x15e321,_0x143c80,{'enumerable':!(0x191d+0x2*0x765+-0x27e7),'configurable':!(-0x6*-0xd5+0x1f6a+-0x2468),'writable':!(0x2310+0x3*0x2d0+-0x2b80),'value':_0x4f94f2}):_0x15e321[_0x143c80]=_0x4f94f2,h=(_0x19c9c9,_0x405016,_0x3633a0)=>jv(_0x19c9c9,typeof _0x405016!='symbol'?_0x405016+'':_0x405016,_0x3633a0),Yv=(_0x2b326a=>(_0x2b326a['HIGH']='high',_0x2b326a['MEDIUM']='medium',_0x2b326a['LOW']='low',_0x2b326a['LOW_VR']='lowVR',_0x2b326a))(Yv||{});const Kv=()=>!Kg()&&!Zg()&&!Yg()&&!Zv(),Yg=()=>{const _0x33f7ff=navigator['userAgent']['includes']('Macintosh'),_0x51f4d3=navigator['maxTouchPo'+'ints']===0xf6c*0x2+-0xcdc+-0x5fd*0x3,_0x4b5dc9=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x33f7ff&&_0x51f4d3&&_0x4b5dc9;},Kg=()=>navigator['userAgent']['includes']('Quest'),Zv=()=>{const _0x54474e=navigator['userAgent']['toLowerCas'+'e']();return _0x54474e['includes']('pico')||_0x54474e['includes']('picolrowse'+'r');},Zg=()=>['iOS','Android']['includes'](Qv()),Gk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),Hk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),Qv=()=>{const _0x4f36c4=window['navigator']['userAgent']['toLowerCas'+'e'](),_0xdf863e=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x4f36c4)?'iOS':/android/['test'](_0x4f36c4)?'Android':/mac/['test'](_0xdf863e)?'macOS':/win/['test'](_0xdf863e)?'Windows':/linux/['test'](_0xdf863e)?'Linux':'Unknown';};class Wk{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=0x1ba8+-0x4cb*-0x2+-0xc5b*0x3,this['MEDIUM_FPS'+'_THRESHOLD']=-0x1c*0x56+-0x1579+0x1eff,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(0x27*-0xd0+0x204b+-0x97)*(0x2c*-0x1d+-0x1*-0x11d8+-0x8dc)*(0xa8d+-0x1*-0x270b+-0x4*0xb66)*(-0x1*0x1e93+0x2*-0xbfd+-0x481*-0xd),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(0x1af1+0xfb3+-0x2aa2)*(0xce8+-0x1*0x20b1+0x1*0x17c9)*(-0xd5e+0x2021+-0xec3)*(0x11*0x191+-0xfeb+-0x6b6),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x43b626){const _0x19f144=_0x43b626['toLowerCas'+'e']();for(const [_0x39f6f5,_0x46ddc9]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x19f144['includes'](_0x39f6f5))return _0x46ddc9*(-0x815+0x1*-0x1ef1+0x13b5*0x2);return 0x27b+0x39a*-0x9+-0x3*-0xa0b;}['getModelSc'+'ore'](_0x104182,_0x2aa975){const _0x2028a7=_0x104182['toLowerCas'+'e'](),_0x460e4c=_0x2aa975['toLowerCas'+'e']();for(const [_0x3883f1,_0x427819]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x2028a7['includes'](_0x3883f1)&&_0x427819['some'](_0x525b81=>_0x525b81['test'](_0x460e4c)))return-0xa33+0x8ef*0x3+-0x1a*0xa0;for(const [_0x7f582d,_0x57181d]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x2028a7['includes'](_0x7f582d)&&_0x57181d['some'](_0x303706=>_0x303706['test'](_0x460e4c)))return-0x1*0xfa3+-0x37*-0x71+-0x85e;for(const [_0x4743c7,_0x189b81]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x2028a7['includes'](_0x4743c7)&&_0x189b81['some'](_0x5686d7=>_0x5686d7['test'](_0x460e4c)))return-0x1f6d*-0x1+0x1*0x120d+-0x3148;return 0x3*0x8e+0x551+-0x6bf*0x1;}['getMemoryS'+'core'](_0x3ea941){return _0x3ea941?_0x3ea941>=0x2*0x626+0x4479+-0x21e5?-0x667+-0x5fc*0x2+0x12c3:_0x3ea941>=-0x10f*0x37+0xf*-0x19+0x5af0?0x809+0x2093+0x1*-0x2842:_0x3ea941>=-0x1*-0x8df+-0x1f60+0x13*0x26b?-0x1bb4+0xcea+-0x1*-0xf1a:_0x3ea941>=-0xd44+0x44d*-0x1+-0x125*-0x1d?-0x26d5+-0xae*0x9+0x2d39*0x1:_0x3ea941>=-0x607*-0x1+-0x7*-0x95+0x2*-0x125?0x1f0*-0x8+-0xad3+0x1a8f*0x1:-0x2527+0x232b+-0x9*-0x3e:-0x2*-0xf08+0x338+0xf2*-0x23;}['getDriverS'+'core'](_0x1075bb){if(!_0x1075bb)return-0x1c59+0x14ef+0x4*0x1e7;const _0x31712a=_0x1075bb['match'](/20[2-9][0-9]/);if(_0x31712a){const _0x771f59=parseInt(_0x31712a[0x1*0x943+-0x1ec1*0x1+0x312*0x7]);if(_0x771f59>=0x295*-0x7+-0x10*0x12+0x1b1a)return-0x1d21+-0x4a+0x1dcf;if(_0x771f59>=0x166a+0x7*-0x20e+-0x22)return 0x1dc2+-0x1*0x15e8+0xa*-0xc1;if(_0x771f59>=0x7*-0x54b+0x1b13+-0x1*-0x11df)return-0x11e2+0x1b2a+-0x90c;}return 0x9d9+0x14de+-0x1e85;}['evaluateGP'+'U'](_0x34d5c4){const _0x28cb70=this['getVendorS'+'core'](_0x34d5c4['vendor']),_0xd34def=this['getModelSc'+'ore'](_0x34d5c4['vendor'],_0x34d5c4['renderer']),_0xceab20=this['getMemoryS'+'core'](_0x34d5c4['memory']),_0x4472fb=this['getDriverS'+'core'](_0x34d5c4['driverVers'+'ion']);return console['log']('GPU:',_0x34d5c4['vendor']),console['log']('GPU:',_0x34d5c4['renderer']),console['log']('GPU:',_0x34d5c4['driverVers'+'ion']),console['table'](_0x34d5c4),_0x28cb70*(0x1510+0x1ac+-0x16bc*0x1+0.3)+_0xd34def*(0x1*0xa8a+-0x3b*0x20+-0x32a+0.4)+_0xceab20*(0x24b3+-0x1d88+-0x72b+0.2)+_0x4472fb*(-0x655+-0x2133+0x2788+0.1);}['evaluateCP'+'U'](){const _0x25182d=navigator['hardwareCo'+'ncurrency'];return _0x25182d>=-0x2040+-0xe0*-0xa+0xbc4*0x2?-0x263*0x1+-0x209*0x11+0x24ff:_0x25182d>=-0x3*-0xbb3+0xd3b+-0x305*0x10?-0x16a6+0x2084+-0x9dc:0xa5e*0x3+0x8*0x251+-0x31a1;}['evaluateMe'+'mory'](_0x1f1037){return typeof _0x1f1037=='string'?0xb24+0x1891+0x3*-0xbe7:_0x1f1037['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x56f0de){const _0x4c2a10=Zg(),_0x47fa24=Yg(),_0x55c39b=Kg();if(_0x47fa24)return'medium';if(_0x55c39b)return'lowVR';if(_0x4c2a10)return'low';const _0x4ad809=_0x56f0de['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?-0xbfe+0x1*-0x266f+-0x868*-0x6:_0x56f0de['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?0x23b7+-0x25a3+0x1ee:0x10b1*0x2+-0x2260+-0x55*-0x3;let _0x4a4a3d=-0x1933+-0x1*-0x243+0x7*0x347;typeof _0x56f0de['gpuInfo']!='string'&&(_0x4a4a3d=this['evaluateGP'+'U'](_0x56f0de['gpuInfo']));const _0x50897a=this['evaluateCP'+'U'](),_0x1d1c62=this['evaluateMe'+'mory'](_0x56f0de['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?-0x1e2*-0x14+0xdc4+-0x29*0x141:this['evaluateMe'+'mory'](_0x56f0de['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?-0x11ec+-0x1b04+0x2cf2:-0xf0+0x1*0xc4f+-0xf*0xc2,_0x5dc4a6=_0x4ad809+_0x4a4a3d+_0x50897a+_0x1d1c62;return console['log']('GPU:',_0x4ad809,_0x4a4a3d,_0x50897a,_0x1d1c62),_0x5dc4a6>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x5dc4a6>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x40f083){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x40f083];}}const Jv=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x3f2cf8){var _0x5ecb14=Date['now']();return setTimeout(function(){_0x3f2cf8({'didTimeout':!(0x788+0x1feb+-0x2772),'timeRemaining':function(){return Math['max'](0x88*0x43+0x9f5*0x3+0x4177*-0x1,0x2*0x332+-0x1*-0x1b45+-0x2177-(Date['now']()-_0x5ecb14));}});},-0x17*-0x1+-0x5eb*-0x1+-0x601);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x5122f0){clearTimeout(_0x5122f0);};},e0='RenderFram'+'e',sd='RenderFram'+'eTime',Hm='RenderPass',qa='RenderPass'+'Detail',gl='RenderActi'+'on',Wm='RenderTarg'+'etAlloc',$m='TextureAll'+'oc',Xm='ShaderAllo'+'c',t0='ShaderComp'+'ile',s0='VRAM.Textu'+'re',i0='VRAM.Vb',r0='VRAM.Ib',a0='BindGroupA'+'lloc',n0='BindGroupF'+'ormatAlloc',Rs='Element',o0='Textures',Sl='GpuTimings',ja='$_CURRENT_'+'SDK_VERSIO'+'N',Qg='$_CURRENT_'+'SDK_REVISI'+'ON';function bh(_0x52fb27,_0x14ed2e){for(const _0x2e21be in _0x14ed2e){const _0x45ba3e=_0x14ed2e[_0x2e21be];Array['isArray'](_0x45ba3e)?_0x52fb27[_0x2e21be]=bh([],_0x45ba3e):_0x45ba3e&&typeof _0x45ba3e=='object'?_0x52fb27[_0x2e21be]=bh({},_0x45ba3e):_0x52fb27[_0x2e21be]=_0x45ba3e;}return _0x52fb27;}const l0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x445c8a=>{const _0x439632=Math['random']()*(-0x224+0x2f2+-0xbe)|0x35b*0x5+-0x1b69+0xaa2;return(_0x445c8a==='x'?_0x439632:_0x439632&-0x1*0x150a+0x1f81+-0xa74|0x28e*0x8+-0x20e5+0x17*0x8b)['toString'](0x10f0+-0x13ed+0x1*0x30d);});}},xe={'delimiter':'/','join'(..._0x523038){let _0x27aeba=_0x523038[-0x8c6*-0x4+-0x1586+-0xd92*0x1];for(let _0x1cee34=0x1343*-0x2+-0x1333+0x39b9;_0x1cee34<_0x523038['length']-(-0x3*-0xa61+-0xe5*-0x17+0x763*-0x7);_0x1cee34++){const _0x26d78a=_0x523038[_0x1cee34],_0x2c51e6=_0x523038[_0x1cee34+(0x15b2+-0x169*0x1+-0x512*0x4)];if(_0x2c51e6[0x1b3e+-0x1d83*0x1+0x245]===xe['delimiter']){_0x27aeba=_0x2c51e6;continue;}_0x26d78a&&_0x2c51e6&&_0x26d78a[_0x26d78a['length']-(0x1196+-0x9af*-0x1+0x6d1*-0x4)]!==xe['delimiter']&&_0x2c51e6[-0x6b*0xb+0x1bbe+-0x1725]!==xe['delimiter']?_0x27aeba+=xe['delimiter']+_0x2c51e6:_0x27aeba+=_0x2c51e6;}return _0x27aeba;},'normalize'(_0x1f8c45){const _0x3d8b1a=_0x1f8c45['startsWith'](xe['delimiter']),_0x166792=_0x1f8c45['endsWith'](xe['delimiter']),_0x55c492=_0x1f8c45['split']('/');let _0xcf504c='',_0xc88b54=[];for(let _0x179ebc=0x146d+-0x2278+0xe0b;_0x179ebc<_0x55c492['length'];_0x179ebc++)if(_0x55c492[_0x179ebc]!==''&&_0x55c492[_0x179ebc]!=='.'){if(_0x55c492[_0x179ebc]==='..'&&_0xc88b54['length']>0x3bb+0xdb3+-0x116e){_0xc88b54=_0xc88b54['slice'](0x1f27+-0x876+0x16b1*-0x1,_0xc88b54['length']-(0x9bc+-0xe5f+0x4a5));continue;}_0x179ebc>-0x7a4*0x1+0xdd1+-0x62d&&_0xc88b54['push'](xe['delimiter']),_0xc88b54['push'](_0x55c492[_0x179ebc]);}return _0xcf504c=_0xc88b54['join'](''),!_0x3d8b1a&&_0xcf504c[0x3*-0x3b7+-0x2700+0x3225]===xe['delimiter']&&(_0xcf504c=_0xcf504c['slice'](0x14be+0x1d7+-0x121*0x14)),_0x166792&&_0xcf504c[_0xcf504c['length']-(0x1*-0x6e9+-0x293*0xf+0x2d87)]!==xe['delimiter']&&(_0xcf504c+=xe['delimiter']),_0xcf504c;},'split'(_0xd040a7){const _0x29fd6a=_0xd040a7['lastIndexO'+'f'](xe['delimiter']);return _0x29fd6a!==-(-0x1*-0xb01+0x1*-0x1485+0x985)?[_0xd040a7['substring'](-0x333+0x2379+0xa2*-0x33,_0x29fd6a),_0xd040a7['substring'](_0x29fd6a+(0x1759+-0x1*0x2dc+-0x3*0x6d4))]:['',_0xd040a7];},'getBasename'(_0x5d106c){return xe['split'](_0x5d106c)[0x20e*0x9+-0x1a37+0x2b*0x2e];},'getDirectory'(_0x23aec1){return xe['split'](_0x23aec1)[-0x1f03+-0x1e53+-0x1*-0x3d56];},'getExtension'(_0x24b22a){const _0x5f4858=_0x24b22a['split']('?')[0x1*-0x1b6d+0x58*-0x6d+-0x1c1*-0x25]['split']('.')['pop']();return _0x5f4858!==_0x24b22a?'.'+_0x5f4858:'';},'isRelativePath'(_0x5919fb){return _0x5919fb['charAt'](-0x196b+0x1c8e+-0xb*0x49)!=='/'&&_0x5919fb['match'](/:\/\//)===null;},'extractPath'(_0xd7344a){let _0x2445b7='';const _0x5be392=_0xd7344a['split']('/');let _0x412021=-0x1dd5+-0x17a4+0x3579;if(_0x5be392['length']>-0x5*-0xb6+0x9*0x26d+-0x1962){if(xe['isRelative'+'Path'](_0xd7344a)){if(_0x5be392[-0x1*-0x26f6+0x2c5*-0x3+-0x461*0x7]==='.'){for(_0x412021=0x543*-0x1+-0xef9+0x143c;_0x412021<_0x5be392['length']-(-0xc7*-0x2f+-0x1611+-0x1*0xe77);++_0x412021)_0x2445b7+=_0x412021===-0x1cef*0x1+0x822+0x14cd?_0x5be392[_0x412021]:'/'+_0x5be392[_0x412021];}else{if(_0x5be392[-0x2135*-0x1+-0x25c1+0x48c]==='..'){for(_0x412021=0x10a2+-0x754+-0x1*0x94e;_0x412021<_0x5be392['length']-(0x2*-0x8fe+-0x1*0x405+0x1602);++_0x412021)_0x2445b7+=_0x412021===-0x1*0x601+-0x12d8+0x18d9*0x1?_0x5be392[_0x412021]:'/'+_0x5be392[_0x412021];}else{for(_0x2445b7='.',_0x412021=0xa7*0x5+-0x2494+0x2151;_0x412021<_0x5be392['length']-(0xe1*0x1+0x1175*0x1+-0x13*0xf7);++_0x412021)_0x2445b7+='/'+_0x5be392[_0x412021];}}}else{for(_0x412021=-0xd7e+-0x93f+-0x16bd*-0x1;_0x412021<_0x5be392['length']-(0x1bc2+0x6*-0x24b+-0xdff);++_0x412021)_0x2445b7+=_0x412021===0x16a3+0xfa1+-0x3e*0x9e?_0x5be392[_0x412021]:'/'+_0x5be392[_0x412021];}}return _0x2445b7;}},h0=()=>{let _0x5c3509=!(0x1dc6*-0x1+-0x1775+0x353c);try{const _0x37c305=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x5c3509=!(0xe22*0x1+0x1fe*-0x3+-0x828),!(0xc8*0x21+0x2cd+-0x2*0xe4a);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x37c305),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x37c305);}catch{}return _0x5c3509;},Di=typeof navigator<'u'?navigator['userAgent']:'',Ch=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',qm=/android/i['test'](Di)?'android':/ip(?:[ao]d|hone)/i['test'](Di)?'ios':/windows/i['test'](Di)?'windows':/mac os/i['test'](Di)?'osx':/linux/i['test'](Di)?'linux':/cros/i['test'](Di)?'cros':null,c0=Ch!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Di)?'chrome':/Safari\//['test'](Di)?'safari':/Firefox\//['test'](Di)?'firefox':'other',d0=Ch==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0xeee+0x555+0x15f*0x7),f0=h0(),Me={'name':qm,'browser':Ch==='browser','worker':Ch==='worker','android':qm==='android','touch':d0,'passiveEvents':f0,'browserName':c0},Jg='abcdefghij'+'klmnopqrst'+'uvwxyz',eS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',u0=Jg+eS,af=-0x4bb3+0x3a57*0x5+0x0,tS=0x4fe1+0x84*-0x131+0x12962,jm=0x1965b+0xb409+-0x83*0x2cc,m0=-0x1b108+-0xb*0x27c1+-0x16cc6*-0x3,p0=-0x89f*0x1+0x1d*-0x1d+0xb*0x3ff,Ym=-0x2f578+-0x1dd72+0x6c4d0,Km=-0x12127+-0x8*0xf6d+-0x1*-0x38e8e,_0=-0x30ea7+0x2f33+-0x1*-0x4d36f,g0=-0xab*0x15d+-0x1*-0x5eaf+0x27e6f,S0=0x737*-0x3+0xd57*0x3+0xe70,y0=-0xed6*-0x4+-0xf9e+-0x43*0x29,nf=0x491*0xb+0x183d2+0x7*-0x1a4b,of=-0xbbdb*-0x2+-0x3e2f*-0x7+0x22cf0*-0x1;function lf(_0x371014,_0x53c8a6=0x74*0x2a+0x9*-0x23b+-0x10b*-0x1){const _0x430bd4=_0x371014['length'];if(_0x53c8a6<0x1470+0x2*0xc61+0xd*-0x37a||_0x53c8a6>=_0x430bd4)return null;const _0x44f6b1=_0x371014['charCodeAt'](_0x53c8a6);if(_0x430bd4>-0x2*0x5bd+-0xd72*0x2+0xb*0x37d&&_0x44f6b1>=af&&_0x44f6b1<=tS){const _0x520648=_0x371014['charCodeAt'](_0x53c8a6+(0x82*0x4a+0x245*-0x6+0x1*-0x17f5));if(_0x520648>=jm&&_0x520648<=m0)return{'code':(_0x44f6b1-af)*(0x2*-0xcb3+-0xa3*-0x1d+0xaef)+_0x520648-jm+(-0x1e5cc*-0x1+-0x1cf60*-0x1+-0x2b52c),'long':!(0x2b8+0x15e7+-0x189f)};}return{'code':_0x44f6b1,'long':!(0x1eb+0x1056+0x2*-0x920)};}function Qi(_0x12541c,_0xbe5432,_0x97c5b3){if(!_0x12541c)return!(0xeb3+-0x1be9+0xd37);const _0x95ad8d=lf(_0x12541c);if(_0x95ad8d){const _0x59554c=_0x95ad8d['code'];return _0x59554c>=_0xbe5432&&_0x59554c<=_0x97c5b3;}return!(0x114*0x11+-0x1*-0xb11+0x156*-0x16);}function v0(_0x4c0a56,_0x1ed24a){if(_0x1ed24a===_0x4c0a56['length']-(-0x4ba*0x1+-0x10f8+0x15b3))return 0x1e6a+-0x40f*-0x5+-0x32b4;if(Qi(_0x4c0a56[_0x1ed24a],af,tS)){const _0xd59431=_0x4c0a56['substring'](_0x1ed24a,_0x1ed24a+(0x29e+-0x16a3+0x1407*0x1)),_0x4b5c31=_0x4c0a56['substring'](_0x1ed24a+(0xbf9+0x1*0x232f+0x11*-0x2c6),_0x1ed24a+(-0x187+-0xb*-0xd6+-0x7a7));return Qi(_0x4b5c31,_0,g0)||Qi(_0xd59431,Ym,Km)&&Qi(_0x4b5c31,Ym,Km)?-0x2476+-0x1*0x6c3+0x2b3d:Qi(_0x4b5c31,nf,of)?0x2029+-0xe61+0x11c5*-0x1:-0x1*0x3bc+0x1127+-0x1*0xd69;}return Qi(_0x4c0a56[_0x1ed24a+(-0x254+0x16a0+-0x144b)],nf,of)?-0x536*-0x1+0x1*-0x1b3+-0x381:0x244d+-0x417*0x2+0x1*-0x1c1e;}const dh={'ASCII_LOWERCASE':Jg,'ASCII_UPPERCASE':eS,'ASCII_LETTERS':u0,'format'(_0x3be198,..._0x24114b){for(let _0x157bff=0xe93+-0x1bcd+-0x1*-0xd3a;_0x157bff<_0x24114b['length'];_0x157bff++)_0x3be198=_0x3be198['replace']('{'+_0x157bff+'}',_0x24114b[_0x157bff]);return _0x3be198;},'getCodePoint'(_0x37baef,_0x117b39){const _0x567cb9=lf(_0x37baef,_0x117b39);return _0x567cb9&&_0x567cb9['code'];},'getCodePoints'(_0x38f3c4){if(typeof _0x38f3c4!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x1b517a=-0x1*-0x258d+-0xf83+-0x160a;const _0x17e013=[];let _0x439ef3;for(;_0x439ef3=lf(_0x38f3c4,_0x1b517a);)_0x17e013['push'](_0x439ef3['code']),_0x1b517a+=_0x439ef3['long']?0x22eb*0x1+-0x1fec+-0x2fd:0x1b01*-0x1+-0x18f+-0x1c91*-0x1;return _0x17e013;},'getSymbols'(_0x58ef06){if(typeof _0x58ef06!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x34dfeb=0x2d*0x76+0x7c6+-0x1c84;const _0x3301ce=_0x58ef06['length'],_0x12af45=[];let _0x57700b=-0x3fd+-0x1*-0x2293+-0x1e96,_0x354b63;for(;_0x34dfeb<_0x3301ce;){if(_0x57700b+=v0(_0x58ef06,_0x34dfeb+_0x57700b),_0x354b63=_0x58ef06[_0x34dfeb+_0x57700b],Qi(_0x354b63,S0,y0)&&(_0x354b63=_0x58ef06[_0x34dfeb+_0x57700b++]),Qi(_0x354b63,nf,of)&&(_0x354b63=_0x58ef06[_0x34dfeb+_0x57700b++]),_0x354b63&&_0x354b63['charCodeAt'](-0x4*0x473+-0x880+0x1a4c)===p0){_0x354b63=_0x58ef06[_0x34dfeb+_0x57700b++];continue;}const _0x2f6a55=_0x58ef06['substring'](_0x34dfeb,_0x34dfeb+_0x57700b);_0x12af45['push'](_0x2f6a55),_0x34dfeb+=_0x57700b,_0x57700b=0x1638+0xc4e+-0x2286;}return _0x12af45;},'fromCodePoint'(..._0x516961){return _0x516961['map'](_0x426065=>_0x426065>0x14267+0x1*0x383a+-0x7aa2*0x1?(_0x426065-=0x8*-0x967+-0x1*-0xece7+0x37*0x1b7,String['fromCharCo'+'de']((_0x426065>>-0x15aa+0xe2*-0x1f+0x3112)+(0x28*0x332+0x1608b+-0x1085b*0x1),_0x426065%(0x24b*0x5+0x1fdf*-0x1+0x1868)+(-0x3a54*-0x2+-0x17fdb+0x1e733))):String['fromCharCo'+'de'](_0x426065))['join']('');}},kr=class kr{static['set'](_0x158175,_0xe8c456=!(0xc*-0x210+-0x1*0x189e+0x315e)){_0xe8c456?kr['_traceChan'+'nels']['add'](_0x158175):kr['_traceChan'+'nels']['delete'](_0x158175);}static['get'](_0x561016){return kr['_traceChan'+'nels']['has'](_0x561016);}};h(kr,'_traceChan'+'nels',new Set()),h(kr,'stack',!(0x1*0x15eb+0x2e*0x3e+-0x210e));let ni=kr;const Ot=class Ot{static['deprecated'](_0x3fd0be){Ot['_loggedMes'+'sages']['has'](_0x3fd0be)||(Ot['_loggedMes'+'sages']['add'](_0x3fd0be),console['warn']('DEPRECATED'+':\x20'+_0x3fd0be));}static['removed'](_0x2bd730){Ot['_loggedMes'+'sages']['has'](_0x2bd730)||(Ot['_loggedMes'+'sages']['add'](_0x2bd730),console['error']('REMOVED:\x20'+_0x2bd730));}static['assertDepr'+'ecated'](_0x331d2b,_0x371ae4){_0x331d2b||Ot['deprecated'](_0x371ae4);}static['assert'](_0x422d8d,..._0x49a422){_0x422d8d||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x49a422);}static['assertDest'+'royed'](_0x23e6a1){var _0x1a7e10;if(_0x23e6a1!=null&&_0x23e6a1['__alreadyD'+'estroyed']){const _0x53f551='['+((_0x1a7e10=_0x23e6a1['constructo'+'r'])==null?void(0x1*0x265+0xfc9*0x1+-0x122e):_0x1a7e10['name'])+(']\x20with\x20nam'+'e\x20[')+_0x23e6a1['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Ot['_loggedMes'+'sages']['has'](_0x53f551)||(Ot['_loggedMes'+'sages']['add'](_0x53f551),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x53f551,_0x23e6a1));}}static['call'](_0xb7aab1){_0xb7aab1();}static['log'](..._0xc5d662){console['log'](..._0xc5d662);}static['logOnce'](_0x5162d6,..._0x572451){Ot['_loggedMes'+'sages']['has'](_0x5162d6)||(Ot['_loggedMes'+'sages']['add'](_0x5162d6),console['log'](_0x5162d6,..._0x572451));}static['warn'](..._0x2454fe){console['warn'](..._0x2454fe);}static['warnOnce'](_0x111711,..._0x35269a){Ot['_loggedMes'+'sages']['has'](_0x111711)||(Ot['_loggedMes'+'sages']['add'](_0x111711),console['warn'](_0x111711,..._0x35269a));}static['error'](..._0x308dcb){console['error'](..._0x308dcb);}static['errorOnce'](_0x34482c,..._0x526d84){Ot['_loggedMes'+'sages']['has'](_0x34482c)||(Ot['_loggedMes'+'sages']['add'](_0x34482c),console['error'](_0x34482c,..._0x526d84));}static['trace'](_0x5e3ca5,..._0x53d4c2){ni['get'](_0x5e3ca5)&&(console['groupColla'+'psed'](_0x5e3ca5['padEnd'](-0x1e7a+-0x1bd5+-0x1*-0x3a63,'\x20')+'|',..._0x53d4c2),console['groupEnd']());}};h(Ot,'_loggedMes'+'sages',new Set());let M=Ot;class ca{static['setName'](_0x2e7495,_0x3acf42){_0x2e7495&&(_0x2e7495['name']=_0x3acf42);}static['setLabel'](_0xaeb36b,_0x45faec){_0xaeb36b&&(_0xaeb36b['label']=_0x45faec);}static['setDestroy'+'ed'](_0x48c1bb){_0x48c1bb&&(_0x48c1bb['__alreadyD'+'estroyed']=!(-0x1b*-0x4b+0x2702+-0x2eeb));}}class x0{constructor(_0x4fe339,_0x34cede,_0x38d40c,_0x3e38a9,_0x2b457e=!(0x10f*0x1b+0x29e+-0x1f32)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x1a92+0x4*-0xc6+-0x5*-0x5ef)),(this['handler']=_0x4fe339,this['name']=_0x34cede,this['callback']=_0x38d40c,this['scope']=_0x3e38a9,this['_once']=_0x2b457e);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x363af4,_0x59fedd,_0x5ae0ee=this){return M['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x363af4,_0x59fedd,_0x5ae0ee,!(0x3*-0x85f+-0x5*-0x719+0x375*-0x3));}['once'](_0x4ba695,_0x830908,_0x5f4204=this){return M['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x4ba695,_0x830908,_0x5f4204,!(0x3*-0xb2d+0x26*-0x46+0x2beb));}set['removed'](_0x3687a1){_0x3687a1&&(this['_removed']=!(0x266c+-0x2652+-0x1a));}get['removed'](){return this['_removed'];}['toJSON'](_0x418eae){}}class pe{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x23dd30,_0x512c35,_0x56520b,_0x1fde96){if((!_0x23dd30||typeof _0x23dd30!='string'||!_0x512c35)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x23dd30+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x512c35),this['_callbacks']['has'](_0x23dd30)||this['_callbacks']['set'](_0x23dd30,[]),this['_callbackA'+'ctive']['has'](_0x23dd30)){const _0x41f5cb=this['_callbackA'+'ctive']['get'](_0x23dd30);_0x41f5cb&&_0x41f5cb===this['_callbacks']['get'](_0x23dd30)&&this['_callbackA'+'ctive']['set'](_0x23dd30,_0x41f5cb['slice']());}const _0x49dd6b=new x0(this,_0x23dd30,_0x512c35,_0x56520b,_0x1fde96);return this['_callbacks']['get'](_0x23dd30)['push'](_0x49dd6b),_0x49dd6b;}['on'](_0x3e3d82,_0x4cfe41,_0x44a86b=this){return this['_addCallba'+'ck'](_0x3e3d82,_0x4cfe41,_0x44a86b,!(0xfde+0x5*-0x104+-0xfb*0xb));}['once'](_0x854252,_0xb571ca,_0x36be90=this){return this['_addCallba'+'ck'](_0x854252,_0xb571ca,_0x36be90,!(-0x1c2e+0x1b45+0x1*0xe9));}['off'](_0x4fc8b8,_0x15514c,_0x2a82d5){if(_0x4fc8b8)this['_callbackA'+'ctive']['has'](_0x4fc8b8)&&this['_callbackA'+'ctive']['get'](_0x4fc8b8)===this['_callbacks']['get'](_0x4fc8b8)&&this['_callbackA'+'ctive']['set'](_0x4fc8b8,this['_callbackA'+'ctive']['get'](_0x4fc8b8)['slice']());else{for(const [_0x13c077,_0x350a59]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x13c077)&&this['_callbacks']['get'](_0x13c077)===_0x350a59&&this['_callbackA'+'ctive']['set'](_0x13c077,_0x350a59['slice']());}if(_0x4fc8b8){if(_0x15514c){const _0x502bbf=this['_callbacks']['get'](_0x4fc8b8);if(!_0x502bbf)return this;for(let _0x3307e4=0x1079+0x1daa+-0x2e23;_0x3307e4<_0x502bbf['length'];_0x3307e4++)_0x502bbf[_0x3307e4]['callback']===_0x15514c&&(_0x2a82d5&&_0x502bbf[_0x3307e4]['scope']!==_0x2a82d5||(_0x502bbf[_0x3307e4]['removed']=!(0x2*-0x98c+0x3*-0x45+-0x5*-0x3fb),_0x502bbf['splice'](_0x3307e4,0x15*-0xcf+-0x1c4f+-0x3*-0xf19),_0x3307e4--));_0x502bbf['length']===-0x494*0x8+-0x9c5*0x1+0x2e65&&this['_callbacks']['delete'](_0x4fc8b8);}else{const _0xe1a4b3=this['_callbacks']['get'](_0x4fc8b8);if(_0xe1a4b3){for(let _0x48ecf4=0x2ee*-0x7+-0xc9f*0x3+0x3a5f;_0x48ecf4<_0xe1a4b3['length'];_0x48ecf4++)_0xe1a4b3[_0x48ecf4]['removed']=!(0xcca+0x1*0x1fbb+-0x2c85);this['_callbacks']['delete'](_0x4fc8b8);}}}else{for(const _0x10a08a of this['_callbacks']['values']())for(let _0x27552b=0xd*-0x1cc+0x8ea+0xe72;_0x27552b<_0x10a08a['length'];_0x27552b++)_0x10a08a[_0x27552b]['removed']=!(0x266*-0x3+-0x970+0x10a2);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x3b0e75){const _0x406ed5=_0x3b0e75['name'];_0x3b0e75['removed']=!(-0x1888+0x1*0x14cf+0x3b9),this['_callbackA'+'ctive']['has'](_0x406ed5)&&this['_callbackA'+'ctive']['get'](_0x406ed5)===this['_callbacks']['get'](_0x406ed5)&&this['_callbackA'+'ctive']['set'](_0x406ed5,this['_callbackA'+'ctive']['get'](_0x406ed5)['slice']());const _0x3d27ac=this['_callbacks']['get'](_0x406ed5);if(!_0x3d27ac)return this;const _0x1a7713=_0x3d27ac['indexOf'](_0x3b0e75);return _0x1a7713!==-(0x11c7+-0xc2b+0x1*-0x59b)&&(_0x3d27ac['splice'](_0x1a7713,-0x1*-0x23dd+0x1*-0x1696+-0xd46),_0x3d27ac['length']===0xf*-0x16f+0x137b+0x206&&this['_callbacks']['delete'](_0x406ed5)),this;}['fire'](_0x4ce413,_0xfbacce,_0x3edd4c,_0x57d623,_0x16144d,_0x11792d,_0x1ce5d1,_0x5ab51b,_0x1ff71f){if(!_0x4ce413)return this;const _0x305027=this['_callbacks']['get'](_0x4ce413);if(!_0x305027)return this;let _0x14e962;this['_callbackA'+'ctive']['has'](_0x4ce413)?this['_callbackA'+'ctive']['get'](_0x4ce413)!==_0x305027&&(_0x14e962=_0x305027['slice']()):this['_callbackA'+'ctive']['set'](_0x4ce413,_0x305027);for(let _0x4ff5d9=0xe10+-0xf4a+0x13a;(_0x14e962||this['_callbackA'+'ctive']['get'](_0x4ce413))&&_0x4ff5d9<(_0x14e962||this['_callbackA'+'ctive']['get'](_0x4ce413))['length'];_0x4ff5d9++){const _0x1ff31a=(_0x14e962||this['_callbackA'+'ctive']['get'](_0x4ce413))[_0x4ff5d9];if(_0x1ff31a['callback']&&(_0x1ff31a['callback']['call'](_0x1ff31a['scope'],_0xfbacce,_0x3edd4c,_0x57d623,_0x16144d,_0x11792d,_0x1ce5d1,_0x5ab51b,_0x1ff71f),_0x1ff31a['_once'])){const _0x4db8c1=this['_callbacks']['get'](_0x4ce413),_0x25f0e3=_0x4db8c1?_0x4db8c1['indexOf'](_0x1ff31a):-(0x24d3+0x1*0x4a+0x4c*-0x7d);if(_0x25f0e3!==-(0x1a*0xec+-0x1a8e+-0x33*-0xd)){this['_callbackA'+'ctive']['get'](_0x4ce413)===_0x4db8c1&&this['_callbackA'+'ctive']['set'](_0x4ce413,this['_callbackA'+'ctive']['get'](_0x4ce413)['slice']());const _0x3705ab=this['_callbacks']['get'](_0x4ce413);if(!_0x3705ab)continue;_0x3705ab[_0x25f0e3]['removed']=!(-0x47b*-0x7+-0x2e*-0x3d+0x3d9*-0xb),_0x3705ab['splice'](_0x25f0e3,-0x16f3+-0x3bb+0x1aaf),_0x3705ab['length']===0x140c+-0xe*-0x1be+-0x2c70&&this['_callbacks']['delete'](_0x4ce413);}}}return _0x14e962||this['_callbackA'+'ctive']['delete'](_0x4ce413),this;}['hasEvent'](_0x138ade){var _0x4c267b;return!!((_0x4c267b=this['_callbacks']['get'](_0x138ade))!=null&&_0x4c267b['length']);}}class T0{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x40aae2,_0xd4bed2){if(this['_index'][_0x40aae2])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x40aae2);const _0x7cc27b=this['_list']['push'](_0xd4bed2)-(-0xcd7+0x184f+-0x24b*0x5);this['_index'][_0x40aae2]=_0x7cc27b;}['has'](_0x11bb92){return this['_index'][_0x11bb92]!==void(0x52*0x4+0x1e39+0x1*-0x1f81);}['get'](_0x8832e1){const _0x232d36=this['_index'][_0x8832e1];return _0x232d36!==void(-0x17d4*0x1+0x21b7+-0x1*0x9e3)?this['_list'][_0x232d36]:null;}['remove'](_0x3724b8){const _0xc89e22=this['_index'][_0x3724b8];if(_0xc89e22!==void(0x17*0x82+-0xf5a+0x3ac)){this['_list']['splice'](_0xc89e22,-0x1c4b*0x1+0x1472*-0x1+0x30be),delete this['_index'][_0x3724b8];for(_0x3724b8 in this['_index']){const _0xf75bfe=this['_index'][_0x3724b8];_0xf75bfe>_0xc89e22&&(this['_index'][_0x3724b8]=_0xf75bfe-(-0x16*0x187+-0xe*-0x14b+0xf81));}return!(-0xc1f+0xd*0x2a1+0x6*-0x3ad);}return!(0x1b*0x4c+0x22e6+-0x41*0xa9);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0x1269*0x2+-0x2172+0x4644;for(const _0x2aa0ac in this['_index'])delete this['_index'][_0x2aa0ac];}}const w0=_0x5d84f3=>{const _0x460c0d={};let _0x545841=_0x460c0d;return()=>(_0x545841===_0x460c0d&&(_0x545841=_0x5d84f3()),_0x545841);},qs=class qs{static['loadScript'](_0x6f97a,_0x29ab07){const _0x1c0d10=document['createElem'+'ent']('script');_0x1c0d10['setAttribu'+'te']('src',_0x6f97a),_0x1c0d10['onload']=()=>{_0x29ab07(null);},_0x1c0d10['onerror']=()=>{_0x29ab07('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x6f97a+'\x27');},document['body']['appendChil'+'d'](_0x1c0d10);}static['loadWasm'](_0x31086b,_0x52bdad,_0x3e3c69){const _0x186a9b=qs['wasmSuppor'+'ted']()&&_0x52bdad['glueUrl']&&_0x52bdad['wasmUrl']?_0x52bdad['glueUrl']:_0x52bdad['fallbackUr'+'l'];_0x186a9b?qs['loadScript'](_0x186a9b,_0x3e75f6=>{if(_0x3e75f6)_0x3e3c69(_0x3e75f6,null);else{const _0xb0ab46=window[_0x31086b];window[_0x31086b]=void(0x1*-0x902+0x202+0x700),_0xb0ab46({'locateFile':()=>_0x52bdad['wasmUrl'],'onAbort':()=>{_0x3e3c69('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x3ce1c3=>{_0x3e3c69(null,_0x3ce1c3);});}}):_0x3e3c69('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x2008b9){return qs['modules']['hasOwnProp'+'erty'](_0x2008b9)||(qs['modules'][_0x2008b9]={'config':null,'initializing':!(-0x24f7+-0x1*0x17f+0x2677),'instance':null,'callbacks':[]}),qs['modules'][_0x2008b9];}static['initialize'](_0x5f2d22,_0x4bc7a7){if(_0x4bc7a7['initializi'+'ng'])return;const _0x3b0b27=_0x4bc7a7['config'];(_0x3b0b27['glueUrl']||_0x3b0b27['wasmUrl']||_0x3b0b27['fallbackUr'+'l'])&&(_0x4bc7a7['initializi'+'ng']=!(-0x1435+-0xed3+0x2308),qs['loadWasm'](_0x5f2d22,_0x3b0b27,(_0x5bde7c,_0x1f73b7)=>{_0x5bde7c?_0x3b0b27['errorHandl'+'er']?_0x3b0b27['errorHandl'+'er'](_0x5bde7c):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x5f2d22+'\x20error='+_0x5bde7c):(_0x4bc7a7['instance']=_0x1f73b7,_0x4bc7a7['callbacks']['forEach'](_0x5deb99=>{_0x5deb99(_0x1f73b7);}));}));}};h(qs,'modules',{}),h(qs,'wasmSuppor'+'ted',w0(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x10935a=new WebAssembly['Module'](Uint8Array['of'](-0x66a*0x2+-0x289*0x5+0x1981,-0x989*-0x3+0x1005+-0x2c3f,0x26d*-0xf+0x301*-0xb+-0x3*-0x174b,-0x1*-0x2387+-0x93a+-0x19e0,0x26a8*-0x1+-0x2*0x67d+-0x1*-0x33a3,-0xb65*-0x1+0xe*-0x1fd+0x1071,-0x11ca+0x1*0x26ed+0x7*-0x305,-0x1357+-0x55*-0x25+0x70e));if(_0x10935a instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x10935a)instanceof WebAssembly['Instance'];}}catch{}return!(0x2*0x9aa+-0x2199+-0x7*-0x20a);}));let Fr=qs;class sS{static['setConfig'](_0x27991c,_0x280bec){const _0x3f611a=Fr['getModule'](_0x27991c);_0x3f611a['config']=_0x280bec,_0x3f611a['callbacks']['length']>0x1*0x329+-0xd*-0x23d+-0x1*0x2042&&Fr['initialize'](_0x27991c,_0x3f611a);}static['getConfig'](_0x3057dc){var _0x4cde78,_0x13e751;return(_0x13e751=(_0x4cde78=Fr['modules'])==null?void(0x6d5+-0x2*-0x825+-0x171f):_0x4cde78[_0x3057dc])==null?void(-0x142a+0x6c8+-0x2*-0x6b1):_0x13e751['config'];}static['getInstanc'+'e'](_0x2a464e,_0x2ecccb){const _0x49486c=Fr['getModule'](_0x2a464e);_0x49486c['instance']?_0x2ecccb(_0x49486c['instance']):(_0x49486c['callbacks']['push'](_0x2ecccb),_0x49486c['config']&&Fr['initialize'](_0x2a464e,_0x49486c));}}class iS{constructor(_0x51dde1){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0x1c73+-0x1cb*-0x7+-0x1480*0x2),(this['arraybuffe'+'r']=_0x51dde1,this['dataView']=new DataView(_0x51dde1));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x43a474=-0x1*0xc9d+-0x20ea+0x2d87){this['offset']=_0x43a474;}['skip'](_0x5d0f3a){this['offset']+=_0x5d0f3a;}['align'](_0x1a837a){this['offset']=this['offset']+_0x1a837a-(0x26*0xf8+0xdd7+-0x32a6*0x1)&~(_0x1a837a-(-0x5b5+0xb12*-0x2+0x1bda));}['_inc'](_0x2126cf){return this['offset']+=_0x2126cf,this['offset']-_0x2126cf;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x441d12){let _0x1bf53b='';for(let _0x44b634=-0x124b*-0x1+0x7*0x465+-0x310e;_0x44b634<_0x441d12;++_0x44b634)_0x1bf53b+=this['readChar']();return _0x1bf53b;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](0x2076+-0x173f+-0x1*0x935),!(0x1f5f+0x5*-0x34e+-0x7*0x21f));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](0x1*-0x6dd+0x1*0x9bb+-0x2da),!(-0x168f+-0x8*-0x221+0x587));}['readU64'](){return this['readU32']()+(-0x199*-0x17+-0x19b7+-0xb06)**(-0xe*-0x297+-0x13*-0x82+-0x4*0xb72)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](0x1dc2+0x1d6*0xd+-0x124*0x2f),!(0x1*0x1d1d+-0x1*0x1283+-0xa99));}['readArray'](_0x4818a0){for(let _0x3882fc=0x10c6+-0x170f+0x649*0x1;_0x3882fc<_0x4818a0['length'];++_0x3882fc)_0x4818a0[_0x3882fc]=this['readU8']();}['readLine'](){const _0x1fd673=this['dataView'];let _0x49314b='';for(;!(this['offset']>=_0x1fd673['byteLength']);){const _0x8466b=String['fromCharCo'+'de'](this['readU8']());if(_0x8466b==='\x0a')break;_0x49314b+=_0x8466b;}return _0x49314b;}}class Ph{constructor(_0x19344c){h(this,'items',[]),h(this,'length',0x6*0x3a6+-0x16a*0xe+0x43*-0x8),h(this,'loopIndex',-(0x7*0x76+0x52*-0x49+0x1429*0x1)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x19344c['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x5dfbfd){let _0x5e5bfb=-0x1cd*0x5+-0xf43*-0x2+-0x1585,_0xae43cd=this['items']['length']-(-0x26bb+0xc7d*-0x1+0x3339);const _0x38536d=_0x5dfbfd[this['_sortBy']];let _0x4a6386,_0x1a7407;for(;_0x5e5bfb<=_0xae43cd;)_0x4a6386=Math['floor']((_0x5e5bfb+_0xae43cd)/(-0x75f+-0x1ac9+0x222a)),_0x1a7407=this['items'][_0x4a6386][this['_sortBy']],_0x1a7407<=_0x38536d?_0x5e5bfb=_0x4a6386+(-0x1543*0x1+-0x1*-0x1df6+-0x2*0x459):_0x1a7407>_0x38536d&&(_0xae43cd=_0x4a6386-(-0x1942*-0x1+-0x1a03*-0x1+-0x3344*0x1));return _0x5e5bfb;}['_doSort'](_0xc65b45,_0x48d513){const _0x510559=this['_sortBy'];return _0xc65b45[_0x510559]-_0x48d513[_0x510559];}['insert'](_0x32c5cc){const _0x366486=this['_binarySea'+'rch'](_0x32c5cc);this['items']['splice'](_0x366486,0x269*0x1+-0x3*0xa81+0x5*0x5d2,_0x32c5cc),this['length']++,this['loopIndex']>=_0x366486&&this['loopIndex']++;}['append'](_0xa744fb){this['items']['push'](_0xa744fb),this['length']++;}['remove'](_0x1bbc9b){const _0x44e362=this['items']['indexOf'](_0x1bbc9b);_0x44e362<-0x21a3+-0x1af9+0x3c9c||(this['items']['splice'](_0x44e362,-0x21b*-0xb+0x7*0x407+-0xef*0x37),this['length']--,this['loopIndex']>=_0x44e362&&this['loopIndex']--);}['sort'](){const _0xd43b0f=this['loopIndex']>=0xa5*-0x13+-0x1d15+-0x5c*-0x73?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0xd43b0f!==null&&(this['loopIndex']=this['items']['indexOf'](_0xd43b0f));}}class uo extends pe{constructor(_0x22f8a3){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x22f8a3;}['add'](..._0xdb17ab){let _0x230f9f=!(-0x9*-0x93+0x77c*0x3+-0xdcf*0x2);const _0x1ef9a8=this['_processAr'+'guments'](_0xdb17ab,!(0x7*-0x125+-0x19*0x186+-0x2e19*-0x1));if(!_0x1ef9a8['length'])return _0x230f9f;for(let _0xbbedb1=-0x1054+0x786+0x8ce;_0xbbedb1<_0x1ef9a8['length'];_0xbbedb1++)this['_index'][_0x1ef9a8[_0xbbedb1]]||(_0x230f9f=!(-0x24cc+0x211c+0x3b0),this['_index'][_0x1ef9a8[_0xbbedb1]]=!(-0x47*-0xb+-0x220c+-0x1*-0x1eff),this['_list']['push'](_0x1ef9a8[_0xbbedb1]),this['fire']('add',_0x1ef9a8[_0xbbedb1],this['_parent']));return _0x230f9f&&this['fire']('change',this['_parent']),_0x230f9f;}['remove'](..._0x1ef3b2){let _0x4bdc45=!(0x13*-0x203+0x418+-0x2222*-0x1);if(!this['_list']['length'])return _0x4bdc45;const _0x57aa1e=this['_processAr'+'guments'](_0x1ef3b2,!(-0x1*-0x23c6+0x1723+-0xb*0x55b));if(!_0x57aa1e['length'])return _0x4bdc45;for(let _0x375f9f=-0xdee*-0x1+0x89*-0x42+0x1564;_0x375f9f<_0x57aa1e['length'];_0x375f9f++)this['_index'][_0x57aa1e[_0x375f9f]]&&(_0x4bdc45=!(0x13bf+0x19*-0x71+-0x8b6),delete this['_index'][_0x57aa1e[_0x375f9f]],this['_list']['splice'](this['_list']['indexOf'](_0x57aa1e[_0x375f9f]),0x23ac+0xc75+-0x3020),this['fire']('remove',_0x57aa1e[_0x375f9f],this['_parent']));return _0x4bdc45&&this['fire']('change',this['_parent']),_0x4bdc45;}['clear'](){if(!this['_list']['length'])return;const _0x483e37=this['_list']['slice'](-0x1646*0x1+-0xdf7+0x243d);this['_list']=[],this['_index']={};for(let _0x26fcf5=-0x4cf*-0x1+-0x2*-0x6ad+-0x1229;_0x26fcf5<_0x483e37['length'];_0x26fcf5++)this['fire']('remove',_0x483e37[_0x26fcf5],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x22d147){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x22d147)):!(-0x1a5*0x16+-0x32c+-0x193*-0x19);}['_has'](_0x310fad){if(!this['_list']['length']||!_0x310fad['length'])return!(0x1379+-0x106b+-0x1*0x30d);for(let _0x3f3a41=0x1*0x51e+-0x154b+0x102d;_0x3f3a41<_0x310fad['length'];_0x3f3a41++)if(_0x310fad[_0x3f3a41]['length']===-0x2098+-0x85d*-0x3+-0x782*-0x1){if(this['_index'][_0x310fad[_0x3f3a41][0xa21*0x2+-0x3*0x171+-0x1*0xfef]])return!(-0x2*-0x1372+0x43*0x10+-0x2b14);}else{let _0xe6a009=!(-0x2*-0xb09+-0x1*-0x1b84+-0xb*0x482);for(let _0x470db1=-0x13a2+0x1*-0x1a6b+-0x1*-0x2e0d;_0x470db1<_0x310fad[_0x3f3a41]['length'];_0x470db1++)if(!this['_index'][_0x310fad[_0x3f3a41][_0x470db1]]){_0xe6a009=!(-0x1390+0x751*-0x2+0x2233*0x1);break;}if(_0xe6a009)return!(0x42a+0x1801*-0x1+-0x69d*-0x3);}return!(-0x1*0x2ee+0x907*0x4+0xb0f*-0x3);}['list'](){return this['_list']['slice'](-0x17a2+0x1103*-0x2+0x39a8);}['_processAr'+'guments'](_0x33cace,_0x4dc397){const _0x1d8327=[];let _0x549d78=[];if(!_0x33cace||!_0x33cace['length'])return _0x1d8327;for(let _0x1e19b0=-0x24df*0x1+0x5*0x2ba+0x3*0x7bf;_0x1e19b0<_0x33cace['length'];_0x1e19b0++)if(_0x33cace[_0x1e19b0]instanceof Array){_0x4dc397||(_0x549d78=[]);for(let _0x28c106=0x1d30+-0xbf5*-0x1+-0x2925;_0x28c106<_0x33cace[_0x1e19b0]['length'];_0x28c106++)typeof _0x33cace[_0x1e19b0][_0x28c106]=='string'&&(_0x4dc397?_0x1d8327['push'](_0x33cace[_0x1e19b0][_0x28c106]):_0x549d78['push'](_0x33cace[_0x1e19b0][_0x28c106]));!_0x4dc397&&_0x549d78['length']&&_0x1d8327['push'](_0x549d78);}else typeof _0x33cace[_0x1e19b0]=='string'&&(_0x4dc397?_0x1d8327['push'](_0x33cace[_0x1e19b0]):_0x1d8327['push']([_0x33cace[_0x1e19b0]]));return _0x1d8327;}get['size'](){return this['_list']['length'];}}h(uo,'EVENT_ADD','add'),h(uo,'EVENT_REMO'+'VE','remove'),h(uo,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],E0=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class id{constructor(_0x4541c2){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x15384d=_0x4541c2['match'](E0);this['scheme']=_0x15384d[-0x161*0x19+0x7*-0xcb+0x2808],this['authority']=_0x15384d[-0x27*-0xf9+0xddd+0xcf2*-0x4],this['path']=_0x15384d[-0x13*-0x1b9+0x1f39+-0x4eb*0xd],this['query']=_0x15384d[0x142c*0x1+-0x2247+0x6*0x25b],this['fragment']=_0x15384d[-0x1*-0xfad+0xeef*-0x1+-0xb5];}['toString'](){let _0x85d36='';return this['scheme']&&(_0x85d36+=this['scheme']+':'),this['authority']&&(_0x85d36+='//'+this['authority']),_0x85d36+=this['path'],this['query']&&(_0x85d36+='?'+this['query']),this['fragment']&&(_0x85d36+='#'+this['fragment']),_0x85d36;}['getQuery'](){const _0x1f2bce={};if(this['query']){const _0x5716ce=decodeURIComponent(this['query'])['split']('&');for(const _0xfe513e of _0x5716ce){const _0x9ff7a5=_0xfe513e['split']('=');_0x1f2bce[_0x9ff7a5[0x165a+-0x1394+-0x2c6]]=_0x9ff7a5[-0x1c4c+-0x12*0xa+0xe1*0x21];}}return _0x1f2bce;}['setQuery'](_0xd47e71){let _0x1c2416='';for(const _0x3f9f9a in _0xd47e71)_0xd47e71['hasOwnProp'+'erty'](_0x3f9f9a)&&(_0x1c2416!==''&&(_0x1c2416+='&'),_0x1c2416+=encodeURIComponent(_0x3f9f9a)+'='+encodeURIComponent(_0xd47e71[_0x3f9f9a]));this['query']=_0x1c2416;}}const A0=0x905*0x3+0x51*0x5+0x3*-0x98c,vu=-0x5a4+0x1f07+0x1*-0x1962,Zm=-0x173e+0x1ff4+-0x6a*0x15,b0=-0x2240+-0x1b28+-0x5*-0xc49,Y={'DEG_TO_RAD':Math['PI']/(0x1*0x20dc+-0x3a2*0x2+-0x18e4),'RAD_TO_DEG':(0x34*0xc0+-0x5ab+0x20a1*-0x1)/Math['PI'],'clamp'(_0x38ed0b,_0x1588c7,_0x5b7447){return _0x38ed0b>=_0x5b7447?_0x5b7447:_0x38ed0b<=_0x1588c7?_0x1588c7:_0x38ed0b;},'intToBytes24'(_0x5f1022){const _0x133e25=_0x5f1022>>0x120e*0x1+-0x3*-0x7c2+-0x2944&0xc27*0x3+-0x35c+-0x201a,_0x25fe0c=_0x5f1022>>0x1b9f+0x19ad+-0x4*0xd51&0x499+-0x1387*0x1+0x1c5*0x9,_0x15d1f6=_0x5f1022&0x2b9+0x1f4*0x5+-0xb7e;return[_0x133e25,_0x25fe0c,_0x15d1f6];},'intToBytes32'(_0x31ed1f){const _0x54d1d4=_0x31ed1f>>-0x3aa*0x7+-0xa89+0x1*0x2447&0x62+-0x25d5+-0x1*-0x2672,_0x257d47=_0x31ed1f>>0x1447+-0x86d+-0x6*0x1f7&-0x572+0x1929+-0x12b8,_0x5da8ad=_0x31ed1f>>-0x1*-0x26c+0x1bb0+0x2*-0xf0a&-0x2139+0x17bf+-0x1*-0xa79,_0x36bcab=_0x31ed1f&0x11ef*-0x1+0x2602+0x21*-0x94;return[_0x54d1d4,_0x257d47,_0x5da8ad,_0x36bcab];},'bytesToInt24'(_0x49201f,_0x4e1c01,_0x2243d){return _0x49201f['length']&&(_0x2243d=_0x49201f[-0x129b+-0x2*0x3bf+0x1a1b],_0x4e1c01=_0x49201f[-0xb*0x259+-0x101c+-0x3d0*-0xb],_0x49201f=_0x49201f[0x2003+0x227f*0x1+-0x4282]),_0x49201f<<0x1*0x21fe+0x157e+-0x1*0x376c|_0x4e1c01<<0x2653+0x2*-0x68b+-0x1935|_0x2243d;},'bytesToInt32'(_0x12bbc0,_0x33d360,_0x413395,_0x26dc2a){return _0x12bbc0['length']&&(_0x26dc2a=_0x12bbc0[-0x1fa7+-0x2552*0x1+-0x227e*-0x2],_0x413395=_0x12bbc0[0x5d*-0x49+0x4a4+0x15e3],_0x33d360=_0x12bbc0[-0x1*-0x1ddf+-0x63d*-0x2+-0x2a58],_0x12bbc0=_0x12bbc0[0x4f6+-0xe8d+-0x997*-0x1]),(_0x12bbc0<<0x2*0x1bb+0x155*-0xa+0xb6*0xe|_0x33d360<<-0x48*-0x1+0xfac+-0xfe4|_0x413395<<0x7*-0x14b+-0x21a4+-0x2ab9*-0x1|_0x26dc2a)>>>-0x227b+0x8*0x14f+0x1803;},'lerp'(_0x38757a,_0x4f4238,_0x140dcb){return _0x38757a+(_0x4f4238-_0x38757a)*Y['clamp'](_0x140dcb,-0x1*-0x12a9+0x220f+0x1e2*-0x1c,-0x4e1+0x1718+-0x12*0x103);},'lerpAngle'(_0x464282,_0x4ab027,_0x34d652){return _0x4ab027-_0x464282>0x1099*0x1+0xa*-0x40+-0x3*0x477&&(_0x4ab027-=-0x12c0+0x70b+0x3*0x45f),_0x4ab027-_0x464282<-(0x1*-0x256d+0x215b+0x4c6)&&(_0x4ab027+=0x2304+-0x6d*-0xe+-0x2792),Y['lerp'](_0x464282,_0x4ab027,Y['clamp'](_0x34d652,0x3*-0x885+0x41a*-0x3+0x25dd,-0x1*-0x1d0+0x1177+-0x1346));},'powerOfTwo'(_0x4eb611){return _0x4eb611!==0x1e26+-0x2*-0xa59+-0x32d8&&!(_0x4eb611&_0x4eb611-(-0x1587+0x1cd2+0x26e*-0x3));},'nextPowerOfTwo'(_0x41aedd){return _0x41aedd--,_0x41aedd|=_0x41aedd>>0x1*-0x255+0x43*-0x26+0xc48,_0x41aedd|=_0x41aedd>>-0x25ee*-0x1+0xe*-0xe3+0x1*-0x1982,_0x41aedd|=_0x41aedd>>-0x133e*-0x1+0x433+-0x176d,_0x41aedd|=_0x41aedd>>-0x110a+0x20c9*-0x1+0x1*0x31db,_0x41aedd|=_0x41aedd>>-0x71a*-0x1+0x2707+0xf5b*-0x3,_0x41aedd++,_0x41aedd;},'nearestPowerOfTwo'(_0x32cb82){return Math['pow'](-0xc4f+-0x1fa6+0x2bf7,Math['round'](Math['log2'](_0x32cb82)));},'random'(_0x293957,_0x2a4f31){const _0x2fdd33=_0x2a4f31-_0x293957;return Math['random']()*_0x2fdd33+_0x293957;},'smoothstep'(_0x117818,_0x431f5c,_0x615caf){return _0x615caf<=_0x117818?-0x406+-0x1*0x287+-0x68d*-0x1:_0x615caf>=_0x431f5c?0x10ea*-0x1+0xb2*-0x33+0x1*0x3461:(_0x615caf=(_0x615caf-_0x117818)/(_0x431f5c-_0x117818),_0x615caf*_0x615caf*(-0x7d*0x2d+0x334+0x12c8-(-0x2322+-0x7*-0x169+0x1945)*_0x615caf));},'smootherstep'(_0xceea4e,_0x12c11d,_0x2223c2){return _0x2223c2<=_0xceea4e?0xa*-0x347+-0x2271+0x4337:_0x2223c2>=_0x12c11d?0x1*-0x1bf5+0x1*0x1d5d+-0x167:(_0x2223c2=(_0x2223c2-_0xceea4e)/(_0x12c11d-_0xceea4e),_0x2223c2*_0x2223c2*_0x2223c2*(_0x2223c2*(_0x2223c2*(0x1f*-0xa3+-0x22df*-0x1+0x4*-0x3c7)-(-0x1e39+-0x1*0x5f9+0x2441))+(-0x10c6+0xb1*-0x7+0x15a7)));},'roundUp'(_0x51f279,_0xff2aa7){return _0xff2aa7===0x5*0xb3+0x2098+-0x2417?_0x51f279:Math['ceil'](_0x51f279/_0xff2aa7)*_0xff2aa7;},'between'(_0x19d743,_0x35cd93,_0x2e740e,_0x25720e){const _0x292c85=Math['min'](_0x35cd93,_0x2e740e),_0x6e02a5=Math['max'](_0x35cd93,_0x2e740e);return _0x25720e?_0x19d743>=_0x292c85&&_0x19d743<=_0x6e02a5:_0x19d743>_0x292c85&&_0x19d743<_0x6e02a5;}},St=class St{constructor(_0xa453f8=-0x1cb2+-0x14*0x31+0x16a*0x17,_0x15eebf=-0x264f+0x1cc0+0x1*0x98f,_0x3aae2b=-0x787*-0x2+-0x403+-0xb0b*0x1,_0x30931a=-0x27*0xe1+-0x2568+0x7c*0x94){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x311e71=_0xa453f8['length'];_0x311e71===0xa*-0x26f+-0x21*-0x109+-0x9d0||_0x311e71===0x56*0x5e+0x17e4+0x1fb*-0x1c?(this['r']=_0xa453f8[0x31*0x15+0xb4b+-0xf50],this['g']=_0xa453f8[0x2577+-0x1*-0xdd3+-0x3349],this['b']=_0xa453f8[0x225f+-0x10*0x22f+0x93],this['a']=_0xa453f8[-0x1533*-0x1+-0x243f+0x303*0x5]??-0x2067+0x209f*-0x1+0x4107):(this['r']=_0xa453f8,this['g']=_0x15eebf,this['b']=_0x3aae2b,this['a']=_0x30931a);}['clone'](){const _0x4b11bb=this['constructo'+'r'];return new _0x4b11bb(this['r'],this['g'],this['b'],this['a']);}['copy'](_0x4e6d85){return this['r']=_0x4e6d85['r'],this['g']=_0x4e6d85['g'],this['b']=_0x4e6d85['b'],this['a']=_0x4e6d85['a'],this;}['equals'](_0x116003){return this['r']===_0x116003['r']&&this['g']===_0x116003['g']&&this['b']===_0x116003['b']&&this['a']===_0x116003['a'];}['set'](_0x11d146,_0x26b241,_0x1d7494,_0x4c90c2=0x2670+0x152b*0x1+-0x3b9a){return this['r']=_0x11d146,this['g']=_0x26b241,this['b']=_0x1d7494,this['a']=_0x4c90c2,this;}['lerp'](_0x29b660,_0x26493b,_0x230963){return this['r']=_0x29b660['r']+_0x230963*(_0x26493b['r']-_0x29b660['r']),this['g']=_0x29b660['g']+_0x230963*(_0x26493b['g']-_0x29b660['g']),this['b']=_0x29b660['b']+_0x230963*(_0x26493b['b']-_0x29b660['b']),this['a']=_0x29b660['a']+_0x230963*(_0x26493b['a']-_0x29b660['a']),this;}['linear'](_0x25b1d6=this){return this['r']=Math['pow'](_0x25b1d6['r'],0xf67+0x217c+-0x30e1+0.20000000000000018),this['g']=Math['pow'](_0x25b1d6['g'],-0xc83+0x10*-0x6b+0x1335+0.20000000000000018),this['b']=Math['pow'](_0x25b1d6['b'],-0x1*-0x1af3+-0x7a2+-0x1*0x134f+0.20000000000000018),this['a']=_0x25b1d6['a'],this;}['gamma'](_0x2b11be=this){return this['r']=Math['pow'](_0x2b11be['r'],(-0x7b2*-0x1+0x305+-0xab6)/(-0x14c4+0xa*0x100+-0x18a*-0x7+0.20000000000000018)),this['g']=Math['pow'](_0x2b11be['g'],(0x6f*-0x50+0x7f6+0x1abb*0x1)/(-0x9b+-0x391+0x217*0x2+0.20000000000000018)),this['b']=Math['pow'](_0x2b11be['b'],(-0xe45+-0x7*0x2ed+0x22c1)/(-0x20ab+0x7*0x121+-0x2a*-0x97+0.20000000000000018)),this['a']=_0x2b11be['a'],this;}['mulScalar'](_0xefdffd){return this['r']*=_0xefdffd,this['g']*=_0xefdffd,this['b']*=_0xefdffd,this;}['fromString'](_0x4ae582){const _0x3955df=parseInt(_0x4ae582['replace']('#','0x'),-0x1cb6+-0x1cf*-0x1+0x3b*0x75);let _0x11eb0b;return _0x4ae582['length']>0x1175*-0x2+-0x1dd3+-0x2062*-0x2?_0x11eb0b=Y['intToBytes'+'32'](_0x3955df):(_0x11eb0b=Y['intToBytes'+'24'](_0x3955df),_0x11eb0b[-0x15a1+-0x1ebe*-0x1+0xe9*-0xa]=0x25a0+-0x1b6c+-0x1*0x935),this['set'](_0x11eb0b[-0x1108+0x1*-0x1c79+0x2d81]/(-0x100a+-0x1c1e+-0x1*-0x2d27),_0x11eb0b[-0x6d*0xd+0x3*0x1bf+0x4d]/(0x7*-0x182+0x1*0x1267+-0x1*0x6da),_0x11eb0b[0x2528+-0x2e2+0xb6c*-0x3]/(0x1*0x307+0xd05*0x1+-0xf0d*0x1),_0x11eb0b[-0x1e2b+-0x1e33*0x1+0x3c61]/(0x1e7*0x9+-0x1*0x1c5+-0x69*0x23)),this;}['fromArray'](_0x26e533,_0x41d369=-0x1*-0x15b5+0x18f+-0x1744*0x1){return this['r']=_0x26e533[_0x41d369]??this['r'],this['g']=_0x26e533[_0x41d369+(0x246a*0x1+0x3af+-0x2818)]??this['g'],this['b']=_0x26e533[_0x41d369+(-0x28*-0xd8+-0x24e1+0x323)]??this['b'],this['a']=_0x26e533[_0x41d369+(0x1*0x118d+-0x67*0x12+-0xa4c)]??this['a'],this;}['toString'](_0x5e852a,_0x2a191a){const {r:_0xb2554d,g:_0x58a004,b:_0x20f1c1,a:_0x2e0e8e}=this;if(_0x2a191a||_0xb2554d>-0xa6*0x23+-0xb*0xff+0x21a8||_0x58a004>-0x1*0x9f+-0x23ce+0x1*0x246e||_0x20f1c1>0x8af+-0x249a+0x1bec)return _0xb2554d['toFixed'](-0xbc+-0x18dc+0x199b)+',\x20'+_0x58a004['toFixed'](0x22b5+0x1a9d+-0x3d4f*0x1)+',\x20'+_0x20f1c1['toFixed'](-0x8e*0x11+0x1cd*-0x9+-0x19a6*-0x1)+',\x20'+_0x2e0e8e['toFixed'](0x695*0x1+-0x1*-0x107+-0x799);let _0x3a7dee='#'+((0x6*0xb1+0x20*-0x110+0x1ddb<<0x26*0x82+-0x1bff+0x1*0x8cb)+(Math['round'](_0xb2554d*(0x28e+0x21ba+-0x2349))<<0x1113+-0x1d74+0xc71)+(Math['round'](_0x58a004*(-0x1fae+0x10c2+-0x19*-0xa3))<<0x2*-0x269+-0x2312+0x27ec)+Math['round'](_0x20f1c1*(0x1*-0x69+-0x1*-0x1557+-0x13ef)))['toString'](-0xe56+0x862*-0x1+0x16c8)['slice'](-0x1d4c+0x1e2a+-0x1*0xdd);if(_0x5e852a===!(0x1*-0x2347+0x1*0xceb+0x165c)){const _0x1eb945=Math['round'](_0x2e0e8e*(-0x1*-0x19ae+-0x1*0x19f9+0x14a))['toString'](0x1a7b*0x1+0x1d7d+-0x37e8);this['a']<(0x2666*0x1+-0x147e+-0x11d8)/(0x865*-0x1+0x1817+-0x47*0x35)?_0x3a7dee+='0'+_0x1eb945:_0x3a7dee+=_0x1eb945;}return _0x3a7dee;}['toArray'](_0x160888=[],_0x5c4f0b=0x189e*-0x1+-0xdfc+0x269a,_0x3a6f38=!(0x42a+-0x7*-0x25a+-0x37*0x60)){return _0x160888[_0x5c4f0b]=this['r'],_0x160888[_0x5c4f0b+(-0x1e2f+0x3*-0xcd5+0x1*0x44af)]=this['g'],_0x160888[_0x5c4f0b+(-0x243*-0xf+0x18*-0xb2+-0x113b)]=this['b'],_0x3a6f38&&(_0x160888[_0x5c4f0b+(0x81*-0x2f+-0x19fa+0x2ec*0x11)]=this['a']),_0x160888;}};h(St,'BLACK',Object['freeze'](new St(0x1e57+0x4*-0x1b8+-0x1777*0x1,-0x187b+0x5cb+0x12b0,0x8e1*0x1+0x244a+-0x2d2b,-0x8*-0x3ad+0x11f9*0x1+-0x8*0x5ec))),h(St,'BLUE',Object['freeze'](new St(0x1*0xa99+-0xac1+0x28,-0x57*0x44+0x2*0xbcb+-0x7a,-0x22ba+-0x2b*-0x7b+-0xe12*-0x1,-0x242f+0x1520+0xf10))),h(St,'CYAN',Object['freeze'](new St(0xd51+0x13*-0xa7+0x1*-0xec,0x4d1*-0x4+-0x2*-0xf52+-0x47*0x29,-0x37*0x93+0x16e+0x1e28,0x20d*-0xf+0xd25*0x1+0x119f))),h(St,'GRAY',Object['freeze'](new St(0xf23+-0x7*0x1e1+0x1*-0x1fc+0.5,0x98c*0x2+-0x2*0x989+-0x6+0.5,0x87c+-0xb*-0x351+0x4ff*-0x9+0.5,-0x1d81+-0x6d+0x1def*0x1))),h(St,'GREEN',Object['freeze'](new St(-0x14a*-0x11+0x208f+-0x3679,0x152+-0x8bb+-0x1a*-0x49,-0x7d3+0x6*0x637+-0x1d77,0xcb*0xb+0x1*-0x1403+-0x19d*-0x7))),h(St,'MAGENTA',Object['freeze'](new St(-0x9d1+-0x1*-0xff3+-0x621,0x1c*-0xc5+-0x5*-0x4de+0x7*-0x66,-0xba+0x2119+-0x1*0x205e,0x1*0x9ac+0xa81+-0x142c))),h(St,'RED',Object['freeze'](new St(-0x173a+0x1*0x10bf+0x19f*0x4,-0x104f+-0x22*0xca+0x4cb*0x9,0x7af+0x14cc+-0x1c7b,-0x172*-0x12+-0x57b+0x2*-0xa44))),h(St,'WHITE',Object['freeze'](new St(0x1935+0x20b3+-0x39e7*0x1,-0x21c0+0x92a+0x1897,0x865+0x8a7+0x1*-0x110b,0x2128+-0x1b85+-0x2*0x2d1))),h(St,'YELLOW',Object['freeze'](new St(-0xcac+-0x12ac+0x1f59,-0xb59+0x2516*-0x1+0x3070,0x5b*-0x45+-0x22eb*0x1+0xe*0x43f,-0x161*0x8+0x1d*-0xc2+0x3ab*0x9)));let ie=St;class rS{constructor(_0x459abf,_0x3cefe3=-0x19db+0x189d+0x9f*0x2){h(this,'_curve'),h(this,'_left',-(0x4c8+0x17*0x95+-0x1e*0x9b)/(0x4c1+0x32f*0xc+-0x2af5)),h(this,'_right',(-0x25*-0xdd+-0x3*-0x9d3+-0x3d69)/(-0x185f*-0x1+0x1*-0x553+-0x4*0x4c3)),h(this,'_recip',-0x1087*0x2+0x893+-0x3*-0x829),h(this,'_p0',-0xab2*-0x1+0x1983*-0x1+0xed1),h(this,'_p1',0x1d*0xa0+-0x1*-0x1e91+-0x1*0x30b1),h(this,'_m0',0x49*-0x1+0x79a+0x751*-0x1),h(this,'_m1',-0x63a+-0x24be+-0x16*-0x1f4),(this['_curve']=_0x459abf,this['_reset'](_0x3cefe3));}['evaluate'](_0x2718e0,_0x1b2d9d=!(-0x1f*0xd7+0x4cd+-0x1*-0x153d)){(_0x1b2d9d||_0x2718e0<this['_left']||_0x2718e0>=this['_right'])&&this['_reset'](_0x2718e0);let _0x1d3de3;const _0x2bf92f=this['_curve']['type'];if(_0x2bf92f===b0)_0x1d3de3=this['_p0'];else{const _0x3382aa=this['_recip']===0x1e33+0x164c+-0x347f?0x9*-0x2a9+0x1bdf+-0x1f7*0x2:(_0x2718e0-this['_left'])*this['_recip'];_0x2bf92f===A0?_0x1d3de3=Y['lerp'](this['_p0'],this['_p1'],_0x3382aa):_0x2bf92f===vu?_0x1d3de3=Y['lerp'](this['_p0'],this['_p1'],_0x3382aa*_0x3382aa*(-0xa46*-0x2+0xc5b+-0x20e4-(0x1e*-0xce+-0x17c1*0x1+0x2fe7*0x1)*_0x3382aa)):_0x1d3de3=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x3382aa);}return _0x1d3de3;}['_reset'](_0x7760e0){const _0x5e7224=this['_curve']['keys'],_0x2944ec=_0x5e7224['length'];if(!_0x2944ec)this['_left']=-(-0xcc8+0xe05*0x2+-0xf41)/(0x8e*0x3+0x1*-0xf31+0xd87),this['_right']=(0x1917+-0x112*-0xc+-0xa*0x3cb)/(-0x5*-0x33b+0x1f3c*0x1+-0x2f63),this['_recip']=-0x35d+0x2*-0x1003+0x2363,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x2e7+0x1704+-0x19eb;else{if(_0x7760e0<_0x5e7224[0x1382*-0x1+0x5*0x154+0x44a*0x3][-0x1956+-0x1*-0x1837+-0x11f*-0x1])this['_left']=-(-0x23b*-0x7+-0x26*-0x39+-0x1da*0xd)/(0x2*0x778+0x16b3+-0x25a3),this['_right']=_0x5e7224[-0x1*0x1471+-0xc92+-0x139*-0x1b][0x57a+-0x2a5*-0xd+0xd49*-0x3],this['_recip']=-0x1dbf+0x1625*0x1+-0x1*-0x79a,this['_p0']=this['_p1']=_0x5e7224[0x2060+0x13*-0xad+-0x683*0x3][0x41+0x1aae+0x1*-0x1aee],this['_m0']=this['_m1']=0x3*-0xc85+0x1*-0x281+0x2810;else{if(_0x7760e0>=_0x5e7224[_0x2944ec-(-0x20a6+0x3*-0x7be+-0x37e1*-0x1)][-0x14*-0x18a+-0x13dc+-0xaec])this['_left']=_0x5e7224[_0x2944ec-(-0x7ee+-0x23b*-0x8+0x3b*-0x2b)][0x2109+-0xbab+-0x155e],this['_right']=(-0x1f*-0x95+0x7*0x54d+0x13*-0x2e7)/(0x118d+0x24a2+0xb*-0x4ed),this['_recip']=0xc13+-0x99d*-0x1+-0x2b6*0x8,this['_p0']=this['_p1']=_0x5e7224[_0x2944ec-(0x223*0x5+-0x137b+0x8cd)][-0x1c6c+-0x36+0x1*0x1ca3],this['_m0']=this['_m1']=0x1*0x669+-0x147f+-0x6*-0x259;else{let _0x315ee2=0xab*0x5+-0x160c+-0x12b5*-0x1;for(;_0x7760e0>=_0x5e7224[_0x315ee2+(0x1*-0x59a+0xdd5+-0x27*0x36)][-0x253c+0x1a42*-0x1+0x3f7e];)_0x315ee2++;this['_left']=_0x5e7224[_0x315ee2][-0x1adc+0x2*-0x1178+0x8d4*0x7],this['_right']=_0x5e7224[_0x315ee2+(-0x7c1*-0x1+-0x1*0x97+-0x729)][0x5bd+0x1fd2*0x1+-0x258f];const _0x5f5096=(-0x1ec8+-0x1c7a+0x3b43)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x5f5096)?_0x5f5096:-0x15ee+-0x1*-0x1061+-0x1*-0x58d,this['_p0']=_0x5e7224[_0x315ee2][0xeb9+0x6b*0x7+-0x11a5*0x1],this['_p1']=_0x5e7224[_0x315ee2+(-0x236f+0x181a+0xb56)][0x1445+0x5d2*0x3+-0x36e*0xb],this['_curve']['type']===Zm&&this['_calcTange'+'nts'](_0x5e7224,_0x315ee2);}}}}['_calcTange'+'nts'](_0x1aaec0,_0x11d1d4){let _0x5441db;const _0x2a05ab=_0x1aaec0[_0x11d1d4],_0x2cb91b=_0x1aaec0[_0x11d1d4+(-0x15f+0x197b+-0x181b)];let _0x530d93;if(_0x11d1d4===0xfd9+0x233*-0xf+0x1124?_0x5441db=[_0x1aaec0[0xa4d+0x46f+-0xebc][0x1313+0x1b08+-0x2e1b*0x1]+(_0x1aaec0[-0x213c+0x1*-0xfa1+0x30dd][0x50b+-0x14*-0x16a+-0x13*0x1c1]-_0x1aaec0[0x1431+-0x164a*0x1+0x21a][-0x1de9+0x1*-0x155b+-0x304*-0x11]),_0x1aaec0[0x22aa+0x3*-0x9c1+0x1cd*-0x3][0x25*-0x73+0xdff*-0x1+0x9*0x367]+(_0x1aaec0[0x974+0xa4+-0x8*0x143][0x2511+0x2559+-0x4a69]-_0x1aaec0[-0x1*-0x1c1f+0x2*0x12f6+0x9e*-0x6b][0x22d7+-0x4*-0x40+0x5f9*-0x6])]:_0x5441db=_0x1aaec0[_0x11d1d4-(0x48f+-0x1*0x2666+-0x2d2*-0xc)],_0x11d1d4===_0x1aaec0['length']-(0x951+-0x1*0x481+-0xf6*0x5)?_0x530d93=[_0x1aaec0[_0x11d1d4+(0x35b*0x9+0x1582+-0x33b4)][-0x1704+0xd*0x10f+0x941]+(_0x1aaec0[_0x11d1d4+(0xb3+0x98e*-0x1+0x8dc)][-0x25d9+0x2*0xdfa+0x9e5]-_0x1aaec0[_0x11d1d4][0xc10*0x1+-0x1566+-0x5*-0x1de]),_0x1aaec0[_0x11d1d4+(0x1ded+-0xd39*-0x1+-0x2b25)][0xd*0x2cd+0xc8e+-0x30f6]+(_0x1aaec0[_0x11d1d4+(0x58b+0x1*0x4af+0xa39*-0x1)][0x3ee+-0x1517*0x1+0x112a]-_0x1aaec0[_0x11d1d4][-0x1612+0x1d0*-0xa+0x2833])]:_0x530d93=_0x1aaec0[_0x11d1d4+(0xbb7*0x1+-0x1f64+0x13af*0x1)],this['_curve']['type']===Zm){const _0xcde42b=(-0x25f9*0x1+0x4f*-0x1c+0x2e9f)*(_0x2cb91b[-0x56c*-0x7+0x20fd+-0xb*0x673]-_0x2a05ab[0x1256+0x381+-0x15d7])/(_0x2cb91b[0x1b05+0x1f95+-0x3a9a]-_0x5441db[-0x1*0xead+0x12f*-0x2+-0x1*-0x110b]),_0x15daa1=(-0x1*-0x1815+0x1*-0x20c7+0x8b4)*(_0x2cb91b[0x9a9*-0x1+0x1123+-0x21*0x3a]-_0x2a05ab[0x6bc+-0x4ed*0x3+0x80b])/(_0x530d93[-0x1eff+0x1a84+0x25*0x1f]-_0x2a05ab[-0x6*-0x5b1+0x24*-0x8b+-0xe9a]);this['_m0']=this['_curve']['tension']*(isFinite(_0xcde42b)?_0xcde42b:-0x6b1+-0xaf0+0x1*0x11a1)*(_0x2cb91b[-0x1cc0+0x258a+0x1*-0x8c9]-_0x5441db[-0x7*0x42d+0x664+0x44*0x56]),this['_m1']=this['_curve']['tension']*(isFinite(_0x15daa1)?_0x15daa1:0x171e+-0x16f8+-0x26)*(_0x530d93[-0x1e4e+-0x5*-0x4ed+0x5ae]-_0x2a05ab[0xd4d+0x13bd+-0x2109]);}else{const _0x8e8d6b=(_0x2cb91b[-0x3b*-0x2f+0x1*-0x1ceb+0xa*0x1cf]-_0x2a05ab[-0x128c+-0x75e+-0x1*-0x19ea])/(_0x2a05ab[0x120a+-0x231c+0x2*0x889]-_0x5441db[-0x41e*0x3+0x1*0x3d1+-0x889*-0x1]),_0x291be3=(_0x2cb91b[-0x4ce+-0x747+0xc15]-_0x2a05ab[-0x4*-0x1c1+0x2533*0x1+0xebd*-0x3])/(_0x530d93[-0x2063*-0x1+0x2396+-0x43f9]-_0x2cb91b[-0x1*0x74b+0x8*0x2bc+0xe95*-0x1]),_0x1f5cf6=_0x2a05ab[0xedf+-0x1*0x36+0xe*-0x10c]+(_0x5441db[0x1383+0xa1f*0x1+0xb9*-0x29]-_0x2a05ab[-0x406*-0x1+-0x7*-0x40f+-0x1037*0x2])*(isFinite(_0x8e8d6b)?_0x8e8d6b:-0x30b*-0x3+0x9a3*0x1+-0x1*0x12c4),_0x50576b=_0x2cb91b[-0x26a7*0x1+-0x1990+0x4038]+(_0x530d93[0xdf*0x1+0x153c+-0x161a]-_0x2cb91b[-0xad*0x22+-0x529+-0x709*-0x4])*(isFinite(_0x291be3)?_0x291be3:-0x202*-0xe+-0x12c6*-0x1+0x2ee2*-0x1),_0x867ee7=this['_curve']['tension'];this['_m0']=_0x867ee7*(_0x2cb91b[-0x144c+-0x1*-0x827+-0x5*-0x26e]-_0x1f5cf6),this['_m1']=_0x867ee7*(_0x50576b-_0x2a05ab[-0x19d0+0x9ad+0x1024]);}}['_evaluateH'+'ermite'](_0x11cb48,_0x2d11f0,_0x537b49,_0x3bd989,_0x313fa6){const _0x914ebd=_0x313fa6*_0x313fa6,_0x26f6a9=_0x313fa6+_0x313fa6,_0x2b3194=-0x2299+-0x209b*-0x1+-0x49*-0x7-_0x313fa6,_0x5a857c=_0x2b3194*_0x2b3194;return _0x11cb48*((0xdf4+-0x119*-0x1c+-0x1f*0x171+_0x26f6a9)*_0x5a857c)+_0x537b49*(_0x313fa6*_0x5a857c)+_0x2d11f0*(_0x914ebd*(-0x22e4+0x1fa0+0x347-_0x26f6a9))+_0x3bd989*(_0x914ebd*(_0x313fa6-(-0x6fc+-0x7e9+0xee6)));}}class Bs{constructor(_0x44477a){h(this,'keys',[]),h(this,'type',vu),h(this,'tension',0x2c*0x86+-0xc72*0x3+-0x727*-0x2+0.5),h(this,'_eval',new rS(this));if(_0x44477a){for(let _0xec9332=0x8*0x40a+-0x1221+-0xe2f;_0xec9332<_0x44477a['length']-(0x24b1+-0x4*-0x16c+-0x2a60);_0xec9332+=-0x22a6*-0x1+0x1eff+0x3*-0x15e1)this['keys']['push']([_0x44477a[_0xec9332],_0x44477a[_0xec9332+(0x2d9+-0x1d*0x2f+0x27b)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x349c72,_0x2cc87c){const _0x77b3d9=this['keys'],_0x55ebcc=_0x77b3d9['length'];let _0x46d40d=-0xd*0x117+-0x61*0x56+-0x1*-0x2ec1;for(;_0x46d40d<_0x55ebcc&&!(_0x77b3d9[_0x46d40d][0x1d*-0x152+-0x6bf*0x1+0x2d09]>_0x349c72);_0x46d40d++);const _0x17a975=[_0x349c72,_0x2cc87c];return this['keys']['splice'](_0x46d40d,0xa*-0x2ab+-0x29*0xd+0x1cc3,_0x17a975),_0x17a975;}['get'](_0x2b9e4e){return this['keys'][_0x2b9e4e];}['sort'](){this['keys']['sort']((_0x365071,_0x4b2ac0)=>_0x365071[0x1182*0x1+-0x1*0x1055+-0x12d]-_0x4b2ac0[0x15d1+0x1306+-0x28d7]);}['value'](_0x1ffce9){return this['_eval']['evaluate'](_0x1ffce9,!(0x1d5*-0x13+0xc1f*-0x3+0x472c));}['closest'](_0x1766d6){const _0xd68d5e=this['keys'],_0x164faf=_0xd68d5e['length'];let _0x51dce6=-0x2c2+0x1823*-0x1+0x1ae7,_0x53bec1=null;for(let _0x4ef2ea=-0x1989+-0x491+0x1e1a;_0x4ef2ea<_0x164faf;_0x4ef2ea++){const _0x3c16ff=Math['abs'](_0x1766d6-_0xd68d5e[_0x4ef2ea][-0x1884+0x5*-0x75e+0x1*0x3d5a]);if(_0x51dce6>=_0x3c16ff)_0x51dce6=_0x3c16ff,_0x53bec1=_0xd68d5e[_0x4ef2ea];else break;}return _0x53bec1;}['clone'](){const _0x4b58fb=new this['constructo'+'r']();return _0x4b58fb['keys']=this['keys']['map'](_0x1298ac=>[..._0x1298ac]),_0x4b58fb['type']=this['type'],_0x4b58fb['tension']=this['tension'],_0x4b58fb;}['quantize'](_0x379a42){_0x379a42=Math['max'](_0x379a42,0x1*0x699+-0x144b+0xdb4);const _0xa9173e=new Float32Array(_0x379a42),_0xc50b9f=(0x1bb8+0x18ea+0x118b*-0x3)/(_0x379a42-(-0x1*0x17cd+0x2*0x60e+0x1f3*0x6));_0xa9173e[-0x6a7+-0x1984+-0x225*-0xf]=this['_eval']['evaluate'](0x21*-0x8b+0x1e4b*-0x1+0x3036,!(0x125*-0x1c+-0x1b09+0x37*0x113));for(let _0xed2d0a=0x926+-0x78*-0x27+-0x1b6d;_0xed2d0a<_0x379a42;_0xed2d0a++)_0xa9173e[_0xed2d0a]=this['_eval']['evaluate'](_0xc50b9f*_0xed2d0a);return _0xa9173e;}['quantizeCl'+'amped'](_0xc53ef3,_0x121b40,_0x353b42){const _0x240a6f=this['quantize'](_0xc53ef3);for(let _0x284b22=-0x1be8+-0x180f+-0xfb*-0x35;_0x284b22<_0x240a6f['length'];++_0x284b22)_0x240a6f[_0x284b22]=Math['min'](_0x353b42,Math['max'](_0x121b40,_0x240a6f[_0x284b22]));return _0x240a6f;}}class Wr{constructor(..._0x214fbf){h(this,'curves',[]),h(this,'_type',vu);if(_0x214fbf['length']>-0x21ca+-0x292*-0x3+0x1*0x1a15){for(let _0xeda4d5=-0x126+0x8a0+-0x77a;_0xeda4d5<_0x214fbf['length'];_0xeda4d5++)this['curves']['push'](new Bs(_0x214fbf[_0xeda4d5]));}else{if(_0x214fbf['length']===0x3*-0x576+0x1c0b+-0xba9)this['curves']['push'](new Bs());else{const _0x5b2045=_0x214fbf[-0x21b3+-0x7*0x266+0x327d];if(typeof _0x5b2045=='number'){for(let _0x1efd69=-0x59*0x7+-0x22e8+0x2557;_0x1efd69<_0x5b2045;_0x1efd69++)this['curves']['push'](new Bs());}else{for(let _0x31bbb7=-0x32f*0x1+-0x754+0xa83;_0x31bbb7<_0x5b2045['length'];_0x31bbb7++)this['curves']['push'](new Bs(_0x5b2045[_0x31bbb7]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0x133430){this['_type']=_0x133430;for(let _0x233f46=0x1d*-0xe5+0x1bb8*-0x1+0xf1*0x39;_0x233f46<this['curves']['length'];_0x233f46++)this['curves'][_0x233f46]['type']=_0x133430;}get['type'](){return this['_type'];}['get'](_0x25bcec){return this['curves'][_0x25bcec];}['value'](_0xec2420,_0x131bd4=[]){const _0x22a7d1=this['curves']['length'];_0x131bd4['length']=_0x22a7d1;for(let _0x54b1bb=0x1af3*0x1+-0x15d6+0x51d*-0x1;_0x54b1bb<_0x22a7d1;_0x54b1bb++)_0x131bd4[_0x54b1bb]=this['curves'][_0x54b1bb]['value'](_0xec2420);return _0x131bd4;}['clone'](){const _0xe33fd0=new this['constructo'+'r']();_0xe33fd0['curves']=[];for(let _0x42210b=-0x6*0x2e7+0x10*-0x19d+-0x1f7*-0x16;_0x42210b<this['curves']['length'];_0x42210b++)_0xe33fd0['curves']['push'](this['curves'][_0x42210b]['clone']());return _0xe33fd0['_type']=this['_type'],_0xe33fd0;}['quantize'](_0x3092fe){_0x3092fe=Math['max'](_0x3092fe,0x1bdb+-0xbb*0x1b+-0x820);const _0xe39296=this['curves']['length'],_0x2fa811=new Float32Array(_0x3092fe*_0xe39296),_0xc51e04=(-0x2636+0x109*-0xe+0x34b5)/(_0x3092fe-(0x137f*0x1+-0x51d*-0x7+-0x3749));for(let _0x4f53ca=-0x14ef+-0x1*-0x2402+-0x11*0xe3;_0x4f53ca<_0xe39296;_0x4f53ca++){const _0x1221a3=new rS(this['curves'][_0x4f53ca]);for(let _0x26df10=-0xc20+-0xefd+0x1b1d;_0x26df10<_0x3092fe;_0x26df10++)_0x2fa811[_0x26df10*_0xe39296+_0x4f53ca]=_0x1221a3['evaluate'](_0xc51e04*_0x26df10);}return _0x2fa811;}['quantizeCl'+'amped'](_0x5d2a48,_0x45f863,_0x8447b5){const _0x30ba2a=this['quantize'](_0x5d2a48);for(let _0x1bc16b=-0x175f*0x1+0x23ba+-0xc5b;_0x1bc16b<_0x30ba2a['length'];++_0x1bc16b)_0x30ba2a[_0x1bc16b]=Math['min'](_0x8447b5,Math['max'](_0x45f863,_0x30ba2a[_0x1bc16b]));return _0x30ba2a;}}const hf=new Float32Array(-0xc*-0x1e1+0x4a+-0x16d5),Qm=new Int32Array(hf['buffer']);class mn{static['float2Half'](_0x31ea90){hf[0x1830*0x1+0xfa1+0x27d1*-0x1]=_0x31ea90;const _0x3b8b29=Qm[0x7fc+0x1e53*-0x1+0x1657];let _0x16e585=_0x3b8b29>>-0x26c3+-0x1abb+0x6*0xaed&0x2*-0x1f46+-0x2b9c*-0x1+0x92f0,_0x59eb0a=_0x3b8b29>>-0x1*-0xaa5+-0x2646+0x5*0x589&-0x196f+0x15*0x3b+-0x1c97*-0x1;const _0x2a3a0c=_0x3b8b29>>-0x13*-0x5e+-0x82f*-0x3+-0x1f70&-0xa1a+0x276*0x8+0x3*-0x2dd;return _0x2a3a0c<0x2083+0x4f2+0xc5a*-0x3?_0x16e585:_0x2a3a0c>0x1651+-0x1395+-0x22e*0x1?(_0x16e585|=0x3728+0x1*0xde5b+0x9983*-0x1,_0x16e585|=(_0x2a3a0c===0x1e21+0x2*0x607+-0x2930?-0x1ba8+-0x2042+0x1df5*0x2:0x55*-0x1c+0x7c6+-0x17*-0x11)&&_0x3b8b29&0xfbb2a9+-0x1*0x7316c7+-0x89be3*0x1,_0x16e585):_0x2a3a0c<-0xfcc+0x13a4+-0x367?(_0x59eb0a|=-0x1a*0x82+0x1257+0x2dd*0x1,_0x16e585|=(_0x59eb0a>>-0xfbd+0x982+0x6ad*0x1-_0x2a3a0c)+(_0x59eb0a>>0x1cca+0x24e2+-0x413b-_0x2a3a0c&0x1*0x235d+-0x1adb+-0x881),_0x16e585):(_0x16e585|=_0x2a3a0c-(-0x2519+-0x166a+-0x1*-0x3bf3)<<0xf3d+0x59b+-0x14ce|_0x59eb0a>>0x1*-0xf82+0x15c5+-0x12*0x59,_0x16e585+=_0x59eb0a&-0x12f9+-0x1*-0x251a+-0x1220,_0x16e585);}static['float2RGBA'+'8'](_0x197583,_0x313eed){hf[0x3*-0x233+-0x6d7*0x4+-0x1*-0x21f5]=_0x197583;const _0x525c0a=Qm[-0x1*-0x5ba+0x5ed+-0xba7];_0x313eed['r']=(_0x525c0a>>0x1d0+0x144f+-0x1607&0x1*-0x8db+-0x1724+0x20fe)/(0xaeb+-0x2*0x397+-0x2be),_0x313eed['g']=(_0x525c0a>>-0x2296*-0x1+-0xffa+-0x128c&-0x1*-0x4a5+-0x5*-0x287+0x1*-0x1049)/(-0x20f8+0xd78+0x147f*0x1),_0x313eed['b']=(_0x525c0a>>-0x105b+0x12b0*0x2+-0x255*0x9&0x2c+-0xb1d+0xbf0)/(0x895*0x1+-0x1*0x118e+0x9f8),_0x313eed['a']=(_0x525c0a&-0x1d21*0x1+0x1cc3+0x15d*0x1)/(-0x1f7+-0x9e5*-0x1+0x1*-0x6ef);}}const yt=class yt{constructor(_0x28da91=0x10fe+0x1*-0x8c6+-0x838,_0x5c3baf=0x1337*0x1+-0x1d48+0x35b*0x3,_0x256262=-0x42e+0x6ee+-0x2c0){h(this,'x'),h(this,'y'),h(this,'z'),_0x28da91['length']===0x1f9f+0x10*-0x128+0x2*-0x68e?(this['x']=_0x28da91[0x91*-0x19+0x166b+-0x842],this['y']=_0x28da91[0x1fe*0x7+0x97b+0x4*-0x5db],this['z']=_0x28da91[0x1a23*0x1+-0xd05+-0xd1c*0x1]):(this['x']=_0x28da91,this['y']=_0x5c3baf,this['z']=_0x256262);}['add'](_0x3062c6){return this['x']+=_0x3062c6['x'],this['y']+=_0x3062c6['y'],this['z']+=_0x3062c6['z'],this;}['add2'](_0x371d60,_0x1e57ca){return this['x']=_0x371d60['x']+_0x1e57ca['x'],this['y']=_0x371d60['y']+_0x1e57ca['y'],this['z']=_0x371d60['z']+_0x1e57ca['z'],this;}['addScalar'](_0x525c7e){return this['x']+=_0x525c7e,this['y']+=_0x525c7e,this['z']+=_0x525c7e,this;}['addScaled'](_0x18c19e,_0x333fec){return this['x']+=_0x18c19e['x']*_0x333fec,this['y']+=_0x18c19e['y']*_0x333fec,this['z']+=_0x18c19e['z']*_0x333fec,this;}['clone'](){const _0x4f831d=this['constructo'+'r'];return new _0x4f831d(this['x'],this['y'],this['z']);}['copy'](_0x2875a4){return this['x']=_0x2875a4['x'],this['y']=_0x2875a4['y'],this['z']=_0x2875a4['z'],this;}['cross'](_0x3d2687,_0x40fe6e){const _0x4dcfca=_0x3d2687['x'],_0x4a8876=_0x3d2687['y'],_0x2746f8=_0x3d2687['z'],_0x93b66a=_0x40fe6e['x'],_0x5ded02=_0x40fe6e['y'],_0x426a73=_0x40fe6e['z'];return this['x']=_0x4a8876*_0x426a73-_0x5ded02*_0x2746f8,this['y']=_0x2746f8*_0x93b66a-_0x426a73*_0x4dcfca,this['z']=_0x4dcfca*_0x5ded02-_0x93b66a*_0x4a8876,this;}['distance'](_0x596e5e){const _0xcb865a=this['x']-_0x596e5e['x'],_0x2ba864=this['y']-_0x596e5e['y'],_0x422ef0=this['z']-_0x596e5e['z'];return Math['sqrt'](_0xcb865a*_0xcb865a+_0x2ba864*_0x2ba864+_0x422ef0*_0x422ef0);}['div'](_0xefa281){return this['x']/=_0xefa281['x'],this['y']/=_0xefa281['y'],this['z']/=_0xefa281['z'],this;}['div2'](_0x3b542c,_0xc596d0){return this['x']=_0x3b542c['x']/_0xc596d0['x'],this['y']=_0x3b542c['y']/_0xc596d0['y'],this['z']=_0x3b542c['z']/_0xc596d0['z'],this;}['divScalar'](_0x136753){return this['x']/=_0x136753,this['y']/=_0x136753,this['z']/=_0x136753,this;}['dot'](_0x16de31){return this['x']*_0x16de31['x']+this['y']*_0x16de31['y']+this['z']*_0x16de31['z'];}['equals'](_0x1df88c){return this['x']===_0x1df88c['x']&&this['y']===_0x1df88c['y']&&this['z']===_0x1df88c['z'];}['equalsAppr'+'ox'](_0x219b49,_0x2a2feb=0xd26+0x3*0x1f3+-0x12ff+0.000001){return Math['abs'](this['x']-_0x219b49['x'])<_0x2a2feb&&Math['abs'](this['y']-_0x219b49['y'])<_0x2a2feb&&Math['abs'](this['z']-_0x219b49['z'])<_0x2a2feb;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x1dc0fe,_0x172188,_0x21ebde){return this['x']=_0x1dc0fe['x']+_0x21ebde*(_0x172188['x']-_0x1dc0fe['x']),this['y']=_0x1dc0fe['y']+_0x21ebde*(_0x172188['y']-_0x1dc0fe['y']),this['z']=_0x1dc0fe['z']+_0x21ebde*(_0x172188['z']-_0x1dc0fe['z']),this;}['mul'](_0x4c789c){return this['x']*=_0x4c789c['x'],this['y']*=_0x4c789c['y'],this['z']*=_0x4c789c['z'],this;}['mul2'](_0x1807fe,_0x3f7f60){return this['x']=_0x1807fe['x']*_0x3f7f60['x'],this['y']=_0x1807fe['y']*_0x3f7f60['y'],this['z']=_0x1807fe['z']*_0x3f7f60['z'],this;}['mulScalar'](_0x248958){return this['x']*=_0x248958,this['y']*=_0x248958,this['z']*=_0x248958,this;}['normalize'](_0x29632e=this){const _0x33d96e=_0x29632e['x']*_0x29632e['x']+_0x29632e['y']*_0x29632e['y']+_0x29632e['z']*_0x29632e['z'];if(_0x33d96e>-0x91d+-0x2*-0xd5+0x773){const _0x58bede=(-0x46*-0x5d+-0x6d*-0x5b+-0x4*0x100b)/Math['sqrt'](_0x33d96e);this['x']=_0x29632e['x']*_0x58bede,this['y']=_0x29632e['y']*_0x58bede,this['z']=_0x29632e['z']*_0x58bede;}return this;}['floor'](_0x3fcd1c=this){return this['x']=Math['floor'](_0x3fcd1c['x']),this['y']=Math['floor'](_0x3fcd1c['y']),this['z']=Math['floor'](_0x3fcd1c['z']),this;}['ceil'](_0x5889f6=this){return this['x']=Math['ceil'](_0x5889f6['x']),this['y']=Math['ceil'](_0x5889f6['y']),this['z']=Math['ceil'](_0x5889f6['z']),this;}['round'](_0x29f35c=this){return this['x']=Math['round'](_0x29f35c['x']),this['y']=Math['round'](_0x29f35c['y']),this['z']=Math['round'](_0x29f35c['z']),this;}['min'](_0x54ca0a){return _0x54ca0a['x']<this['x']&&(this['x']=_0x54ca0a['x']),_0x54ca0a['y']<this['y']&&(this['y']=_0x54ca0a['y']),_0x54ca0a['z']<this['z']&&(this['z']=_0x54ca0a['z']),this;}['max'](_0x145526){return _0x145526['x']>this['x']&&(this['x']=_0x145526['x']),_0x145526['y']>this['y']&&(this['y']=_0x145526['y']),_0x145526['z']>this['z']&&(this['z']=_0x145526['z']),this;}['project'](_0x3a9c82){const _0x459b2e=this['x']*_0x3a9c82['x']+this['y']*_0x3a9c82['y']+this['z']*_0x3a9c82['z'],_0x27473b=_0x3a9c82['x']*_0x3a9c82['x']+_0x3a9c82['y']*_0x3a9c82['y']+_0x3a9c82['z']*_0x3a9c82['z'],_0x52c1e8=_0x459b2e/_0x27473b;return this['x']=_0x3a9c82['x']*_0x52c1e8,this['y']=_0x3a9c82['y']*_0x52c1e8,this['z']=_0x3a9c82['z']*_0x52c1e8,this;}['set'](_0x3d5971,_0x11c20d,_0x100b4b){return this['x']=_0x3d5971,this['y']=_0x11c20d,this['z']=_0x100b4b,this;}['sub'](_0x248873){return this['x']-=_0x248873['x'],this['y']-=_0x248873['y'],this['z']-=_0x248873['z'],this;}['sub2'](_0x8e239d,_0x29a79e){return this['x']=_0x8e239d['x']-_0x29a79e['x'],this['y']=_0x8e239d['y']-_0x29a79e['y'],this['z']=_0x8e239d['z']-_0x29a79e['z'],this;}['subScalar'](_0x43bde2){return this['x']-=_0x43bde2,this['y']-=_0x43bde2,this['z']-=_0x43bde2,this;}['fromArray'](_0xf1b718,_0xc8e494=-0x154e*-0x1+0x1*-0x1900+0x56*0xb){return this['x']=_0xf1b718[_0xc8e494]??this['x'],this['y']=_0xf1b718[_0xc8e494+(0x3*-0x506+0x1580+0x1*-0x66d)]??this['y'],this['z']=_0xf1b718[_0xc8e494+(0x1ac3+0x279+-0x1d3a)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x53a925=[],_0x3b9a6d=0xe38+0x2288+-0x5*0x9c0){return _0x53a925[_0x3b9a6d]=this['x'],_0x53a925[_0x3b9a6d+(0x969+0x16d3+-0x203b)]=this['y'],_0x53a925[_0x3b9a6d+(-0x1*0xcb9+-0x1*0xb82+0x183d)]=this['z'],_0x53a925;}};h(yt,'ZERO',Object['freeze'](new yt(0x210e+0xe0f*0x1+-0x2f1d,-0x4*0x332+0x1c0*-0x13+0xb82*0x4,0x3*0x38a+-0x38b*0xb+0x1*0x1c5b))),h(yt,'HALF',Object['freeze'](new yt(0x9ce+-0x1*0x10e4+-0x2*-0x38b+0.5,0x268f+-0x1d95+-0x8fa+0.5,-0x6d*0x22+0x19d7*0x1+-0xb5d+0.5))),h(yt,'ONE',Object['freeze'](new yt(0x18*-0xc5+-0xb5d+0x4f9*0x6,0x5*-0x4f0+-0x14*0x12a+0x2ff9,-0x55*-0x3+0x2217+-0x2315))),h(yt,'UP',Object['freeze'](new yt(0x8c1+-0xf6*-0x24+-0x2b59*0x1,-0x2310*0x1+0x1d*0x64+-0x3b*-0x67,0x727+0xccf+-0x13f6))),h(yt,'DOWN',Object['freeze'](new yt(0x1*-0x2589+-0x11e3+0x376c,-(0x23eb+-0x1b+-0x23cf),0x4*-0x472+-0x52*-0xb+0xe42))),h(yt,'RIGHT',Object['freeze'](new yt(0x13eb*-0x1+-0x1a8d+0x2e79,-0x1037+0x1*0xd9f+0x298,-0x54b+0x1b61+-0x1616))),h(yt,'LEFT',Object['freeze'](new yt(-(0x112f*0x2+-0x18e2+-0x97b),-0xe44+-0x2314+0x3158,0x1c50+-0x2650+0xa00))),h(yt,'FORWARD',Object['freeze'](new yt(-0xd39+-0x2203+0x4*0xbcf,0x1f64+0x20f4+0x80b*-0x8,-(0x2b*0x2f+0x1b97+-0x237b)))),h(yt,'BACK',Object['freeze'](new yt(-0x1f0f+0x2*-0x408+-0x7d3*-0x5,-0x907*0x1+0xa02+-0x1*0xfb,-0x17ff*0x1+0x1676+-0x1*-0x18a)));let I=yt;const tn=class tn{constructor(){h(this,'data',new Float32Array(-0xca7*-0x3+-0x1*-0x48d+-0x2a79)),this['data'][0x22fc+-0x937*-0x3+0x3ea1*-0x1]=this['data'][-0xb2e+0x1b8b+-0x1059]=this['data'][0x1*0x1eb6+-0xedd+-0xfd1]=-0x2*0xcae+-0x241*-0x7+0x996;}['clone'](){const _0x32d255=this['constructo'+'r'];return new _0x32d255()['copy'](this);}['copy'](_0x31f628){const _0x410cce=_0x31f628['data'],_0x24eb2a=this['data'];return _0x24eb2a[-0x3a2+0x16eb+-0x1349]=_0x410cce[0xf27+-0x1*0xd53+-0x2*0xea],_0x24eb2a[0x14b*0x13+0x1*-0x12c1+-0x5cf]=_0x410cce[-0x563+0x1971+-0x140d],_0x24eb2a[-0x2*0x7e2+0x9e5*-0x3+0x1*0x2d75]=_0x410cce[0x1*0x22a2+-0x36f+0x1*-0x1f31],_0x24eb2a[-0x94f+-0x219e+-0x55e*-0x8]=_0x410cce[0xad*-0x5+0x2225*-0x1+0x2589],_0x24eb2a[0x1aad*-0x1+-0xc3*-0xd+0x10ca]=_0x410cce[0x170*-0x19+0x1*-0xe77+0x326b],_0x24eb2a[0xb5d+-0x20eb+0x1593]=_0x410cce[-0x1452+-0xb*-0x3+0x1436],_0x24eb2a[0x27a*-0x2+-0x35*0x28+0xd42]=_0x410cce[0x310+0x12b*0x1+0x167*-0x3],_0x24eb2a[0x1f6f+-0x824*0x2+-0xf20]=_0x410cce[-0x2*0x71d+-0x21dc+0x301d],_0x24eb2a[-0x1*-0x145c+0x2019+0x1*-0x346d]=_0x410cce[0x6*-0x5ab+0x9e6+0x4d4*0x5],this;}['set'](_0x4c7cad){const _0x215c36=this['data'];return _0x215c36[0x11a2+0x1ed0+-0x3072]=_0x4c7cad[0xc46*-0x1+0xa7*-0x17+0x1b47],_0x215c36[0x78a+0x2161+-0x1*0x28ea]=_0x4c7cad[0x16a2+-0x16*0x67+-0xdc7*0x1],_0x215c36[-0x2233+0x1d14*-0x1+0x3f49*0x1]=_0x4c7cad[-0x2*-0x229+0x10e1*0x1+0xaf*-0x1f],_0x215c36[0xf1*-0x5+-0x1958+0x1e10]=_0x4c7cad[0x1*0x579+0x5*-0x322+-0x28d*-0x4],_0x215c36[0xcd5+0x1002+-0x1cd3]=_0x4c7cad[-0x565+-0x623+-0xb8c*-0x1],_0x215c36[0x1b7f*-0x1+-0x1fda+0x2*0x1daf]=_0x4c7cad[-0x127e+-0x63a*0x1+0x18bd],_0x215c36[-0x17d4+-0xe5*-0x5+0x1361]=_0x4c7cad[0x69d*-0x5+-0xb17+0x2c2e],_0x215c36[0x1cf8+0x17*0x4f+-0x240a]=_0x4c7cad[-0x9d+-0x3*-0x78b+0x15fd*-0x1],_0x215c36[-0x3*0xa38+-0xc0d+0x2abd]=_0x4c7cad[0x1147*0x1+-0x24f2+0x13b3],this;}['getX'](_0xa58ec1=new I()){return _0xa58ec1['set'](this['data'][0x4d0*-0x3+-0x1105+0x1f75],this['data'][-0x1578+0xb*0x4+0x85*0x29],this['data'][0x3*-0x6df+-0x2114+0x35b3]);}['getY'](_0x38a452=new I()){return _0x38a452['set'](this['data'][0x1*-0x21e9+0x255f+-0x373],this['data'][-0x2686+0x1*0x1fd3+0x6b7],this['data'][0xd*0x2ed+-0x683*-0x1+0x2c87*-0x1]);}['getZ'](_0x21afa4=new I()){return _0x21afa4['set'](this['data'][0x620+-0x80e*0x2+0x7*0x16e],this['data'][-0x216c+0xd*-0x27a+0x5*0xd21],this['data'][0xa21+0xe37+0x4*-0x614]);}['equals'](_0x9f9076){const _0xc3136b=this['data'],_0x14a785=_0x9f9076['data'];return _0xc3136b[-0x895*0x3+0x169d+0x322]===_0x14a785[0x128d+0x5*0x6f8+-0x3565]&&_0xc3136b[0x1f91*-0x1+0x243*-0x3+0x265b]===_0x14a785[-0xa13+0xff9+-0x5e5]&&_0xc3136b[0x389+0x1*-0xca+-0x2bd]===_0x14a785[0x805*-0x4+-0x19f7+0x3a0d*0x1]&&_0xc3136b[-0x14a5+0x3*-0xaae+0x26*0x163]===_0x14a785[0x26ef+0x1589+-0x3*0x1427]&&_0xc3136b[-0x23bb+-0x222a+0x45e9]===_0x14a785[0x133b+0x22*-0x85+-0x1*0x18d]&&_0xc3136b[0x13*0xa3+-0xf3b+-0x3*-0x10d]===_0x14a785[-0x1*0x5f+0x933+0x29*-0x37]&&_0xc3136b[-0x30*0xb7+0xce3*0x1+0x1573]===_0x14a785[-0x1ef2+-0x223*0xb+-0x3679*-0x1]&&_0xc3136b[0x13de+0x176+0x1*-0x154d]===_0x14a785[0x1c*-0x12a+0x31*0xbf+-0x3f0]&&_0xc3136b[0x141d*0x1+0x4fb*0x2+-0x1*0x1e0b]===_0x14a785[-0x191*-0x10+0x1465+-0x2d6d];}['isIdentity'](){const _0x1d4b31=this['data'];return _0x1d4b31[0x18f+0x2*-0xc97+0x179f]===0xe86+0x1976+-0x1*0x27fb&&_0x1d4b31[-0x13bd+0x74b*-0x3+-0x853*-0x5]===0x5*-0x1c2+0xd3e+-0x474&&_0x1d4b31[-0x635+-0x1464+0x1a9b]===0x148a+-0x424+-0x1066&&_0x1d4b31[0x1*0xc0b+-0xa*0x3c1+-0x51a*-0x5]===-0x4c9+-0x10fc*0x1+-0x1*-0x15c5&&_0x1d4b31[-0xa13+-0x2*0xb6d+0x20f1]===-0x1d2a*0x1+0x175+0x1bb6&&_0x1d4b31[-0x863+0x45e+0x2*0x205]===0x73b*-0x1+0x1fd*-0x1+0x938&&_0x1d4b31[-0x2024*0x1+-0xc2+0x20ec]===0x5*0x789+-0x2659+0xac&&_0x1d4b31[-0x127c+-0x2655+0x38d8]===0x17*-0x82+0x11ec+0x11*-0x5e&&_0x1d4b31[-0x17c*0x10+0xe5+0x28b*0x9]===-0x2271+0x1*-0x2192+0x4404;}['setIdentit'+'y'](){const _0x8d805c=this['data'];return _0x8d805c[-0x1933+-0x3*0xc87+0x7d9*0x8]=-0x12*0x11d+0x265b+-0x8*0x24a,_0x8d805c[0x29*0x6d+0x2047+-0x31bb]=0x2081+0x5*0x649+0x14e*-0x31,_0x8d805c[0xb*0x53+-0x270f+0x8e*0x40]=0x31*0x8f+-0x1f47*-0x1+-0x2*0x1d53,_0x8d805c[0x1efd+-0x7ed*-0x4+0x3eae*-0x1]=0x16d7+0x722+-0x1df9*0x1,_0x8d805c[-0x2063+0x1*-0xf9d+0x3004]=-0x7*-0x3b7+0x3c*-0x52+-0x6c8,_0x8d805c[-0x1f*-0x12+0x183*0x6+-0xb3b]=0x1*0x19e8+0x2*0x5fb+-0x25de,_0x8d805c[-0x118d*0x1+0x1a5*-0xb+0x1*0x23aa]=-0xa3*0x2b+-0x1e9b+0x39fc,_0x8d805c[0x3d*0x53+0xa3e+0x1*-0x1dfe]=0xb*-0x268+0x1af+0x18c9,_0x8d805c[-0x1dd1+0x1526+0x11*0x83]=0xa44+-0x15f1+0xbae,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x514765=this){const _0x4adf61=_0x514765['data'],_0x1ec67c=this['data'];if(_0x4adf61===_0x1ec67c){let _0x29548e;_0x29548e=_0x4adf61[-0x1353*-0x1+0xb39*-0x3+0xe59],_0x1ec67c[-0x1227+-0x1*-0x1471+-0x249]=_0x4adf61[-0x33*0x71+0x226d+-0xbe7],_0x1ec67c[0x121*0x1+0x4*-0xf7+0x2be]=_0x29548e,_0x29548e=_0x4adf61[-0x12dd+0x1*-0x2287+0x3566],_0x1ec67c[-0xa*-0x132+-0x220e+-0x14*-0x11b]=_0x4adf61[0x3*-0x9a5+0x9*-0x89+-0x1*-0x21c6],_0x1ec67c[-0x6e*-0x46+0x1d*-0x118+0x1aa]=_0x29548e,_0x29548e=_0x4adf61[0x2b2+0x59*-0x46+0x15a9],_0x1ec67c[0x4f9+-0xd64+0x9*0xf0]=_0x4adf61[0x4b*0x45+-0x17b7*0x1+0x387],_0x1ec67c[-0x63d*-0x1+0x2257*-0x1+0x1c21]=_0x29548e;}else _0x1ec67c[-0x1248+-0x309+-0x1*-0x1551]=_0x4adf61[0x18f+0x13fc+-0x158b],_0x1ec67c[0xeb1+-0x1c6*0xc+0x698]=_0x4adf61[-0x1*-0x1ccc+-0x23f1+-0x728*-0x1],_0x1ec67c[-0x1*-0x2209+-0xa*-0x21a+-0x370b]=_0x4adf61[-0x2709+-0xae5*-0x3+-0x22*-0x30],_0x1ec67c[0x2fa+0x10d2+-0x5*0x3f5]=_0x4adf61[-0x1*0x1bf5+-0x1*0x228b+0x3e81],_0x1ec67c[0x69*-0x45+-0x23c9+0x401a]=_0x4adf61[-0x1914*0x1+0x3ac*0x1+0x156c],_0x1ec67c[-0x3*0x1a5+-0xa03+0xef7]=_0x4adf61[-0x17e5+-0x1f*0x11+-0x1*-0x19fb],_0x1ec67c[-0x2*-0x131e+-0x1*0x789+0x1*-0x1ead]=_0x4adf61[-0x113d+0x2671*-0x1+-0x9*-0x630],_0x1ec67c[-0x189a+0x1e5d*-0x1+0x1*0x36fe]=_0x4adf61[0x1179+-0x78f+0x11*-0x95],_0x1ec67c[-0x120f+-0xc68+0x1e7f]=_0x4adf61[0xbdf*0x3+-0xdac+-0x15e9];return this;}['setFromMat'+'4'](_0x95ed0a){const _0x19280e=_0x95ed0a['data'],_0x248cdc=this['data'];return _0x248cdc[0x140a*0x1+-0x1924+0x28d*0x2]=_0x19280e[0x1310+0x3c7*0x7+-0x2d81],_0x248cdc[0x703*-0x5+0x18f4+0xa1c]=_0x19280e[0x162e+0x238f+0x39bc*-0x1],_0x248cdc[-0x274+0x1*0xf1+-0x185*-0x1]=_0x19280e[-0xda+0x9*-0x36e+0x1fba],_0x248cdc[0xa2+-0x2146+0x20a7]=_0x19280e[0x1a2c+-0xd01*-0x1+-0x2729],_0x248cdc[0x1039+0x25f8+-0x362d]=_0x19280e[-0x8*0x2+0x25f*-0x1+0x13a*0x2],_0x248cdc[0x85f*0x2+-0xc7f+0x21d*-0x2]=_0x19280e[0x1bf*-0x16+-0xff1*0x1+0x3661],_0x248cdc[0x23f5+-0x22fa+-0xf5]=_0x19280e[0x1*-0x4e7+-0xf*-0x45+0xe4],_0x248cdc[-0x40e+-0x3c5+0x43*0x1e]=_0x19280e[-0x2210+-0x923+0x2*0x159e],_0x248cdc[-0x3*0x12f+0x5a1+-0x83*0x4]=_0x19280e[0x179*0xa+0x2*0x157+-0xea*0x13],this;}['setFromQua'+'t'](_0x3bcbf5){const _0x5b3390=_0x3bcbf5['x'],_0xeb7c72=_0x3bcbf5['y'],_0x3a5b21=_0x3bcbf5['z'],_0x1afde6=_0x3bcbf5['w'],_0x1e38be=_0x5b3390+_0x5b3390,_0x79a0f5=_0xeb7c72+_0xeb7c72,_0x388117=_0x3a5b21+_0x3a5b21,_0x4a5c8e=_0x5b3390*_0x1e38be,_0x2b2aa5=_0x5b3390*_0x79a0f5,_0x28f93e=_0x5b3390*_0x388117,_0xcad853=_0xeb7c72*_0x79a0f5,_0x33f533=_0xeb7c72*_0x388117,_0x4ec704=_0x3a5b21*_0x388117,_0x177c93=_0x1afde6*_0x1e38be,_0x10bc27=_0x1afde6*_0x79a0f5,_0x41b6af=_0x1afde6*_0x388117,_0x561bdf=this['data'];return _0x561bdf[0x26fe+0x1*0x5b5+-0x2cb3*0x1]=-0x4a5*0x1+0x22e7*0x1+0x5*-0x60d-(_0xcad853+_0x4ec704),_0x561bdf[-0x66f+-0x2621+-0x2c91*-0x1]=_0x2b2aa5+_0x41b6af,_0x561bdf[-0xef*0x11+-0x6*-0x120+0x921]=_0x28f93e-_0x10bc27,_0x561bdf[-0x2269+0x128d*0x1+0xfdf]=_0x2b2aa5-_0x41b6af,_0x561bdf[-0xc2e*-0x2+-0x232f+0x6f*0x19]=0x2e*-0xd0+-0x1b75+0x40d6-(_0x4a5c8e+_0x4ec704),_0x561bdf[0x1*0x1e85+0x20*0x83+-0x14*0x258]=_0x33f533+_0x177c93,_0x561bdf[-0xc97*-0x2+-0x2*0xb39+-0x2b6]=_0x28f93e+_0x10bc27,_0x561bdf[0xc6a+0x2681+-0x1*0x32e4]=_0x33f533-_0x177c93,_0x561bdf[0x259*0xa+0x1*0x27f+0x1*-0x19f1]=0x2222+-0x85b+-0x19c6-(_0x4a5c8e+_0xcad853),this;}['invertMat4'](_0x350e2f){const _0xdf94c5=_0x350e2f['data'],_0x1cf73e=_0xdf94c5[0x24a1+0x4*-0x592+0xe59*-0x1],_0x2d7e85=_0xdf94c5[-0x1e86+-0x9*0x3c1+-0x157*-0x30],_0x45b1a2=_0xdf94c5[0xca3*-0x2+-0x2587+0x1*0x3ecf],_0x4014d0=_0xdf94c5[-0xd0*-0x12+0x1155+-0x1ff1],_0x2ffc3a=_0xdf94c5[-0x136d+-0x9*0x161+0x1fdb],_0x14dc2d=_0xdf94c5[-0x63e+-0x570+0x6b*0x1c],_0x331f8c=_0xdf94c5[-0xa63+-0x8f6+0x1361],_0x4ae0db=_0xdf94c5[-0x1702+-0x826*0x4+0x37a3],_0xe765fe=_0xdf94c5[0x1633*-0x1+-0x1066+0x26a3],_0x121ba9=_0xe765fe*_0x2ffc3a-_0x14dc2d*_0x4ae0db,_0x40df59=-_0xe765fe*_0x2d7e85+_0x45b1a2*_0x4ae0db,_0x3820b6=_0x14dc2d*_0x2d7e85-_0x45b1a2*_0x2ffc3a,_0x2ada35=-_0xe765fe*_0x4014d0+_0x14dc2d*_0x331f8c,_0x5d68a5=_0xe765fe*_0x1cf73e-_0x45b1a2*_0x331f8c,_0xa9e507=-_0x14dc2d*_0x1cf73e+_0x45b1a2*_0x4014d0,_0x54b739=_0x4ae0db*_0x4014d0-_0x2ffc3a*_0x331f8c,_0x22acb4=-_0x4ae0db*_0x1cf73e+_0x2d7e85*_0x331f8c,_0xedab0f=_0x2ffc3a*_0x1cf73e-_0x2d7e85*_0x4014d0,_0x3306de=_0x1cf73e*_0x121ba9+_0x2d7e85*_0x2ada35+_0x45b1a2*_0x54b739;if(_0x3306de===-0x1*-0x1e56+0x38*-0x3d+-0x10fe)this['setIdentit'+'y']();else{const _0x2193df=(-0x8ef+-0xb48+0x1438)/_0x3306de,_0x3e440a=this['data'];_0x3e440a[-0x5d0*-0x1+-0x163c+0x106c]=_0x121ba9*_0x2193df,_0x3e440a[-0x213f+0x1*-0x1627+0x3767]=_0x40df59*_0x2193df,_0x3e440a[0xc03+0x873*0x1+0xee*-0x16]=_0x3820b6*_0x2193df,_0x3e440a[-0x1*0x7b9+-0xc15*0x1+-0x13*-0x10b]=_0x2ada35*_0x2193df,_0x3e440a[0x11d7+-0x1441+0x26e*0x1]=_0x5d68a5*_0x2193df,_0x3e440a[0x9ce+0x1cc1+-0x268a]=_0xa9e507*_0x2193df,_0x3e440a[0x1675+-0x1d33+-0x6c4*-0x1]=_0x54b739*_0x2193df,_0x3e440a[0x5*-0x6e1+0xa81*0x3+0x2e9]=_0x22acb4*_0x2193df,_0x3e440a[-0x477*0x4+-0x202+0x11b*0x12]=_0xedab0f*_0x2193df;}return this;}['transformV'+'ector'](_0x2a7743,_0x4fcc9c=new I()){const _0x109ec7=this['data'],{x:_0x12a6fb,y:_0xefc77c,z:_0x50da5b}=_0x2a7743;return _0x4fcc9c['x']=_0x12a6fb*_0x109ec7[-0x2579+0x3*0xcca+-0xe5]+_0xefc77c*_0x109ec7[0xfe0+-0x95+0x2*-0x7a4]+_0x50da5b*_0x109ec7[-0x8*0x42a+-0xf26+0x183e*0x2],_0x4fcc9c['y']=_0x12a6fb*_0x109ec7[0x1288+0x119d+0x2*-0x1212]+_0xefc77c*_0x109ec7[-0x1a80+-0x47*-0x3a+0xb2*0xf]+_0x50da5b*_0x109ec7[0x1*-0x160f+-0x76b+0x1d81],_0x4fcc9c['z']=_0x12a6fb*_0x109ec7[0x1f2+-0x1dd6+0x1be6]+_0xefc77c*_0x109ec7[-0x1*-0x1aa7+-0x3b*0x6+-0xca*0x20]+_0x50da5b*_0x109ec7[-0x229e*0x1+0x127e+0x1028],_0x4fcc9c;}};h(tn,'IDENTITY',Object['freeze'](new tn())),h(tn,'ZERO',Object['freeze'](new tn()['set']([-0xdad*-0x2+0x83f*0x1+-0x2399,-0x1*-0x1857+0x3*-0xa9f+0x786,-0x3*0x5e1+-0x1474+0x1*0x2617,-0x1099+-0x71f*-0x2+0x25b*0x1,-0x17cb+0xaeb+0x338*0x4,0x1c0c+0x2177+-0x3d83,0x33*-0x17+0x4d*0x58+-0x15e3,0x1*0x616+-0x17e*0x1+-0x498,0x246f*-0x1+-0x7d4*0x2+0x3417])));let oi=tn;const Ft=class Ft{constructor(_0x401057=0x1040+-0xd66+-0x2da,_0x232bae=0xe75+0x20e1*0x1+-0x49*0xa6){h(this,'x'),h(this,'y'),_0x401057['length']===0x2476+0x28c*0xa+-0x3dec?(this['x']=_0x401057[-0x1926+-0xac+-0x295*-0xa],this['y']=_0x401057[0x57*-0x71+0x1a7d+0x3f9*0x3]):(this['x']=_0x401057,this['y']=_0x232bae);}['add'](_0x4e2f19){return this['x']+=_0x4e2f19['x'],this['y']+=_0x4e2f19['y'],this;}['add2'](_0x139942,_0x408e65){return this['x']=_0x139942['x']+_0x408e65['x'],this['y']=_0x139942['y']+_0x408e65['y'],this;}['addScalar'](_0x193696){return this['x']+=_0x193696,this['y']+=_0x193696,this;}['addScaled'](_0x33e794,_0x272847){return this['x']+=_0x33e794['x']*_0x272847,this['y']+=_0x33e794['y']*_0x272847,this;}['clone'](){const _0x2ac812=this['constructo'+'r'];return new _0x2ac812(this['x'],this['y']);}['copy'](_0x39e38d){return this['x']=_0x39e38d['x'],this['y']=_0x39e38d['y'],this;}['cross'](_0x193be5){return this['x']*_0x193be5['y']-this['y']*_0x193be5['x'];}['distance'](_0x179485){const _0x8ce51e=this['x']-_0x179485['x'],_0x36840e=this['y']-_0x179485['y'];return Math['sqrt'](_0x8ce51e*_0x8ce51e+_0x36840e*_0x36840e);}['div'](_0x3eeadd){return this['x']/=_0x3eeadd['x'],this['y']/=_0x3eeadd['y'],this;}['div2'](_0x3ba1e7,_0x20296f){return this['x']=_0x3ba1e7['x']/_0x20296f['x'],this['y']=_0x3ba1e7['y']/_0x20296f['y'],this;}['divScalar'](_0x372e48){return this['x']/=_0x372e48,this['y']/=_0x372e48,this;}['dot'](_0x5d29fd){return this['x']*_0x5d29fd['x']+this['y']*_0x5d29fd['y'];}['equals'](_0x998f7a){return this['x']===_0x998f7a['x']&&this['y']===_0x998f7a['y'];}['equalsAppr'+'ox'](_0x22eda3,_0x34f102=-0x142e+0x78e*-0x1+-0x2c6*-0xa+0.000001){return Math['abs'](this['x']-_0x22eda3['x'])<_0x34f102&&Math['abs'](this['y']-_0x22eda3['y'])<_0x34f102;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x2587f4,_0xec322d,_0x1610da){return this['x']=_0x2587f4['x']+_0x1610da*(_0xec322d['x']-_0x2587f4['x']),this['y']=_0x2587f4['y']+_0x1610da*(_0xec322d['y']-_0x2587f4['y']),this;}['mul'](_0xc1693c){return this['x']*=_0xc1693c['x'],this['y']*=_0xc1693c['y'],this;}['mul2'](_0x8c8f39,_0xd29c46){return this['x']=_0x8c8f39['x']*_0xd29c46['x'],this['y']=_0x8c8f39['y']*_0xd29c46['y'],this;}['mulScalar'](_0x2d0fc0){return this['x']*=_0x2d0fc0,this['y']*=_0x2d0fc0,this;}['normalize'](_0x36c2ac=this){const _0x4a77a5=_0x36c2ac['x']*_0x36c2ac['x']+_0x36c2ac['y']*_0x36c2ac['y'];if(_0x4a77a5>0x1*-0xaf3+0x51*0x4b+-0xcc8){const _0x54a598=(-0x1168+0xda8+0x3c1)/Math['sqrt'](_0x4a77a5);this['x']=_0x36c2ac['x']*_0x54a598,this['y']=_0x36c2ac['y']*_0x54a598;}return this;}['rotate'](_0x3e9440){const _0x11a2d9=Math['atan2'](this['x'],this['y'])+_0x3e9440*Y['DEG_TO_RAD'],_0x54721d=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x11a2d9)*_0x54721d,this['y']=Math['cos'](_0x11a2d9)*_0x54721d,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x837038){return Math['atan2'](this['x']*_0x837038['y']+this['y']*_0x837038['x'],this['x']*_0x837038['x']+this['y']*_0x837038['y'])*Y['RAD_TO_DEG'];}['floor'](_0x3cb2f6=this){return this['x']=Math['floor'](_0x3cb2f6['x']),this['y']=Math['floor'](_0x3cb2f6['y']),this;}['ceil'](_0x240f9a=this){return this['x']=Math['ceil'](_0x240f9a['x']),this['y']=Math['ceil'](_0x240f9a['y']),this;}['round'](_0xc8efc8=this){return this['x']=Math['round'](_0xc8efc8['x']),this['y']=Math['round'](_0xc8efc8['y']),this;}['min'](_0x110723){return _0x110723['x']<this['x']&&(this['x']=_0x110723['x']),_0x110723['y']<this['y']&&(this['y']=_0x110723['y']),this;}['max'](_0x5d47ab){return _0x5d47ab['x']>this['x']&&(this['x']=_0x5d47ab['x']),_0x5d47ab['y']>this['y']&&(this['y']=_0x5d47ab['y']),this;}['set'](_0x5bf156,_0x390470){return this['x']=_0x5bf156,this['y']=_0x390470,this;}['sub'](_0x408fa4){return this['x']-=_0x408fa4['x'],this['y']-=_0x408fa4['y'],this;}['sub2'](_0x4ca772,_0x4b67d9){return this['x']=_0x4ca772['x']-_0x4b67d9['x'],this['y']=_0x4ca772['y']-_0x4b67d9['y'],this;}['subScalar'](_0x24d626){return this['x']-=_0x24d626,this['y']-=_0x24d626,this;}['fromArray'](_0x33e396,_0x102fbd=0x1*0x1b29+-0xa5c+0xb*-0x187){return this['x']=_0x33e396[_0x102fbd]??this['x'],this['y']=_0x33e396[_0x102fbd+(-0x1*0x1251+0x4f*0x17+-0xa9*-0x11)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x1414f8=[],_0x4018db=0x1e3f+-0x1193*0x1+-0xcac){return _0x1414f8[_0x4018db]=this['x'],_0x1414f8[_0x4018db+(-0x5d1*0x6+-0x6*0x298+0x3277)]=this['y'],_0x1414f8;}static['angleRad'](_0x30a74f,_0x538cd5){return Math['atan2'](_0x30a74f['x']*_0x538cd5['y']-_0x30a74f['y']*_0x538cd5['x'],_0x30a74f['x']*_0x538cd5['x']+_0x30a74f['y']*_0x538cd5['y']);}};h(Ft,'ZERO',Object['freeze'](new Ft(-0x8*0x18a+-0x402+0x2*0x829,0xce9+0x17c*0x11+-0x2625))),h(Ft,'HALF',Object['freeze'](new Ft(0xa1*-0x38+-0x2*-0xc33+0xad2+0.5,-0x362*0x2+0x1737*0x1+0x1*-0x1073+0.5))),h(Ft,'ONE',Object['freeze'](new Ft(0x205f+-0x8e*0x1+-0x1fd0,0x9c2+0x77a+-0x113b))),h(Ft,'UP',Object['freeze'](new Ft(-0x99*0x22+0xb2+0x13a0,-0x257d+-0xe7+0x2665))),h(Ft,'DOWN',Object['freeze'](new Ft(-0x8*-0x369+-0x491*0x1+-0x16b7,-(0x1*0x607+0x15d9+-0x1bdf)))),h(Ft,'RIGHT',Object['freeze'](new Ft(0x1e*0xa9+-0x108e+-0x1*0x33f,0x120d*0x1+0x6e*0x49+0x1*-0x316b))),h(Ft,'LEFT',Object['freeze'](new Ft(-(-0x204c*0x1+-0x1b77+0xb4*0x55),0x517*-0x3+0x156b*-0x1+0x24b0)));let J=Ft;const er=class er{constructor(_0x2f2a99=0x5*-0x7a4+-0x31*-0x2b+0x1df9,_0x4ee26d=-0x19d7+0xd14+0xcc3,_0x4fabdd=0x2572+-0x1eca*0x1+-0x6*0x11c,_0x444310=-0x6ef+-0x1db0+-0x5*-0x753){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x2f2a99['length']===-0x6*0x4f+0x1*0xd03+-0xb25?(this['x']=_0x2f2a99[-0x17*0x179+-0x648+0x2827],this['y']=_0x2f2a99[0x275*0x2+-0x81e*0x1+0x335*0x1],this['z']=_0x2f2a99[-0xb*0x95+0xe77+-0x80e],this['w']=_0x2f2a99[0x183a*0x1+-0x17b0+0x3*-0x2d]):(this['x']=_0x2f2a99,this['y']=_0x4ee26d,this['z']=_0x4fabdd,this['w']=_0x444310);}['add'](_0x5b6657){return this['x']+=_0x5b6657['x'],this['y']+=_0x5b6657['y'],this['z']+=_0x5b6657['z'],this['w']+=_0x5b6657['w'],this;}['add2'](_0x54a1ab,_0xa1230b){return this['x']=_0x54a1ab['x']+_0xa1230b['x'],this['y']=_0x54a1ab['y']+_0xa1230b['y'],this['z']=_0x54a1ab['z']+_0xa1230b['z'],this['w']=_0x54a1ab['w']+_0xa1230b['w'],this;}['addScalar'](_0x1f22b0){return this['x']+=_0x1f22b0,this['y']+=_0x1f22b0,this['z']+=_0x1f22b0,this['w']+=_0x1f22b0,this;}['addScaled'](_0x5bb307,_0x2b43bb){return this['x']+=_0x5bb307['x']*_0x2b43bb,this['y']+=_0x5bb307['y']*_0x2b43bb,this['z']+=_0x5bb307['z']*_0x2b43bb,this['w']+=_0x5bb307['w']*_0x2b43bb,this;}['clone'](){const _0x5ad5a5=this['constructo'+'r'];return new _0x5ad5a5(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x3803e5){return this['x']=_0x3803e5['x'],this['y']=_0x3803e5['y'],this['z']=_0x3803e5['z'],this['w']=_0x3803e5['w'],this;}['div'](_0x3d4e8f){return this['x']/=_0x3d4e8f['x'],this['y']/=_0x3d4e8f['y'],this['z']/=_0x3d4e8f['z'],this['w']/=_0x3d4e8f['w'],this;}['div2'](_0x40df3a,_0x88fb8e){return this['x']=_0x40df3a['x']/_0x88fb8e['x'],this['y']=_0x40df3a['y']/_0x88fb8e['y'],this['z']=_0x40df3a['z']/_0x88fb8e['z'],this['w']=_0x40df3a['w']/_0x88fb8e['w'],this;}['divScalar'](_0x159a90){return this['x']/=_0x159a90,this['y']/=_0x159a90,this['z']/=_0x159a90,this['w']/=_0x159a90,this;}['dot'](_0xfb443){return this['x']*_0xfb443['x']+this['y']*_0xfb443['y']+this['z']*_0xfb443['z']+this['w']*_0xfb443['w'];}['equals'](_0x49497){return this['x']===_0x49497['x']&&this['y']===_0x49497['y']&&this['z']===_0x49497['z']&&this['w']===_0x49497['w'];}['equalsAppr'+'ox'](_0x2e585b,_0x49a017=0x1438*0x1+-0xb3*-0x5+-0x17b7+0.000001){return Math['abs'](this['x']-_0x2e585b['x'])<_0x49a017&&Math['abs'](this['y']-_0x2e585b['y'])<_0x49a017&&Math['abs'](this['z']-_0x2e585b['z'])<_0x49a017&&Math['abs'](this['w']-_0x2e585b['w'])<_0x49a017;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x385d9e,_0xdc95a8,_0x366748){return this['x']=_0x385d9e['x']+_0x366748*(_0xdc95a8['x']-_0x385d9e['x']),this['y']=_0x385d9e['y']+_0x366748*(_0xdc95a8['y']-_0x385d9e['y']),this['z']=_0x385d9e['z']+_0x366748*(_0xdc95a8['z']-_0x385d9e['z']),this['w']=_0x385d9e['w']+_0x366748*(_0xdc95a8['w']-_0x385d9e['w']),this;}['mul'](_0x3d4442){return this['x']*=_0x3d4442['x'],this['y']*=_0x3d4442['y'],this['z']*=_0x3d4442['z'],this['w']*=_0x3d4442['w'],this;}['mul2'](_0x1dfb7a,_0x127df9){return this['x']=_0x1dfb7a['x']*_0x127df9['x'],this['y']=_0x1dfb7a['y']*_0x127df9['y'],this['z']=_0x1dfb7a['z']*_0x127df9['z'],this['w']=_0x1dfb7a['w']*_0x127df9['w'],this;}['mulScalar'](_0x275bff){return this['x']*=_0x275bff,this['y']*=_0x275bff,this['z']*=_0x275bff,this['w']*=_0x275bff,this;}['normalize'](_0x5c1a96=this){const _0x468f4d=_0x5c1a96['x']*_0x5c1a96['x']+_0x5c1a96['y']*_0x5c1a96['y']+_0x5c1a96['z']*_0x5c1a96['z']+_0x5c1a96['w']*_0x5c1a96['w'];if(_0x468f4d>0x4a3*-0x4+-0xd77+0x95*0x37){const _0x1defc3=(-0x10b*0x19+0x1371+-0x6a3*-0x1)/Math['sqrt'](_0x468f4d);this['x']=_0x5c1a96['x']*_0x1defc3,this['y']=_0x5c1a96['y']*_0x1defc3,this['z']=_0x5c1a96['z']*_0x1defc3,this['w']=_0x5c1a96['w']*_0x1defc3;}return this;}['floor'](_0x4fa2f6=this){return this['x']=Math['floor'](_0x4fa2f6['x']),this['y']=Math['floor'](_0x4fa2f6['y']),this['z']=Math['floor'](_0x4fa2f6['z']),this['w']=Math['floor'](_0x4fa2f6['w']),this;}['ceil'](_0x13c6dc=this){return this['x']=Math['ceil'](_0x13c6dc['x']),this['y']=Math['ceil'](_0x13c6dc['y']),this['z']=Math['ceil'](_0x13c6dc['z']),this['w']=Math['ceil'](_0x13c6dc['w']),this;}['round'](_0x2263c7=this){return this['x']=Math['round'](_0x2263c7['x']),this['y']=Math['round'](_0x2263c7['y']),this['z']=Math['round'](_0x2263c7['z']),this['w']=Math['round'](_0x2263c7['w']),this;}['min'](_0x2c184e){return _0x2c184e['x']<this['x']&&(this['x']=_0x2c184e['x']),_0x2c184e['y']<this['y']&&(this['y']=_0x2c184e['y']),_0x2c184e['z']<this['z']&&(this['z']=_0x2c184e['z']),_0x2c184e['w']<this['w']&&(this['w']=_0x2c184e['w']),this;}['max'](_0x262861){return _0x262861['x']>this['x']&&(this['x']=_0x262861['x']),_0x262861['y']>this['y']&&(this['y']=_0x262861['y']),_0x262861['z']>this['z']&&(this['z']=_0x262861['z']),_0x262861['w']>this['w']&&(this['w']=_0x262861['w']),this;}['set'](_0x28fbd8,_0x305bdf,_0x4c66b4,_0x5b8696){return this['x']=_0x28fbd8,this['y']=_0x305bdf,this['z']=_0x4c66b4,this['w']=_0x5b8696,this;}['sub'](_0x205684){return this['x']-=_0x205684['x'],this['y']-=_0x205684['y'],this['z']-=_0x205684['z'],this['w']-=_0x205684['w'],this;}['sub2'](_0x462649,_0x11e3d7){return this['x']=_0x462649['x']-_0x11e3d7['x'],this['y']=_0x462649['y']-_0x11e3d7['y'],this['z']=_0x462649['z']-_0x11e3d7['z'],this['w']=_0x462649['w']-_0x11e3d7['w'],this;}['subScalar'](_0x19d10a){return this['x']-=_0x19d10a,this['y']-=_0x19d10a,this['z']-=_0x19d10a,this['w']-=_0x19d10a,this;}['fromArray'](_0x4ba1ef,_0x16747a=-0x5*0x2bf+0xa53*-0x3+0x165a*0x2){return this['x']=_0x4ba1ef[_0x16747a]??this['x'],this['y']=_0x4ba1ef[_0x16747a+(-0x3c4+-0x3bd*-0x7+-0x1666)]??this['y'],this['z']=_0x4ba1ef[_0x16747a+(-0x1286+-0x1ad4+-0x2d5c*-0x1)]??this['z'],this['w']=_0x4ba1ef[_0x16747a+(-0x15af+0x1d1e+-0x76c)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x103cda=[],_0x20abb2=-0x5c7+-0x1*-0x1ba7+0x460*-0x5){return _0x103cda[_0x20abb2]=this['x'],_0x103cda[_0x20abb2+(0x26*0x85+-0x3*-0x161+-0xbf*0x20)]=this['y'],_0x103cda[_0x20abb2+(-0x1*0xc68+-0xce4+0x2*0xca7)]=this['z'],_0x103cda[_0x20abb2+(0xbb5*-0x1+0x268d+-0x1ad5)]=this['w'],_0x103cda;}};h(er,'ZERO',Object['freeze'](new er(0x1db+-0x3*-0x2ab+-0x9dc,0x1*0x2673+-0x2*0x8ef+-0x1495,-0x377*0x6+0x1c6c+-0x7a2,-0x657*0x3+-0x34*-0xb9+-0x128f))),h(er,'HALF',Object['freeze'](new er(-0x1b0d+-0x2*0x1064+0x3bd5+0.5,0xad1+0x1e52+0x1*-0x2923+0.5,0x10f1+0x3b*-0x8d+0xf8e+0.5,0x1*0xc79+-0x18f2+0x1*0xc79+0.5))),h(er,'ONE',Object['freeze'](new er(-0xdaf+0xfa9+-0x1f9,0x20b*0x5+0xe2*0x21+-0x2758,-0x2025+0xf3a+-0x72*-0x26,0xb0d*-0x2+-0x6c7*0x1+0xe71*0x2)));let ae=er;const Un=new J(),As=new I(),Hs=new I(),Ws=new I(),yl=new I(),Ur=class Ur{constructor(){h(this,'data',new Float32Array(0x46c*-0x4+0x39a*-0xa+0x35c4)),this['data'][-0x2429*-0x1+-0xfa5+-0x65*0x34]=this['data'][-0x91*-0x2c+-0x152c+-0x5*0xbf]=this['data'][0x2302+-0x1a5a*-0x1+-0x3d52]=this['data'][0x604+-0x1*-0x2479+0x2a6e*-0x1]=-0x1fdc+0xebd+0x1120;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x4884d4,_0x15be45,_0x560ba6,_0x205bcf,_0x2b6593){_0x2b6593?(_0x4884d4['x']=_0x205bcf*Math['tan'](_0x15be45*Math['PI']/(-0x506+0x482+0x6*0x52)),_0x4884d4['y']=_0x4884d4['x']/_0x560ba6):(_0x4884d4['y']=_0x205bcf*Math['tan'](_0x15be45*Math['PI']/(-0x307+-0x22d1+-0x8*-0x4e8)),_0x4884d4['x']=_0x4884d4['y']*_0x560ba6);}['add2'](_0x50e07a,_0x4724c0){const _0x2a5c72=_0x50e07a['data'],_0x5ec0b5=_0x4724c0['data'],_0xdeae49=this['data'];return _0xdeae49[-0xa1f*-0x3+0x7a3+-0x2600]=_0x2a5c72[-0x25d*-0xe+-0x14c3*-0x1+0x1*-0x35d9]+_0x5ec0b5[0xbd9*-0x2+0x1494+-0x85*-0x6],_0xdeae49[-0xe1f+0x7f+0xda1]=_0x2a5c72[0x125a+-0x110e+-0x14b]+_0x5ec0b5[-0xe9a+-0x34*0x8b+0x2ad7],_0xdeae49[0x1756+-0x28+-0x172c]=_0x2a5c72[0x1332+0x4db*-0x4+0x3c]+_0x5ec0b5[0x11d+-0x183*-0x17+-0x23e0],_0xdeae49[0x59*-0x6d+-0x4*-0x45a+0x10*0x148]=_0x2a5c72[0x9*0x41f+-0x1e4+-0x2330]+_0x5ec0b5[-0x2*-0xd99+0xe*0x217+-0x1*0x3871],_0xdeae49[0x6*-0x1be+-0x1b8a+0x2602]=_0x2a5c72[-0x2*-0xbf7+-0x1*0x17f+-0x166b]+_0x5ec0b5[-0x2*-0x111d+0x1868+-0x3a9e],_0xdeae49[0x1b28+-0x7f*-0x43+0x1420*-0x3]=_0x2a5c72[0x12b8+-0xa12+-0x8a1]+_0x5ec0b5[0x2294+0x20*-0x67+0x319*-0x7],_0xdeae49[0x2ff*-0x8+-0x11e1+-0x29df*-0x1]=_0x2a5c72[-0x3*0x183+0x267b+0xd*-0x29c]+_0x5ec0b5[0x5ba+-0xcbb*-0x1+-0x126f],_0xdeae49[-0x20*0x3b+0xb*-0x328+0x2a1f]=_0x2a5c72[0x8b7+0xf6b*-0x1+0x6bb]+_0x5ec0b5[-0x42a*-0x5+-0xb92*0x2+0x259],_0xdeae49[0x160e+-0x257f+0xf79]=_0x2a5c72[-0x1758+-0x952+0x20b2]+_0x5ec0b5[0x110*0x1b+0x23b5+-0x1*0x405d],_0xdeae49[0x6*0x387+-0x1d03+0x7e2]=_0x2a5c72[0xc*-0x1a9+-0x724+0x3df*0x7]+_0x5ec0b5[-0x617*-0x5+-0x1*-0x1675+0x1*-0x34df],_0xdeae49[-0xba7+-0xd01+0x18b2]=_0x2a5c72[-0x1*0x1272+0x234a+-0x10ce]+_0x5ec0b5[-0x154a+0x2172+-0xc1e],_0xdeae49[0x1*-0x1555+0x1c24+0x4*-0x1b1]=_0x2a5c72[0xd4e+0x22f1+0x4d2*-0xa]+_0x5ec0b5[-0x23e6+0x11*0x18a+0x9c7],_0xdeae49[0x6*-0xcd+0x23e9*0x1+0x1*-0x1f0f]=_0x2a5c72[-0xe8c*-0x1+-0x1d20+0xea0]+_0x5ec0b5[-0x1*0x1166+-0xae8+0x1c5a],_0xdeae49[-0x1afa+-0xd5f+0x2866]=_0x2a5c72[-0x1621*-0x1+0x1*0x1af+-0xb*0x229]+_0x5ec0b5[-0xb*0x23b+-0x1f59+0x37ef],_0xdeae49[0x2c0*-0x2+-0x2222+0x2*0x13d8]=_0x2a5c72[0x4b0*0x5+0x114*0x21+-0x2*0x1d7b]+_0x5ec0b5[-0xb3*-0x1d+-0x20ee+0xcb5],_0xdeae49[0x1*-0x1e59+0x1a37+0x431*0x1]=_0x2a5c72[-0xe5f*-0x2+0x1c1d+-0xa*0x5ae]+_0x5ec0b5[0x1*-0xb24+-0x270b+0x323e],this;}['add'](_0x2ff342){return this['add2'](this,_0x2ff342);}['clone'](){const _0x56727e=this['constructo'+'r'];return new _0x56727e()['copy'](this);}['copy'](_0x5a0ce3){const _0x2d0f92=_0x5a0ce3['data'],_0x70b1aa=this['data'];return _0x70b1aa[-0x25bc+0x14c3+0xb*0x18b]=_0x2d0f92[-0x1d0a+0x1*0x25ca+0xa*-0xe0],_0x70b1aa[0x20f9+-0x859+-0xb*0x23d]=_0x2d0f92[0x6*-0x95+-0x3*0xaba+0x1*0x23ad],_0x70b1aa[0x14c8+-0x505+-0xfc1]=_0x2d0f92[0x231+0x673+-0x8a2],_0x70b1aa[-0x7+0x6a4+-0x82*0xd]=_0x2d0f92[-0x1*-0x1de3+0x1a0c*0x1+-0x37ec],_0x70b1aa[0x1f3*0x8+-0x259f*0x1+0x129*0x13]=_0x2d0f92[0x2143*-0x1+0x607+-0x10*-0x1b4],_0x70b1aa[0x7*0x48b+0x25*0xa1+0x370d*-0x1]=_0x2d0f92[-0xaba+-0xef2+0x19b1],_0x70b1aa[-0x243*-0xd+-0xa8*0xa+0x9*-0x289]=_0x2d0f92[-0x17ae+0x1863+-0x23*0x5],_0x70b1aa[0x8*-0x4c4+0x2515+0x112]=_0x2d0f92[0x25ef+-0x1192+-0x1456],_0x70b1aa[0x2629+0x1*0x7e3+-0x2*0x1702]=_0x2d0f92[0x1bf0+-0x8e*-0x2e+-0xd5b*0x4],_0x70b1aa[0x11*0x33+0x575+-0x8cf]=_0x2d0f92[0x141e*-0x1+-0x1*-0x2ea+-0x3*-0x5bf],_0x70b1aa[0x13a*-0x19+0x1114*-0x2+0x40dc]=_0x2d0f92[-0xb40+0x1430+-0x8e6],_0x70b1aa[0x3bc*0x6+0x313*-0x3+-0x692*0x2]=_0x2d0f92[-0x391+-0x2*0x8cb+0x1532],_0x70b1aa[0x8e2+-0x5*-0x6b7+-0x2a69]=_0x2d0f92[-0xcd2+-0x1*-0x24a6+-0x17c8],_0x70b1aa[0x1c45*-0x1+-0xbf*0x11+0x2901]=_0x2d0f92[0x1b30+-0x22*-0x56+-0x268f],_0x70b1aa[0x1bb6+-0x3*0x74a+0xd*-0x72]=_0x2d0f92[0x9bb*0x1+-0x4a*-0x1+0x1*-0x9f7],_0x70b1aa[0x5*0x43c+-0xb*0x353+0xf74]=_0x2d0f92[0x6f0+0x428+0x71*-0x19],this;}['equals'](_0x373de1){const _0x4b5836=this['data'],_0x31b466=_0x373de1['data'];return _0x4b5836[0x2512+-0x13b3*-0x1+-0x1*0x38c5]===_0x31b466[-0xfa5*0x1+-0xdd7+0x3*0x9d4]&&_0x4b5836[0x9*-0x409+0x515*-0x5+0x1*0x3dbb]===_0x31b466[-0x7b*0x33+-0x2*-0x752+0x9de]&&_0x4b5836[-0xc60+-0x1471+0xaf1*0x3]===_0x31b466[0x52f+0x1*0x1983+-0x1eb0]&&_0x4b5836[-0x19*0x145+0x1d39+-0x287*-0x1]===_0x31b466[-0x893+-0x2*0x812+0x3*0x83e]&&_0x4b5836[-0x1880+0xa2d*-0x3+0x370b]===_0x31b466[-0x1b7*0x11+0x17b1*0x1+0x57a*0x1]&&_0x4b5836[-0x22c5+-0x1*-0x85d+0x1a6d]===_0x31b466[-0x21b6+0x21f3+-0x38]&&_0x4b5836[0x8a9+-0x18b3+0x1010]===_0x31b466[0x2694+0x1a87+-0x4115*0x1]&&_0x4b5836[0xb7e+-0x7db+-0x54*0xb]===_0x31b466[-0x169b*-0x1+-0x21d2+-0x59f*-0x2]&&_0x4b5836[-0x4*0x5c1+-0x51*-0x10+-0x2*-0x8fe]===_0x31b466[-0x2*0x445+-0xa*-0xfa+-0x132]&&_0x4b5836[0x16e2+-0x1*-0x2bd+0x28f*-0xa]===_0x31b466[0x1710+-0x2d7*-0x5+0x129d*-0x2]&&_0x4b5836[-0x510+-0x424+0x93e]===_0x31b466[0x3bb*-0x1+0x130c+-0xf47]&&_0x4b5836[0xb65*-0x2+-0x683+0x1d58]===_0x31b466[0x1*0x10d+0x1949*0x1+-0x1a4b*0x1]&&_0x4b5836[0x2202+0x1c20+-0x1*0x3e16]===_0x31b466[0x210*0x7+0x90c+-0x1770]&&_0x4b5836[0x2*-0x233+0x5*0x2bb+-0x4c*0x1f]===_0x31b466[0x1b5f*0x1+0x31*-0xb+0x5*-0x50b]&&_0x4b5836[0x5*0x19b+0x1f35*-0x1+0x173c]===_0x31b466[-0x1*-0xf0d+-0x55d*0x1+-0x9*0x112]&&_0x4b5836[0x1*-0x189b+0x5*-0x58d+0x1*0x346b]===_0x31b466[0x1e01+0xb*-0x209+0xf*-0x81];}['isIdentity'](){const _0x8773b2=this['data'];return _0x8773b2[-0x595+0x10a+0x48b]===0x241+-0x17*0x3b+0x30d&&_0x8773b2[0xd0f*0x1+-0x14*-0x1d3+-0x2ea*0x11]===-0x2030+-0x1*-0xd6d+0x12c3&&_0x8773b2[0xbe4*0x2+-0x838+0x2*-0x7c7]===0xd*-0x17f+-0x13a0+0x1*0x2713&&_0x8773b2[-0x2*0x112f+0x5bf*0x5+-0x3*-0x1e2]===0x1102+0x23e2+-0x14*0x2a5&&_0x8773b2[0x1287+-0x6e8*-0x2+-0x2053]===0xf7f+-0xaa*-0x3a+-0x4e9*0xb&&_0x8773b2[-0x1*-0xdca+-0x9f5*0x2+0x8f*0xb]===0x9cd+0x838+0x1204*-0x1&&_0x8773b2[-0xe4e+0x177+-0xcdd*-0x1]===-0x69b+0x14cb*-0x1+0x1b66&&_0x8773b2[0x171d+-0x7*0x99+-0x1*0x12e7]===-0x1*-0x8e0+-0x17da+0xefa&&_0x8773b2[-0x628+-0x13b7*-0x1+-0x1*0xd87]===-0x5*0x4b1+-0x42e+0x1ba3&&_0x8773b2[-0x1*0x10d6+0x5c1*-0x5+0x16d2*0x2]===-0x5*0xef+0x1c2e+0x1*-0x1783&&_0x8773b2[-0xe63+-0x77c*-0x5+0x1d*-0xcb]===0xac5+-0xd*0x43+-0x5*0x179&&_0x8773b2[-0x922+0x2636*-0x1+0x6c5*0x7]===-0x2f*-0x2d+0xf*-0x6d+0x78*-0x4&&_0x8773b2[0x1f59+-0x1b11+-0x43c]===-0x54e*-0x6+0x1f6f+-0x3f43&&_0x8773b2[0x2025+0x11b5*0x1+-0x31cd]===0x1*-0x2413+0x1eda+0x539&&_0x8773b2[-0x283*0xe+-0x1*0x239d+0x46d5]===-0x2572+-0x689+0x2bfb&&_0x8773b2[-0x2*0xe5f+-0x1*-0x59+-0x1c74*-0x1]===-0x1b7f+-0x1b45+0x36c5;}['mul2'](_0x3d60b2,_0x156aca){const _0x23bb68=_0x3d60b2['data'],_0x450590=_0x156aca['data'],_0x13ef77=this['data'],_0xc74704=_0x23bb68[-0x1eff+-0x1455+0x3354],_0x15b4cd=_0x23bb68[-0x24c8+0x7a7*0x1+0x2a6*0xb],_0x426a86=_0x23bb68[-0x124b+0x1a00+-0x7b3],_0x48360c=_0x23bb68[0x1cb1+-0x1*0x136b+0x943*-0x1],_0x593b90=_0x23bb68[0x2651+0x24af+-0x257e*0x2],_0x1e55e7=_0x23bb68[0x2012+-0x761*0x5+0x4d8],_0x592f76=_0x23bb68[0x67a+0x19a7+0x1*-0x201b],_0x45d6d7=_0x23bb68[0xad6+-0x6c4*0x1+-0x1*0x40b],_0x21b6c1=_0x23bb68[0x1bc9+-0x131e+0x1*-0x8a3],_0x4f54f1=_0x23bb68[-0x1c94+-0xd70+0x5*0x869],_0x16d4a6=_0x23bb68[0x46a+-0x1b1a+0x16ba],_0x2062df=_0x23bb68[-0x1730+-0x757+0x1e92],_0x2c1844=_0x23bb68[-0x57+-0xca3*0x3+-0xc*-0x331],_0x5e5d6f=_0x23bb68[0x161c+-0x1b*0x1c+-0x131b],_0x55d5b8=_0x23bb68[-0xcb2+0x285*0xd+-0x1401],_0x1f7acf=_0x23bb68[0x19*-0x13d+-0x3e*-0x57+-0x86*-0x13];let _0x9ef053,_0x119d81,_0x2d5245,_0x4ab299;return _0x9ef053=_0x450590[-0x3*-0x34b+0x5*0x533+-0x47c*0x8],_0x119d81=_0x450590[0x262d+0x1aed+-0x3*0x15b3],_0x2d5245=_0x450590[-0x1c1f+-0x26f7+0x4318],_0x4ab299=_0x450590[0x1*0x1de5+0x1*-0xb71+-0x1271],_0x13ef77[0x1*0x50b+0x21d*-0xb+0x1234]=_0xc74704*_0x9ef053+_0x593b90*_0x119d81+_0x21b6c1*_0x2d5245+_0x2c1844*_0x4ab299,_0x13ef77[-0x25*0xca+-0x1a54+-0x1*-0x3787]=_0x15b4cd*_0x9ef053+_0x1e55e7*_0x119d81+_0x4f54f1*_0x2d5245+_0x5e5d6f*_0x4ab299,_0x13ef77[-0x1d68+-0x468+-0x1a*-0x14d]=_0x426a86*_0x9ef053+_0x592f76*_0x119d81+_0x16d4a6*_0x2d5245+_0x55d5b8*_0x4ab299,_0x13ef77[0x696*0x2+0x1*0x1a71+0x2*-0x13cd]=_0x48360c*_0x9ef053+_0x45d6d7*_0x119d81+_0x2062df*_0x2d5245+_0x1f7acf*_0x4ab299,_0x9ef053=_0x450590[-0x2271*-0x1+-0x1d84+0x4e9*-0x1],_0x119d81=_0x450590[0x2*0x812+0x919+-0x1938],_0x2d5245=_0x450590[0x20b9+-0x2470+-0x1d*-0x21],_0x4ab299=_0x450590[0xae0+-0x1194+0x1*0x6bb],_0x13ef77[-0x1516+0x1*-0x25c3+0x3add]=_0xc74704*_0x9ef053+_0x593b90*_0x119d81+_0x21b6c1*_0x2d5245+_0x2c1844*_0x4ab299,_0x13ef77[-0xd*0x138+-0x1*-0xaf1+0x4ec]=_0x15b4cd*_0x9ef053+_0x1e55e7*_0x119d81+_0x4f54f1*_0x2d5245+_0x5e5d6f*_0x4ab299,_0x13ef77[-0x373+0x1cb5+-0x193c]=_0x426a86*_0x9ef053+_0x592f76*_0x119d81+_0x16d4a6*_0x2d5245+_0x55d5b8*_0x4ab299,_0x13ef77[0xcdd+0x4b5*-0x2+-0x4*0xdb]=_0x48360c*_0x9ef053+_0x45d6d7*_0x119d81+_0x2062df*_0x2d5245+_0x1f7acf*_0x4ab299,_0x9ef053=_0x450590[-0x1d*0x26+-0xe7d+0x3d*0x4f],_0x119d81=_0x450590[0x1eff+0x6d0+-0x3c7*0xa],_0x2d5245=_0x450590[-0x24e0+0x1ec9+0x621],_0x4ab299=_0x450590[-0x13cf+0x350+0x108a],_0x13ef77[0x16f0+-0x7*0x4c1+-0xa5f*-0x1]=_0xc74704*_0x9ef053+_0x593b90*_0x119d81+_0x21b6c1*_0x2d5245+_0x2c1844*_0x4ab299,_0x13ef77[-0x1850+-0x1777+0x2fd0]=_0x15b4cd*_0x9ef053+_0x1e55e7*_0x119d81+_0x4f54f1*_0x2d5245+_0x5e5d6f*_0x4ab299,_0x13ef77[0x1*-0x21cf+0x1*0x1643+0xb96]=_0x426a86*_0x9ef053+_0x592f76*_0x119d81+_0x16d4a6*_0x2d5245+_0x55d5b8*_0x4ab299,_0x13ef77[0xc5b*-0x2+0x37*0x47+0x980]=_0x48360c*_0x9ef053+_0x45d6d7*_0x119d81+_0x2062df*_0x2d5245+_0x1f7acf*_0x4ab299,_0x9ef053=_0x450590[-0xa7*-0x15+0x11f1+-0x1f98],_0x119d81=_0x450590[0x308*-0x7+0x36*-0xa2+0xab*0x53],_0x2d5245=_0x450590[-0x2447+-0xe05+0x325a],_0x4ab299=_0x450590[-0x26a0+0x1794+0xf1b],_0x13ef77[-0xe96+-0xb*-0x287+-0x1*0xd2b]=_0xc74704*_0x9ef053+_0x593b90*_0x119d81+_0x21b6c1*_0x2d5245+_0x2c1844*_0x4ab299,_0x13ef77[0x1813+0x264b+0x173*-0x2b]=_0x15b4cd*_0x9ef053+_0x1e55e7*_0x119d81+_0x4f54f1*_0x2d5245+_0x5e5d6f*_0x4ab299,_0x13ef77[-0x711*0x2+-0x1239+0x2069*0x1]=_0x426a86*_0x9ef053+_0x592f76*_0x119d81+_0x16d4a6*_0x2d5245+_0x55d5b8*_0x4ab299,_0x13ef77[0x1b23+0x26b*-0x1+-0x18a9]=_0x48360c*_0x9ef053+_0x45d6d7*_0x119d81+_0x2062df*_0x2d5245+_0x1f7acf*_0x4ab299,this;}['mulAffine2'](_0x4e02f4,_0x107cb6){const _0x1f204a=_0x4e02f4['data'],_0x37e40b=_0x107cb6['data'],_0x5b6228=this['data'],_0x500a57=_0x1f204a[-0x213a+-0x1b25*0x1+0x3c5f],_0x54d450=_0x1f204a[0x119c+-0x476+0x1*-0xd25],_0x3d9735=_0x1f204a[0x26*0xaf+0xd11+0x3*-0xd03],_0x413495=_0x1f204a[-0x1*0x21ad+0x3*-0x50+0x3d9*0x9],_0x2db915=_0x1f204a[0x661*-0x6+0x11db+0x1470],_0x1a8e13=_0x1f204a[-0x1*0x20b+0x22f7+0x2*-0x1073],_0x12243a=_0x1f204a[-0x1b*-0x51+0x1*0x1f63+-0x27e6],_0x308182=_0x1f204a[0x1*0x22c+-0x15b5+-0x1e*-0xa7],_0xdda240=_0x1f204a[0xb*0xcb+-0x1*-0x615+-0xec4],_0x868a3b=_0x1f204a[-0xf74+0xfab+-0x2b*0x1],_0x4dd535=_0x1f204a[-0x3f*0x7a+0x1f*-0x76+-0x2c5d*-0x1],_0x586154=_0x1f204a[0x2*0xdfd+-0xec*0xa+0x4*-0x4ad];let _0x5e7909,_0x80d80b,_0x46ed88;return _0x5e7909=_0x37e40b[0xb5c+-0x1067+0x50b],_0x80d80b=_0x37e40b[-0x112b+0x10d5+-0x1*-0x57],_0x46ed88=_0x37e40b[0x2033*-0x1+-0x1*-0xe21+0x1214],_0x5b6228[-0x1*0x9d5+0x1ab4+-0x7*0x269]=_0x500a57*_0x5e7909+_0x413495*_0x80d80b+_0x12243a*_0x46ed88,_0x5b6228[-0x1ac9*0x1+-0xffb+0x1*0x2ac5]=_0x54d450*_0x5e7909+_0x2db915*_0x80d80b+_0x308182*_0x46ed88,_0x5b6228[0xd18+-0x3b*-0x2f+-0x17eb]=_0x3d9735*_0x5e7909+_0x1a8e13*_0x80d80b+_0xdda240*_0x46ed88,_0x5b6228[0x647+-0x1d03+0x16bf]=0x54+0x1*-0xc61+0xc0d,_0x5e7909=_0x37e40b[0x373*-0x8+-0x1*-0x1db3+-0x217],_0x80d80b=_0x37e40b[-0x5e4*-0x5+-0x20c2*-0x1+-0xb7*0x57],_0x46ed88=_0x37e40b[-0x1a45+0x748*0x4+-0x2d5],_0x5b6228[-0x67c*0x6+0x253d+-0x1*-0x1af]=_0x500a57*_0x5e7909+_0x413495*_0x80d80b+_0x12243a*_0x46ed88,_0x5b6228[-0x1*0x158a+0xb93+0x9fc]=_0x54d450*_0x5e7909+_0x2db915*_0x80d80b+_0x308182*_0x46ed88,_0x5b6228[0x999+-0x24d6+-0x1b43*-0x1]=_0x3d9735*_0x5e7909+_0x1a8e13*_0x80d80b+_0xdda240*_0x46ed88,_0x5b6228[-0x212e+-0x13f*-0xb+0x1380]=-0x15*-0x103+0x224b*-0x1+-0x14*-0xa7,_0x5e7909=_0x37e40b[-0x3*0xc23+0x2580+0x10f*-0x1],_0x80d80b=_0x37e40b[-0x154e+0xd*-0x2b7+-0x293*-0x16],_0x46ed88=_0x37e40b[0x283*0x9+0x2ad*0x1+0x435*-0x6],_0x5b6228[0x2698+-0xcb9*-0x1+-0x3349*0x1]=_0x500a57*_0x5e7909+_0x413495*_0x80d80b+_0x12243a*_0x46ed88,_0x5b6228[0x1c*0x12e+-0x15*-0x16d+-0x4c*0xd4]=_0x54d450*_0x5e7909+_0x2db915*_0x80d80b+_0x308182*_0x46ed88,_0x5b6228[0x214f+0x1083+0x1b*-0x1d8]=_0x3d9735*_0x5e7909+_0x1a8e13*_0x80d80b+_0xdda240*_0x46ed88,_0x5b6228[0x1*-0xc41+0x1a7f+-0x2d7*0x5]=0xd99+0xe5*-0x18+0x7df,_0x5e7909=_0x37e40b[0x43*0x2+0x1fdc+0x2*-0x102b],_0x80d80b=_0x37e40b[-0x755+0x198e+-0x122c],_0x46ed88=_0x37e40b[0x1*-0xbf5+-0x17*0x13f+0x28ac],_0x5b6228[-0x7d*0x15+-0x4b4+0xf01]=_0x500a57*_0x5e7909+_0x413495*_0x80d80b+_0x12243a*_0x46ed88+_0x868a3b,_0x5b6228[0x1b15+-0x1102+-0xa06]=_0x54d450*_0x5e7909+_0x2db915*_0x80d80b+_0x308182*_0x46ed88+_0x4dd535,_0x5b6228[0x95*-0x15+0x1a04+0xdbd*-0x1]=_0x3d9735*_0x5e7909+_0x1a8e13*_0x80d80b+_0xdda240*_0x46ed88+_0x586154,_0x5b6228[0x13c0*-0x1+0xb3*-0x20+0x2a2f]=-0x2a8+-0x1fa*0x1+0x1*0x4a3,this;}['mul'](_0x465878){return this['mul2'](this,_0x465878);}['transformP'+'oint'](_0xf5d58b,_0x53152b=new I()){const _0x31fe39=this['data'],{x:_0x20f492,y:_0x515d09,z:_0x396274}=_0xf5d58b;return _0x53152b['x']=_0x20f492*_0x31fe39[0xff8+-0x1e50*0x1+0x4c8*0x3]+_0x515d09*_0x31fe39[-0xb*-0x182+0x9ab+-0x8bf*0x3]+_0x396274*_0x31fe39[-0x834+0x161c+0xde*-0x10]+_0x31fe39[0x12*0x194+-0x2f4+-0x1*0x1968],_0x53152b['y']=_0x20f492*_0x31fe39[-0xcd0+0x3*0x6a1+-0xb5*0xa]+_0x515d09*_0x31fe39[0x59*0xa+-0x1134+0x495*0x3]+_0x396274*_0x31fe39[0x1f52+-0x2029+0xe0]+_0x31fe39[0x1*-0x905+-0x20b3+0x29c5],_0x53152b['z']=_0x20f492*_0x31fe39[0x1*0x1043+0xca1+-0x1ce2]+_0x515d09*_0x31fe39[-0x1*0x1487+0x2fb*-0x1+0x1788]+_0x396274*_0x31fe39[0x1850+-0x10b4*0x1+-0x13*0x66]+_0x31fe39[0x23c7+0x13f+0x127c*-0x2],_0x53152b;}['transformV'+'ector'](_0x3b817,_0x63b738=new I()){const _0x178186=this['data'],{x:_0x2f0a04,y:_0x147b9c,z:_0x838c27}=_0x3b817;return _0x63b738['x']=_0x2f0a04*_0x178186[-0x267d+-0x2598+0x4c15]+_0x147b9c*_0x178186[0x11bc+-0xd*0x8b+0xaa9*-0x1]+_0x838c27*_0x178186[0x1ec1+-0x2125+0x26c],_0x63b738['y']=_0x2f0a04*_0x178186[-0x19*-0x175+0x65*0x1+-0x24d1]+_0x147b9c*_0x178186[-0x1*0x25b8+-0x7f*0x37+0x1d*0x23e]+_0x838c27*_0x178186[-0xabd+0x45*-0x20+-0x1*-0x1366],_0x63b738['z']=_0x2f0a04*_0x178186[-0xf1*-0x13+-0x2132+0xf51*0x1]+_0x147b9c*_0x178186[-0x1b4+0x193b+-0x1781]+_0x838c27*_0x178186[-0x2*-0x11ff+-0x1*-0x22d7+-0x1*0x46cb],_0x63b738;}['transformV'+'ec4'](_0x19622f,_0x1d441a=new ae()){const _0x551a3e=this['data'],{x:_0x55a575,y:_0x4d1176,z:_0x2660b2,w:_0x46ba3a}=_0x19622f;return _0x1d441a['x']=_0x55a575*_0x551a3e[-0x2459+0x2d6+0x17*0x175]+_0x4d1176*_0x551a3e[0xda5+0xb*-0x67+-0x3e*0x26]+_0x2660b2*_0x551a3e[-0x816+-0x1a02+0x5b*0x60]+_0x46ba3a*_0x551a3e[-0x1b71+0x2*0xffd+0x17f*-0x3],_0x1d441a['y']=_0x55a575*_0x551a3e[-0xbbd+-0x1*-0x1e9b+-0x12dd]+_0x4d1176*_0x551a3e[0xf*0x36+0x4a*-0x37+0xcc1]+_0x2660b2*_0x551a3e[-0xa53+0x9f*0x1+0x9bd]+_0x46ba3a*_0x551a3e[-0x33c+0x3ff+-0xb6],_0x1d441a['z']=_0x55a575*_0x551a3e[-0x5+-0x1*0x1936+0x193d]+_0x4d1176*_0x551a3e[-0x1f7b+0x17df+0x7a2]+_0x2660b2*_0x551a3e[0x8a8+-0xa1*-0x31+0x1*-0x276f]+_0x46ba3a*_0x551a3e[-0x1730+0x1af*0x4+0x1082],_0x1d441a['w']=_0x55a575*_0x551a3e[-0xe3c+0x4f8+0x947]+_0x4d1176*_0x551a3e[-0xf*0x23b+-0xa9e+0xa*0x469]+_0x2660b2*_0x551a3e[0x1*-0x702+-0x68c+0xd99]+_0x46ba3a*_0x551a3e[0x1325+0x157*0x7+-0x1c77],_0x1d441a;}['setLookAt'](_0x32022e,_0x48d694,_0x1b780a){Ws['sub2'](_0x32022e,_0x48d694)['normalize'](),Hs['copy'](_0x1b780a)['normalize'](),As['cross'](Hs,Ws)['normalize'](),Hs['cross'](Ws,As);const _0x4e8bce=this['data'];return _0x4e8bce[0x71*-0x26+-0x1b83+0x2c49]=As['x'],_0x4e8bce[0x2b*0x58+0x1*0xd0a+-0x1bd1*0x1]=As['y'],_0x4e8bce[0x1898*-0x1+0x527+0x1373]=As['z'],_0x4e8bce[0x1381+-0x31d+0x1061*-0x1]=0x1340+-0x17aa+-0xe2*-0x5,_0x4e8bce[0xf*-0xeb+-0x1*-0x1a57+-0xc8e]=Hs['x'],_0x4e8bce[0x5*-0x773+0x7*0x38+-0x8ef*-0x4]=Hs['y'],_0x4e8bce[0x18aa*-0x1+-0xa0+-0x1*-0x1950]=Hs['z'],_0x4e8bce[-0x1*-0xf4f+0x249+-0x1*0x1191]=-0x1*0x1261+0x5a4+-0x3*-0x43f,_0x4e8bce[0x314+0x464+0x1dc*-0x4]=Ws['x'],_0x4e8bce[-0x1*-0x1f0d+-0x918+-0x15ec]=Ws['y'],_0x4e8bce[-0x1*-0xfc6+0x147b+-0x2437*0x1]=Ws['z'],_0x4e8bce[-0x118d+-0x81a+-0xb*-0x256]=-0x8*0x306+0x21a2+-0x972*0x1,_0x4e8bce[-0xe4b*-0x2+-0xc7*0x5+-0x18a7]=_0x32022e['x'],_0x4e8bce[-0x1*0x250+0x265c*-0x1+-0x8b*-0x4b]=_0x32022e['y'],_0x4e8bce[0x25d0+-0x185d+-0xd65]=_0x32022e['z'],_0x4e8bce[-0x1*-0x207+0x17e3*-0x1+0x1f*0xb5]=-0x13*0x191+-0x479*0x2+-0x26b6*-0x1,this;}['setFrustum'](_0x1bba8c,_0xcccc4e,_0x10d5e4,_0x93d93e,_0x37e7d8,_0x210681){const _0x589652=(-0x834+0x6d4+-0x2*-0xb1)*_0x37e7d8,_0x5572da=_0xcccc4e-_0x1bba8c,_0x2b6394=_0x93d93e-_0x10d5e4,_0x544d90=_0x210681-_0x37e7d8,_0x8317cd=this['data'];return _0x8317cd[-0x1800+-0x3b*0x70+-0x2*-0x18e8]=_0x589652/_0x5572da,_0x8317cd[0x1*-0x32+-0x370+0x3a3]=-0x26*-0x13+-0x1751+0x6d5*0x3,_0x8317cd[-0x4*-0x238+-0x187f+0xfa1]=0x5*-0x75a+0x247*-0x2+-0x2*-0x14a8,_0x8317cd[0x1c6+-0x1ee7+0x1d24]=-0x2165+0x1702+0xa63,_0x8317cd[-0x1*0x99+-0x2178+0x2215]=0x1*0x1273+0xe*0x13f+0x1*-0x23e5,_0x8317cd[0x3*0xc61+0x45b*0x1+0x1*-0x2979]=_0x589652/_0x2b6394,_0x8317cd[-0x1d61+-0x1d97+0x3afe]=-0x1*-0x1108+-0x4d*0x6e+0x336*0x5,_0x8317cd[-0x1f53+0x8*-0x1b+-0x27a*-0xd]=-0x2*-0x7b9+0x139e+0xbb0*-0x3,_0x8317cd[-0xb14+0xcec+-0x1d0]=(_0xcccc4e+_0x1bba8c)/_0x5572da,_0x8317cd[0xf*-0x32+0x1e14+-0x1b1d]=(_0x93d93e+_0x10d5e4)/_0x2b6394,_0x8317cd[-0x1a44+0x21dc+-0x78e]=(-_0x210681-_0x37e7d8)/_0x544d90,_0x8317cd[-0xd*-0x1cd+-0x2*0xaec+0x5*-0x4e]=-(-0x377*0x2+-0x2b3*-0x4+-0x3dd),_0x8317cd[0x1*-0x1cb7+0x1989+0x33a]=-0xa6*-0x1+-0x3*0x9df+0x1cf7,_0x8317cd[-0x1*-0x376+0x1e5b*-0x1+0xd79*0x2]=-0xb8c*0x2+-0x50b*-0x5+0x3*-0xb5,_0x8317cd[0x340+-0x2000+0x1cce]=-_0x589652*_0x210681/_0x544d90,_0x8317cd[-0x5a*-0x5f+-0x6a3+0x2*-0xd5a]=0x18d3*-0x1+-0x33d*0x2+0x1f4d,this;}['setPerspec'+'tive'](_0x25c9ef,_0x7d78ab,_0xfd8768,_0x4b081e,_0x431c8c){return Ur['_getPerspe'+'ctiveHalfS'+'ize'](Un,_0x25c9ef,_0x7d78ab,_0xfd8768,_0x431c8c),this['setFrustum'](-Un['x'],Un['x'],-Un['y'],Un['y'],_0xfd8768,_0x4b081e);}['setOrtho'](_0xfe82aa,_0x2199eb,_0x32bf84,_0x25a7a8,_0x5c201c,_0x52099e){const _0x3cd6d9=this['data'];return _0x3cd6d9[0xd78*0x1+-0x2445+0x16cd]=(0x116b+-0x2552+-0x3*-0x6a3)/(_0x2199eb-_0xfe82aa),_0x3cd6d9[0xe*0xa1+-0x607*-0x6+0x2cf7*-0x1]=-0x4a2+-0x40c+0x8ae,_0x3cd6d9[-0x82f+0x2*0x1003+-0x1*0x17d5]=-0x1495+0x7*0xdb+-0x4*-0x3a6,_0x3cd6d9[0xc*-0xc9+0x4ae+-0x1*-0x4c1]=-0x1ff2+0x14*0x134+0x7e2,_0x3cd6d9[-0x2070+0x87a+0x17fa]=-0x13e4+0x25d2+-0x11ee,_0x3cd6d9[0x185e+0x1*-0x2302+0xaa9]=(-0x1474+0x9d*-0x4+-0x1a3*-0xe)/(_0x25a7a8-_0x32bf84),_0x3cd6d9[0x1*-0x2003+0x638+0x19d1]=-0x7*0x125+0x1288+0x1*-0xa85,_0x3cd6d9[0x153b*0x1+-0x2*-0x6f7+-0x2322*0x1]=0x1d7e+0x6*0x57d+0x63e*-0xa,_0x3cd6d9[-0xb*0x21f+0x2513+-0xdb6]=0x2a3*-0x6+0x106+0x3b3*0x4,_0x3cd6d9[-0x584+-0x2c5+0x852]=0xa68+-0x1024+0x2de*0x2,_0x3cd6d9[-0x9cd+0x7*0x3f9+-0xa*0x1cc]=-(0xa1e+-0x20fd+0x16e1)/(_0x52099e-_0x5c201c),_0x3cd6d9[-0x25*-0x9e+-0x6e7+0x9*-0x1c4]=0x32+-0x5e2*0x2+-0x5c9*-0x2,_0x3cd6d9[-0x9*-0x25b+-0x1*-0x1033+-0x1*0x255a]=-(_0x2199eb+_0xfe82aa)/(_0x2199eb-_0xfe82aa),_0x3cd6d9[0x3b5*-0x2+-0x2325+-0xaa7*-0x4]=-(_0x25a7a8+_0x32bf84)/(_0x25a7a8-_0x32bf84),_0x3cd6d9[-0xce6*0x2+-0x1a2+-0x4*-0x6df]=-(_0x52099e+_0x5c201c)/(_0x52099e-_0x5c201c),_0x3cd6d9[0x14b6+0x9ab+-0xf29*0x2]=0x27*-0xdb+0x22ec+0x2*-0xc7,this;}['setFromAxi'+'sAngle'](_0x336b85,_0x1cc4fc){_0x1cc4fc*=Y['DEG_TO_RAD'];const {x:_0x36eb0e,y:_0x1bd9eb,z:_0x2fdac7}=_0x336b85,_0x230853=Math['cos'](_0x1cc4fc),_0x57de37=Math['sin'](_0x1cc4fc),_0x355e00=-0x2395+0xeb*-0x2a+0x4a24-_0x230853,_0x53bf6d=_0x355e00*_0x36eb0e,_0x3d0305=_0x355e00*_0x1bd9eb,_0x2e71f2=this['data'];return _0x2e71f2[0x199a+-0x1fd9+0x63f]=_0x53bf6d*_0x36eb0e+_0x230853,_0x2e71f2[0x469*-0x6+-0x271+0x1ce8]=_0x53bf6d*_0x1bd9eb+_0x57de37*_0x2fdac7,_0x2e71f2[0x1ac+0xf5a+-0x1104]=_0x53bf6d*_0x2fdac7-_0x57de37*_0x1bd9eb,_0x2e71f2[-0x66*0x5c+0x5*-0x7cf+0x4bb6]=-0x1efc+0x1*0x24cb+-0x5cf,_0x2e71f2[0x1977+-0x253+-0x1720]=_0x53bf6d*_0x1bd9eb-_0x57de37*_0x2fdac7,_0x2e71f2[0x1f*-0x8b+-0x2*0x41+0x115c]=_0x3d0305*_0x1bd9eb+_0x230853,_0x2e71f2[-0x2247+-0xca7+-0x4*-0xbbd]=_0x3d0305*_0x2fdac7+_0x57de37*_0x36eb0e,_0x2e71f2[-0x2484+0xafa*0x1+-0xb*-0x253]=0x8a0+-0x23a6+-0x3*-0x902,_0x2e71f2[-0x2b2*-0x7+-0x7*-0x4f0+-0xa*0x557]=_0x53bf6d*_0x2fdac7+_0x57de37*_0x1bd9eb,_0x2e71f2[0x1*0x1348+-0xa7+-0x1298]=_0x3d0305*_0x2fdac7-_0x36eb0e*_0x57de37,_0x2e71f2[-0x2fa*-0x1+-0x1949+0x1659*0x1]=_0x355e00*_0x2fdac7*_0x2fdac7+_0x230853,_0x2e71f2[-0x9d8+-0x1bfe+0x25e1]=-0x2f6+0x1a5*0xd+0x73*-0x29,_0x2e71f2[-0x25ef+-0x586+0x1*0x2b81]=-0x5*0x45f+0x175a+0x17f*-0x1,_0x2e71f2[-0x1fad+-0x1462*-0x1+0x3*0x3c8]=0x248c*0x1+0x66*0x12+-0x2bb8,_0x2e71f2[0x2cd*-0x4+-0xa5*-0x23+-0xb4d]=-0x4*0x364+0xff3*-0x1+0x1d83,_0x2e71f2[-0x2337+-0x2282+0x45c8]=-0x6c8+-0x2641+-0x2*-0x1685,this;}['setTransla'+'te'](_0x2ee495,_0x3df3df,_0x3bb039){const _0x151411=this['data'];return _0x151411[0x86*-0x2+-0x1a96+0x1ba2]=-0xd5+-0x75c+0x1*0x832,_0x151411[0x1eb*-0xe+-0x1b24+0x35ff]=0xfd5*-0x2+0xfb5*0x2+0x10*0x4,_0x151411[0xc53+-0x18*-0x121+0x3b*-0xab]=0x421+-0x1*0x1d+0x1*-0x404,_0x151411[-0x5bb+-0x2*0x8af+-0x7b4*-0x3]=0x1821+0x1*-0x9a9+-0x73c*0x2,_0x151411[-0x257f+-0x31*0x75+0x3be8*0x1]=0x1abd+-0x166+-0x1957,_0x151411[0x1623+0x1dd3+-0x33f1]=0xf84*-0x1+0x57*0x23+-0x1d*-0x20,_0x151411[-0x31d*0x1+-0x47*0x8a+0x2969]=0x1755+0x11a0+-0x831*0x5,_0x151411[0x5*-0x39d+-0x11eb+-0x1*-0x2403]=0xfd*-0x11+0x845+0xa8*0xd,_0x151411[0x21c0+-0x97*0x1d+-0x109d]=-0xab9+-0xe8*-0x3+0x801*0x1,_0x151411[0xceb*-0x1+0x1251+-0x1*0x55d]=-0x1416+-0x775+0x1b8b,_0x151411[0x289+-0x4f9+0x27a*0x1]=-0xc*0x281+0x1c40*0x1+0x1cd,_0x151411[-0x17*0xba+-0x1ba5+-0x1*-0x2c66]=-0x16d+0xe35*-0x2+0x1dd7*0x1,_0x151411[-0x793+-0x15b8+-0x103*-0x1d]=_0x2ee495,_0x151411[0x67*-0x9+-0x1*0x13+0x3bf]=_0x3df3df,_0x151411[0x26ef*0x1+0x9b0+0x3091*-0x1]=_0x3bb039,_0x151411[0x14e*0x1d+-0x1*0x1307+0x96*-0x20]=0x1*0x230b+-0x6*-0x5e7+-0x4674,this;}['setScale'](_0x441471,_0x6e1131,_0xfe9f3b){const _0x6f3602=this['data'];return _0x6f3602[-0xce*-0x21+-0x1422+-0x66c]=_0x441471,_0x6f3602[-0x3*0x4b1+-0x1*0x1052+-0x2*-0xf33]=0x32*-0xbf+0x263c*0x1+-0xee*0x1,_0x6f3602[-0x4*-0x3+0x1b49+-0x1b53]=-0x3*0x3+-0x3f5*0x8+0x1fb1,_0x6f3602[0xc53+-0x65*-0x2+-0xd1a]=0x5*-0x335+-0x1e*0x43+-0x4c7*-0x5,_0x6f3602[-0x26f2*-0x1+0x1*-0x1f99+-0x755]=0x1174+-0x1*-0x20af+-0x3223,_0x6f3602[0x1*0xbbc+-0x11f3+-0x31e*-0x2]=_0x6e1131,_0x6f3602[0x1cb2+-0x1d7*-0x1+-0x1e83]=-0x2523+0x4d5*-0x1+0x29f8,_0x6f3602[-0x2194+0x26b*0x6+0x1319]=-0x8d6+-0x239d+0x2c73,_0x6f3602[-0x1d20+0x1fac*0x1+0x2*-0x142]=-0x3*0x9eb+-0x1e63+0x3c24,_0x6f3602[-0x1*-0x1701+0x1ed8+-0x35d0]=-0x51f+-0x1*0x1ef8+0x2417,_0x6f3602[0x4*-0x11d+0x34b+0x133]=_0xfe9f3b,_0x6f3602[-0x19d9+-0x1*-0xec3+-0x7*-0x197]=0x6a2+-0x2*0x2f1+-0xc0,_0x6f3602[-0x9fe+-0xfbb+0x19c5]=0x696*0x1+0x23*-0x34+0x86,_0x6f3602[0x94*0x3+-0x8f8+0x749]=0x1c58+-0x23ca+0x772,_0x6f3602[0x10b*0x1+-0x10*0x16a+0x15a3]=0x976*0x1+0x23c5+-0x2d3b*0x1,_0x6f3602[-0xb*-0x184+0x1+-0x1*0x109e]=0x1*-0x1f7b+-0x1*-0x1932+0x64a,this;}['setViewpor'+'t'](_0x4e4983,_0x44d411,_0x80c9a2,_0x18fcc9){const _0x48436b=this['data'];return _0x48436b[0x73e+0xb9a+-0x12d8]=_0x80c9a2*(-0x1b9a+-0x2135+0x3ccf+0.5),_0x48436b[-0x281*-0x2+-0xfab+0xaaa]=-0x2195*-0x1+-0x5*-0x739+-0x45b2,_0x48436b[-0xcd2+0x14be+-0x7ea]=0x26b7+0x3a*-0xd+-0x23c5*0x1,_0x48436b[0x2490+-0x1d29+-0x764]=0x21ce*0x1+0x8db*-0x1+-0x18f3,_0x48436b[-0x9bd+0x6ba+-0x307*-0x1]=-0x36a*-0x1+-0x1*0x2076+0x34*0x8f,_0x48436b[0x23b8+-0x274+-0x213f]=_0x18fcc9*(-0xc49+0xc*-0x1f9+0x23*0x107+0.5),_0x48436b[-0x1fe9+-0x26ef+-0x2*-0x236f]=0xdb7+-0x1*-0x147b+-0x2232,_0x48436b[0x2*-0xca+0x9*0x5d+-0x1aa]=-0x3*0x57c+-0x209c+0x3110,_0x48436b[0xc87+-0x1*0x1ad2+0x1*0xe53]=-0x1851+-0x1650+0x2ea1,_0x48436b[0x43*0x95+0x1b31*0x1+-0x5*0xd3b]=-0x1cf+-0x47f+0x64e,_0x48436b[0x6*-0x112+-0x2509*0x1+0x2b7f]=0x1d92*-0x1+0x1a0e+0x9*0x64+0.5,_0x48436b[0x43*-0x3a+-0x287*0x5+0xdee*0x2]=-0x44e*0x2+0x3*0x489+0x4ff*-0x1,_0x48436b[0x1*0x15e2+-0x2175+-0x23*-0x55]=_0x4e4983+_0x80c9a2*(0x129f+0x1*-0x1123+-0x17c+0.5),_0x48436b[-0x1c49*-0x1+0x1c84+-0x38c0]=_0x44d411+_0x18fcc9*(0x20*0x14+-0x1d*0x8f+0xdb3+0.5),_0x48436b[-0x59f*-0x3+-0x5*0x24b+-0x558]=-0x1b7+0x4d*0x12+-0x3b3+0.5,_0x48436b[0x56b+-0x29*0x8+-0x414]=-0x5d2*0x5+-0x169e+0x33b9,this;}['setReflect'+'ion'](_0x147cbc,_0x5b9e8d){const _0x476224=_0x147cbc['x'],_0x54da7b=_0x147cbc['y'],_0x25c0cf=_0x147cbc['z'],_0x46fd20=this['data'];return _0x46fd20[0x1*0x24e8+0x45*0x3+0x78b*-0x5]=-0x2697+0x1c2f+0xcd*0xd-(0x87e+-0x215+-0x1*0x667)*_0x476224*_0x476224,_0x46fd20[-0x1d4c+-0xbdb+-0x8*-0x525]=-(-0x67e+0x1be3+-0x1563)*_0x476224*_0x54da7b,_0x46fd20[0x240e+-0x2*-0x4a7+-0x2d5a]=-(0xe9d+-0x493*-0x2+-0x17c1)*_0x476224*_0x25c0cf,_0x46fd20[-0x1bbe*-0x1+-0x143d+0x77e*-0x1]=-0x255f*-0x1+0x1be2+-0x4141*0x1,_0x46fd20[-0x3*0xcb1+0x1*0x22ea+0x10f*0x3]=-(-0x2*0xf9f+0x67f*-0x2+0x2c3e)*_0x476224*_0x54da7b,_0x46fd20[0x278*-0xe+-0x255b+0x47f0]=0x936+-0x4*-0x2e3+-0x14c1-(0x1*-0xb4a+0x1f02+-0x13b6)*_0x54da7b*_0x54da7b,_0x46fd20[-0x10ec*0x1+-0x12cd*0x1+0x23bf*0x1]=-(-0x33*-0xba+-0x83a+-0x1cd2)*_0x54da7b*_0x25c0cf,_0x46fd20[0x7b*0x47+0x2ea*0xd+0x23fc*-0x2]=-0xb56*-0x2+-0x26fb+0x104f,_0x46fd20[-0x4*-0x25c+-0x1bd3+0x126b]=-(-0xa3*-0x20+-0x1791+0x333)*_0x476224*_0x25c0cf,_0x46fd20[0x2*-0x85d+0x1d98+-0xcd5]=-(0x26df+-0x1*0xd8d+-0x1950)*_0x54da7b*_0x25c0cf,_0x46fd20[0x3a3+0xab1+-0xe4a]=0xbf8+0x1b1*0x11+-0x28b8-(0x119b+-0x2*0xeed+0xc41)*_0x25c0cf*_0x25c0cf,_0x46fd20[-0xec+-0x126f+0x1366]=0xc2*-0x2f+0x4a9*-0x4+-0x56d*-0xa,_0x46fd20[0x2367+-0x84*0x47+0x1*0x141]=-(-0x43d*-0x6+-0x9d7+-0xf95)*_0x476224*_0x5b9e8d,_0x46fd20[-0x12c9+-0x786+0xe*0x1e2]=-(-0x1ba4+0xf82+-0xc24*-0x1)*_0x54da7b*_0x5b9e8d,_0x46fd20[-0xa*0x3c5+0x652+0x1f6e]=-(0x1df4+0x986*0x1+-0x2778)*_0x25c0cf*_0x5b9e8d,_0x46fd20[0x23c+0x3*0xc9d+-0x2804]=0x110b+-0x1f12+0xe08,this;}['invert'](_0x4fc59e=this){const _0x2cfada=_0x4fc59e['data'],_0x174fda=_0x2cfada[0xea1+0x1370+-0x2211],_0x81edf8=_0x2cfada[0x102b+0x2422+-0x344c],_0x111775=_0x2cfada[-0x99b*-0x3+0x1d3a+-0x3a09*0x1],_0x32f064=_0x2cfada[0x37c+0x522+0x1*-0x89b],_0x23d32d=_0x2cfada[0xff1+0x15ff+-0x25ec],_0x4afb67=_0x2cfada[-0xb*-0x2e1+0x79*0x16+-0x2a0c],_0x33f380=_0x2cfada[0x3*0xc1e+0x1075+-0x1*0x34c9],_0x37cb14=_0x2cfada[0x1*-0x1f8f+0xf01+0x11b*0xf],_0x3f718b=_0x2cfada[-0x32d*0x1+-0x5cb*0x5+0x3a*0x8e],_0x3b016f=_0x2cfada[0xb30+0x2224+-0x2d4b],_0x55b0ab=_0x2cfada[0xc1e+-0x84d+-0x3c7],_0x371a53=_0x2cfada[0x5*-0x5cc+0x2450+-0x1*0x749],_0x1ccfcf=_0x2cfada[-0x13ae*-0x1+-0x1a8f+-0x9*-0xc5],_0x2767fa=_0x2cfada[-0x1*0xd02+-0xd*0xc7+-0x5*-0x4a2],_0x3c8cb7=_0x2cfada[0x19f*0x11+0x266*-0x1+0x191b*-0x1],_0x3199da=_0x2cfada[0x55f+-0x25c5*-0x1+-0x2b15],_0x1a9eed=_0x174fda*_0x4afb67-_0x81edf8*_0x23d32d,_0x3161dd=_0x174fda*_0x33f380-_0x111775*_0x23d32d,_0x5974ef=_0x174fda*_0x37cb14-_0x32f064*_0x23d32d,_0x4d82a9=_0x81edf8*_0x33f380-_0x111775*_0x4afb67,_0x27e8b0=_0x81edf8*_0x37cb14-_0x32f064*_0x4afb67,_0x6c6354=_0x111775*_0x37cb14-_0x32f064*_0x33f380,_0x134deb=_0x3f718b*_0x2767fa-_0x3b016f*_0x1ccfcf,_0x7f0c76=_0x3f718b*_0x3c8cb7-_0x55b0ab*_0x1ccfcf,_0x57c81e=_0x3f718b*_0x3199da-_0x371a53*_0x1ccfcf,_0x530bc2=_0x3b016f*_0x3c8cb7-_0x55b0ab*_0x2767fa,_0x3e979c=_0x3b016f*_0x3199da-_0x371a53*_0x2767fa,_0x1e0918=_0x55b0ab*_0x3199da-_0x371a53*_0x3c8cb7,_0x4ecccb=_0x1a9eed*_0x1e0918-_0x3161dd*_0x3e979c+_0x5974ef*_0x530bc2+_0x4d82a9*_0x57c81e-_0x27e8b0*_0x7f0c76+_0x6c6354*_0x134deb;if(_0x4ecccb===-0xbdd+0x397*0x9+-0x1472)this['setIdentit'+'y']();else{const _0x166008=(0xb49+0x56*0x2f+0xf*-0x1ce)/_0x4ecccb,_0xb65328=this['data'];_0xb65328[-0x2*0xd87+-0xb6c+0x267a]=(_0x4afb67*_0x1e0918-_0x33f380*_0x3e979c+_0x37cb14*_0x530bc2)*_0x166008,_0xb65328[0x201+0xbbe*-0x1+0x4df*0x2]=(-_0x81edf8*_0x1e0918+_0x111775*_0x3e979c-_0x32f064*_0x530bc2)*_0x166008,_0xb65328[-0x5fb*0x5+-0x1a97+-0x80*-0x71]=(_0x2767fa*_0x6c6354-_0x3c8cb7*_0x27e8b0+_0x3199da*_0x4d82a9)*_0x166008,_0xb65328[-0x2*0x803+0x261*-0xa+0x27d3*0x1]=(-_0x3b016f*_0x6c6354+_0x55b0ab*_0x27e8b0-_0x371a53*_0x4d82a9)*_0x166008,_0xb65328[-0x415+0x1303*0x2+-0x21ed]=(-_0x23d32d*_0x1e0918+_0x33f380*_0x57c81e-_0x37cb14*_0x7f0c76)*_0x166008,_0xb65328[-0xa*-0xe0+0x1c6e+-0x2529]=(_0x174fda*_0x1e0918-_0x111775*_0x57c81e+_0x32f064*_0x7f0c76)*_0x166008,_0xb65328[0x4b5+-0x18d2+-0x5*-0x407]=(-_0x1ccfcf*_0x6c6354+_0x3c8cb7*_0x5974ef-_0x3199da*_0x3161dd)*_0x166008,_0xb65328[0x224c+0xe8e+-0x30d3]=(_0x3f718b*_0x6c6354-_0x55b0ab*_0x5974ef+_0x371a53*_0x3161dd)*_0x166008,_0xb65328[0x19*-0x175+0x3c7*-0x2+0x251*0x13]=(_0x23d32d*_0x3e979c-_0x4afb67*_0x57c81e+_0x37cb14*_0x134deb)*_0x166008,_0xb65328[-0x1730+-0x8d4+0x200d]=(-_0x174fda*_0x3e979c+_0x81edf8*_0x57c81e-_0x32f064*_0x134deb)*_0x166008,_0xb65328[-0xc75+-0x21eb+0x1*0x2e6a]=(_0x1ccfcf*_0x27e8b0-_0x2767fa*_0x5974ef+_0x3199da*_0x1a9eed)*_0x166008,_0xb65328[0x4b*-0x25+-0x2207+0x2ce9]=(-_0x3f718b*_0x27e8b0+_0x3b016f*_0x5974ef-_0x371a53*_0x1a9eed)*_0x166008,_0xb65328[-0x19ad+0xc76*0x2+0xcd]=(-_0x23d32d*_0x530bc2+_0x4afb67*_0x7f0c76-_0x33f380*_0x134deb)*_0x166008,_0xb65328[-0xa19+0x1*0x101e+-0xbf*0x8]=(_0x174fda*_0x530bc2-_0x81edf8*_0x7f0c76+_0x111775*_0x134deb)*_0x166008,_0xb65328[-0x793+0xec7+0x2*-0x393]=(-_0x1ccfcf*_0x4d82a9+_0x2767fa*_0x3161dd-_0x3c8cb7*_0x1a9eed)*_0x166008,_0xb65328[0xba4+0x2c*0x1c+-0x1065]=(_0x3f718b*_0x4d82a9-_0x3b016f*_0x3161dd+_0x55b0ab*_0x1a9eed)*_0x166008;}return this;}['set'](_0x534b89){const _0x3b7c51=this['data'];return _0x3b7c51[0x6f5*-0x1+-0x8a1*0x3+0x20d8]=_0x534b89[0x1c4+-0x29*0xad+0x19f1],_0x3b7c51[0xf12+-0x53e*0x3+0xa9*0x1]=_0x534b89[-0x14f0+-0x1bb6*0x1+0x9bb*0x5],_0x3b7c51[-0x14*-0xc9+0x7*0x503+0x1*-0x32c7]=_0x534b89[-0x617+0xfc2+-0x9a9],_0x3b7c51[-0x3e5*0x7+0x1*-0x3f7+0x1*0x1f3d]=_0x534b89[-0x1b6b*0x1+-0x26b3*0x1+-0xb*-0x603],_0x3b7c51[0x21e6+-0x2369+-0x1*-0x187]=_0x534b89[-0x2b0+-0x56*-0x1d+-0x70a],_0x3b7c51[0x5e*-0xc+0x83f+0x1*-0x3d2]=_0x534b89[-0x363*0x1+0x222+0x2*0xa3],_0x3b7c51[-0x184d*-0x1+0x8b7*0x2+-0x3*0xde7]=_0x534b89[0x10c9*0x1+0x45f+-0x1*0x1522],_0x3b7c51[0x1*-0x67+0x1*0xc82+-0xc14]=_0x534b89[0x1*-0x1c51+-0xdaf+0x2a07],_0x3b7c51[-0xe9a+-0xb34+0x2*0xceb]=_0x534b89[-0x2710+-0x4c*-0x7+-0x941*-0x4],_0x3b7c51[0x232c+-0x136*-0x3+-0x26c5]=_0x534b89[0x3*-0xae3+0x1938+0xb*0xae],_0x3b7c51[0x1*0xe41+0x16b3+-0x24ea]=_0x534b89[0x2695*-0x1+-0x2036+-0x1*-0x46d5],_0x3b7c51[-0x2cb*-0xd+0x1*-0x163e+-0xe06]=_0x534b89[0x4dd+0x68*-0x5c+0xada*0x3],_0x3b7c51[0x756+-0x3*-0x72f+0x45*-0x6b]=_0x534b89[0x19e1*-0x1+0x5e9*0x5+-0x1d0*0x2],_0x3b7c51[0xb*0x133+0x1*-0x223+-0xb01]=_0x534b89[-0x1a99+0x766+-0x4*-0x4d0],_0x3b7c51[0x1*0x1147+0x3ec*0x4+-0x19*0x151]=_0x534b89[-0x66e+-0x1*0xf1b+0x1597],_0x3b7c51[0x21f9+-0x1*0x1dfa+-0xa8*0x6]=_0x534b89[-0xf79+0xbed+0x39b],this;}['setIdentit'+'y'](){const _0x548a79=this['data'];return _0x548a79[0x19ee+0x113f*0x1+-0x2b2d]=-0x1c1*0x2+-0x2626+-0x87*-0x4f,_0x548a79[0x2f*0xb1+0x823+-0x28a1]=-0x1726+-0x1e99+-0x35bf*-0x1,_0x548a79[0x2*-0x12f3+-0x1db8*0x1+-0x4*-0x10e8]=-0x5*-0x52f+0x1c29+0x4*-0xd85,_0x548a79[-0x2*0xad2+-0x73*-0x25+0x284*0x2]=-0x1173+-0x6a*-0x2d+-0x12f,_0x548a79[0x2a0+0x24*-0x74+0x36d*0x4]=-0xd58+-0x11b9+0x1*0x1f11,_0x548a79[0x1f83*0x1+0xb8*-0x1a+-0xcce]=-0x191*0xf+0x5*0x7c9+-0xf6d,_0x548a79[0x1c6a+0x1632+-0x3296]=-0x1*0x1cf3+-0x11*-0x212+-0x63f,_0x548a79[-0x1*0x1a17+-0x444*-0x7+0x3be*-0x1]=-0x1942+0x142f*-0x1+0x2d71*0x1,_0x548a79[0x4*0x45a+0x24af+-0x360f]=-0x1dea+0x281*0x1+0x1b69,_0x548a79[0x68f*-0x3+0xfbc+-0x1*-0x3fa]=-0x1c1a+0x25ec+0x1*-0x9d2,_0x548a79[0x49*0x57+0x43+-0xc84*0x2]=0x1399+0x102e+-0x23c6,_0x548a79[0x609+0x5f*-0x7+-0x365]=-0x152e+0x9e2+-0x4*-0x2d3,_0x548a79[-0x1914+0x1e56+-0x536*0x1]=-0x1bfe+0x18*0x10f+0x2*0x14b,_0x548a79[0x1d63+0x254c+-0x42a2]=0x1ef7*0x1+0x1675+-0x107*0x34,_0x548a79[-0x7*0x203+0x850*-0x2+0x1ec3]=-0x4a*0x16+0x1*0x16b5+-0x1059,_0x548a79[-0xd53+-0x94f+0x16b1]=0x982+0x2*-0x435+-0x3*0x5d,this;}['setTRS'](_0x2524ea,_0x126e4e,_0x1f9c2f){const _0xf7d5=_0x126e4e['x'],_0x1ae5aa=_0x126e4e['y'],_0x333381=_0x126e4e['z'],_0x48d6de=_0x126e4e['w'],_0x6c9388=_0x1f9c2f['x'],_0x551c0d=_0x1f9c2f['y'],_0x4629f6=_0x1f9c2f['z'],_0x24721f=_0xf7d5+_0xf7d5,_0x2b7372=_0x1ae5aa+_0x1ae5aa,_0x2dd662=_0x333381+_0x333381,_0x2041ef=_0xf7d5*_0x24721f,_0x1ce082=_0xf7d5*_0x2b7372,_0x350955=_0xf7d5*_0x2dd662,_0x407e42=_0x1ae5aa*_0x2b7372,_0x265816=_0x1ae5aa*_0x2dd662,_0x5b26dd=_0x333381*_0x2dd662,_0x3fc29e=_0x48d6de*_0x24721f,_0x2e3202=_0x48d6de*_0x2b7372,_0x2f9798=_0x48d6de*_0x2dd662,_0x20c105=this['data'];return _0x20c105[-0x22f+-0x2089+0x22b8]=(0x11a5+-0x21f8+0x1054-(_0x407e42+_0x5b26dd))*_0x6c9388,_0x20c105[0x37*0xaf+0x7f2*-0x1+-0x1da6]=(_0x1ce082+_0x2f9798)*_0x6c9388,_0x20c105[0xae3+-0x62d+-0x4b4]=(_0x350955-_0x2e3202)*_0x6c9388,_0x20c105[0x1*-0xb3f+-0x2*-0x1073+-0x1*0x15a4]=-0x25*0x52+-0x2178+0x2d52,_0x20c105[0x7*-0x427+-0x13ea*0x1+0x30ff]=(_0x1ce082-_0x2f9798)*_0x551c0d,_0x20c105[0x1*0x138b+-0x33*0x4+0x3*-0x63e]=(-0x2003+-0x1*-0x1c9+0x1e3b-(_0x2041ef+_0x5b26dd))*_0x551c0d,_0x20c105[-0x2*-0x137f+-0x25*0xa2+0x2*-0x7c7]=(_0x265816+_0x3fc29e)*_0x551c0d,_0x20c105[0x9*-0xc1+-0x2120+-0x27f0*-0x1]=0xe47+-0x2457+-0x584*-0x4,_0x20c105[0x1*0x2162+-0xecf+-0x1*0x128b]=(_0x350955+_0x2e3202)*_0x4629f6,_0x20c105[-0x2474+0x1*-0x1fe7+0x2232*0x2]=(_0x265816-_0x3fc29e)*_0x4629f6,_0x20c105[-0x119*0x1+0x1*0x262e+-0x250b]=(-0x55e+-0x1a63+-0x10f*-0x1e-(_0x2041ef+_0x407e42))*_0x4629f6,_0x20c105[-0x110a*0x1+-0x14b6+0x25cb]=-0x234a*0x1+-0x230b*-0x1+0x3f,_0x20c105[0x1*-0x1473+0x98e+-0xaf1*-0x1]=_0x2524ea['x'],_0x20c105[0x36a+0xe*0x87+-0xabf]=_0x2524ea['y'],_0x20c105[0x8eb+-0x2448+0x1b6b*0x1]=_0x2524ea['z'],_0x20c105[0x1a02+0x1d54+-0x3747]=-0x645+0x89*-0x18+0x131e,this;}['transpose'](_0x3b6fac=this){const _0x22b663=_0x3b6fac['data'],_0x2611cb=this['data'];if(_0x22b663===_0x2611cb){let _0x53ab4e;_0x53ab4e=_0x22b663[0x1f69+-0x24e+-0x1d1a],_0x2611cb[0x1756+0x4d2+-0x1c27]=_0x22b663[0x22c4+-0x12c0+-0x1000*0x1],_0x2611cb[-0xa13*-0x1+0x185*-0x6+-0xf1]=_0x53ab4e,_0x53ab4e=_0x22b663[0x1*0xd42+0x1*-0x1f35+0x1*0x11f5],_0x2611cb[-0x1c97+-0xffb+0x2c94]=_0x22b663[-0x880*0x2+-0x22e4+0x33ec],_0x2611cb[-0x210b+-0x9*0x383+-0x11*-0x3ce]=_0x53ab4e,_0x53ab4e=_0x22b663[-0x237*0x3+-0x8*0x243+0x20*0xc6],_0x2611cb[-0x1*0xf3+-0xead+0x1*0xfa3]=_0x22b663[-0x7c3*-0x1+0x1*0x3d9+-0xb90],_0x2611cb[-0x1f1c+0x1347+-0xbe1*-0x1]=_0x53ab4e,_0x53ab4e=_0x22b663[0x16*0x8b+0x4af+-0x1*0x109b],_0x2611cb[0x667+0x1395+0x19f6*-0x1]=_0x22b663[0x1c18+-0x2d9*0xd+-0x25*-0x3e],_0x2611cb[-0x110+-0x1*0x107+-0x8*-0x44]=_0x53ab4e,_0x53ab4e=_0x22b663[0x34*-0x84+-0x1f9*0xa+0x2e91],_0x2611cb[-0x46d+-0x19b5+0x1e29]=_0x22b663[-0x1*0x1837+-0xf7c+0x27c0],_0x2611cb[0x116*-0x1d+-0xaf0+0x2a7b]=_0x53ab4e,_0x53ab4e=_0x22b663[-0x19a1+-0x2672+0x2*0x200f],_0x2611cb[-0xaf8+-0xd57+0x185a]=_0x22b663[-0x1fd6+0x1067+0x131*0xd],_0x2611cb[0x1*-0x1717+0x229b*-0x1+0x39c0]=_0x53ab4e;}else _0x2611cb[0x15*0x96+0x1b94+-0x27e2]=_0x22b663[-0x27a*0xb+-0xf0d+0x2a4b],_0x2611cb[-0x2357+0x10*0x104+0x1318]=_0x22b663[0x17f9+0x14d4+-0x2cc9],_0x2611cb[-0xd*-0x2d7+0x1554+-0x3a3d]=_0x22b663[-0x2548+-0x1dbe+0x165a*0x3],_0x2611cb[0x1d3b+0x3fa+-0xe*0x25f]=_0x22b663[-0x1e85+-0x1a+0xa39*0x3],_0x2611cb[0xc64+0x426*0x1+-0x1086]=_0x22b663[0x1*-0x1947+-0x843+-0x218b*-0x1],_0x2611cb[-0x106a+0x40d+0xc62]=_0x22b663[-0x1*0xc0e+-0x3cf+-0x1*-0xfe2],_0x2611cb[-0x23f5+-0x187*-0x14+0x6b*0xd]=_0x22b663[-0x60f+0x1c6*-0x13+-0x16*-0x1cf],_0x2611cb[-0x10cd+0x1cc+0xf08]=_0x22b663[0x1ee7+-0x11*0x7e+-0x167c],_0x2611cb[-0x62+0x1ce+-0xb2*0x2]=_0x22b663[-0xe2a+-0x25*-0x49+0x39f],_0x2611cb[0x1c24+-0x1*0x15a9+-0x6*0x113]=_0x22b663[-0x23a3+0x29*0x57+0x15ba],_0x2611cb[-0x3*0x1+-0x1*-0x2468+-0x1*0x245b]=_0x22b663[0xc*-0x17f+0x66b+0xb93],_0x2611cb[0x4a*-0x24+0x5*-0x112+0x1*0xfcd]=_0x22b663[-0x6c5+0x2162*0x1+-0x1a8f],_0x2611cb[0x7f*0x7+-0x2040+0x2f*0x9d]=_0x22b663[-0x22fb+-0x5c5+-0x827*-0x5],_0x2611cb[-0xb*-0x1ed+0xa65*-0x1+-0xabd]=_0x22b663[-0x1d14+0xeb+0x1c30],_0x2611cb[0x85f*0x2+-0x2527*-0x1+0x4e5*-0xb]=_0x22b663[0x12*-0x4f+-0xe2*0x1+0x1*0x67b],_0x2611cb[-0x2624*-0x1+0x1*-0xc1f+-0x19f6]=_0x22b663[0x1*0x16df+0x5*0x26+0x25b*-0xa];return this;}['getTransla'+'tion'](_0x330f70=new I()){return _0x330f70['set'](this['data'][-0x1afa+0x1*-0x13+0x1b19],this['data'][0x147*-0x17+0x1e84+0x1*-0x116],this['data'][-0x1a85*-0x1+-0x116d+-0xb2*0xd]);}['getX'](_0x40e654=new I()){return _0x40e654['set'](this['data'][0x2049+0x171c+-0x1*0x3765],this['data'][0xce5*-0x3+-0x18dd+-0x11*-0x3bd],this['data'][0x1f93+-0x886+-0x170b]);}['getY'](_0x27c5d=new I()){return _0x27c5d['set'](this['data'][0x1424+0x817*-0x1+-0xc09],this['data'][0x1105*-0x2+0x4*0x265+0x187b],this['data'][0xa3*0x14+0x563+0x1*-0x1219]);}['getZ'](_0x17ee1f=new I()){return _0x17ee1f['set'](this['data'][-0x1630+-0x1*0xaab+-0x20e3*-0x1],this['data'][0x7a2+-0x1105*0x1+0x96c],this['data'][-0x27b*-0x1+0x213f*0x1+-0x23b0]);}['getScale'](_0x1116f1=new I()){return this['getX'](As),this['getY'](Hs),this['getZ'](Ws),_0x1116f1['set'](As['length'](),Hs['length'](),Ws['length']()),_0x1116f1;}get['scaleSign'](){return this['getX'](As),this['getY'](Hs),this['getZ'](Ws),As['cross'](As,Hs),As['dot'](Ws)<0x1f36+-0x18bd+-0x679*0x1?-(-0x4f2+-0x1837+0x1d2a):0x5*0x39+-0xed*-0x13+-0x12b3;}['setFromEul'+'erAngles'](_0x1cc467,_0x169fd8,_0x286b26){_0x1cc467*=Y['DEG_TO_RAD'],_0x169fd8*=Y['DEG_TO_RAD'],_0x286b26*=Y['DEG_TO_RAD'];const _0x5899fe=Math['sin'](-_0x1cc467),_0x42ea8c=Math['cos'](-_0x1cc467),_0x4025e7=Math['sin'](-_0x169fd8),_0x52786a=Math['cos'](-_0x169fd8),_0x3180de=Math['sin'](-_0x286b26),_0x24e60b=Math['cos'](-_0x286b26),_0x2a39fa=this['data'];return _0x2a39fa[-0x2a5*0xd+-0x1c0e+0xb*0x5ad]=_0x52786a*_0x24e60b,_0x2a39fa[0x1*-0x10ca+0x15*0x13e+-0x94b]=-_0x52786a*_0x3180de,_0x2a39fa[0x1aa6+-0x25ea+0xb46]=_0x4025e7,_0x2a39fa[0x118d+0x1*-0xd0f+-0x47b]=0xa13*0x3+0x194a+-0x3783,_0x2a39fa[-0xc25*0x1+0x607*-0x1+0x1230]=_0x42ea8c*_0x3180de+_0x24e60b*_0x5899fe*_0x4025e7,_0x2a39fa[-0x1e*0xf1+-0x81b*-0x1+0x1428]=_0x42ea8c*_0x24e60b-_0x5899fe*_0x4025e7*_0x3180de,_0x2a39fa[-0x19ac*-0x1+0x583+-0x1f29]=-_0x52786a*_0x5899fe,_0x2a39fa[0x2*-0x828+-0x16e+0x11c5]=0xdb9+-0xf43*0x2+-0xb*-0x187,_0x2a39fa[0x31f*-0xc+0x100d+0x5d*0x3b]=_0x5899fe*_0x3180de-_0x42ea8c*_0x24e60b*_0x4025e7,_0x2a39fa[-0x199d+-0x2196+-0x3b3c*-0x1]=_0x24e60b*_0x5899fe+_0x42ea8c*_0x4025e7*_0x3180de,_0x2a39fa[0x3a*-0x83+-0x45d*0x6+-0xb2e*-0x5]=_0x42ea8c*_0x52786a,_0x2a39fa[-0x23e+0x8cb*0x1+-0x682]=0x6d9*-0x1+-0x14*0xce+0x16f1,_0x2a39fa[-0xf2c+-0x1*-0x3e4+0xb54]=0x1036+0x1a00+-0x709*0x6,_0x2a39fa[0x1869+-0x12*0x1a9+0x586]=-0x118+0x2a4+-0x18c,_0x2a39fa[-0x1*-0x1aad+0x2301+-0x3da0]=-0xce*0x1+0x442*-0x7+0x1e9c,_0x2a39fa[0x1*0x1659+-0x2398+0xd4e]=0x13*-0xf8+0x1673+0x2f*-0x16,this;}['getEulerAn'+'gles'](_0x4aa367=new I()){this['getScale'](yl);const _0x1fd118=yl['x'],_0x2e185b=yl['y'],_0x5a79c7=yl['z'];if(_0x1fd118===-0x1615+0xf*0xc5+0xa8a||_0x2e185b===0x2*0x667+-0x1*-0xe95+0x9*-0x30b||_0x5a79c7===-0xbf*0x13+0x83*0x36+-0xd75)return _0x4aa367['set'](-0xd*0x1a1+-0x6a5+-0xde9*-0x2,0x129d+-0x31*0x61+0x3*-0x4,-0xf42+-0x257e+0xd30*0x4);const _0xdea1d6=this['data'],_0x51da46=Math['asin'](-_0xdea1d6[-0x269e*-0x1+-0x23ca+-0x2d2]/_0x1fd118),_0x5e713b=Math['PI']*(-0x1a*-0xc5+-0x22d0*-0x1+-0x36d2+0.5);let _0x259f01,_0x160ece;return _0x51da46<_0x5e713b?_0x51da46>-_0x5e713b?(_0x259f01=Math['atan2'](_0xdea1d6[0x1*0x42c+0x5ad*-0x5+0x183b]/_0x2e185b,_0xdea1d6[0x26eb+0x8e1*0x3+-0xe*0x4ae]/_0x5a79c7),_0x160ece=Math['atan2'](_0xdea1d6[0x141+-0x8cd*-0x3+0x1ba7*-0x1]/_0x1fd118,_0xdea1d6[0xc5f+-0x26*-0x20+0x111f*-0x1]/_0x1fd118)):(_0x160ece=-0x1*-0x74d+0x6*0x1f7+0x21f*-0x9,_0x259f01=-Math['atan2'](_0xdea1d6[0x1a6*-0x1+0xfa7*0x2+-0x1da4]/_0x2e185b,_0xdea1d6[-0x2214+-0x1b1a+0x3d33*0x1]/_0x2e185b)):(_0x160ece=-0x1*-0x16ff+0x4dc+0x1bdb*-0x1,_0x259f01=Math['atan2'](_0xdea1d6[-0x4d9+0x112*-0x1+0x5ef]/_0x2e185b,_0xdea1d6[-0xa36*0x2+0x180e+-0x39d]/_0x2e185b)),_0x4aa367['set'](_0x259f01,_0x51da46,_0x160ece)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(Ur,'IDENTITY',Object['freeze'](new Ur())),h(Ur,'ZERO',Object['freeze'](new Ur()['set']([0x1f08*-0x1+0x242+-0x7f*-0x3a,0xa9*-0x7+0x9de+-0x53f,0x1a84+0xa*0x11e+0x4*-0x96c,0xbb6+0xdb2*0x2+-0x46*0x8f,0x1*0x1f04+-0x481*-0x1+0x513*-0x7,-0x1bcd+0x1144+0x5d*0x1d,0x3d*-0x84+-0x1d4f+0x3cc3,0xc75+-0x11eb*0x2+-0xf*-0x18f,-0x2533*0x1+-0x1b89+-0xaca*-0x6,0x65*0x11+-0x195d+-0x18*-0xc7,0x8*0x4e0+-0x1a*0x158+0x1a*-0x28,0x1499*-0x1+-0x173+0x44*0x53,-0x4*0x8c1+-0x1*-0x92c+0x19d8,0x93b*-0x1+0x472+0xaf*0x7,0xf*0x144+-0x5*0x30e+-0x3b6,-0x27*0xa1+-0x225d+0x3ae4])));let te=Ur;const sn=class sn{constructor(_0x3b4118=0x30*0xa+-0x8ad+0x6cd*0x1,_0x48a8a1=-0xa*0x27b+0x29*-0x53+0x2619,_0x358df4=-0xe21*-0x1+-0x2280+0x145f,_0x39dac1=-0x1f*-0x92+0x1a70*0x1+-0x1eb*0x17){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x3b4118['length']===0x11e4+0x1338+-0x2518?(this['x']=_0x3b4118[-0x9a*0x16+-0x2060+0x2d9c],this['y']=_0x3b4118[0x1*0xa51+-0x1674+-0x7*-0x1bc],this['z']=_0x3b4118[-0x120a*0x2+-0x1*0x6f5+0x2b0b],this['w']=_0x3b4118[-0x6*0x419+-0x1*-0x52c+-0x136d*-0x1]):(this['x']=_0x3b4118,this['y']=_0x48a8a1,this['z']=_0x358df4,this['w']=_0x39dac1);}['clone'](){const _0x4862f0=this['constructo'+'r'];return new _0x4862f0(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x4d3c4e=this){return this['x']=_0x4d3c4e['x']*-(-0x2585+0x839+0x1d4d),this['y']=_0x4d3c4e['y']*-(0x1660+-0x1*-0xe96+-0x24f5),this['z']=_0x4d3c4e['z']*-(0x47*0x43+-0x22e3+-0x5*-0x343),this['w']=_0x4d3c4e['w'],this;}['copy'](_0x210c56){return this['x']=_0x210c56['x'],this['y']=_0x210c56['y'],this['z']=_0x210c56['z'],this['w']=_0x210c56['w'],this;}['dot'](_0x1c68ba){return this['x']*_0x1c68ba['x']+this['y']*_0x1c68ba['y']+this['z']*_0x1c68ba['z']+this['w']*_0x1c68ba['w'];}['equals'](_0xce599e){return this['x']===_0xce599e['x']&&this['y']===_0xce599e['y']&&this['z']===_0xce599e['z']&&this['w']===_0xce599e['w'];}['equalsAppr'+'ox'](_0x5e75cb,_0x4b575d=0x3d*0x17+0x97*-0x13+-0x5ba*-0x1+0.000001){return Math['abs'](this['x']-_0x5e75cb['x'])<_0x4b575d&&Math['abs'](this['y']-_0x5e75cb['y'])<_0x4b575d&&Math['abs'](this['z']-_0x5e75cb['z'])<_0x4b575d&&Math['abs'](this['w']-_0x5e75cb['w'])<_0x4b575d;}['getAxisAng'+'le'](_0x456dd6){let _0x273c1a=Math['acos'](this['w'])*(-0xd1+-0x1*0xd3a+-0xe0d*-0x1);const _0x4aff8b=Math['sin'](_0x273c1a/(-0x15bb*-0x1+-0x2642+-0x1*-0x1089));return _0x4aff8b!==0x587*0x7+-0x45*0x5+0x2558*-0x1?(_0x456dd6['x']=this['x']/_0x4aff8b,_0x456dd6['y']=this['y']/_0x4aff8b,_0x456dd6['z']=this['z']/_0x4aff8b,(_0x456dd6['x']<0x1*0x243a+0x14bd*0x1+-0x38f7*0x1||_0x456dd6['y']<-0xc94*-0x1+0x20*0xb5+-0x2334||_0x456dd6['z']<0x8a0+0x2e*-0x18+-0x450)&&(_0x456dd6['x']*=-(0x36d+0x990+-0xcfc),_0x456dd6['y']*=-(0x877+0x2246+-0x2abc),_0x456dd6['z']*=-(0xa98*-0x1+-0x3*0x35+-0x1*-0xb38),_0x273c1a*=-(-0xd*0x20b+-0x1a6f*-0x1+-0x21*-0x1))):(_0x456dd6['x']=0xa48+0xb8b+0x126*-0x13,_0x456dd6['y']=-0xc40+0x51*0x61+-0x1271,_0x456dd6['z']=-0x959+0x1634+0x1*-0xcdb),_0x273c1a*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x31e3ef=new I()){let _0xeb6373,_0x45db10,_0xc10660;const _0x5abb9e=this['x'],_0x5d83d3=this['y'],_0x17f990=this['z'],_0x4163c3=this['w'],_0x258996=(0x240f+-0x98a+-0x1a83)*(_0x4163c3*_0x5d83d3-_0x5abb9e*_0x17f990);return _0x258996<=-(0xbbe+0xae5+-0x16a3+0.99999)?(_0xeb6373=(0x1610+0x3f*0xc+-0x1902)*Math['atan2'](_0x5abb9e,_0x4163c3),_0x45db10=-Math['PI']/(0x266+0x57d+-0x7e1),_0xc10660=0x71b+-0x5*-0xc3+0xb*-0xfe):_0x258996>=-0x7*0x22c+0xd*0xbc+0x5a8+0.99999?(_0xeb6373=(-0x2fc*-0x1+0xb73*0x1+-0x3*0x4cf)*Math['atan2'](_0x5abb9e,_0x4163c3),_0x45db10=Math['PI']/(-0x5ec+0xc7c+-0x68e),_0xc10660=-0xd01*-0x3+0x126f+-0x3972):(_0xeb6373=Math['atan2']((-0x1c51+0x2655+-0xa02)*(_0x4163c3*_0x5abb9e+_0x5d83d3*_0x17f990),0x2*0x66a+0xc0*0xb+-0x1513*0x1-(-0x709*-0x1+0xe2*0x1+-0x3*0x2a3)*(_0x5abb9e*_0x5abb9e+_0x5d83d3*_0x5d83d3)),_0x45db10=Math['asin'](_0x258996),_0xc10660=Math['atan2']((0x12ae+0x97*-0x1+0x1*-0x1215)*(_0x4163c3*_0x17f990+_0x5abb9e*_0x5d83d3),-0x44+0x384*-0x4+-0x1*-0xe55-(-0x551*0x3+-0xd73*0x2+0x2adb)*(_0x5d83d3*_0x5d83d3+_0x17f990*_0x17f990))),_0x31e3ef['set'](_0xeb6373,_0x45db10,_0xc10660)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x26eac3=this){return this['conjugate'](_0x26eac3)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x404e29,_0x4e3d97,_0xa76506){const _0x1acab0=(-0x1*-0x1b13+-0xbdc+-0x79b*0x2-_0xa76506)*(_0x404e29['dot'](_0x4e3d97)<0x161*-0xd+0x23da+-0x161*0xd?-(-0x319+-0x16a9+0x1*0x19c3):0xc79+0x89c+-0x1514);return this['x']=_0x404e29['x']*_0x1acab0+_0x4e3d97['x']*_0xa76506,this['y']=_0x404e29['y']*_0x1acab0+_0x4e3d97['y']*_0xa76506,this['z']=_0x404e29['z']*_0x1acab0+_0x4e3d97['z']*_0xa76506,this['w']=_0x404e29['w']*_0x1acab0+_0x4e3d97['w']*_0xa76506,this['normalize']();}['mul'](_0x140761){const _0x3220fb=this['x'],_0xe716ea=this['y'],_0x277952=this['z'],_0x360bca=this['w'],_0x1f9acc=_0x140761['x'],_0x20027a=_0x140761['y'],_0x495454=_0x140761['z'],_0x2523e4=_0x140761['w'];return this['x']=_0x360bca*_0x1f9acc+_0x3220fb*_0x2523e4+_0xe716ea*_0x495454-_0x277952*_0x20027a,this['y']=_0x360bca*_0x20027a+_0xe716ea*_0x2523e4+_0x277952*_0x1f9acc-_0x3220fb*_0x495454,this['z']=_0x360bca*_0x495454+_0x277952*_0x2523e4+_0x3220fb*_0x20027a-_0xe716ea*_0x1f9acc,this['w']=_0x360bca*_0x2523e4-_0x3220fb*_0x1f9acc-_0xe716ea*_0x20027a-_0x277952*_0x495454,this;}['mulScalar'](_0x25ee99,_0x37cf45=this){return this['x']=_0x37cf45['x']*_0x25ee99,this['y']=_0x37cf45['y']*_0x25ee99,this['z']=_0x37cf45['z']*_0x25ee99,this['w']=_0x37cf45['w']*_0x25ee99,this;}['mul2'](_0x536373,_0x20cc54){const _0x9e2ea5=_0x536373['x'],_0x193d55=_0x536373['y'],_0x1029ce=_0x536373['z'],_0x4a3d3f=_0x536373['w'],_0xc9f2e=_0x20cc54['x'],_0xb8a833=_0x20cc54['y'],_0x188986=_0x20cc54['z'],_0x11f4a1=_0x20cc54['w'];return this['x']=_0x4a3d3f*_0xc9f2e+_0x9e2ea5*_0x11f4a1+_0x193d55*_0x188986-_0x1029ce*_0xb8a833,this['y']=_0x4a3d3f*_0xb8a833+_0x193d55*_0x11f4a1+_0x1029ce*_0xc9f2e-_0x9e2ea5*_0x188986,this['z']=_0x4a3d3f*_0x188986+_0x1029ce*_0x11f4a1+_0x9e2ea5*_0xb8a833-_0x193d55*_0xc9f2e,this['w']=_0x4a3d3f*_0x11f4a1-_0x9e2ea5*_0xc9f2e-_0x193d55*_0xb8a833-_0x1029ce*_0x188986,this;}['normalize'](_0x4f9b74=this){let _0x3af7fb=_0x4f9b74['length']();return _0x3af7fb===-0x89f*0x1+-0x2324+0x2bc3?(this['x']=this['y']=this['z']=0x2*-0xb8a+0x215c+-0x178*0x7,this['w']=0x1fa8+-0x3*0x86+-0x1e15):(_0x3af7fb=(0x9eb*0x3+-0x26c7+0x907)/_0x3af7fb,this['x']=_0x4f9b74['x']*_0x3af7fb,this['y']=_0x4f9b74['y']*_0x3af7fb,this['z']=_0x4f9b74['z']*_0x3af7fb,this['w']=_0x4f9b74['w']*_0x3af7fb),this;}['set'](_0x8f62ef,_0x37ec3b,_0xc2be6d,_0x247452){return this['x']=_0x8f62ef,this['y']=_0x37ec3b,this['z']=_0xc2be6d,this['w']=_0x247452,this;}['setFromAxi'+'sAngle'](_0x37ca3c,_0x27dec3){_0x27dec3*=(-0x1*-0x1ff4+0x1885*0x1+-0x3879+0.5)*Y['DEG_TO_RAD'];const _0x2d18ae=Math['sin'](_0x27dec3),_0x50c151=Math['cos'](_0x27dec3);return this['x']=_0x2d18ae*_0x37ca3c['x'],this['y']=_0x2d18ae*_0x37ca3c['y'],this['z']=_0x2d18ae*_0x37ca3c['z'],this['w']=_0x50c151,this;}['setFromEul'+'erAngles'](_0x359969,_0x1d44e1,_0x33daa9){if(_0x359969 instanceof I){const _0x5671d6=_0x359969;_0x359969=_0x5671d6['x'],_0x1d44e1=_0x5671d6['y'],_0x33daa9=_0x5671d6['z'];}const _0x78a681=(-0xe3f+0x11bb+-0x37c+0.5)*Y['DEG_TO_RAD'];_0x359969*=_0x78a681,_0x1d44e1*=_0x78a681,_0x33daa9*=_0x78a681;const _0x303e52=Math['sin'](_0x359969),_0x373465=Math['cos'](_0x359969),_0x384637=Math['sin'](_0x1d44e1),_0x3140f7=Math['cos'](_0x1d44e1),_0x4989ed=Math['sin'](_0x33daa9),_0x87cd82=Math['cos'](_0x33daa9);return this['x']=_0x303e52*_0x3140f7*_0x87cd82-_0x373465*_0x384637*_0x4989ed,this['y']=_0x373465*_0x384637*_0x87cd82+_0x303e52*_0x3140f7*_0x4989ed,this['z']=_0x373465*_0x3140f7*_0x4989ed-_0x303e52*_0x384637*_0x87cd82,this['w']=_0x373465*_0x3140f7*_0x87cd82+_0x303e52*_0x384637*_0x4989ed,this;}['setFromMat'+'4'](_0x364dad){const _0x28ed78=_0x364dad['data'];let _0x4a02a9=_0x28ed78[0xe79+-0x1*-0x1285+-0x20fe],_0x45b6ba=_0x28ed78[0x1a4b+-0x1*-0x23f1+0x59*-0xb3],_0x48b8de=_0x28ed78[-0x11af+-0x1cce+0x2e7f],_0x583e32=_0x28ed78[0x1fb2*-0x1+0x2503+0x1*-0x54d],_0xaa4fe2=_0x28ed78[0x168f+-0x1ea+0x14*-0x108],_0x460f1e=_0x28ed78[0x560+0xe50+-0x2*0x9d5],_0x4c72f3=_0x28ed78[-0x2*-0xe87+-0x6d*-0x37+-0x3471],_0x37a644=_0x28ed78[0xfb*-0x13+-0x6fa*-0x4+-0x93e],_0x49fe13=_0x28ed78[-0x1e88+-0x15b*-0x8+0x1f9*0xa],_0x3832b6;return _0x3832b6=_0x4a02a9*_0x4a02a9+_0x45b6ba*_0x45b6ba+_0x48b8de*_0x48b8de,_0x3832b6===0x1240+-0x47c+0x2*-0x6e2?this['set'](0x53*0x47+0x217*0xb+0xf56*-0x3,-0x219a+-0x3ba+0x2554,-0x21b6+0x5ff+0x1bb7,0x1f5c+0x1307*-0x2+0x6b3):(_0x3832b6=(-0x8*-0x29d+0x26b3+-0x3b9a)/Math['sqrt'](_0x3832b6),_0x4a02a9*=_0x3832b6,_0x45b6ba*=_0x3832b6,_0x48b8de*=_0x3832b6,_0x3832b6=_0x583e32*_0x583e32+_0xaa4fe2*_0xaa4fe2+_0x460f1e*_0x460f1e,_0x3832b6===0x1691+-0x1*-0x1972+0x1001*-0x3?this['set'](0x1c05+0x615+-0xc2*0x2d,0x15f5+0x16d9+-0x2cce,-0x71f+-0x1b*0xfe+0x21e9,-0x1*-0x11dd+-0x1875*0x1+0x699):(_0x3832b6=(0x2*0xfc2+-0x1*-0x1f81+-0xda*0x4a)/Math['sqrt'](_0x3832b6),_0x583e32*=_0x3832b6,_0xaa4fe2*=_0x3832b6,_0x460f1e*=_0x3832b6,_0x3832b6=_0x4c72f3*_0x4c72f3+_0x37a644*_0x37a644+_0x49fe13*_0x49fe13,_0x3832b6===-0x15*-0x14c+0x98f+-0x1*0x24cb?this['set'](-0xe27+-0x22bd+-0x7*-0x6fc,0x94a+-0xc8e+0x2c*0x13,-0x1753*-0x1+-0xe07+-0x94c,0x6b*-0x31+-0x2698+0x3b14):(_0x3832b6=(0x2d*-0xa2+-0x1*0x1cd3+0x5a*0xa3)/Math['sqrt'](_0x3832b6),_0x4c72f3*=_0x3832b6,_0x37a644*=_0x3832b6,_0x49fe13*=_0x3832b6,_0x49fe13<-0x9*0x2af+0x7f7+0x1030?_0x4a02a9>_0xaa4fe2?this['set'](0xca7+0xb1*-0x25+0xcef*0x1+_0x4a02a9-_0xaa4fe2-_0x49fe13,_0x45b6ba+_0x583e32,_0x4c72f3+_0x48b8de,_0x460f1e-_0x37a644):this['set'](_0x45b6ba+_0x583e32,-0x1217+0x1903+-0x6eb-_0x4a02a9+_0xaa4fe2-_0x49fe13,_0x460f1e+_0x37a644,_0x4c72f3-_0x48b8de):_0x4a02a9<-_0xaa4fe2?this['set'](_0x4c72f3+_0x48b8de,_0x460f1e+_0x37a644,-0xd51+-0x192d+0x267f*0x1-_0x4a02a9-_0xaa4fe2+_0x49fe13,_0x45b6ba-_0x583e32):this['set'](_0x460f1e-_0x37a644,_0x4c72f3-_0x48b8de,_0x45b6ba-_0x583e32,0x441+-0x1*0xe61+-0x1*-0xa21+_0x4a02a9+_0xaa4fe2+_0x49fe13),this['mulScalar']((0x26cc+-0x3eb+-0x3*0xba0)/this['length']()))));}['setFromDir'+'ections'](_0x1e9ded,_0x949f0a){const _0xa1e5d2=-0x1a*0xf6+-0x1bba+0x5*0xa8b+_0x1e9ded['dot'](_0x949f0a);return _0xa1e5d2<Number['EPSILON']?Math['abs'](_0x1e9ded['x'])>Math['abs'](_0x1e9ded['y'])?(this['x']=-_0x1e9ded['z'],this['y']=0x245+-0x1c30+0x52f*0x5,this['z']=_0x1e9ded['x'],this['w']=0x1d*-0x95+0x22d8+-0x5fd*0x3):(this['x']=-0x1d2e+-0x1*0x1b2d+0x385b,this['y']=-_0x1e9ded['z'],this['z']=_0x1e9ded['y'],this['w']=-0x199*-0x9+-0x1*-0x2d9+-0x1e*0x93):(this['x']=_0x1e9ded['y']*_0x949f0a['z']-_0x1e9ded['z']*_0x949f0a['y'],this['y']=_0x1e9ded['z']*_0x949f0a['x']-_0x1e9ded['x']*_0x949f0a['z'],this['z']=_0x1e9ded['x']*_0x949f0a['y']-_0x1e9ded['y']*_0x949f0a['x'],this['w']=_0xa1e5d2),this['normalize']();}['slerp'](_0x414d4a,_0x39e801,_0x1f1268){const _0x3bdda6=_0x414d4a['x'],_0x540956=_0x414d4a['y'],_0x55a644=_0x414d4a['z'],_0x209f9=_0x414d4a['w'];let _0x3cca09=_0x39e801['x'],_0x2e9190=_0x39e801['y'],_0x1fbf4d=_0x39e801['z'],_0x37c7d2=_0x39e801['w'],_0x1d7f1d=_0x209f9*_0x37c7d2+_0x3bdda6*_0x3cca09+_0x540956*_0x2e9190+_0x55a644*_0x1fbf4d;if(_0x1d7f1d<0xacd+0x2155+0x3*-0xeb6&&(_0x37c7d2=-_0x37c7d2,_0x3cca09=-_0x3cca09,_0x2e9190=-_0x2e9190,_0x1fbf4d=-_0x1fbf4d,_0x1d7f1d=-_0x1d7f1d),Math['abs'](_0x1d7f1d)>=-0x1ae4+0x1*0x2446+-0x1*0x961)return this['w']=_0x209f9,this['x']=_0x3bdda6,this['y']=_0x540956,this['z']=_0x55a644,this;const _0x51d8a8=Math['acos'](_0x1d7f1d),_0x365530=Math['sqrt'](0x1*0x15ed+-0x24e+-0x139e-_0x1d7f1d*_0x1d7f1d);if(Math['abs'](_0x365530)<0xd2+-0x7bb+0x1*0x6e9+0.001)return this['w']=_0x209f9*(0x1a*0x1f+0x7bf+-0xae5*0x1+0.5)+_0x37c7d2*(-0xd7*-0x13+0x2484+-0x3479+0.5),this['x']=_0x3bdda6*(-0x1*-0x3d+0x23b6+-0x23f3+0.5)+_0x3cca09*(-0x120c+-0x127e+0x248a+0.5),this['y']=_0x540956*(0x35*0x33+-0x2b9+-0x11*0x76+0.5)+_0x2e9190*(-0x1c21+0x1*0x1c27+0x3*-0x2+0.5),this['z']=_0x55a644*(0x1*0x1ed8+-0x2215+0x33d+0.5)+_0x1fbf4d*(-0x207*0x13+0x908*0x2+-0x1475*-0x1+0.5),this;const _0x253e23=Math['sin']((-0x2*-0xda1+0x7*0x509+-0x3e80-_0x1f1268)*_0x51d8a8)/_0x365530,_0x3dd155=Math['sin'](_0x1f1268*_0x51d8a8)/_0x365530;return this['w']=_0x209f9*_0x253e23+_0x37c7d2*_0x3dd155,this['x']=_0x3bdda6*_0x253e23+_0x3cca09*_0x3dd155,this['y']=_0x540956*_0x253e23+_0x2e9190*_0x3dd155,this['z']=_0x55a644*_0x253e23+_0x1fbf4d*_0x3dd155,this;}['transformV'+'ector'](_0x3570ea,_0x3b6634=new I()){const _0xbbbe58=_0x3570ea['x'],_0x29b741=_0x3570ea['y'],_0x5649d9=_0x3570ea['z'],_0x216ec7=this['x'],_0x2e8ba6=this['y'],_0x591046=this['z'],_0x2952b1=this['w'],_0x49294d=_0x2952b1*_0xbbbe58+_0x2e8ba6*_0x5649d9-_0x591046*_0x29b741,_0x43c397=_0x2952b1*_0x29b741+_0x591046*_0xbbbe58-_0x216ec7*_0x5649d9,_0x404ceb=_0x2952b1*_0x5649d9+_0x216ec7*_0x29b741-_0x2e8ba6*_0xbbbe58,_0x1934bb=-_0x216ec7*_0xbbbe58-_0x2e8ba6*_0x29b741-_0x591046*_0x5649d9;return _0x3b6634['x']=_0x49294d*_0x2952b1+_0x1934bb*-_0x216ec7+_0x43c397*-_0x591046-_0x404ceb*-_0x2e8ba6,_0x3b6634['y']=_0x43c397*_0x2952b1+_0x1934bb*-_0x2e8ba6+_0x404ceb*-_0x216ec7-_0x49294d*-_0x591046,_0x3b6634['z']=_0x404ceb*_0x2952b1+_0x1934bb*-_0x591046+_0x49294d*-_0x2e8ba6-_0x43c397*-_0x216ec7,_0x3b6634;}['fromArray'](_0x25f0cc,_0x11537e=0xe4a*0x1+-0xd6e+-0xdc){return this['x']=_0x25f0cc[_0x11537e]??this['x'],this['y']=_0x25f0cc[_0x11537e+(-0x15f1+0x451*-0x1+0x1a43)]??this['y'],this['z']=_0x25f0cc[_0x11537e+(0x5d4+0x119*-0x1d+0x1a03)]??this['z'],this['w']=_0x25f0cc[_0x11537e+(0x3d3*-0xa+0x1c61+0x278*0x4)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0xfd0b0b=[],_0x34b675=0x1*-0x149f+-0x216f+0x360e){return _0xfd0b0b[_0x34b675]=this['x'],_0xfd0b0b[_0x34b675+(-0x40e*0x7+0x3ea+-0x1879*-0x1)]=this['y'],_0xfd0b0b[_0x34b675+(0xb9b+-0xa*0x242+0xafb)]=this['z'],_0xfd0b0b[_0x34b675+(0x22*-0xac+0x671+0x106a)]=this['w'],_0xfd0b0b;}};h(sn,'IDENTITY',Object['freeze'](new sn(-0x276+-0x3*-0x425+-0x9f9,-0x7d*-0x16+-0x1*0x87b+-0x243,-0xb1b+0x1120+-0x605,0x105e+-0x1acc+-0x1*-0xa6f))),h(sn,'ZERO',Object['freeze'](new sn(-0x1*-0x205f+-0x1*-0x2459+-0x44b8,-0x1*-0x22c9+-0x1e9f+-0xd*0x52,-0xf3f+-0x11d*0x5+0x14d0,-0xd6*0xc+0x433+-0x1*-0x5d5)));let le=sn;const pa=new I(),_a=new I(),Jm=new I(),ep=new I(),C0=new I();class Ie{constructor(_0x16c954,_0x3bff18){h(this,'center',new I()),h(this,'halfExtent'+'s',new I(-0x21*0x2b+-0x47a+-0x2d*-0x39+0.5,-0x245*0xb+-0x2218*-0x1+-0x13*0x7b+0.5,0x1af*0x9+0x1d1*0x3+-0x149a+0.5)),h(this,'_min',new I()),h(this,'_max',new I()),(_0x16c954&&this['center']['copy'](_0x16c954),_0x3bff18&&this['halfExtent'+'s']['copy'](_0x3bff18));}['add'](_0x3f34e4){const _0x20fd32=this['center'],_0x299041=_0x20fd32['x'],_0x405f51=_0x20fd32['y'],_0x3a293c=_0x20fd32['z'],_0x319044=this['halfExtent'+'s'],_0x1f5b86=_0x319044['x'],_0x5cf153=_0x319044['y'],_0x30bccc=_0x319044['z'];let _0x1f8c47=_0x299041-_0x1f5b86,_0x9de656=_0x299041+_0x1f5b86,_0x1df503=_0x405f51-_0x5cf153,_0x39148b=_0x405f51+_0x5cf153,_0x2f9ed2=_0x3a293c-_0x30bccc,_0x11e1e4=_0x3a293c+_0x30bccc;const _0x320174=_0x3f34e4['center'],_0x397660=_0x320174['x'],_0x193f4=_0x320174['y'],_0x9ce7a2=_0x320174['z'],_0x47fccc=_0x3f34e4['halfExtent'+'s'],_0x412322=_0x47fccc['x'],_0x1393d1=_0x47fccc['y'],_0x544eed=_0x47fccc['z'],_0x2cbf77=_0x397660-_0x412322,_0x453569=_0x397660+_0x412322,_0x448941=_0x193f4-_0x1393d1,_0x5b5572=_0x193f4+_0x1393d1,_0x552f17=_0x9ce7a2-_0x544eed,_0x483f4d=_0x9ce7a2+_0x544eed;_0x2cbf77<_0x1f8c47&&(_0x1f8c47=_0x2cbf77),_0x453569>_0x9de656&&(_0x9de656=_0x453569),_0x448941<_0x1df503&&(_0x1df503=_0x448941),_0x5b5572>_0x39148b&&(_0x39148b=_0x5b5572),_0x552f17<_0x2f9ed2&&(_0x2f9ed2=_0x552f17),_0x483f4d>_0x11e1e4&&(_0x11e1e4=_0x483f4d),_0x20fd32['x']=(_0x1f8c47+_0x9de656)*(0x45*0x3b+0x1c4+-0x11ab+0.5),_0x20fd32['y']=(_0x1df503+_0x39148b)*(0x30b+-0x1ae0+0x17d5*0x1+0.5),_0x20fd32['z']=(_0x2f9ed2+_0x11e1e4)*(-0xc33*0x1+-0x1*-0x19ab+-0xd78+0.5),_0x319044['x']=(_0x9de656-_0x1f8c47)*(0x1169+-0x15cc+0x463*0x1+0.5),_0x319044['y']=(_0x39148b-_0x1df503)*(-0x14be+0x2dc+0x11e2+0.5),_0x319044['z']=(_0x11e1e4-_0x2f9ed2)*(0xa*-0x2dd+0x260d+-0x96b+0.5);}['copy'](_0x1f6dbb){this['center']['copy'](_0x1f6dbb['center']),this['halfExtent'+'s']['copy'](_0x1f6dbb['halfExtent'+'s']);}['clone'](){return new Ie(this['center'],this['halfExtent'+'s']);}['intersects'](_0x2d3df0){const _0x50d91a=this['getMax'](),_0x4a616f=this['getMin'](),_0x1eb600=_0x2d3df0['getMax'](),_0x145448=_0x2d3df0['getMin']();return _0x4a616f['x']<=_0x1eb600['x']&&_0x50d91a['x']>=_0x145448['x']&&_0x4a616f['y']<=_0x1eb600['y']&&_0x50d91a['y']>=_0x145448['y']&&_0x4a616f['z']<=_0x1eb600['z']&&_0x50d91a['z']>=_0x145448['z'];}['_intersect'+'sRay'](_0x4b3c1a,_0x31b552){const _0x3db26e=pa['copy'](this['getMin']())['sub'](_0x4b3c1a['origin']),_0x2c18fa=_a['copy'](this['getMax']())['sub'](_0x4b3c1a['origin']),_0x211c2d=_0x4b3c1a['direction'];_0x211c2d['x']===0x1f6b*0x1+-0x35*0x4+-0x1e97*0x1?(_0x3db26e['x']=_0x3db26e['x']<0x592+0x576*-0x7+0x17c*0x16?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x2c18fa['x']=_0x2c18fa['x']<-0x1*-0x13a2+-0x7f*-0x22+0x4*-0x920?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3db26e['x']/=_0x211c2d['x'],_0x2c18fa['x']/=_0x211c2d['x']),_0x211c2d['y']===-0xa28+-0x860+0x1288?(_0x3db26e['y']=_0x3db26e['y']<0x4*-0x66e+-0x29*0xd3+0x3b83*0x1?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x2c18fa['y']=_0x2c18fa['y']<0x1*0x438+-0x305+-0x133?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3db26e['y']/=_0x211c2d['y'],_0x2c18fa['y']/=_0x211c2d['y']),_0x211c2d['z']===0x1b97+0xa26*-0x3+0x2db?(_0x3db26e['z']=_0x3db26e['z']<-0x19*-0x25+0x31*0x39+-0xe86?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x2c18fa['z']=_0x2c18fa['z']<-0x2316+0x1fdb+-0x33b*-0x1?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x3db26e['z']/=_0x211c2d['z'],_0x2c18fa['z']/=_0x211c2d['z']);const _0x59713b=Jm['set'](Math['min'](_0x3db26e['x'],_0x2c18fa['x']),Math['min'](_0x3db26e['y'],_0x2c18fa['y']),Math['min'](_0x3db26e['z'],_0x2c18fa['z'])),_0x18a1f6=ep['set'](Math['max'](_0x3db26e['x'],_0x2c18fa['x']),Math['max'](_0x3db26e['y'],_0x2c18fa['y']),Math['max'](_0x3db26e['z'],_0x2c18fa['z'])),_0x46f7bf=Math['min'](Math['min'](_0x18a1f6['x'],_0x18a1f6['y']),_0x18a1f6['z']),_0x16ae5b=Math['max'](Math['max'](_0x59713b['x'],_0x59713b['y']),_0x59713b['z']),_0x141020=_0x46f7bf>=_0x16ae5b&&_0x16ae5b>=-0xf4e+-0x17d7+0x2725;return _0x141020&&_0x31b552['copy'](_0x4b3c1a['direction'])['mulScalar'](_0x16ae5b)['add'](_0x4b3c1a['origin']),_0x141020;}['_fastInter'+'sectsRay'](_0x354968){const _0x4c7556=pa,_0x31fec9=_a,_0x311fe2=Jm,_0x6b4069=ep,_0x45bdcd=C0,_0x4ebe9a=_0x354968['direction'];return _0x4c7556['sub2'](_0x354968['origin'],this['center']),_0x6b4069['set'](Math['abs'](_0x4c7556['x']),Math['abs'](_0x4c7556['y']),Math['abs'](_0x4c7556['z'])),_0x311fe2['mul2'](_0x4c7556,_0x4ebe9a),!(_0x6b4069['x']>this['halfExtent'+'s']['x']&&_0x311fe2['x']>=0x104e*-0x2+0x1e9d+0x1ff||_0x6b4069['y']>this['halfExtent'+'s']['y']&&_0x311fe2['y']>=-0xf*-0x65+-0x1e93*-0x1+-0xc2a*0x3||_0x6b4069['z']>this['halfExtent'+'s']['z']&&_0x311fe2['z']>=-0x4d*0x24+0x6e8+0x2*0x1f6||(_0x45bdcd['set'](Math['abs'](_0x4ebe9a['x']),Math['abs'](_0x4ebe9a['y']),Math['abs'](_0x4ebe9a['z'])),_0x31fec9['cross'](_0x4ebe9a,_0x4c7556),_0x31fec9['set'](Math['abs'](_0x31fec9['x']),Math['abs'](_0x31fec9['y']),Math['abs'](_0x31fec9['z'])),_0x31fec9['x']>this['halfExtent'+'s']['y']*_0x45bdcd['z']+this['halfExtent'+'s']['z']*_0x45bdcd['y'])||_0x31fec9['y']>this['halfExtent'+'s']['x']*_0x45bdcd['z']+this['halfExtent'+'s']['z']*_0x45bdcd['x']||_0x31fec9['z']>this['halfExtent'+'s']['x']*_0x45bdcd['y']+this['halfExtent'+'s']['y']*_0x45bdcd['x']);}['intersects'+'Ray'](_0x428b05,_0x1236df){return _0x1236df?this['_intersect'+'sRay'](_0x428b05,_0x1236df):this['_fastInter'+'sectsRay'](_0x428b05);}['setMinMax'](_0x49457d,_0x6b622b){this['center']['add2'](_0x6b622b,_0x49457d)['mulScalar'](0x102c+0xef3+-0x101*0x1f+0.5),this['halfExtent'+'s']['sub2'](_0x6b622b,_0x49457d)['mulScalar'](-0x667+-0x64d*0x4+0x1*0x1f9b+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x53dcba){const _0x4847d8=this['getMin'](),_0x3c5c2c=this['getMax']();return!(_0x53dcba['x']<_0x4847d8['x']||_0x53dcba['x']>_0x3c5c2c['x']||_0x53dcba['y']<_0x4847d8['y']||_0x53dcba['y']>_0x3c5c2c['y']||_0x53dcba['z']<_0x4847d8['z']||_0x53dcba['z']>_0x3c5c2c['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x1784af,_0xfc2c4e,_0xed3902=!(-0x8fb+-0x2c3+0xbbf)){const _0x217009=_0x1784af['center'],_0x2c5947=_0x1784af['halfExtent'+'s'],_0x44618e=_0xfc2c4e['data'];let _0xca6100=_0x44618e[-0x368+0x12af*0x1+-0xf47],_0x5911a7=_0x44618e[-0x210a+0xc*0x117+-0x2*-0x9fd],_0x1cb09c=_0x44618e[-0x78b*-0x4+0xc11*0x2+-0x2*0x1b23],_0x1fbb1e=_0x44618e[0x1*0x116f+0x896+-0x1a04],_0x2c7838=_0x44618e[0x10*-0xb2+0xb*-0x9+0xb88],_0x79393d=_0x44618e[0x13*-0x13a+0x6de*-0x2+0x2513],_0x29be3f=_0x44618e[0x1bf8+-0xda0+-0xe56],_0x50f620=_0x44618e[-0xcd*-0x1+-0x996*-0x1+-0xa5d],_0x43c7d4=_0x44618e[0x1c42*0x1+-0x386+-0x18b2];if(_0xed3902){let _0xbaa3d1=_0xca6100*_0xca6100+_0x5911a7*_0x5911a7+_0x1cb09c*_0x1cb09c;if(_0xbaa3d1>0xaa*0x1d+0x2*0x1223+-0x4*0xde2){const _0x5eb695=(0x14*0xfb+-0x1131+0x2*-0x135)/Math['sqrt'](_0xbaa3d1);_0xca6100*=_0x5eb695,_0x5911a7*=_0x5eb695,_0x1cb09c*=_0x5eb695;}if(_0xbaa3d1=_0x1fbb1e*_0x1fbb1e+_0x2c7838*_0x2c7838+_0x79393d*_0x79393d,_0xbaa3d1>-0x5f9*-0x2+0x24ae+-0x4*0xc28){const _0x2d3afd=(0x4b8+-0x12f3+-0x1*-0xe3c)/Math['sqrt'](_0xbaa3d1);_0x1fbb1e*=_0x2d3afd,_0x2c7838*=_0x2d3afd,_0x79393d*=_0x2d3afd;}if(_0xbaa3d1=_0x29be3f*_0x29be3f+_0x50f620*_0x50f620+_0x43c7d4*_0x43c7d4,_0xbaa3d1>-0x1*0x1458+-0x1130+0x2588){const _0x377a21=(0xa53+-0x24e9+-0x1a97*-0x1)/Math['sqrt'](_0xbaa3d1);_0x29be3f*=_0x377a21,_0x50f620*=_0x377a21,_0x43c7d4*=_0x377a21;}}this['center']['set'](_0x44618e[-0x218a+0x23b4+0x2*-0x10f]+_0xca6100*_0x217009['x']+_0x5911a7*_0x217009['y']+_0x1cb09c*_0x217009['z'],_0x44618e[0x752*-0x2+0x77*-0x37+0x2842]+_0x1fbb1e*_0x217009['x']+_0x2c7838*_0x217009['y']+_0x79393d*_0x217009['z'],_0x44618e[-0x59*0x67+-0x169*-0x2+0x1*0x210b]+_0x29be3f*_0x217009['x']+_0x50f620*_0x217009['y']+_0x43c7d4*_0x217009['z']),this['halfExtent'+'s']['set'](Math['abs'](_0xca6100)*_0x2c5947['x']+Math['abs'](_0x5911a7)*_0x2c5947['y']+Math['abs'](_0x1cb09c)*_0x2c5947['z'],Math['abs'](_0x1fbb1e)*_0x2c5947['x']+Math['abs'](_0x2c7838)*_0x2c5947['y']+Math['abs'](_0x79393d)*_0x2c5947['z'],Math['abs'](_0x29be3f)*_0x2c5947['x']+Math['abs'](_0x50f620)*_0x2c5947['y']+Math['abs'](_0x43c7d4)*_0x2c5947['z']);}static['computeMin'+'Max'](_0x2d4df8,_0x5ea2d6,_0x471039,_0x1be18a=_0x2d4df8['length']/(0x186a*0x1+-0x1d*-0x43+-0x1ffe)){if(_0x1be18a>0x18c1*0x1+-0x14c4+-0x3fd){let _0xc1acb2=_0x2d4df8[-0x1ff1+0x18eb+0x706],_0x51f16b=_0x2d4df8[-0x17a6+0x1*-0x1eb3+0x365a],_0x4cb2bf=_0x2d4df8[0x221e*-0x1+0x20eb*0x1+-0x135*-0x1],_0x1f812f=_0xc1acb2,_0x5ef7ae=_0x51f16b,_0x520a20=_0x4cb2bf;const _0x326f74=_0x1be18a*(-0x2098+0x5b7*0x1+0x4*0x6b9);for(let _0x1fdf87=-0x6b*-0xb+0x1ac+-0x642*0x1;_0x1fdf87<_0x326f74;_0x1fdf87+=0xe*-0x49+0x28*-0xca+-0xbdb*-0x3){const _0x33411a=_0x2d4df8[_0x1fdf87],_0x2bad8b=_0x2d4df8[_0x1fdf87+(0x1*0x12c1+-0x1*0x254f+0x128f)],_0x14d28e=_0x2d4df8[_0x1fdf87+(0x1c0d*0x1+0x1*-0x4b7+-0x1754)];_0x33411a<_0xc1acb2&&(_0xc1acb2=_0x33411a),_0x2bad8b<_0x51f16b&&(_0x51f16b=_0x2bad8b),_0x14d28e<_0x4cb2bf&&(_0x4cb2bf=_0x14d28e),_0x33411a>_0x1f812f&&(_0x1f812f=_0x33411a),_0x2bad8b>_0x5ef7ae&&(_0x5ef7ae=_0x2bad8b),_0x14d28e>_0x520a20&&(_0x520a20=_0x14d28e);}_0x5ea2d6['set'](_0xc1acb2,_0x51f16b,_0x4cb2bf),_0x471039['set'](_0x1f812f,_0x5ef7ae,_0x520a20);}}['compute'](_0x56943d,_0x16990e){Ie['computeMin'+'Max'](_0x56943d,pa,_a,_0x16990e),this['setMinMax'](pa,_a);}['intersects'+'BoundingSp'+'here'](_0x3bff3a){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x3bff3a)<=_0x3bff3a['radius']*_0x3bff3a['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x292db2){const _0x559729=this['getMin'](),_0x1c8cc0=this['getMax']();let _0x47af6d=-0x21bf+-0x9*0x241+0x3608;const _0x56dfe0=['x','y','z'];for(let _0x2d6080=-0x1cb2*0x1+-0x262f+0xd*0x525;_0x2d6080<-0x1a92*0x1+-0x1757+0x31ec;++_0x2d6080){let _0x278462=-0x25*0x3a+-0x1*0x2492+0x2cf4;const _0x87c214=_0x292db2['center'][_0x56dfe0[_0x2d6080]],_0x39eefb=_0x559729[_0x56dfe0[_0x2d6080]],_0x494d1e=_0x1c8cc0[_0x56dfe0[_0x2d6080]];let _0x53cd60=0x1e2c+-0x1cfd+0x65*-0x3;_0x87c214<_0x39eefb&&(_0x53cd60=_0x39eefb-_0x87c214,_0x278462+=_0x53cd60*_0x53cd60),_0x87c214>_0x494d1e&&(_0x53cd60=_0x87c214-_0x494d1e,_0x278462+=_0x53cd60*_0x53cd60),_0x47af6d+=_0x278462;}return _0x47af6d;}['_expand'](_0x26b76a,_0x2b7408){pa['add2'](this['getMin'](),_0x26b76a),_a['add2'](this['getMax'](),_0x2b7408),this['setMinMax'](pa,_a);}}const vl=new I(),P0=new I();class xu{constructor(_0x37d1b9=new I(),_0xb303cf=-0xff3+-0x2*-0x5fe+-0xcb*-0x5+0.5){h(this,'center'),h(this,'radius'),(M['assert'](!Object['isFrozen'](_0x37d1b9),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x37d1b9,this['radius']=_0xb303cf);}['containsPo'+'int'](_0x3deb71){const _0x3d3be9=vl['sub2'](_0x3deb71,this['center'])['lengthSq'](),_0x5e4c0c=this['radius'];return _0x3d3be9<_0x5e4c0c*_0x5e4c0c;}['intersects'+'Ray'](_0x4e0e78,_0x2428dd){const _0x48a8d8=vl['copy'](_0x4e0e78['origin'])['sub'](this['center']),_0x269376=_0x48a8d8['dot'](P0['copy'](_0x4e0e78['direction'])['normalize']()),_0x16286d=_0x48a8d8['dot'](_0x48a8d8)-this['radius']*this['radius'];if(_0x16286d>-0x1d87*0x1+0x566+0x1821&&_0x269376>-0x478*0x7+-0x45f+0x1*0x23a7)return!(0x1fc1+-0x21b9*-0x1+-0x97*0x6f);const _0x176bda=_0x269376*_0x269376-_0x16286d;if(_0x176bda<0x25c7*-0x1+0x1*0x1da5+0x3*0x2b6)return!(-0x115*-0x3+-0x2055+0x1*0x1d17);const _0x3b1b7f=Math['abs'](-_0x269376-Math['sqrt'](_0x176bda));return _0x2428dd&&_0x2428dd['copy'](_0x4e0e78['direction'])['mulScalar'](_0x3b1b7f)['add'](_0x4e0e78['origin']),!(0x1182+-0x2b*0x2d+-0x9f3);}['intersects'+'BoundingSp'+'here'](_0x2855d1){vl['sub2'](_0x2855d1['center'],this['center']);const _0x112140=_0x2855d1['radius']+this['radius'];return vl['lengthSq']()<=_0x112140*_0x112140;}}class aS{constructor(_0x59b2cf=I['UP'],_0x1627ee=0x103a*0x1+0x1*-0x130d+0x2d3){h(this,'normal',new I()),h(this,'distance'),(this['normal']['copy'](_0x59b2cf),this['distance']=_0x1627ee);}['clone'](){const _0x3a5666=this['constructo'+'r'];return new _0x3a5666()['copy'](this);}['copy'](_0x14528c){return this['normal']['copy'](_0x14528c['normal']),this['distance']=_0x14528c['distance'],this;}['intersects'+'Line'](_0x2f6904,_0x12db83,_0x4c8d7e){const _0x23de39=this['distance'],_0x135ed6=this['normal']['dot'](_0x2f6904)+_0x23de39,_0xced3f4=this['normal']['dot'](_0x12db83)+_0x23de39,_0x4e041e=_0x135ed6/(_0x135ed6-_0xced3f4),_0x3dbf95=_0x4e041e>=0x1e39+-0x23f5+0x5bc&&_0x4e041e<=-0x1*-0xb6f+-0x4ac*-0x7+-0x6*0x75b;return _0x3dbf95&&_0x4c8d7e&&_0x4c8d7e['lerp'](_0x2f6904,_0x12db83,_0x4e041e),_0x3dbf95;}['intersects'+'Ray'](_0x16a307,_0x4ba38f){const _0x252f03=this['normal']['dot'](_0x16a307['direction']);if(_0x252f03===0x25*0x8b+0x28f+-0x16a6)return!(0x4ae+-0xa9*-0x1d+0x2*-0xbe9);const _0x434660=-(this['normal']['dot'](_0x16a307['origin'])+this['distance'])/_0x252f03;return _0x434660>=-0x1*-0x1033+-0x6c5+-0x96e&&_0x4ba38f&&_0x4ba38f['copy'](_0x16a307['direction'])['mulScalar'](_0x434660)['add'](_0x16a307['origin']),_0x434660>=-0x22d0*0x1+0x764*0x3+0xca4;}['normalize'](){const _0x1c10c5=(-0xf79+-0xea9+0x1e23)/this['normal']['length']();return this['normal']['mulScalar'](_0x1c10c5),this['distance']*=_0x1c10c5,this;}['set'](_0x4eafaa,_0x35643a,_0x32550e,_0x28fec4){return this['normal']['set'](_0x4eafaa,_0x35643a,_0x32550e),this['distance']=_0x28fec4,this;}['setFromPoi'+'ntNormal'](_0x197925,_0x1252b0){return this['normal']['copy'](_0x1252b0),this['distance']=-this['normal']['dot'](_0x197925),this;}}class M0{constructor(){h(this,'planes',[]);for(let _0x546a65=-0x174d*-0x1+0x591+-0x1cde;_0x546a65<-0x4c*0x71+0x26fe+-0x56c;_0x546a65++)this['planes'][_0x546a65]=new aS();}['clone'](){const _0x3788e1=this['constructo'+'r'];return new _0x3788e1()['copy'](this);}['copy'](_0x1fd76e){for(let _0xeaa5ad=0x1e01+-0x9c7+0x2*-0xa1d;_0xeaa5ad<-0x1*-0x1b1+0x1b22+-0x1*0x1ccd;_0xeaa5ad++)this['planes'][_0xeaa5ad]['copy'](_0x1fd76e['planes'][_0xeaa5ad]);return this;}['setFromMat'+'4'](_0x5c7467){const [_0x40d776,_0x243164,_0x1dbc94,_0x107277,_0x278873,_0x5e3f0b,_0x400b7f,_0x310c2d,_0x4915c9,_0x28453b,_0xae0b16,_0x459fa0,_0x4e08c5,_0x57cdcd,_0x343d12,_0xe812a]=_0x5c7467['data'],_0x809d77=this['planes'];_0x809d77[-0x2176+0x16d3*-0x1+0x9*0x641]['set'](_0x107277-_0x40d776,_0x310c2d-_0x278873,_0x459fa0-_0x4915c9,_0xe812a-_0x4e08c5)['normalize'](),_0x809d77[0x136f+0x1*0x47c+-0x17ea]['set'](_0x107277+_0x40d776,_0x310c2d+_0x278873,_0x459fa0+_0x4915c9,_0xe812a+_0x4e08c5)['normalize'](),_0x809d77[-0x2362+0xf63+0x1401]['set'](_0x107277+_0x243164,_0x310c2d+_0x5e3f0b,_0x459fa0+_0x28453b,_0xe812a+_0x57cdcd)['normalize'](),_0x809d77[-0x245*0x7+0xcc4*0x1+0x322]['set'](_0x107277-_0x243164,_0x310c2d-_0x5e3f0b,_0x459fa0-_0x28453b,_0xe812a-_0x57cdcd)['normalize'](),_0x809d77[0x1460+-0x1*0x23e3+0xf87]['set'](_0x107277-_0x1dbc94,_0x310c2d-_0x400b7f,_0x459fa0-_0xae0b16,_0xe812a-_0x343d12)['normalize'](),_0x809d77[-0x24df+0x169*-0x1+0x264d]['set'](_0x107277+_0x1dbc94,_0x310c2d+_0x400b7f,_0x459fa0+_0xae0b16,_0xe812a+_0x343d12)['normalize']();}['containsPo'+'int'](_0x173a1d){for(let _0x5eb05b=0x9c2*0x3+0xb6+0xca*-0x26;_0x5eb05b<0x2376+0x97*0x2f+0x25*-0x1b5;_0x5eb05b++){const {normal:_0x3b4b08,distance:_0x5b5911}=this['planes'][_0x5eb05b];if(_0x3b4b08['dot'](_0x173a1d)+_0x5b5911<=0x9d2+-0x1b11+0x113f)return!(-0x4*-0x23+-0x1113+0x1088);}return!(0x2541+0x2f*0xc9+-0x4a28);}['containsSp'+'here'](_0x2005a8){const {center:_0x2e09fd,radius:_0x2c3ab3}=_0x2005a8;let _0x244a4f=0xe15+-0xeab*0x2+0x163*0xb;for(let _0x238426=0x3*0x303+0x81e*0x4+-0x5*0x84d;_0x238426<-0xe5d*-0x2+0x2*0x8f7+0x2ea2*-0x1;_0x238426++){const {normal:_0x4ab533,distance:_0x2f38dc}=this['planes'][_0x238426],_0x294445=_0x4ab533['dot'](_0x2e09fd)+_0x2f38dc;if(_0x294445<=-_0x2c3ab3)return-0x1ab*-0x6+-0x1*-0x952+-0x1354;_0x294445>_0x2c3ab3&&_0x244a4f++;}return _0x244a4f===0x1256*0x1+-0x3*-0x115+0x158f*-0x1?0xb70+-0x5*0x469+-0xa9f*-0x1:0x1*0xf53+-0x1c3c+0x72*0x1d;}}class cf{constructor(_0x4d24b6,_0x2e71d7){h(this,'origin',new I()),h(this,'direction',I['FORWARD']['clone']()),(_0x4d24b6&&this['origin']['copy'](_0x4d24b6),_0x2e71d7&&this['direction']['copy'](_0x2e71d7));}['set'](_0xa67ac0,_0x1bdf5a){return this['origin']['copy'](_0xa67ac0),this['direction']['copy'](_0x1bdf5a),this;}['copy'](_0x4a3efc){return this['set'](_0x4a3efc['origin'],_0x4a3efc['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const pt=-0x17*-0x3d+0x1*-0x72d+0x1b2,ue=0x1*-0x1a5a+0x26bb+0x9*-0x160,Tu=-0x1b91*-0x1+0x1*0x241a+-0x3fa9,wu=0x51e+0x2042+-0x68*0x5c,Dt=-0xc74+0x6*-0x2b2+0x1ca1,I0=0x2000+0x8e9*0x1+-0x28e7,nS=0x1708+-0x11ff+-0x505,D0=-0x24a0+0x2*-0x223+-0x82f*-0x5,yc=0x1e05+-0x2ef*0x2+0x3*-0x80b,vc=0x647+-0x39*0x81+0x167a,as=-0x4d6+0xd05+-0x82f,L0=-0xa*-0x175+0xdff*-0x1+0x91*-0x1,R0=-0x18ef+0x4*0x4b1+-0x2*-0x317,O0=0xe0d+0x1b4a+-0x2953,ls=0x1ccc+0xfee*0x1+-0x8f2*0x5,Mh=-0xf*-0x3d+0x51*0x3e+0x1*-0x1730,oS=0x228c+-0x17a8+-0xae2,F0=-0xd*0x15+-0x1804+0x1918,bo=0x1535+-0x3*0xb73+-0x1*-0xd25,Co=-0x1*-0x1cd6+0x1a06+-0x36da,Ih=-0x3*0x35e+0x13d3+-0x9b5,xt=0x66b*-0x1+0xe5*0x7+0x4*0xa,Jr=-0xa*0x1b4+0x124d+-0xc*0x1b,mo=-0x3*0x433+-0xa07*-0x2+0x1*-0x773,N0=0x1ead+-0x1*-0x652+-0x24fc,Te=-0x32b+-0x5f7*-0x6+-0x209f*0x1,_t=0xdcc+-0x2*0xdb+-0xc15,xc=-0x31c+-0xc71+-0x239*-0x7,Tc=-0xc3a+0x9f8+0x53*0x7,wc=0x373+-0xf67*0x1+0xbf8,ea=-0x244e+-0x41*-0x99+-0x13*0x22,k0=0x148f+-0xc83+0x5*-0x19c,Dh=-0x664+-0x1d5*-0xa+-0x2b*0x47,Lh=0xf*0x200+0x497+-0x2295,df=0x1eb2+0xba*0x1c+-0x3307,U0=-0x441*-0x5+-0x46*0x5f+-0xd*-0x5d,B0=-0x1b61+-0x2*-0xa9a+0x632,z0=-0x1804+-0x11e7+-0x1*-0x29f1,Ni=-0x2408+-0x184+0x2593,ff=0x1de+-0x598+0x3ba,zi=-0x22bd*0x1+0x13*0x151+0x9bb,hr=0x1c6d+-0x1c21+-0x4a,lS=0x22ae+0xb*0x32b+-0x4587,hS=-0x15a7+0xe67+0x741,Eu=-0x1*-0xa4c+0x457+-0xea1,Ec=-0x13ec+0x1186+0x269*0x1,Au=0x1976+-0x26fb*0x1+0x7*0x1ef,Ac=0x2f*0x7e+-0x1de9+0x6cc,ur=0x67*-0x1f+0x14d7*0x1+-0x216*0x4,Oe=-0xc7d+-0xdf7+0x1a7b,bc=-0x8ee+-0x1c6d+-0x2563*-0x1,bu=-0x11*-0xd7+-0x1*0x2647+0x1809,Yo=0x1*0x885+-0x1ca4*0x1+0x1429,ri=0xd4e*0x1+0x19*0xa7+-0x2*0xec9,at=-0x20b6*-0x1+-0x26eb+0x641,je=0x1*-0x1f9b+0x1e*-0x6d+0x2c6e,Bt=-0xbca+0x1630+-0xa58,Hi=0x71*0x2f+0x71c+-0x1*0x1bcc,ki=0x1*0x241d+0x2146*0x1+-0x1*0x4553,Cc=0x65+-0x187c+0x1828,pn=-0x35*-0xa9+0x2037+-0x4322,Cu=0x25aa+-0x5*-0x40a+-0x39c9,hs=-0x1*-0x205f+0x490+0xf*-0x275,Pc=-0x1*0x10e7+0x5*-0x5db+0x2e43,Pu=0x1b88+0x7*-0x2d3+-0x7ad,Mu=0x12dd*-0x1+0x1*0x1198+-0xae*-0x2,Ko=0x21c9+-0x206d+-0x144,Zo=-0xf8b*0x1+0x23d8+-0x2*0xa1a,Mc=0x315*0x9+0xf1b+-0x1*0x2abe,Ic=0x2080*-0x1+0xa5*-0xb+0x27b2,cS=-0xf21+0x530+0xa0d,dS=0x1b0c+-0x7b*-0x41+-0x1*0x3a2a,fS=0x49*-0x46+0xa9d*0x1+0x1*0x977,uS=-0xf*0x15d+-0x1392+0x2824,Iu=0xb71+-0x2608+0x1ab7,mS=-0x23*0x3+-0xfd3+0x47*0x3b,Du=0x3a3+0x1b9d+-0x1f1e,Lu=0x83c*-0x1+0x1*0x1f49+0x346*-0x7,Ru=0xa7*0x7+0x17a5*-0x1+0x1338,Vi=-0x1a31+0xf4*-0x25+0x3d9a,Ou=-0x29*0x60+-0x1f*0x13d+0x35e9*0x1,pS=-0x2*-0x1a3+0x76a+-0xa89,Fu=-0x3d*-0x7a+-0x2541+0x857,Nu=-0x8d2*-0x1+0x22a*-0x11+-0x1c21*-0x1,ku=0x1*-0x655+-0x4ab*0x1+0x2*0x595,Uu=-0x9c5+-0x2*-0xab5+-0xb7a,Bu=0x830+-0x2449+0x1c45,_S=0x5e5*-0x2+0x1*-0x2601+0xa4*0x4e,zu=-0x49*0x72+-0x14*0xb5+0x1bc*0x1b,Dc=-0x148c+0x8*0x4c4+0x1*-0x1165,Vu=-0x2f9+-0x1a72+0x1d9b,Ne=0x97+0xae1+-0xb47,Lc=-0x230b+0xe8d+0x14b0,Gu=-0x1*0xf3b+0x2595+-0x1627,Hu=0x3*0x36d+-0x615*-0x5+-0xa1f*0x4,Wu=0xf72*0x2+-0x1*-0x14ff+0xa*-0x52b,uf=-0x2e+-0x26*0x35+0x842,mf=-0x1fb2+-0x3*0x345+0x29b8,pf=0xd*0x12d+0xc5+-0x7eb*0x2,_f=-0x185e*0x1+-0x148a+0x2d25,gf=0x8df+-0x1d3+0x2*-0x367,Sf=0x834+-0xb27+0x2*0x199,gS=0x719+0x35*-0x10+-0x1*0x389,SS=0x10fa+0xd2f+-0x1de8,yS=-0x1c44+-0x2c*0xa7+0x393a,vS=-0x1355+0x53*-0x21+0x1e4b,yf=0x100*-0x14+-0x1ba0+0x2fe4,an=-0x44f*0x5+0x3e*0x4+0x14d8*0x1,Lt=new Map([[lS,{'name':'A8','size':0x1,'ldr':!(0x65*0x33+0x81c*-0x2+-0x1b*0x25)}],[Hu,{'name':'R8','size':0x1,'ldr':!(0x26c0+0x23fc+-0x4abc)}],[hS,{'name':'L8','size':0x1,'ldr':!(0x1940+-0xef*0x3+-0x1673*0x1)}],[Eu,{'name':'LA8','size':0x2,'ldr':!(-0x406+0x2352+0x1*-0x1f4c)}],[Wu,{'name':'RG8','size':0x2,'ldr':!(-0xdae+-0x752+0x1c0*0xc)}],[Ec,{'name':'RGB565','size':0x2,'ldr':!(-0x36b+-0x2565*0x1+0x1468*0x2)}],[Au,{'name':'RGBA5551','size':0x2,'ldr':!(-0x23a4+-0x192a+-0x3cce*-0x1)}],[Ac,{'name':'RGBA4','size':0x2,'ldr':!(0x16f9+-0x518+0x1*-0x11e1)}],[ur,{'name':'RGB8','size':0x4,'ldr':!(0x11c*-0x20+-0x1de3+0x371*0x13)}],[Oe,{'name':'RGBA8','size':0x4,'ldr':!(-0x1ba*-0x8+-0x13*-0x2e+-0x62*0x2d),'srgbFormat':hs}],[Lc,{'name':'R16F','size':0x2}],[Gu,{'name':'RG16F','size':0x4}],[ri,{'name':'RGB16F','size':0x8}],[at,{'name':'RGBA16F','size':0x8}],[je,{'name':'RGB32F','size':0x10}],[Bt,{'name':'RGBA32F','size':0x10}],[Hi,{'name':'R32F','size':0x4}],[ki,{'name':'DEPTH','size':0x4}],[an,{'name':'DEPTH16','size':0x2}],[Cc,{'name':'DEPTHSTENC'+'IL','size':0x4}],[pn,{'name':'111110F','size':0x4}],[Cu,{'name':'SRGB8','size':0x4,'ldr':!(-0xe35+0x1648+0x27*-0x35),'srgb':!(-0x313*0x9+-0x2*-0x5fc+-0x1*-0xfb3)}],[hs,{'name':'SRGBA8','size':0x4,'ldr':!(0x11b8+0x705+-0x18bd),'srgb':!(-0x1*0x2025+-0x87e+0x28a3*0x1)}],[uS,{'name':'BGRA8','size':0x4,'ldr':!(-0x3f3*0x1+-0x1*0x1181+0x1574)}],[gS,{'name':'SBGRA8','size':0x4,'ldr':!(0xed+0x1d9f+-0x1e8c),'srgb':!(0x1357*-0x2+-0x12*-0xe1+0x16dc)}],[bc,{'name':'DXT1','blockSize':0x8,'ldr':!(-0x1*-0x182b+0x1c76+-0x1f3*0x1b),'srgbFormat':uf}],[bu,{'name':'DXT3','blockSize':0x10,'ldr':!(0x1*-0x3fe+0x2497+0x685*-0x5),'srgbFormat':mf}],[Yo,{'name':'DXT5','blockSize':0x10,'ldr':!(0x71*-0xd+0x1d*0x95+-0xb24*0x1),'srgbFormat':pf}],[Pc,{'name':'ETC1','blockSize':0x8,'ldr':!(0x1c5*-0xe+-0x1a8*-0x5+-0x107e*-0x1)}],[Pu,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(0x1*-0x1069+-0x173*0x1+-0x6*-0x2fa),'srgbFormat':_f}],[Mu,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(0x538*-0x4+-0xcfd+-0x21dd*-0x1),'srgbFormat':gf}],[Ko,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(-0x178e+-0x2*0x7b+0x1884),'blockSize':0x8}],[Zo,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(-0x56*0x5+-0x71*-0x28+-0xffa),'blockSize':0x8}],[Mc,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(-0x18*-0x18b+0x666*0x1+-0x2b6e),'blockSize':0x8}],[Ic,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(0x1c2e+0x1*-0x967+-0x1b5*0xb),'blockSize':0x8}],[cS,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(0x18f6+-0xee*-0x2+0x2*-0xd69),'srgbFormat':Sf}],[dS,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(-0x2*0x32b+-0x1b7*0xf+-0x1d*-0x11b)}],[fS,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(0x2467*0x1+-0x15f2+0xe75*-0x1)}],[SS,{'name':'BC6H_RGBF','blockSize':0x10}],[yS,{'name':'BC6H_RGBUF','blockSize':0x10}],[vS,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(0x16e2+0x7d3+0x1eb5*-0x1),'srgbFormat':yf}],[uf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(-0x7a+-0x10f*0x1+0x189),'srgb':!(0xcb3*0x2+-0x39*0x17+-0x1d*0xb3)}],[mf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0x1a95+0x1f*-0x9b+-0x7d0),'srgb':!(0x595+0xa6*0x11+-0x109b*0x1)}],[pf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(0x13fa+-0x1*0x12d9+-0x11*0x11),'srgb':!(-0x9db+0x9c9+-0x9*-0x2)}],[_f,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(0x2329+-0x2605+-0x16e*-0x2),'srgb':!(0x5a*0x47+0x201e+-0x3914)}],[gf,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x23f8+-0x101f+0xa6b*0x5),'srgb':!(-0x5e5+0x21ac+0x1*-0x1bc7)}],[Sf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(0xc45+0x155d+-0x1e*0x11f),'srgb':!(-0x9*0x332+-0x185c+0x351e)}],[yf,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(-0x8aa+0x1aac+-0x1202),'srgb':!(-0x92+-0x11be+0x1250)}],[Iu,{'name':'R8I','size':0x1,'isInt':!(-0xe6d+-0xf6a*-0x1+-0xfd)}],[mS,{'name':'R8U','size':0x1,'isInt':!(0x2f*0x93+-0x191c+-0x25*0xd)}],[Du,{'name':'R16I','size':0x2,'isInt':!(-0x2320+-0x1c1d*0x1+0x3f3d)}],[Lu,{'name':'R16U','size':0x2,'isInt':!(-0x1834+0xde6*-0x2+0x3400)}],[Ru,{'name':'R32I','size':0x4,'isInt':!(-0x370+0x1fa8+-0x1c38)}],[Vi,{'name':'R32U','size':0x4,'isInt':!(0x1c3*-0x6+0x24f8+-0x1a66)}],[Ou,{'name':'RG8I','size':0x2,'isInt':!(0x1*-0x3f3+0x2155+0x1*-0x1d62)}],[pS,{'name':'RG8U','size':0x2,'isInt':!(-0x2251+-0x1*-0x153c+-0xc5*-0x11)}],[Fu,{'name':'RG16I','size':0x4,'isInt':!(-0x804+-0xc1*-0x11+-0x4cd)}],[Nu,{'name':'RG16U','size':0x4,'isInt':!(0x2*-0x455+0x61c+0x28e)}],[ku,{'name':'RG32I','size':0x8,'isInt':!(-0xd03+0x1e19+-0x2d9*0x6)}],[Uu,{'name':'RG32U','size':0x8,'isInt':!(-0x12c9+0x81*-0x35+-0x2*-0x16bf)}],[Bu,{'name':'RGBA8I','size':0x4,'isInt':!(0xa16+0x1*0x631+-0x1*0x1047)}],[_S,{'name':'RGBA8U','size':0x4,'isInt':!(0x1*0x160e+0x2a5*0xd+0x386f*-0x1)}],[zu,{'name':'RGBA16I','size':0x8,'isInt':!(-0x69d*-0x1+-0xadd+0x440)}],[Dc,{'name':'RGBA16U','size':0x8,'isInt':!(-0x63b+-0x1*-0x1f06+-0x1*0x18cb)}],[Vu,{'name':'RGBA32I','size':0x10,'isInt':!(0x2b8+0x9b1+-0x1*0xc69)}],[Ne,{'name':'RGBA32U','size':0x10,'isInt':!(-0xfb*-0x1d+0x14f+-0x1dbe)}]]),V0=_0x24bd0a=>{var _0x53393d;return((_0x53393d=Lt['get'](_0x24bd0a))==null?void(0x1*-0x100d+0x639+-0x94*-0x11):_0x53393d['blockSize'])!==void(-0x1d8c+-0x75d+0x24e9);},Rh=_0x37e7df=>{var _0x13ae2a;return((_0x13ae2a=Lt['get'](_0x37e7df))==null?void(-0x17dd+0x1*-0x76f+-0x7d3*-0x4):_0x13ae2a['srgb'])===!(0xafb+0x6*-0x335+0x843);},Ya=_0x170096=>{var _0x56f8bf;return((_0x56f8bf=Lt['get'](_0x170096))==null?void(-0x2a*0x33+-0x2226+0x2a84):_0x56f8bf['isInt'])===!(-0xd3b*-0x1+-0x814+-0x527);},Rc=_0x81f104=>{var _0x5d51ae;return((_0x5d51ae=Lt['get'](_0x81f104))==null?void(-0xf93+0xa95+-0x1*-0x4fe):_0x5d51ae['srgbFormat'])||_0x81f104;},G0=_0x281e97=>{for(const [_0x2bc253,_0x47b114]of Lt)if(_0x47b114['srgbFormat']===_0x281e97)return _0x2bc253;return _0x281e97;},xS=_0x4a288d=>{const _0x166d67=Lt['get'](_0x4a288d);return!!(_0x166d67!=null&&_0x166d67['ldr']&&!(_0x166d67!=null&&_0x166d67['srgb']));},TS=_0x38f637=>{switch(_0x38f637){case Hi:case je:case Bt:return Float32Array;case Ru:case ku:case Vu:return Int32Array;case Vi:case Uu:case Ne:return Uint32Array;case Du:case Fu:case zu:return Int16Array;case Wu:case Lu:case Nu:case Dc:case Ec:case Au:case Ac:case Lc:case Gu:case ri:case at:return Uint16Array;case Iu:case Ou:case Bu:return Int8Array;default:return Uint8Array;}},Oc=-0xc04+0xdb+0xb29*0x1,Fc=0x1af4+0x30c*0x3+0x1*-0x2417,wS=-0x1ca*-0x1+0x17ec*0x1+-0x19b4,ES=-0x944*-0x1+0xcd4+0x1615*-0x1,zs=0x1*-0x15f3+0xb*0x13d+0x858,cr=-0x231+0xbf7+0xb*-0xe3,$r=0x2700+-0x845+-0x1eb5,Pe='POSITION',cs='NORMAL',ci='TANGENT',li='BLENDWEIGH'+'T',ns='BLENDINDIC'+'ES',kt='COLOR',tp='TEXCOORD',Yt='TEXCOORD0',da='TEXCOORD1',Qo='TEXCOORD2',Jo='TEXCOORD3',el='TEXCOORD4',tl='TEXCOORD5',sl='TEXCOORD6',il='TEXCOORD7',vf='ATTR0',Oh='ATTR1',$u='ATTR2',Xu='ATTR3',qu='ATTR4',H0='ATTR5',W0='ATTR6',$0='ATTR7',Po='ATTR8',Mo='ATTR9',X0='ATTR10',ju='ATTR11',Yu='ATTR12',Fh='ATTR13',Ku='ATTR14',_n='ATTR15',AS=0x3*0x481+0x1a63+-0x27e5,nn=0x112*0xd+-0x4e5*0x1+0x1*-0x905,q0=0x8b6+-0x1*-0x637+-0xeeb,j0=-0x1*-0xc65+0x1271*0x2+-0x3144,Y0=0x1*-0xf3d+0x1625+-0x6e3,xl=0x1*-0x1ae3+-0x33a+-0x1*-0x1e1d,bS=-0x2344+-0xd61+0x3be*0xd,rd=0x2*0x1115+0x1046+-0x326e,di='default',ta='rgbm',Nh='rgbe',Io='rgbp',Zu='swizzleGGG'+'R',xf=-0xcb+0x202a+-0x16d*0x16,mr=-0x15d2+0x1*0x8eb+0xce9*0x1,CS=0x1*-0x10cd+0x5b4+0x58e*0x2,PS='2d',K0=0xd7+-0x1d51+0x1c7a,Z0='none',Tf='cube',sp='equirect',Q0='octahedral',ze='glsl',st='wgsl',Nc=0xd2f*-0x2+-0x99+0x1af7,Xr=0x1*0x11c7+-0x1ed5+0xd0f,kc=-0x1a*-0x116+-0xf2e+0x29c*-0x5,rl=-0x13fa+-0x228a*0x1+0x3687,MS=0xa*0x3b9+0x22a1+-0x1*0x47d7,Do=-0x2*-0x6d+-0xc*-0x30b+-0x2559,Be=0x11dd+-0x1a1e+0x847,on=-0x1aec+-0x16*0x8f+0x2736,sa=0x4*0xbf+-0x2*-0x386+-0xa07,Us=-0x1bfd+-0xb5*-0x20+0x55f,ia=-0xc06+-0x264b+0x4*0xc95,rs=-0x23f8+0x1e79+0x583,gn=-0xb68*-0x2+-0xf28+-0x7a3,qr=0x116+0x20e*-0x8+0xf60,jr=0x3d6+-0x1d47+0x1978,Yr=0x178f+-0x1*0x159b+-0x1ec,Lo=0x1878+-0x27*0xe7+0xac2,Ro=0x25d+0x860+-0xab3,Oo=0x4*0x4a6+-0x2384+0x2b*0x65,kh=0x33b*-0x2+-0xf05*-0x1+0x883*-0x1,Sn=-0x2041+0x1076+0xfd8,Js=-0x1c1*0xe+-0x1*0x5da+-0x45a*-0x7,J0=0x12a*-0x1+-0x19*-0x67+0x2*-0x46b,ex=0x17b*-0x6+-0x39e*0x2+0x2*0x817,Uc=0x11d8+0x1a79+-0xc*0x3b0,tx=-0x6f1+0x1*0x122b+-0xb28,sx=-0x1fba+-0x1*-0xe8b+0x2f*0x5e,ix=-0x67*-0x4f+0x1*0x8d7+0xa23*-0x4,Bc=-0x277*0x1+-0x1f17+0x21a3,zc=-0x1057+0x5*-0x584+0x2c01,Qu=-0x212c*0x1+0x1e8+0x1f5b,IS=-0x7d*0xc+-0x7f*-0x47+-0x7f*0x3b,rx=-0xcd3+-0x10e3+-0x1dcf*-0x1,yn=0x2*0xdfd+-0x750+-0x1490,vn=0x50+0x175*-0x11+0x1890,xn=-0x687+-0x19c2+0x2065,Tn=-0x185a+0x1b20+0xe3*-0x3,wn=-0x5af+0x44e*0x7+-0x1855,Vc=-0x2*-0x1327+0x58*-0xe+-0x215f,Gc=-0x318+-0x24a7+0x27df,En=0x6*0x496+0x1b8f*0x1+0x2*-0x1b79,Hc=0x1b9c+-0x16ed+-0x48d,Wc=-0x4fe+0xe35+-0x914,An=-0x14*-0x21+0x11*-0x15d+-0x14bd*-0x1,$c=-0xd*0xbf+-0x22dc+0x2cb4,Xc=-0x1*0x183f+-0x36*0x35+0x2393,Uh=-0x1*-0x7f4+-0x71*0x1e+-0x571*-0x1,Ju=0x1cd*-0x9+-0x19bb*0x1+-0x8*-0x543,em=-0xe1b+-0x550+0x1394,ax=0x452*0x1+0xe23+-0x124b,nx=-0x2669+0x12a9+0x13eb*0x1,ox=-0x1074+-0xa76+-0x1b16*-0x1,lx=0x194c+-0xdb5+0x6*-0x1e7,hx=0x5ee+-0x2322+-0x1d62*-0x1,cx=-0xd*-0x29f+0x7cf+-0x5f5*0x7,dx=-0xbc1+0x3ae+0x1*0x843,fx=0x1d01+-0x41*-0x21+-0x2531,DS=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],ux=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],mx=new Map();ux['forEach']((_0x3e21b0,_0x1353ff)=>{_0x3e21b0['forEach'](_0x58037a=>mx['set'](_0x58037a,_0x1353ff));});const px='webgl2',tm=0x8*-0x23b+0x1c3d+-0x85*0x14,LS=0x1*-0x22d7+0x2e*0x7c+-0x1*-0xc91,_x=-0x222c+0x8b9+0x9f*0x29,gx='ldr',RS=-0x414+0xc3f+-0x82a,OS=-0x1f8+0x4*-0x2cc+0xd2a,FS=-0x1372+0xfb+0x127b,NS=-0x6*-0x60e+0x5*-0x295+-0x1763,kS=-0x1df*-0x1+-0xa7+0x8*-0x25,US=0x9bb+-0x40e+-0x58d,BS=-0x2*-0x40d+-0x1d4*-0x2+-0xb82,zS=0x1*0x17a9+0x20e0+-0x3809,Sx=-0x2499+0x1632+-0x6*-0x291,Fo=0x7c3*-0x4+-0x2*-0x827+0x33*0x4a,VS=-0x47*-0x5+0x1*-0x21db+0x2079,wf=-0x5*-0x5ab+-0x1dce+0x179,sm='default',ln=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],po=[0x1*0x2587+-0x1a1d+-0xb69*0x1,0xac2*0x3+0x1cda+-0x3d1f*0x1,-0x1538+0x1*0x12f4+0x246,-0x1*-0xaa5+0x204c+-0x17b*0x1d,-0x1*0xa0f+0x1224*-0x2+0x2e5b,0x1*0x211b+-0x2045+-0xd2,-0x2*0x463+0x1*-0x246f+0x2d39,-0x266*0x3+0xa*-0x369+-0x294e*-0x1],yx=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Bh=[Uint8Array,Uint16Array,Uint32Array],vx=[0x177b+-0x1ad9+0x1*0x35f,-0xc11+-0x171*-0x16+0x1*-0x13a3,-0x122+0x7*-0x47f+0x209f],GS=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),De={};De[Pe]=-0x54d*0x3+-0x1f*0xd4+-0x2993*-0x1,De[cs]=0x3*-0x7e+-0xecd*-0x2+-0x139*0x17,De[li]=0x173b+-0x263+-0x14d6,De[ns]=0x1d58+0xf2*-0x27+0x3*0x283,De[kt]=-0xbb*-0x10+-0x2109+-0x155d*-0x1,De[Yt]=0xb1d*0x1+0x51*0xb+-0xe93,De[da]=0x5d0+0x242e+0x9e*-0x44,De[Qo]=0x1119+0x22c4+0x19eb*-0x2,De[Jo]=-0x7*-0x491+-0xe80+-0x116f,De[el]=-0x1*0xdbb+0x1d0f+-0x2d*0x57,De[tl]=0x10a*0x1+0x1075+-0x1*0x1175,De[sl]=-0x1*-0x240c+0x11*-0x3d+0x7fd*-0x4,De[il]=0x2ab*-0x1+-0x1e89+-0x10*-0x214,De[ci]=0x1ad*-0x13+-0xe*0x115+0x2f0a,De[vf]=-0x1*0x413+-0x891+0xca4,De[Oh]=0x424*-0x3+-0x650+0x9*0x215,De[$u]=0x13b2+-0x50*0x3b+0x20*-0xa,De[Xu]=-0x2*-0xf6c+-0x10fd+-0xdd8,De[qu]=0x203b*0x1+0xb*-0x18d+-0xf28,De[H0]=-0x1ab0+-0x1fc6+0x3a7b,De[W0]=0x2fe*-0x4+-0x115e+0x1d5c,De[$0]=-0x26be+-0x3cb*0x6+0x3d87*0x1,De[Po]=0xd6+0x1d*-0xd+0xab,De[Mo]=-0x3e*0x2c+0xb71+0x30*-0x4,De[X0]=0x1*0xde7+0x6*0x38c+-0x2325,De[ju]=0x1*0x852+-0x1d55+-0x23*-0x9a,De[Yu]=-0x2f6+0xb3*-0xb+0x1*0xab3,De[Fh]=-0x2*0xf71+-0xb77+0x2a66,De[Ku]=0x129d+0x461*0x3+-0xfd9*0x2,De[_n]=0x2661+0x11f7+-0x3849;const tr=class tr{static['clearGpuMa'+'rkers'](){tr['markers']['length']=-0x1f02+-0x11d8+0x30da;}static['pushGpuMar'+'ker'](_0x4b57fa,_0x2c46c8){tr['markers']['push'](_0x2c46c8),_0x4b57fa['pushMarker'](_0x2c46c8);}static['popGpuMark'+'er'](_0x50c797){tr['markers']['length']&&tr['markers']['pop'](),_0x50c797['popMarker']();}static['toString'](){return tr['markers']['join']('\x20|\x20');}};h(tr,'markers',[]);let Q=tr,xx=0x143d+0x827*0x3+-0x2cb2;class qc{constructor(_0x403dde,_0x562cc5){h(this,'slot',-(0x801+-0x109*0x1+-0x6f7*0x1)),h(this,'scopeId',null),(this['name']=_0x403dde,this['visibility']=_0x562cc5);}}class im extends qc{}class Tx extends qc{constructor(_0x449861,_0x5c3639,_0x29a912=!(0x71f+0x84*0x27+-0x2*0xd9d)){super(_0x449861,_0x5c3639),h(this,'format',''),(this['readOnly']=_0x29a912,M['assert'](_0x29a912||!(_0x5c3639&tm),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class ip extends qc{constructor(_0x15f237,_0xc66b34,_0x4ceb10=PS,_0x169628=K0,_0x200d17=!(-0x1227+-0x890+0x1ab7),_0x5d52aa=null){super(_0x15f237,_0xc66b34),this['textureDim'+'ension']=_0x4ceb10,this['sampleType']=_0x169628,this['hasSampler']=_0x200d17,this['samplerNam'+'e']=_0x5d52aa??_0x15f237+'_sampler';}}class wx extends qc{constructor(_0x192fed,_0x1c7332=Oe,_0x233fb6=PS,_0x31785d=!(0xa7*-0xb+-0x16b7+0xef2*0x2),_0x20943d=!(-0x6f9+-0x25d3+-0x2ccd*-0x1)){super(_0x192fed,_x),this['format']=_0x1c7332,this['textureDim'+'ension']=_0x233fb6,this['write']=_0x31785d,this['read']=_0x20943d;}}class HS{constructor(_0x4c2096,_0x3817ae){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=xx++,ca['setName'](this,'BindGroupF'+'ormat_'+this['id']),M['assert'](_0x3817ae));let _0x237d8b=-0x13cc+0x1*-0x21f5+0x35c1;_0x3817ae['forEach'](_0x30df90=>{_0x30df90['slot']=_0x237d8b++,_0x30df90 instanceof ip&&_0x30df90['hasSampler']&&_0x237d8b++,_0x30df90 instanceof im?this['uniformBuf'+'ferFormats']['push'](_0x30df90):_0x30df90 instanceof ip?this['textureFor'+'mats']['push'](_0x30df90):_0x30df90 instanceof wx?this['storageTex'+'tureFormat'+'s']['push'](_0x30df90):_0x30df90 instanceof Tx?this['storageBuf'+'ferFormats']['push'](_0x30df90):M['assert']('Invalid\x20bi'+'nd\x20format',_0x30df90);}),this['device']=_0x4c2096;const _0x33a615=_0x4c2096['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x4d89c6,_0x2df342)=>this['bufferForm'+'atsMap']['set'](_0x4d89c6['name'],_0x2df342)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0xf3a6af,_0x5dfea5)=>{this['textureFor'+'matsMap']['set'](_0xf3a6af['name'],_0x5dfea5),_0xf3a6af['scopeId']=_0x33a615['resolve'](_0xf3a6af['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x53f861,_0x2dc975)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x53f861['name'],_0x2dc975),_0x53f861['scopeId']=_0x33a615['resolve'](_0x53f861['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x43a445,_0x9083c)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x43a445['name'],_0x9083c),_0x43a445['scopeId']=_0x33a615['resolve'](_0x43a445['name']);}),this['impl']=_0x4c2096['createBind'+'GroupForma'+'tImpl'](this),M['trace'](n0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x5cf22e){const _0x26db6a=this['textureFor'+'matsMap']['get'](_0x5cf22e);return _0x26db6a!==void(-0x1*0x2635+0x1*0xa9+0x216*0x12)?this['textureFor'+'mats'][_0x26db6a]:null;}['getStorage'+'Texture'](_0x81a60c){const _0x45c91b=this['storageTex'+'tureFormat'+'sMap']['get'](_0x81a60c);return _0x45c91b!==void(-0xa35+0x10c3+-0x347*0x2)?this['storageTex'+'tureFormat'+'s'][_0x45c91b]:null;}['loseContex'+'t'](){}}class Ht{constructor(){h(this,'_cache',new Map());}['get'](_0x54fd17,_0x532a87){return this['_cache']['has'](_0x54fd17)||(this['_cache']['set'](_0x54fd17,_0x532a87()),_0x54fd17['on']('destroy',()=>{this['remove'](_0x54fd17);}),_0x54fd17['on']('devicelost',()=>{var _0x46e321,_0x4e2835;(_0x4e2835=(_0x46e321=this['_cache']['get'](_0x54fd17))==null?void(-0x10d2+-0x3c6+0x1498*0x1):_0x46e321['loseContex'+'t'])==null||_0x4e2835['call'](_0x46e321,_0x54fd17);})),this['_cache']['get'](_0x54fd17);}['remove'](_0xcb9836){var _0x518c05,_0x25f0d8;(_0x25f0d8=(_0x518c05=this['_cache']['get'](_0xcb9836))==null?void(-0xd06*-0x2+0xbe6+0x25f2*-0x1):_0x518c05['destroy'])==null||_0x25f0d8['call'](_0x518c05,_0xcb9836),this['_cache']['delete'](_0xcb9836);}}class Ui{static['calcLevelD'+'imension'](_0x5164ea,_0x129382){return Math['max'](_0x5164ea>>_0x129382,-0x24dc+0xdaf*-0x1+0x328c);}static['calcMipLev'+'elsCount'](_0x891634,_0xfdf369,_0x510f2a=-0x18af+-0x63+0x1913*0x1){return 0x921*0x4+0x7*0x314+-0x3a0f+Math['floor'](Math['log2'](Math['max'](_0x891634,_0xfdf369,_0x510f2a)));}static['calcLevelG'+'puSize'](_0xaf4e4b,_0x19f28a,_0x265fd1,_0x3ff067){var _0x482790;const _0x20426e=Lt['get'](_0x3ff067);M['assert'](_0x20426e!==void(-0x2091+0x1d88+0x15*0x25),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x3ff067);const _0x53aa51=((_0x482790=Lt['get'](_0x3ff067))==null?void(-0x4aa*0x5+0x15*0x1b7+-0x9*0x169):_0x482790['size'])??-0x20aa+0xf62+0x1148;if(_0x53aa51>0x2ed+-0x13c*0x14+0x15c3)return _0xaf4e4b*_0x19f28a*_0x265fd1*_0x53aa51;const _0x18215d=_0x20426e['blockSize']??-0x3c*0x73+-0x4*-0x434+0xa24;let _0x503e01=Math['floor']((_0xaf4e4b+(0x1c4d+-0x62b+-0x7*0x329))/(0xa92+0x24e3+-0x2f71));const _0x441731=Math['floor']((_0x19f28a+(0x3*0x221+-0x5*0x12b+-0x89*0x1))/(0x4b7*0x5+0x1*-0xc6b+-0xb24)),_0x591830=Math['floor']((_0x265fd1+(0x25c*-0xb+-0x10a8+0x2a9f))/(0x20f2+-0x17*0x26+-0x1d84));return(_0x3ff067===Ko||_0x3ff067===Zo)&&(_0x503e01=Math['max'](Math['floor'](_0x503e01/(0x1676+-0x4*0x4a8+0x14*-0x31)),0x73+0x63*-0x35+-0x57*-0x3b)),_0x503e01*_0x441731*_0x591830*_0x18215d;}static['calcGpuSiz'+'e'](_0x1a306a,_0x564d10,_0x4f9129,_0x5e4ab3,_0x10264b,_0x402de7){let _0x59fcd0=-0x1824+0xe*0x41+0x1496;for(;_0x59fcd0+=Ui['calcLevelG'+'puSize'](_0x1a306a,_0x564d10,_0x4f9129,_0x5e4ab3),!(!_0x10264b||_0x1a306a===-0x78e+-0x49*0x65+0x245c&&_0x564d10===0x11c3+0x28a+-0x144c&&_0x4f9129===0x1115*-0x2+-0x1c91+-0x5*-0xc8c);)_0x1a306a=Math['max'](_0x1a306a>>-0xa2*-0x39+0xa77+-0x2e88,-0x26a8+-0x1877+0x3f20),_0x564d10=Math['max'](_0x564d10>>-0x1b7*-0xc+-0x442+-0x1051,0x1479+0x14c0+-0xa4e*0x4),_0x4f9129=Math['max'](_0x4f9129>>0x1ca0+0xd99*0x1+-0x4*0xa8e,-0x111b+-0x1b42*0x1+0x2c5e);return _0x59fcd0*(_0x402de7?0xb*-0x375+0x26dd+0xd0*-0x1:0x1*0x12e2+-0xa7*-0x4+-0x157d);}}let Ex=0x10fe+0x2*0x10fd+-0x32f8;class _e{constructor(_0x38d4c2,_0x326bcf={}){h(this,'name'),h(this,'_gpuSize',0x10*-0x106+0x1488+-0x428),h(this,'id',Ex++),h(this,'_invalid',!(0x487+-0x1e15*-0x1+-0x3*0xb89)),h(this,'_lockedLev'+'el',-(-0x1*0x400+0x2*-0xb9c+0x1b39)),h(this,'_lockedMod'+'e',xl),h(this,'renderVers'+'ionDirty',0x94d*-0x3+0x735+0x14b2),h(this,'_storage',!(-0x4e+-0x1*0x925+0x974)),h(this,'_numLevels',-0x445*0x2+-0x1ec*-0xf+-0x144a),h(this,'_numLevels'+'Requested');var _0x347953;this['device']=_0x38d4c2,M['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),M['assert'](!_0x326bcf['width']||Number['isInteger'](_0x326bcf['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x326bcf),M['assert'](!_0x326bcf['height']||Number['isInteger'](_0x326bcf['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x326bcf),M['assert'](!_0x326bcf['depth']||Number['isInteger'](_0x326bcf['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x326bcf),this['name']=_0x326bcf['name']??'',this['_width']=Math['floor'](_0x326bcf['width']??-0x25f5+-0xa59+0x3052),this['_height']=Math['floor'](_0x326bcf['height']??-0x16f*-0x1+-0x1*0x89+0xe2*-0x1),this['_format']=_0x326bcf['format']??Oe,this['_compresse'+'d']=V0(this['_format']),this['_integerFo'+'rmat']=Ya(this['_format']),this['_integerFo'+'rmat']&&(_0x326bcf['minFilter']=Te,_0x326bcf['magFilter']=Te),this['_volume']=_0x326bcf['volume']??!(0x21cc+0x1450+0x603*-0x9),this['_depth']=Math['floor'](_0x326bcf['depth']??0x1f03+-0x5*0xb+-0x1ecb),this['_arrayLeng'+'th']=Math['floor'](_0x326bcf['arrayLengt'+'h']??0x862+-0x15*0x17f+0x1709*0x1),this['_storage']=_0x326bcf['storage']??!(-0x1048*-0x1+-0x21e5+0x1*0x119e),this['_cubemap']=_0x326bcf['cubemap']??!(-0x146f+-0x1*0xa19+-0x1e89*-0x1),this['_flipY']=_0x326bcf['flipY']??!(-0x1d99*-0x1+-0xc57+-0x1141),this['_premultip'+'lyAlpha']=_0x326bcf['premultipl'+'yAlpha']??!(-0x1c9b+0x157a+0x722),this['_mipmaps']=_0x326bcf['mipmaps']??!(0x4c5*-0x3+-0x120b+-0x205a*-0x1),this['_numLevels'+'Requested']=_0x326bcf['numLevels'],_0x326bcf['numLevels']!==void(0x16e4+-0x733*-0x4+-0x33b0)&&(this['_numLevels']=_0x326bcf['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x326bcf['minFilter']??ea,this['_magFilter']=_0x326bcf['magFilter']??_t,this['_anisotrop'+'y']=_0x326bcf['anisotropy']??0xc7c+-0x25fa+0x3d*0x6b,this['_addressU']=_0x326bcf['addressU']??pt,this['_addressV']=_0x326bcf['addressV']??pt,this['_addressW']=_0x326bcf['addressW']??pt,this['_compareOn'+'Read']=_0x326bcf['compareOnR'+'ead']??!(0x19a8+-0x204f+0x6a8),this['_compareFu'+'nc']=_0x326bcf['compareFun'+'c']??Dh,this['_type']=_0x326bcf['type']??di,M['assert'](!_0x326bcf['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),M['assert'](!_0x326bcf['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=Z0,this['_cubemap']?this['projection']=Tf:_0x326bcf['projection']&&_0x326bcf['projection']!==Tf&&(this['projection']=_0x326bcf['projection']),this['profilerHi'+'nt']=_0x326bcf['profilerHi'+'nt']??-0xb7*-0x2+0x2*0x84c+-0x1206,this['_levels']=_0x326bcf['levels'];const _0x2fbdc7=!!_0x326bcf['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x2fbdc7),_0x38d4c2['textures']['push'](this),M['trace']($m,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x347953=Lt['get'](this['format']))==null?void(0x1*0x6e3+-0x2b3*0xb+0x16ce):_0x347953['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){M['trace']($m,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x35ecd6=this['device'];if(_0x35ecd6){const _0x1964ac=_0x35ecd6['textures']['indexOf'](this);_0x1964ac!==-(0x2553+0xc41+-0x3193)&&_0x35ecd6['textures']['splice'](_0x1964ac,0xbdd+-0x1ed6+0x12fa),_0x35ecd6['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x35ecd6),this['adjustVram'+'SizeTracki'+'ng'](_0x35ecd6['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x5e9cef=!(-0x5b3*0x1+0x1090+-0xadd)){var _0x1652b4;const {device:_0x3f5fa5}=this;(_0x1652b4=this['impl'])==null||_0x1652b4['destroy'](_0x3f5fa5),this['impl']=null,this['impl']=_0x3f5fa5['createText'+'ureImpl'](this),this['dirtyAll'](),_0x5e9cef&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x308bcc,_0x35ffb8,_0x301cae=0x1a3*-0xf+0x1bc+-0x16d2*-0x1){const _0x45637e=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x45637e['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x45637e),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x308bcc),this['_height']=Math['floor'](_0x35ffb8),this['_depth']=Math['floor'](_0x301cae),this['_updateNum'+'Level'](),this['impl']=_0x45637e['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0xafffa5,_0x158060){M['trace'](s0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x158060+('\x20vram.text'+'ure:\x20')+_0xafffa5['tex']+'\x20=>\x20'+(_0xafffa5['tex']+_0x158060)),_0xafffa5['tex']+=_0x158060,this['profilerHi'+'nt']===xf?_0xafffa5['texShadow']+=_0x158060:this['profilerHi'+'nt']===mr?_0xafffa5['texAsset']+=_0x158060:this['profilerHi'+'nt']===CS&&(_0xafffa5['texLightma'+'p']+=_0x158060);}['propertyCh'+'anged'](_0x40cd0f){this['impl']['propertyCh'+'anged'](_0x40cd0f),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x5cd418=this['mipmaps']?Ui['calcMipLev'+'elsCount'](this['width'],this['height']):0x495+0xe3e*-0x1+0x9aa,_0x262a94=this['_numLevels'+'Requested'];_0x262a94!==void(-0x26df+-0x26b+-0x14a5*-0x2)&&_0x262a94>_0x5cd418&&M['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x5cd418,this),this['_numLevels']=Math['min'](_0x262a94??_0x5cd418,_0x5cd418),this['_mipmaps']=this['_numLevels']>-0x1cb7*-0x1+0x205d*-0x1+0x3a7;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0xf56685){this['_minFilter']!==_0xf56685&&(Ya(this['_format'])?M['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0xf56685,this['propertyCh'+'anged'](RS)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x38caf4){this['_magFilter']!==_0x38caf4&&(Ya(this['_format'])?M['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x38caf4,this['propertyCh'+'anged'](OS)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x117b47){this['_addressU']!==_0x117b47&&(this['_addressU']=_0x117b47,this['propertyCh'+'anged'](FS));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x9232d7){this['_addressV']!==_0x9232d7&&(this['_addressV']=_0x9232d7,this['propertyCh'+'anged'](NS));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x57883e){if(!this['_volume']){M['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x57883e!==this['_addressW']&&(this['_addressW']=_0x57883e,this['propertyCh'+'anged'](kS));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x3c0e40){this['_compareOn'+'Read']!==_0x3c0e40&&(this['_compareOn'+'Read']=_0x3c0e40,this['propertyCh'+'anged'](US));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x58caf6){this['_compareFu'+'nc']!==_0x58caf6&&(this['_compareFu'+'nc']=_0x58caf6,this['propertyCh'+'anged'](BS));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x23e820){this['_anisotrop'+'y']!==_0x23e820&&(this['_anisotrop'+'y']=_0x23e820,this['propertyCh'+'anged'](zS));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x5a669d){this['_mipmaps']!==_0x5a669d&&(this['device']['isWebGPU']?M['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):Ya(this['_format'])?M['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x5a669d,_0x5a669d&&(this['_needsMipm'+'apsUpload']=!(0x4dc*-0x4+-0x8*0x14b+0x1dc8*0x1)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0xf1105=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===0x6*-0x360+0xf01*0x1+-0x2a*-0x20);return Ui['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0xf1105,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>-0x1875+0x132b+0x2a5*0x2;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x1df2bb){this['_type']!==_0x1df2bb&&(this['_type']=_0x1df2bb,this['device']['_shadersDi'+'rty']=!(-0x3*-0x579+-0x2650+0x15e5));}get['type'](){return this['_type'];}set['srgb'](_0x46cf2a){var _0x282b03,_0xf945f1,_0x5d3673,_0x2c99fc;const _0x39293f=Rh(this['format']);if(_0x46cf2a!==_0x39293f){if(_0x46cf2a){const _0xedc56c=Rc(this['format']);this['_format']!==_0xedc56c&&(M['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x282b03=Lt['get'](this['format']))==null?void(-0x1a8b+-0x6d4+0x215f):_0x282b03['name'])+'\x20->\x20'+((_0xf945f1=Lt['get'](_0xedc56c))==null?void(-0x142*-0x17+0x1e9b+-0x3b89):_0xf945f1['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0xedc56c,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x989*0x1+0x72a+0x25f*0x1));}else{const _0x1cee72=G0(this['format']);this['_format']!==_0x1cee72&&(M['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x5d3673=Lt['get'](this['format']))==null?void(0x61*-0x2a+0x18fc+0x183*-0x6):_0x5d3673['name'])+'\x20->\x20'+((_0x2c99fc=Lt['get'](_0x1cee72))==null?void(-0xc5f*0x3+0x17ac+0xd71):_0x2c99fc['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x1cee72,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(0x7*-0x33b+-0x12a9*-0x1+0x3f4));}}}get['srgb'](){return Rh(this['format']);}set['flipY'](_0x4faa84){this['_flipY']!==_0x4faa84&&(this['_flipY']=_0x4faa84,this['_needsUplo'+'ad']=!(0x11*-0x22d+-0x2580+-0x1*-0x4a7d));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x3d8932){this['_premultip'+'lyAlpha']!==_0x3d8932&&(this['_premultip'+'lyAlpha']=_0x3d8932,this['_needsUplo'+'ad']=!(-0x1*-0xfe8+0x2442+-0x25f*0x16));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case ta:return'rgbm';case Nh:return'rgbe';case Io:return'rgbp';}return xS(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(-0x1f*-0x116+-0x56*0x6e+-0x1*-0x34a),!(-0x15*0x29+-0xa0*-0x35+-0x1dc3),!(-0x5ba+0x1*0x188b+-0x12d1),!(-0x515*-0x7+0x2692+-0x201*0x25),!(0x16b6*0x1+0x142b+-0x2ae1),!(0xc22*-0x2+-0x1582+0x36*0xd9)]]:[!(-0xb*0x6e+-0x1*0x37f+-0x839*-0x1)],this['_needsUplo'+'ad']=!(-0x1*0xe6b+-0x237b+0x31e6),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(-0x2*0xd5+-0x3*-0x18d+0x2fc*-0x1),this['propertyCh'+'anged'](Sx);}['lock'](_0xa2f038={}){_0xa2f038['level']??(_0xa2f038['level']=-0x1aa7+0x2643+-0xb9c),_0xa2f038['face']??(_0xa2f038['face']=-0x3*0x863+0x17*0xc1+0x7d2),_0xa2f038['mode']??(_0xa2f038['mode']=rd),M['assert'](this['_lockedMod'+'e']===xl,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),M['assert'](_0xa2f038['mode']===bS||_0xa2f038['mode']===rd,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0xa2f038['mode'],this['_lockedLev'+'el']=_0xa2f038['level'];const _0x6778ad=this['cubemap']?this['_levels'][_0xa2f038['face']]:this['_levels'];if((_0x6778ad==null?void(-0x1*0x1751+0x194c+-0x1fb):_0x6778ad[_0xa2f038['level']])===null){const _0x3105d1=Math['max'](-0xbba*0x1+0x9*-0x360+0x2a1b,this['_width']>>_0xa2f038['level']),_0x5dd7a4=Math['max'](-0x4d5+-0xa*0x205+-0x9*-0x2c8,this['_height']>>_0xa2f038['level']),_0x2aef75=Math['max'](0x1909+0x157d*0x1+0x2e85*-0x1,this['_depth']>>_0xa2f038['level']),_0x16c4c1=new ArrayBuffer(Ui['calcLevelG'+'puSize'](_0x3105d1,_0x5dd7a4,_0x2aef75,this['_format']));_0x6778ad[_0xa2f038['level']]=new(TS(this['_format']))(_0x16c4c1);}return _0x6778ad==null?void(-0x1637+-0x1*-0x2569+-0xf32):_0x6778ad[_0xa2f038['level']];}['setSource'](_0x4a3fbc,_0x1822b7=-0x2443+-0x203d+0x4480){let _0x27ef7d=!(0x100a*-0x1+-0x222c*0x1+0x3237),_0x4a96cc,_0x15e6b1;if(this['_cubemap']){if(_0x4a3fbc[0x6*0x610+0x13bc+-0x9*0x63c]){_0x4a96cc=_0x4a3fbc[-0x1b*0x28+0x36c+-0x3*-0x44]['width']||-0x2*-0x130a+0x1297+-0x38ab,_0x15e6b1=_0x4a3fbc[0xf23*0x2+-0xebe+-0xf88]['height']||0x1d02+-0x2*0x220+-0xc61*0x2;for(let _0x3edce1=0x59*-0xd+-0x2c5*0x3+-0x335*-0x4;_0x3edce1<-0x82f+-0x1*0x10f3+0x1928;_0x3edce1++){const _0x452530=_0x4a3fbc[_0x3edce1];if(!_0x452530||_0x452530['width']!==_0x4a96cc||_0x452530['height']!==_0x15e6b1||!this['device']['_isBrowser'+'Interface'](_0x452530)){_0x27ef7d=!(0x13aa+0x23bc+0xe*-0x3f5);break;}}}else _0x27ef7d=!(0x2030+-0x7bb*0x2+-0x85d*0x2);if(!_0x27ef7d){for(let _0x12a9df=0x74f*0x1+-0x115a+0xa0b;_0x12a9df<0x178d+0x145f+0x2*-0x15f3;_0x12a9df++)this['_levels'][_0x1822b7][_0x12a9df]!==_0x4a3fbc[_0x12a9df]&&(this['_levelsUpd'+'ated'][_0x1822b7][_0x12a9df]=!(-0xea5+0x528+0x97d));}}else this['device']['_isBrowser'+'Interface'](_0x4a3fbc)||(_0x27ef7d=!(-0x236+0x5d4+-0x39e)),_0x27ef7d||(_0x4a3fbc!==this['_levels'][_0x1822b7]&&(this['_levelsUpd'+'ated'][_0x1822b7]=!(-0x15d2+0x21fc+-0x40e*0x3)),_0x4a3fbc instanceof HTMLVideoElement?(_0x4a96cc=_0x4a3fbc['videoWidth'],_0x15e6b1=_0x4a3fbc['videoHeigh'+'t']):(_0x4a96cc=_0x4a3fbc['width'],_0x15e6b1=_0x4a3fbc['height']));if(_0x27ef7d){if(this['_width']=0x23aa+0x1*-0xda+-0x1*0x22cc,this['_height']=-0x2075+-0x20b8+-0x1*-0x4131,this['_cubemap']){for(let _0x128385=-0x1252+0x145a*0x1+-0x208;_0x128385<-0x12f6+0x1225+-0xd7*-0x1;_0x128385++)this['_levels'][_0x1822b7][_0x128385]=null,this['_levelsUpd'+'ated'][_0x1822b7][_0x128385]=!(-0xc79*-0x1+0x1bce+-0x2847);}else this['_levels'][_0x1822b7]=null,this['_levelsUpd'+'ated'][_0x1822b7]=!(0x111d+0x3f2*0x2+-0x1*0x1901);}else _0x1822b7===-0xc*-0x10b+-0x1*0x1bd2+0xf4e&&(this['_width']=_0x4a96cc,this['_height']=_0x15e6b1),this['_levels'][_0x1822b7]=_0x4a3fbc;(this['_invalid']!==_0x27ef7d||!_0x27ef7d)&&(this['_invalid']=_0x27ef7d,this['upload']());}['getSource'](_0x627747=0x2e3*-0xd+0x257e+-0x3*-0x3){return this['_levels'][_0x627747];}['unlock'](){this['_lockedMod'+'e']===xl&&M['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===rd&&this['upload'](),this['_lockedLev'+'el']=-(-0x1cf*-0x11+0x2e5+-0x21a3),this['_lockedMod'+'e']=xl;}['upload'](){var _0x5757f1,_0x483411;this['_needsUplo'+'ad']=!(0xd7*-0x1c+-0x45c*-0x5+0x1b8),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x483411=(_0x5757f1=this['impl'])['uploadImme'+'diate'])==null||_0x483411['call'](_0x5757f1,this['device'],this);}['read'](_0x4842d1,_0x2d3d17,_0x346105,_0x52d23c,_0x1225a3={}){var _0x5c9d63,_0x118f16;return(_0x118f16=(_0x5c9d63=this['impl'])['read'])==null?void(0x2568+0x24f+-0x27b7):_0x118f16['call'](_0x5c9d63,_0x4842d1,_0x2d3d17,_0x346105,_0x52d23c,_0x1225a3);}['write'](_0x1d8cd1,_0x58c058,_0x20fefe,_0x38955f,_0x4715ea){var _0x4fba34,_0x2afe87;return(_0x2afe87=(_0x4fba34=this['impl'])['write'])==null?void(-0x14db+0xa2d*-0x2+0x3bf*0xb):_0x2afe87['call'](_0x4fba34,_0x1d8cd1,_0x58c058,_0x20fefe,_0x38955f,_0x4715ea);}}const Ax={'white':[0x1*-0x1cb7+0xf28+0xe8e,0x1*0x21c1+0x11*-0x205+0x193,-0x1d63+-0x6*0x599+-0x1*-0x3ff8,0x661+-0x207b+0x7*0x3df],'gray':[0x1f*-0xa+-0x1ea9*-0x1+0x1cf3*-0x1,0x617+0x2*0x1317+-0x2bc5,-0xe9*0x22+-0x17e7+-0x3*-0x1273,-0x1f*-0x13c+0x4*-0x5e3+0x493*-0x3],'black':[-0x10aa+0x1f39+-0xe8f,0xc8f*-0x3+-0x2b*-0xc6+-0x57*-0xd,-0x92b*-0x1+-0x11*-0x1c4+-0x272f*0x1,-0xee8+-0x6*0x3d3+0x26d9],'normal':[-0x1*0x215e+0x1e28+0x1db*0x2,-0x265*-0x1+0x1*-0x164b+-0x2ea*-0x7,-0x281*-0x6+0x291+-0x1098,-0x36+-0x1177+0x12ac],'pink':[0x1f0d+0x699+0x355*-0xb,-0xa*-0x8d+-0x1a*0xa7+-0x55*-0x24,0x222f+-0xbad+-0x1583*0x1,-0x2113+-0x34f+-0x7*-0x557]};class bx{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x53bb9c=>{_0x53bb9c['destroy']();});}}const Cx=new Ht(),Kr=(_0x1beaf3,_0x56325a)=>{const _0x24be24=Cx['get'](_0x1beaf3,()=>new bx());if(!_0x24be24['map']['has'](_0x56325a)){const _0x128e27=new _e(_0x1beaf3,{'name':'built-in-t'+'exture-'+_0x56325a,'width':0x1,'height':0x1,'format':Oe}),_0x4d4c59=_0x128e27['lock'](),_0x525a75=Ax[_0x56325a];M['assert'](_0x525a75,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x56325a+('\x27\x20not\x20foun'+'d')),_0x4d4c59['set'](_0x525a75),_0x128e27['unlock'](),_0x24be24['map']['set'](_0x56325a,_0x128e27);}return _0x24be24['map']['get'](_0x56325a);};let Px=0x1b5f+0x1*-0x13de+0x71*-0x11;class WS{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class rm{constructor(_0x5eee35,_0x3569b0,_0x233aac){h(this,'renderVers'+'ionUpdated',-(-0x902*-0x1+0x1625*0x1+-0xa62*0x3)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=Px++,this['device']=_0x5eee35,this['format']=_0x3569b0,this['dirty']=!(0x9de+0x6*-0x1eb+0x14*0x15),this['impl']=_0x5eee35['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x233aac,_0x233aac&&this['setUniform'+'Buffer'](sm,_0x233aac),M['trace'](a0,'Alloc:\x20Id\x20'+this['id'],this,_0x3569b0));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x3410f9,_0x1b6476){const _0x1d5f50=this['format']['bufferForm'+'atsMap']['get'](_0x3410f9);M['assert'](_0x1d5f50!==void(-0x1*-0x1f03+0x1df9*0x1+0x1454*-0x3),'Setting\x20a\x20'+'uniform\x20['+_0x3410f9+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x1d5f50]!==_0x1b6476&&(this['uniformBuf'+'fers'][_0x1d5f50]=_0x1b6476,this['dirty']=!(0x7e1+0x2*-0x742+0x6a3));}['setStorage'+'Buffer'](_0x451ed3,_0x333a5a){const _0x1c1dfa=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x451ed3);M['assert'](_0x1c1dfa!==void(0xdb1+0xcd2+-0x1a83),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x451ed3+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x1c1dfa]!==_0x333a5a&&(this['storageBuf'+'fers'][_0x1c1dfa]=_0x333a5a,this['dirty']=!(-0x1c56*-0x1+-0xc9*0x2c+0x109*0x6));}['setTexture'](_0x3b4cf8,_0x3276c7){const _0x2c62c2=this['format']['textureFor'+'matsMap']['get'](_0x3b4cf8);M['assert'](_0x2c62c2!==void(-0x5*-0x202+0x824*0x1+-0x122e),'Setting\x20a\x20'+'texture\x20['+_0x3b4cf8+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x2c62c2]!==_0x3276c7?(this['textures'][_0x2c62c2]=_0x3276c7,this['dirty']=!(0x2582+-0xa94*-0x3+-0x453e)):this['renderVers'+'ionUpdated']<_0x3276c7['renderVers'+'ionDirty']&&(this['dirty']=!(0x1*0x2345+-0x1f1e*0x1+-0x427));}['setStorage'+'Texture'](_0x2fe11f,_0x363cf2){const _0x22c63d=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x2fe11f);M['assert'](_0x22c63d!==void(0x3*0xaab+-0x3a8+-0x1c59),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x2fe11f+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x22c63d]!==_0x363cf2?(this['storageTex'+'tures'][_0x22c63d]=_0x363cf2,this['dirty']=!(-0x1187*0x1+-0x1d49+0xe*0x358)):this['renderVers'+'ionUpdated']<_0x363cf2['renderVers'+'ionDirty']&&(this['dirty']=!(0x699*-0x5+-0x2151*-0x1+0x15*-0x4));}['updateUnif'+'ormBuffers'](){for(let _0x1255f4=0xe61+0x145d+-0x22be;_0x1255f4<this['uniformBuf'+'fers']['length'];_0x1255f4++)this['uniformBuf'+'fers'][_0x1255f4]['update']();}['update'](){const {textureFormats:_0x7144b8,storageTextureFormats:_0x2e0e19,storageBufferFormats:_0x565590}=this['format'];for(let _0x3caf5c=-0xfd1+-0xd8c*0x2+-0xa9*-0x41;_0x3caf5c<_0x7144b8['length'];_0x3caf5c++){const _0x52fe67=_0x7144b8[_0x3caf5c];let _0x449ee0=_0x52fe67['scopeId']['value'];_0x449ee0||(_0x52fe67['name']==='uSceneDept'+'hMap'&&(M['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x449ee0=Kr(this['device'],'white')),_0x52fe67['name']==='uSceneColo'+'rMap'&&(M['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x449ee0=Kr(this['device'],'pink')),_0x449ee0||(M['errorOnce']('Texture\x20'+_0x52fe67['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0x449ee0=Kr(this['device'],'pink'))),this['setTexture'](_0x52fe67['name'],_0x449ee0);}for(let _0x4c03ea=0x925+0x5*0x6ea+0x13*-0x24d;_0x4c03ea<_0x2e0e19['length'];_0x4c03ea++){const _0xbd467=_0x2e0e19[_0x4c03ea],_0x13bfeb=_0xbd467['scopeId']['value'];M['assert'](_0x13bfeb,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0xbd467['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0xbd467['name'],_0x13bfeb);}for(let _0x26156d=0x82*0x28+-0x1*-0x936+0x2*-0xec3;_0x26156d<_0x565590['length'];_0x26156d++){const _0x1408ec=_0x565590[_0x26156d],_0x27cdef=_0x1408ec['scopeId']['value'];M['assert'](_0x27cdef,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x1408ec['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x1408ec['name'],_0x27cdef);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x5c8f7d=0x2*0xec6+0x325+0x1*-0x20b1;_0x5c8f7d<this['uniformBuf'+'fers']['length'];_0x5c8f7d++){const _0x5610b0=this['uniformBuf'+'fers'][_0x5c8f7d];this['uniformBuf'+'ferOffsets'][_0x5c8f7d]=_0x5610b0['offset'],this['renderVers'+'ionUpdated']<_0x5610b0['renderVers'+'ionDirty']&&(this['dirty']=!(-0x1eb9+-0x3d4+0x228d));}this['dirty']&&(this['dirty']=!(-0xc0e*-0x1+0x42*-0x49+-0x1*-0x6c5),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const Xe={'set'(_0x486a1b,_0x1675ef,_0x189583,_0x55a264=-0x1*0x1591+0x268f+-0x10fd){return _0x486a1b&~(_0x55a264<<_0x189583)|_0x1675ef<<_0x189583;},'get'(_0x508b0,_0x336e6f,_0x18e0c8=-0xd30*0x1+-0x8f2+0x1623){return _0x508b0>>_0x336e6f&_0x18e0c8;},'all'(_0x5d7497,_0x34d442,_0x4a35e0=0x2327+0x1a4f+0x3d75*-0x1){const _0x127672=_0x4a35e0<<_0x34d442;return(_0x5d7497&_0x127672)===_0x127672;},'any'(_0x12b8a0,_0x16a518,_0x2c5efe=-0xb2d+-0x48a+0xfb8){return(_0x12b8a0&_0x2c5efe<<_0x16a518)!==-0xc6b*0x1+-0x443+0x10ae;}},Tl=0x1211+-0xd20+-0x4ea,Xi=-0x1c9e+0x1094+-0xa3*-0x13,rp=0x1651+-0x3*-0xcbd+-0xd*0x4a8,ap=0x1226+-0xa59*-0x1+-0x2*0xe3e,np=0x264b+-0x5d*-0x3b+-0x3bb3,op=0x8a2+0x1*0x5ab+-0xa*0x16d,lp=0x1833+0x11b6+-0x85f*0x5,hp=0x136f+0x22d*0x8+-0x24c5,Ef=0x263b+-0x1a9e+-0xb87,cp=0x2*-0x241+-0x1d5b+0x21f4,dp=-0xc1*0x1c+-0x47*0x21+0x1e5b,fp=-0x13c*0x4+0x1e9*0x3+-0xb2,up=0x2*-0xe83+-0x503*0x1+0x2223,Mx=-0x87e*-0x3+-0x2649+-0x9*-0x16e,Ix=Ef,js=class js{constructor(_0x3af6a1=!(0x364*0x5+0x99d+0x10*-0x1a9),_0x46dd22=as,_0x2876eb=Dt,_0x4fadaf=wu,_0x5cee22,_0x36d834,_0x406b7d,_0x47cbe8=!(-0x10a9+-0x3e*-0x5+0xf73),_0x223183=!(0x10dc+0x1*0x2c9+-0x13a5),_0x5aef67=!(-0x216a+0xd85+0x13e5),_0x386897=!(-0x129d+-0x3*-0xc28+0x11db*-0x1)){h(this,'target0',-0xa6*-0x27+0x2f3+-0x1c3d),(this['setColorBl'+'end'](_0x46dd22,_0x2876eb,_0x4fadaf),this['setAlphaBl'+'end'](_0x5cee22??_0x46dd22,_0x36d834??_0x2876eb,_0x406b7d??_0x4fadaf),this['setColorWr'+'ite'](_0x47cbe8,_0x223183,_0x5aef67,_0x386897),this['blend']=_0x3af6a1);}set['blend'](_0x593272){this['target0']=Xe['set'](this['target0'],_0x593272?-0x2266+0x201a+0x1*0x24d:0x143*0x13+0x176d+-0x2f66,up);}get['blend'](){return Xe['all'](this['target0'],up);}['setColorBl'+'end'](_0x5a3cfa,_0x28a30c,_0x2c368e){this['target0']=Xe['set'](this['target0'],_0x5a3cfa,rp,Tl),this['target0']=Xe['set'](this['target0'],_0x28a30c,ap,Xi),this['target0']=Xe['set'](this['target0'],_0x2c368e,np,Xi);}['setAlphaBl'+'end'](_0x2e5872,_0x5a7c52,_0x527c27){this['target0']=Xe['set'](this['target0'],_0x2e5872,op,Tl),this['target0']=Xe['set'](this['target0'],_0x5a7c52,lp,Xi),this['target0']=Xe['set'](this['target0'],_0x527c27,hp,Xi);}['setColorWr'+'ite'](_0x42a005,_0x3af630,_0x50184c,_0x55c08f){this['redWrite']=_0x42a005,this['greenWrite']=_0x3af630,this['blueWrite']=_0x50184c,this['alphaWrite']=_0x55c08f;}get['colorOp'](){return Xe['get'](this['target0'],rp,Tl);}get['colorSrcFa'+'ctor'](){return Xe['get'](this['target0'],ap,Xi);}get['colorDstFa'+'ctor'](){return Xe['get'](this['target0'],np,Xi);}get['alphaOp'](){return Xe['get'](this['target0'],op,Tl);}get['alphaSrcFa'+'ctor'](){return Xe['get'](this['target0'],lp,Xi);}get['alphaDstFa'+'ctor'](){return Xe['get'](this['target0'],hp,Xi);}set['redWrite'](_0x9dbb4){this['target0']=Xe['set'](this['target0'],_0x9dbb4?-0x13b2+-0xc67+0x1*0x201a:-0x29*0xdf+0x139*-0x1a+-0x4381*-0x1,Ef);}get['redWrite'](){return Xe['all'](this['target0'],Ef);}set['greenWrite'](_0x4aad16){this['target0']=Xe['set'](this['target0'],_0x4aad16?-0x7a0+-0x111f+-0x16*-0x120:0x749+-0x25*-0x5+-0x802,cp);}get['greenWrite'](){return Xe['all'](this['target0'],cp);}set['blueWrite'](_0x3d99d8){this['target0']=Xe['set'](this['target0'],_0x3d99d8?-0x1984+-0x26fb+0x4080:-0x4a6+-0x1*-0x121+0x385,dp);}get['blueWrite'](){return Xe['all'](this['target0'],dp);}set['alphaWrite'](_0x1ed836){this['target0']=Xe['set'](this['target0'],_0x1ed836?-0x3a2+0x1ed8+-0x1b35:-0x1c60+-0x1583+-0x1*-0x31e3,fp);}get['alphaWrite'](){return Xe['all'](this['target0'],fp);}get['allWrite'](){return Xe['get'](this['target0'],Ix,Mx);}['copy'](_0x1280a8){return this['target0']=_0x1280a8['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x14725d){return this['target0']===_0x14725d['target0'];}};h(js,'NOBLEND',Object['freeze'](new js())),h(js,'NOWRITE',Object['freeze'](new js(void(-0x216f+0x38+0x1*0x2137),void(0x1b2a+-0x21d9+-0x1d*-0x3b),void(-0x1d2+-0x9fc+0xbce),void(-0x1d0c+0x5c9*0x5+0x1f),void(0x20b2+0x1*0x234f+-0x16ab*0x3),void(0x21e8+0xb50+-0x169c*0x2),void(-0xd67*-0x2+-0x2278+0x7aa),!(0xec9+-0x1b7c+0x10f*0xc),!(-0xb29*0x1+0x1522+-0x16*0x74),!(0x11c2+0x646*-0x5+0xd9d),!(-0xf55*0x1+-0xa63+-0x5*-0x525)))),h(js,'ALPHABLEND',Object['freeze'](new js(!(-0x1*0x20a+0x1fd7+-0x1dcd),as,yc,vc))),h(js,'ADDBLEND',Object['freeze'](new js(!(-0x21d*-0x4+0x1*-0x1e49+0x747*0x3),as,Dt,Dt)));let Ct=js;class am{constructor(){h(this,'map',new Map()),h(this,'id',0x59*0x68+0x1adc+-0x3f04);}['get'](_0x42754f){let _0x3dae25=this['map']['get'](_0x42754f);return _0x3dae25===void(-0x1270+-0x6bb*-0x1+0xbb5)&&(_0x3dae25=this['id']++,this['map']['set'](_0x42754f,_0x3dae25)),_0x3dae25;}}const Dx=new am(),mp=0x1*-0x17f3+0x1235+0x5c5,pp=-0x6e2*-0x2+0xa02+0x22*-0xb3,_p=-0x16cd+-0xeb3+0x2583,sr=class sr{constructor(_0xaca7cd=df,_0x39a85d=!(0x1*0xfad+-0x1b16*-0x1+-0x7b*0x59)){h(this,'data',-0x256+-0x6*0x111+0xd*0xac),h(this,'_depthBias',-0x3*-0x7c3+0x17ce+-0x96b*0x5),h(this,'_depthBias'+'Slope',-0x5e3+0x118d+-0x2*0x5d5),h(this,'key',0x3d*0x7f+0x9af+-0x27f2),(this['func']=_0xaca7cd,this['write']=_0x39a85d);}set['test'](_0xcad1dd){this['func']=_0xcad1dd?df:Ni,this['updateKey']();}get['test'](){return this['func']!==Ni;}set['write'](_0x999a33){this['data']=Xe['set'](this['data'],_0x999a33?-0x1871*-0x1+0x150d+-0x2d7d:0x1*0xcf1+-0x1561*0x1+0x870,_p),this['updateKey']();}get['write'](){return Xe['all'](this['data'],_p);}set['func'](_0x232a2f){this['data']=Xe['set'](this['data'],_0x232a2f,pp,mp),this['updateKey']();}get['func'](){return Xe['get'](this['data'],pp,mp);}set['depthBias'](_0x88e2ad){this['_depthBias']=_0x88e2ad,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x3e805b){this['_depthBias'+'Slope']=_0x3e805b,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x363f39){return this['data']=_0x363f39['data'],this['_depthBias']=_0x363f39['_depthBias'],this['_depthBias'+'Slope']=_0x363f39['_depthBias'+'Slope'],this['key']=_0x363f39['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x3b5bbf,_depthBias:_0x3730b5,_depthBiasSlope:_0x46c913}=this,_0x5b5fa3=_0x3b5bbf+'-'+_0x3730b5+'-'+_0x46c913;this['key']=Dx['get'](_0x5b5fa3);}['equals'](_0x23ecc0){return this['key']===_0x23ecc0['key'];}};h(sr,'DEFAULT',Object['freeze'](new sr())),h(sr,'NODEPTH',Object['freeze'](new sr(Ni,!(-0x1ed2+0x160*-0xb+0x51b*0x9)))),h(sr,'WRITEDEPTH',Object['freeze'](new sr(Ni,!(0xd7*0x2e+-0x41*-0x9+0x19*-0x1a3))));let Kt=sr;class $S{constructor(){h(this,'globalId',0x2b*-0x92+0x12*0x218+-0x2a2*0x5),h(this,'revision',0x26db+0x29*0x78+-0x3a13*0x1);}['equals'](_0x517b98){return this['globalId']===_0x517b98['globalId']&&this['revision']===_0x517b98['revision'];}['copy'](_0x2f1545){this['globalId']=_0x2f1545['globalId'],this['revision']=_0x2f1545['revision'];}['reset'](){this['globalId']=0x48f+0x17*0x61+-0x1*0xd46,this['revision']=0xfbd+0x204a+-0x1*0x3007;}}let gp=-0x5*-0x542+-0x2385+0x8b*0x11;class Lx{constructor(){gp++,this['version']=new $S(),this['version']['globalId']=gp;}['increment'](){this['version']['revision']++;}}class Rx{constructor(_0x3c4ea2){this['name']=_0x3c4ea2,this['value']=null,this['versionObj'+'ect']=new Lx();}['toJSON'](_0x474bca){}['setValue'](_0x497267){this['value']=_0x497267,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class Ox{constructor(_0x159475){this['name']=_0x159475,this['variables']=new Map();}['resolve'](_0x56423a){return this['variables']['has'](_0x56423a)||this['variables']['set'](_0x56423a,new Rx(_0x56423a)),this['variables']['get'](_0x56423a);}['removeValu'+'e'](_0x4668eb){for(const _0x5a9a2e in this['variables']){const _0x5220c7=this['variables'][_0x5a9a2e];_0x5220c7['value']===_0x4668eb&&(_0x5220c7['value']=null);}}}let Fx=0x1b*-0xd4+0x1d*-0x9f+0x3*0xd75;class xs{constructor(_0x523e72,_0x495a5e,_0x39d7f2,_0x15880c){h(this,'usage',ls),(M['assert'](arguments['length']<=0xb*-0xf1+0x3*-0x166+0xe91&&(!_0x15880c||typeof _0x15880c=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x15880c==null?void(0x3*0x9e9+0x6a1+-0x245c):_0x15880c['usage'])??ls,this['device']=_0x523e72,this['format']=_0x495a5e,this['numVertice'+'s']=_0x39d7f2,this['id']=Fx++,this['impl']=_0x523e72['createVert'+'exBufferIm'+'pl'](this,_0x495a5e,_0x15880c),this['numBytes']=_0x495a5e['verticesBy'+'teSize']?_0x495a5e['verticesBy'+'teSize']:_0x495a5e['size']*_0x39d7f2,this['adjustVram'+'SizeTracki'+'ng'](_0x523e72['_vram'],this['numBytes']));const _0x55c9c5=_0x15880c==null?void(0x67*-0x25+-0x23c8+0x73d*0x7):_0x15880c['data'];_0x55c9c5?this['setData'](_0x55c9c5):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x25286f=this['device'],_0x20f567=_0x25286f['buffers']['indexOf'](this);_0x20f567!==-(0x128c+0x13b8+-0x2643)&&_0x25286f['buffers']['splice'](_0x20f567,-0x4ee*-0x1+0x1f7b+-0x2*0x1234),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x25286f),this['adjustVram'+'SizeTracki'+'ng'](_0x25286f['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x1625f0,_0x286ddf){M['trace'](i0,this['id']+'\x20size:\x20'+_0x286ddf+'\x20vram.vb:\x20'+_0x1625f0['vb']+'\x20=>\x20'+(_0x1625f0['vb']+_0x286ddf)),_0x1625f0['vb']+=_0x286ddf;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x46f0cd){return _0x46f0cd['byteLength']!==this['numBytes']?(M['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x46f0cd['byteLength']),!(-0x96b+0xe*0xc5+-0x15a)):(this['storage']=_0x46f0cd,this['unlock'](),!(0x1cf7+0x1968+0x1c1*-0x1f));}}function ti(_0x224dc2){if(_0x224dc2==null)return 0x974*0x1+0x6dc+-0x48*0x3a;let _0xb28807=-0x1*0x353+0x4a3*-0x1+0x7f6;for(let _0x220cdb=0x1b6*-0x8+0x1184*-0x2+0x30b8,_0x4c77f1=_0x224dc2['length'];_0x220cdb<_0x4c77f1;_0x220cdb++)_0xb28807=(_0xb28807<<0x18b8+-0x59*0x45+-0x7*0x1a)-_0xb28807+_0x224dc2['charCodeAt'](_0x220cdb),_0xb28807|=0x23+-0x2c3*-0xe+-0x26cd;return _0xb28807;}function XS(_0x1a03f2){let _0x1462f7=-0x2e3441*-0x250+-0xc616e27e+0xdc5aa9f3;for(let _0x7fed30=0xb*0x2c7+-0x2256+-0x3*-0x143;_0x7fed30<_0x1a03f2['length'];_0x7fed30++)_0x1462f7^=_0x1a03f2[_0x7fed30],_0x1462f7*=0xfdd0f8+-0x2*0x578ad+0xd21f5;return _0x1462f7>>>-0x15df*0x1+0x175b+-0x17c;}const Nx=new am(),kx=[0xad1+0x632+0x5ab*-0x3,-0x14d3+-0x1d43+-0x48e*-0xb,-0x1033+-0x223*0xe+0x2e25,0x37d+0xdfd*0x2+-0x1f6b,-0x11bc+-0x983*-0x4+0x360*-0x6],Ux=new Ht();class zt{constructor(_0x2cbc0d,_0x4038ea,_0x5bd331){this['device']=_0x2cbc0d,this['_elements']=[],this['hasUv0']=!(0x1779*0x1+0x1ae8+-0x3260),this['hasUv1']=!(-0x61c+-0x1*-0x2351+-0x1c*0x10b),this['hasColor']=!(-0x33a+0x1db3+-0x3c8*0x7),this['hasTangent'+'s']=!(0x8c5*0x3+-0x7*-0x4cb+-0x3bdb),this['verticesBy'+'teSize']=0x215*-0x11+-0x1e2a+0x418f,this['vertexCoun'+'t']=_0x5bd331,this['interleave'+'d']=_0x5bd331===void(0xe4+0x148d*0x1+-0x1571),this['instancing']=!(-0x190c+-0x99*-0x11+-0xee4*-0x1),this['size']=_0x4038ea['reduce']((_0x424aad,_0x1f4f09)=>_0x424aad+Math['ceil'](_0x1f4f09['components']*po[_0x1f4f09['type']]/(-0x1b1*-0xb+0x1*-0x18b9+0x1*0x622))*(-0x1af5+-0xa5b*-0x2+0x643),-0x1*0x2111+-0xd2b+-0x21a*-0x16);let _0x182ce7=-0xa6*0x29+0x2b*-0x1a+0x1ef4,_0x3c3917;for(let _0x21a95f=-0x1df*0xb+0x75c*0x1+-0x5*-0x2a5,_0x200184=_0x4038ea['length'];_0x21a95f<_0x200184;_0x21a95f++){const _0x5bd521=_0x4038ea[_0x21a95f];_0x3c3917=_0x5bd521['components']*po[_0x5bd521['type']],M['assert'](zt['isElementV'+'alid'](_0x2cbc0d,_0x5bd521),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x5bd521['semantic']+'\x20:\x20'+yx[_0x5bd521['type']]+'\x20x\x20'+_0x5bd521['components']),_0x5bd331&&(_0x182ce7=Y['roundUp'](_0x182ce7,_0x3c3917),M['assert'](_0x3c3917%(0xe7b+-0x252b+-0x5ad*-0x4)===0x8*-0x19+0x181c+-0x1754,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x3c3917));const _0x26a348=_0x5bd521['asInt']??!(0xee*0x1+-0x35*-0x80+-0x3eb*0x7),_0x8a5bb4=_0x26a348?!(-0xaf*-0x37+-0x1*0x332+-0x2266):_0x5bd521['normalize']??!(0x185b+-0x19fa+0x1a0),_0x4842ec={'name':_0x5bd521['semantic'],'offset':_0x5bd331?_0x182ce7:_0x5bd521['hasOwnProp'+'erty']('offset')?_0x5bd521['offset']:_0x182ce7,'stride':_0x5bd331?_0x3c3917:_0x5bd521['hasOwnProp'+'erty']('stride')?_0x5bd521['stride']:this['size'],'dataType':_0x5bd521['type'],'numComponents':_0x5bd521['components'],'normalize':_0x8a5bb4,'size':_0x3c3917,'asInt':_0x26a348};this['_elements']['push'](_0x4842ec),_0x5bd331?_0x182ce7+=_0x3c3917*_0x5bd331:_0x182ce7+=Math['ceil'](_0x3c3917/(-0x18a+-0x15*-0xce+0x7ac*-0x2))*(0x7*-0x13f+0x121e+0x961*-0x1),_0x5bd521['semantic']===Yt?this['hasUv0']=!(0x8*0x394+-0x51f*-0x7+0x5*-0xce5):_0x5bd521['semantic']===da?this['hasUv1']=!(-0x774+-0x1*0x214d+0x28c1):_0x5bd521['semantic']===kt?this['hasColor']=!(-0x19f6+-0x20ab+0x3*0x138b):_0x5bd521['semantic']===ci&&(this['hasTangent'+'s']=!(-0x907*0x1+-0x1*-0xea5+-0x59e));}_0x5bd331&&(this['verticesBy'+'teSize']=_0x182ce7),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x306d97){return Ux['get'](_0x306d97,()=>new zt(_0x306d97,[{'semantic':ju,'components':0x4,'type':Be},{'semantic':Yu,'components':0x4,'type':Be},{'semantic':Ku,'components':0x4,'type':Be},{'semantic':_n,'components':0x4,'type':Be}]));}static['isElementV'+'alid'](_0x5378e2,_0x54fb56){const _0x594acb=_0x54fb56['components']*po[_0x54fb56['type']];return!(_0x5378e2['isWebGPU']&&!kx['includes'](_0x594acb));}['update'](){M['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x4004ea=[],_0x572fd9=[],_0x209bba=this['_elements']['length'];for(let _0x41a66a=0x3dd+-0x1f91+0x1bb4;_0x41a66a<_0x209bba;_0x41a66a++){const {name:_0x1a4386,dataType:_0x46bb51,numComponents:_0x32aa32,normalize:_0x2dc8eb,offset:_0x1ff8d7,stride:_0x5bf554,size:_0x530736,asInt:_0x169bfa}=this['_elements'][_0x41a66a],_0x4a5f62=_0x1a4386+_0x46bb51+_0x32aa32+_0x2dc8eb+_0x169bfa;_0x4004ea['push'](_0x4a5f62);const _0x2147aa=_0x4a5f62+_0x1ff8d7+_0x5bf554+_0x530736;_0x572fd9['push'](_0x2147aa);}_0x4004ea['sort']();const _0x508d49=_0x4004ea['join']();this['batchingHa'+'sh']=ti(_0x508d49),this['shaderProc'+'essingHash'+'String']=_0x508d49,this['renderingH'+'ashString']=_0x572fd9['join']('_'),this['renderingH'+'ash']=Nx['get'](this['renderingH'+'ashString']);}}const Bx=new am(),dc=class dc{constructor(_0x78d519={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0xff1*0x1+-0x127*-0xa+0x46b)),h(this,'_key'),(this['_func']=_0x78d519['func']??Ni,this['_ref']=_0x78d519['ref']??-0x1b9f+-0x1946+0x1*0x34e5,this['_readMask']=_0x78d519['readMask']??0xff6+0x1d50+-0x1*0x2c47,this['_writeMask']=_0x78d519['writeMask']??0x2d*0x1f+0x9b4+-0xe28,this['_fail']=_0x78d519['fail']??nn,this['_zfail']=_0x78d519['zfail']??nn,this['_zpass']=_0x78d519['zpass']??nn,this['_evalKey']());}set['func'](_0x1fcf77){this['_func']=_0x1fcf77,this['_dirty']=!(-0x5c1*-0x6+-0x132+-0x2154);}get['func'](){return this['_func'];}set['ref'](_0x285290){this['_ref']=_0x285290,this['_dirty']=!(-0x1bc9+0x866+0x1363);}get['ref'](){return this['_ref'];}set['fail'](_0x28a572){this['_fail']=_0x28a572,this['_dirty']=!(-0x529*-0x2+0x5b*0x59+-0x29f5);}get['fail'](){return this['_fail'];}set['zfail'](_0x55b1b2){this['_zfail']=_0x55b1b2,this['_dirty']=!(-0x1*-0x1546+0x1858*-0x1+-0x189*-0x2);}get['zfail'](){return this['_zfail'];}set['zpass'](_0xf59ea2){this['_zpass']=_0xf59ea2,this['_dirty']=!(0x15ff+0x1*0x19d+-0x179c);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x5c8f5b){this['_readMask']=_0x5c8f5b,this['_dirty']=!(0x22ef+0x1f4a+-0x1613*0x3);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x481cbd){this['_writeMask']=_0x481cbd,this['_dirty']=!(0x1c05*0x1+-0x21cd+0x5c8);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x388788,_ref:_0x497c6a,_fail:_0x1a7844,_zfail:_0x1c4725,_zpass:_0x160253,_readMask:_0x831ec0,_writeMask:_0x10699d}=this,_0x3e3c84=_0x388788+','+_0x497c6a+','+_0x1a7844+','+_0x1c4725+','+_0x160253+','+_0x831ec0+','+_0x10699d;this['_key']=Bx['get'](_0x3e3c84),this['_dirty']=!(0x72e*-0x5+-0x1fd1+0x1*0x43b8);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x3eae44){return this['_func']=_0x3eae44['_func'],this['_ref']=_0x3eae44['_ref'],this['_readMask']=_0x3eae44['_readMask'],this['_writeMask']=_0x3eae44['_writeMask'],this['_fail']=_0x3eae44['_fail'],this['_zfail']=_0x3eae44['_zfail'],this['_zpass']=_0x3eae44['_zpass'],this['_dirty']=_0x3eae44['_dirty'],this['_key']=_0x3eae44['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(dc,'DEFAULT',Object['freeze'](new dc()));let ai=dc;const wl=new Set(),fc=class fc extends pe{constructor(_0x5d28ed,_0x1e600e){var _0x45b090,_0x1e793c,_0xb0fbe1,_0x11d51d,_0x4fb120,_0x583d7d;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(0x2312*0x1+-0xaa2+0x3*-0x825)),h(this,'isWebGPU',!(-0x1aad+-0x12dc*0x1+0x2d8a)),h(this,'isWebGL2',!(0x1ab7*-0x1+-0xe61+-0x15*-0x1f5)),h(this,'isHdr',!(-0xc7*-0x4+-0x26ef*0x1+0x23d4)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',-0xb*-0x21a+0x19e4+-0x2d02),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',0xb5f+0x1075+-0x1bd3),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',-0x4*0x612+0x13af+0x49a),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(0x703+0x1ce6+-0x18*0x17f)),h(this,'supportsSt'+'orageTextu'+'reRead',!(-0xf24+-0x19de+-0x2903*-0x1)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x783+0x736+0x7*0xb),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x16e4+0xb*0x6f+-0x28*-0x74)),h(this,'supportsUn'+'iformBuffe'+'rs',!(0x14ee+-0x26c8*-0x1+0x3bb5*-0x1)),h(this,'supportsCl'+'ipDistance'+'s',!(-0x1*0x316+-0x3*0x199+0x7e2)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(0x139a+-0xd06+-0x693)),h(this,'textureFlo'+'atFilterab'+'le',!(-0x7ad*-0x1+0x1*0x5ae+0x6ad*-0x2)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new Ct()),h(this,'depthState',new Kt()),h(this,'stencilEna'+'bled',!(-0x331+-0x955*0x2+0x15dc)),h(this,'stencilFro'+'nt',new ai()),h(this,'stencilBac'+'k',new ai()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[-0x1ce5+0xa*-0x3ce+0x42f1*0x1,-0x1*0x29+0x5f6*-0x1+-0x1*-0x61f,-0x541*0x4+-0x10e5+0x25e9,0x21*0xf2+-0xa89+-0x14a8],'depth':0x1,'stencil':0x0,'flags':bo|Co}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(0x233*0x5+-0x12*-0x6f+-0x12cc)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x5d28ed,'setAttribu'+'te'in _0x5d28ed&&_0x5d28ed['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+ja),this['initOption'+'s']={..._0x1e600e},(_0x45b090=this['initOption'+'s'])['alpha']??(_0x45b090['alpha']=!(-0x10c2+0x1*-0x135a+0x241c)),(_0x1e793c=this['initOption'+'s'])['depth']??(_0x1e793c['depth']=!(0x2188+-0x3db+-0x1dad)),(_0xb0fbe1=this['initOption'+'s'])['stencil']??(_0xb0fbe1['stencil']=!(-0xcbb+0xf*-0x11+0xdba)),(_0x11d51d=this['initOption'+'s'])['antialias']??(_0x11d51d['antialias']=!(0x1*-0x13df+0xe09*-0x2+0x2ff1)),(_0x4fb120=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x4fb120['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x583d7d=this['initOption'+'s'])['displayFor'+'mat']??(_0x583d7d['displayFor'+'mat']=gx),this['_maxPixelR'+'atio']=Me['browser']?Math['min'](-0xb8e+0x1*-0x2575+0xc41*0x4,window['devicePixe'+'lRatio']):0x1dad+-0xdd4+-0xfd8,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=-0x2a2*0xe+-0xb*-0x84+0x1*0x1f30,this['_shaderSwi'+'tchesPerFr'+'ame']=0x1a3*-0xf+0x9e1+-0x3*-0x4e4,this['_primsPerF'+'rame']=[]);for(let _0x437c9c=Oc;_0x437c9c<=$r;_0x437c9c++)this['_primsPerF'+'rame'][_0x437c9c]=-0xa24*0x1+0x1e8b+-0x1467;this['_renderTar'+'getCreatio'+'nTime']=-0x1*0x7ab+-0x2034+0x27df*0x1,this['scope']=new Ox('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](0x645+-0x208c+-0x3c1*-0x7);}['postInit'](){const _0x3c1e15=new zt(this,[{'semantic':Pe,'components':0x2,'type':Be}]),_0x222049=new Float32Array([-(-0x14*-0x1e5+0x659+-0x13*0x254),-(0x454*-0x7+-0x1*0x1edb+0x3d28),0x1a50+0x1aba+-0x3509,-(-0x1f3*0x3+-0x2104+0x7c6*0x5),-(0xfbd+0x2ab+-0x1267),0x2f*-0x80+0xde9+-0x133*-0x8,-0xfc4*-0x2+0xc17+-0x2*0x15cf,0x13*0x17c+-0x1e88+0x255]);this['quadVertex'+'Buffer']=new xs(this,_0x3c1e15,0x2185+0x12*-0x1e6+0xab,{'data':_0x222049});}['initCapsDe'+'fines'](){const {capsDefines:_0x508b15}=this;_0x508b15['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x508b15['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x508b15['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x13974f,_0x391285,_0x565b7d;this['fire']('destroy'),(_0x13974f=this['quadVertex'+'Buffer'])==null||_0x13974f['destroy'](),this['quadVertex'+'Buffer']=null,(_0x391285=this['dynamicBuf'+'fers'])==null||_0x391285['destroy'](),this['dynamicBuf'+'fers']=null,(_0x565b7d=this['gpuProfile'+'r'])==null||_0x565b7d['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x58306b){this['fire']('destroy:sh'+'ader',_0x58306b);const _0x2b023d=this['shaders']['indexOf'](_0x58306b);_0x2b023d!==-(-0x5*-0x79c+-0xde7+0x609*-0x4)&&this['shaders']['splice'](_0x2b023d,-0xafc*-0x2+0x1*-0xad9+-0xb1e*0x1);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x191afd;this['contextLos'+'t']=!(0x2143*-0x1+0x1dbd*-0x1+-0x300*-0x15),this['backBuffer'+'Size']['set'](-(0x3*-0x304+0x2*-0x1334+0x2f75),-(-0x18e9+-0x1e51+0x373b));for(const _0x422ca4 of this['textures'])_0x422ca4['loseContex'+'t']();for(const _0x42d9a6 of this['buffers'])_0x42d9a6['loseContex'+'t']();for(const _0x445472 of this['targets'])_0x445472['loseContex'+'t']();(_0x191afd=this['gpuProfile'+'r'])==null||_0x191afd['loseContex'+'t']();}['restoreCon'+'text'](){var _0xcadd6a,_0x31e410;this['contextLos'+'t']=!(0x26b+0xae+-0x21*0x18),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x53b006 of this['buffers'])_0x53b006['unlock']();(_0x31e410=(_0xcadd6a=this['gpuProfile'+'r'])==null?void(0x21a1*0x1+-0x1ae4+0x19*-0x45):_0xcadd6a['restoreCon'+'text'])==null||_0x31e410['call'](_0xcadd6a);}['toJSON'](_0x455d81){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x3*0x179+-0xc76+0x80b),this['shaderAsyn'+'cCompile']=!(-0x8f6*0x1+-0x24b*0x1+0xb42),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new Ct(),this['depthState']=new Kt(),this['cullMode']=Jr,this['vx']=this['vy']=this['vw']=this['vh']=-0x5ac*0x6+-0x7*-0x43+0x2033*0x1,this['sx']=this['sy']=this['sw']=this['sh']=-0xe52+0x3a1*0x7+-0x1*0xb15,this['blendColor']=new ie(-0x15a6*-0x1+0xd1*0x29+-0x371f,0x3f3*0x5+-0x1b5a+0xb1*0xb,0x19d0+0x2*-0x286+-0xc*0x1bb,-0x172a*0x1+0x2*-0xd01+-0x419*-0xc);}['setStencil'+'State'](_0x549cc0,_0x220568){M['assert'](!(-0x2557+-0x1*-0x143+0x2415));}['setBlendSt'+'ate'](_0x492d72){M['assert'](!(-0xc52+-0x35*-0x98+-0x1325));}['setBlendCo'+'lor'](_0x4ce815,_0xd304ed,_0x243458,_0x500ace){M['assert'](!(0x1f57+0xa20+-0x2976));}['setDepthSt'+'ate'](_0x2c3453){M['assert'](!(0x1ee6+0x245*-0x5+-0x138c));}['setCullMod'+'e'](_0x439ab8){M['assert'](!(0xb*0x1a4+0x13a7+0x1*-0x25b2));}['setRenderT'+'arget'](_0xb898f4){this['renderTarg'+'et']=_0xb898f4;}['setVertexB'+'uffer'](_0x44e49a){_0x44e49a&&this['vertexBuff'+'ers']['push'](_0x44e49a);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=0x2*-0xbb+0x1f4d+-0x1dd7*0x1;}['getIndirec'+'tDrawSlot'](){return 0x193d+0xb48+-0x2485*0x1;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x4686d6){if(_0x4686d6['initialize'+'d'])return;const _0x471303=de();this['fire']('fbo:create',{'timestamp':_0x471303,'target':this}),_0x4686d6['init'](),this['targets']['add'](_0x4686d6),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x471303;}['draw'](_0x93cd75,_0x3bca76,_0x57966b,_0x18ef46,_0x834802=!(-0x1469+0xbc9+0x8a0),_0x48702f=!(0x228f+0x26c4+-0x1*0x4953)){M['assert'](!(0x4*0xd6+0x1e9*-0x2+0x7b*0x1));}['_isBrowser'+'Interface'](_0x54154c){return this['_isImageBr'+'owserInter'+'face'](_0x54154c)||this['_isImageCa'+'nvasInterf'+'ace'](_0x54154c)||this['_isImageVi'+'deoInterfa'+'ce'](_0x54154c);}['_isImageBr'+'owserInter'+'face'](_0x4bdd15){return typeof ImageBitmap<'u'&&_0x4bdd15 instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x4bdd15 instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x2c0c59){return typeof HTMLCanvasElement<'u'&&_0x2c0c59 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x2bc7f1){return typeof HTMLVideoElement<'u'&&_0x2bc7f1 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x3e05ca,_0x4912cd){const _0x1c871d=Math['min'](this['_maxPixelR'+'atio'],Me['browser']?window['devicePixe'+'lRatio']:0x652*0x3+0xc*-0x166+-0x1*0x22d),_0x3fc9e3=Math['floor'](_0x3e05ca*_0x1c871d),_0x42702f=Math['floor'](_0x4912cd*_0x1c871d);(_0x3fc9e3!==this['canvas']['width']||_0x42702f!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x3fc9e3,_0x42702f);}['setResolut'+'ion'](_0x30d361,_0x1877c8){this['canvas']['width']=_0x30d361,this['canvas']['height']=_0x1877c8,this['fire'](fc['EVENT_RESI'+'ZE'],_0x30d361,_0x1877c8);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Me['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x28c4c4=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x28c4c4['width'],this['clientRect']['height']=_0x28c4c4['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x4ad12a){M['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return M['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0x1fe2+0xd15+0x12ce);}set['maxPixelRa'+'tio'](_0x50b86f){this['_maxPixelR'+'atio']=_0x50b86f;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x1afc16){}['endRenderP'+'ass'](_0x103a4f){}['startCompu'+'tePass'](_0x622337){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=0x920*0x2+-0x50b+-0xd35,this['renderVers'+'ion']++,M['call'](()=>{if(ni['get'](o0)){const _0x5bbd1e=this['textures']['slice']();_0x5bbd1e['sort']((_0x18b041,_0xf87b3b)=>_0xf87b3b['gpuSize']-_0x18b041['gpuSize']),M['log']('Textures:\x20'+_0x5bbd1e['length']);let _0x1afda8=0x1e2*-0x1+-0x51d*-0x3+-0xd75;_0x5bbd1e['forEach']((_0x36e2a0,_0x59e9fb)=>{const _0x2bee65=_0x36e2a0['gpuSize'];_0x1afda8+=_0x2bee65,M['log'](_0x59e9fb+'.\x20'+_0x36e2a0['name']+'\x20'+_0x36e2a0['width']+'x'+_0x36e2a0['height']+'\x20VRAM:\x20'+(_0x2bee65/(0x10e3+-0x10d6+0x3f3)/(0xc1*-0xc+0x1*-0x3c7+0x10d3))['toFixed'](0xd*0x144+-0xbab+-0x4c7)+'\x20MB');}),M['log']('Total:\x20'+(_0x1afda8/(-0x1d8*-0x2+-0x2110+-0x2160*-0x1)/(0x12e2+-0x1*-0x2bd+0x15b*-0xd))['toFixed'](-0xfac*0x2+-0x1248+0x31a2)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x1779e5=>_0x1779e5['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x55a3c7,_0x41370c='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x37f6da=[pn,at,Bt],_0x2f5697=!(-0x1*0x17e+0x14b*0xe+-0x109c),_0x5ba11f=0x12fc+0xa3*0xa+-0x15*0x135){for(let _0x10e064=-0xd73+-0x2376+0x30e9*0x1;_0x10e064<_0x37f6da['length'];_0x10e064++){const _0x386445=_0x37f6da[_0x10e064];switch(_0x386445){case pn:{if(this['textureRG1'+'1B10Render'+'able'])return _0x386445;break;}case at:if(this['textureHal'+'fFloatRend'+'erable'])return _0x386445;break;case Bt:if(this['isWebGPU']&&_0x5ba11f>0x7d3*-0x1+0x1*0xe9e+-0x6ca)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x2f5697||this['textureFlo'+'atFilterab'+'le']))return _0x386445;break;}}}['validateAt'+'tributes'](_0x70acdd,_0x2768a9,_0x264438){M['call'](()=>{wl['clear'](),_0x2768a9==null||_0x2768a9['elements']['forEach'](_0x3d7f91=>wl['add'](De[_0x3d7f91['name']])),_0x264438==null||_0x264438['elements']['forEach'](_0x38c5d3=>wl['add'](De[_0x38c5d3['name']]));for(const [_0x5a681f,_0x3cde43]of _0x70acdd['attributes'])wl['has'](_0x5a681f)||M['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x3cde43+(']\x20at\x20locat'+'ion\x20')+_0x5a681f+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x70acdd,'vb0Format':_0x2768a9,'vb1Format':_0x264438});});}};h(fc,'EVENT_RESI'+'ZE','resizecanv'+'as');let zh=fc,zx=-0x24d7+-0x18b1+0x3d88;class vt{constructor(_0x1002e9={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x1cbbfd,_0x32c5f4,_0x271f31,_0x5b98f9,_0x59f03e,_0x4f9c0a;M['assert'](!(_0x1002e9 instanceof zh),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=zx++;const _0x4c6473=((_0x1cbbfd=_0x1002e9['colorBuffe'+'r'])==null?void(-0x71b*0x2+0x1e7d+-0x3*0x56d):_0x1cbbfd['device'])??((_0x32c5f4=_0x1002e9['colorBuffe'+'rs'])==null?void(0x2f1*0x9+0x2174+0x1*-0x3bed):_0x32c5f4[-0x1*0x710+-0x29*0x7+0x82f]['device'])??((_0x271f31=_0x1002e9['depthBuffe'+'r'])==null?void(-0xa90+-0x19e9+0x2479):_0x271f31['device'])??_0x1002e9['graphicsDe'+'vice'];M['assert'](_0x4c6473,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x4c6473;const {maxSamples:_0x2f9abe}=this['_device'];if(this['_samples']=Math['min'](_0x1002e9['samples']??0x57d*0x5+-0x99a*0x1+-0x2f9*0x6,_0x2f9abe),_0x4c6473['isWebGPU']&&(this['_samples']=this['_samples']>-0x7*0x134+0x161d+-0x1*0xdb0?_0x2f9abe:-0x7c0+0x16e0+-0x7*0x229),this['_colorBuff'+'er']=_0x1002e9['colorBuffe'+'r'],_0x1002e9['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x1002e9['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x1002e9['depthBuffe'+'r'],this['_face']=_0x1002e9['face']??0x78b*-0x1+-0x403*-0x9+-0x1c90,this['_depthBuff'+'er']){const _0x278d46=this['_depthBuff'+'er']['_format'];_0x278d46===ki||_0x278d46===an?(this['_depth']=!(0x9*-0xf4+0xcc1+0x42d*-0x1),this['_stencil']=!(-0x2b*-0x8b+-0x19d0+0x278*0x1)):_0x278d46===Cc?(this['_depth']=!(0x443*-0x8+0x262d+0x5f*-0xb),this['_stencil']=!(0x20b+-0xf9*0x12+-0x25*-0x6b)):_0x278d46===Hi&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0x43f*-0x5+0x980*0x3+0x1*-0x31ba?(this['_depth']=!(-0x23*-0xfd+-0xaac+-0x1*0x17eb),this['_stencil']=!(0x1*0x18b6+-0x11*-0x10f+0x4*-0xaad)):(M['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(0x3c7*0x1+-0x7c2+0x3fc),this['_stencil']=!(-0x1*-0x11ce+-0x24db+-0x32d*-0x6));}else this['_depth']=_0x1002e9['depth']??!(-0x35*0x1d+0x904*0x1+-0x303),this['_stencil']=_0x1002e9['stencil']??!(0x1c1d+0x127e+-0x2e9a);_0x1002e9['colorBuffe'+'rs']&&(M['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x1002e9['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x1002e9['colorBuffe'+'rs'][-0x2*-0x691+-0x641*0x6+0x1864])),this['autoResolv'+'e']=_0x1002e9['autoResolv'+'e']??!(0x14a3+-0x1*0x3b3+-0x43c*0x4),this['name']=_0x1002e9['name'],this['name']||(this['name']=(_0x5b98f9=this['_colorBuff'+'er'])==null?void(0x1cac+0x92b+0x3*-0xc9d):_0x5b98f9['name']),this['name']||(this['name']=(_0x59f03e=this['_depthBuff'+'er'])==null?void(0x10df+-0x648+0x1*-0xa97):_0x59f03e['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x1002e9['flipY']??!(-0xb*-0x61+0x27*-0xde+0x1da8),this['_mipLevel']=_0x1002e9['mipLevel']??-0x47f*0x2+-0x26cc+0x2fca,this['_mipLevel']>0x4*0x412+-0x2ba*-0x3+0x1*-0x1876&&this['_depth']&&(M['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x1002e9}),this['_mipLevel']=-0xb*0x185+0x1fb0+-0x1*0xef9),this['_mipmaps']=_0x1002e9['mipLevel']===void(-0x2f6+-0x1*-0x1a74+-0x177e),this['validateMr'+'t'](),this['impl']=_0x4c6473['createRend'+'erTargetIm'+'pl'](this),M['trace'](Wm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x4f9c0a=this['_colorBuff'+'ers'])!=null&&_0x4f9c0a['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){M['trace'](Wm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0xf8beb1=this['_device'];_0xf8beb1&&(_0xf8beb1['targets']['delete'](this),_0xf8beb1['renderTarg'+'et']===this&&_0xf8beb1['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x29a9b3=this['_device'];_0x29a9b3&&this['impl']['destroy'](_0x29a9b3);}['destroyTex'+'tureBuffer'+'s'](){var _0x45c8c0,_0x4aa578;(_0x45c8c0=this['_depthBuff'+'er'])==null||_0x45c8c0['destroy'](),this['_depthBuff'+'er']=null,(_0x4aa578=this['_colorBuff'+'ers'])==null||_0x4aa578['forEach'](_0x2d0017=>{_0x2d0017['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x377520,_0x2b9a48){var _0x4e6eb3,_0x35ac9f;if(this['width']!==_0x377520||this['height']!==_0x2b9a48){if(this['mipLevel']>-0x1c83*0x1+-0x243d+0x40*0x103){M['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x4cd4dc=this['_device'];this['destroyFra'+'meBuffers'](),_0x4cd4dc['renderTarg'+'et']===this&&_0x4cd4dc['setRenderT'+'arget'](null),(_0x4e6eb3=this['_depthBuff'+'er'])==null||_0x4e6eb3['resize'](_0x377520,_0x2b9a48),(_0x35ac9f=this['_colorBuff'+'ers'])==null||_0x35ac9f['forEach'](_0x381870=>{_0x381870['resize'](_0x377520,_0x2b9a48);}),this['validateMr'+'t'](),this['impl']=_0x4cd4dc['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){M['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x47a5a0,height:_0x59eda3,cubemap:_0x41d785,volume:_0x1b6117}=this['_colorBuff'+'ers'][0x1c5e+-0x36f*-0x1+0x1fcd*-0x1];for(let _0x44bf8b=0x31*-0x1+0x9b2+-0x980;_0x44bf8b<this['_colorBuff'+'ers']['length'];_0x44bf8b++){const _0x5e4c05=this['_colorBuff'+'ers'][_0x44bf8b];M['assert'](_0x5e4c05['width']===_0x47a5a0,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),M['assert'](_0x5e4c05['height']===_0x59eda3,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),M['assert'](_0x5e4c05['cubemap']===_0x41d785,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),M['assert'](_0x5e4c05['volume']===_0x1b6117,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x5eb6b2=!(0x1*0xc95+0x409+-0x109e),_0x666bba=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>0x200*0x10+-0x160a+0x9f5*-0x1&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x5eb6b2?'[color]':'')+':'+(_0x666bba?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x5eb6b2,_0x666bba),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x3e37fb,_0x3f78bf,_0x4d7a1f){if(!this['_device']){if(_0x3e37fb['_device'])this['_device']=_0x3e37fb['_device'];else return M['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(-0x248a+0x10cf*-0x1+-0x2*-0x1aad);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x3e37fb['name']+'->'+this['name']);const _0x32e1af=this['_device']['copyRender'+'Target'](_0x3e37fb,this,_0x3f78bf,_0x4d7a1f);return Q['popGpuMark'+'er'](this['_device']),_0x32e1af;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x151786){var _0x1380d2;return(_0x1380d2=this['_colorBuff'+'ers'])==null?void(-0x116*0xd+0x53*-0x6b+0x30cf):_0x1380d2[_0x151786];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x12fe2d,_0xa7a7a3;let _0x713cfa=((_0x12fe2d=this['_colorBuff'+'er'])==null?void(0x4*0x581+0x23ea*0x1+0x5cb*-0xa):_0x12fe2d['width'])||((_0xa7a7a3=this['_depthBuff'+'er'])==null?void(-0x12d5+0x1753+-0x2e*0x19):_0xa7a7a3['width'])||this['_device']['width'];return this['_mipLevel']>0xd*-0x23b+-0x1*-0x1ac9+0x236&&(_0x713cfa=Ui['calcLevelD'+'imension'](_0x713cfa,this['_mipLevel'])),_0x713cfa;}get['height'](){var _0x42aecf,_0x36100;let _0x470a57=((_0x42aecf=this['_colorBuff'+'er'])==null?void(0x1*0x2536+-0x722*0x1+-0x1e14):_0x42aecf['height'])||((_0x36100=this['_depthBuff'+'er'])==null?void(0x39*0x35+-0x2507+0xc9d*0x2):_0x36100['height'])||this['_device']['height'];return this['_mipLevel']>-0x7*0x28b+0x1c7d+-0xab0&&(_0x470a57=Ui['calcLevelD'+'imension'](_0x470a57,this['_mipLevel'])),_0x470a57;}['isColorBuf'+'ferSrgb'](_0x1f5897=-0x2b3*-0x1+-0x172d+0x147a*0x1){if(this['device']['backBuffer']===this)return Rh(this['device']['backBuffer'+'Format']);const _0x48253b=this['getColorBu'+'ffer'](_0x1f5897);return _0x48253b?Rh(_0x48253b['format']):!(0x7*0x91+0x14a+-0x40*0x15);}}const Vx={'equals'(_0x12ffe9,_0x2ade76){if(_0x12ffe9['length']!==_0x2ade76['length'])return!(-0x1de7+0x2*-0xf1a+0x3c1c*0x1);for(let _0x13b6d0=-0xe*0x2a9+0x3*-0x173+0x2997;_0x13b6d0<_0x12ffe9['length'];_0x13b6d0++)if(_0x12ffe9[_0x13b6d0]!==_0x2ade76[_0x13b6d0])return!(0x86*0x8+0x1afd+-0x1f2c);return!(0x1186+-0xf*-0x1e+-0x1348);}};class jc{constructor(){h(this,'_refCount',0x9*0x49+-0x1747+0x1*0x14b6);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class Gx extends jc{constructor(_0x274afa){super(),h(this,'object'),(this['object']=_0x274afa,this['incRefCoun'+'t']());}}class Hx{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x5c6840=>{var _0x4cae5d;(_0x4cae5d=_0x5c6840['object'])==null||_0x4cae5d['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x127469){const _0x237507=this['cache']['get'](_0x127469);return _0x237507?(_0x237507['incRefCoun'+'t'](),_0x237507['object']):null;}['set'](_0xee4cc,_0x1b70f1){M['assert'](!this['cache']['has'](_0xee4cc),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0xee4cc,'object':_0x1b70f1}),this['cache']['set'](_0xee4cc,new Gx(_0x1b70f1));}['release'](_0x2fd516){var _0x5de9e3;const _0x40722f=this['cache']['get'](_0x2fd516);_0x40722f?(_0x40722f['decRefCoun'+'t'](),_0x40722f['refCount']===-0x10*0xc+-0x2*-0x3fe+-0x73c*0x1&&(this['cache']['delete'](_0x2fd516),(_0x5de9e3=_0x40722f['object'])==null||_0x5de9e3['destroy']())):M['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x2fd516});}}class Wx extends Hx{['loseContex'+'t'](_0x11e895){this['clear']();}}const $x=new Ht(),ad=_0x3ccd1c=>$x['get'](_0x3ccd1c,()=>new Wx()),Tt=[];Tt[Us]=-0x1453+-0x24fc+0x3950,Tt[ia]=0x1896*-0x1+0x54b*-0x3+0x2879,Tt[rs]=0xf*0x14+0x27f+-0x3a8,Tt[gn]=0x1ec6+0x83e*0x1+-0x2700,Tt[sa]=-0x140c+0x2546+-0x1139,Tt[qr]=0x1054+0x2*-0x1177+0x129c,Tt[jr]=-0x52f*-0x1+0x773*-0x2+-0x1*-0x9ba,Tt[Yr]=-0x9d5+0x21db+0x2*-0xc01,Tt[on]=0x1504+-0x163*0xe+0x199*-0x1,Tt[Lo]=0x6ab+-0xd0d+0x664,Tt[Ro]=-0x2*0x41b+-0x58d*0x1+0xdc6,Tt[Oo]=0x2*-0x7dc+0x1186*0x1+-0x1ca,Tt[kh]=0x1d91+0x1*0x132d+-0x30b6,Tt[Sn]=-0x1a4b*-0x1+-0x4b5+-0x158a,Tt[Js]=0x2a*0x8c+0x2cb+0x1*-0x19b3,Tt[yn]=-0x9d1+0x434+0x59e,Tt[vn]=-0x1*0x25ab+-0x18b4+0x14cb*0x3,Tt[xn]=0x1*-0x1393+-0x68b+-0x1a21*-0x1,Tt[Tn]=-0x23cb+-0xbdb+0x2faa;class ct{constructor(_0x5edcce,_0x580516,_0x5b98d4=-0xcb1+0x1cdb+-0x102a){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x5edcce,this['name']=_0x5b98d4?_0x5edcce+'[0]':_0x5edcce,this['type']=_0x580516,this['numCompone'+'nts']=Tt[_0x580516],M['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x580516+'\x20used\x20for\x20'+_0x5edcce),this['updateType']=_0x580516,_0x5b98d4>0x1*0x1529+0x190a+-0x2e33)switch(_0x580516){case Us:this['updateType']=Uc;break;case sa:this['updateType']=wn;break;case yn:this['updateType']=Vc;break;case on:this['updateType']=Gc;break;case ia:this['updateType']=Bc;break;case qr:this['updateType']=En;break;case vn:this['updateType']=Hc;break;case Lo:this['updateType']=Wc;break;case rs:this['updateType']=zc;break;case jr:this['updateType']=An;break;case xn:this['updateType']=$c;break;case Ro:this['updateType']=Xc;break;case gn:this['updateType']=Qu;break;case Yr:this['updateType']=Uh;break;case Tn:this['updateType']=Ju;break;case Oo:this['updateType']=em;break;case Js:this['updateType']=IS;break;default:M['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+DS[_0x580516]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x5edcce+'\x27.'),M['call'](()=>{this['invalid']=!(-0xa4*0x1+0x2236+-0x2192);});break;}this['count']=_0x5b98d4,M['assert'](!isNaN(_0x5b98d4),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x5edcce+'['+_0x5b98d4+']'),M['call'](()=>{isNaN(_0x5b98d4)&&(this['invalid']=!(-0x7a3+-0x632*0x1+-0xdd5*-0x1));});let _0x2cbfbe=this['numCompone'+'nts'];_0x5b98d4&&(_0x2cbfbe=Y['roundUp'](_0x2cbfbe,-0x11a7+-0x2de*-0x5+0x355)),this['byteSize']=_0x2cbfbe*(-0x24a9+-0x5fb*-0x3+0x12bc),_0x5b98d4&&(this['byteSize']*=_0x5b98d4),M['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x580516+'\x20used\x20for\x20'+_0x5edcce);}get['isArrayTyp'+'e'](){return this['count']>0x2a4*0x8+-0x383+-0x119d;}['calculateO'+'ffset'](_0x4c5abf){let _0x384593=this['byteSize']<=0x12c3+0xfda+-0x2295*0x1?this['byteSize']:-0x78d*-0x3+0x1*-0x780+-0xf17;this['count']&&(_0x384593=0xdf+-0xa52+0x1*0x983),_0x4c5abf=Y['roundUp'](_0x4c5abf,_0x384593),this['offset']=_0x4c5abf/(0x1*-0x1ab9+0xd*0x13f+0x26*0x47);}}class qS{constructor(_0x310641,_0x401b12){h(this,'byteSize',-0xdb0+0x3c8+0x8*0x13d),h(this,'map',new Map()),(this['scope']=_0x310641['scope'],this['uniforms']=_0x401b12);let _0x370028=0x4*-0x293+-0x4*0x566+0x1fe4;for(let _0x504c8c=-0x4*-0x37+0x1*0x205+-0x2e1;_0x504c8c<_0x401b12['length'];_0x504c8c++){const _0x2a81a0=_0x401b12[_0x504c8c];_0x2a81a0['calculateO'+'ffset'](_0x370028),_0x370028=_0x2a81a0['offset']*(-0x97d+-0x4*0x30e+0x15b9*0x1)+_0x2a81a0['byteSize'],_0x2a81a0['scopeId']=this['scope']['resolve'](_0x2a81a0['name']),this['map']['set'](_0x2a81a0['name'],_0x2a81a0);}this['byteSize']=Y['roundUp'](_0x370028,-0x143*-0xb+0x3+-0x3*0x49c);}['get'](_0x34a190){return this['map']['get'](_0x34a190);}}const gr='Preprocess'+'or',bs=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,nd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,Sp=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,od=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,ld=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,hd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,yp=/\{?[\w-]+\}?/,Xx=/(!|\s)?defined\(([\w-]+)\)/,qx=/!?defined\s*\([^)]*\)/g,jx=/!?defined\s*$/,Yx=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,Kx=/[+\-]/g,cd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,Zx=/\{i\}/g,vp=/(pcFragColor[1-8])\b/g,Mt=class Mt{static['run'](_0x23550f,_0x23753e=new Map(),_0x4fd5dc={}){Mt['sourceName']=_0x4fd5dc['sourceName'],_0x23550f=this['stripComme'+'nts'](_0x23550f),_0x23550f=_0x23550f['split'](/\r?\n/)['map'](_0x1525a8=>_0x1525a8['trimEnd']())['join']('\x0a');const _0x325fa7=new Map(),_0x4c2c62=new Map();if(_0x23550f=this['_preproces'+'s'](_0x23550f,_0x325fa7,_0x4c2c62,_0x23753e,_0x4fd5dc['stripDefin'+'es']),_0x23550f===null)return null;const _0xeef205=new Map();return _0x325fa7['forEach']((_0x24d70b,_0x2f50a8)=>{Number['isInteger'](parseFloat(_0x24d70b))&&!_0x24d70b['includes']('.')&&_0xeef205['set'](_0x2f50a8,_0x24d70b);}),_0x23550f=this['stripComme'+'nts'](_0x23550f),_0x23550f=this['stripUnuse'+'dColorAtta'+'chments'](_0x23550f,_0x4fd5dc),_0x23550f=this['RemoveEmpt'+'yLines'](_0x23550f),_0x23550f=this['processArr'+'aySize'](_0x23550f,_0xeef205),_0x23550f=this['injectDefi'+'nes'](_0x23550f,_0x4c2c62),_0x23550f;}static['stripUnuse'+'dColorAtta'+'chments'](_0x377abd,_0x531de7){if(_0x531de7['stripUnuse'+'dColorAtta'+'chments']){const _0xdfc4a2=new Map(),_0x16c3dd=_0x377abd['match'](vp);if(_0x16c3dd==null||_0x16c3dd['forEach'](_0x10c531=>{const _0x1c08d5=parseInt(_0x10c531['charAt'](_0x10c531['length']-(0x6c*-0x5c+0x7*0x137+0x1e5*0x10)),0x2417+-0x5a6*0x1+-0x1e67);_0xdfc4a2['set'](_0x1c08d5,(_0xdfc4a2['get'](_0x1c08d5)??-0xb38+-0x2c4+0xdfc)+(-0x172c+0x2*-0x12c2+-0x3cb1*-0x1));}),Array['from'](_0xdfc4a2['values']())['some'](_0x571a0d=>_0x571a0d===0x813+0x530+0x1*-0xd42)){const _0x9fe194=_0x377abd['split']('\x0a'),_0x27fb16=[];for(let _0x1fbe1c=-0x1*-0x26ce+-0x1*0xf57+-0x1*0x1777;_0x1fbe1c<_0x9fe194['length'];_0x1fbe1c++){const _0x4e4249=_0x9fe194[_0x1fbe1c]['match'](vp);if(_0x4e4249){const _0x3535b8=parseInt(_0x4e4249[-0x12c+-0x21bd*-0x1+-0x2091]['charAt'](_0x4e4249[0x2073+-0x1c9*-0x3+-0x25ce]['length']-(-0x840+-0xa8*-0x35+-0x1a87)),-0x3d9*0x1+0xf27*0x2+-0x1*0x1a6b);if(_0x3535b8>0x43*0x15+-0x2f*-0xa1+-0x230e&&_0xdfc4a2['get'](_0x3535b8)===-0x1020+-0x5e*0x62+0x341d)continue;}_0x27fb16['push'](_0x9fe194[_0x1fbe1c]);}_0x377abd=_0x27fb16['join']('\x0a');}}return _0x377abd;}static['stripComme'+'nts'](_0x5f112f){return _0x5f112f['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x2e7ff8,_0x1d2bd0){return _0x2e7ff8!==null&&_0x1d2bd0['forEach']((_0x50d321,_0x50ed57)=>{_0x2e7ff8=_0x2e7ff8['replace'](new RegExp('\x5c['+_0x50ed57+'\x5c]','g'),'['+_0x50d321+']');}),_0x2e7ff8;}static['injectDefi'+'nes'](_0x421311,_0x131a3d){if(_0x421311!==null&&_0x131a3d['size']>-0x26d3+-0x2476+0x4b49){const _0x11004c=_0x421311['split']('\x0a');_0x131a3d['forEach']((_0x2cd010,_0x1720a7)=>{const _0x3f5cf2=new RegExp(_0x1720a7,'g');for(let _0x1f5e30=0xfb*-0x17+0x39f*-0x1+-0x1a2c*-0x1;_0x1f5e30<_0x11004c['length'];_0x1f5e30++)_0x11004c[_0x1f5e30]['includes']('#')||(_0x11004c[_0x1f5e30]=_0x11004c[_0x1f5e30]['replace'](_0x3f5cf2,_0x2cd010));}),_0x421311=_0x11004c['join']('\x0a');}return _0x421311;}static['RemoveEmpt'+'yLines'](_0x36ee5d){return _0x36ee5d!==null&&(_0x36ee5d=_0x36ee5d['split'](/\r?\n/)['map'](_0x24b9fe=>_0x24b9fe['trim']()===''?'':_0x24b9fe)['join']('\x0a'),_0x36ee5d=_0x36ee5d['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x36ee5d;}static['_preproces'+'s'](_0x44fc89,_0x296b1d=new Map(),_0x25ff32,_0x41bcf5,_0x1c2b58){var _0x56ef53;const _0x2e5fa9=_0x44fc89,_0x135338=[];let _0x105c91=!(-0x1a83+-0x16c2+0x3146),_0x3da18e;for(;(_0x3da18e=bs['exec'](_0x44fc89))!==null&&!_0x105c91;){const _0x27e40f=_0x3da18e[-0x1851+-0x1*-0x2588+0x59*-0x26];switch(_0x27e40f){case'define':{nd['lastIndex']=_0x3da18e['index'];const _0x20d09a=nd['exec'](_0x44fc89);M['assert'](_0x20d09a,'Invalid\x20['+_0x27e40f+']:\x20'+_0x44fc89['substring'](_0x3da18e['index'],_0x3da18e['index']+(-0x19b9+0x175c+-0xeb*-0x3))+'...'),_0x105c91||(_0x105c91=_0x20d09a===null);const _0x420add=_0x20d09a[0x9e2+0x132f+-0x1d10];yp['lastIndex']=_0x20d09a['index'];const _0x1175f6=yp['exec'](_0x420add)[0x738+0x4ed*-0x7+0x1b43];let _0x43fae4=_0x420add['substring'](_0x1175f6['length'])['trim']();_0x43fae4===''&&(_0x43fae4='true');const _0x437c10=Mt['_keep'](_0x135338);let _0x2885af=_0x1c2b58;if(_0x437c10){const _0x57b74=_0x1175f6['startsWith']('{')&&_0x1175f6['endsWith']('}');_0x57b74&&(_0x2885af=!(-0x7bb*-0x1+0x9*-0xaa+-0x1c1)),_0x57b74?_0x25ff32['set'](_0x1175f6,_0x43fae4):_0x296b1d['set'](_0x1175f6,_0x43fae4),_0x2885af&&(_0x44fc89=_0x44fc89['substring'](-0x1*0x394+-0x11*0x101+0x14a5,_0x20d09a['index']-(0x2*0x2db+0xc3d+-0x8f9*0x2))+_0x44fc89['substring'](nd['lastIndex']),bs['lastIndex']=_0x20d09a['index']-(0x1892+-0x3*0x4bb+-0xa60));}M['trace'](gr,_0x27e40f+':\x20['+_0x1175f6+']\x20'+_0x43fae4+'\x20'+(_0x437c10?'':'IGNORED')),_0x2885af||(bs['lastIndex']=_0x20d09a['index']+_0x20d09a[0x2361+0x23b6+0x4717*-0x1]['length']);break;}case'undef':{od['lastIndex']=_0x3da18e['index'];const _0xa3472e=od['exec'](_0x44fc89),_0x7ec882=_0xa3472e[-0x1*0xf9a+0xf4*0x1b+-0xa21]['trim'](),_0xead7ea=Mt['_keep'](_0x135338);_0xead7ea&&(_0x296b1d['delete'](_0x7ec882),_0x1c2b58&&(_0x44fc89=_0x44fc89['substring'](-0x14b9+0xb7b*0x1+-0x1a*-0x5b,_0xa3472e['index']-(0x139f*-0x1+0x4*0x20+-0x33*-0x60))+_0x44fc89['substring'](od['lastIndex']),bs['lastIndex']=_0xa3472e['index']-(-0x2*0x36e+-0xcff+-0x4*-0x4f7))),M['trace'](gr,_0x27e40f+':\x20['+_0x7ec882+']\x20'+(_0xead7ea?'':'IGNORED')),_0x1c2b58||(bs['lastIndex']=_0xa3472e['index']+_0xa3472e[-0x1a39+0x18f5+-0x51*-0x4]['length']);break;}case'extension':{Sp['lastIndex']=_0x3da18e['index'];const _0x2d2b34=Sp['exec'](_0x44fc89);if(M['assert'](_0x2d2b34,'Invalid\x20['+_0x27e40f+']:\x20'+_0x44fc89['substring'](_0x3da18e['index'],_0x3da18e['index']+(-0x2*0xdbd+0xb*0x113+0x100d))+'...'),_0x105c91||(_0x105c91=_0x2d2b34===null),_0x2d2b34){const _0x50794a=_0x2d2b34[0x3*-0x221+0x2*-0xd+0x67e],_0x6820b3=Mt['_keep'](_0x135338);_0x6820b3&&_0x296b1d['set'](_0x50794a,'true'),M['trace'](gr,_0x27e40f+':\x20['+_0x50794a+']\x20'+(_0x6820b3?'':'IGNORED'));}bs['lastIndex']=_0x2d2b34['index']+_0x2d2b34[-0x10de+0x1160*-0x1+-0xb6a*-0x3]['length'];break;}case'ifdef':case'ifndef':case'if':{ld['lastIndex']=_0x3da18e['index'];const _0x12ce96=ld['exec'](_0x44fc89),_0x35eedc=_0x12ce96[-0x472+-0x97*0x2+0x5a2],_0x2e8737=Mt['evaluate'](_0x35eedc,_0x296b1d);_0x105c91||(_0x105c91=_0x2e8737['error']);let _0x327772=_0x2e8737['result'];_0x27e40f==='ifndef'&&(_0x327772=!_0x327772),_0x135338['push']({'anyKeep':_0x327772,'keep':_0x327772,'start':_0x3da18e['index'],'end':ld['lastIndex']}),M['trace'](gr,_0x27e40f+':\x20['+_0x35eedc+']\x20=>\x20'+_0x327772),bs['lastIndex']=_0x12ce96['index']+_0x12ce96[-0x248c*0x1+0x62*0x31+0x11ca]['length'];break;}case'endif':case'else':case'elif':{hd['lastIndex']=_0x3da18e['index'];const _0x5016fc=hd['exec'](_0x44fc89),_0x3236e2=_0x135338['pop']();if(!_0x3236e2){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x5016fc[-0x1373*0x2+-0x6ec+0x2dd3]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Mt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x44fc89['substring'](_0x3da18e['index'],_0x3da18e['index']+(-0x7*0x506+0x1a1+-0xc1*-0x2d))+'...',{'source':_0x2e5fa9}),_0x105c91=!(-0xbbc+-0x1*0x2233+-0x1*-0x2def);continue;}const _0x576c62=_0x3236e2['keep']?_0x44fc89['substring'](_0x3236e2['end'],_0x3da18e['index']):'';M['trace'](gr,_0x27e40f+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x576c62!=='')),_0x44fc89=_0x44fc89['substring'](0xf25+0x2*-0x127d+0x15d5,_0x3236e2['start'])+_0x576c62+_0x44fc89['substring'](hd['lastIndex']),bs['lastIndex']=_0x3236e2['start']+_0x576c62['length'];const _0x11876d=_0x5016fc[-0x19de+0x3*-0x103+0x1ce8];if(_0x11876d==='else'||_0x11876d==='elif'){let _0x4afacd=!(-0x83*-0x4+0x3d*-0x67+0x1680);if(!_0x3236e2['anyKeep']){if(_0x11876d==='else')_0x4afacd=!_0x3236e2['keep'];else{const _0x9ffef7=Mt['evaluate'](_0x5016fc[0x49f+-0x17c4+0x1327],_0x296b1d);_0x4afacd=_0x9ffef7['result'],_0x105c91||(_0x105c91=_0x9ffef7['error']);}}_0x135338['push']({'anyKeep':_0x3236e2['anyKeep']||_0x4afacd,'keep':_0x4afacd,'start':bs['lastIndex'],'end':bs['lastIndex']}),M['trace'](gr,_0x27e40f+':\x20['+_0x5016fc[0x2*0x1363+0xc8a+0x88d*-0x6]+']\x20=>\x20'+_0x4afacd);}break;}case'include':{cd['lastIndex']=_0x3da18e['index'];const _0xcd1576=cd['exec'](_0x44fc89);if(_0x105c91||(_0x105c91=_0xcd1576===null),!_0xcd1576){M['assert'](_0xcd1576,'Invalid\x20['+_0x27e40f+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Mt['sourceName']+':\x0a'+_0x44fc89['substring'](_0x3da18e['index'],_0x3da18e['index']+(0x747+-0x8*-0x269+-0x7*0x3bd))+'...'),_0x105c91=!(0x19c*0x16+-0x6d7+-0x1c91);continue;}const _0x5fceb0=_0xcd1576[-0x1*-0x6d3+0x20b3*0x1+-0x1*0x2785]['trim'](),_0x1dbb6b=(_0x56ef53=_0xcd1576[0x207c+0x903*0x3+0x37*-0x115])==null?void(0x1cb5*-0x1+-0x2*-0x69b+0x1*0xf7f):_0x56ef53['trim'](),_0x133844=Mt['_keep'](_0x135338);if(_0x133844){let _0x42f6dd=_0x41bcf5==null?void(0x3a2*0x5+-0x2*-0x1f3+-0x1610):_0x41bcf5['get'](_0x5fceb0);if(_0x42f6dd!==void(0x878+-0x2*0x794+0x6b0)){if(_0x42f6dd=this['stripComme'+'nts'](_0x42f6dd),_0x1dbb6b){const _0x16e9ea=_0x296b1d['get'](_0x1dbb6b),_0x203af5=parseFloat(_0x16e9ea);if(Number['isInteger'](_0x203af5)){let _0x3f1366='';for(let _0x1a77f5=0x153b+0x1*0xc8f+-0x5*0x6c2;_0x1a77f5<_0x203af5;_0x1a77f5++)_0x3f1366+=_0x42f6dd['replace'](Zx,String(_0x1a77f5));_0x42f6dd=_0x3f1366;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x1dbb6b+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Mt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x44fc89['substring'](_0x3da18e['index'],_0x3da18e['index']+(-0x2c1+-0x1*0xba0+0xec5))+'...',{'originalSource':_0x2e5fa9,'source':_0x44fc89}),_0x105c91=!(0x142*-0x19+0xc*-0x2b+-0x2*-0x10bb);}_0x44fc89=_0x44fc89['substring'](-0x24a7+-0x14fb*-0x1+0x22*0x76,_0xcd1576['index']-(-0x14*0x59+-0x5c7+0xa*0x146))+_0x42f6dd+_0x44fc89['substring'](cd['lastIndex']),bs['lastIndex']=_0xcd1576['index']-(-0x661+-0x699*0x1+0xcfb);}else{console['error']('Include\x20\x22'+_0x5fceb0+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Mt['sourceName'],{'originalSource':_0x2e5fa9,'source':_0x44fc89}),_0x105c91=!(0x1ce1*0x1+-0x2ac+-0x1a35);continue;}}M['trace'](gr,_0x27e40f+':\x20['+_0x5fceb0+']\x20'+(_0x133844?'':'IGNORED'));break;}}}return _0x135338['length']>-0x22c8+0x61*0x52+-0xa*-0x5f&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Mt['sourceName']),_0x105c91=!(0x1c4e+-0x2da*-0x4+-0x11*0x256)),_0x105c91?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x2e5fa9}),null):_0x44fc89;}static['_keep'](_0x5607a2){for(let _0x28d93b=0x1*-0x1dfa+0xdc4+-0x1036*-0x1;_0x28d93b<_0x5607a2['length'];_0x28d93b++)if(!_0x5607a2[_0x28d93b]['keep'])return!(0x14d1+-0x487*0x5+0x1d3);return!(-0x1561*-0x1+-0x5b6*0x3+-0x43f);}static['evaluateAt'+'omicExpres'+'sion'](_0x2c77c5,_0x86a266){let _0x5d7e96=!(-0x165e+0xe*0x1c6+0x275*-0x1);_0x2c77c5=_0x2c77c5['trim']();let _0x4dcfc1=!(0x5*-0x258+-0x3*-0xbff+-0x1844);if(_0x2c77c5==='true')return{'result':!(-0x4d9+0x1*0x2313+0xf1d*-0x2),'error':_0x5d7e96};if(_0x2c77c5==='false')return{'result':!(0x3c7*-0x3+-0x650*0x6+0x3136),'error':_0x5d7e96};const _0x1695d5=Xx['exec'](_0x2c77c5);if(_0x1695d5){_0x4dcfc1=_0x1695d5[0x1bfa*0x1+0x1a48+0x143*-0x2b]==='!',_0x2c77c5=_0x1695d5[-0xcd+0x26ef*0x1+-0x4c4*0x8]['trim']();const _0x41ba06=_0x86a266['has'](_0x2c77c5);return{'result':_0x4dcfc1?!_0x41ba06:_0x41ba06,'error':_0x5d7e96};}const _0x14fdc9=Yx['exec'](_0x2c77c5);if(_0x14fdc9){const _0x2fa216=_0x86a266['get'](_0x14fdc9[0x10*0x18f+-0x20b+-0x16e4]['trim']())??_0x14fdc9[0xbb9+-0x1*0x15cb+0xa13]['trim'](),_0x1150ba=_0x86a266['get'](_0x14fdc9[0x2*0x10f+-0x1962*-0x1+0xe3*-0x1f]['trim']())??_0x14fdc9[-0x14b7+-0x1145*0x1+-0x47*-0x89]['trim'](),_0x42f3c2=_0x14fdc9[-0x171*0x4+-0x3b*0x1+0x601]['trim']();let _0x4d49f3=!(0x241a+-0x9b1*0x1+-0x69a*0x4);switch(_0x42f3c2){case'==':_0x4d49f3=_0x2fa216===_0x1150ba;break;case'!=':_0x4d49f3=_0x2fa216!==_0x1150ba;break;case'<':_0x4d49f3=_0x2fa216<_0x1150ba;break;case'<=':_0x4d49f3=_0x2fa216<=_0x1150ba;break;case'>':_0x4d49f3=_0x2fa216>_0x1150ba;break;case'>=':_0x4d49f3=_0x2fa216>=_0x1150ba;break;default:_0x5d7e96=!(0x1b50+0xa3f+-0x258f);}return{'result':_0x4d49f3,'error':_0x5d7e96};}return{'result':_0x86a266['has'](_0x2c77c5),'error':_0x5d7e96};}static['processPar'+'entheses'](_0x3df50c,_0x419e8d){let _0x7ad7d1=!(0x841+-0xb8b+-0x3*-0x119),_0x5b5bc8=_0x3df50c['trim']();for(;_0x5b5bc8['startsWith']('(')&&_0x5b5bc8['endsWith'](')');){let _0x411b3d=-0x14d1+-0x58c*0x4+0x65*0x6d,_0x1648ec=!(-0x2*0x11ef+-0xb*0x24b+-0x3*-0x145d);for(let _0xf27f60=-0x2067+-0x21*0x107+0xcf*0x52;_0xf27f60<_0x5b5bc8['length']-(-0x5*-0x28b+0x355*-0x9+-0x1147*-0x1);_0xf27f60++)if(_0x5b5bc8[_0xf27f60]==='(')_0x411b3d++;else{if(_0x5b5bc8[_0xf27f60]===')'&&(_0x411b3d--,_0x411b3d===-0x195*-0x9+0x1*0x20f3+-0x970*0x5)){_0x1648ec=!(-0x9c9+-0x12e0+0x1caa*0x1);break;}}if(_0x1648ec)_0x5b5bc8=_0x5b5bc8['slice'](0x2f3+-0x1*0x62c+0x33a,-(-0x1*0xe8a+-0x7f*0x32+0x2759))['trim']();else break;}for(;;){let _0xe3c791=!(-0x6*0x326+-0x1c63*0x1+0x2f48),_0xb53e58=-0x89*0x21+-0xb9f+-0x8*-0x3a9,_0x1b5749=0x6f4+-0x12d*0x11+-0x1*-0xd09,_0x53a898=-(-0x13d*0xb+0x2*-0xc8d+-0x2*-0x135d),_0x459515=-(-0x16ff+-0x1*-0x771+0x239*0x7),_0x13e453=-0x3*-0xa37+0xcfb+0x20*-0x15d;for(let _0x5c6548=-0xf*0x20b+0x1*-0x16a7+0x471*0xc;_0x5c6548<_0x5b5bc8['length'];_0x5c6548++)if(_0x5b5bc8[_0x5c6548]==='('){const _0x2c7909=_0x5b5bc8['substring'](-0x1abb+0x12c6*0x2+-0xad1,_0x5c6548);jx['test'](_0x2c7909)?_0x13e453++:_0x13e453===0xb56+0x1fc6*-0x1+-0x6*-0x368&&(_0xb53e58++,_0xb53e58>_0x1b5749&&(_0x1b5749=_0xb53e58,_0x53a898=_0x5c6548),_0xe3c791=!(-0x2395+0x1d3*-0x11+0x853*0x8));}else _0x5b5bc8[_0x5c6548]===')'&&(_0x13e453>0x35f*-0x5+0x1ae1+0xa06*-0x1?_0x13e453--:_0xb53e58>0xb05+0x14f2+0xa7*-0x31&&(_0xb53e58===_0x1b5749&&_0x53a898!==-(0x2*0xf3b+-0x495+-0xb8*0x24)&&(_0x459515=_0x5c6548),_0xb53e58--));if(!_0xe3c791||_0x53a898===-(-0x1692+0x1*-0x16a7+0x2d3a)||_0x459515===-(0x2036+0x1*-0x8f4+-0x1741*0x1))break;const _0x4c281e=_0x5b5bc8['substring'](_0x53a898+(-0x1f7*-0xa+-0x371+-0x3d*0x44),_0x459515),{result:_0x424ac6,error:_0x429f5b}=Mt['evaluate'](_0x4c281e,_0x419e8d);_0x7ad7d1=_0x7ad7d1||_0x429f5b,_0x5b5bc8=_0x5b5bc8['substring'](0x2030+-0x1e7b+-0x1b5,_0x53a898)+(_0x424ac6?'true':'false')+_0x5b5bc8['substring'](_0x459515+(0x4ec*-0x2+0xa4b+0x3*-0x26));}return{'expression':_0x5b5bc8,'error':_0x7ad7d1};}static['evaluate'](_0x480705,_0x477362){const _0x482cbf=Kx['exec'](_0x480705)===null;M['assert'](_0x482cbf,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x480705);let _0x3e8b0c=_0x480705,_0x3400a0=!(0x1c77+0x2f*0xb+-0x1e7b);if(_0x480705['replace'](qx,'')['indexOf']('(')!==-(0x1eb*0xe+-0x2512+0xa39)){const _0x34006a=Mt['processPar'+'entheses'](_0x480705,_0x477362);_0x3e8b0c=_0x34006a['expression'],_0x3400a0=_0x34006a['error'];}if(_0x3400a0)return M['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x480705+'\x22'),{'result':!(0x1bb5*0x1+0xc86+-0x283a),'error':!(-0x21a9+0xe9*-0xe+0x2e67)};const _0x4f51c0=_0x3e8b0c['split']('||');for(const _0x4000ec of _0x4f51c0){const _0x1ce74c=_0x4000ec['split']('&&');let _0x5364af=!(0x167+0x15a9+-0x1710);for(const _0x5c72a8 of _0x1ce74c){const {result:_0x16fe11,error:_0x12e6f6}=Mt['evaluateAt'+'omicExpres'+'sion'](_0x5c72a8['trim'](),_0x477362);if(!_0x16fe11||_0x12e6f6){_0x5364af=!(0x1d3f+0x1*0x104e+0x2c*-0x109);break;}}if(_0x5364af)return{'result':!(0x214e+0xa7*0x29+-0x3c0d),'error':!_0x482cbf};}return{'result':!(0x1*-0x79+0x4e3+-0x469),'error':!_0x482cbf};}};h(Mt,'sourceName');let _o=Mt;const jS='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),YS='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',KS='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),ZS='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',QS='\x0a',JS='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',xp='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',Tp='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',Qx={'vertex_position':Pe,'vertex_normal':cs,'vertex_tangent':ci,'vertex_texCoord0':Yt,'vertex_texCoord1':da,'vertex_texCoord2':Qo,'vertex_texCoord3':Jo,'vertex_texCoord4':el,'vertex_texCoord5':tl,'vertex_texCoord6':sl,'vertex_texCoord7':il,'vertex_color':kt,'vertex_boneIndices':ns,'vertex_boneWeights':li};class $t{static['createDefi'+'nition'](_0x298f49,_0x5ba923){M['assert'](_0x5ba923),M['assert'](!_0x5ba923['vertexDefi'+'nes']||_0x5ba923['vertexDefi'+'nes']instanceof Map),M['assert'](!_0x5ba923['vertexIncl'+'udes']||_0x5ba923['vertexIncl'+'udes']instanceof Map),M['assert'](!_0x5ba923['fragmentDe'+'fines']||_0x5ba923['fragmentDe'+'fines']instanceof Map),M['assert'](!_0x5ba923['fragmentIn'+'cludes']||_0x5ba923['fragmentIn'+'cludes']instanceof Map);const _0x4b0d56=_0x1d92cd=>{let _0x34c7fa=_0x1d92cd['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x34c7fa)||(_0x34c7fa=[_0x34c7fa]),_0x34c7fa;},_0x2e9bf1=(_0x5d5010,_0x300f99,_0x3bae19,_0x581edc)=>{const _0x4cb18f=_0x298f49['isWebGPU']?_0x5d5010:_0x300f99;let _0x13edea='';if(!_0x3bae19){const _0x2d9fe8=_0x4b0d56(_0x581edc);for(let _0x28fc12=0x1*-0x1f66+0x90d*-0x2+-0x318*-0x10;_0x28fc12<_0x298f49['maxColorAt'+'tachments'];_0x28fc12++){_0x13edea+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x28fc12+'\x0a';const _0x3b11e5=_0x2d9fe8[_0x28fc12]??'vec4';_0x13edea+='#define\x20ou'+'tType_'+_0x28fc12+'\x20'+_0x3b11e5+'\x0a';}}return _0x13edea+_0x4cb18f;},_0x52e22f=(_0x383020,_0x12509f)=>{let _0xc78e53='';if(!_0x383020){const _0x4ac767=_0x4b0d56(_0x12509f);for(let _0x50c75c=0x3*0x5d+0x6*0x24b+0xed9*-0x1;_0x50c75c<_0x298f49['maxColorAt'+'tachments'];_0x50c75c++){const _0x1c0119=_0x4ac767[_0x50c75c]??'vec4',_0x2324cb=GS['get'](_0x1c0119);M['assert'](_0x2324cb,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x1c0119+'\x20->\x20'+_0x2324cb),_0xc78e53+='alias\x20pcOu'+'tType'+_0x50c75c+'\x20=\x20'+_0x2324cb+';\x0a';}}return _0xc78e53;},_0x11fe60=_0x5ba923['name']??'Untitled';let _0x5c13b4,_0x5e9485;const _0x171db3=$t['getDefines'+'Code'](_0x298f49,_0x5ba923['vertexDefi'+'nes']),_0x5db084=$t['getDefines'+'Code'](_0x298f49,_0x5ba923['fragmentDe'+'fines']);return _0x5ba923['shaderLang'+'uage']===st?(_0x5c13b4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x52e22f(!(0xa3d+0x1*-0x1935+0xef8),_0x5ba923)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+JS+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Tp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x171db3+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5ba923['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x5e9485='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x52e22f(!(-0x1*0x1256+-0x1c1*0x2+0x15d9),_0x5ba923)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+QS+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Tp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5db084+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5ba923['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(M['assert'](_0x5ba923['vertexCode']),_0x5c13b4=$t['versionCod'+'e'](_0x298f49)+_0x2e9bf1(ZS,YS,!(0xc7*0x27+-0x981+-0x9*0x250),_0x5ba923)+_0x171db3+$t['precisionC'+'ode'](_0x298f49)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+xp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$t['getShaderN'+'ameCode'](_0x11fe60)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5ba923['vertexCode'],M['assert'](_0x5ba923['fragmentCo'+'de']),_0x5e9485=(_0x5ba923['fragmentPr'+'eamble']||'')+$t['versionCod'+'e'](_0x298f49)+_0x2e9bf1(KS,jS,!(0x1*-0x159b+0xe*0xe5+-0x48b*-0x2),_0x5ba923)+_0x5db084+$t['precisionC'+'ode'](_0x298f49)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+xp+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$t['getShaderN'+'ameCode'](_0x11fe60)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5ba923['fragmentCo'+'de']),{'name':_0x11fe60,'shaderLanguage':_0x5ba923['shaderLang'+'uage']??ze,'attributes':_0x5ba923['attributes'],'vshader':_0x5c13b4,'vincludes':_0x5ba923['vertexIncl'+'udes'],'fincludes':_0x5ba923['fragmentIn'+'cludes'],'fshader':_0x5e9485,'useTransformFeedback':_0x5ba923['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x5ba923['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x5ba923['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x58c630,_0x3c684b){let _0x98dcfb='';return _0x58c630['capsDefine'+'s']['forEach']((_0x31205e,_0x4627ff)=>{_0x98dcfb+='#define\x20'+_0x4627ff+'\x20'+_0x31205e+'\x0a';}),_0x98dcfb+='\x0a',_0x3c684b==null||_0x3c684b['forEach']((_0x128393,_0x5ac0a1)=>{_0x98dcfb+='#define\x20'+_0x5ac0a1+'\x20'+_0x128393+'\x0a';}),_0x98dcfb+='\x0a',_0x98dcfb;}static['getShaderN'+'ameCode'](_0x539152){return'#define\x20SH'+'ADER_NAME\x20'+_0x539152+'\x0a';}static['versionCod'+'e'](_0x2aadf8){return _0x2aadf8['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0xa36317,_0x5cfd95){_0x5cfd95&&_0x5cfd95!=='highp'&&_0x5cfd95!=='mediump'&&_0x5cfd95!=='lowp'&&(_0x5cfd95=null),_0x5cfd95&&(_0x5cfd95==='highp'&&_0xa36317['maxPrecisi'+'on']!=='highp'&&(_0x5cfd95='mediump'),_0x5cfd95==='mediump'&&_0xa36317['maxPrecisi'+'on']==='lowp'&&(_0x5cfd95='lowp'));const _0xb4d5cc=_0x5cfd95||_0xa36317['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0xb4d5cc+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0xb4d5cc+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0xb4d5cc+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0xb4d5cc+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0xb4d5cc+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0xb4d5cc+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0xb4d5cc+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x5cdef5){const _0x4086bd={};let _0x3302fb=-0x1*-0xee5+0x8*0x125+-0x83*0x2f,_0x58ee6f=_0x5cdef5['indexOf']('attribute');for(;_0x58ee6f>=-0x19bf*0x1+-0x1de2+0x37a1&&!(_0x58ee6f>-0x18*0x7f+0x2271+-0x1689&&_0x5cdef5[_0x58ee6f-(0xd*-0x119+0x7da+-0x224*-0x3)]==='/');){let _0x29bdca=!(-0x1*-0xf15+0x4f*-0x3d+0x3bf);if(_0x58ee6f>-0x1c76+0xae*-0x4+0x1f2e){let _0x31d444=_0x5cdef5['lastIndexO'+'f']('\x0a',_0x58ee6f);_0x31d444=_0x31d444!==-(-0x74d+-0xe3*-0x22+-0x16d8)?_0x31d444+(0x26ce+0x264+-0x2931):-0x1fbe+0x3*0xcd4+-0x6be*0x1,_0x5cdef5['substring'](_0x31d444,_0x58ee6f)['includes']('#')&&(_0x29bdca=!(-0x1*0x1217+-0x1*0x176c+0x2983));}if(!_0x29bdca){const _0x39fdc5=_0x5cdef5['indexOf'](';',_0x58ee6f),_0x3a6133=_0x5cdef5['lastIndexO'+'f']('\x20',_0x39fdc5),_0x58318e=_0x5cdef5['substring'](_0x3a6133+(-0x188c+0xd79*0x2+-0x265),_0x39fdc5);if(_0x4086bd[_0x58318e])M['warn']('Attribute\x20'+'['+_0x58318e+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x5cdef5});else{const _0x11b54d=Qx[_0x58318e];_0x11b54d!==void(0x4ba+-0x16b*0x5+0x25d)?_0x4086bd[_0x58318e]=_0x11b54d:(_0x4086bd[_0x58318e]='ATTR'+_0x3302fb,_0x3302fb++);}}_0x58ee6f=_0x5cdef5['indexOf']('attribute',_0x58ee6f+(-0x23d0+0x1cb7*0x1+0x71a));}return _0x4086bd;}}let Jx=0x3*-0x1b7+0x1*-0x7c7+-0x33b*-0x4;class ey{constructor(_0x2d2623,_0x6663d4){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=Jx++,this['device']=_0x2d2623,this['definition']=_0x6663d4,this['name']=_0x6663d4['name']||'Untitled',this['init'](),_0x6663d4['cshader'])M['assert'](_0x2d2623['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),M['assert'](!_0x6663d4['vshader']&&!_0x6663d4['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x6663d4['cshader']=_o['run'](_0x6663d4['cshader'],_0x6663d4['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(0x2493+0x281+0x1*-0x2714)});else{M['assert'](_0x6663d4['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),M['assert'](_0x6663d4['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),M['call'](()=>{this['vUnmodifie'+'d']=_0x6663d4['vshader'],this['fUnmodifie'+'d']=_0x6663d4['fshader'];});const _0x4227a4=_0x6663d4['shaderLang'+'uage']===st;_0x6663d4['vshader']=_o['run'](_0x6663d4['vshader'],_0x6663d4['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x4227a4}),_0x6663d4['shaderLang'+'uage']===ze&&(_0x6663d4['attributes']??(_0x6663d4['attributes']=$t['collectAtt'+'ributes'](_0x6663d4['vshader'])));const _0xfbc217=_0x2d2623['isWebGL2']&&(Me['name']==='osx'||Me['name']==='ios');if(_0x6663d4['fshader']=_o['run'](_0x6663d4['fshader'],_0x6663d4['fincludes'],{'stripUnusedColorAttachments':_0xfbc217,'stripDefines':_0x4227a4,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x6663d4['vshader']||!_0x6663d4['fshader']){M['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(0x19e+0x1*-0x1f61+0x191*0x13);return;}}this['impl']=_0x2d2623['createShad'+'erImpl'](this),M['trace'](Xm,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(0x263*-0xd+-0x24f*0x5+0x7*0x615),this['failed']=!(-0x1b99+0x7dc*0x1+0x2d2*0x7);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===st?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){M['trace'](Xm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class eT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const ke=[];ke[Us]=function(_0x3f2c8d,_0x2876e3,_0x4aab09){const _0x2dd2a6=_0x3f2c8d['storageFlo'+'at32'];_0x2dd2a6[_0x4aab09]=_0x2876e3;},ke[ia]=(_0x162e8e,_0x2ffe10,_0x3df378)=>{const _0x224efc=_0x162e8e['storageFlo'+'at32'];_0x224efc[_0x3df378]=_0x2ffe10[0xd5d*-0x2+-0x2269+-0x8d*-0x6f],_0x224efc[_0x3df378+(0xa39+0x2170+-0x2ba8)]=_0x2ffe10[-0x2*-0x10d+-0x1cb2+0x1a99];},ke[rs]=(_0xaa5b14,_0x2eb67c,_0x16ccfe)=>{const _0x546907=_0xaa5b14['storageFlo'+'at32'];_0x546907[_0x16ccfe]=_0x2eb67c[-0x11d2*-0x2+-0x467*-0x5+-0x39a7],_0x546907[_0x16ccfe+(-0x48c*-0x4+0xd7c+-0x1fab)]=_0x2eb67c[0x1*0x269e+0x6ea+-0x3*0xf2d],_0x546907[_0x16ccfe+(0x482+0x14ab+-0x192b)]=_0x2eb67c[-0x1ce7+0x37b+0x3e*0x69];},ke[gn]=(_0x52ae07,_0x1aebf2,_0x482bea)=>{const _0x35ed50=_0x52ae07['storageFlo'+'at32'];_0x35ed50[_0x482bea]=_0x1aebf2[0xf75*0x2+0x17ea+-0x36d4],_0x35ed50[_0x482bea+(-0x1caa*0x1+0x2*0xdc4+0x123)]=_0x1aebf2[0x2e*-0x23+-0x38*-0x83+-0x5*0x479],_0x35ed50[_0x482bea+(0xbab*0x1+0x2e4+-0x5*0x2e9)]=_0x1aebf2[0x149e+0x875+-0x1d11],_0x35ed50[_0x482bea+(0x7*0x1ec+0x17bc+-0x252d)]=_0x1aebf2[0x40*-0x16+0x223b+-0x1cb8];},ke[sa]=function(_0x1256ac,_0x341907,_0x567fa1){const _0x7610b5=_0x1256ac['storageInt'+'32'];_0x7610b5[_0x567fa1]=_0x341907;},ke[qr]=function(_0xba88d,_0x48249e,_0x56d22b){const _0x47007f=_0xba88d['storageInt'+'32'];_0x47007f[_0x56d22b]=_0x48249e[-0x10a8+0x7*-0x337+0x19*0x191],_0x47007f[_0x56d22b+(-0xc4b+0xeda+0x28e*-0x1)]=_0x48249e[0x74f+0x22c1+0x61*-0x6f];},ke[jr]=function(_0x2d00c7,_0x19126d,_0xeaf084){const _0x9c499b=_0x2d00c7['storageInt'+'32'];_0x9c499b[_0xeaf084]=_0x19126d[0x24aa+0xdde+-0x9a*0x54],_0x9c499b[_0xeaf084+(-0x189d+0x36*0xa7+0x184*-0x7)]=_0x19126d[-0x7*0x2ea+0x2418+-0xfb1],_0x9c499b[_0xeaf084+(0x8e0+-0x1d09*0x1+0x142b)]=_0x19126d[-0x3d7*0x8+-0xd3e+0x54*0x86];},ke[Yr]=function(_0x242e38,_0x3701e9,_0x34f7c6){const _0x1b3534=_0x242e38['storageInt'+'32'];_0x1b3534[_0x34f7c6]=_0x3701e9[0x3*0xb0b+-0x5c3*-0x2+-0x2ca7],_0x1b3534[_0x34f7c6+(0x434+-0xd*-0xc7+0x1*-0xe4e)]=_0x3701e9[-0x1f22+0xb*0x155+-0x4*-0x41f],_0x1b3534[_0x34f7c6+(0x1fb6+-0x1861+-0x753)]=_0x3701e9[0xfca+0x4f*-0x4f+-0x899*-0x1],_0x1b3534[_0x34f7c6+(0x2c4+-0x1*-0xfcd+0x26*-0x7d)]=_0x3701e9[0x135d*0x2+0x45*-0x43+-0x52a*0x4];},ke[kh]=(_0x1cdbbf,_0x5b7050,_0x4c40c4)=>{const _0x1fc139=_0x1cdbbf['storageFlo'+'at32'];_0x1fc139[_0x4c40c4]=_0x5b7050[-0xcc1+-0x8db+0x159c],_0x1fc139[_0x4c40c4+(-0x1810+-0xc1a+0x242b)]=_0x5b7050[0x1*0x1cdf+0x17a6+-0xd21*0x4],_0x1fc139[_0x4c40c4+(0x133b+-0x1c1*-0x3+-0xf1*0x1a)]=_0x5b7050[-0x1*0x1e5b+-0x2*0xf16+-0x1*-0x3c89],_0x1fc139[_0x4c40c4+(0x8db*0x1+-0x227+0x3b*-0x1d)]=_0x5b7050[0xa33+-0x1a9d+0x349*0x5],_0x1fc139[_0x4c40c4+(0x1edb+-0x2*0x1105+0x337)]=_0x5b7050[-0x23b*-0x6+0x69c+0x2*-0x9fd],_0x1fc139[_0x4c40c4+(0x154f*0x1+0x135d+-0x28a3)]=_0x5b7050[-0x7*-0x15a+0x1491+-0xa7*0x2e];},ke[Sn]=(_0x4a1dcf,_0x2aaefc,_0x5a9d50)=>{const _0x1f6349=_0x4a1dcf['storageFlo'+'at32'];_0x1f6349[_0x5a9d50]=_0x2aaefc[0x69*-0x55+-0xe91+0x316e],_0x1f6349[_0x5a9d50+(-0x23ab+-0x1f0+-0x12ce*-0x2)]=_0x2aaefc[-0x870+-0x1*-0x184b+-0xfda],_0x1f6349[_0x5a9d50+(0x2*0xff9+-0x6*0x31f+-0xd36)]=_0x2aaefc[-0x1*0x997+-0x1431+0xba*0x29],_0x1f6349[_0x5a9d50+(-0x193a+0x2b*0x47+0xd51*0x1)]=_0x2aaefc[-0x14f9+0xf19+0x5e3],_0x1f6349[_0x5a9d50+(-0x5*-0x16d+-0x407*-0x2+-0x50e*0x3)]=_0x2aaefc[-0x1*-0xddb+0x2dd*0x1+-0x10b4],_0x1f6349[_0x5a9d50+(-0x13a4+0x95+0x1315)]=_0x2aaefc[-0x21*-0x124+0x1d2a*-0x1+-0x875*0x1],_0x1f6349[_0x5a9d50+(0x4*-0x79d+0x435+0x1a47)]=_0x2aaefc[0x109*-0x1e+-0x1*0x11d7+0x30eb],_0x1f6349[_0x5a9d50+(0x63*0x61+0x992+0xbc3*-0x4)]=_0x2aaefc[0x3*-0xc91+0x1*-0xc7+-0x2681*-0x1],_0x1f6349[_0x5a9d50+(0xd67*-0x1+0x1737+-0x9c6)]=_0x2aaefc[-0xa*-0x2cd+0x1a*0x9+-0x1ce4];},ke[Uc]=function(_0x5b5499,_0xd9ebb9,_0x2d8b37,_0x53adc9){const _0x42afce=_0x5b5499['storageFlo'+'at32'];for(let _0x4869b4=0x73*-0x49+0x102+0x4f*0x67;_0x4869b4<_0x53adc9;_0x4869b4++)_0x42afce[_0x2d8b37+_0x4869b4*(-0x6d*-0x2+-0x3db+0x305)]=_0xd9ebb9[_0x4869b4];},ke[Bc]=(_0x32bf97,_0x5d00fe,_0x11129a,_0x3ad821)=>{const _0x2995e9=_0x32bf97['storageFlo'+'at32'];for(let _0x238acd=0x4*-0x6e5+0x136*-0x13+-0x2*-0x194b;_0x238acd<_0x3ad821;_0x238acd++)_0x2995e9[_0x11129a+_0x238acd*(-0x26*0xa7+0x85d*-0x1+0x212b)]=_0x5d00fe[_0x238acd*(0x16d9+-0x1*0x9b5+0x52*-0x29)],_0x2995e9[_0x11129a+_0x238acd*(-0x902+0x9*-0xc1+0xfcf)+(0xaf1+0x106*-0x16+0xb94)]=_0x5d00fe[_0x238acd*(-0x43a+-0x1022+0xa2f*0x2)+(0x3*-0xa+-0x7cc+0x7eb)];},ke[zc]=(_0x47341a,_0xd38507,_0x29934b,_0x3c8d24)=>{const _0x18be47=_0x47341a['storageFlo'+'at32'];for(let _0x44dbe0=-0x3*-0xa5d+0xc7d*-0x2+-0x61d;_0x44dbe0<_0x3c8d24;_0x44dbe0++)_0x18be47[_0x29934b+_0x44dbe0*(0x10e2+-0xef4+-0x1ea)]=_0xd38507[_0x44dbe0*(0x209*0x2+0xa3b+-0xe4a)],_0x18be47[_0x29934b+_0x44dbe0*(-0x1537+-0x11e4+0x271f)+(0x1fc1+-0x1f34+-0x8c)]=_0xd38507[_0x44dbe0*(0x841*-0x4+0x17*0x6+0x207d*0x1)+(0x15f2+0x1*0x24dd+0x486*-0xd)],_0x18be47[_0x29934b+_0x44dbe0*(-0x1*0x2402+-0x16cd+0x3ad3*0x1)+(0x11f7+0x1*0xfd3+-0x21c8)]=_0xd38507[_0x44dbe0*(-0x1ff8+0x7a0+-0x1*-0x185b)+(-0x1824+-0x1*-0x22b+0x15fb)];},ke[yn]=(_0x59c508,_0x4b7e95,_0x36721c,_0x38e3a0)=>{const _0xb6b3d=_0x59c508['storageUin'+'t32'];_0xb6b3d[_0x36721c]=_0x4b7e95;},ke[vn]=(_0x3fbba6,_0x4d195f,_0x3c66c1,_0x48b2d4)=>{const _0x21faab=_0x3fbba6['storageUin'+'t32'];_0x21faab[_0x3c66c1]=_0x4d195f[-0x6*-0xec+0x53*0x1d+-0xeef],_0x21faab[_0x3c66c1+(0x1fa3+0xc4a+-0xc*0x3a9)]=_0x4d195f[0x1f*-0xc9+0x20b3+0x85b*-0x1];},ke[xn]=(_0x14a6a0,_0x4e3b69,_0x128614,_0xacd189)=>{const _0x92d231=_0x14a6a0['storageUin'+'t32'];_0x92d231[_0x128614]=_0x4e3b69[-0x171f+-0x13*0x15+0x1*0x18ae],_0x92d231[_0x128614+(-0x99*-0x31+0x21d5+-0x3f1d)]=_0x4e3b69[0xbf*0x2c+0x1618+-0x36eb],_0x92d231[_0x128614+(-0x17ab+-0x236d+0x3b1a)]=_0x4e3b69[0xc74+0x26*0xb9+-0x27e8];},ke[Tn]=(_0x281df1,_0x99e91,_0x332e6e,_0x58b17d)=>{const _0x311f4e=_0x281df1['storageUin'+'t32'];_0x311f4e[_0x332e6e]=_0x99e91[0x113e+0xe4f+-0x29*0xc5],_0x311f4e[_0x332e6e+(0x1*0x24c6+0x1*-0xcfd+-0x8*0x2f9)]=_0x99e91[-0x16*-0x17+-0x1011+-0x386*-0x4],_0x311f4e[_0x332e6e+(0x21*0xdb+0x686+-0x22bf)]=_0x99e91[0x2052+0x33*0x33+0x2a79*-0x1],_0x311f4e[_0x332e6e+(-0x3*-0x4cd+0x3d3*-0x5+0x1*0x4bb)]=_0x99e91[-0x989+0x697*-0x1+-0x1023*-0x1];},ke[wn]=function(_0x5e449b,_0x427cbc,_0x4a207a,_0x280a13){const _0x4f8bbd=_0x5e449b['storageInt'+'32'];for(let _0x25ad72=-0xf5*0x1c+0x3e*-0x51+0x1c9*0x1a;_0x25ad72<_0x280a13;_0x25ad72++)_0x4f8bbd[_0x4a207a+_0x25ad72*(-0x1d02+-0x1*-0x17dd+0x1*0x529)]=_0x427cbc[_0x25ad72];},ke[Gc]=ke[wn],ke[Vc]=function(_0x586e6c,_0x4932b7,_0x5f8b83,_0x395472){const _0x490787=_0x586e6c['storageUin'+'t32'];for(let _0x3709fb=0x4a*0x6f+-0x23f6+0x1*0x3e0;_0x3709fb<_0x395472;_0x3709fb++)_0x490787[_0x5f8b83+_0x3709fb*(-0x226e+0x1*-0x2376+0x45e8)]=_0x4932b7[_0x3709fb];},ke[En]=(_0x45d6eb,_0xc8ab2c,_0x248851,_0x454a7d)=>{const _0xe53912=_0x45d6eb['storageInt'+'32'];for(let _0xb095c5=-0x1a60+-0x15c3+-0x3023*-0x1;_0xb095c5<_0x454a7d;_0xb095c5++)_0xe53912[_0x248851+_0xb095c5*(-0x1*0xb70+-0x1*-0x264b+0x1*-0x1ad7)]=_0xc8ab2c[_0xb095c5*(-0x11b5+-0x6ee+0x18a5)],_0xe53912[_0x248851+_0xb095c5*(0x2b3+0x15*0x35+-0x18*0x4b)+(-0x7ac*-0x2+0x21d9+-0x3130)]=_0xc8ab2c[_0xb095c5*(-0x1*0x28d+-0x3c*-0x35+-0x1f9*0x5)+(0x21a3+-0x1b95+-0x60d)];},ke[Wc]=ke[En],ke[Hc]=(_0x325f6b,_0x45fd11,_0x59e4e1,_0x4dd0a3)=>{const _0x572373=_0x325f6b['storageUin'+'t32'];for(let _0x35bf73=0x1*-0x1367+-0x1fc0*0x1+0x123*0x2d;_0x35bf73<_0x4dd0a3;_0x35bf73++)_0x572373[_0x59e4e1+_0x35bf73*(-0x243b*0x1+0xc10+-0x1*-0x182f)]=_0x45fd11[_0x35bf73*(-0x1*-0x18b8+-0xb19+-0xd9d)],_0x572373[_0x59e4e1+_0x35bf73*(-0x449+-0x225b*-0x1+0x1e0e*-0x1)+(-0x12bb+0x5c8+-0x33d*-0x4)]=_0x45fd11[_0x35bf73*(0x2007+-0x33e+0x35*-0x8b)+(0xc90+-0xff*0x17+-0x2*-0x52d)];},ke[An]=(_0x4b2da0,_0x245a29,_0xd53ea6,_0x996e56)=>{const _0x5e1841=_0x4b2da0['storageInt'+'32'];for(let _0x2457f1=-0x2311+-0x28*-0x43+-0x833*-0x3;_0x2457f1<_0x996e56;_0x2457f1++)_0x5e1841[_0xd53ea6+_0x2457f1*(0x824+0x169b+-0x1*0x1ebb)]=_0x245a29[_0x2457f1*(-0x19*0x12a+0x8a5+0x1478)],_0x5e1841[_0xd53ea6+_0x2457f1*(0x44*0x3e+0x8b*0x1+-0x13*0xe5)+(-0x3f4+0xe*0x85+-0x351)]=_0x245a29[_0x2457f1*(0xddc+0x2269+0x2*-0x1821)+(0x25e2+0x1*-0x2523+-0x5*0x26)],_0x5e1841[_0xd53ea6+_0x2457f1*(0x1f9a*-0x1+0xfd5*0x1+-0x9*-0x1c1)+(-0x16a2+-0x1e51+0x34f5)]=_0x245a29[_0x2457f1*(0x1*0x2012+0x1e9+0x10fc*-0x2)+(-0x65*-0x46+-0x1*-0x1da9+-0x3945)];},ke[Xc]=ke[An],ke[$c]=(_0x5bfd35,_0x4542e7,_0x353206,_0x535f57)=>{const _0x263069=_0x5bfd35['storageUin'+'t32'];for(let _0xfeeba7=0x614*-0x4+-0x1*-0x18e6+-0x96;_0xfeeba7<_0x535f57;_0xfeeba7++)_0x263069[_0x353206+_0xfeeba7*(-0x1b95+0x8f8+0x12a1)]=_0x4542e7[_0xfeeba7*(-0x57c+0x7ab+-0x22c)],_0x263069[_0x353206+_0xfeeba7*(-0x23f*0x5+-0x2250+-0x6d*-0x6b)+(-0xf3e*0x1+0x1*-0xb3d+-0x69f*-0x4)]=_0x4542e7[_0xfeeba7*(-0x3*-0x5ff+-0x3*0x50d+0x1*-0x2d3)+(0x481+-0x1*-0x3e+-0x4be)],_0x263069[_0x353206+_0xfeeba7*(0x3*0x76d+0x1*0xf47+-0x258a)+(-0xf9b+-0x9cf+0x196c)]=_0x4542e7[_0xfeeba7*(-0x1771+0x146e+0x306)+(0x22d*0x3+-0x142d*-0x1+-0x1ab2)];};class nm{constructor(_0xee0830,_0x34cacf,_0x32e843=!(-0x651*0x2+-0x220*0x6+0x1962)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',0x4fd+-0xd0c+0x80f);if(this['device']=_0xee0830,this['format']=_0x34cacf,this['persistent']=_0x32e843,M['assert'](_0x34cacf),_0x32e843){this['impl']=_0xee0830['createUnif'+'ormBufferI'+'mpl'](this);const _0x1ea0eb=new ArrayBuffer(_0x34cacf['byteSize']);this['assignStor'+'age'](new Int32Array(_0x1ea0eb)),_0xee0830['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new eT();}['destroy'](){if(this['persistent']){const _0x22c070=this['device'];this['impl']['destroy'](_0x22c070),_0x22c070['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?0x22d7+0x49*0xd+0x268c*-0x1:this['allocation']['offset'];}['assignStor'+'age'](_0x3a8aef){this['storageInt'+'32']=_0x3a8aef,this['storageUin'+'t32']=new Uint32Array(_0x3a8aef['buffer'],_0x3a8aef['byteOffset'],_0x3a8aef['byteLength']/(-0x9d*0x17+0x8*-0x127+0x1757*0x1)),this['storageFlo'+'at32']=new Float32Array(_0x3a8aef['buffer'],_0x3a8aef['byteOffset'],_0x3a8aef['byteLength']/(0xd0a+-0x2522+0x181c));}['loseContex'+'t'](){var _0x5b6aa3;(_0x5b6aa3=this['impl'])==null||_0x5b6aa3['loseContex'+'t']();}['setUniform'](_0x428ca7,_0x2d446d){M['assert'](_0x428ca7);const _0x496032=_0x428ca7['offset'];if(_0x2d446d!=null){const _0x59aa82=ke[_0x428ca7['updateType']];_0x59aa82?_0x59aa82(this,_0x2d446d,_0x496032,_0x428ca7['count']):this['storageFlo'+'at32']['set'](_0x2d446d,_0x496032);}else M['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x428ca7['name']+('],\x20expecte'+'d\x20type\x20')+DS[_0x428ca7['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x5ef67a,_0x355a49){const _0x1acccf=this['format']['map']['get'](_0x5ef67a);M['assert'](_0x1acccf,'Uniform\x20na'+'me\x20['+_0x5ef67a+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x1acccf&&this['setUniform'](_0x1acccf,_0x355a49);}['startUpdat'+'e'](_0xed58){if(!this['persistent']){const _0x5d5587=this['allocation'],_0x4638ae=_0x5d5587['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x5d5587,this['format']['byteSize']),this['assignStor'+'age'](_0x5d5587['storage']),_0xed58&&(_0xed58['bindGroup']=_0x5d5587['gpuBuffer']['getBindGro'+'up'](this),_0xed58['offsets'][-0x56*-0x35+-0x26b5*0x1+0x14e7]=_0x5d5587['offset']),_0x4638ae!==_0x5d5587['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0xcec052){this['startUpdat'+'e'](_0xcec052);const _0x2402fb=this['format']['uniforms'];for(let _0x502325=0x3a6+-0x1ca9+-0x151*-0x13;_0x502325<_0x2402fb['length'];_0x502325++){const _0x5a5b90=_0x2402fb[_0x502325]['scopeId']['value'];this['setUniform'](_0x2402fb[_0x502325],_0x5a5b90);}this['endUpdate']();}}class tT{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(-0x78b*0x3+-0x1c63+0x1*0x3305)),h(this,'_enableReq'+'uest',!(0xa9*-0x2c+-0x7*0x380+0x358d)),h(this,'_frameTime',-0x1c05*-0x1+-0x795+-0x28e*0x8);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x22ab59){this['_enableReq'+'uest']=_0x22ab59;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x1269+-0x848+0x1ab1));}['request'](_0x3d12a8){this['pastFrameA'+'llocations']['set'](_0x3d12a8,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x4d67b8,_0x5ab917){if(_0x5ab917){const _0x1ff0ca=this['pastFrameA'+'llocations']['get'](_0x4d67b8);if(M['assert'](_0x1ff0ca['length']===_0x5ab917['length']),_0x5ab917['length']>-0x184f+0x267b+-0xe2c&&(this['_frameTime']=_0x5ab917['reduce']((_0x58dc31,_0x1d63c7)=>_0x58dc31+_0x1d63c7,-0x87b+0x3cc+-0x4af*-0x1)),ni['get'](Sl)){M['trace'](Sl,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x4d67b8+'\x20--');let _0x1b69ef=0x212f*-0x1+0x2621+-0x4f2;for(let _0xad2f0a=-0x1*-0x97c+-0xe2*0x2a+0x6e6*0x4;_0xad2f0a<_0x1ff0ca['length'];++_0xad2f0a){const _0x141220=_0x1ff0ca[_0xad2f0a];_0x1b69ef+=_0x5ab917[_0xad2f0a],M['trace'](Sl,_0x5ab917[_0xad2f0a]['toFixed'](-0xed9+0x10*-0xf7+0x37*0x8d)+'\x20ms\x20'+_0x141220);}M['trace'](Sl,_0x1b69ef['toFixed'](0x7*0x4c1+-0x3*0xafb+-0x7*0xc)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x4d67b8);}['getSlot'](_0x4178c3){const _0x2f7b85=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x4178c3),_0x2f7b85;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class ty{constructor(){h(this,'bufferId',null);}['destroy'](_0x109188){this['bufferId']&&(_0x109188['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x4c1220,_0x380cdb,_0x2cc203,_0x2bdace){const _0x56e838=_0x4c1220['gl'];if(this['bufferId'])_0x56e838['bindBuffer'](_0x2cc203,this['bufferId']),_0x56e838['bufferSubD'+'ata'](_0x2cc203,0x200*-0x6+0xabf+0x141,_0x2bdace);else{let _0x1414df;switch(_0x380cdb){case ls:_0x1414df=_0x56e838['STATIC_DRA'+'W'];break;case Mh:_0x1414df=_0x56e838['DYNAMIC_DR'+'AW'];break;case oS:_0x1414df=_0x56e838['STREAM_DRA'+'W'];break;case F0:_0x1414df=_0x56e838['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x56e838['createBuff'+'er'](),_0x56e838['bindBuffer'](_0x2cc203,this['bufferId']),_0x56e838['bufferData'](_0x2cc203,_0x2bdace,_0x1414df);}}}class sT extends ty{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x578516){super['destroy'](_0x578516),_0x578516['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x36d9f7){const _0x5dddaf=_0x36d9f7['device'];super['unlock'](_0x5dddaf,_0x36d9f7['usage'],_0x5dddaf['gl']['ARRAY_BUFF'+'ER'],_0x36d9f7['storage']);}}class iT extends ty{constructor(_0x281b30){super();const _0x1b09c7=_0x281b30['device']['gl'],_0x1f3ce1=_0x281b30['format'];_0x1f3ce1===ff?this['glFormat']=_0x1b09c7['UNSIGNED_B'+'YTE']:_0x1f3ce1===zi?this['glFormat']=_0x1b09c7['UNSIGNED_S'+'HORT']:_0x1f3ce1===hr&&(this['glFormat']=_0x1b09c7['UNSIGNED_I'+'NT']);}['unlock'](_0x22a739){const _0x373b5e=_0x22a739['device'];super['unlock'](_0x373b5e,_0x22a739['usage'],_0x373b5e['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x22a739['storage']);}}class rT{constructor(_0x3da5cd,_0x52f5ea,_0x4561cd,_0x32a431){if(this['locationId']=_0x32a431,this['scopeId']=_0x3da5cd['scope']['resolve'](_0x52f5ea),this['version']=new $S(),_0x52f5ea['substring'](_0x52f5ea['length']-(-0x77*0xd+0x85a+-0x24c))==='[0]')switch(_0x4561cd){case Us:_0x4561cd=Uc;break;case sa:_0x4561cd=wn;break;case yn:_0x4561cd=Vc;break;case on:_0x4561cd=Gc;break;case ia:_0x4561cd=Bc;break;case qr:_0x4561cd=En;break;case vn:_0x4561cd=Hc;break;case Lo:_0x4561cd=Wc;break;case rs:_0x4561cd=zc;break;case jr:_0x4561cd=An;break;case xn:_0x4561cd=$c;break;case Ro:_0x4561cd=Xc;break;case gn:_0x4561cd=Qu;break;case Yr:_0x4561cd=Uh;break;case Tn:_0x4561cd=Ju;break;case Oo:_0x4561cd=em;break;}this['dataType']=_0x4561cd,this['value']=[null,null,null,null],this['array']=[];}}let wp=0x4fc*-0x5+0xe63+0xa89;const aT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class nT{constructor(){h(this,'map',new Map());}['destroy'](_0x1cd2d6){this['map']['forEach'](_0x273c26=>{_0x1cd2d6['gl']['deleteShad'+'er'](_0x273c26);});}['loseContex'+'t'](_0x44c452){this['map']['clear']();}}const oT=new Ht(),lT=new Ht();class hT{constructor(_0x57b34c){h(this,'compileDur'+'ation',-0x25ac+-0xcc*0xe+0x7d*0x64),(this['init'](),this['compile'](_0x57b34c['device'],_0x57b34c),this['link'](_0x57b34c['device'],_0x57b34c),_0x57b34c['device']['shaders']['push'](_0x57b34c));}['destroy'](_0x10daaf){this['glProgram']&&(_0x10daaf['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x31d024,_0x2a37ae){this['compile'](_0x31d024,_0x2a37ae),this['link'](_0x31d024,_0x2a37ae);}['compile'](_0x2efc04,_0xdf26db){const _0x188736=_0xdf26db['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x2efc04,_0x188736['vshader'],!(-0x3*0x427+0x6fa+0x57b)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x2efc04,_0x188736['fshader'],!(0x1e01*-0x1+-0x74b+-0x1*-0x254d));}['link'](_0x3b7fb2,_0x231cd1){if(this['glProgram'])return;const _0x1da55a=_0x3b7fb2['gl'];if(_0x1da55a['isContextL'+'ost']())return;let _0x3a3c79=-0x1d*0xb+-0x2058+-0x2197*-0x1;M['call'](()=>{this['compileDur'+'ation']=0x137*0x4+-0x26*-0x45+-0xf1a,_0x3a3c79=de();});const _0x25b272=_0x1da55a['createProg'+'ram']();this['glProgram']=_0x25b272,_0x1da55a['attachShad'+'er'](_0x25b272,this['glVertexSh'+'ader']),_0x1da55a['attachShad'+'er'](_0x25b272,this['glFragment'+'Shader']);const _0x990425=_0x231cd1['definition'],_0x49952c=_0x990425['attributes'];if(_0x990425['useTransfo'+'rmFeedback']){const _0xad6fa1=[];for(const _0x359463 in _0x49952c)_0x49952c['hasOwnProp'+'erty'](_0x359463)&&_0xad6fa1['push']('out_'+_0x359463);_0x1da55a['transformF'+'eedbackVar'+'yings'](_0x25b272,_0xad6fa1,_0x1da55a['INTERLEAVE'+'D_ATTRIBS']);}const _0x50a6d7={};for(const _0x5bcd36 in _0x49952c)if(_0x49952c['hasOwnProp'+'erty'](_0x5bcd36)){const _0x421131=_0x49952c[_0x5bcd36],_0x17e462=De[_0x421131];M['assert'](!_0x50a6d7['hasOwnProp'+'erty'](_0x17e462),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0x50a6d7[_0x17e462]+'\x20and\x20'+_0x5bcd36),_0x50a6d7[_0x17e462]=_0x5bcd36,_0x1da55a['bindAttrib'+'Location'](_0x25b272,_0x17e462,_0x5bcd36);}_0x1da55a['linkProgra'+'m'](_0x25b272),M['call'](()=>{this['compileDur'+'ation']=de()-_0x3a3c79;}),_0x3b7fb2['_shaderSta'+'ts']['linked']++,_0x990425['tag']===AS&&_0x3b7fb2['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x5b5bc2,_0x96d123,_0x256754){const _0x47af4a=_0x5b5bc2['gl'];if(_0x47af4a['isContextL'+'ost']())return null;const _0x14393c=(_0x256754?oT:lT)['get'](_0x5b5bc2,()=>new nT());let _0x47a3ac=_0x14393c['map']['get'](_0x96d123);if(!_0x47a3ac){const _0x5f054e=de();_0x5b5bc2['fire']('shader:com'+'pile:start',{'timestamp':_0x5f054e,'target':_0x5b5bc2}),_0x47a3ac=_0x47af4a['createShad'+'er'](_0x256754?_0x47af4a['VERTEX_SHA'+'DER']:_0x47af4a['FRAGMENT_S'+'HADER']),_0x47af4a['shaderSour'+'ce'](_0x47a3ac,_0x96d123),_0x47af4a['compileSha'+'der'](_0x47a3ac),_0x14393c['map']['set'](_0x96d123,_0x47a3ac);const _0xb2ccab=de();_0x5b5bc2['fire']('shader:com'+'pile:end',{'timestamp':_0xb2ccab,'target':_0x5b5bc2}),_0x5b5bc2['_shaderSta'+'ts']['compileTim'+'e']+=_0xb2ccab-_0x5f054e,_0x256754?_0x5b5bc2['_shaderSta'+'ts']['vsCompiled']++:_0x5b5bc2['_shaderSta'+'ts']['fsCompiled']++;}return _0x47a3ac;}['finalize'](_0x4b30eb,_0x1e9dd3){var _0xc33b24,_0x26b810;const _0x7b6177=_0x4b30eb['gl'];if(_0x7b6177['isContextL'+'ost']())return!(0x19c1+0x7*-0x43+0x2*-0xbf6);const _0x5c8683=this['glProgram'],_0x16e512=_0x1e9dd3['definition'],_0x7d068c=de();_0x4b30eb['fire']('shader:lin'+'k:start',{'timestamp':_0x7d068c,'target':_0x4b30eb});let _0x370d95=-0xad*-0x9+0x9b1+0x1*-0xfc6;if(M['call'](()=>{_0x370d95=de();}),!_0x7b6177['getProgram'+'Parameter'](_0x5c8683,_0x7b6177['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x4b30eb,_0x1e9dd3,this['glVertexSh'+'ader'],_0x16e512['vshader'],'vertex')||!this['_isCompile'+'d'](_0x4b30eb,_0x1e9dd3,this['glFragment'+'Shader'],_0x16e512['fshader'],'fragment'))return!(-0x1644+-0x94d+0x1f92);const _0x281887='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x7b6177['getProgram'+'InfoLog'](_0x5c8683);return _0x16e512['translated'+'Frag']=(_0xc33b24=_0x7b6177['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x20a1+-0x1e6d*0x1+-0x1*-0x3f0e):_0xc33b24['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x16e512['translated'+'Vert']=(_0x26b810=_0x7b6177['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0xb*0x2ad+-0x17fe+-0x1*-0x356d):_0x26b810['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x281887,_0x16e512),console['error'](_0x281887),!(-0x1da1+-0xb2b+-0x28cd*-0x1);}const _0x2ada6b=_0x7b6177['getProgram'+'Parameter'](_0x5c8683,_0x7b6177['ACTIVE_ATT'+'RIBUTES']);_0x1e9dd3['attributes']['clear']();for(let _0x1d2422=0x2dc+-0x15*-0xd7+-0xb*0x1dd;_0x1d2422<_0x2ada6b;_0x1d2422++){const _0x21d756=_0x7b6177['getActiveA'+'ttrib'](_0x5c8683,_0x1d2422),_0x5c0e31=_0x7b6177['getAttribL'+'ocation'](_0x5c8683,_0x21d756['name']);aT['has'](_0x21d756['name'])||(_0x16e512['attributes'][_0x21d756['name']]===void(-0x269b+0x1*0xb1b+-0x58*-0x50)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x21d756['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x1e9dd3['label']+']',_0x1e9dd3),_0x1e9dd3['failed']=!(-0x332+0x1c5c+0xc95*-0x2)):_0x1e9dd3['attributes']['set'](_0x5c0e31,_0x21d756['name']));}const _0x3b4a82=_0x4b30eb['_samplerTy'+'pes'],_0x210fa2=_0x7b6177['getProgram'+'Parameter'](_0x5c8683,_0x7b6177['ACTIVE_UNI'+'FORMS']);for(let _0x4648ff=0x24d8+-0x13*0x51+-0xa47*0x3;_0x4648ff<_0x210fa2;_0x4648ff++){const _0x48446a=_0x7b6177['getActiveU'+'niform'](_0x5c8683,_0x4648ff),_0x5c6800=_0x7b6177['getUniform'+'Location'](_0x5c8683,_0x48446a['name']),_0x3e2c73=new rT(_0x4b30eb,_0x48446a['name'],_0x4b30eb['pcUniformT'+'ype'][_0x48446a['type']],_0x5c6800);_0x3b4a82['has'](_0x48446a['type'])?this['samplers']['push'](_0x3e2c73):this['uniforms']['push'](_0x3e2c73);}_0x1e9dd3['ready']=!(0x14d6+-0x1648+0x4a*0x5);const _0x2a04eb=de();return _0x4b30eb['fire']('shader:lin'+'k:end',{'timestamp':_0x2a04eb,'target':_0x4b30eb}),_0x4b30eb['_shaderSta'+'ts']['compileTim'+'e']+=_0x2a04eb-_0x7d068c,M['call'](()=>{const _0x513d99=de()-_0x370d95;this['compileDur'+'ation']+=_0x513d99,wp+=this['compileDur'+'ation'],M['trace'](t0,'[id:\x20'+_0x1e9dd3['id']+']\x20'+_0x1e9dd3['name']+':\x20'+this['compileDur'+'ation']['toFixed'](-0x37*0xd+-0x1558+0x1824)+('ms,\x20TOTAL:'+'\x20')+wp['toFixed'](-0x26f3+-0x1d00+0x1*0x43f4)+'ms');}),!(-0xb13+0x1*0x1ed7+-0x13c4);}['_isCompile'+'d'](_0x371994,_0xcebbc5,_0xbb28e1,_0x4e3a09,_0x35daf6){const _0xa9391c=_0x371994['gl'];if(!_0xa9391c['getShaderP'+'arameter'](_0xbb28e1,_0xa9391c['COMPILE_ST'+'ATUS'])){const _0x1286d8=_0xa9391c['getShaderI'+'nfoLog'](_0xbb28e1),[_0x5b431f,_0x2f519a]=this['_processEr'+'ror'](_0x4e3a09,_0x1286d8),_0x4cfc4d='Failed\x20to\x20'+'compile\x20'+_0x35daf6+'\x20shader:\x0a\x0a'+_0x1286d8+'\x0a'+_0x5b431f+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x2f519a['shader']=_0xcebbc5,console['error'](_0x4cfc4d,_0x2f519a),console['error'](_0x4cfc4d),!(0x159a+0xc5*0x25+-0x3212);}return!(-0x589+0x1cdd+-0x2*0xbaa);}['isLinked'](_0x559c31){const {extParallelShaderCompile:_0x3b1430}=_0x559c31;return _0x3b1430?_0x559c31['gl']['getProgram'+'Parameter'](this['glProgram'],_0x3b1430['COMPLETION'+'_STATUS_KH'+'R']):!(0x644+0x1*0x20e3+-0x303*0xd);}['_processEr'+'ror'](_0x3262fa,_0x50f979){const _0x482861={};let _0x59a2ac='';if(_0x3262fa){const _0x71a4d1=_0x3262fa['split']('\x0a');let _0x9d6123=0x5*0x2d7+0xe0d+-0x1c40,_0xfed31b=_0x71a4d1['length'];if(_0x50f979&&_0x50f979['startsWith']('ERROR:')){const _0xf7c032=_0x50f979['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0xf7c032&&(_0x482861['message']=_0xf7c032[0x3*-0xabd+-0xc*0x112+-0x281*-0x12],_0x482861['line']=parseInt(_0xf7c032[0xe10+0x1144+0x1f52*-0x1],0xd3a*-0x1+-0x229f+0x29*0x12b),_0x9d6123=Math['max'](-0x3*0x78e+0x872*-0x4+-0x19*-0x242,_0x482861['line']-(0x35*-0x9+0x1223+-0x68*0x28)),_0xfed31b=Math['min'](_0x71a4d1['length'],_0x482861['line']+(0x8f*0x45+-0xa3+-0x1*0x25e3)));}for(let _0x107b6f=_0x9d6123;_0x107b6f<_0xfed31b;_0x107b6f++){const _0x793979=_0x107b6f+(0x222b+-0x13f3+-0xe37)===_0x482861['line']?'>\x20':'\x20\x20';_0x59a2ac+=''+_0x793979+(_0x107b6f+(0x2*-0xb0e+0x1ca*0x1+0x1d9*0xb))+':\x09'+_0x71a4d1[_0x107b6f]+'\x0a';}_0x482861['source']=_0x3262fa;}return[_0x59a2ac,_0x482861];}}function Ep(_0x193f87,_0xa057fc){const _0xd0e21e=_0x193f87['width'],_0x3681df=_0x193f87['height'];if(_0xd0e21e>_0xa057fc||_0x3681df>_0xa057fc){const _0x10059d=_0xa057fc/Math['max'](_0xd0e21e,_0x3681df),_0x202f21=Math['floor'](_0xd0e21e*_0x10059d),_0x1ad5a6=Math['floor'](_0x3681df*_0x10059d);M['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0xa057fc+('.\x20Resizing'+'\x20from\x20')+_0xd0e21e+',\x20'+_0x3681df+'\x20to\x20'+_0x202f21+',\x20'+_0x1ad5a6+'.');const _0x83f438=document['createElem'+'ent']('canvas');return _0x83f438['width']=_0x202f21,_0x83f438['height']=_0x1ad5a6,_0x83f438['getContext']('2d')['drawImage'](_0x193f87,0xdba+-0x1d*-0x116+-0x2d38,0x1ed2+0x1d46+-0x3c18,_0xd0e21e,_0x3681df,0x358+0x142d+-0x1785,0x2535+-0x17*-0x1d+-0x27d0,_0x202f21,_0x1ad5a6),_0x83f438;}return _0x193f87;}class cT{constructor(_0xbb6215){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',0xf68+0x15c2*0x1+-0x252a),this['texture']=_0xbb6215;}['destroy'](_0x4a0b8f){if(this['_glTexture']){for(let _0x38e188=0x54a+-0x1*0x45a+-0x1*0xf0;_0x38e188<_0x4a0b8f['textureUni'+'ts']['length'];_0x38e188++){const _0x1ef242=_0x4a0b8f['textureUni'+'ts'][_0x38e188];for(let _0x19bf97=0xbf+0x50*0x3b+-0x3*0x665;_0x19bf97<_0x1ef242['length'];_0x19bf97++)_0x1ef242[_0x19bf97]===this['_glTexture']&&(_0x1ef242[_0x19bf97]=null);}_0x4a0b8f['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x67569a){this['dirtyParam'+'eterFlags']|=_0x67569a;}['initialize'](_0x5e3e93,_0x3e100d){const _0x4bf6f4=_0x5e3e93['gl'];switch(this['_glTexture']=_0x4bf6f4['createText'+'ure'](),this['_glTarget']=_0x3e100d['_cubemap']?_0x4bf6f4['TEXTURE_CU'+'BE_MAP']:_0x3e100d['_volume']?_0x4bf6f4['TEXTURE_3D']:_0x3e100d['array']?_0x4bf6f4['TEXTURE_2D'+'_ARRAY']:_0x4bf6f4['TEXTURE_2D'],_0x3e100d['_format']){case lS:this['_glFormat']=_0x4bf6f4['ALPHA'],this['_glInterna'+'lFormat']=_0x4bf6f4['ALPHA'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case hS:this['_glFormat']=_0x4bf6f4['LUMINANCE'],this['_glInterna'+'lFormat']=_0x4bf6f4['LUMINANCE'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Eu:this['_glFormat']=_0x4bf6f4['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x4bf6f4['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Hu:this['_glFormat']=_0x4bf6f4['RED'],this['_glInterna'+'lFormat']=_0x4bf6f4['R8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Wu:this['_glFormat']=_0x4bf6f4['RG'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Ec:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGB565'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT_5_6_5'];break;case Au:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGB5_A1'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case Ac:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA4'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case ur:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGB8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Oe:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case uS:case gS:M['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case bc:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case bu:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case Yo:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case Pc:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case Ko:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case Zo:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case Mc:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case Ic:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case Pu:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case Mu:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case cS:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case dS:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case fS:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case SS:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case yS:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case vS:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case uf:this['_glFormat']=_0x4bf6f4['SRGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case mf:this['_glFormat']=_0x4bf6f4['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case pf:this['_glFormat']=_0x4bf6f4['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case _f:this['_glFormat']=_0x4bf6f4['SRGB'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case gf:this['_glFormat']=_0x4bf6f4['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case Sf:this['_glFormat']=_0x4bf6f4['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x5e3e93['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case yf:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x5e3e93['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case Lc:this['_glFormat']=_0x4bf6f4['RED'],this['_glInterna'+'lFormat']=_0x4bf6f4['R16F'],this['_glPixelTy'+'pe']=_0x4bf6f4['HALF_FLOAT'];break;case Gu:this['_glFormat']=_0x4bf6f4['RG'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG16F'],this['_glPixelTy'+'pe']=_0x4bf6f4['HALF_FLOAT'];break;case ri:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGB16F'],this['_glPixelTy'+'pe']=_0x4bf6f4['HALF_FLOAT'];break;case at:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA16F'],this['_glPixelTy'+'pe']=_0x4bf6f4['HALF_FLOAT'];break;case je:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGB32F'],this['_glPixelTy'+'pe']=_0x4bf6f4['FLOAT'];break;case Bt:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA32F'],this['_glPixelTy'+'pe']=_0x4bf6f4['FLOAT'];break;case Hi:this['_glFormat']=_0x4bf6f4['RED'],this['_glInterna'+'lFormat']=_0x4bf6f4['R32F'],this['_glPixelTy'+'pe']=_0x4bf6f4['FLOAT'];break;case ki:this['_glFormat']=_0x4bf6f4['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x4bf6f4['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x4bf6f4['FLOAT'];break;case an:this['_glFormat']=_0x4bf6f4['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x4bf6f4['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT'];break;case Cc:this['_glFormat']=_0x4bf6f4['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x4bf6f4['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_I'+'NT_24_8'];break;case pn:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case Cu:this['_glFormat']=_0x4bf6f4['RGB'],this['_glInterna'+'lFormat']=_0x4bf6f4['SRGB8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case hs:this['_glFormat']=_0x4bf6f4['RGBA'],this['_glInterna'+'lFormat']=_0x4bf6f4['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Iu:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R8I'],this['_glPixelTy'+'pe']=_0x4bf6f4['BYTE'];break;case mS:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R8UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Du:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R16I'],this['_glPixelTy'+'pe']=_0x4bf6f4['SHORT'];break;case Lu:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R16UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT'];break;case Ru:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R32I'],this['_glPixelTy'+'pe']=_0x4bf6f4['INT'];break;case Vi:this['_glFormat']=_0x4bf6f4['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x4bf6f4['R32UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_I'+'NT'];break;case Ou:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG8I'],this['_glPixelTy'+'pe']=_0x4bf6f4['BYTE'];break;case pS:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG8UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case Fu:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG16I'],this['_glPixelTy'+'pe']=_0x4bf6f4['SHORT'];break;case Nu:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG16UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT'];break;case ku:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG32I'],this['_glPixelTy'+'pe']=_0x4bf6f4['INT'];break;case Uu:this['_glFormat']=_0x4bf6f4['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RG32UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_I'+'NT'];break;case Bu:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA8I'],this['_glPixelTy'+'pe']=_0x4bf6f4['BYTE'];break;case _S:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA8UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_B'+'YTE'];break;case zu:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA16I'],this['_glPixelTy'+'pe']=_0x4bf6f4['SHORT'];break;case Dc:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA16UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_S'+'HORT'];break;case Vu:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA32I'],this['_glPixelTy'+'pe']=_0x4bf6f4['INT'];break;case Ne:this['_glFormat']=_0x4bf6f4['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x4bf6f4['RGBA32UI'],this['_glPixelTy'+'pe']=_0x4bf6f4['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x1*-0xfda+0x1*-0x8ad+-0x274*-0xa);}['upload'](_0x1eb484,_0x2b899e){M['assert'](_0x2b899e['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x2b899e);const _0x132ed3=_0x1eb484['gl'];if(!_0x2b899e['_needsUplo'+'ad']&&(_0x2b899e['_needsMipm'+'apsUpload']&&_0x2b899e['_mipmapsUp'+'loaded']||!_0x2b899e['pot']))return;let _0x2434f1=-0x209*0x7+0x1d*-0xbf+-0x6*-0x5fb,_0x3e79fe,_0x1cc452;const _0x2fb586=_0x2b899e['numLevels'];for(_0x2b899e['array']&&_0x132ed3['texStorage'+'3D'](_0x132ed3['TEXTURE_2D'+'_ARRAY'],_0x2fb586,this['_glInterna'+'lFormat'],_0x2b899e['_width'],_0x2b899e['_height'],_0x2b899e['_arrayLeng'+'th']);_0x2b899e['_levels'][_0x2434f1]||_0x2434f1===0x10ca*-0x2+0x22b*-0x6+0x2e96;){if(!_0x2b899e['_needsUplo'+'ad']&&_0x2434f1===-0x26af+-0x1d46*0x1+-0x9*-0x78d){_0x2434f1++;continue;}else{if(_0x2434f1&&(!_0x2b899e['_needsMipm'+'apsUpload']||!_0x2b899e['_mipmaps']))break;}if(_0x3e79fe=_0x2b899e['_levels'][_0x2434f1],_0x1cc452=(-0x45d+-0x1d67+0x6c1*0x5)/Math['pow'](-0x2*0x10c0+0x1f89+-0x5*-0x65,_0x2434f1),_0x2434f1===-0x29*-0xbf+-0x1db8+0x1*-0xde&&!_0x2b899e['_compresse'+'d']&&!_0x2b899e['_integerFo'+'rmat']&&_0x2b899e['_levels']['length']<_0x2fb586&&(_0x132ed3['generateMi'+'pmap'](this['_glTarget']),_0x2b899e['_mipmapsUp'+'loaded']=!(0x1722+0x60a+0x74b*-0x4)),_0x2b899e['_cubemap']){let _0x26de32;if(_0x1eb484['_isBrowser'+'Interface'](_0x3e79fe[0x1*0xf22+0x7d*0x37+-0x1*0x29fd]))for(_0x26de32=-0x264f+-0x684+0x2cd3;_0x26de32<-0x2447*0x1+-0x157c+0x39c9;_0x26de32++){if(!_0x2b899e['_levelsUpd'+'ated'][-0x268a*0x1+0x1cc*0x6+0x1bc2][_0x26de32])continue;let _0x3b6dc6=_0x3e79fe[_0x26de32];_0x1eb484['_isImageBr'+'owserInter'+'face'](_0x3b6dc6)&&(_0x3b6dc6['width']>_0x1eb484['maxCubeMap'+'Size']||_0x3b6dc6['height']>_0x1eb484['maxCubeMap'+'Size'])&&(_0x3b6dc6=Ep(_0x3b6dc6,_0x1eb484['maxCubeMap'+'Size']),_0x2434f1===0x154f+0x2162*0x1+-0x36b1&&(_0x2b899e['_width']=_0x3b6dc6['width'],_0x2b899e['_height']=_0x3b6dc6['height'])),_0x1eb484['setUnpackF'+'lipY'](!(-0x1b61+-0xf*0x1cd+0x22d*0x19)),_0x1eb484['setUnpackP'+'remultiply'+'Alpha'](_0x2b899e['_premultip'+'lyAlpha']),this['_glCreated']?_0x132ed3['texSubImag'+'e2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,0x6c8+-0x418+-0x2b0,0x1334+0x67c*-0x1+-0xcb8,this['_glFormat'],this['_glPixelTy'+'pe'],_0x3b6dc6):_0x132ed3['texImage2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x3b6dc6);}else for(_0x1cc452=(0xa80+0x12f7+-0x1d76)/Math['pow'](-0x14*0x112+0x706+0x3*0x4cc,_0x2434f1),_0x26de32=0x3*0x7d7+0x20e*-0xf+0x74d;_0x26de32<-0x1*0x1231+-0x1*-0xfb5+0x6*0x6b;_0x26de32++){if(!_0x2b899e['_levelsUpd'+'ated'][-0x1f80+-0x321*-0x6+-0x3*-0x43e][_0x26de32])continue;const _0x1acd3f=_0x3e79fe[_0x26de32];_0x2b899e['_compresse'+'d']?this['_glCreated']&&_0x1acd3f?_0x132ed3['compressed'+'TexSubImag'+'e2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,-0xf22*0x2+-0x16*0x1c4+-0x4*-0x1147,0x241*-0xe+-0x23b*0x1+-0x117*-0x1f,Math['max'](_0x2b899e['_width']*_0x1cc452,0x22a+-0x24e2*0x1+0x22b9),Math['max'](_0x2b899e['_height']*_0x1cc452,0x12f0*-0x1+0x38c+0xf65),this['_glInterna'+'lFormat'],_0x1acd3f):_0x132ed3['compressed'+'TexImage2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](_0x2b899e['_width']*_0x1cc452,0x8d6+0x721+-0xff6),Math['max'](_0x2b899e['_height']*_0x1cc452,0x965+-0x2042+0x16de),-0x437+-0x1*-0x1c4b+-0x17*0x10c,_0x1acd3f):(_0x1eb484['setUnpackF'+'lipY'](!(-0x1*-0x100f+0x148b+0x2499*-0x1)),_0x1eb484['setUnpackP'+'remultiply'+'Alpha'](_0x2b899e['_premultip'+'lyAlpha']),this['_glCreated']&&_0x1acd3f?_0x132ed3['texSubImag'+'e2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,-0x1*0x1def+-0x108c+0xa3*0x49,0x497+0xb0b+-0xfa2,Math['max'](_0x2b899e['_width']*_0x1cc452,-0x1*0x13af+0x1dbc*-0x1+-0x2*-0x18b6),Math['max'](_0x2b899e['_height']*_0x1cc452,-0x1f3*0x4+0x1e9f+-0x16d2),this['_glFormat'],this['_glPixelTy'+'pe'],_0x1acd3f):_0x132ed3['texImage2D'](_0x132ed3['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x26de32,_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](_0x2b899e['_width']*_0x1cc452,0x17a*-0x16+0x21a1+-0x124),Math['max'](_0x2b899e['_height']*_0x1cc452,-0x8*0x9f+-0x24f+0x748),-0xde+-0x777+0x855,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1acd3f));}}else{if(_0x2b899e['_volume'])_0x2b899e['_compresse'+'d']?_0x132ed3['compressed'+'TexImage3D'](_0x132ed3['TEXTURE_3D'],_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](_0x2b899e['_width']*_0x1cc452,-0x11bf+0x405+-0x5f*-0x25),Math['max'](_0x2b899e['_height']*_0x1cc452,0x2186+0x5*0x5cf+-0x3e90),Math['max'](_0x2b899e['_depth']*_0x1cc452,-0x1*0x641+-0x1f9d+-0x5*-0x793),-0x2*0x661+-0x3e1*-0x1+0x8e1,_0x3e79fe):(_0x1eb484['setUnpackF'+'lipY'](!(0x1b*-0xd3+-0xed5*-0x1+-0x76d*-0x1)),_0x1eb484['setUnpackP'+'remultiply'+'Alpha'](_0x2b899e['_premultip'+'lyAlpha']),_0x132ed3['texImage3D'](_0x132ed3['TEXTURE_3D'],_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](_0x2b899e['_width']*_0x1cc452,0x175e+-0x1281+-0x26e*0x2),Math['max'](_0x2b899e['_height']*_0x1cc452,-0xac5+-0x1dba+0x2880),Math['max'](_0x2b899e['_depth']*_0x1cc452,0x24*0x16+0x1398+-0x16af),0xdf*0x11+-0x13*-0x206+-0x3541,this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe));else{if(_0x2b899e['array']&&typeof _0x3e79fe=='object'){if(_0x2b899e['_arrayLeng'+'th']===_0x3e79fe['length']){if(_0x2b899e['_compresse'+'d']){for(let _0x49a619=0xa35*0x3+0x10b1*0x1+-0xbd4*0x4;_0x49a619<_0x2b899e['_arrayLeng'+'th'];_0x49a619++)_0x132ed3['compressed'+'TexSubImag'+'e3D'](_0x132ed3['TEXTURE_2D'+'_ARRAY'],_0x2434f1,0x1*0xbd6+0x450+-0x3*0x562,0x104*-0xf+-0x1006+0x1f42,_0x49a619,Math['max'](Math['floor'](_0x2b899e['_width']*_0x1cc452),0x6d7+-0x154*-0xe+-0x196e),Math['max'](Math['floor'](_0x2b899e['_height']*_0x1cc452),0x7a4*-0x3+-0x26b0+0x1*0x3d9d),0x46*-0x1f+0x1cf9*0x1+0x3d*-0x56,this['_glInterna'+'lFormat'],_0x3e79fe[_0x49a619]);}else{for(let _0x182e1f=-0x1*0x7e3+-0xd92+0x1575;_0x182e1f<_0x2b899e['_arrayLeng'+'th'];_0x182e1f++)_0x132ed3['texSubImag'+'e3D'](_0x132ed3['TEXTURE_2D'+'_ARRAY'],_0x2434f1,-0x1*-0xd6+-0x1639+0x3*0x721,0x17*0x147+-0x29*-0xe+-0x653*0x5,_0x182e1f,Math['max'](Math['floor'](_0x2b899e['_width']*_0x1cc452),0x1*0x113f+0xf18+0x1*-0x2056),Math['max'](Math['floor'](_0x2b899e['_height']*_0x1cc452),0x1216*0x2+0x2123*-0x1+-0xc2*0x4),-0x1bb*-0x14+0x26b8+-0x1871*0x3,this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe[_0x182e1f]);}}}else{if(_0x1eb484['_isBrowser'+'Interface'](_0x3e79fe)){_0x1eb484['_isImageBr'+'owserInter'+'face'](_0x3e79fe)&&(_0x3e79fe['width']>_0x1eb484['maxTexture'+'Size']||_0x3e79fe['height']>_0x1eb484['maxTexture'+'Size'])&&(_0x3e79fe=Ep(_0x3e79fe,_0x1eb484['maxTexture'+'Size']),_0x2434f1===0x3*-0xa31+0x1071+-0x711*-0x2&&(_0x2b899e['_width']=_0x3e79fe['width'],_0x2b899e['_height']=_0x3e79fe['height']));const _0x15ab21=_0x3e79fe['width']||_0x3e79fe['videoWidth'],_0x37e7ef=_0x3e79fe['height']||_0x3e79fe['videoHeigh'+'t'];_0x1eb484['setUnpackF'+'lipY'](_0x2b899e['_flipY']),_0x1eb484['setUnpackP'+'remultiply'+'Alpha'](_0x2b899e['_premultip'+'lyAlpha']),this['_glCreated']&&_0x2b899e['_width']===_0x15ab21&&_0x2b899e['_height']===_0x37e7ef&&!_0x1eb484['_isImageVi'+'deoInterfa'+'ce'](_0x3e79fe)?_0x132ed3['texSubImag'+'e2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,-0x140e+0x5*0x223+0x95f,-0x1af1+0x2231+-0x740,this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe):(_0x132ed3['texImage2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe),_0x2434f1===-0xffa+0x1cac+-0xcb2&&(_0x2b899e['_width']=_0x15ab21,_0x2b899e['_height']=_0x37e7ef));}else _0x1cc452=(-0x1ec0+-0x5e3*0x1+0x24a4)/Math['pow'](0x46e*-0x6+-0x23c3+0x3e59,_0x2434f1),_0x2b899e['_compresse'+'d']?this['_glCreated']&&_0x3e79fe?_0x132ed3['compressed'+'TexSubImag'+'e2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,-0x1*0x18fd+0x3ad*0x1+-0x4*-0x554,0xf54+0x27*-0x6+-0x5*0x2e2,Math['max'](Math['floor'](_0x2b899e['_width']*_0x1cc452),0x1*-0x173a+-0x1*0x2d7+0x1a12),Math['max'](Math['floor'](_0x2b899e['_height']*_0x1cc452),-0x21e2+-0x1*0x82f+0x2a12),this['_glInterna'+'lFormat'],_0x3e79fe):_0x132ed3['compressed'+'TexImage2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x2b899e['_width']*_0x1cc452),0x80f*0x3+0x2685+-0x3eb1),Math['max'](Math['floor'](_0x2b899e['_height']*_0x1cc452),-0x2*0xb85+0x103c+0x6cf),-0xf3*-0x11+0x1*0x1c5a+0x1*-0x2c7d,_0x3e79fe):(_0x1eb484['setUnpackF'+'lipY'](!(0x935*0x3+0x1*0x1dd+-0x1d7b)),_0x1eb484['setUnpackP'+'remultiply'+'Alpha'](_0x2b899e['_premultip'+'lyAlpha']),this['_glCreated']&&_0x3e79fe?_0x132ed3['texSubImag'+'e2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,0x137+0x143f+0x1576*-0x1,-0x1f8e+0x1509+-0x1*-0xa85,Math['max'](_0x2b899e['_width']*_0x1cc452,0x5*0x7b5+0x3*0x6d5+-0x3b07),Math['max'](_0x2b899e['_height']*_0x1cc452,-0x153c+0xe4a+0x6f3),this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe):_0x132ed3['texImage2D'](_0x132ed3['TEXTURE_2D'],_0x2434f1,this['_glInterna'+'lFormat'],Math['max'](_0x2b899e['_width']*_0x1cc452,0x128d+-0x9f1+-0x1*0x89b),Math['max'](_0x2b899e['_height']*_0x1cc452,-0x1*-0x1efd+-0x1*-0x2513+0x7*-0x9b9),0xa*-0x337+0x1*0x3a9+0x1c7d,this['_glFormat'],this['_glPixelTy'+'pe'],_0x3e79fe));_0x2434f1===0xb13+-0x1ddb+-0x4*-0x4b2?_0x2b899e['_mipmapsUp'+'loaded']=!(-0x4*-0x46d+-0x16*0x20+-0xef3):_0x2b899e['_mipmapsUp'+'loaded']=!(-0x2eb*-0x9+0x1*0x10ff+-0x2b42);}}}_0x2434f1++;}if(_0x2b899e['_needsUplo'+'ad']){if(_0x2b899e['_cubemap']){for(let _0x929e16=0x126d+0x12f*-0x7+-0x1*0xa24;_0x929e16<-0x136d*0x2+0x1*-0x26d3+-0x1*-0x4db3;_0x929e16++)_0x2b899e['_levelsUpd'+'ated'][0x689*-0x5+0x1*0x2bf+0x1dee][_0x929e16]=!(-0x1697+0x2677+-0xfdf);}else _0x2b899e['_levelsUpd'+'ated'][-0x1*0x725+0x1*0x2277+-0x1b52]=!(0xe43+0x7*-0x31+0xceb*-0x1);}!_0x2b899e['_compresse'+'d']&&!_0x2b899e['_integerFo'+'rmat']&&_0x2b899e['_mipmaps']&&_0x2b899e['_needsMipm'+'apsUpload']&&_0x2b899e['_levels']['length']===0x1c0a+-0x1951+-0x57*0x8&&(_0x132ed3['generateMi'+'pmap'](this['_glTarget']),_0x2b899e['_mipmapsUp'+'loaded']=!(0x645*-0x6+-0x141*-0x17+0x8c7)),_0x2b899e['_gpuSize']&&_0x2b899e['adjustVram'+'SizeTracki'+'ng'](_0x1eb484['_vram'],-_0x2b899e['_gpuSize']),_0x2b899e['_gpuSize']=_0x2b899e['gpuSize'],_0x2b899e['adjustVram'+'SizeTracki'+'ng'](_0x1eb484['_vram'],_0x2b899e['_gpuSize']),this['_glCreated']=!(-0x10a7+0xb87+0x520);}['read'](_0x550579,_0x15f27d,_0x10d812,_0x48153b,_0xddd0be){const _0x3bd644=this['texture'];return _0x3bd644['device']['readTextur'+'eAsync'](_0x3bd644,_0x550579,_0x15f27d,_0x10d812,_0x48153b,_0xddd0be);}['write'](_0xbb64f3,_0x82cea3,_0x51fc5d,_0x4b4249,_0x5ce6f5){const {texture:_0x46a305}=this,{device:_0x253d2b}=_0x46a305;return _0x253d2b['setTexture'](_0x46a305,0x346*0xb+-0xbf*-0x1+-0x24c1),_0x253d2b['writeTextu'+'reAsync'](_0x46a305,_0xbb64f3,_0x82cea3,_0x51fc5d,_0x4b4249,_0x5ce6f5);}}class dT{constructor(_0x6e1ebe,_0x5a4ff7){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x6e1ebe,this['resolveFB']=_0x5a4ff7);}['destroy'](_0x2c6af7){this['msaaFB']&&(_0x2c6af7['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x2c6af7['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class fT{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x4*-0x1ec+0xad+-0x85c));}['destroy'](_0x51631a){var _0x348e89;const _0x3605a4=_0x51631a['gl'];this['_isInitial'+'ized']=!(-0x8df+0x16c*0x1+0x774),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x3605a4['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x3605a4['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x3605a4['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x541eef=>{_0x3605a4['deleteRend'+'erbuffer'](_0x541eef);}),this['_glMsaaCol'+'orBuffers']['length']=0x1a42+0x1284+-0x2cc6,(_0x348e89=this['colorMrtFr'+'amebuffers'])==null||_0x348e89['forEach'](_0x3aaef5=>{_0x3aaef5['destroy'](_0x3605a4);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&ad(_0x51631a)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(0x1be6+0x197*0x1+0x1d7d*-0x1);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x18bbb7,_0x1e1200){var _0x32a1e9,_0x1b1730;const _0x106fc5=_0x18bbb7['gl'];M['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x1cbd+-0x88b+-0x1432);const _0xb822dd=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(0xb58+-0x3cd*-0x8+-0x29c0))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{M['call'](()=>{(_0x1e1200['width']<=0x24b3+-0x2109+-0x3aa||_0x1e1200['height']<=-0x15f+0x2*0x11fb+-0x2297)&&M['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x1e1200['width']+'\x20x\x20'+_0x1e1200['height'],_0x1e1200);}),this['_glFrameBu'+'ffer']=_0x106fc5['createFram'+'ebuffer'](),_0x18bbb7['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x485df9=((_0x32a1e9=_0x1e1200['_colorBuff'+'ers'])==null?void(-0xd15*-0x2+0xc0e+-0x2638):_0x32a1e9['length'])??-0x6*-0x587+-0x215c+0x32,_0x502198=_0x106fc5['COLOR_ATTA'+'CHMENT0'];for(let _0x4f3e73=0xdf3+0x48d*-0x4+0x441*0x1;_0x4f3e73<_0x485df9;++_0x4f3e73){const _0x4b2ccd=_0x1e1200['getColorBu'+'ffer'](_0x4f3e73);_0x4b2ccd&&(_0x4b2ccd['impl']['_glTexture']||(_0x4b2ccd['_width']=Math['min'](_0x4b2ccd['width'],_0x18bbb7['maxRenderB'+'ufferSize']),_0x4b2ccd['_height']=Math['min'](_0x4b2ccd['height'],_0x18bbb7['maxRenderB'+'ufferSize']),_0x18bbb7['setTexture'](_0x4b2ccd,0x1e4*0xa+0x2119+-0x1*0x3401)),_0x106fc5['framebuffe'+'rTexture2D'](_0x106fc5['FRAMEBUFFE'+'R'],_0x502198+_0x4f3e73,_0x4b2ccd['_cubemap']?_0x106fc5['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x1e1200['_face']:_0x106fc5['TEXTURE_2D'],_0x4b2ccd['impl']['_glTexture'],_0x1e1200['mipLevel']),_0xb822dd['push'](_0x502198+_0x4f3e73));}_0x106fc5['drawBuffer'+'s'](_0xb822dd);const _0x3836c9=_0x1e1200['_depthBuff'+'er'];if(_0x3836c9||_0x1e1200['_depth']){const _0x26a761=_0x1e1200['_stencil']?_0x106fc5['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x106fc5['DEPTH_ATTA'+'CHMENT'];if(_0x3836c9)_0x3836c9['impl']['_glTexture']||(_0x3836c9['_width']=Math['min'](_0x3836c9['width'],_0x18bbb7['maxRenderB'+'ufferSize']),_0x3836c9['_height']=Math['min'](_0x3836c9['height'],_0x18bbb7['maxRenderB'+'ufferSize']),_0x18bbb7['setTexture'](_0x3836c9,-0x1a26*-0x1+-0x1626+-0x400)),_0x106fc5['framebuffe'+'rTexture2D'](_0x106fc5['FRAMEBUFFE'+'R'],_0x26a761,_0x3836c9['_cubemap']?_0x106fc5['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x1e1200['_face']:_0x106fc5['TEXTURE_2D'],_0x1e1200['_depthBuff'+'er']['impl']['_glTexture'],_0x1e1200['mipLevel']);else{if(!(_0x1e1200['_samples']>0x3*0x617+0x3*-0xc3+-0xffb)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x106fc5['createRend'+'erbuffer']());const _0x490fd9=_0x1e1200['_stencil']?_0x106fc5['DEPTH24_ST'+'ENCIL8']:_0x106fc5['DEPTH_COMP'+'ONENT32F'];_0x106fc5['bindRender'+'buffer'](_0x106fc5['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x106fc5['renderbuff'+'erStorage'](_0x106fc5['RENDERBUFF'+'ER'],_0x490fd9,_0x1e1200['width'],_0x1e1200['height']),_0x106fc5['framebuffe'+'rRenderbuf'+'fer'](_0x106fc5['FRAMEBUFFE'+'R'],_0x26a761,_0x106fc5['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x106fc5['bindRender'+'buffer'](_0x106fc5['RENDERBUFF'+'ER'],null);}}}M['call'](()=>this['_checkFbo'](_0x18bbb7,_0x1e1200));}if(_0x1e1200['_samples']>-0x56*-0x4b+0x1d74+0x1*-0x36a5){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x106fc5['createFram'+'ebuffer'](),_0x18bbb7['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x12f5ee=((_0x1b1730=_0x1e1200['_colorBuff'+'ers'])==null?void(0x242*-0x1+0xf*0x25c+-0x2122):_0x1b1730['length'])??0x18d6+-0x25d2+0xcfc;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(0x1*-0x25f2+-0x4cb+0xe3f*0x3)){const _0x5e1312=_0x106fc5['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x5e1312);const _0x96af14=_0x18bbb7['backBuffer'+'Format']===Oe?_0x106fc5['RGBA8']:_0x106fc5['RGB8'];_0x106fc5['bindRender'+'buffer'](_0x106fc5['RENDERBUFF'+'ER'],_0x5e1312),_0x106fc5['renderbuff'+'erStorageM'+'ultisample'](_0x106fc5['RENDERBUFF'+'ER'],_0x1e1200['_samples'],_0x96af14,_0x1e1200['width'],_0x1e1200['height']),_0x106fc5['framebuffe'+'rRenderbuf'+'fer'](_0x106fc5['FRAMEBUFFE'+'R'],_0x106fc5['COLOR_ATTA'+'CHMENT0'],_0x106fc5['RENDERBUFF'+'ER'],_0x5e1312);}else for(let _0x23067e=-0x4*0x8b+-0x26ef+-0x291b*-0x1;_0x23067e<_0x12f5ee;++_0x23067e){const _0x365cf6=_0x1e1200['getColorBu'+'ffer'](_0x23067e);if(_0x365cf6){const _0x4f7dda=_0x106fc5['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x4f7dda),_0x106fc5['bindRender'+'buffer'](_0x106fc5['RENDERBUFF'+'ER'],_0x4f7dda),_0x106fc5['renderbuff'+'erStorageM'+'ultisample'](_0x106fc5['RENDERBUFF'+'ER'],_0x1e1200['_samples'],_0x365cf6['impl']['_glInterna'+'lFormat'],_0x1e1200['width'],_0x1e1200['height']),_0x106fc5['framebuffe'+'rRenderbuf'+'fer'](_0x106fc5['FRAMEBUFFE'+'R'],_0x106fc5['COLOR_ATTA'+'CHMENT0']+_0x23067e,_0x106fc5['RENDERBUFF'+'ER'],_0x4f7dda);}}if(_0x1e1200['_depth']){M['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x53c2ed=_0x1e1200['_stencil']?_0x106fc5['DEPTH24_ST'+'ENCIL8']:_0x106fc5['DEPTH_COMP'+'ONENT32F'],_0x11f6f6=_0x1e1200['_stencil']?_0x106fc5['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x106fc5['DEPTH_ATTA'+'CHMENT'];let _0x25cffc;const _0x4cae80=_0x1e1200['_depthBuff'+'er'];_0x4cae80&&(_0x25cffc=_0x4cae80['id']+':'+_0x1e1200['width']+':'+_0x1e1200['height']+':'+_0x1e1200['_samples']+':'+_0x53c2ed+':'+_0x11f6f6,this['_glMsaaDep'+'thBuffer']=ad(_0x18bbb7)['get'](_0x25cffc)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x106fc5['createRend'+'erbuffer'](),_0x106fc5['bindRender'+'buffer'](_0x106fc5['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x106fc5['renderbuff'+'erStorageM'+'ultisample'](_0x106fc5['RENDERBUFF'+'ER'],_0x1e1200['_samples'],_0x53c2ed,_0x1e1200['width'],_0x1e1200['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x106fc5['deleteRend'+'erbuffer'](this);},_0x4cae80&&ad(_0x18bbb7)['set'](_0x25cffc,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x25cffc,_0x106fc5['framebuffe'+'rRenderbuf'+'fer'](_0x106fc5['FRAMEBUFFE'+'R'],_0x11f6f6,_0x106fc5['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}M['call'](()=>this['_checkFbo'](_0x18bbb7,_0x1e1200,'MSAA')),_0x12f5ee>0x1c5c+-0x13dc*-0x1+-0x3037&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x18bbb7,_0x1e1200,_0x12f5ee),_0x18bbb7['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x106fc5['drawBuffer'+'s'](_0xb822dd));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x309898,_0x17e05b,_0x487fe5){const _0x477f36=_0x309898['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0xd6a179=-0x5*-0x453+0xb8d*-0x2+0x17b;_0xd6a179<_0x487fe5;++_0xd6a179){const _0x509634=_0x17e05b['getColorBu'+'ffer'](_0xd6a179),_0x1cb9cd=_0x477f36['createFram'+'ebuffer']();_0x309898['setFramebu'+'ffer'](_0x1cb9cd);const _0x57a4ad=this['_glMsaaCol'+'orBuffers'][_0xd6a179];_0x477f36['bindRender'+'buffer'](_0x477f36['RENDERBUFF'+'ER'],_0x57a4ad),_0x477f36['renderbuff'+'erStorageM'+'ultisample'](_0x477f36['RENDERBUFF'+'ER'],_0x17e05b['_samples'],_0x509634['impl']['_glInterna'+'lFormat'],_0x17e05b['width'],_0x17e05b['height']),_0x477f36['framebuffe'+'rRenderbuf'+'fer'](_0x477f36['FRAMEBUFFE'+'R'],_0x477f36['COLOR_ATTA'+'CHMENT0'],_0x477f36['RENDERBUFF'+'ER'],_0x57a4ad),_0x477f36['drawBuffer'+'s']([_0x477f36['COLOR_ATTA'+'CHMENT0']]),M['call'](()=>this['_checkFbo'](_0x309898,_0x17e05b,'MSAA-MRT-s'+'rc'+_0xd6a179));const _0x15b642=_0x477f36['createFram'+'ebuffer']();_0x309898['setFramebu'+'ffer'](_0x15b642),_0x477f36['framebuffe'+'rTexture2D'](_0x477f36['FRAMEBUFFE'+'R'],_0x477f36['COLOR_ATTA'+'CHMENT0'],_0x509634['_cubemap']?_0x477f36['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x17e05b['_face']:_0x477f36['TEXTURE_2D'],_0x509634['impl']['_glTexture'],-0xd30*0x2+-0x17a7+-0x58f*-0x9),this['colorMrtFr'+'amebuffers'][_0xd6a179]=new dT(_0x1cb9cd,_0x15b642),M['call'](()=>this['_checkFbo'](_0x309898,_0x17e05b,'MSAA-MRT-d'+'st'+_0xd6a179));}}['_checkFbo'](_0x442118,_0x24e90a,_0x2c0feb=''){const _0x4b6157=_0x442118['gl'],_0x75fc02=_0x4b6157['checkFrame'+'bufferStat'+'us'](_0x4b6157['FRAMEBUFFE'+'R']);let _0x2d809f;switch(_0x75fc02){case _0x4b6157['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x2d809f='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x4b6157['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x2d809f='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x4b6157['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x2d809f='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x4b6157['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x2d809f='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}M['assert'](!_0x2d809f,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x2d809f+(',\x20render\x20t'+'arget:\x20')+_0x24e90a['name']+'\x20'+_0x2c0feb,_0x24e90a);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0xd57+0x1aae+-0xf*0x2ab,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(0x14d*0x1d+0x1*0xa01+-0x2fba),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(-0xf07*0x2+-0xb2*0x1+0x1ec0),this['_isInitial'+'ized']=!(0x491*-0x3+-0x2577+0x332b*0x1);}['internalRe'+'solve'](_0x3f6d62,_0x2ba04c,_0x41a9a0,_0x5c7055,_0x122fa7){M['assert'](_0x2ba04c!==_0x41a9a0,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x3f6d62['setScissor'](0x16e0+0x256c+-0x3c4c,-0xeb*0x15+0x1659*0x1+-0x312,_0x5c7055['width'],_0x5c7055['height']);const _0x34c7ff=_0x3f6d62['gl'];_0x34c7ff['bindFrameb'+'uffer'](_0x34c7ff['READ_FRAME'+'BUFFER'],_0x2ba04c),_0x34c7ff['bindFrameb'+'uffer'](_0x34c7ff['DRAW_FRAME'+'BUFFER'],_0x41a9a0),_0x34c7ff['blitFrameb'+'uffer'](-0x1*-0x81b+-0x3ae+-0x46d,0x1e0e+-0x124+-0x2*0xe75,_0x5c7055['width'],_0x5c7055['height'],0x1*0x1ed5+0xb89+-0x2a5e,0xa6c*-0x1+-0x37*-0x76+0xd*-0x126,_0x5c7055['width'],_0x5c7055['height'],_0x122fa7,_0x34c7ff['NEAREST']);}['resolve'](_0x57e8e7,_0x2036fe,_0x443ed4,_0x203e1a){const _0x31bb4a=_0x57e8e7['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x443ed4)for(let _0x52f098=-0xc*-0x1e7+0x1bcd+-0x32a1;_0x52f098<this['colorMrtFr'+'amebuffers']['length'];_0x52f098++){const _0x20781e=this['colorMrtFr'+'amebuffers'][_0x52f098];Q['pushGpuMar'+'ker'](_0x57e8e7,'RESOLVE-MR'+'T'+_0x52f098),this['internalRe'+'solve'](_0x57e8e7,_0x20781e['msaaFB'],_0x20781e['resolveFB'],_0x2036fe,_0x31bb4a['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x57e8e7);}_0x203e1a&&(Q['pushGpuMar'+'ker'](_0x57e8e7,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x57e8e7,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x2036fe,_0x31bb4a['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x57e8e7));}else Q['pushGpuMar'+'ker'](_0x57e8e7,'RESOLVE'),this['internalRe'+'solve'](_0x57e8e7,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x2036fe,(_0x443ed4?_0x31bb4a['COLOR_BUFF'+'ER_BIT']:-0xbc2+-0x103c+0x1bfe)|(_0x203e1a?_0x31bb4a['DEPTH_BUFF'+'ER_BIT']:0x61*0x3+-0x1*-0xdd9+0x112*-0xe)),Q['popGpuMark'+'er'](_0x57e8e7);_0x31bb4a['bindFrameb'+'uffer'](_0x31bb4a['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class uT{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0xa5787b){this['queries']['forEach'](_0x122daf=>_0xa5787b['deleteQuer'+'y'](_0x122daf)),this['queries']=null;}}class mT extends tT{constructor(_0x37b699){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x37b699,this['ext']=_0x37b699['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x531b0f=>this['device']['gl']['deleteQuer'+'y'](_0x531b0f)),this['frameQueri'+'es']['forEach'](_0x34dd7a=>this['device']['gl']['deleteQuer'+'y'](_0x34dd7a)),this['previousFr'+'ameQueries']['forEach'](_0x406c58=>_0x406c58['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x1acec9){if(this['ext']){const _0x1d1a84=this['getSlot'](_0x1acec9),_0x2606b9=this['getQuery']();return this['frameQueri'+'es'][_0x1d1a84]=_0x2606b9,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x2606b9),_0x1d1a84;}}['end'](_0x1278ad){_0x1278ad!==void(0x270f+-0x1a56+-0xcb9)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0xc733eb=this['ext'],_0x45f953=this['device']['gl'],_0x4bfeb3=this['device']['renderVers'+'ion'],_0x29b098=this['frameQueri'+'es'];if(_0x29b098['length']>0x41b+-0x26ff+0x22e4){this['frameQueri'+'es']=[];const _0x51025b=new uT();_0x51025b['queries']=_0x29b098,_0x51025b['renderVers'+'ion']=_0x4bfeb3,this['previousFr'+'ameQueries']['push'](_0x51025b);}if(this['previousFr'+'ameQueries']['length']>-0x1*-0x8cb+0x19*0xe1+-0x1ec4){const _0xda0eb0=this['previousFr'+'ameQueries'][-0x3*0x915+0xabe+-0x1081*-0x1],_0x441577=_0xda0eb0['queries'],_0x820cc9=_0x441577[_0x441577['length']-(-0x206b+0x1d21+0x34b)],_0x121dff=_0x45f953['getQueryPa'+'rameter'](_0x820cc9,_0x45f953['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x535c35=_0x45f953['getParamet'+'er'](_0xc733eb['GPU_DISJOI'+'NT_EXT']);if(_0x121dff&&!_0x535c35){this['previousFr'+'ameQueries']['shift']();const _0x3077bb=this['timings'];_0x3077bb['length']=0xd2d*0x1+-0x19d9*-0x1+-0x7ce*0x5;for(let _0x134320=0x22c4+0x10e4+-0x33a8;_0x134320<_0x441577['length'];_0x134320++){const _0x421b6f=_0x441577[_0x134320],_0x2458bb=_0x45f953['getQueryPa'+'rameter'](_0x421b6f,_0x45f953['QUERY_RESU'+'LT']);_0x3077bb[_0x134320]=_0x2458bb*(-0x137*0x20+0x95*-0x2f+-0xd3f*-0x5+0.000001),this['freeQuerie'+'s']['push'](_0x421b6f);}this['report'](_0xda0eb0['renderVers'+'ion'],_0x3077bb);}_0x535c35&&(this['previousFr'+'ameQueries']['forEach'](_0x3f2db3=>{this['report'](_0x3f2db3['renderVers'+'ion'],null),_0x3f2db3['destroy'](_0x45f953);}),this['previousFr'+'ameQueries']['length']=-0x17*-0x161+0x2410+0x1*-0x43c7);}super['request'](_0x4bfeb3);}}}const ga=[];class pT extends zh{constructor(_0x2ae875,_0x505ac2={}){super(_0x2ae875,_0x505ac2),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0xd31+0x2078+-0x79c*0x6)),(_0x505ac2=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(-0x1f88+-0x20d6+-0x405f*-0x1),this['_contextLo'+'stHandler']=_0x100a99=>{_0x100a99['preventDef'+'ault'](),this['loseContex'+'t'](),M['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{M['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x3aa172=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x3aa172&&_0x3aa172['includes']('AppleWebKi'+'t')&&(_0x3aa172['includes']('15.4')||_0x3aa172['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x505ac2['antialias']=!(-0x5*0x67+-0x5a2+0xb*0xb2),M['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Me['browserNam'+'e']==='firefox'){const _0x37ecc2=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x3b64ea=_0x37ecc2?_0x37ecc2[0xc37+0x1700+-0x2*0x119b]:null;if(_0x3b64ea){const _0x4e8295=parseFloat(_0x3b64ea);(Me['name']==='windows'&&(_0x4e8295>=-0x1a32+0x19a*0x14+-0x55e||_0x4e8295===-0x37*-0x43+-0x173d+0x3d*0x27)||Me['name']==='android'&&_0x4e8295>=0x7c1*-0x3+-0x4c*-0x61+-0x505*0x1)&&(_0x505ac2['antialias']=!(0x1*0x1bb9+-0xcfe+-0x2*0x75d),M['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Me['name']+('\x20platform\x20'+'version\x20')+_0x3b64ea));}}this['backBuffer'+'Antialias']=_0x505ac2['antialias']??!(-0x9a8*0x1+0x20*0x120+0x265*-0xb),_0x505ac2['antialias']=!(-0x17b7+0x71*0x1+0x1*0x1747);const _0xcbe242=_0x505ac2['gl']??_0x2ae875['getContext']('webgl2',_0x505ac2);if(!_0xcbe242)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0xcbe242,this['isWebGL2']=!(0x742*-0x1+0x13b6+-0xc74),this['_deviceTyp'+'e']=px,this['updateBack'+'bufferForm'+'at'](null);const _0x5a4977=Me['browserNam'+'e']==='chrome',_0x58ae07=Me['browserNam'+'e']==='safari',_0x28de18=Me['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(-0x1741+-0x2689+-0x3*-0x1499);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x58ae07,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x28de18&&_0x5a4977&&!_0x505ac2['alpha'],_0x2ae875['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x307*-0x7+-0x161*-0x4+0x6ad*-0x4)),_0x2ae875['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0x11dd+0x24d*0x1+0xf91)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x58ae07&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0xcbe242['SAMPLER_2D'],_0xcbe242['SAMPLER_CU'+'BE'],_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0xcbe242['INT_SAMPLE'+'R_2D'],_0xcbe242['SAMPLER_2D'+'_SHADOW'],_0xcbe242['SAMPLER_CU'+'BE_SHADOW'],_0xcbe242['SAMPLER_3D'],_0xcbe242['INT_SAMPLE'+'R_3D'],_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0xcbe242['SAMPLER_2D'+'_ARRAY'],_0xcbe242['INT_SAMPLE'+'R_2D_ARRAY'],_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0xcbe242['REPEAT'],_0xcbe242['CLAMP_TO_E'+'DGE'],_0xcbe242['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0xcbe242['FUNC_ADD'],_0xcbe242['FUNC_SUBTR'+'ACT'],_0xcbe242['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0xcbe242['MIN'],_0xcbe242['MAX']],this['glBlendFun'+'ctionColor']=[_0xcbe242['ZERO'],_0xcbe242['ONE'],_0xcbe242['SRC_COLOR'],_0xcbe242['ONE_MINUS_'+'SRC_COLOR'],_0xcbe242['DST_COLOR'],_0xcbe242['ONE_MINUS_'+'DST_COLOR'],_0xcbe242['SRC_ALPHA'],_0xcbe242['SRC_ALPHA_'+'SATURATE'],_0xcbe242['ONE_MINUS_'+'SRC_ALPHA'],_0xcbe242['DST_ALPHA'],_0xcbe242['ONE_MINUS_'+'DST_ALPHA'],_0xcbe242['CONSTANT_C'+'OLOR'],_0xcbe242['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0xcbe242['ZERO'],_0xcbe242['ONE'],_0xcbe242['SRC_COLOR'],_0xcbe242['ONE_MINUS_'+'SRC_COLOR'],_0xcbe242['DST_COLOR'],_0xcbe242['ONE_MINUS_'+'DST_COLOR'],_0xcbe242['SRC_ALPHA'],_0xcbe242['SRC_ALPHA_'+'SATURATE'],_0xcbe242['ONE_MINUS_'+'SRC_ALPHA'],_0xcbe242['DST_ALPHA'],_0xcbe242['ONE_MINUS_'+'DST_ALPHA'],_0xcbe242['CONSTANT_A'+'LPHA'],_0xcbe242['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0xcbe242['NEVER'],_0xcbe242['LESS'],_0xcbe242['EQUAL'],_0xcbe242['LEQUAL'],_0xcbe242['GREATER'],_0xcbe242['NOTEQUAL'],_0xcbe242['GEQUAL'],_0xcbe242['ALWAYS']],this['glStencilO'+'p']=[_0xcbe242['KEEP'],_0xcbe242['ZERO'],_0xcbe242['REPLACE'],_0xcbe242['INCR'],_0xcbe242['INCR_WRAP'],_0xcbe242['DECR'],_0xcbe242['DECR_WRAP'],_0xcbe242['INVERT']],this['glClearFla'+'g']=[0x12*0x1f0+-0x1d*0x5d+-0x1857*0x1,_0xcbe242['COLOR_BUFF'+'ER_BIT'],_0xcbe242['DEPTH_BUFF'+'ER_BIT'],_0xcbe242['COLOR_BUFF'+'ER_BIT']|_0xcbe242['DEPTH_BUFF'+'ER_BIT'],_0xcbe242['STENCIL_BU'+'FFER_BIT'],_0xcbe242['STENCIL_BU'+'FFER_BIT']|_0xcbe242['COLOR_BUFF'+'ER_BIT'],_0xcbe242['STENCIL_BU'+'FFER_BIT']|_0xcbe242['DEPTH_BUFF'+'ER_BIT'],_0xcbe242['STENCIL_BU'+'FFER_BIT']|_0xcbe242['COLOR_BUFF'+'ER_BIT']|_0xcbe242['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[-0x5d7+-0x5*-0xe3+-0x5*-0x48,_0xcbe242['BACK'],_0xcbe242['FRONT'],_0xcbe242['FRONT_AND_'+'BACK']],this['glFilter']=[_0xcbe242['NEAREST'],_0xcbe242['LINEAR'],_0xcbe242['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0xcbe242['NEAREST_MI'+'PMAP_LINEA'+'R'],_0xcbe242['LINEAR_MIP'+'MAP_NEARES'+'T'],_0xcbe242['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0xcbe242['POINTS'],_0xcbe242['LINES'],_0xcbe242['LINE_LOOP'],_0xcbe242['LINE_STRIP'],_0xcbe242['TRIANGLES'],_0xcbe242['TRIANGLE_S'+'TRIP'],_0xcbe242['TRIANGLE_F'+'AN']],this['glType']=[_0xcbe242['BYTE'],_0xcbe242['UNSIGNED_B'+'YTE'],_0xcbe242['SHORT'],_0xcbe242['UNSIGNED_S'+'HORT'],_0xcbe242['INT'],_0xcbe242['UNSIGNED_I'+'NT'],_0xcbe242['FLOAT'],_0xcbe242['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0xcbe242['BOOL']]=on,this['pcUniformT'+'ype'][_0xcbe242['INT']]=sa,this['pcUniformT'+'ype'][_0xcbe242['FLOAT']]=Us,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_VEC2']]=ia,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_VEC3']]=rs,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_VEC4']]=gn,this['pcUniformT'+'ype'][_0xcbe242['INT_VEC2']]=qr,this['pcUniformT'+'ype'][_0xcbe242['INT_VEC3']]=jr,this['pcUniformT'+'ype'][_0xcbe242['INT_VEC4']]=Yr,this['pcUniformT'+'ype'][_0xcbe242['BOOL_VEC2']]=Lo,this['pcUniformT'+'ype'][_0xcbe242['BOOL_VEC3']]=Ro,this['pcUniformT'+'ype'][_0xcbe242['BOOL_VEC4']]=Oo,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_MAT2']]=kh,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_MAT3']]=Sn,this['pcUniformT'+'ype'][_0xcbe242['FLOAT_MAT4']]=Js,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_2D']]=J0,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_CU'+'BE']]=ex,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT']]=yn,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_VEC2']]=vn,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_VEC3']]=xn,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_VEC4']]=Tn,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_2D'+'_SHADOW']]=tx,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_CU'+'BE_SHADOW']]=sx,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_2D'+'_ARRAY']]=rx,this['pcUniformT'+'ype'][_0xcbe242['SAMPLER_3D']]=ix,this['pcUniformT'+'ype'][_0xcbe242['INT_SAMPLE'+'R_2D']]=ax,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=nx,this['pcUniformT'+'ype'][_0xcbe242['INT_SAMPLE'+'R_CUBE']]=ox,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=lx,this['pcUniformT'+'ype'][_0xcbe242['INT_SAMPLE'+'R_3D']]=hx,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=cx,this['pcUniformT'+'ype'][_0xcbe242['INT_SAMPLE'+'R_2D_ARRAY']]=dx,this['pcUniformT'+'ype'][_0xcbe242['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=fx,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0xcbe242['TEXTURE_2D']]=-0x1585+-0x79*-0x2b+-0x12*-0x11,this['targetToSl'+'ot'][_0xcbe242['TEXTURE_CU'+'BE_MAP']]=-0x315*-0x6+-0x2ba*0xc+0x1*0xe3b,this['targetToSl'+'ot'][_0xcbe242['TEXTURE_3D']]=-0x1*0x443+-0x92c+-0x47b*-0x3;let _0x37fc05,_0x4a4d6f,_0x45941a,_0x1fc338,_0x3eb29a;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][on]=function(_0x20e9e9,_0x1efdaf){_0x20e9e9['value']!==_0x1efdaf&&(_0xcbe242['uniform1i'](_0x20e9e9['locationId'],_0x1efdaf),_0x20e9e9['value']=_0x1efdaf);},this['commitFunc'+'tion'][sa]=this['commitFunc'+'tion'][on],this['commitFunc'+'tion'][Us]=function(_0x5acf6e,_0x2ca8d3){_0x5acf6e['value']!==_0x2ca8d3&&(_0xcbe242['uniform1f'](_0x5acf6e['locationId'],_0x2ca8d3),_0x5acf6e['value']=_0x2ca8d3);},this['commitFunc'+'tion'][ia]=function(_0x57cfc1,_0x297edc){_0x3eb29a=_0x57cfc1['value'],_0x37fc05=_0x297edc[0x1918+0x1b42+-0x345a],_0x4a4d6f=_0x297edc[0x1ae3*0x1+0x7a*0xc+-0x209a],(_0x3eb29a[0x59*0x4a+-0x1814+0x2*-0xd3]!==_0x37fc05||_0x3eb29a[-0x3ba+0x2677+0x24*-0xf7]!==_0x4a4d6f)&&(_0xcbe242['uniform2fv'](_0x57cfc1['locationId'],_0x297edc),_0x3eb29a[0xef8+0xf*0x5e+-0x147a]=_0x37fc05,_0x3eb29a[0x2114+-0x53a+-0x1bd9*0x1]=_0x4a4d6f);},this['commitFunc'+'tion'][rs]=function(_0x10c919,_0x4ffe40){_0x3eb29a=_0x10c919['value'],_0x37fc05=_0x4ffe40[0x2006*-0x1+-0x360*-0x3+0xaf3*0x2],_0x4a4d6f=_0x4ffe40[-0x1b3+-0x1*0x29+-0x9f*-0x3],_0x45941a=_0x4ffe40[0x1*-0x12fd+0x1012+0x2ed],(_0x3eb29a[0x862+0x207*0x3+-0xe77]!==_0x37fc05||_0x3eb29a[0x121d+0x3b6*-0xa+0x1300]!==_0x4a4d6f||_0x3eb29a[-0x1*0x916+-0x3b*0x5f+0x1efd*0x1]!==_0x45941a)&&(_0xcbe242['uniform3fv'](_0x10c919['locationId'],_0x4ffe40),_0x3eb29a[-0x1ee9+-0x1f05+0x3dee]=_0x37fc05,_0x3eb29a[0xea7+-0x157c+-0xe*-0x7d]=_0x4a4d6f,_0x3eb29a[0x12e*0x1a+0x651*0x5+-0x3e3f]=_0x45941a);},this['commitFunc'+'tion'][gn]=function(_0x543c20,_0x8e11ea){_0x3eb29a=_0x543c20['value'],_0x37fc05=_0x8e11ea[0x16*-0x6d+-0x1a*0x7d+0x10*0x161],_0x4a4d6f=_0x8e11ea[0x39f+0x2364+-0x2702],_0x45941a=_0x8e11ea[0x29*0x53+-0x1*0x1b65+0xe1c],_0x1fc338=_0x8e11ea[0x1*-0x1c1+-0x14f1+0x16b5],(_0x3eb29a[0x14cb+0xa67+0xa66*-0x3]!==_0x37fc05||_0x3eb29a[0x1*-0xd1+0x18*0xd5+-0x1326]!==_0x4a4d6f||_0x3eb29a[0x12*0x7a+0x1b6*-0x1+-0x4*0x1b7]!==_0x45941a||_0x3eb29a[0x13e9+-0x1a*-0x22+0x31*-0x7a]!==_0x1fc338)&&(_0xcbe242['uniform4fv'](_0x543c20['locationId'],_0x8e11ea),_0x3eb29a[0x216+0x295*0x1+-0x4ab*0x1]=_0x37fc05,_0x3eb29a[0x386*-0x1+0x1*0x1238+0xeb1*-0x1]=_0x4a4d6f,_0x3eb29a[-0x8*0x21d+0xed*0x2a+-0x15f8]=_0x45941a,_0x3eb29a[-0x210*0xb+0x3*0x8d+0x150c]=_0x1fc338);},this['commitFunc'+'tion'][qr]=function(_0x2a837d,_0x396ae6){_0x3eb29a=_0x2a837d['value'],_0x37fc05=_0x396ae6[-0x24d3+-0xf*0x6b+0x314*0xe],_0x4a4d6f=_0x396ae6[0x2267*0x1+-0x1*-0x1ee8+0x414e*-0x1],(_0x3eb29a[0x98*-0x28+0x1791+0x2f]!==_0x37fc05||_0x3eb29a[0x3b*0x9+-0x3*0x7fd+0x15e5]!==_0x4a4d6f)&&(_0xcbe242['uniform2iv'](_0x2a837d['locationId'],_0x396ae6),_0x3eb29a[0x249b+-0x21c7+-0x2d4]=_0x37fc05,_0x3eb29a[0x4db+0x265+-0x73f]=_0x4a4d6f);},this['commitFunc'+'tion'][Lo]=this['commitFunc'+'tion'][qr],this['commitFunc'+'tion'][jr]=function(_0x376c3f,_0x51945f){_0x3eb29a=_0x376c3f['value'],_0x37fc05=_0x51945f[0x1*0x6cd+-0x1a57+0x138a],_0x4a4d6f=_0x51945f[-0x10*0x1fc+-0xf95+0x2f56],_0x45941a=_0x51945f[0x1251+-0x28*0x10+-0xfcf],(_0x3eb29a[-0x173b*0x1+0xb*0x35d+0x6e2*-0x2]!==_0x37fc05||_0x3eb29a[0x15af+-0x3b*-0x25+-0x1e35]!==_0x4a4d6f||_0x3eb29a[0x1*-0x139+0x1271*-0x2+0xb*0x377]!==_0x45941a)&&(_0xcbe242['uniform3iv'](_0x376c3f['locationId'],_0x51945f),_0x3eb29a[0x247f+0x9ad*0x1+-0x4*0xb8b]=_0x37fc05,_0x3eb29a[0xa*0xa8+-0x1*-0x1036+-0x16c5]=_0x4a4d6f,_0x3eb29a[0x8*-0x4+-0x2310+-0x55*-0x6a]=_0x45941a);},this['commitFunc'+'tion'][Ro]=this['commitFunc'+'tion'][jr],this['commitFunc'+'tion'][Yr]=function(_0x3e7382,_0x1ddb81){_0x3eb29a=_0x3e7382['value'],_0x37fc05=_0x1ddb81[0x1f30+-0x2565*0x1+0x7*0xe3],_0x4a4d6f=_0x1ddb81[0x1*0x815+0xbc+-0x8d0],_0x45941a=_0x1ddb81[-0x1e8c+0x202a+-0x19c],_0x1fc338=_0x1ddb81[0xd*0x9e+0x6f5*-0x2+0x5e7],(_0x3eb29a[0x20e9+0x2269+0x4352*-0x1]!==_0x37fc05||_0x3eb29a[-0x90b*0x2+-0x1af1*-0x1+-0x8da]!==_0x4a4d6f||_0x3eb29a[0x1*-0x1463+0xc73+0x71*0x12]!==_0x45941a||_0x3eb29a[-0x253c+-0x19f8+-0x3f37*-0x1]!==_0x1fc338)&&(_0xcbe242['uniform4iv'](_0x3e7382['locationId'],_0x1ddb81),_0x3eb29a[0x169a+0x265*0x6+-0x24f8]=_0x37fc05,_0x3eb29a[0x656*-0x1+0x1*0x1237+0x5*-0x260]=_0x4a4d6f,_0x3eb29a[-0x9*0x2a1+0x12ea+0x4c1]=_0x45941a,_0x3eb29a[0x2*-0xf53+0xbaf+0x12fa]=_0x1fc338);},this['commitFunc'+'tion'][Oo]=this['commitFunc'+'tion'][Yr],this['commitFunc'+'tion'][kh]=function(_0xba7597,_0x44b7dd){_0xcbe242['uniformMat'+'rix2fv'](_0xba7597['locationId'],!(-0x184f+-0x15*0xc7+0x28a3),_0x44b7dd);},this['commitFunc'+'tion'][Sn]=function(_0x3ef715,_0x26e0e5){_0xcbe242['uniformMat'+'rix3fv'](_0x3ef715['locationId'],!(0x665+-0x1d57+0x7d*0x2f),_0x26e0e5);},this['commitFunc'+'tion'][Js]=function(_0x2eeba4,_0x4f21e4){_0xcbe242['uniformMat'+'rix4fv'](_0x2eeba4['locationId'],!(-0x1e69+0x8*-0x2f4+0x360a),_0x4f21e4);},this['commitFunc'+'tion'][Uc]=function(_0x19df2e,_0xe2c372){_0xcbe242['uniform1fv'](_0x19df2e['locationId'],_0xe2c372);},this['commitFunc'+'tion'][Bc]=function(_0x2e722e,_0x20d326){_0xcbe242['uniform2fv'](_0x2e722e['locationId'],_0x20d326);},this['commitFunc'+'tion'][zc]=function(_0x5d29cf,_0x3e4d0b){_0xcbe242['uniform3fv'](_0x5d29cf['locationId'],_0x3e4d0b);},this['commitFunc'+'tion'][Qu]=function(_0x3bf7ae,_0x4dafc3){_0xcbe242['uniform4fv'](_0x3bf7ae['locationId'],_0x4dafc3);},this['commitFunc'+'tion'][yn]=function(_0x3b771d,_0x9e1fbe){_0x3b771d['value']!==_0x9e1fbe&&(_0xcbe242['uniform1ui'](_0x3b771d['locationId'],_0x9e1fbe),_0x3b771d['value']=_0x9e1fbe);},this['commitFunc'+'tion'][vn]=function(_0x2c7ddc,_0x24bcbc){_0x3eb29a=_0x2c7ddc['value'],_0x37fc05=_0x24bcbc[0x1*-0x9b5+-0x1*-0x565+0x450],_0x4a4d6f=_0x24bcbc[-0x1e5e+0x209f+0x2*-0x120],(_0x3eb29a[-0x1604+0xe9*-0x4+-0xcd4*-0x2]!==_0x37fc05||_0x3eb29a[-0x111a+-0x1*-0x189b+-0x20*0x3c]!==_0x4a4d6f)&&(_0xcbe242['uniform2ui'+'v'](_0x2c7ddc['locationId'],_0x24bcbc),_0x3eb29a[0x5e*-0x2b+0x175*-0x18+-0x92*-0x59]=_0x37fc05,_0x3eb29a[0x185*-0xe+-0x2203+0x374a]=_0x4a4d6f);},this['commitFunc'+'tion'][xn]=function(_0x2ba239,_0x5998c0){_0x3eb29a=_0x2ba239['value'],_0x37fc05=_0x5998c0[-0x2219+-0x16a0+0x38b9*0x1],_0x4a4d6f=_0x5998c0[-0x12bc+-0x3ad*0x2+0x1a17],_0x45941a=_0x5998c0[-0x21bb+0x788*0x5+-0x3b*0x11],(_0x3eb29a[0x172*0x1+0x1549+-0x1*0x16bb]!==_0x37fc05||_0x3eb29a[-0x1745+0x1eea*-0x1+0x121*0x30]!==_0x4a4d6f||_0x3eb29a[-0x2366+0x1*0x163d+-0x1*-0xd2b]!==_0x45941a)&&(_0xcbe242['uniform3ui'+'v'](_0x2ba239['locationId'],_0x5998c0),_0x3eb29a[-0x1076+0x2543+0x14cd*-0x1]=_0x37fc05,_0x3eb29a[0x3*-0x227+0x1f*0xf+0x1*0x4a5]=_0x4a4d6f,_0x3eb29a[0x24f4+-0x453*0x5+-0xf53]=_0x45941a);},this['commitFunc'+'tion'][Tn]=function(_0x192e2c,_0x3a4468){_0x3eb29a=_0x192e2c['value'],_0x37fc05=_0x3a4468[-0x2377+-0x11bb+0x1*0x3532],_0x4a4d6f=_0x3a4468[-0x1e21+0x1*-0x1639+0x345b],_0x45941a=_0x3a4468[0x582+0x3*0x587+-0x1615],_0x1fc338=_0x3a4468[-0x226+-0xc3a+0xe63],(_0x3eb29a[0x33*-0x67+-0x3*-0x5af+-0xc*-0x4a]!==_0x37fc05||_0x3eb29a[-0x57*0xf+0xe*-0x250+0x257a]!==_0x4a4d6f||_0x3eb29a[0x6*-0x39a+0x267e+-0x10e0]!==_0x45941a||_0x3eb29a[-0xcd7+-0x17ee+0x2*0x1264]!==_0x1fc338)&&(_0xcbe242['uniform4ui'+'v'](_0x192e2c['locationId'],_0x3a4468),_0x3eb29a[-0x17c3+-0x7cd*-0x1+0xff6]=_0x37fc05,_0x3eb29a[-0xc*-0x15d+0xb*-0x175+-0xc*0x7]=_0x4a4d6f,_0x3eb29a[0x11f*-0x1d+-0xc14+0x2c99]=_0x45941a,_0x3eb29a[-0x2*0x11d1+-0x116f*-0x1+-0x7*-0x29a]=_0x1fc338);},this['commitFunc'+'tion'][wn]=function(_0x2795a,_0x5e0b44){_0xcbe242['uniform1iv'](_0x2795a['locationId'],_0x5e0b44);},this['commitFunc'+'tion'][Vc]=function(_0x22c445,_0x54631c){_0xcbe242['uniform1ui'+'v'](_0x22c445['locationId'],_0x54631c);},this['commitFunc'+'tion'][Gc]=this['commitFunc'+'tion'][wn],this['commitFunc'+'tion'][En]=function(_0x492982,_0x1a6f1b){_0xcbe242['uniform2iv'](_0x492982['locationId'],_0x1a6f1b);},this['commitFunc'+'tion'][Hc]=function(_0x40fc0b,_0x7be386){_0xcbe242['uniform2ui'+'v'](_0x40fc0b['locationId'],_0x7be386);},this['commitFunc'+'tion'][Wc]=this['commitFunc'+'tion'][En],this['commitFunc'+'tion'][An]=function(_0x5036c7,_0x1cfaf2){_0xcbe242['uniform3iv'](_0x5036c7['locationId'],_0x1cfaf2);},this['commitFunc'+'tion'][$c]=function(_0x11d5d7,_0x3432dd){_0xcbe242['uniform3ui'+'v'](_0x11d5d7['locationId'],_0x3432dd);},this['commitFunc'+'tion'][Xc]=this['commitFunc'+'tion'][An],this['commitFunc'+'tion'][Uh]=function(_0x213e9a,_0x34bb66){_0xcbe242['uniform4iv'](_0x213e9a['locationId'],_0x34bb66);},this['commitFunc'+'tion'][Ju]=function(_0x3b7829,_0x4762ea){_0xcbe242['uniform4ui'+'v'](_0x3b7829['locationId'],_0x4762ea);},this['commitFunc'+'tion'][em]=this['commitFunc'+'tion'][Uh],this['commitFunc'+'tion'][IS]=function(_0x3bd69b,_0x4a46e2){_0xcbe242['uniformMat'+'rix4fv'](_0x3bd69b['locationId'],!(-0x1*-0x5cb+-0x2255*-0x1+-0x281f*0x1),_0x4a46e2);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new mT(this);}['destroy'](){super['destroy']();const _0x33beb4=this['gl'];this['feedback']&&_0x33beb4['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x6b*-0x2+-0x221*-0xd+0x2*-0xe41)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x20c7+-0xb11+-0x15b5)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0xf83120){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new vt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0xf83120;}['updateBack'+'bufferForm'+'at'](_0x3703a1){const _0x434444=this['gl'];_0x434444['bindFrameb'+'uffer'](_0x434444['FRAMEBUFFE'+'R'],_0x3703a1);const _0x3064b7=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x3064b7?Oe:ur;}['updateBack'+'buffer'](){const _0xef078e=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0xef078e)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(0x1014+0x25a2+-0x35b5),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x25cf49,_0x12cef6){return new sT();}['createInde'+'xBufferImp'+'l'](_0x197881){return new iT(_0x197881);}['createShad'+'erImpl'](_0x556e7b){return new hT(_0x556e7b);}['createText'+'ureImpl'](_0x34e5ae){return new cT(_0x34e5ae);}['createRend'+'erTargetIm'+'pl'](_0x5e6306){return new fT();}['pushMarker'](_0x248419){if(Me['browser']&&window['spector']){const _0x1d0066=Q['toString']();window['spector']['setMarker'](_0x1d0066+'\x20#');}}['popMarker'](){if(Me['browser']&&window['spector']){const _0x31680e=Q['toString']();_0x31680e['length']?window['spector']['setMarker'](_0x31680e+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x3d7d19=this['gl'];let _0x3ca9fa='highp';if(_0x3d7d19['getShaderP'+'recisionFo'+'rmat']){const _0x15e9ff=_0x3d7d19['getShaderP'+'recisionFo'+'rmat'](_0x3d7d19['VERTEX_SHA'+'DER'],_0x3d7d19['HIGH_FLOAT']),_0x6ce173=_0x3d7d19['getShaderP'+'recisionFo'+'rmat'](_0x3d7d19['VERTEX_SHA'+'DER'],_0x3d7d19['MEDIUM_FLO'+'AT']),_0x74fbf2=_0x3d7d19['getShaderP'+'recisionFo'+'rmat'](_0x3d7d19['FRAGMENT_S'+'HADER'],_0x3d7d19['HIGH_FLOAT']),_0x171e29=_0x3d7d19['getShaderP'+'recisionFo'+'rmat'](_0x3d7d19['FRAGMENT_S'+'HADER'],_0x3d7d19['MEDIUM_FLO'+'AT']);if(_0x15e9ff&&_0x6ce173&&_0x74fbf2&&_0x171e29){const _0x5c3d4b=_0x15e9ff['precision']>0x6*0x23+0xd97+-0xe69&&_0x74fbf2['precision']>0x31d+-0x1*0x1ec8+0x1bab,_0x4062fc=_0x6ce173['precision']>0x627+-0x1933*-0x1+-0x1f5a&&_0x171e29['precision']>0x651+0x32b*-0xa+-0x195d*-0x1;_0x5c3d4b||(_0x4062fc?(_0x3ca9fa='mediump',M['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x3ca9fa='lowp',M['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x3ca9fa;}['getExtensi'+'on'](){for(let _0x377654=0x16a2+0x157c+-0x1*0x2c1e;_0x377654<arguments['length'];_0x377654++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x377654])!==-(-0xf7+-0x19f+0x297))return this['gl']['getExtensi'+'on'](arguments[_0x377654]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x454fb4=this['gl'];this['supportedE'+'xtensions']=_0x454fb4['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(0x97*0x17+-0x1b*-0x7e+-0x1adb),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x4b6562=this['gl'];let _0x10abd2;const _0xbd0496=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x53e6f3=_0x4b6562['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x53e6f3==null?void(0x54a*0x4+-0xe9*0x29+0x1029):_0x53e6f3['antialias'])??!(-0x1*0xaee+0xae*-0x28+0x261f),this['supportsSt'+'encil']=(_0x53e6f3==null?void(0x8*-0x166+0xc8*-0x1d+0x8*0x43b):_0x53e6f3['stencil'])??!(0x1*0x7f7+0x2*-0x291+-0xb5*0x4),this['maxTexture'+'Size']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_3D_TEX'+'TURE_SIZE']),_0x10abd2=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x10abd2?_0x4b6562['getParamet'+'er'](_0x10abd2['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x10abd2?_0x4b6562['getParamet'+'er'](_0x10abd2['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0xdc5f51=/\bMali-G52+/,_0x2cce92=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0xbd0496['match'](_0x2cce92))&&!this['unmaskedRe'+'nderer']['match'](_0xdc5f51),_0x10abd2=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x10abd2?_0x4b6562['getParamet'+'er'](_0x10abd2['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):0x992+-0x19f9+-0x19*-0xa8;const _0x2ebb59=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x2ebb59?_0x4b6562['getParamet'+'er'](_0x4b6562['MAX_SAMPLE'+'S']):-0x48*-0x1b+0x145a+-0x1bf1,this['maxSamples']=Math['min'](this['maxSamples'],0xcfc+-0x7d*-0x21+-0x5*0x5d1),this['samples']=_0x2ebb59&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x151f*0x1+0x2*0x2bb+-0x5*-0x322,this['supportsAr'+'eaLights']=!Me['android'],this['maxTexture'+'s']<=0x3*-0x417+0x1a2b+-0xdde&&(this['supportsAr'+'eaLights']=!(-0x19dd+0x307*0x1+0x79d*0x3)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x164a38=this['gl'];_0x164a38['disable'](_0x164a38['BLEND']),_0x164a38['blendFunc'](_0x164a38['ONE'],_0x164a38['ZERO']),_0x164a38['blendEquat'+'ion'](_0x164a38['FUNC_ADD']),_0x164a38['colorMask'](!(0x5*0x73f+-0xddc+-0x165f),!(-0x762+0x14e2+-0xd80),!(-0x740+0x159+-0x5e7*-0x1),!(0x2*0x149+0x1680+-0x1912)),_0x164a38['blendColor'](0x53b+-0x11cd+-0x1*-0xc92,-0x1887+-0x1a44+0x1*0x32cb,0x38*0x17+-0x70*-0x45+-0x2*0x119c,0x89*0xd+0x1970+-0x2065),_0x164a38['enable'](_0x164a38['CULL_FACE']),this['cullFace']=_0x164a38['BACK'],_0x164a38['cullFace'](_0x164a38['BACK']),_0x164a38['enable'](_0x164a38['DEPTH_TEST']),_0x164a38['depthFunc'](_0x164a38['LEQUAL']),_0x164a38['depthMask'](!(-0x1fed+-0x5*0x55b+-0x484*-0xd)),this['stencil']=!(0x1449+-0x8c2+-0xb86),_0x164a38['disable'](_0x164a38['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Ni,this['stencilRef'+'Front']=this['stencilRef'+'Back']=0xc31+0x9f5+-0x1626,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0xd5d+0x1*0x1ae4+0x86*-0x4b,_0x164a38['stencilFun'+'c'](_0x164a38['ALWAYS'],0x1*0x50d+0x3*-0xcfb+0x6*0x5a6,-0x5*0x248+0x862*0x1+0x405),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=nn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=nn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=nn,this['stencilWri'+'teMaskFron'+'t']=-0x685+0x1032*0x1+-0x8ae,this['stencilWri'+'teMaskBack']=0x12ec+-0x4f7*-0x3+-0x1069*0x2,_0x164a38['stencilOp'](_0x164a38['KEEP'],_0x164a38['KEEP'],_0x164a38['KEEP']),_0x164a38['stencilMas'+'k'](-0x1ecd+0x5*0x4ac+0x28*0x36),this['alphaToCov'+'erage']=!(0x725+-0x1*0x111b+-0x1*-0x9f7),this['raster']=!(0x1cb6+0xdb*-0x1d+-0x3e7),_0x164a38['disable'](_0x164a38['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x164a38['disable'](_0x164a38['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(0x1124+0x926+-0x1a49),_0x164a38['disable'](_0x164a38['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=0xd*-0x20+0x1237+-0x1096,_0x164a38['clearDepth'](-0x26f+0x1c8*-0xa+0x144*0x10),this['clearColor']=new ie(0x1b08+-0x3c3*-0x1+-0x1ecb,-0x262c+-0x3b*0x8b+0x4635,0x2532+0x5*0x3cb+-0x3829,0xa6*-0x1+-0xc2f*0x2+0x1*0x1904),_0x164a38['clearColor'](0x1*0x239+0x754+-0x98d,-0x1000+0x2256+-0x1256*0x1,0x25*0x27+0x491+-0xa34,-0x455*-0x7+-0x19be+-0x495),this['clearStenc'+'il']=-0x1901+0x153a+0x3c7*0x1,_0x164a38['clearStenc'+'il'](0x9ad+-0x1f+-0x98e),_0x164a38['hint'](_0x164a38['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x164a38['NICEST']),_0x164a38['enable'](_0x164a38['SCISSOR_TE'+'ST']),_0x164a38['pixelStore'+'i'](_0x164a38['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x164a38['NONE']),this['unpackFlip'+'Y']=!(0xd47+0x1*0x6bb+-0x1401),_0x164a38['pixelStore'+'i'](_0x164a38['UNPACK_FLI'+'P_Y_WEBGL'],!(0x16*0x13+0x4c*-0x1+-0x155*0x1)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(0x1*0xd0f+-0x70*-0x3b+-0x19*0x18e),_0x164a38['pixelStore'+'i'](_0x164a38['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(0x16*-0xe7+-0xd*-0x23+0x1a*0xb2)),_0x164a38['pixelStore'+'i'](_0x164a38['UNPACK_ALI'+'GNMENT'],0x21ae+0x1*0x1667+-0x94*0x61);}['initTextur'+'eUnits'](_0x176b11=-0x1*0xd1f+-0x2708+0x3437){this['textureUni'+'ts']=[];for(let _0x137b46=0x31b+-0x1396+0x107b;_0x137b46<_0x176b11;_0x137b46++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=0x12f5+0x16b1+-0x29a6,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x55fda8 of this['shaders'])_0x55fda8['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x4e364c of this['shaders'])_0x4e364c['restoreCon'+'text']();}['setViewpor'+'t'](_0x3d6b7d,_0x56b13a,_0x42ff3f,_0x3d2dcb){(this['vx']!==_0x3d6b7d||this['vy']!==_0x56b13a||this['vw']!==_0x42ff3f||this['vh']!==_0x3d2dcb)&&(this['gl']['viewport'](_0x3d6b7d,_0x56b13a,_0x42ff3f,_0x3d2dcb),this['vx']=_0x3d6b7d,this['vy']=_0x56b13a,this['vw']=_0x42ff3f,this['vh']=_0x3d2dcb);}['setScissor'](_0x246ba9,_0x3edb5d,_0x245f1f,_0xf0557){(this['sx']!==_0x246ba9||this['sy']!==_0x3edb5d||this['sw']!==_0x245f1f||this['sh']!==_0xf0557)&&(this['gl']['scissor'](_0x246ba9,_0x3edb5d,_0x245f1f,_0xf0557),this['sx']=_0x246ba9,this['sy']=_0x3edb5d,this['sw']=_0x245f1f,this['sh']=_0xf0557);}['setFramebu'+'ffer'](_0xe205dd){if(this['activeFram'+'ebuffer']!==_0xe205dd){const _0x3dabdd=this['gl'];_0x3dabdd['bindFrameb'+'uffer'](_0x3dabdd['FRAMEBUFFE'+'R'],_0xe205dd),this['activeFram'+'ebuffer']=_0xe205dd;}}['copyRender'+'Target'](_0x29da64,_0x4ac46c,_0x3a7f26,_0x40504f){var _0x3e32e0,_0x6f293e;const _0x1fe084=this['gl'];if(_0x29da64===this['backBuffer']&&(_0x29da64=null),_0x3a7f26){if(_0x4ac46c){if(_0x29da64){if(!_0x29da64['_colorBuff'+'er']||!_0x4ac46c['_colorBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x2166+-0x36*0x3c+-0x14bd);if(_0x29da64['_colorBuff'+'er']['_format']!==_0x4ac46c['_colorBuff'+'er']['_format'])return M['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(-0xd7*0x5+0x3a6*0x3+-0x6be);}}else{if(!_0x29da64['_colorBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x4a*0x5+-0x1*0xb5c+0x9eb);}}if(_0x40504f&&_0x29da64&&!_0x29da64['_depth']){if(!_0x29da64['_depthBuff'+'er']||!_0x4ac46c['_depthBuff'+'er'])return M['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x18*0x14c+0x687+-0x86*-0x2f);if(_0x29da64['_depthBuff'+'er']['_format']!==_0x4ac46c['_depthBuff'+'er']['_format'])return M['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(-0x1c*-0x3+-0x19f8+0x19a5);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x162bbd=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x4ac46c,this['updateBegi'+'n']();const _0x54b086=_0x29da64?_0x29da64['impl']['_glFrameBu'+'ffer']:(_0x3e32e0=this['backBuffer'])==null?void(0x21*0x2d+-0x1a92+0x14c5):_0x3e32e0['impl']['_glFrameBu'+'ffer'],_0x3f0ded=_0x4ac46c?_0x4ac46c['impl']['_glFrameBu'+'ffer']:(_0x6f293e=this['backBuffer'])==null?void(-0x154*0x4+-0x1*-0x1d4b+-0x17fb*0x1):_0x6f293e['impl']['_glFrameBu'+'ffer'];M['assert'](_0x54b086!==_0x3f0ded,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x1fe084['bindFrameb'+'uffer'](_0x1fe084['READ_FRAME'+'BUFFER'],_0x54b086),_0x1fe084['bindFrameb'+'uffer'](_0x1fe084['DRAW_FRAME'+'BUFFER'],_0x3f0ded);const _0x3712b0=_0x29da64?_0x29da64['width']:_0x4ac46c?_0x4ac46c['width']:this['width'],_0xd7e4c8=_0x29da64?_0x29da64['height']:_0x4ac46c?_0x4ac46c['height']:this['height'];return _0x1fe084['blitFrameb'+'uffer'](0xa03*0x1+0x1*0x108a+0x7*-0x3cb,0x18ad+0x1572+-0x1*0x2e1f,_0x3712b0,_0xd7e4c8,-0x1020+-0x56*-0x3e+0x1c*-0x2b,0x467+0x39*-0x61+-0x1*-0x1132,_0x3712b0,_0xd7e4c8,(_0x3a7f26?_0x1fe084['COLOR_BUFF'+'ER_BIT']:-0x211b+0x1bdd+0x53e)|(_0x40504f?_0x1fe084['DEPTH_BUFF'+'ER_BIT']:-0xe14+0x1c*0x2f+-0x11e*-0x8),_0x1fe084['NEAREST']),this['renderTarg'+'et']=_0x162bbd,_0x1fe084['bindFrameb'+'uffer'](_0x1fe084['FRAMEBUFFE'+'R'],_0x162bbd?_0x162bbd['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(0x1a2f+0x258e+-0x3fbd);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x4ca1e4){const _0x582619=_0x4ca1e4['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x582619,M['assert'](_0x582619),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x4ca1e4['name']+'\x20RT:'+_0x582619['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x2c84e8,height:_0x3bc93c}=_0x582619;this['setViewpor'+'t'](0x1*0x1763+0x42d*0x7+-0x349e,-0xd*-0x295+-0x1727+-0x1f*0x56,_0x2c84e8,_0x3bc93c),this['setScissor'](0x12e4+0x8*-0x192+0x1e*-0x36,0x21eb+0x484+-0x266f*0x1,_0x2c84e8,_0x3bc93c);const _0x2182d7=_0x4ca1e4['colorOps'],_0xd68a42=_0x4ca1e4['depthStenc'+'ilOps'];if(_0x2182d7!=null&&_0x2182d7['clear']||_0xd68a42['clearDepth']||_0xd68a42['clearStenc'+'il']){let _0x5e1dcf=-0x49c*0x7+-0xd03*0x2+0x3a4a;const _0x2da43b={};_0x2182d7!=null&&_0x2182d7['clear']&&(_0x5e1dcf|=bo,_0x2da43b['color']=[_0x2182d7['clearValue']['r'],_0x2182d7['clearValue']['g'],_0x2182d7['clearValue']['b'],_0x2182d7['clearValue']['a']]),_0xd68a42['clearDepth']&&(_0x5e1dcf|=Co,_0x2da43b['depth']=_0xd68a42['clearDepth'+'Value']),_0xd68a42['clearStenc'+'il']&&(_0x5e1dcf|=Ih,_0x2da43b['stencil']=_0xd68a42['clearStenc'+'ilValue']),_0x2da43b['flags']=_0x5e1dcf,this['clear'](_0x2da43b);}M['call'](()=>{this['insideRend'+'erPass']&&M['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x7ab*-0x1+-0x66*-0x2+0x877*-0x1),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x28b6a0){var _0x2a8d4b;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x2a11a6=this['renderTarg'+'et'],_0x1690de=_0x28b6a0['colorArray'+'Ops']['length'];if(_0x2a11a6){ga['length']=0x1189+0x7d*0x1e+0xb*-0x2ed;const _0x391c95=this['gl'];for(let _0x1cb11c=0x14fe+0x14b*-0xd+0x165*-0x3;_0x1cb11c<_0x1690de;_0x1cb11c++){const _0x553f2f=_0x28b6a0['colorArray'+'Ops'][_0x1cb11c];_0x553f2f['store']||_0x553f2f['resolve']||ga['push'](_0x391c95['COLOR_ATTA'+'CHMENT0']+_0x1cb11c);}_0x2a11a6!==this['backBuffer']&&(_0x28b6a0['depthStenc'+'ilOps']['storeDepth']||ga['push'](_0x391c95['DEPTH_ATTA'+'CHMENT']),_0x28b6a0['depthStenc'+'ilOps']['storeStenc'+'il']||ga['push'](_0x391c95['STENCIL_AT'+'TACHMENT'])),ga['length']>-0x18ae+-0x29*0x4d+0x2503&&_0x28b6a0['fullSizeCl'+'earRect']&&_0x391c95['invalidate'+'Framebuffe'+'r'](_0x391c95['DRAW_FRAME'+'BUFFER'],ga),_0x1690de&&((_0x2a8d4b=_0x28b6a0['colorOps'])!=null&&_0x2a8d4b['resolve'])&&_0x28b6a0['samples']>0x1408+0x1780+-0xb*0x3f5&&_0x2a11a6['autoResolv'+'e']&&_0x2a11a6['resolve'](!(-0x1935+0xa*0x1fd+-0x2f*-0x1d),!(0x1*0x1bbf+0x1005+-0x2bc3*0x1)),_0x2a11a6['depthBuffe'+'r']&&_0x28b6a0['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x28b6a0['samples']>-0x14*-0x76+0x38*0x26+-0x281*0x7&&_0x2a11a6['autoResolv'+'e']&&_0x2a11a6['resolve'](!(0x33b+0x1845+0x1b7f*-0x1),!(-0x1c6f*0x1+0x197c+0x2f3));for(let _0x12491b=-0x891+0x26*0xce+0x1*-0x1603;_0x12491b<_0x1690de;_0x12491b++)if(_0x28b6a0['colorArray'+'Ops'][_0x12491b]['genMipmaps']){const _0x121d2b=_0x2a11a6['_colorBuff'+'ers'][_0x12491b];_0x121d2b&&_0x121d2b['impl']['_glTexture']&&_0x121d2b['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x12491b),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x5b0+-0x18a9+0x1e5a)),this['bindTextur'+'e'](_0x121d2b),this['gl']['generateMi'+'pmap'](_0x121d2b['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(0x3*0xb5d+-0x1cfe+-0x518),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x3dc359){this['_defaultFr'+'amebuffer']!==_0x3dc359&&(this['_defaultFr'+'amebuffer']=_0x3dc359,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x1ce3+-0x1*-0x2111+-0x42e));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x42e72f=0xa56+-0x222d+-0x11*-0x167;_0x42e72f<this['textureUni'+'ts']['length'];++_0x42e72f)for(let _0x492ab7=-0x2b*0x65+0x1ab0+0x9b9*-0x1;_0x492ab7<0x22ab+0x14*0x133+-0x3aa4;++_0x492ab7)this['textureUni'+'ts'][_0x42e72f][_0x492ab7]=null;}const _0xd8169a=this['renderTarg'+'et']??this['backBuffer'];M['assert'](_0xd8169a);const _0x451ea0=_0xd8169a['impl'];_0x451ea0['initialize'+'d']||this['initRender'+'Target'](_0xd8169a),this['setFramebu'+'ffer'](_0x451ea0['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x13dcbd=this['renderTarg'+'et'];if(_0x13dcbd&&_0x13dcbd!==this['backBuffer']){_0x13dcbd['_samples']>-0x6*-0x28c+0x1a38+-0x297f&&_0x13dcbd['autoResolv'+'e']&&_0x13dcbd['resolve']();const _0x6e54c3=_0x13dcbd['_colorBuff'+'er'];_0x6e54c3&&_0x6e54c3['impl']['_glTexture']&&_0x6e54c3['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0x189f+-0x9d*-0x3+-0x16c9*-0x1)),this['bindTextur'+'e'](_0x6e54c3),this['gl']['generateMi'+'pmap'](_0x6e54c3['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x557e00){if(this['unpackFlip'+'Y']!==_0x557e00){this['unpackFlip'+'Y']=_0x557e00;const _0x4e5880=this['gl'];_0x4e5880['pixelStore'+'i'](_0x4e5880['UNPACK_FLI'+'P_Y_WEBGL'],_0x557e00);}}['setUnpackP'+'remultiply'+'Alpha'](_0x1fb8b9){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x1fb8b9){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x1fb8b9;const _0x439d0e=this['gl'];_0x439d0e['pixelStore'+'i'](_0x439d0e['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x1fb8b9);}}['activeText'+'ure'](_0xb212be){this['textureUni'+'t']!==_0xb212be&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0xb212be),this['textureUni'+'t']=_0xb212be);}['bindTextur'+'e'](_0x325a7a){const _0x544a66=_0x325a7a['impl'],_0xe3a276=_0x544a66['_glTarget'],_0x1c86e7=_0x544a66['_glTexture'],_0x2ad080=this['textureUni'+'t'],_0x419ad9=this['targetToSl'+'ot'][_0xe3a276];this['textureUni'+'ts'][_0x2ad080][_0x419ad9]!==_0x1c86e7&&(this['gl']['bindTextur'+'e'](_0xe3a276,_0x1c86e7),this['textureUni'+'ts'][_0x2ad080][_0x419ad9]=_0x1c86e7);}['bindTextur'+'eOnUnit'](_0x1b30e3,_0x4126ad){const _0x43ab9e=_0x1b30e3['impl'],_0x3fd34e=_0x43ab9e['_glTarget'],_0x3a431b=_0x43ab9e['_glTexture'],_0x526205=this['targetToSl'+'ot'][_0x3fd34e];this['textureUni'+'ts'][_0x4126ad][_0x526205]!==_0x3a431b&&(this['activeText'+'ure'](_0x4126ad),this['gl']['bindTextur'+'e'](_0x3fd34e,_0x3a431b),this['textureUni'+'ts'][_0x4126ad][_0x526205]=_0x3a431b);}['setTexture'+'Parameters'](_0x4266a2){const _0x5ee650=this['gl'],_0xf761bb=_0x4266a2['impl']['dirtyParam'+'eterFlags'],_0x863c73=_0x4266a2['impl']['_glTarget'];if(_0xf761bb&RS){let _0x2b1bd4=_0x4266a2['_minFilter'];(!_0x4266a2['_mipmaps']||_0x4266a2['_compresse'+'d']&&_0x4266a2['_levels']['length']===0x1292*0x2+-0x3*-0x6c3+-0x1cb6*0x2)&&(_0x2b1bd4===xc||_0x2b1bd4===Tc?_0x2b1bd4=Te:(_0x2b1bd4===wc||_0x2b1bd4===ea)&&(_0x2b1bd4=_t)),_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x2b1bd4]);}if(_0xf761bb&OS&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x4266a2['_magFilter']]),_0xf761bb&FS&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x4266a2['_addressU']]),_0xf761bb&NS&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x4266a2['_addressV']]),_0xf761bb&kS&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x4266a2['_addressW']]),_0xf761bb&US&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_CO'+'MPARE_MODE'],_0x4266a2['_compareOn'+'Read']?_0x5ee650['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x5ee650['NONE']),_0xf761bb&BS&&_0x5ee650['texParamet'+'eri'](_0x863c73,_0x5ee650['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x4266a2['_compareFu'+'nc']]),_0xf761bb&zS){const _0x5a1e29=this['extTexture'+'FilterAnis'+'otropic'];_0x5a1e29&&_0x5ee650['texParamet'+'erf'](_0x863c73,_0x5a1e29['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x4266a2['_anisotrop'+'y']),-0x1402+0x1f*-0x72+0x21d1,this['maxAnisotr'+'opy']));}}['setTexture'](_0x3e0aca,_0x4c992d){const _0xf5720d=_0x3e0aca['impl'];_0xf5720d['_glTexture']||_0xf5720d['initialize'](this,_0x3e0aca),_0xf5720d['dirtyParam'+'eterFlags']>-0x7*-0x2f2+-0x1*0x1bef+-0x751*-0x1||_0x3e0aca['_needsUplo'+'ad']||_0x3e0aca['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x4c992d),this['bindTextur'+'e'](_0x3e0aca),_0xf5720d['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x3e0aca),_0xf5720d['dirtyParam'+'eterFlags']=0x1*0x6bb+0xaa7+-0x1162),(_0x3e0aca['_needsUplo'+'ad']||_0x3e0aca['_needsMipm'+'apsUpload'])&&(_0xf5720d['upload'](this,_0x3e0aca),_0x3e0aca['_needsUplo'+'ad']=!(0xa18+0xa8c*-0x2+-0x3*-0x3ab),_0x3e0aca['_needsMipm'+'apsUpload']=!(-0x22d0+0x8*-0x176+0x5*0x94d))):this['bindTextur'+'eOnUnit'](_0x3e0aca,_0x4c992d);}['createVert'+'exArray'](_0x386c51){let _0x11a4c1,_0x4d470f;const _0x5d7292=_0x386c51['length']>0x35*-0xb3+-0x851+0x2d61;if(_0x5d7292){_0x11a4c1='';for(let _0x41e684=0x457+-0x1eac+0x1a55;_0x41e684<_0x386c51['length'];_0x41e684++){const _0x4314d2=_0x386c51[_0x41e684];_0x11a4c1+=_0x4314d2['id']+_0x4314d2['format']['renderingH'+'ash'];}_0x4d470f=this['_vaoMap']['get'](_0x11a4c1);}if(!_0x4d470f){const _0x596ae2=this['gl'];_0x4d470f=_0x596ae2['createVert'+'exArray'](),_0x596ae2['bindVertex'+'Array'](_0x4d470f),_0x596ae2['bindBuffer'](_0x596ae2['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x2232db=!(-0xe2e*-0x2+-0xc0+-0x25*0xbf);for(let _0x4420b2=0x141e*0x1+-0xd13*0x2+0x304*0x2;_0x4420b2<_0x386c51['length'];_0x4420b2++){const _0x3143ec=_0x386c51[_0x4420b2];_0x596ae2['bindBuffer'](_0x596ae2['ARRAY_BUFF'+'ER'],_0x3143ec['impl']['bufferId']);const _0x5ee37b=_0x3143ec['format']['elements'];for(let _0x4e6940=0x25ec+-0x7*0x86+-0x5*0x6da;_0x4e6940<_0x5ee37b['length'];_0x4e6940++){const _0x302cbe=_0x5ee37b[_0x4e6940],_0x139f14=De[_0x302cbe['name']];_0x139f14===0x13*-0x1fb+0x1338+0x1269&&(_0x2232db=!(-0x1c6+0x80c*0x2+-0xe52)),_0x302cbe['asInt']?_0x596ae2['vertexAttr'+'ibIPointer'](_0x139f14,_0x302cbe['numCompone'+'nts'],this['glType'][_0x302cbe['dataType']],_0x302cbe['stride'],_0x302cbe['offset']):_0x596ae2['vertexAttr'+'ibPointer'](_0x139f14,_0x302cbe['numCompone'+'nts'],this['glType'][_0x302cbe['dataType']],_0x302cbe['normalize'],_0x302cbe['stride'],_0x302cbe['offset']),_0x596ae2['enableVert'+'exAttribAr'+'ray'](_0x139f14),_0x3143ec['format']['instancing']&&_0x596ae2['vertexAttr'+'ibDivisor'](_0x139f14,0x1d*0x2e+-0x194+-0x3a1*0x1);}}_0x596ae2['bindVertex'+'Array'](null),_0x596ae2['bindBuffer'](_0x596ae2['ARRAY_BUFF'+'ER'],null),_0x5d7292&&this['_vaoMap']['set'](_0x11a4c1,_0x4d470f),_0x2232db||M['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x4d470f;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0xf5dc49){const _0x37f892=this['gl'];let _0x59b345;if(this['vertexBuff'+'ers']['length']===-0x39*0x38+-0x2253+0xa*0x4ae){const _0xd289c7=this['vertexBuff'+'ers'][-0x1*0xb5d+0x3e*0x81+-0x13e1];M['assert'](_0xd289c7['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0xd289c7['impl']['vao']||(_0xd289c7['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x59b345=_0xd289c7['impl']['vao'];}else _0x59b345=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x59b345&&(this['boundVao']=_0x59b345,_0x37f892['bindVertex'+'Array'](_0x59b345));const _0x47b4f9=_0xf5dc49?_0xf5dc49['impl']['bufferId']:null;_0x37f892['bindBuffer'](_0x37f892['ELEMENT_AR'+'RAY_BUFFER'],_0x47b4f9);}['draw'](_0x1725f0,_0x5f332e,_0x50fb3b,_0x5b2916,_0x5185fa=!(-0xfc9+0x4*0x1e+0xf51),_0x5dc3e5=!(0xe*0x13d+-0x82d+-0x14f*0x7)){const _0x2e9a8c=this['shader'];if(_0x2e9a8c&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x8dbce8=this['gl'];_0x5185fa&&(M['call'](()=>{var _0xd295c0,_0x3ce283;return this['validateAt'+'tributes'](this['shader'],(_0xd295c0=this['vertexBuff'+'ers'][-0x948*0x2+0x4a0+0xdf0])==null?void(0xd6f*0x1+0x1043+-0x1db2):_0xd295c0['format'],(_0x3ce283=this['vertexBuff'+'ers'][0x1e8b+0x1a82+-0x390c])==null?void(-0x270+0x216f+-0x1eff):_0x3ce283['format']);}),this['setBuffers'](_0x5f332e));let _0x1f2ece=-0x721+0x1a30+-0x130f;const _0x598f95=_0x2e9a8c['impl']['samplers'];for(let _0x1c941d=0x1ba4+-0x1ffb*0x1+-0x457*-0x1,_0x2a002a=_0x598f95['length'];_0x1c941d<_0x2a002a;_0x1c941d++){const _0x43e677=_0x598f95[_0x1c941d];let _0x27e5b0=_0x43e677['scopeId']['value'];if(!_0x27e5b0){const _0x5da496=_0x43e677['scopeId']['name'];M['assert'](_0x5da496!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),M['assert'](_0x5da496!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x5da496==='uSceneDept'+'hMap'&&(M['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x27e5b0=Kr(this,'white')),_0x5da496==='uSceneColo'+'rMap'&&(M['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x27e5b0=Kr(this,'pink')),_0x27e5b0||(M['errorOnce']('Shader\x20'+_0x2e9a8c['name']+'\x20requires\x20'+_0x5da496+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x2e9a8c),_0x27e5b0=Kr(this,'pink'));}if(_0x27e5b0 instanceof _e){const _0x2d0f3a=_0x27e5b0;this['setTexture'](_0x2d0f3a,_0x1f2ece),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<-0x1*-0x146f+-0x21db+0x23d*0x6&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x2d0f3a?M['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x2d0f3a}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x2d0f3a&&M['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x2d0f3a})),_0x43e677['slot']!==_0x1f2ece&&(_0x8dbce8['uniform1i'](_0x43e677['locationId'],_0x1f2ece),_0x43e677['slot']=_0x1f2ece),_0x1f2ece++;}else{_0x43e677['array']['length']=-0x1*0x3e1+0x2204+-0x5*0x607;const _0x4f3f2f=_0x27e5b0['length'];for(let _0xf6a004=0x705*-0x3+-0x5b4+0x1ac3;_0xf6a004<_0x4f3f2f;_0xf6a004++){const _0x5c1ea8=_0x27e5b0[_0xf6a004];this['setTexture'](_0x5c1ea8,_0x1f2ece),_0x43e677['array'][_0xf6a004]=_0x1f2ece,_0x1f2ece++;}_0x8dbce8['uniform1iv'](_0x43e677['locationId'],_0x43e677['array']);}}const _0x3fe09d=_0x2e9a8c['impl']['uniforms'];for(let _0x1a8c87=0x4fc+-0x328+-0x1*0x1d4,_0x260ecc=_0x3fe09d['length'];_0x1a8c87<_0x260ecc;_0x1a8c87++){const _0x317dcf=_0x3fe09d[_0x1a8c87],_0x5a5b3a=_0x317dcf['scopeId'],_0x62fd8=_0x317dcf['version'],_0x12bf6=_0x5a5b3a['versionObj'+'ect']['version'];if(_0x62fd8['globalId']!==_0x12bf6['globalId']||_0x62fd8['revision']!==_0x12bf6['revision']){_0x62fd8['globalId']=_0x12bf6['globalId'],_0x62fd8['revision']=_0x12bf6['revision'];const _0x3af63c=_0x5a5b3a['value'];_0x3af63c!=null?this['commitFunc'+'tion'][_0x317dcf['dataType']](_0x317dcf,_0x3af63c):M['warnOnce']('Shader\x20['+_0x2e9a8c['label']+(']\x20requires'+'\x20uniform\x20[')+_0x317dcf['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x8dbce8['bindBuffer'+'Base'](_0x8dbce8['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],0x1*-0x5cf+0x13*-0x49+0xb3a,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x8dbce8['beginTrans'+'formFeedba'+'ck'](_0x8dbce8['POINTS']));const _0x8241b1=this['glPrimitiv'+'e'][_0x1725f0['type']],_0x468626=_0x1725f0['count'];if(_0x1725f0['indexed']){M['assert'](_0x5f332e['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x280f64=_0x5f332e['impl']['glFormat'],_0x5d02c4=_0x1725f0['base']*_0x5f332e['bytesPerIn'+'dex'];_0x50fb3b>0xe0a*0x1+-0x5*-0x575+-0x2953?_0x8dbce8['drawElemen'+'tsInstance'+'d'](_0x8241b1,_0x468626,_0x280f64,_0x5d02c4,_0x50fb3b):_0x8dbce8['drawElemen'+'ts'](_0x8241b1,_0x468626,_0x280f64,_0x5d02c4);}else{const _0x41650b=_0x1725f0['base'];_0x50fb3b>-0x6*0x29f+0xaa3+0x517?_0x8dbce8['drawArrays'+'Instanced'](_0x8241b1,_0x41650b,_0x468626,_0x50fb3b):_0x8dbce8['drawArrays'](_0x8241b1,_0x41650b,_0x468626);}this['transformF'+'eedbackBuf'+'fer']&&(_0x8dbce8['endTransfo'+'rmFeedback'](),_0x8dbce8['bindBuffer'+'Base'](_0x8dbce8['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x2*0x94f+0x13c0+-0xa*0x1d,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x1725f0['type']]+=_0x1725f0['count']*(_0x50fb3b>-0x2*-0x9fc+0x139a+-0x2791?_0x50fb3b:0x5ac*-0x1+-0x2231+-0x15*-0x1e6);}_0x5dc3e5&&this['clearVerte'+'xBuffer']();}['clear'](_0x2d53b4){const _0x4c976a=this['defaultCle'+'arOptions'];_0x2d53b4=_0x2d53b4||_0x4c976a;const _0x1b63e0=_0x2d53b4['flags']??_0x4c976a['flags'];if(_0x1b63e0!==-0x42f+0x161*-0xc+-0x1*-0x14bb){const _0x4f2816=this['gl'];if(_0x1b63e0&bo){const _0x1e3f16=_0x2d53b4['color']??_0x4c976a['color'],_0x3ead42=_0x1e3f16[-0x361+-0x1545+0x2*0xc53],_0x43c42e=_0x1e3f16[0x93e+-0x2182+0x1845],_0x2e9abe=_0x1e3f16[-0x1e58+-0x841+-0x1*-0x269b],_0x3b3f65=_0x1e3f16[0x2fb*-0x1+0x15e2+-0x12e4],_0x238f38=this['clearColor'];(_0x3ead42!==_0x238f38['r']||_0x43c42e!==_0x238f38['g']||_0x2e9abe!==_0x238f38['b']||_0x3b3f65!==_0x238f38['a'])&&(this['gl']['clearColor'](_0x3ead42,_0x43c42e,_0x2e9abe,_0x3b3f65),this['clearColor']['set'](_0x3ead42,_0x43c42e,_0x2e9abe,_0x3b3f65)),this['setBlendSt'+'ate'](Ct['NOBLEND']);}if(_0x1b63e0&Co){const _0x2e68dd=_0x2d53b4['depth']??_0x4c976a['depth'];_0x2e68dd!==this['clearDepth']&&(this['gl']['clearDepth'](_0x2e68dd),this['clearDepth']=_0x2e68dd),this['setDepthSt'+'ate'](Kt['WRITEDEPTH']);}if(_0x1b63e0&Ih){const _0x3b6e1a=_0x2d53b4['stencil']??_0x4c976a['stencil'];_0x3b6e1a!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x3b6e1a),this['clearStenc'+'il']=_0x3b6e1a),_0x4f2816['stencilMas'+'k'](0x17bb+-0x2578+0x3af*0x4),this['stencilWri'+'teMaskFron'+'t']=-0xa85*0x1+-0x76*-0xa+0x6e8,this['stencilWri'+'teMaskBack']=0x6*-0xa1+-0x15*0x19+0x6d2;}_0x4f2816['clear'](this['glClearFla'+'g'][_0x1b63e0]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x4b868c,_0x474f58,_0x23e402,_0x2fde83,_0x4ee7b5){const _0xa61cfc=this['gl'];_0xa61cfc['readPixels'](_0x4b868c,_0x474f58,_0x23e402,_0x2fde83,_0xa61cfc['RGBA'],_0xa61cfc['UNSIGNED_B'+'YTE'],_0x4ee7b5);}['clientWait'+'Async'](_0x517859,_0x1f678f){const _0x587890=this['gl'],_0x30be17=_0x587890['fenceSync'](_0x587890['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],0x25d5*-0x1+-0x22d9+0x2457*0x2);return this['submit'](),new Promise((_0x109254,_0xbe5e7f)=>{function _0x2f25c7(){const _0x33178c=_0x587890['clientWait'+'Sync'](_0x30be17,_0x517859,-0xd63*0x1+0x282+0xae1);_0x33178c===_0x587890['TIMEOUT_EX'+'PIRED']?setTimeout(_0x2f25c7,_0x1f678f):(_0x587890['deleteSync'](_0x30be17),_0x33178c===_0x587890['WAIT_FAILE'+'D']?_0xbe5e7f(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x109254());}_0x2f25c7();});}async['readPixels'+'Async'](_0x316086,_0x97dc34,_0x42495b,_0x313576,_0x558da7){var _0x34e178;const _0x27e3a1=this['gl'],_0x1db09c=(_0x34e178=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(0x701+-0x2089*-0x1+-0x278a):_0x34e178['impl'],_0x51bd3e=(_0x1db09c==null?void(-0x5*-0xde+-0xdb9+-0x3*-0x321):_0x1db09c['_glFormat'])??_0x27e3a1['RGBA'],_0x493e5c=(_0x1db09c==null?void(-0x1*-0xa7f+0x1ed7+-0x2956):_0x1db09c['_glPixelTy'+'pe'])??_0x27e3a1['UNSIGNED_B'+'YTE'],_0x1c9065=_0x27e3a1['createBuff'+'er']();return _0x27e3a1['bindBuffer'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],_0x1c9065),_0x27e3a1['bufferData'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],_0x558da7['byteLength'],_0x27e3a1['STREAM_REA'+'D']),_0x27e3a1['readPixels'](_0x316086,_0x97dc34,_0x42495b,_0x313576,_0x51bd3e,_0x493e5c,0xa*0x1fa+-0x1727*-0x1+-0x1*0x2aeb),_0x27e3a1['bindBuffer'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x21c9+-0x1b4b+-0x1e8a*-0x2,-0x1*0x583+0x2555*0x1+0x10f*-0x1e),_0x27e3a1['bindBuffer'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],_0x1c9065),_0x27e3a1['getBufferS'+'ubData'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],0x1b66+0x24e1+-0x4047,_0x558da7),_0x27e3a1['bindBuffer'](_0x27e3a1['PIXEL_PACK'+'_BUFFER'],null),_0x27e3a1['deleteBuff'+'er'](_0x1c9065),_0x558da7;}['readTextur'+'eAsync'](_0x38ecba,_0x88a7e3,_0x3bff3f,_0x5d245c,_0x289dd4,_0x15e4b8){const _0x47db78=_0x15e4b8['face']??0x1e9*-0x5+0x2e1*0x4+-0x1f7,_0x381d07=_0x15e4b8['renderTarg'+'et']??new vt({'colorBuffer':_0x38ecba,'depth':!(0x1*-0x1fb5+-0x4ae+0x2464),'face':_0x47db78});M['assert'](_0x381d07['colorBuffe'+'r']===_0x38ecba);const _0x49d4f2=new ArrayBuffer(Ui['calcLevelG'+'puSize'](_0x5d245c,_0x289dd4,-0xb1e+0x1*0x105e+-0x4f*0x11,_0x38ecba['_format'])),_0x1c6d77=_0x15e4b8['data']??new(TS(_0x38ecba['_format']))(_0x49d4f2);return this['setRenderT'+'arget'](_0x381d07),this['initRender'+'Target'](_0x381d07),new Promise((_0x33acce,_0x4c9cd6)=>{this['readPixels'+'Async'](_0x88a7e3,_0x3bff3f,_0x5d245c,_0x289dd4,_0x1c6d77)['then'](_0x11c5a5=>{_0x15e4b8['renderTarg'+'et']||_0x381d07['destroy'](),_0x33acce(_0x11c5a5);})['catch'](_0x4c9cd6);});}async['writeTextu'+'reAsync'](_0x541f9b,_0x3b3b7d,_0x190e56,_0x53112c,_0x386cb5,_0x5713ee){const _0x433196=this['gl'],_0x4b6218=_0x541f9b['impl'],_0x1010f2=(_0x4b6218==null?void(0xb*0x1da+-0x18dc+0x19*0x2e):_0x4b6218['_glFormat'])??_0x433196['RGBA'],_0x38b7da=(_0x4b6218==null?void(0x256e*0x1+0x1*0xe11+-0x337f):_0x4b6218['_glPixelTy'+'pe'])??_0x433196['UNSIGNED_B'+'YTE'],_0x4c390f=_0x433196['createBuff'+'er']();_0x433196['bindBuffer'](_0x433196['PIXEL_UNPA'+'CK_BUFFER'],_0x4c390f),_0x433196['bufferData'](_0x433196['PIXEL_UNPA'+'CK_BUFFER'],_0x5713ee,_0x433196['STREAM_DRA'+'W']),_0x433196['bindTextur'+'e'](_0x433196['TEXTURE_2D'],_0x4b6218['_glTexture']),_0x433196['texSubImag'+'e2D'](_0x433196['TEXTURE_2D'],0x2135+0xb7*-0xf+0x2*-0xb3e,_0x3b3b7d,_0x190e56,_0x53112c,_0x386cb5,_0x1010f2,_0x38b7da,0x26a7+-0x18fd*-0x1+-0x3fa4*0x1),_0x433196['bindBuffer'](_0x433196['PIXEL_UNPA'+'CK_BUFFER'],null),_0x541f9b['_needsUplo'+'ad']=!(-0x942+0x861+0x1*0xe2),_0x541f9b['_mipmapsUp'+'loaded']=!(0xf*-0x112+0x4*0x99+0xdab),await this['clientWait'+'Async'](0x1*0x1bce+0x90+-0x1c5e,0x1883+-0xf92+0x8e1*-0x1);}['setAlphaTo'+'Coverage'](_0x571a63){this['alphaToCov'+'erage']!==_0x571a63&&(this['alphaToCov'+'erage']=_0x571a63,_0x571a63?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x597951){if(this['transformF'+'eedbackBuf'+'fer']!==_0x597951){this['transformF'+'eedbackBuf'+'fer']=_0x597951;const _0x22dbaf=this['gl'];_0x597951?(this['feedback']||(this['feedback']=_0x22dbaf['createTran'+'sformFeedb'+'ack']()),_0x22dbaf['bindTransf'+'ormFeedbac'+'k'](_0x22dbaf['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x22dbaf['bindTransf'+'ormFeedbac'+'k'](_0x22dbaf['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0x169739){this['raster']!==_0x169739&&(this['raster']=_0x169739,_0x169739?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x212186){if(this['stencil']!==_0x212186){const _0x327222=this['gl'];_0x212186?_0x327222['enable'](_0x327222['STENCIL_TE'+'ST']):_0x327222['disable'](_0x327222['STENCIL_TE'+'ST']),this['stencil']=_0x212186;}}['setStencil'+'Func'](_0x42e443,_0x8e507d,_0x4210ae){(this['stencilFun'+'cFront']!==_0x42e443||this['stencilRef'+'Front']!==_0x8e507d||this['stencilMas'+'kFront']!==_0x4210ae||this['stencilFun'+'cBack']!==_0x42e443||this['stencilRef'+'Back']!==_0x8e507d||this['stencilMas'+'kBack']!==_0x4210ae)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x42e443],_0x8e507d,_0x4210ae),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x42e443,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x8e507d,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x4210ae);}['setStencil'+'FuncFront'](_0x4ed3cf,_0x3fa74e,_0x35c6c2){if(this['stencilFun'+'cFront']!==_0x4ed3cf||this['stencilRef'+'Front']!==_0x3fa74e||this['stencilMas'+'kFront']!==_0x35c6c2){const _0x160eba=this['gl'];_0x160eba['stencilFun'+'cSeparate'](_0x160eba['FRONT'],this['glComparis'+'on'][_0x4ed3cf],_0x3fa74e,_0x35c6c2),this['stencilFun'+'cFront']=_0x4ed3cf,this['stencilRef'+'Front']=_0x3fa74e,this['stencilMas'+'kFront']=_0x35c6c2;}}['setStencil'+'FuncBack'](_0x2e51d5,_0x2088e5,_0x31dc16){if(this['stencilFun'+'cBack']!==_0x2e51d5||this['stencilRef'+'Back']!==_0x2088e5||this['stencilMas'+'kBack']!==_0x31dc16){const _0x5527eb=this['gl'];_0x5527eb['stencilFun'+'cSeparate'](_0x5527eb['BACK'],this['glComparis'+'on'][_0x2e51d5],_0x2088e5,_0x31dc16),this['stencilFun'+'cBack']=_0x2e51d5,this['stencilRef'+'Back']=_0x2088e5,this['stencilMas'+'kBack']=_0x31dc16;}}['setStencil'+'Operation'](_0x584899,_0x56a315,_0x548d42,_0x47fd0e){(this['stencilFai'+'lFront']!==_0x584899||this['stencilZfa'+'ilFront']!==_0x56a315||this['stencilZpa'+'ssFront']!==_0x548d42||this['stencilFai'+'lBack']!==_0x584899||this['stencilZfa'+'ilBack']!==_0x56a315||this['stencilZpa'+'ssBack']!==_0x548d42)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x584899],this['glStencilO'+'p'][_0x56a315],this['glStencilO'+'p'][_0x548d42]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x584899,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x56a315,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x548d42),(this['stencilWri'+'teMaskFron'+'t']!==_0x47fd0e||this['stencilWri'+'teMaskBack']!==_0x47fd0e)&&(this['gl']['stencilMas'+'k'](_0x47fd0e),this['stencilWri'+'teMaskFron'+'t']=_0x47fd0e,this['stencilWri'+'teMaskBack']=_0x47fd0e);}['setStencil'+'OperationF'+'ront'](_0x8b1515,_0x59dbd5,_0x1499f6,_0x228e32){(this['stencilFai'+'lFront']!==_0x8b1515||this['stencilZfa'+'ilFront']!==_0x59dbd5||this['stencilZpa'+'ssFront']!==_0x1499f6)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x8b1515],this['glStencilO'+'p'][_0x59dbd5],this['glStencilO'+'p'][_0x1499f6]),this['stencilFai'+'lFront']=_0x8b1515,this['stencilZfa'+'ilFront']=_0x59dbd5,this['stencilZpa'+'ssFront']=_0x1499f6),this['stencilWri'+'teMaskFron'+'t']!==_0x228e32&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x228e32),this['stencilWri'+'teMaskFron'+'t']=_0x228e32);}['setStencil'+'OperationB'+'ack'](_0x3250d3,_0x5a7917,_0x570775,_0x5f1bce){(this['stencilFai'+'lBack']!==_0x3250d3||this['stencilZfa'+'ilBack']!==_0x5a7917||this['stencilZpa'+'ssBack']!==_0x570775)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x3250d3],this['glStencilO'+'p'][_0x5a7917],this['glStencilO'+'p'][_0x570775]),this['stencilFai'+'lBack']=_0x3250d3,this['stencilZfa'+'ilBack']=_0x5a7917,this['stencilZpa'+'ssBack']=_0x570775),this['stencilWri'+'teMaskBack']!==_0x5f1bce&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x5f1bce),this['stencilWri'+'teMaskBack']=_0x5f1bce);}['setBlendSt'+'ate'](_0x1add8c){const _0x4bf37d=this['blendState'];if(!_0x4bf37d['equals'](_0x1add8c)){const _0x2f6546=this['gl'],{blend:_0x5ef189,colorOp:_0x41731d,alphaOp:_0x51a351,colorSrcFactor:_0x5286f9,colorDstFactor:_0x292a16,alphaSrcFactor:_0x9640b,alphaDstFactor:_0x49a41}=_0x1add8c;if(_0x4bf37d['blend']!==_0x5ef189&&(_0x5ef189?_0x2f6546['enable'](_0x2f6546['BLEND']):_0x2f6546['disable'](_0x2f6546['BLEND'])),_0x4bf37d['colorOp']!==_0x41731d||_0x4bf37d['alphaOp']!==_0x51a351){const _0x46dfc2=this['glBlendEqu'+'ation'];_0x2f6546['blendEquat'+'ionSeparat'+'e'](_0x46dfc2[_0x41731d],_0x46dfc2[_0x51a351]);}(_0x4bf37d['colorSrcFa'+'ctor']!==_0x5286f9||_0x4bf37d['colorDstFa'+'ctor']!==_0x292a16||_0x4bf37d['alphaSrcFa'+'ctor']!==_0x9640b||_0x4bf37d['alphaDstFa'+'ctor']!==_0x49a41)&&_0x2f6546['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x5286f9],this['glBlendFun'+'ctionColor'][_0x292a16],this['glBlendFun'+'ctionAlpha'][_0x9640b],this['glBlendFun'+'ctionAlpha'][_0x49a41]),_0x4bf37d['allWrite']!==_0x1add8c['allWrite']&&this['gl']['colorMask'](_0x1add8c['redWrite'],_0x1add8c['greenWrite'],_0x1add8c['blueWrite'],_0x1add8c['alphaWrite']),_0x4bf37d['copy'](_0x1add8c);}}['setBlendCo'+'lor'](_0x58b53f,_0x12333a,_0x48619b,_0x301e75){const _0x85e9b6=this['blendColor'];(_0x58b53f!==_0x85e9b6['r']||_0x12333a!==_0x85e9b6['g']||_0x48619b!==_0x85e9b6['b']||_0x301e75!==_0x85e9b6['a'])&&(this['gl']['blendColor'](_0x58b53f,_0x12333a,_0x48619b,_0x301e75),_0x85e9b6['set'](_0x58b53f,_0x12333a,_0x48619b,_0x301e75));}['setStencil'+'State'](_0x39e4f6,_0xbfc1a2){_0x39e4f6||_0xbfc1a2?(this['setStencil'+'Test'](!(0x3f5+-0x3d*0x5a+0x25*0x79)),_0x39e4f6===_0xbfc1a2?(this['setStencil'+'Func'](_0x39e4f6['func'],_0x39e4f6['ref'],_0x39e4f6['readMask']),this['setStencil'+'Operation'](_0x39e4f6['fail'],_0x39e4f6['zfail'],_0x39e4f6['zpass'],_0x39e4f6['writeMask'])):(_0x39e4f6??(_0x39e4f6=ai['DEFAULT']),this['setStencil'+'FuncFront'](_0x39e4f6['func'],_0x39e4f6['ref'],_0x39e4f6['readMask']),this['setStencil'+'OperationF'+'ront'](_0x39e4f6['fail'],_0x39e4f6['zfail'],_0x39e4f6['zpass'],_0x39e4f6['writeMask']),_0xbfc1a2??(_0xbfc1a2=ai['DEFAULT']),this['setStencil'+'FuncBack'](_0xbfc1a2['func'],_0xbfc1a2['ref'],_0xbfc1a2['readMask']),this['setStencil'+'OperationB'+'ack'](_0xbfc1a2['fail'],_0xbfc1a2['zfail'],_0xbfc1a2['zpass'],_0xbfc1a2['writeMask']))):this['setStencil'+'Test'](!(0x241*-0xf+0x1e46+0x38a));}['setDepthSt'+'ate'](_0x568d92){const _0xc885ec=this['depthState'];if(!_0xc885ec['equals'](_0x568d92)){const _0xbbde05=this['gl'],_0x117c75=_0x568d92['write'];_0xc885ec['write']!==_0x117c75&&_0xbbde05['depthMask'](_0x117c75);let {func:_0x182b53,test:_0x48d92d}=_0x568d92;!_0x48d92d&&_0x117c75&&(_0x48d92d=!(0xc*-0xa8+-0x7f7*0x1+0xfd7),_0x182b53=Ni),_0xc885ec['func']!==_0x182b53&&_0xbbde05['depthFunc'](this['glComparis'+'on'][_0x182b53]),_0xc885ec['test']!==_0x48d92d&&(_0x48d92d?_0xbbde05['enable'](_0xbbde05['DEPTH_TEST']):_0xbbde05['disable'](_0xbbde05['DEPTH_TEST']));const {depthBias:_0x434059,depthBiasSlope:_0x4f3cb9}=_0x568d92;_0x434059||_0x4f3cb9?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(-0xe*-0xa3+0x1*0x2af+-0xb99),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0xbbde05['polygonOff'+'set'](_0x4f3cb9,_0x434059)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(-0x88c*-0x1+-0x1e51+0x15c6),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0xc885ec['copy'](_0x568d92);}}['setCullMod'+'e'](_0x5dec22){if(this['cullMode']!==_0x5dec22){if(_0x5dec22===xt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===xt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x54c43e=this['glCull'][_0x5dec22];this['cullFace']!==_0x54c43e&&(this['gl']['cullFace'](_0x54c43e),this['cullFace']=_0x54c43e);}this['cullMode']=_0x5dec22;}}['setShader'](_0x2974b9,_0x3e63f0=!(-0x1c3b+-0x5*-0x291+0xf67*0x1)){_0x2974b9!==this['shader']&&(this['shader']=_0x2974b9,this['shaderAsyn'+'cCompile']=_0x3e63f0,this['shaderVali'+'d']=void(0xe54+0x2*0x231+0xa*-0x1df),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x4f1a6a}=this,{impl:_0x369b1e}=_0x4f1a6a;this['shaderVali'+'d']===void(-0x2140+-0x1*0x416+0x2556)&&(_0x4f1a6a['failed']?this['shaderVali'+'d']=!(-0x1*0x1a2f+0x15ee*0x1+0x442*0x1):_0x4f1a6a['ready']||(this['shaderAsyn'+'cCompile']?_0x369b1e['isLinked'](this)?_0x369b1e['finalize'](this,_0x4f1a6a)||(_0x4f1a6a['failed']=!(-0xacf*-0x3+0x3*-0xaff+-0x90*-0x1),this['shaderVali'+'d']=!(-0xed7+0x162e+-0x6*0x139)):this['shaderVali'+'d']=!(0x12a*0x2+0x2427*0x1+-0x267a):_0x369b1e['finalize'](this,_0x4f1a6a)||(_0x4f1a6a['failed']=!(0x1*-0x1a07+0xf7*-0x8+-0x1*-0x21bf),this['shaderVali'+'d']=!(0x516*-0x1+-0xbb*0x26+0x20d9)))),this['shaderVali'+'d']===void(0x3c5*-0x5+0x21df+-0xf06)&&(this['gl']['useProgram'](_0x369b1e['glProgram']),this['shaderVali'+'d']=!(0x3e1*-0x3+0x59*0x2e+-0x45b));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x5169b9=this['gl'];this['_vaoMap']['forEach']((_0x939256,_0x19af0a,_0x24f6de)=>{_0x5169b9['deleteVert'+'exArray'](_0x939256);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x1cbdce){_0x1cbdce?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x213073=-0x1132+-0x2c*0xb3+0x182d*0x2){const _0x560895=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x560895['loseContex'+'t'](),setTimeout(()=>_0x560895['restoreCon'+'text'](),_0x213073);}}let _T=-0x11d2*-0x1+0x1466+-0x8*0x4c7;class dr{constructor(_0x26e8a4,_0x2a329a,_0x33ba58,_0x2969cd=ls,_0x5bd43d,_0xf4b588){this['device']=_0x26e8a4,this['format']=_0x2a329a,this['numIndices']=_0x33ba58,this['usage']=_0x2969cd,this['id']=_T++,this['impl']=_0x26e8a4['createInde'+'xBufferImp'+'l'](this,_0xf4b588);const _0x437ab9=vx[_0x2a329a];this['bytesPerIn'+'dex']=_0x437ab9,this['numBytes']=this['numIndices']*_0x437ab9,_0x5bd43d?this['setData'](_0x5bd43d):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x26e8a4['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x2c53ff=this['device'],_0x58fe5e=_0x2c53ff['buffers']['indexOf'](this);_0x58fe5e!==-(0x1dd9+0xa58+-0x2830)&&_0x2c53ff['buffers']['splice'](_0x58fe5e,-0xd5a+0x1*-0x1803+0x2*0x12af),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x2c53ff),this['adjustVram'+'SizeTracki'+'ng'](_0x2c53ff['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0xe7f907,_0x3bdac4){M['trace'](r0,this['id']+'\x20size:\x20'+_0x3bdac4+'\x20vram.ib:\x20'+_0xe7f907['ib']+'\x20=>\x20'+(_0xe7f907['ib']+_0x3bdac4)),_0xe7f907['ib']+=_0x3bdac4;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x5bead8){return _0x5bead8['byteLength']!==this['numBytes']?(M['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x5bead8['byteLength']),!(0x5*0x1ed+-0x1*0xa69+0x43*0x3)):(this['storage']=_0x5bead8,this['unlock'](),!(0xbb2+0x51*0x79+-0x355*0xf));}['_lockTyped'+'Array'](){const _0x33967a=this['lock']();return this['format']===hr?new Uint32Array(_0x33967a):this['format']===zi?new Uint16Array(_0x33967a):new Uint8Array(_0x33967a);}['writeData'](_0xe57d4d,_0x84555f){const _0x5d3df5=this['_lockTyped'+'Array']();if(_0xe57d4d['length']>_0x84555f){if(ArrayBuffer['isView'](_0xe57d4d))_0xe57d4d=_0xe57d4d['subarray'](-0x16c7+0x1*0x2455+-0xd8e,_0x84555f),_0x5d3df5['set'](_0xe57d4d);else{for(let _0x1d6a8c=-0x4*-0x7f1+-0x19d5+-0x1f*0x31;_0x1d6a8c<_0x84555f;_0x1d6a8c++)_0x5d3df5[_0x1d6a8c]=_0xe57d4d[_0x1d6a8c];}}else _0x5d3df5['set'](_0xe57d4d);this['unlock']();}['readData'](_0x410f2d){const _0x3a63cf=this['_lockTyped'+'Array'](),_0x4f94d9=this['numIndices'];if(ArrayBuffer['isView'](_0x410f2d))_0x410f2d['set'](_0x3a63cf);else{_0x410f2d['length']=-0x2f3+-0x2307+0x25fa;for(let _0x7ee606=0x3c3+0x1668+-0x1a2b;_0x7ee606<_0x4f94d9;_0x7ee606++)_0x410f2d[_0x7ee606]=_0x3a63cf[_0x7ee606];}return _0x4f94d9;}}class gT{constructor(){h(this,'clearValue',new ie(-0x567*-0x1+-0x2629+-0x1*-0x20c2,0xf14+-0x1739+0x825,0x66b*-0x2+-0x60*-0xf+-0x1a*-0x47,-0x1209+-0xd30+0x1f3a)),h(this,'clearValue'+'Linear',new ie(-0x200c+-0xf32+0x1*0x2f3e,0x1121+0xf8f+-0x20b0,0xa1e+-0x908+0x8b*-0x2,-0x1b88+-0x1b7e+0x3707)),h(this,'clear',!(-0x1786+-0x16c9+-0x30*-0xf7)),h(this,'store',!(-0x167*-0xd+-0xfda*-0x2+-0x391*0xe)),h(this,'resolve',!(-0x7*0x28+0x931+-0x819)),h(this,'genMipmaps',!(0x22*0x34+0x1639+0x4*-0x748));}}class ST{constructor(){h(this,'clearDepth'+'Value',-0x421*0x2+0x2a1*-0xb+-0x1297*-0x2),h(this,'clearStenc'+'ilValue',-0x227*-0x5+-0x1d82*0x1+0x12bf*0x1),h(this,'clearDepth',!(-0x1b33+0x590+0x2*0xad2)),h(this,'clearStenc'+'il',!(0x3a*-0x85+0xe41+0x2*0x7f1)),h(this,'storeDepth',!(-0x1981+0x14e1+0x4a1)),h(this,'resolveDep'+'th',!(0x12bf*0x1+0x4*-0x3a6+-0x426)),h(this,'storeStenc'+'il',!(-0x209e+-0x1d*-0xe5+0x6ae));}}class fs{constructor(_0x1fd8fb){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(0x2*-0x11a1+0x3cc*-0x4+0x496*0xb)),h(this,'_skipStart',!(0x1*0xfc9+0x1fb1+-0x2f79)),h(this,'_skipEnd',!(0x13f9+-0xb2*0x2b+-0x1f*-0x52)),h(this,'executeEna'+'bled',!(-0x1*-0x20c3+-0x11fd+-0xec6)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',-0x1550+-0x1e07*0x1+0x3357),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(-0x2484+0x2149+0x1*0x33b)),h(this,'fullSizeCl'+'earRect',!(-0x578+0x1c1f+0x78d*-0x3)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(M['assert'](_0x1fd8fb),this['device']=_0x1fd8fb);}get['colorOps'](){return this['colorArray'+'Ops'][-0x2688+0x98f+-0x1*-0x1cf9];}set['name'](_0x4d16d1){this['_name']=_0x4d16d1;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x4ef153){M['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x4ef153;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x554da6){M['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x554da6;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x25a521){this['_options']=_0x25a521,_0x25a521&&(this['scaleX']=this['scaleX']??0x439+-0x5*-0x71+0x23*-0x2f,this['scaleY']=this['scaleY']??-0x1c0f*-0x1+-0x209*-0x9+-0x2e5f);}get['options'](){return this['_options'];}['init'](_0x5079b9=null,_0x3ccae5){this['options']=_0x3ccae5,this['renderTarg'+'et']=_0x5079b9,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],-0x1*0x2042+-0x1*-0x18bb+0x788),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x426a48,_0x1c4589,_0x53db5d,_0x4ce352;const _0x47ee66=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new ST(),_0x47ee66!=null&&_0x47ee66['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(0x1dd7*-0x1+-0x8*0xf2+0x2567));const _0x8c89a1=_0x47ee66?((_0x426a48=_0x47ee66['_colorBuff'+'ers'])==null?void(-0x13c4+0x1*0x13d7+-0x1*0x13):_0x426a48['length'])??-0x12ef*-0x1+0x1*0x343+-0x1632:0x1*-0x2b3+0x1*0x11ce+-0xf1a;this['colorArray'+'Ops']['length']=0x5*0x442+-0xd9*0xa+0xcd0*-0x1;for(let _0x2c1797=0xe92+0x1205+0x51*-0x67;_0x2c1797<_0x8c89a1;_0x2c1797++){const _0x36fb88=new gT();this['colorArray'+'Ops'][_0x2c1797]=_0x36fb88,this['samples']===0x899*0x3+0xe5a+-0xe*0x2de&&(_0x36fb88['store']=!(-0x1d03+0xa*0x3e1+-0x9c7*0x1),_0x36fb88['resolve']=!(0x197a*0x1+-0x667+-0x1312));const _0x594abd=(_0x53db5d=(_0x1c4589=this['renderTarg'+'et'])==null?void(0x178e+-0xf4e+-0x58*0x18):_0x1c4589['_colorBuff'+'ers'])==null?void(-0xe73+0xab3+0x18*0x28):_0x53db5d[_0x2c1797];if((_0x4ce352=this['renderTarg'+'et'])!=null&&_0x4ce352['mipmaps']&&(_0x594abd!=null&&_0x594abd['mipmaps'])){const _0x63418b=Ya(_0x594abd['_format']);_0x36fb88['genMipmaps']=!_0x63418b;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x4bf8dc=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x1452f6=Math['floor'](_0x4bf8dc['width']*this['scaleX']),_0x29b194=Math['floor'](_0x4bf8dc['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x1452f6,_0x29b194);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x2db08d){this['_enabled']!==_0x2db08d&&(this['_enabled']=_0x2db08d,_0x2db08d?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x2ecda0){const _0x3b8f07=this['colorArray'+'Ops']['length'];for(let _0x3c741e=0x1d9*0x6+-0x1f9*-0x3+0x5ab*-0x3;_0x3c741e<_0x3b8f07;_0x3c741e++){const _0x38b708=this['colorArray'+'Ops'][_0x3c741e];_0x2ecda0&&(_0x38b708['clearValue']['copy'](_0x2ecda0),_0x38b708['clearValue'+'Linear']['linear'](_0x2ecda0)),_0x38b708['clear']=!!_0x2ecda0;}}['setClearDe'+'pth'](_0x1ab083){_0x1ab083&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x1ab083),this['depthStenc'+'ilOps']['clearDepth']=_0x1ab083!==void(0x5bb+0x1f63*0x1+-0x251e*0x1);}['setClearSt'+'encil'](_0x21eda6){_0x21eda6&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x21eda6),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x21eda6!==void(-0x25c5*0x1+-0x79d*0x3+0x3c9c);}['render'](){if(this['enabled']){const _0x54c212=this['device'],_0x411c0b=this['renderTarg'+'et']!==void(-0xf*0xbe+0x1*-0x1208+0x1d2a);M['call'](()=>{this['log'](_0x54c212,_0x54c212['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x411c0b&&!this['_skipStart']&&_0x54c212['startRende'+'rPass'](this),this['execute'](),_0x411c0b&&!this['_skipEnd']&&_0x54c212['endRenderP'+'ass'](this)),this['after'](),_0x54c212['renderPass'+'Index']++;}}['log'](_0x470759,_0x3bdbd4=0x1*-0x301+-0x5*0x1a9+0x5a7*0x2){var _0x26eec3,_0xe9097d,_0x2b033b;if(ni['get'](Hm)||ni['get'](qa)){const _0x45b490=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x470759['backBuffer']:null),_0x11f810=!!(_0x45b490!=null&&_0x45b490['impl']['assignedCo'+'lorTexture'])||(_0x45b490==null?void(-0x373*0x2+0xa0*-0x15+0x1406):_0x45b490['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(0x279*-0x2+-0x2*-0x35+0x488),_0x539788=((_0x26eec3=_0x45b490==null?void(0x1*0x696+0x4d7+-0xb6d):_0x45b490['_colorBuff'+'ers'])==null?void(0x26c+-0xe*0x181+0x12a2):_0x26eec3['length'])??(_0x11f810?0x22c+0x1*-0x20b5+0x2*0xf45:-0xb99+0x1122+-0x589*0x1),_0x135051=_0x45b490==null?void(0x2b*0x13+0x13c1+-0x10b*0x16):_0x45b490['depth'],_0x5d074e=_0x45b490==null?void(0xe27+0x1934+-0x275b):_0x45b490['stencil'],_0xf9fd12=_0x45b490==null?void(-0x325+-0xcb*-0x21+-0xe*0x1a5):_0x45b490['mipLevel'],_0x23fb0b=_0x45b490?'\x20RT:\x20'+(_0x45b490?_0x45b490['name']:'NULL')+'\x20'+(_0x539788>0x1*0x23e+-0x269*-0x4+-0xbe2?'[Color'+(_0x539788>0x6cd+-0x4*-0x1c1+0x110*-0xd?'\x20x\x20'+_0x539788:'')+']':'')+(_0x135051?'[Depth]':'')+(_0x5d074e?'[Stencil]':'')+'\x20'+_0x45b490['width']+'\x20x\x20'+_0x45b490['height']+(this['samples']>-0x32*0x6b+0x6c*0x26+0x7*0xb2?'\x20samples:\x20'+this['samples']:'')+(_0xf9fd12>-0xd45+-0xd13*0x2+0x276b*0x1?'\x20mipLevel:'+'\x20'+_0xf9fd12:''):'',_0x5bcee1=this['_skipStart']?'++':_0x3bdbd4['toString']()['padEnd'](0x1d8b+-0x88*0x33+-0x271,'\x20');M['trace'](Hm,_0x5bcee1+':\x20'+this['name']['padEnd'](-0x2c5*0x7+0x1*0x655+0x1*0xd22,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x23fb0b['padEnd'](-0x1176*-0x2+0x233*-0xb+-0xa9d));for(let _0x4dd408=0x23de+0xa6e+-0x4*0xb93;_0x4dd408<_0x539788;_0x4dd408++){const _0x149876=this['colorArray'+'Ops'][_0x4dd408],_0x361500=(_0xe9097d=Lt['get'](_0x11f810?_0x470759['backBuffer'+'Format']:_0x45b490['getColorBu'+'ffer'](_0x4dd408)['format']))==null?void(0x9e+-0x23bd+-0x231f*-0x1):_0xe9097d['name'];M['trace'](qa,'\x20\x20\x20\x20color['+_0x4dd408+']:\x20'+(_0x149876['clear']?'clear':'load')+'->'+(_0x149876['store']?'store':'discard')+'\x20'+(_0x149876['resolve']?'resolve\x20':'')+(_0x149876['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x361500+']\x20'+(_0x149876['clear']?'[clear:\x20'+_0x149876['clearValue']['toString'](!(-0xb*0xe5+0x7d3+-0x4*-0x81),!(0x533*-0x1+0x41*-0x10+0x943*0x1))+']':''));}if(this['depthStenc'+'ilOps']){const _0x335896=''+(_0x45b490['depthBuffe'+'r']?'\x20[format:\x20'+((_0x2b033b=Lt['get'](_0x45b490['depthBuffe'+'r']['format']))==null?void(0x2*-0x134a+-0x3*0x6cf+0x3b01):_0x2b033b['name'])+']':'');_0x135051&&M['trace'](qa,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x335896+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x5d074e&&M['trace'](qa,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x335896+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function yT(_0x4b170b){this['array'][this['index']]=_0x4b170b;}function vT(_0x3f2f94,_0x284e30){this['array'][this['index']]=_0x3f2f94,this['array'][this['index']+(0x39e+-0xf3c+0x55*0x23)]=_0x284e30;}function xT(_0x3983d9,_0x5b9052,_0x47a8bb){this['array'][this['index']]=_0x3983d9,this['array'][this['index']+(-0xc96+0x1350+-0x6b9)]=_0x5b9052,this['array'][this['index']+(-0x3b7+-0xe5+0x1*0x49e)]=_0x47a8bb;}function TT(_0xdc0490,_0x8b46c0,_0x69b8a3,_0x43d6cc){this['array'][this['index']]=_0xdc0490,this['array'][this['index']+(-0x1af0+-0x86e+0x1*0x235f)]=_0x8b46c0,this['array'][this['index']+(-0x72+-0x392*0x4+0xebc)]=_0x69b8a3,this['array'][this['index']+(-0x1148+0xd75+0x3d6)]=_0x43d6cc;}function wT(_0x35562c,_0x3fb78b,_0x4ec411){this['array'][_0x35562c]=_0x3fb78b[_0x4ec411];}function ET(_0x41377c,_0x2f834d,_0x429c1d){this['array'][_0x41377c]=_0x2f834d[_0x429c1d],this['array'][_0x41377c+(0xff3+0x1*0x9dc+-0x2*0xce7)]=_0x2f834d[_0x429c1d+(0x18c2*0x1+-0x2546+-0xc85*-0x1)];}function AT(_0x39dc36,_0x121145,_0x52ef0a){this['array'][_0x39dc36]=_0x121145[_0x52ef0a],this['array'][_0x39dc36+(-0x1498+-0x11*0x1b4+0x5*0x9e9)]=_0x121145[_0x52ef0a+(0x7*-0x113+-0x1*0x1f15+0x269b)],this['array'][_0x39dc36+(0x12*-0xf9+-0x973*-0x3+-0xad5)]=_0x121145[_0x52ef0a+(-0x26c4+-0x1a24+0x40ea)];}function bT(_0xc92919,_0x30a44a,_0x183463){this['array'][_0xc92919]=_0x30a44a[_0x183463],this['array'][_0xc92919+(-0x1*-0x1efd+0x27*-0xd+-0x1d01)]=_0x30a44a[_0x183463+(-0x2*-0x5db+0xc8*-0xd+-0x18d)],this['array'][_0xc92919+(-0x1776+-0x1*-0xd1f+0x373*0x3)]=_0x30a44a[_0x183463+(0x1*-0x691+0x171f+0x161*-0xc)],this['array'][_0xc92919+(-0x1ba2+-0x14c2+0x3067)]=_0x30a44a[_0x183463+(-0x562*0x3+0xa30*0x2+-0x437*0x1)];}function CT(_0x1a37dd,_0x2eb206,_0x5a0023){_0x2eb206[_0x5a0023]=this['array'][_0x1a37dd];}function PT(_0x48fa2f,_0x3f6c62,_0x457dd5){_0x3f6c62[_0x457dd5]=this['array'][_0x48fa2f],_0x3f6c62[_0x457dd5+(-0x2291*0x1+-0x189*0x17+0x174b*0x3)]=this['array'][_0x48fa2f+(0x22d*-0x3+-0x8c7*-0x3+0x13cd*-0x1)];}function MT(_0x177132,_0xff0723,_0x42f3fb){_0xff0723[_0x42f3fb]=this['array'][_0x177132],_0xff0723[_0x42f3fb+(-0x651*0x2+-0x1*-0x16af+0x2*-0x506)]=this['array'][_0x177132+(0x1003*-0x1+0x596+-0x37a*-0x3)],_0xff0723[_0x42f3fb+(0x44*0x40+0x677+0x1775*-0x1)]=this['array'][_0x177132+(0x26d*-0xc+0xce1*0x2+0x14*0x2b)];}function IT(_0x6204d4,_0x93bfd5,_0x450924){_0x93bfd5[_0x450924]=this['array'][_0x6204d4],_0x93bfd5[_0x450924+(0x20ac+-0x17f*0x1+-0x1f2c)]=this['array'][_0x6204d4+(-0x2c2*0xc+-0x365*-0x3+0x16ea)],_0x93bfd5[_0x450924+(0x1dc6+-0x12a+-0x1c9a)]=this['array'][_0x6204d4+(-0x1*-0x1017+0xb79*-0x1+0x3b*-0x14)],_0x93bfd5[_0x450924+(0xc*0xa1+-0x1f97+0x180e*0x1)]=this['array'][_0x6204d4+(0x14f1+-0x105f+-0x48f)];}class DT{constructor(_0x2dbc93,_0x50acd5,_0x475a13){switch(this['index']=-0x1*-0x707+0x2*-0x11bf+0x1c77*0x1,this['numCompone'+'nts']=_0x50acd5['numCompone'+'nts'],_0x475a13['interleave'+'d']?this['array']=new ln[_0x50acd5['dataType']](_0x2dbc93,_0x50acd5['offset']):this['array']=new ln[_0x50acd5['dataType']](_0x2dbc93,_0x50acd5['offset'],_0x475a13['vertexCoun'+'t']*_0x50acd5['numCompone'+'nts']),this['stride']=_0x50acd5['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x50acd5['numCompone'+'nts']){case 0x1b15+-0x1898+0x2*-0x13e:this['set']=yT,this['getToArray']=CT,this['setFromArr'+'ay']=wT;break;case 0x32b*0x5+-0x26a6*0x1+-0x289*-0x9:this['set']=vT,this['getToArray']=PT,this['setFromArr'+'ay']=ET;break;case-0x1adb+0x24cf+0x1fd*-0x5:this['set']=xT,this['getToArray']=MT,this['setFromArr'+'ay']=AT;break;case-0x1b0f+0x1080+0xa93:this['set']=TT,this['getToArray']=IT,this['setFromArr'+'ay']=bT;break;}}['get'](_0x412bcb){return this['array'][this['index']+_0x412bcb];}['set'](_0x56d68a,_0x265a4d,_0x2f08c7,_0x16c30a){}['getToArray'](_0x5bdf96,_0x118d9b,_0x53d256){}['setFromArr'+'ay'](_0x391516,_0x55439b,_0x3d4928){}}class go{constructor(_0x161d23){this['vertexBuff'+'er']=_0x161d23,this['vertexForm'+'atSize']=_0x161d23['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x15290a=this['vertexBuff'+'er']['getFormat']();for(let _0x2eaaad=-0x15f7+0x224c+0xb*-0x11f;_0x2eaaad<_0x15290a['elements']['length'];_0x2eaaad++){const _0x5bcafa=_0x15290a['elements'][_0x2eaaad];this['accessors'][_0x2eaaad]=new DT(this['buffer'],_0x5bcafa,_0x15290a),this['element'][_0x5bcafa['name']]=this['accessors'][_0x2eaaad];}}['next'](_0x1acdf4=0x1*0x5db+0xc85*0x1+-0x125f){let _0x57de9e=0x1605+0x1*0x1f7+0x1*-0x17fc;const _0x4bba9f=this['accessors'],_0x4d22b3=this['accessors']['length'];for(;_0x57de9e<_0x4d22b3;){const _0x5af25e=_0x4bba9f[_0x57de9e++];_0x5af25e['index']+=_0x1acdf4*_0x5af25e['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x197b45,_0x1df7af,_0x105aa6){const _0x524b12=this['element'][_0x197b45];if(_0x524b12){_0x105aa6>this['vertexBuff'+'er']['numVertice'+'s']&&(M['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x105aa6+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x105aa6=this['vertexBuff'+'er']['numVertice'+'s']);const _0x41b7d3=_0x524b12['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x25c689=-0x3*-0x4d9+0x237*-0x1+-0xc54;for(let _0x1d8489=-0x1005+-0x8f4+0x18f9;_0x1d8489<_0x105aa6;_0x1d8489++)_0x524b12['setFromArr'+'ay'](_0x25c689,_0x1df7af,_0x1d8489*_0x41b7d3),_0x25c689+=_0x524b12['stride'];}else{if(_0x1df7af['length']>_0x105aa6*_0x41b7d3){const _0x14968a=_0x105aa6*_0x41b7d3;if(ArrayBuffer['isView'](_0x1df7af))_0x1df7af=_0x1df7af['subarray'](-0x1dd*0x5+0x196e+-0x5*0x339,_0x14968a),_0x524b12['array']['set'](_0x1df7af);else{for(let _0x17dec5=0x1293*-0x2+-0x1*0x516+0x6a*0x66;_0x17dec5<_0x14968a;_0x17dec5++)_0x524b12['array'][_0x17dec5]=_0x1df7af[_0x17dec5];}}else _0x524b12['array']['set'](_0x1df7af);}}}['readData'](_0xf70925,_0x515c91){const _0x306533=this['element'][_0xf70925];let _0x5888f4=-0x1431+0x10ec+-0x117*-0x3;if(_0x306533){_0x5888f4=this['vertexBuff'+'er']['numVertice'+'s'];let _0x387d74;const _0x5a78d5=_0x306533['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x515c91)&&(_0x515c91['length']=-0x29*0x29+0x136d+-0x4*0x337),_0x306533['index']=0x467*0x7+0x2288+0x1*-0x4159;let _0x40e1df=-0x2e7+-0x1*0x14cd+0x17b4;for(_0x387d74=-0x1*-0x1e0c+-0x73*-0x36+-0x121a*0x3;_0x387d74<_0x5888f4;_0x387d74++)_0x306533['getToArray'](_0x40e1df,_0x515c91,_0x387d74*_0x5a78d5),_0x40e1df+=_0x306533['stride'];}else{if(ArrayBuffer['isView'](_0x515c91))_0x515c91['set'](_0x306533['array']);else{_0x515c91['length']=-0xa02+0x25de+-0x2*0xdee;const _0x53b996=_0x5888f4*_0x5a78d5;for(_0x387d74=0x355+-0x1b3d+0x17e8;_0x387d74<_0x53b996;_0x387d74++)_0x515c91[_0x387d74]=_0x306533['array'][_0x387d74];}}}return _0x5888f4;}}const LT=-(0x1277+-0x2*-0xd1+-0x1418);class RT{constructor(_0x161667,_0x32678b){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x32678b&&(this['key']=_0x32678b['keyCode'],this['element']=_0x32678b['target'],this['event']=_0x32678b);}}const El=new RT();function dd(_0x3e8623){return El['key']=_0x3e8623['keyCode'],El['element']=_0x3e8623['target'],El['event']=_0x3e8623,El;}function Al(_0x53fb7a){return typeof _0x53fb7a=='string'?_0x53fb7a['toUpperCas'+'e']()['charCodeAt'](0x7*-0x21a+0xf2*-0x1d+0x8*0x544):_0x53fb7a;}const OT={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class Ap extends pe{constructor(_0x173416,_0x36f442={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x173416&&this['attach'](_0x173416),this['preventDef'+'ault']=_0x36f442['preventDef'+'ault']||!(-0x1*-0x9c7+0xb5e+-0x1524),this['stopPropag'+'ation']=_0x36f442['stopPropag'+'ation']||!(-0x1f10+0x5f4*0x6+-0x4a7));}['attach'](_0x1265be){this['_element']&&this['detach'](),this['_element']=_0x1265be,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(0x237f+-0x1*-0xc0d+-0x2f8b)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(-0xc*-0x319+-0xe23+0x1*-0x1708)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(-0x18c3*-0x1+-0x1935+0x5*0x17)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x2103+0x1eba+0x24a)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(-0x1046+-0x7*-0x46a+-0xe9f));}['detach'](){if(!this['_element']){M['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x25a6*-0x1+0x5*-0x2a1+-0x1880)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(-0x2317+-0x128+-0xa*-0x3a0));}['toKeyIdent'+'ifier'](_0x110b55){_0x110b55=Al(_0x110b55);const _0x234796=OT[_0x110b55['toString']()];if(_0x234796)return _0x234796;let _0x5a7fdd=_0x110b55['toString'](-0x169f+-0x13*0x10a+0x2a6d)['toUpperCas'+'e']();const _0x3dadda=_0x5a7fdd['length'];for(let _0x60a3e7=0x11f*0xe+0x102f+-0x1fe1;_0x60a3e7<-0x25*-0x57+-0x207a+0x13eb*0x1-_0x3dadda;_0x60a3e7++)_0x5a7fdd='0'+_0x5a7fdd;return'U+'+_0x5a7fdd;}['_handleKey'+'Down'](_0xfb11b4){const _0x5f31c8=_0xfb11b4['keyCode']||_0xfb11b4['charCode'];if(_0x5f31c8===void(0x12df+-0x10e7+-0x1f8))return;const _0x2df5e4=this['toKeyIdent'+'ifier'](_0x5f31c8);this['_keymap'][_0x2df5e4]=!(-0x1356+-0x1bf0+0x2f46),this['fire']('keydown',dd(_0xfb11b4)),this['preventDef'+'ault']&&_0xfb11b4['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0xfb11b4['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x3c19f2){const _0x1bd781=_0x3c19f2['keyCode']||_0x3c19f2['charCode'];if(_0x1bd781===void(-0x16ed*-0x1+-0x1e10+0x723))return;const _0x2b339e=this['toKeyIdent'+'ifier'](_0x1bd781);delete this['_keymap'][_0x2b339e],this['fire']('keyup',dd(_0x3c19f2)),this['preventDef'+'ault']&&_0x3c19f2['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x3c19f2['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x3ae28b){this['fire']('keypress',dd(_0x3ae28b)),this['preventDef'+'ault']&&_0x3ae28b['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x3ae28b['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x1fd797 in this['_lastmap'])delete this['_lastmap'][_0x1fd797];for(const _0x36b726 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x36b726)&&(this['_lastmap'][_0x36b726]=this['_keymap'][_0x36b726]);}['isPressed'](_0x3db041){const _0x135c1d=Al(_0x3db041),_0x480945=this['toKeyIdent'+'ifier'](_0x135c1d);return!!this['_keymap'][_0x480945];}['wasPressed'](_0x16059e){const _0x348f3e=Al(_0x16059e),_0x285f44=this['toKeyIdent'+'ifier'](_0x348f3e);return!!this['_keymap'][_0x285f44]&&!this['_lastmap'][_0x285f44];}['wasRelease'+'d'](_0x2fbf0a){const _0x19ea4c=Al(_0x2fbf0a),_0x5905cb=this['toKeyIdent'+'ifier'](_0x19ea4c);return!this['_keymap'][_0x5905cb]&&!!this['_lastmap'][_0x5905cb];}}h(Ap,'EVENT_KEYD'+'OWN','keydown'),h(Ap,'EVENT_KEYU'+'P','keyup');function Af(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class Ka{constructor(_0x2d8b11,_0x206e78){h(this,'x',0xec3+-0x20a3+0x11e0),h(this,'y',-0xc5b*0x3+-0x1304+0x1*0x3815),h(this,'dx',-0x2302+0xeab*0x1+0x1457),h(this,'dy',0x15b0+0xa09+-0x1fb9*0x1),h(this,'button',LT),h(this,'wheelDelta',-0x127d*0x1+0x14b8+-0x23b),h(this,'element'),h(this,'ctrlKey',!(-0x20c3+-0xb51+0x2c15)),h(this,'altKey',!(0x1cdc+0x3d*-0x9d+-0x5*-0x1b6)),h(this,'shiftKey',!(-0x191c+0x1*0xd9e+0xb7f)),h(this,'metaKey',!(-0x26e8+-0x911+0x2ffa)),h(this,'event');let _0x26a511={'x':0x0,'y':0x0};if(_0x206e78){if(_0x206e78 instanceof Ka)throw Error('Expected\x20M'+'ouseEvent');_0x26a511=_0x2d8b11['_getTarget'+'Coords'](_0x206e78);}else _0x206e78={};if(_0x26a511)this['x']=_0x26a511['x'],this['y']=_0x26a511['y'];else{if(Af())this['x']=-0x1*0x1a16+0x1*-0x2111+0x3b27,this['y']=-0x249e+-0x1*0x1279+0x1*0x3717;else return;}_0x206e78['type']==='wheel'&&(_0x206e78['deltaY']>-0xab3*0x3+0x853+0x2*0xbe3?this['wheelDelta']=-0x182d+0x94*-0x35+0x36d2*0x1:_0x206e78['deltaY']<-0x24da+-0x22e7*-0x1+0x1*0x1f3&&(this['wheelDelta']=-(0x7aa+-0x66*-0x4e+0xd3*-0x2f))),Af()?(this['dx']=_0x206e78['movementX']||_0x206e78['webkitMove'+'mentX']||_0x206e78['mozMovemen'+'tX']||0x4a4*0x1+-0x248f+0x1feb*0x1,this['dy']=_0x206e78['movementY']||_0x206e78['webkitMove'+'mentY']||_0x206e78['mozMovemen'+'tY']||-0x96a+0x2508+0x23*-0xca):(this['dx']=this['x']-_0x2d8b11['_lastX'],this['dy']=this['y']-_0x2d8b11['_lastY']),(_0x206e78['type']==='mousedown'||_0x206e78['type']==='mouseup')&&(this['button']=_0x206e78['button']),this['buttons']=_0x2d8b11['_buttons']['slice'](-0x12ec+-0x1*0x10f5+-0x23e1*-0x1),this['element']=_0x206e78['target'],this['ctrlKey']=_0x206e78['ctrlKey']??!(-0x12a2+0x15ce+0x1*-0x32b),this['altKey']=_0x206e78['altKey']??!(-0x15*0x161+-0x1fe3+0x3cd9),this['shiftKey']=_0x206e78['shiftKey']??!(0x14bd*-0x1+-0x1c64*0x1+0x3122),this['metaKey']=_0x206e78['metaKey']??!(-0x3a5*-0x1+-0x23*-0x50+-0xe94),this['event']=_0x206e78;}}class bl extends pe{constructor(_0x5ca560){super(),h(this,'_lastX',-0xf34+0x22a9+-0x1375),h(this,'_lastY',-0x1c1*-0x5+0x1f0f+-0x27d4),h(this,'_buttons',[!(-0x1ea8+-0x3*-0x437+0x1204),!(0x24b*0x1+0xa05+-0x1*0xc4f),!(0x152b+0xf19*0x2+-0x335c)]),h(this,'_lastbutto'+'ns',[!(-0x113f+0x1*-0xaae+0x1bee),!(0x20dd*-0x1+-0x37*0x2f+0x2af7),!(0x5e8+0x24a*0x7+-0x15ed)]),h(this,'_target',null),h(this,'_attached',!(-0x1c95+-0x54+0x1cea)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x1a5595=>{_0x1a5595['preventDef'+'ault']();},this['attach'](_0x5ca560));}static['isPointerL'+'ocked'](){return Af();}['attach'](_0x4e299a){if(this['_target']=_0x4e299a,this['_attached'])return;this['_attached']=!(-0x1634+-0x1156+0x278a);const _0x3b00fd={'passive':!(0x742+-0x354*-0x1+0x12d*-0x9)},_0x21b67b=Me['passiveEve'+'nts']?_0x3b00fd:!(-0x10f+0x2*0x2d2+-0x494);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x21b67b),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x21b67b),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x21b67b),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x21b67b);}['detach'](){if(!this['_attached'])return;this['_attached']=!(-0x14fd+0x16*0x19c+-0xe6a),this['_target']=null;const _0x520afd={'passive':!(0x15cd*0x1+0xc*-0xbf+-0xcd8)},_0x1d6866=Me['passiveEve'+'nts']?_0x520afd:!(0x2613+0x16b7+-0x6c1*0x9);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x1d6866),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x1d6866),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x1d6866),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x1d6866);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x24562c,_0x3c8b6d){if(!document['body']['requestPoi'+'nterLock']){_0x3c8b6d&&_0x3c8b6d();return;}const _0x17001c=()=>{_0x24562c(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x17001c);},_0x53caa1=()=>{_0x3c8b6d(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x53caa1);};_0x24562c&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x17001c,!(0x3*0xc0e+0x2*0xef+-0x2607*0x1)),_0x3c8b6d&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x53caa1,!(0x391+-0x1b3*0x2+-0x2a)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x321097){if(!document['exitPointe'+'rLock'])return;const _0x2905fa=()=>{_0x321097(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x2905fa);};_0x321097&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x2905fa,!(0xc04+0x11d*-0x10+-0x129*-0x5)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][0x157*0xe+0x1518+-0x27da]=this['_buttons'][-0x170f*0x1+-0xafe+-0x220d*-0x1],this['_lastbutto'+'ns'][0x7a9+0xd98+-0x550*0x4]=this['_buttons'][0x113f+-0x2370+0x1232],this['_lastbutto'+'ns'][-0x1e3+-0x591+-0x17e*-0x5]=this['_buttons'][-0x6f7+0x1*0xac6+0x1*-0x3cd];}['isPressed'](_0x287b83){return this['_buttons'][_0x287b83];}['wasPressed'](_0x441d52){return this['_buttons'][_0x441d52]&&!this['_lastbutto'+'ns'][_0x441d52];}['wasRelease'+'d'](_0xc8fb8b){return!this['_buttons'][_0xc8fb8b]&&this['_lastbutto'+'ns'][_0xc8fb8b];}['_handleUp'](_0x1c96ab){this['_buttons'][_0x1c96ab['button']]=!(0x2*0xd0d+0x5*-0x6d8+0x81f);const _0x7a5c54=new Ka(this,_0x1c96ab);_0x7a5c54['event']&&this['fire']('mouseup',_0x7a5c54);}['_handleDow'+'n'](_0x23427c){this['_buttons'][_0x23427c['button']]=!(0x1*-0xee3+0x1895+-0x9b2);const _0x2245e1=new Ka(this,_0x23427c);_0x2245e1['event']&&this['fire']('mousedown',_0x2245e1);}['_handleMov'+'e'](_0x285507){const _0x5ba6f0=new Ka(this,_0x285507);_0x5ba6f0['event']&&(this['fire']('mousemove',_0x5ba6f0),this['_lastX']=_0x5ba6f0['x'],this['_lastY']=_0x5ba6f0['y']);}['_handleWhe'+'el'](_0x49a6ad){const _0x2d38d1=new Ka(this,_0x49a6ad);_0x2d38d1['event']&&this['fire']('mousewheel',_0x2d38d1);}['_getTarget'+'Coords'](_0x4bf111){const _0x47f4be=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x199801=Math['floor'](_0x47f4be['left']),_0x56d5bc=Math['floor'](_0x47f4be['top']);return _0x4bf111['clientX']<_0x199801||_0x4bf111['clientX']>=_0x199801+this['_target']['clientWidt'+'h']||_0x4bf111['clientY']<_0x56d5bc||_0x4bf111['clientY']>=_0x56d5bc+this['_target']['clientHeig'+'ht']?null:{'x':_0x4bf111['clientX']-_0x199801,'y':_0x4bf111['clientY']-_0x56d5bc};}}h(bl,'EVENT_MOUS'+'EMOVE','mousemove'),h(bl,'EVENT_MOUS'+'EDOWN','mousedown'),h(bl,'EVENT_MOUS'+'EUP','mouseup'),h(bl,'EVENT_MOUS'+'EWHEEL','mousewheel');const Re=class Re{['get'](_0x328b20,_0x3c2103,_0x209bbd){typeof _0x3c2103=='function'&&(_0x209bbd=_0x3c2103,_0x3c2103={});const _0x10bb86=this['request']('GET',_0x328b20,_0x3c2103,_0x209bbd),{progress:_0x799248}=_0x3c2103;if(_0x799248){const _0x205884=_0x49feca=>{_0x49feca['lengthComp'+'utable']&&_0x799248['fire']('progress',_0x49feca['loaded'],_0x49feca['total']);},_0x153632=_0x13a48d=>{_0x205884(_0x13a48d),_0x10bb86['removeEven'+'tListener']('loadstart',_0x205884),_0x10bb86['removeEven'+'tListener']('progress',_0x205884),_0x10bb86['removeEven'+'tListener']('loadend',_0x153632);};_0x10bb86['addEventLi'+'stener']('loadstart',_0x205884),_0x10bb86['addEventLi'+'stener']('progress',_0x205884),_0x10bb86['addEventLi'+'stener']('loadend',_0x153632);}return _0x10bb86;}['post'](_0x2155a1,_0x578146,_0x5ed532,_0x4723ec){return typeof _0x5ed532=='function'&&(_0x4723ec=_0x5ed532,_0x5ed532={}),_0x5ed532['postdata']=_0x578146,this['request']('POST',_0x2155a1,_0x5ed532,_0x4723ec);}['put'](_0x409650,_0x31666a,_0x5a5cb1,_0x4d4dc4){return typeof _0x5a5cb1=='function'&&(_0x4d4dc4=_0x5a5cb1,_0x5a5cb1={}),_0x5a5cb1['postdata']=_0x31666a,this['request']('PUT',_0x409650,_0x5a5cb1,_0x4d4dc4);}['del'](_0x5c9963,_0x1d3127,_0x309f3e){return typeof _0x1d3127=='function'&&(_0x309f3e=_0x1d3127,_0x1d3127={}),this['request']('DELETE',_0x5c9963,_0x1d3127,_0x309f3e);}['request'](_0x18f15d,_0x5d51d3,_0x5d4dad,_0x4f0ce9){let _0x2a6fa1,_0x7a0689,_0x34d952,_0xd8ab5c=!(-0x361*-0x3+0x1006+-0x1a28);if(typeof _0x5d4dad=='function'&&(_0x4f0ce9=_0x5d4dad,_0x5d4dad={}),_0x5d4dad['retry']&&(_0x5d4dad=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x5d4dad)),_0x5d4dad['callback']=_0x4f0ce9,_0x5d4dad['async']==null&&(_0x5d4dad['async']=!(-0x6*0x71+0x1*0xa51+-0x7ab)),_0x5d4dad['headers']==null&&(_0x5d4dad['headers']={}),_0x5d4dad['postdata']!=null){if(_0x5d4dad['postdata']instanceof Document)_0x34d952=_0x5d4dad['postdata'];else{if(_0x5d4dad['postdata']instanceof FormData)_0x34d952=_0x5d4dad['postdata'];else{if(_0x5d4dad['postdata']instanceof Object){let _0x4169f5=_0x5d4dad['headers']['Content-Ty'+'pe'];switch(_0x4169f5===void(-0xab4+-0x48d*0x4+0x1ce8)&&(_0x5d4dad['headers']['Content-Ty'+'pe']=Re['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x4169f5=_0x5d4dad['headers']['Content-Ty'+'pe']),_0x4169f5){case Re['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x34d952='';let _0x5409ac=!(-0x1d6b*0x1+0x18b0+0xad*0x7);for(const _0x1074c9 in _0x5d4dad['postdata'])if(_0x5d4dad['postdata']['hasOwnProp'+'erty'](_0x1074c9)){_0x5409ac?_0x5409ac=!(-0x1835+0xd*0xad+0xf6d):_0x34d952+='&';const _0x50b538=encodeURIComponent(_0x1074c9),_0x228b7b=encodeURIComponent(_0x5d4dad['postdata'][_0x1074c9]);_0x34d952+=_0x50b538+'='+_0x228b7b;}break;}default:case Re['ContentTyp'+'e']['JSON']:_0x4169f5==null&&(_0x5d4dad['headers']['Content-Ty'+'pe']=Re['ContentTyp'+'e']['JSON']),_0x34d952=JSON['stringify'](_0x5d4dad['postdata']);break;}}else _0x34d952=_0x5d4dad['postdata'];}}}if(_0x5d4dad['cache']===!(0xcc8+-0x65*-0x6+0x1*-0xf25)){const _0x52148a=de();_0x2a6fa1=new id(_0x5d51d3),_0x2a6fa1['query']?_0x2a6fa1['query']=_0x2a6fa1['query']+'&ts='+_0x52148a:_0x2a6fa1['query']='ts='+_0x52148a,_0x5d51d3=_0x2a6fa1['toString']();}_0x5d4dad['query']&&(_0x2a6fa1=new id(_0x5d51d3),_0x7a0689=bh(_0x2a6fa1['getQuery'](),_0x5d4dad['query']),_0x2a6fa1['setQuery'](_0x7a0689),_0x5d51d3=_0x2a6fa1['toString']());const _0x21111d=new XMLHttpRequest();_0x21111d['open'](_0x18f15d,_0x5d51d3,_0x5d4dad['async']),_0x21111d['withCreden'+'tials']=_0x5d4dad['withCreden'+'tials']!==void(0x1736*0x1+0x1bcb+-0x3301)?_0x5d4dad['withCreden'+'tials']:!(0x160e+0x5f5*0x1+0xe01*-0x2),_0x21111d['responseTy'+'pe']=_0x5d4dad['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x5d51d3);for(const _0x41c20b in _0x5d4dad['headers'])_0x5d4dad['headers']['hasOwnProp'+'erty'](_0x41c20b)&&_0x21111d['setRequest'+'Header'](_0x41c20b,_0x5d4dad['headers'][_0x41c20b]);_0x21111d['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x18f15d,_0x5d51d3,_0x5d4dad,_0x21111d);},_0x21111d['onerror']=()=>{this['_onError'](_0x18f15d,_0x5d51d3,_0x5d4dad,_0x21111d),_0xd8ab5c=!(-0x24*0xf8+-0x1*-0x2c5+-0x201b*-0x1);};try{_0x21111d['send'](_0x34d952);}catch(_0x4fa49d){_0xd8ab5c||_0x5d4dad['error'](_0x21111d['status'],_0x21111d,_0x4fa49d);}return _0x21111d;}['_guessResp'+'onseType'](_0x3a37e1){const _0x26ba7e=new id(_0x3a37e1),_0x31f3d3=xe['getExtensi'+'on'](_0x26ba7e['path'])['toLowerCas'+'e']();return Re['binaryExte'+'nsions']['indexOf'](_0x31f3d3)>=-0x1455*0x1+-0x11*-0x20e+-0xe99?Re['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x31f3d3==='.json'?Re['ResponseTy'+'pe']['JSON']:_0x31f3d3==='.xml'?Re['ResponseTy'+'pe']['DOCUMENT']:Re['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x2c3dac){return[Re['ContentTyp'+'e']['BASIS'],Re['ContentTyp'+'e']['BIN'],Re['ContentTyp'+'e']['DDS'],Re['ContentTyp'+'e']['GLB'],Re['ContentTyp'+'e']['MP3'],Re['ContentTyp'+'e']['MP4'],Re['ContentTyp'+'e']['OGG'],Re['ContentTyp'+'e']['OPUS'],Re['ContentTyp'+'e']['WAV']]['indexOf'](_0x2c3dac)>=-0x2*0xc4b+0x17de+0xb8;}['_isBinaryR'+'esponseTyp'+'e'](_0x2ee625){return _0x2ee625===Re['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x2ee625===Re['ResponseTy'+'pe']['BLOB']||_0x2ee625===Re['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x12c881,_0x23ed0c,_0x2abffe,_0x7a75e3){if(_0x7a75e3['readyState']===0x3*0x676+0x385+-0x16e3)switch(_0x7a75e3['status']){case 0xfbb*-0x1+-0x1868+0x2823:{_0x7a75e3['responseUR'+'L']&&_0x7a75e3['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x12c881,_0x23ed0c,_0x2abffe,_0x7a75e3):this['_onError'](_0x12c881,_0x23ed0c,_0x2abffe,_0x7a75e3);break;}case 0x11b7+0x1*0xff5+0x1a5*-0x14:case 0x4*0x6bf+-0x60e*0x2+0xe17*-0x1:case 0x3*0x493+0x1*-0xf21+0x236:case 0x1ddd+-0x21b0+0x503*0x1:{this['_onSuccess'](_0x12c881,_0x23ed0c,_0x2abffe,_0x7a75e3);break;}default:{this['_onError'](_0x12c881,_0x23ed0c,_0x2abffe,_0x7a75e3);break;}}}['_onSuccess'](_0x20734c,_0x89cccb,_0x2e4d0b,_0x36874f){let _0x44ecf3,_0x3fdabf;const _0x15e2a1=_0x36874f['getRespons'+'eHeader']('Content-Ty'+'pe');_0x15e2a1&&(_0x3fdabf=_0x15e2a1['split'](';')[-0x1*-0x1a79+-0x1efc+0x483]['trim']());try{this['_isBinaryC'+'ontentType'](_0x3fdabf)||this['_isBinaryR'+'esponseTyp'+'e'](_0x36874f['responseTy'+'pe'])?_0x44ecf3=_0x36874f['response']:_0x3fdabf===Re['ContentTyp'+'e']['JSON']||_0x89cccb['split']('?')[0x3*-0xab+-0x4*0x265+0x251*0x5]['endsWith']('.json')?_0x44ecf3=JSON['parse'](_0x36874f['responseTe'+'xt']):_0x36874f['responseTy'+'pe']===Re['ResponseTy'+'pe']['DOCUMENT']||_0x3fdabf===Re['ContentTyp'+'e']['XML']?_0x44ecf3=_0x36874f['responseXM'+'L']:_0x44ecf3=_0x36874f['responseTe'+'xt'],_0x2e4d0b['callback'](null,_0x44ecf3);}catch(_0x24eaa1){_0x2e4d0b['callback'](_0x24eaa1);}}['_onError'](_0x1e5809,_0x56c240,_0xdf9757,_0xf15e57){if(!_0xdf9757['retrying']){if(_0xdf9757['retry']&&_0xdf9757['retries']<_0xdf9757['maxRetries']){_0xdf9757['retries']++,_0xdf9757['retrying']=!(-0x37e+0x154f+-0x11d1);const _0x253858=Y['clamp'](Math['pow'](-0x626*-0x1+-0x15fb+-0x5*-0x32b,_0xdf9757['retries'])*Re['retryDelay'],-0x22be+-0x16f*-0x3+0x1e71,_0xdf9757['maxRetryDe'+'lay']||0x106c*0x1+-0x16c6+0x19e2);console['log'](_0x1e5809+':\x20'+_0x56c240+'\x20-\x20Error\x20'+_0xf15e57['status']+('.\x20Retrying'+'\x20in\x20')+_0x253858+'\x20ms'),setTimeout(()=>{_0xdf9757['retrying']=!(0x1501+-0xf9+-0x1407),this['request'](_0x1e5809,_0x56c240,_0xdf9757,_0xdf9757['callback']);},_0x253858);}else _0xdf9757['callback'](_0xf15e57['status']===-0x116d+0x1*0x244e+0x3*-0x64b?'Network\x20er'+'ror':_0xf15e57['status'],null);}}};h(Re,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Re,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Re,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Re,'retryDelay',0x1d*0x122+0x76c+0x13f1*-0x2);let Ts=Re;const nt=new Ts(),om='linear',FT='inverse',NT='exponentia'+'l';class kT{constructor(_0x1113a8){h(this,'_manager'),h(this,'position',new I()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x1113a8;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x3b5eee){this['position']['copy'](_0x3b5eee);const _0x2d8601=this['listener'];_0x2d8601&&('positionX'in _0x2d8601?(_0x2d8601['positionX']['value']=_0x3b5eee['x'],_0x2d8601['positionY']['value']=_0x3b5eee['y'],_0x2d8601['positionZ']['value']=_0x3b5eee['z']):_0x2d8601['setPositio'+'n']&&_0x2d8601['setPositio'+'n'](_0x3b5eee['x'],_0x3b5eee['y'],_0x3b5eee['z']));}['setOrienta'+'tion'](_0x396646){this['orientatio'+'n']['copy'](_0x396646);const _0x5ed2ce=this['listener'];if(_0x5ed2ce){const _0x405986=_0x396646['data'];'forwardX'in _0x5ed2ce?(_0x5ed2ce['forwardX']['value']=-_0x405986[0x1f*-0x10d+0x341*0x5+-0x1056*-0x1],_0x5ed2ce['forwardY']['value']=-_0x405986[-0xf0+-0x1573+0x166c],_0x5ed2ce['forwardZ']['value']=-_0x405986[-0x67*-0x1f+-0x1*-0x1b91+-0x2800],_0x5ed2ce['upX']['value']=_0x405986[-0x544*-0x4+-0x11d*-0x7+-0x1cd7],_0x5ed2ce['upY']['value']=_0x405986[-0x1*0x2513+0x1*0x378+0x21a0],_0x5ed2ce['upZ']['value']=_0x405986[0x19ac+0x1d1d+-0x1241*0x3]):_0x5ed2ce['setOrienta'+'tion']&&_0x5ed2ce['setOrienta'+'tion'](-_0x405986[0x1e93*0x1+0x21ce+-0x4059],-_0x405986[0x4*0x97+0x15f+-0x3b2*0x1],-_0x405986[-0x167+0x3*0x3e+0x3d*0x3],_0x405986[-0x3*-0xbbc+0xb61+-0x2e91],_0x405986[-0x1bbe+-0x438+0x1ffb],_0x405986[-0xd*0x23f+-0x287*0x5+-0xe4*-0x2f]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x26e336=this['_manager']['context'];return _0x26e336?_0x26e336['listener']:null;}}const Cl='running',bp=['click','touchstart','mousedown'];class UT extends pe{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||M['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x125d*-0x2+-0xff0+-0x14c9),this['listener']=new kT(this),this['_volume']=-0x55*0x13+0x22df+-0x1c8f;}set['volume'](_0x14ff9e){_0x14ff9e=Y['clamp'](_0x14ff9e,-0x8*0x117+-0x4*-0x127+0x41c,0x13e5+0x225a*0x1+-0x363e*0x1),this['_volume']=_0x14ff9e,this['fire']('volumechan'+'ge',_0x14ff9e);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Cl&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x7e*-0x20+-0x2696+0x3656),this['_context']&&this['_context']['state']===Cl&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x1fa0+-0x10*0xf+-0x1eaf),this['_context']&&this['_context']['state']!==Cl&&this['_resume']());}['destroy'](){var _0x4d9a1a;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x4d9a1a=this['_context'])==null||_0x4d9a1a['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x4838af=this['_context']['createBuff'+'erSource']();_0x4838af['buffer']=this['_context']['createBuff'+'er'](0x2*0xbee+-0x15f2+-0x1e9*0x1,0x1e7*-0x8+0x1*-0xcf3+0xe16*0x2,this['_context']['sampleRate']),_0x4838af['connect'](this['_context']['destinatio'+'n']),_0x4838af['start'](-0x1e3a+-0x418+0x2252),_0x4838af['onended']=_0x2130f7=>{_0x4838af['disconnect'](0x60f+-0xbc*-0x19+-0x186b),this['fire']('resume');};},_0x40e8ff=>{M['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x40e8ff);})['catch'](_0x33dd9f=>{M['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x33dd9f);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x330ac6=>{M['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x330ac6);})['catch'](_0x386054=>{M['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x386054);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Cl&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){bp['forEach'](_0x383e83=>{window['addEventLi'+'stener'](_0x383e83,this['_unlockHan'+'dlerFunc'],!(0xf*-0x26e+-0xc1*-0x10+0x1*0x1863));});}['_removeUnl'+'ockListene'+'rs'](){bp['forEach'](_0xc5ba58=>{window['removeEven'+'tListener'](_0xc5ba58,this['_unlockHan'+'dlerFunc'],!(-0x1db8+0x7ad*-0x2+-0xb*-0x419));});}}class BT{constructor(_0x1ab877){h(this,'audio'),h(this,'buffer'),_0x1ab877 instanceof Audio?this['audio']=_0x1ab877:this['buffer']=_0x1ab877;}get['duration'](){let _0x1a3bfe=-0x1b77+-0x12b3+-0x2e2a*-0x1;return this['buffer']?_0x1a3bfe=this['buffer']['duration']:this['audio']&&(_0x1a3bfe=this['audio']['duration']),_0x1a3bfe||-0x1*0x22ed+0x24b*-0xb+0x3c26;}}function al(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Wt=-0x1408+-0x3f*0x65+0x2ce3,Za=-0x7cd*0x1+-0x1*-0x1aff+-0x121*0x11,Fs=0x15c3+0x1cad+0x2*-0x1937;function Xt(_0x56947a,_0x15443e){return _0x56947a%_0x15443e||0x1e*-0x10b+0xd0*0x5+0x2b9*0xa;}class Ss extends pe{constructor(_0x579668,_0x45d7f6,_0x35421c){super(),h(this,'source',null),(this['_manager']=_0x579668,this['_volume']=_0x35421c['volume']!==void(0x1*0x238f+-0x1dd4+0xa3*-0x9)?Y['clamp'](Number(_0x35421c['volume'])||0xffd+0x1696+-0x2693,-0x150+-0x1*0x2e7+0x437,-0xb+-0x2*-0xe2c+-0x1c4c*0x1):0x1dd7+-0xa5a+0x56*-0x3a,this['_pitch']=_0x35421c['pitch']!==void(0x19c*0x1+0x4e1*0x1+-0x67d)?Math['max'](0x5d5+0x6e+-0xe5*0x7+0.01,Number(_0x35421c['pitch'])||-0xf4f+-0x1*0x72d+-0x1*-0x167c):0x1ff4+0x949+-0x34*0xcb,this['_loop']=!!(_0x35421c['loop']!==void(0x408*-0x9+0x13df*0x1+0x1069)&&_0x35421c['loop']),this['_sound']=_0x45d7f6,this['_state']=Fs,this['_suspended']=!(-0x1c82+-0x208d+0x1e88*0x2),this['_suspendEn'+'dEvent']=-0x8c3+-0xf81+0x1844,this['_suspendIn'+'stanceEven'+'ts']=!(-0x1cf*0x10+-0x13b*0x5+0x2318),this['_playWhenL'+'oaded']=!(-0xa*-0x3df+-0x367+-0x234f*0x1),this['_startTime']=Math['max'](-0x11db+0x8e+0x114d,Number(_0x35421c['startTime'])||0xf*-0x1d3+0x43a+0x1723),this['_duration']=Math['max'](-0xc32+0x1*0x1052+-0x420,Number(_0x35421c['duration'])||-0x80*0x1d+-0x1*-0xbdd+0x2a3),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x35421c['onPlay'],this['_onPauseCa'+'llback']=_0x35421c['onPause'],this['_onResumeC'+'allback']=_0x35421c['onResume'],this['_onStopCal'+'lback']=_0x35421c['onStop'],this['_onEndCall'+'back']=_0x35421c['onEnd'],al()?(this['_startedAt']=-0xa41+-0x5bf*-0x3+-0x6fc,this['_currentTi'+'me']=0x781+0xd*0x18a+-0x1b83,this['_currentOf'+'fset']=-0x9ac*0x4+0x59*0x67+-0x2e1*-0x1,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x1c*-0x38+0x96b+-0x297*0x6),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(-0x1851+-0xd*0x247+0x35ed),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x30061c){if(!(_0x30061c<-0x30e+0x26a9+-0x239b)){if(this['_state']===Wt){const _0x32665b=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(0xb*0x1bb+-0x197b+0x1*0x672),this['stop'](),this['_startOffs'+'et']=_0x30061c,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x32665b;}else this['_startOffs'+'et']=_0x30061c,this['_currentTi'+'me']=_0x30061c;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Za?this['_currentTi'+'me']:this['_state']===Fs||!this['source']?0x2eb*0x3+-0x1cea+0x1429:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0xd74636){this['_duration']=Math['max'](0x2298+0x2308+-0x45a0*0x1,Number(_0xd74636)||-0x11a9+0x10b*0x8+-0x951*-0x1);const _0x5cce35=this['_state']===Wt;this['stop'](),_0x5cce35&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?Xt(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:-0x8d5+-0x1ba*-0x14+-0x99*0x2b;}get['isPaused'](){return this['_state']===Za;}get['isPlaying'](){return this['_state']===Wt;}get['isStopped'](){return this['_state']===Fs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x2053f6){this['_loop']=!!_0x2053f6,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x317b5e){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x317b5e)||-0x1*-0x1f06+-0x1d*-0xd6+-0x3744,0x92*-0x2f+-0xd0d*0x1+-0x219*-0x13+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x3e9006){this['_sound']=_0x3e9006,this['_state']!==Fs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x6ba0a4){this['_startTime']=Math['max'](-0x1*0x407+-0x5*-0x67+-0x2b*-0xc,Number(_0x6ba0a4)||0x2564+0x1*-0xaee+0x469*-0x6);const _0x20dcae=this['_state']===Wt;this['stop'](),_0x20dcae&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x5c5020){_0x5c5020=Y['clamp'](_0x5c5020,-0x245d+0x2521+-0x62*0x2,0x1970+-0x184*-0x14+-0x37bf),this['_volume']=_0x5c5020,this['gain']&&(this['gain']['gain']['value']=_0x5c5020*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x1*0x269b+-0x12d*-0x15+-0x2*0x1fa6){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Wt&&!this['_suspended']&&(this['_suspended']=!(-0xc69+-0x6*0x641+0x31ef),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(0xc31*0x2+0x102+-0x1*0x1963),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Fs&&this['stop'](),this['_state']=Wt,this['_playWhenL'+'oaded']=!(0x8e6+0x3cf+-0xcb4),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x7*0x23b+-0x13c8+-0x1*-0x42c):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x8b*0x19+-0xe14+-0x1*-0x1ba7),!(0x22c6+0x1b1b+-0x3de0)):(this['_playAudio'+'Immediate'](),!(0x1191*-0x1+-0x4*-0x6a5+-0x301*0x3));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x90e*0x3+-0xc1a+-0xd17*-0x3),this['_state']!==Wt)return;this['source']||this['_createSou'+'rce']();let _0x572b1b=Xt(this['_startOffs'+'et'],this['duration']);_0x572b1b=Xt(this['_startTime']+_0x572b1b,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](0x1*0x463+-0x1*-0x1f35+-0x2398,_0x572b1b,this['_duration']):this['source']['start'](-0x13a6+-0x2*-0x582+0x8a2,_0x572b1b),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=-0xaf7+-0x194b+0x2442,this['_currentOf'+'fset']=_0x572b1b,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(-0x1*0x12e5+-0x2d*-0x2f+-0x185*-0x7),this['_state']!==Wt?!(0xdc*0x2d+0x1*0xabd+0x5d*-0x88):(this['_state']=Za,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](-0x1019*-0x2+0x1191+-0x31c3),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(-0x1*-0x1381+0x1fab*0x1+-0x14*0x28f));}['resume'](){if(this['_state']!==Za)return!(0x4c3+0x23df+0x28a1*-0x1);let _0x5a7db9=this['currentTim'+'e'];return this['_state']=Wt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x5a7db9=Xt(this['_startOffs'+'et'],this['duration']),_0x5a7db9=Xt(this['_startTime']+_0x5a7db9,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](-0x7bb+0x2b8+0x1*0x503,_0x5a7db9,this['_duration']):this['source']['start'](-0x8ca+-0x1*-0x1c2b+-0x29*0x79,_0x5a7db9),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x5a7db9,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(0x11b5+-0x5c+-0x6*0x2e4),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x11b3*0x2+0x4ff+0x1*0x1e67);}['stop'](){if(this['_playWhenL'+'oaded']=!(-0x244b*-0x1+0x1c4b*-0x1+-0x7ff),this['_state']===Fs)return!(0x7cd*-0x4+-0x2387+0x42bc);const _0x35a492=this['_state']===Wt;return this['_state']=Fs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=0x4*-0x6c2+-0x17e2+-0x1975*-0x2,this['_currentTi'+'me']=0xc04+-0x39*0xa7+-0x1*-0x192b,this['_currentOf'+'fset']=0x615*0x6+0x7ef+-0x2c6d,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x35a492&&this['source']&&this['source']['stop'](0x1*-0x14db+0xe09*0x2+-0x737),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(0x9b*0x26+0xf2c+-0x262e);}['setExterna'+'lNodes'](_0x3011a7,_0x12639c){if(!_0x3011a7){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x12639c||(_0x12639c=_0x3011a7);const _0x88620c=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x3011a7&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x88620c),this['_firstNode']=_0x3011a7,this['_connector'+'Node']['connect'](_0x3011a7)),this['_lastNode']!==_0x12639c&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x88620c),this['_lastNode']=_0x12639c,this['_lastNode']['connect'](_0x88620c));}['clearExter'+'nalNodes'](){const _0x52e76c=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x52e76c),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x52e76c);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x3a0c26=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x3a0c26['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=Xt(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],Xt(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=Xt((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Wt&&(this['source']['stop'](0xd*0x99+0x11*-0x4d+-0x2a8),this['source']=null);}}h(Ss,'EVENT_PLAY','play'),h(Ss,'EVENT_PAUS'+'E','pause'),h(Ss,'EVENT_RESU'+'ME','resume'),h(Ss,'EVENT_STOP','stop'),h(Ss,'EVENT_END','end'),al()||(Object['assign'](Ss['prototype'],{'play':function(){return this['_state']!==Fs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(0xb2b+0x81*-0x41+0x1597):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Wt,this['_playWhenL'+'oaded']=!(0x105d+0x7*-0x347+-0x151*-0x5),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(0x2246+0x820+-0xc9*0x36));},'pause':function(){return!this['source']||this['_state']!==Wt?!(-0x5f5+-0x9*-0x1d8+-0xaa2):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0xd*-0x4f+0x1745+-0x9f*0x1f),this['_state']=Za,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x2068+0x1881+-0x77*-0x11));},'resume':function(){return!this['source']||this['_state']!==Za?!(-0x2619+0xcb*0x29+0x597):(this['_state']=Wt,this['_playWhenL'+'oaded']=!(0x1643*0x1+0x21d2+-0x2*0x1c0a),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x3ad+0x5*-0x79+-0x60a*-0x1));},'stop':function(){return!this['source']||this['_state']===Fs?!(-0x2e3*-0x6+-0x1ffa+-0x8b*-0x1b):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x14*0x89+0x1ed+0x8c8),this['_state']=Fs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0x11c4+-0x1*0x24c3+-0x3*-0x655));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x1af5+-0xc37+0x272c);let _0xfdb493=Xt(this['_startOffs'+'et'],this['duration']);_0xfdb493=Xt(this['_startTime']+_0xfdb493,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0xfdb493;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(-0x5*-0x12e+-0x7*0x4ce+0x1b*0x107),this['source']=this['_sound']['audio']['cloneNode'](!(0x3*-0x1c9+0x2db+0x280)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>Xt(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=Xt(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](Ss['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x583cc8){_0x583cc8=Y['clamp'](_0x583cc8,0xa5a+0x101*0x1+-0xb5b,0x168*0x1a+0x1a*-0xda+-0xe6b),this['_volume']=_0x583cc8,this['source']&&(this['source']['volume']=_0x583cc8*this['_manager']['volume']);}}),Object['defineProp'+'erty'](Ss['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x269bb5){this['_pitch']=Math['max'](Number(_0x269bb5)||-0x52+-0x7f0+-0x12e*-0x7,0xf94+0x4a*-0x32+-0x120+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](Ss['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x1714f8){this['stop'](),this['_sound']=_0x1714f8;}}),Object['defineProp'+'erty'](Ss['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Fs||!this['source']?0xd91+0x1*0x15e7+-0x1c6*0x14:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x552298){_0x552298<0x153+-0xee6*-0x2+-0x1f1f||(this['_startOffs'+'et']=_0x552298,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=Xt(this['_startTime']+Xt(_0x552298,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const zT=0x4a5+0x1592+0xcd9;class Va extends Ss{constructor(_0x1cc31d,_0x4a1ae6,_0x41c774={}){super(_0x1cc31d,_0x4a1ae6,_0x41c774),h(this,'_position',new I()),h(this,'_velocity',new I()),(_0x41c774['position']&&(this['position']=_0x41c774['position']),this['maxDistanc'+'e']=_0x41c774['maxDistanc'+'e']!==void(-0x17f6+-0x59f+0x1d95*0x1)?Number(_0x41c774['maxDistanc'+'e']):zT,this['refDistanc'+'e']=_0x41c774['refDistanc'+'e']!==void(0xd6+0x1b30+-0x2*0xe03)?Number(_0x41c774['refDistanc'+'e']):-0x1f5*0x7+-0x1*-0xb13+0x1*0x2a1,this['rollOffFac'+'tor']=_0x41c774['rollOffFac'+'tor']!==void(0x932+-0x624+-0x30e)?Number(_0x41c774['rollOffFac'+'tor']):-0x357+-0xef0+-0x82*-0x24,this['distanceMo'+'del']=_0x41c774['distanceMo'+'del']!==void(0x2e7*0x3+0x75c*0x5+-0x2d81)?_0x41c774['distanceMo'+'del']:om);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x288830){this['_position']['copy'](_0x288830);const _0x5104b4=this['panner'];'positionX'in _0x5104b4?(_0x5104b4['positionX']['value']=_0x288830['x'],_0x5104b4['positionY']['value']=_0x288830['y'],_0x5104b4['positionZ']['value']=_0x288830['z']):_0x5104b4['setPositio'+'n']&&_0x5104b4['setPositio'+'n'](_0x288830['x'],_0x288830['y'],_0x288830['z']);}get['position'](){return this['_position'];}set['velocity'](_0x29e68d){M['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x29e68d);}get['velocity'](){return M['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x155a0e){this['panner']['maxDistanc'+'e']=_0x155a0e;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x35e996){this['panner']['refDistanc'+'e']=_0x35e996;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x19e42f){this['panner']['rolloffFac'+'tor']=_0x19e42f;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x1592a4){this['panner']['distanceMo'+'del']=_0x1592a4;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!al()){let c=new I();const t=function(_0x2fbf30,_0x205f0e,_0xf5c313,_0xcbd661,_0x52f92f,_0x1d5222){c=c['sub2'](_0x2fbf30,_0x205f0e);const _0x2907ad=c['length']();if(_0x2907ad<_0xf5c313)return-0x6f3*0x1+0x1c8a+-0x6*0x399;if(_0x2907ad>_0xcbd661)return 0x265a+0x21b2+-0x57*0xd4;let _0x102831=0x78a+-0x1213+0x1*0xa89;return _0x1d5222===om?_0x102831=0x2*-0x128f+-0x5*0x3d+0x265*0x10-_0x52f92f*(_0x2907ad-_0xf5c313)/(_0xcbd661-_0xf5c313):_0x1d5222===FT?_0x102831=_0xf5c313/(_0xf5c313+_0x52f92f*(_0x2907ad-_0xf5c313)):_0x1d5222===NT&&(_0x102831=Math['pow'](_0x2907ad/_0xf5c313,-_0x52f92f)),Y['clamp'](_0x102831,-0x19e9+0x1af7*0x1+0x5a*-0x3,-0x2060*0x1+0x1f*-0xf4+0x3ded*0x1);};Object['defineProp'+'erty'](Va['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x549361){if(this['_position']['copy'](_0x549361),this['source']){const _0x351dfe=this['_manager']['listener']['getPositio'+'n'](),_0x3ab649=t(_0x351dfe,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0xa9a52c=this['volume'];this['source']['volume']=_0xa9a52c*_0x3ab649*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](Va['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x45c047){this['_maxDistan'+'ce']=_0x45c047;}}),Object['defineProp'+'erty'](Va['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x1700b6){this['_refDistan'+'ce']=_0x1700b6;}}),Object['defineProp'+'erty'](Va['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x329e59){this['_rollOffFa'+'ctor']=_0x329e59;}}),Object['defineProp'+'erty'](Va['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x27fa2a){this['_distanceM'+'odel']=_0x27fa2a;}});}const lm=-0x503*-0x7+-0xf53*0x1+-0x13c2*0x1,hm=-0x38b*0x1+0x60*0x4d+0x655*-0x4,Gs=0x83c+-0x14*0x165+0x6*0x347,ys=-0x3bb+-0x24a3+0x2861,bn=0x1*-0x1726+0x58f*-0x3+0x27d7,cm=-0x1e9c+-0xf69+-0x47*-0xa6,Yc=-0x15d8+0x2183+-0xba5,dm=-0x1*-0xc45+0x2*-0x871+0x4a4,fm=-0xd1*0xa+0x1b9d+-0x136b,um=-0x18d7+-0x1f28+0x518*0xb,mm=-0x26f2+0x1b53+0xba9,sy={[lm]:'SUBTRACTIV'+'E',[hm]:'ADDITIVE',[Gs]:'NORMAL',[ys]:'NONE',[bn]:'PREMULTIPL'+'IED',[cm]:'MULTIPLICA'+'TIVE',[Yc]:'ADDITIVEAL'+'PHA',[dm]:'MULTIPLICA'+'TIVE2X',[fm]:'SCREEN',[um]:'MIN',[mm]:'MAX'},On='none',VT='linear',GT=0xc40+0x1*-0xa29+-0x6b*0x5,pm=0xa*-0x3e0+0xeba+0x1808,HT={[GT]:'NONE',[pm]:'SCHLICK'},WT=-0x219a+-0x1637+0x513*0xb,iy=-0xecd+-0x20ea+0x2fc6,Wi=-0x13e3+0xe68+0x57b,os=-0xe*-0x26f+-0x763+-0x556*0x5,_m=-0x1*0x1175+0x19*-0x64+0x1b3b,gm=-0x210a*-0x1+0x275+-0x237c,nl=0xee9+-0x88f+0x1*-0x656,ve=0xb*-0x303+-0x8dd+-0xd7*-0x32,Ye=-0x1436+0x1*-0x1951+0x2d88*0x1,Ke=0x26cc*-0x1+-0xfa2+0x3670,Cp={[ve]:'DIRECTIONA'+'L',[Ye]:'OMNI',[Ke]:'SPOT'},fh=-0x1abb+0x1f75*-0x1+0x3a94,Vs=0x154+-0xd*0x2e6+0x16*0x1a7,ry=-0x962+0xe57+-0x4f4,ay=-0x1777+0x3*-0x701+0xd*0x36c,ny=-0x1*-0xdf1+0x1*0x53d+-0x132b,$T={[Vs]:'PUNCTUAL',[ry]:'RECT',[ay]:'DISK',[ny]:'SPHERE'},Sm=-0x1505+0xe0d+-0x1be*-0x4,oy=-0x244f*0x1+0xa51+0x37*0x79,XT={[Sm]:'LINEAR',[oy]:'INVERSESQU'+'ARED'},ks=-0x4bc+0x9*0x322+-0x1a*0xe7,bf=-0x200d+-0xa*-0x23b+0x9c1,ym=0x1e7d+0x9e3*0x1+-0x285d,qT=0x3*-0x637+0x2679+-0x13d0,ly=-0x6a7+0x448+-0xcc*-0x3,No=-0xe19+-0x14b3*0x1+0x22d2,hy=-0x106*0x1+0x1539+-0x142c,cy=0x468+0xde5+-0x1245,jT=-0x3*0x839+0x26bb+-0xab*0x15,Bi=new Map([[ly,{'name':'PCF1_32F','kind':'PCF1','format':ki,'pcf':!(0x2242+-0x1796*-0x1+0x9a4*-0x6)}],[ks,{'name':'PCF3_32F','kind':'PCF3','format':ki,'pcf':!(-0x1ed*-0x6+0x116*0x22+-0x307a)}],[qT,{'name':'PCF5_32F','kind':'PCF5','format':ki,'pcf':!(-0x1a38+0x22f3+-0x8bb)}],[hy,{'name':'PCF1_16F','kind':'PCF1','format':an,'pcf':!(-0x33b*0x9+-0x114e+0x2e61)}],[cy,{'name':'PCF3_16F','kind':'PCF3','format':an,'pcf':!(0xebf+0x25ee+0x1*-0x34ad)}],[jT,{'name':'PCF5_16F','kind':'PCF5','format':an,'pcf':!(-0xf95+-0xf2f+-0xb*-0x2cc)}],[bf,{'name':'VSM_16F','kind':'VSM','format':at,'vsm':!(0x14fa+0x35e*0x5+-0x10*0x25d)}],[ym,{'name':'VSM_32F','kind':'VSM','format':Bt,'vsm':!(0x6bd+0xb*0x1bc+-0x1*0x19d1)}],[No,{'name':'PCSS_32F','kind':'PCSS','format':Hi,'pcss':!(0x1*0x8ec+0x1b2b+-0x2417*0x1)}]]),YT=0xeae*-0x1+-0x1d78+0x1*0x2d25,vm=0x2*0x971+-0x6*0x2a1+0x35*-0xf,Cf=0x1*0x1cb2+0x2107+-0x45*0xe5,dy=0x30d*-0x8+-0x18d*0x13+0x35df,Ys=0x19*-0xcb+0x6*0xd8+-0xec3*-0x1,KT=-0x1f*0xa0+-0x13d8+0x2739,Vh=-0x10a5+0x38*0x49+0xad*0x1,ZT=0x178d+-0x27+-0x1*0x1765,Ks=0xe*-0x34+-0x21ba*0x1+-0x2492*-0x1,hn=0x771*-0x1+-0x1086+-0x2ff*-0x8,Qa=0x223*-0xd+0x11ba+-0xa0d*-0x1,Ir=0xf5*0x15+0x237a+-0x3792,Pl=0xb*-0x318+-0x23e9*-0x1+-0x1df,xm=0x339+0x18b+0x3d*-0x14,fy=0x1bdd+0x1bb5+-0x3791,QT={[xm]:'NONE',[fy]:'BOX'},Pp='mul',ol=-0x64+0x1e3a+0xeeb*-0x2,uh=0x13*0x94+-0x2b*0x39+-0x168,JT={[ol]:'NONE',[uh]:'SRGB'},Tm=0x19*-0xf+-0xb99*0x3+0x2442,$k=0x2362+0x2266+-0x45c7,Xk=-0x7*-0x10b+0x1*0xd03+-0x144e,qk=-0x4f*0x1c+-0x5b5+0xe5c,jk=0x444+-0x9d*0x28+0x2*0xa24,Yk=-0x202+-0x1b3b+0x2ed*0xa,uy=-0x974+-0x2062*-0x1+0xb74*-0x2,my=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],py=0x13*-0x97+-0x14e8+0x201d,Kc=-0x1359+0xe40+0x1*0x51a,_y=0x1214+-0xe*0x13b+-0x3*0x48,ew={[py]:'NONE',[Kc]:'AO',[_y]:'GLOSSDEPEN'+'DENT'},nr='none',Gh='envAtlas',Hh='envAtlasHQ',Wh='cubeMap',gy='sphereMap',tw={[nr]:'NONE',[Gh]:'ENVATLAS',[Hh]:'ENVATLASHQ',[Wh]:'CUBEMAP',[gy]:'SPHEREMAP'},wm='ambientSH',Em='envAtlas',Am='constant',sw={[wm]:'AMBIENTSH',[Em]:'ENVALATLAS',[Am]:'CONSTANT'},$h=0x1e33+-0x1*-0xcbd+-0x2aef,ko=-0x44d+-0x3*0x574+0x14ab,bm=0xf0e+0x1053+-0xd9*0x25,Sy=0x1162*0x1+-0x205c+0xf02,yy=-0x5f1+-0x1215*0x2+-0x5*-0x86f,Uo=0x20c4+-0x3*-0xa1f+0x3f01*-0x1,Pf=-0xa85*-0x3+0xbcd+-0x2b1c,vy=-0x105f+-0x2097+0x3176,Xh=-0xa31*-0x3+-0x35*0x5d+-0x2*0x529,Cm=-0x3*-0x73+0x764+-0xf*0x73,Bo=-0x17aa+-0x818+-0x2e*-0xc7,zo=0x2*-0x985+-0x367+0x1*0x1e71,xy=-0xcc*0xf+0x61*0x3b+0x599*0x1,Vo=0x3d3*0x5+-0x3e92+0x4b73,mh=0x4912+0x3848+0xa*-0x689,vs=-0x47*0x4f+-0x1*0x1310+0x28f9,or=0x1b4+0x16b7+0x2*-0xc35,Pm=0x2*0xb4d+-0x5*0x366+-0x59a,ds=-0x205c+-0x1d96+-0x3df3*-0x1,si=-0x1b20+0x775+0x13ad,ii=0x21b8+0x22af+-0x4463,fa=0x76*0x52+-0x10e7+-0x1*0x14e5,ll=-0x1*-0x19ed+-0x111e+-0x8ce,Mm=-0x1200+-0x2*-0x11bf+-0x117c,Fn=-0x127d*-0x2+0x1*0x2277+-0x476e,ei=-0x6b*0x29+0x41b+0xd08,Et=0x1145*-0x2+-0x189c+-0x31d*-0x13,At=-0x20c*-0x4+-0xd63+0x535,iw={[ei]:'SIMPLE',[Et]:'SLICED',[At]:'TILED'},ph=0x7*-0x14b+0xf6+0x818,Ml=0x3f*-0x6+-0xc86+0x380*0x4,_h=-0x3a*-0xa6+-0xb9b*-0x1+-0x3137,rw=0x1*0x1a23+0x1fb2+-0x39d4,aw=-0x11bf+-0x1b43+0x2d04,Mp=-0x1d00+0x1b8e+0x175*0x1,nw=-0x71*-0x31+0xa86*0x1+-0x2023,ow=-0x65f+0x1178*-0x2+0x1*0x2954,Im=0x1d69*0x1+0x2501+0x2*-0x2135,Mf=-0x2291*0x1+-0x1*0x2361+-0x17d*-0x2f,be=0xcf3+0xcea+-0x19dd,qe=-0x183b+-0x1164+0x1bc*0x18,So='infinite',lw='box',hw='dome',ra='none',cw='bayer8',dw='bluenoise',fw='ignnoise',uw={[ra]:'NONE',[cw]:'BAYER8',[dw]:'BLUENOISE',[fw]:'IGNNOISE'},mw='prerender',pw='postrender',_w='prerender:'+'layer',gw='postrender'+':layer',Ty='precull',wy='postcull',Sw='cull:end';class Zc{constructor(_0x5e93cd,_0xbc200e,_0x4f3199){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][Fo]=_0x5e93cd,this['bindGroupF'+'ormats'][Fo]=_0xbc200e,this['vertexForm'+'at']=_0x4f3199);}['hasUniform'](_0x489c2f){for(let _0x570cab=-0x2*0xfd3+0xc73+-0x1*-0x1333;_0x570cab<this['uniformFor'+'mats']['length'];_0x570cab++){const _0x39e334=this['uniformFor'+'mats'][_0x570cab];if(_0x39e334!=null&&_0x39e334['get'](_0x489c2f))return!(0x2263+0x22cd*0x1+-0x4530);}return!(0x101*-0x11+0x13d5+0x2c3*-0x1);}['hasTexture'](_0x38d3c1){for(let _0x15a53c=0x189*-0x13+-0xb72+0x119*0x25;_0x15a53c<this['bindGroupF'+'ormats']['length'];_0x15a53c++){const _0x166045=this['bindGroupF'+'ormats'][_0x15a53c];if(_0x166045!=null&&_0x166045['getTexture'](_0x38d3c1))return!(-0x1*-0x1fff+-0x11a8+-0xe57*0x1);}return!(-0x1b61+-0x11*0x1ee+-0x358*-0x12);}['getVertexE'+'lement'](_0x122a80){var _0x38028e;return(_0x38028e=this['vertexForm'+'at'])==null?void(-0x20b4+-0x1*-0x239e+-0x2ea):_0x38028e['elements']['find'](_0x3f26f1=>_0x3f26f1['name']===_0x122a80);}['generateKe'+'y'](_0x2ed250){var _0x47c6c9;let _0x19d3ca=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x2ed250['isWebGPU']&&(_0x19d3ca+=(_0x47c6c9=this['vertexForm'+'at'])==null?void(0x5*-0xd2+0x25f7*-0x1+0x2a11):_0x47c6c9['shaderProc'+'essingHash'+'String']),_0x19d3ca;}}const Ey=new Ht();function Cn(_0x4f0cb5){const _0x3ffb20=Ey['get'](_0x4f0cb5);return M['assert'](_0x3ffb20),_0x3ffb20;}function yw(_0xac0b23,_0x6e434c){M['assert'](_0x6e434c),Ey['get'](_0xac0b23,()=>_0x6e434c);}class aa{static['definesHas'+'h'](_0x2ab96e){const _0x1455b6=Array['from'](_0x2ab96e)['sort']((_0x2463a6,_0x53831a)=>_0x2463a6[-0x2*-0x505+-0x2571+0x1b67*0x1]>_0x53831a[0xa4*-0x1+0x15cd+-0x1*0x1529]?0x20e7+-0x4f3+-0x1bf3:-(-0x791+-0x2347+0x2ad9));return ti(JSON['stringify'](_0x1455b6));}}const vw=new Ht();class xw{constructor(_0x5177d6,_0x34331e,_0x4d3b76={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(M['assert'](/^[a-z]\w*$/i['test'](_0x5177d6),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x5177d6),this['name']=_0x5177d6,this['index']=_0x34331e,Object['assign'](this,_0x4d3b76),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x5066e0;this['isShadow']?_0x5066e0='SHADOW':this['isForward']?_0x5066e0='FORWARD':this['index']===Fn&&(_0x5066e0='PICK'),this['defines']['set'](_0x5066e0+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class hi{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0xcdb+0x21f0+-0x1515);const _0x37df12=(_0x1a6765,_0x31f7d7,_0x221897)=>{const _0x35cc69=this['allocate'](_0x1a6765,_0x221897);M['assert'](_0x35cc69['index']===_0x31f7d7);};_0x37df12('forward',fa,{'isForward':!(0xc9a+-0xcc0+0x26)}),_0x37df12('prepass',ll),_0x37df12('shadow',Mm),_0x37df12('pick',Fn);}static['get'](_0x433efa){return M['assert'](_0x433efa),vw['get'](_0x433efa,()=>new hi());}['allocate'](_0x163032,_0x4f85b3){let _0x2cf14c=this['passesName'+'d']['get'](_0x163032);return _0x2cf14c===void(-0x2164+-0x8*0x3f8+0x4124)&&(_0x2cf14c=new xw(_0x163032,this['nextIndex'],_0x4f85b3),this['passesName'+'d']['set'](_0x2cf14c['name'],_0x2cf14c),this['passesInde'+'xed'][_0x2cf14c['index']]=_0x2cf14c,this['nextIndex']++),_0x2cf14c;}['getByIndex'](_0x25f647){const _0x1acd5f=this['passesInde'+'xed'][_0x25f647];return M['assert'](_0x1acd5f),_0x1acd5f;}['getByName'](_0xa48d16){return this['passesName'+'d']['get'](_0xa48d16);}}class Ip extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(0x79*0x9+-0x1*-0x4a2+-0x8e2)),h(this,'_key','');}['set'](_0x1b6cd9,_0x16402f){return(!this['has'](_0x1b6cd9)||this['get'](_0x1b6cd9)!==_0x16402f)&&this['markDirty'](),super['set'](_0x1b6cd9,_0x16402f);}['add'](_0x49a306){for(const [_0x44236c,_0x2d29f6]of Object['entries'](_0x49a306))this['set'](_0x44236c,_0x2d29f6);return this;}['delete'](_0x1261b7){const _0x74a9ad=this['has'](_0x1261b7),_0x190319=super['delete'](_0x1261b7);return _0x74a9ad&&_0x190319&&this['markDirty'](),_0x190319;}['clear'](){this['size']>-0xa92+0x19ee+-0xf5c&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(-0x222e+-0x1ad5+0x1*0x3d03),this['_keyDirty']=!(0x1*0x792+-0x1*0x10bf+0x30f*0x3);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(-0x1*-0x2096+0x1*0x28e+0x23*-0x101);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(-0x2f*0x4b+-0x1*0x17d5+-0x1*-0x259b),this['_key']=Array['from'](this['entries']())['sort'](([_0x27366a],[_0x2c0bc1])=>_0x27366a<_0x2c0bc1?-(-0x23f9*0x1+-0xaad+-0xf8d*-0x3):_0x27366a>_0x2c0bc1?0x1*-0x1e23+-0x2201+0x4025:-0x15+-0x1*0x1957+0x196c)['map'](([_0x1fbb5d,_0x2a6015])=>_0x1fbb5d+'='+ti(_0x2a6015))['join'](',')),this['_key'];}['copy'](_0x19ef74){this['clear']();for(const [_0xb32c9d,_0x3c4cf2]of _0x19ef74)this['set'](_0xb32c9d,_0x3c4cf2);return this;}}const Tw=new Ht();class Ce{constructor(){h(this,'glsl',new Ip()),h(this,'wgsl',new Ip()),h(this,'version','');}static['get'](_0x444ac6,_0x57b6f6=ze){const _0xc7c5ff=Tw['get'](_0x444ac6,()=>new Ce());return _0x57b6f6===ze?_0xc7c5ff['glsl']:_0xc7c5ff['wgsl'];}get['useWGSL'](){return this['glsl']['size']===-0x267c+-0xf0*0xd+0x32ac||this['wgsl']['size']>0x91b*0x3+-0x1d03+0x2*0xd9;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x4231bb){return this['version']=_0x4231bb['version'],this['glsl']['copy'](_0x4231bb['glsl']),this['wgsl']['copy'](_0x4231bb['wgsl']),this;}}class qh{static['merge'](..._0x4d4e53){const _0x2544cf=new Map(_0x4d4e53[0x5*0x46a+-0x3*0xaf3+0xac7]??[]);for(let _0x131821=-0x1b34+-0xff5+-0x5*-0x8a2;_0x131821<_0x4d4e53['length'];_0x131821++){const _0x204f56=_0x4d4e53[_0x131821];if(_0x204f56){for(const [_0x4e960b,_0x16b3d9]of _0x204f56)_0x2544cf['set'](_0x4e960b,_0x16b3d9);}}return _0x2544cf;}}class ww extends aa{constructor(_0x1b0428,_0x5d8b19){super(),this['key']=_0x1b0428,this['shaderDefi'+'nition']=_0x5d8b19;}['generateKe'+'y'](_0x5d3ab9){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x3773a2,_0x37e222){return this['shaderDefi'+'nition'];}}class Ut{static['createShad'+'er'](_0x25cf05,_0xb0086e){const _0x1a206d=Cn(_0x25cf05);let _0x2e54d6=_0x1a206d['getCachedS'+'hader'](_0xb0086e['uniqueName']);if(!_0x2e54d6){const _0x41aba3=_0x25cf05['isWebGPU']&&(!!_0xb0086e['vertexWGSL']||!!_0xb0086e['vertexChun'+'k'])&&(!!_0xb0086e['fragmentWG'+'SL']||!!_0xb0086e['fragmentCh'+'unk']),_0x563954=Ce['get'](_0x25cf05,_0x41aba3?st:ze),_0x347e2b=_0xb0086e['vertexChun'+'k']?_0x563954['get'](_0xb0086e['vertexChun'+'k']):_0x41aba3?_0xb0086e['vertexWGSL']:_0xb0086e['vertexGLSL'],_0x407c54=_0xb0086e['fragmentCh'+'unk']?_0x563954['get'](_0xb0086e['fragmentCh'+'unk']):_0x41aba3?_0xb0086e['fragmentWG'+'SL']:_0xb0086e['fragmentGL'+'SL'];M['assert'](_0x347e2b,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0xb0086e),M['assert'](_0x407c54,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0xb0086e);const _0x2473ae=qh['merge'](_0x563954,_0xb0086e['fragmentIn'+'cludes']),_0x369e51=qh['merge'](_0x563954,_0xb0086e['vertexIncl'+'udes']);_0x2e54d6=new ey(_0x25cf05,$t['createDefi'+'nition'](_0x25cf05,{'name':_0xb0086e['uniqueName'],'shaderLanguage':_0x41aba3?st:ze,'attributes':_0xb0086e['attributes'],'vertexCode':_0x347e2b,'fragmentCode':_0x407c54,'useTransformFeedback':_0xb0086e['useTransfo'+'rmFeedback'],'vertexIncludes':_0x369e51,'vertexDefines':_0xb0086e['vertexDefi'+'nes'],'fragmentIncludes':_0x2473ae,'fragmentDefines':_0xb0086e['fragmentDe'+'fines'],'fragmentOutputTypes':_0xb0086e['fragmentOu'+'tputTypes']})),_0x1a206d['setCachedS'+'hader'](_0xb0086e['uniqueName'],_0x2e54d6);}return _0x2e54d6;}static['getCoreDef'+'ines'](_0x58ac39,_0x315769){const _0x5b7b9f=new Map(_0x58ac39['defines']);return _0x315769['cameraShad'+'erParams']['defines']['forEach']((_0x23f31f,_0x31b065)=>_0x5b7b9f['set'](_0x31b065,_0x23f31f)),hi['get'](_0x315769['device'])['getByIndex'](_0x315769['pass'])['defines']['forEach']((_0x5baa01,_0x55d296)=>_0x5b7b9f['set'](_0x55d296,_0x5baa01)),_0x5b7b9f;}static['processSha'+'der'](_0x4068cf,_0x4b6a9a){M['assert'](_0x4068cf);const _0x28ae07=_0x4068cf['definition'],_0x23fe20=(_0x28ae07['name']??'shader')+'-id-'+_0x4068cf['id'],_0x4f142f=new ww(_0x23fe20,_0x28ae07),_0x5c0c45='shader',_0x1c86ba=Cn(_0x4068cf['device']);M['assert'](!_0x1c86ba['isRegister'+'ed'](_0x5c0c45)),_0x1c86ba['register'](_0x5c0c45,_0x4f142f);const _0x42db30=_0x1c86ba['getProgram'](_0x5c0c45,{},_0x4b6a9a);return _0x1c86ba['unregister'](_0x5c0c45),_0x42db30;}static['addScreenD'+'epthChunkD'+'efines'](_0x1b880e,_0x49c1d7,_0x547796){_0x49c1d7['sceneDepth'+'MapLinear']&&_0x547796['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x1b880e['textureFlo'+'atRenderab'+'le']&&_0x547796['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const Ew={'type':cr,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(0x42+-0x17e8+-0x5*-0x4bb)},Bn=new ae(),zn=new ae(),fd=new WS();class jh{constructor(_0x1b02a8){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x3616af=_0x1b02a8['device'];if(this['shader']=_0x1b02a8,M['assert'](_0x1b02a8),_0x3616af['supportsUn'+'iformBuffe'+'rs']){const _0x23c7cd=new Zc();this['shader']=Ut['processSha'+'der'](_0x1b02a8,_0x23c7cd);const _0x40b8cb=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x40b8cb&&(this['uniformBuf'+'fer']=new nm(_0x3616af,_0x40b8cb,!(0x35d*0x2+0xee2+-0x159b)));const _0x5cc3a7=this['shader']['meshBindGr'+'oupFormat'];M['assert'](_0x5cc3a7),this['bindGroup']=new rm(_0x3616af,_0x5cc3a7),ca['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x3f5cef,_0x954b75;(_0x3f5cef=this['uniformBuf'+'fer'])==null||_0x3f5cef['destroy'](),this['uniformBuf'+'fer']=null,(_0x954b75=this['bindGroup'])==null||_0x954b75['destroy'](),this['bindGroup']=null;}['render'](_0x145a7f,_0x3f5204){const _0x1bcc78=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x1bcc78,'QuadRender'),_0x145a7f&&(Bn['set'](_0x1bcc78['vx'],_0x1bcc78['vy'],_0x1bcc78['vw'],_0x1bcc78['vh']),zn['set'](_0x1bcc78['sx'],_0x1bcc78['sy'],_0x1bcc78['sw'],_0x1bcc78['sh']),_0x3f5204=_0x3f5204??_0x145a7f,_0x1bcc78['setViewpor'+'t'](_0x145a7f['x'],_0x145a7f['y'],_0x145a7f['z'],_0x145a7f['w']),_0x1bcc78['setScissor'](_0x3f5204['x'],_0x3f5204['y'],_0x3f5204['z'],_0x3f5204['w'])),_0x1bcc78['setVertexB'+'uffer'](_0x1bcc78['quadVertex'+'Buffer'],-0x7c*-0x16+0x2271+-0x2d19*0x1);const _0x16b9b1=this['shader'];if(_0x1bcc78['setShader'](_0x16b9b1),_0x1bcc78['supportsUn'+'iformBuffe'+'rs']){_0x1bcc78['setBindGro'+'up'](Fo,_0x1bcc78['emptyBindG'+'roup']);const _0x583173=this['bindGroup'];_0x583173['update'](),_0x1bcc78['setBindGro'+'up'](VS,_0x583173);const _0x4c0a5d=this['uniformBuf'+'fer'];_0x4c0a5d?(_0x4c0a5d['update'](fd),_0x1bcc78['setBindGro'+'up'](wf,fd['bindGroup'],fd['offsets'])):_0x1bcc78['setBindGro'+'up'](wf,_0x1bcc78['emptyBindG'+'roup']);}_0x1bcc78['draw'](Ew),_0x145a7f&&(_0x1bcc78['setViewpor'+'t'](Bn['x'],Bn['y'],Bn['z'],Bn['w']),_0x1bcc78['setScissor'](zn['x'],zn['y'],zn['z'],zn['w'])),Q['popGpuMark'+'er'](_0x1bcc78);}}class Aw extends fs{constructor(_0x483ba0,_0x57dd70,_0xa4de59,_0x1694a5){super(_0x483ba0),this['quad']=_0x57dd70,this['rect']=_0xa4de59,this['scissorRec'+'t']=_0x1694a5;}['execute'](){const {device:_0x1fdf4a}=this;Q['pushGpuMar'+'ker'](_0x1fdf4a,this['name']+':'+this['quad']['shader']['name']),_0x1fdf4a['setCullMod'+'e'](xt),_0x1fdf4a['setDepthSt'+'ate'](Kt['NODEPTH']),_0x1fdf4a['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x1fdf4a);}}const bw=new ae();function fr(_0x38c738,_0x2ca60b,_0x5a39aa,_0x5a41d5,_0x57a2d7){M['assert'](_0x2ca60b!==void(0x1709*-0x1+0x13e6+0x323));const _0x268d26=arguments[-0x163*0xf+0x7*0x35+0x135f];M['call'](()=>{_0x268d26!==void(-0x1e2f+-0x4a7*0x7+0x3ec0)&&M['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x34919e=new jh(_0x5a39aa);_0x5a41d5||(_0x5a41d5=bw,_0x5a41d5['x']=-0x6*-0x229+0xd95+-0x8d9*0x3,_0x5a41d5['y']=0x3*0x638+0x282+-0x152a,_0x5a41d5['z']=_0x2ca60b?_0x2ca60b['width']:_0x38c738['width'],_0x5a41d5['w']=_0x2ca60b?_0x2ca60b['height']:_0x38c738['height']);const _0x9c209=new Aw(_0x38c738,_0x34919e,_0x5a41d5,_0x57a2d7);_0x9c209['init'](_0x2ca60b),_0x9c209['colorOps']['clear']=!(-0x46f*-0x8+-0x994+-0x19e3),_0x9c209['depthStenc'+'ilOps']['clearDepth']=!(0x1ed+-0x2*-0x1e8+-0x16f*0x4),_0x38c738['isWebGPU']&&_0x2ca60b===null&&_0x38c738['samples']>0x2698+0x82a+-0x2ec1&&(_0x9c209['colorOps']['store']=!(-0x25b9+0x1bcd+-0x9ec*-0x1)),_0x9c209['render'](),_0x34919e['destroy']();}class Dp{constructor(_0x4f0965,_0x59f27c,_0x4eb4e9){h(this,'_aabb',new Ie()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x4f0965,this['dynamic']=_0x59f27c,this['batchGroup'+'Id']=_0x4eb4e9);}['destroy'](_0x41a624,_0x47087c){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x41a624,_0x47087c),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x409636,_0x4356ed){for(let _0x519aa1=-0xac1*-0x1+-0xedb+-0x5*-0xd2;_0x519aa1<_0x4356ed['length'];_0x519aa1++){const _0x59539a=_0x409636['layers']['getLayerBy'+'Id'](_0x4356ed[_0x519aa1]);_0x59539a&&_0x59539a['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x25f38d,_0x201881){for(let _0x5615bb=0x730+-0x103c+-0x304*-0x3;_0x5615bb<_0x201881['length'];_0x5615bb++){const _0x38a5e3=_0x25f38d['layers']['getLayerBy'+'Id'](_0x201881[_0x5615bb]);_0x38a5e3&&_0x38a5e3['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][-0xa79+0xd4*-0x10+-0x1*-0x17b9]['aabb']);for(let _0x2fcb42=0x128f+0x1*-0x112d+-0x1*0x161;_0x2fcb42<this['origMeshIn'+'stances']['length'];_0x2fcb42++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x2fcb42]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=-0x232*0x3+0x7*0x452+-0x17a8;}get['model'](){M['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class mt{constructor(_0x233c78,_0x3fd338,_0x33e0e6,_0xe1d5cf,_0x796a52=[Wi]){h(this,'_ui',!(0x9e5+-0xf*0x22d+0x16bf)),h(this,'_sprite',!(-0x1199+-0x7*-0x455+0xcb9*-0x1)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x233c78,this['name']=_0x3fd338,this['dynamic']=_0x33e0e6,this['maxAabbSiz'+'e']=_0xe1d5cf,this['layers']=_0x796a52);}}h(mt,'MODEL','model'),h(mt,'ELEMENT','element'),h(mt,'SPRITE','sprite'),h(mt,'RENDER','render');const Lp=new te();class hl{constructor(_0x558087){h(this,'bones'),(this['_dirty']=!(0x232*-0x6+-0xf5e*-0x1+-0x1*0x232),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(0x50f+-0xb26+0x618),this['_updateBef'+'oreCull']=!(-0x308+-0xf1d*0x1+0x1225),_0x558087&&this['initSkin'](_0x558087));}set['rootBone'](_0x4e7dad){this['_rootBone']=_0x4e7dad;}get['rootBone'](){return this['_rootBone'];}['init'](_0x1a15b6,_0x485f3f){const _0x211378=_0x485f3f*(-0x2b*-0x17+-0x5*0x1b+-0x353);let _0x309ac0=Math['ceil'](Math['sqrt'](_0x211378));_0x309ac0=Y['roundUp'](_0x309ac0,0x1e19+0x93*0x1a+-0x1682*0x2);const _0x453371=Math['ceil'](_0x211378/_0x309ac0);this['boneTextur'+'e']=new _e(_0x1a15b6,{'width':_0x309ac0,'height':_0x453371,'format':Bt,'mipmaps':!(0x2*0x53c+0xe9f+0x26*-0xa9),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':bS}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x5e7e8c,_0x5481ce){this['rootBone']=_0x5e7e8c;const _0x582b4b=this['skin'],_0xd7509d=[];for(let _0x31ff54=-0x6b8+-0x17*0x155+0x49*0x83;_0x31ff54<_0x582b4b['boneNames']['length'];_0x31ff54++){const _0x16a266=_0x582b4b['boneNames'][_0x31ff54];let _0x254dc4=_0x5e7e8c['findByName'](_0x16a266);_0x254dc4||(M['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x16a266+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x5481ce['name']+(',\x20rootBone'+':\x20')+_0x5e7e8c['name']),_0x254dc4=_0x5481ce),_0xd7509d['push'](_0x254dc4);}this['bones']=_0xd7509d;}['initSkin'](_0x11b0bf){this['skin']=_0x11b0bf,this['bones']=[];const _0x34a392=_0x11b0bf['inverseBin'+'dPose']['length'];this['init'](_0x11b0bf['device'],_0x34a392),this['matrices']=[];for(let _0x5371b4=0x3*0x69c+0x1076+-0x1*0x244a;_0x5371b4<_0x34a392;_0x5371b4++)this['matrices'][_0x5371b4]=new te();}['uploadBone'+'s'](_0x8281d3){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x20e00d,_0x3e2128){if(this['_skinUpdat'+'eIndex']!==_0x3e2128){this['_skinUpdat'+'eIndex']=_0x3e2128,Lp['copy'](_0x20e00d['getWorldTr'+'ansform']())['invert']();for(let _0x2bfa1c=this['bones']['length']-(-0x95*-0x43+-0x43e*-0x3+-0x5*0xa58);_0x2bfa1c>=-0xc1*-0x17+-0x1482+-0x1*-0x32b;_0x2bfa1c--)this['matrices'][_0x2bfa1c]['mulAffine2'](Lp,this['bones'][_0x2bfa1c]['getWorldTr'+'ansform']()),this['matrices'][_0x2bfa1c]['mulAffine2'](this['matrices'][_0x2bfa1c],this['skin']['inverseBin'+'dPose'][_0x2bfa1c]);}}['updateMatr'+'ices'](_0xd46a42,_0x52bc23){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0xd46a42,_0x52bc23);}['updateMatr'+'ixPalette'](_0x1f9ddf,_0x146f48){this['_updateMat'+'rices'](_0x1f9ddf,_0x146f48);const _0x251e2a=this['matrixPale'+'tte'],_0x478d48=this['bones']['length'];for(let _0x2403f5=-0xfb*0x2+0x1e3a+-0x1c44;_0x2403f5<_0x478d48;_0x2403f5++){const _0x19bd96=this['matrices'][_0x2403f5]['data'],_0x3ff967=_0x2403f5*(-0x1dfd+-0x158*0x1b+0x4251);_0x251e2a[_0x3ff967]=_0x19bd96[0x1559+0x1*0x234a+-0x38a3],_0x251e2a[_0x3ff967+(-0x3f*-0x7b+0x20a5+0x1*-0x3ee9)]=_0x19bd96[0x4*-0x53c+0x19fd*0x1+0x509*-0x1],_0x251e2a[_0x3ff967+(0x81*0x1b+-0x1*0x7c9+-0x174*0x4)]=_0x19bd96[0x12d*-0x4+0x4*0x617+-0x13a0],_0x251e2a[_0x3ff967+(-0x7c2*-0x2+-0x20a7+0x1126)]=_0x19bd96[-0xb1+0xbf*-0x22+0x1a1b],_0x251e2a[_0x3ff967+(-0xcb4*-0x1+0x1b80+-0x1418*0x2)]=_0x19bd96[-0x9ac*0x1+-0x1*0x1bc4+0x2571],_0x251e2a[_0x3ff967+(-0x1a2*0x2+0x151*-0xf+0xb84*0x2)]=_0x19bd96[0x1c72+-0x23ee+0x781],_0x251e2a[_0x3ff967+(-0xddf+0x23a7+-0x15c2)]=_0x19bd96[-0xa*-0x3bb+0x1*-0x26bf+-0x17a*-0x1],_0x251e2a[_0x3ff967+(-0x5dd*-0x4+0x1a*0x134+-0x36b5)]=_0x19bd96[0x1*-0xf3e+0x869+-0x1*-0x6e2],_0x251e2a[_0x3ff967+(-0x1*-0x65+-0x239f+0x2342)]=_0x19bd96[-0x469*0x5+-0x1cc5+0x2*0x196a],_0x251e2a[_0x3ff967+(0x2*-0xab4+0x1*-0x192b+0x2e9c)]=_0x19bd96[-0x1e7c+-0x93f+0x27c1],_0x251e2a[_0x3ff967+(-0x434+-0x2*0x741+0x12c0)]=_0x19bd96[0xa74+-0x7b*0x35+0x1*0xf0d],_0x251e2a[_0x3ff967+(-0x579*0x7+0xa01+0x1c59)]=_0x19bd96[-0x250f+-0x1*-0x1883+0xc9a];}this['uploadBone'+'s'](this['skin']['device']);}}class Rp extends hl{constructor(_0x1b0e81,_0x3688bb,_0x44f568){super();const _0xb65243=_0x3688bb['length'];this['init'](_0x1b0e81,_0xb65243),this['device']=_0x1b0e81,this['rootNode']=_0x44f568,this['bones']=_0x3688bb;}['updateMatr'+'ices'](_0xc5455d,_0xdd0ee6){}['updateMatr'+'ixPalette'](_0x3c989b,_0x7587e5){const _0x54b79c=this['matrixPale'+'tte'],_0x10bbd9=this['bones']['length'];for(let _0x29c332=-0xdc1+-0xcdd*0x2+0x277b;_0x29c332<_0x10bbd9;_0x29c332++){const _0x9d8973=this['bones'][_0x29c332]['getWorldTr'+'ansform']()['data'],_0x585d1b=_0x29c332*(-0xd9f*-0x1+-0x12c0+-0x1*-0x52d);_0x54b79c[_0x585d1b]=_0x9d8973[0x1*-0x5f3+-0x1*-0x14f3+-0xf00],_0x54b79c[_0x585d1b+(-0x13a1+0x5d6+0xdcc)]=_0x9d8973[0xe96+-0x1*-0x773+-0x757*0x3],_0x54b79c[_0x585d1b+(0x18fb+-0x196f*0x1+0x3b*0x2)]=_0x9d8973[0x118a+-0x69d*-0x4+-0x2bf6],_0x54b79c[_0x585d1b+(0x1a68+-0x1*0x97b+0xa*-0x1b1)]=_0x9d8973[0x19a3+0x2330*0x1+-0x1*0x3cc7],_0x54b79c[_0x585d1b+(-0x2f8+0x3d*-0x66+0x1b4a)]=_0x9d8973[-0x2479+-0x511*-0x5+-0x13d*-0x9],_0x54b79c[_0x585d1b+(-0x4a6+0x163*-0x19+0x13*0x212)]=_0x9d8973[-0x1c93+-0xd3b*-0x1+0x13*0xcf],_0x54b79c[_0x585d1b+(0x355*-0x1+-0x290+-0x1*-0x5eb)]=_0x9d8973[-0x1d5a+-0xc83+-0x15a*-0x1f],_0x54b79c[_0x585d1b+(-0x63*0x21+-0x2613+0x32dd)]=_0x9d8973[-0x25ee+-0x1*-0x2681+-0x86],_0x54b79c[_0x585d1b+(0x195b+0xd6+-0x1a29)]=_0x9d8973[-0x1af8*-0x1+-0x1d77+0x281],_0x54b79c[_0x585d1b+(0xdf*0x19+0x741+-0x1cff)]=_0x9d8973[-0x2443+-0x8e8+0x2d31],_0x54b79c[_0x585d1b+(0x1*0x49c+-0x1dc*-0x1+-0x66e)]=_0x9d8973[0x1af5+-0x8bf+0x2*-0x916],_0x54b79c[_0x585d1b+(-0xd*-0x58+-0x1*0x1c33+0x17c6)]=_0x9d8973[-0x253c+-0x1*0x36d+0x28b7*0x1];}this['uploadBone'+'s'](this['device']);}}let Cw=-0xe2c+0xab5+0x377;class Zs{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(-0x24+0x5c*0x30+-0x111b),this['verticesUs'+'age']=ls,this['indicesUsa'+'ge']=ls,this['maxVertice'+'s']=0x8a4+0x1*-0xd3b+0x5*0xeb,this['maxIndices']=0xcf1*-0x2+-0x10*-0x1be+-0xa*0x33,this['vertexCoun'+'t']=-0x14e7*0x1+0x117f*0x1+0x8*0x6d,this['indexCount']=-0x1a43+0x15*0x1f+0x17b8,this['vertexStre'+'amsUpdated']=!(0x118+-0x2*-0x533+0xad*-0x11),this['indexStrea'+'mUpdated']=!(0x1365*0x1+0xe3c+-0x21a0),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x5dd69d,_0xa325c4){this['vertexCoun'+'t']?M['assert'](this['vertexCoun'+'t']===_0x5dd69d,'Vertex\x20str'+'eam\x20'+_0xa325c4+'\x20has\x20'+_0x5dd69d+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x5dd69d;}}h(Zs,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x20*-0xad+-0x50*-0x1f+-0x1*-0xbf3),h(Zs,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',0x6b*0x1+-0x2*-0xeda+-0x1e1c),h(Zs,'DEFAULT_CO'+'MPONENTS_U'+'V',-0xd3d+0x39*-0x77+0x2*0x13df),h(Zs,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',0x223c+0x151*-0x19+-0x43*0x5);class Pw{constructor(_0x4117cb,_0x1ffba8,_0x552d62,_0x39468b,_0x9065f8){this['data']=_0x4117cb,this['componentC'+'ount']=_0x1ffba8,this['dataType']=_0x552d62,this['dataTypeNo'+'rmalize']=_0x39468b,this['asInt']=_0x9065f8;}}class Ge extends jc{constructor(_0x134fd1,_0x1a1839){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0x26c9+0x1505+0x2*0x8e2),h(this,'_aabb',new Ie()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(0x64e+-0xde7+-0x2*-0x3cd)),h(this,'_storageVe'+'rtex',!(-0xb1e*-0x2+-0x1069*0x2+0x1*0xa97)),(this['id']=Cw++,M['assert'](_0x134fd1,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x134fd1,this['_storageIn'+'dex']=(_0x1a1839==null?void(-0x2*-0x122b+-0xd*0x52+0x11c*-0x1d):_0x1a1839['storageInd'+'ex'])||!(0x19d9+0x2e8*-0xd+0xbf0),this['_storageVe'+'rtex']=(_0x1a1839==null?void(-0x1*-0x1caf+-0x19ba+-0x1*0x2f5):_0x1a1839['storageVer'+'tex'])||!(-0x1e0f+-0x403*0x5+-0x263*-0x15));}static['fromGeomet'+'ry'](_0x5ba07a,_0x34772b,_0xe34d7={}){const _0x52541e=new Ge(_0x5ba07a,_0xe34d7),{positions:_0x302280,normals:_0x526bdc,tangents:_0x5df14c,colors:_0xcbc5ec,uvs:_0x5f3f4e,uvs1:_0x467c44,blendIndices:_0x56c3e5,blendWeights:_0x514560,indices:_0x5d2e68}=_0x34772b;return _0x302280&&_0x52541e['setPositio'+'ns'](_0x302280),_0x526bdc&&_0x52541e['setNormals'](_0x526bdc),_0x5df14c&&_0x52541e['setVertexS'+'tream'](ci,_0x5df14c,0x1*-0x59f+-0x13*0xa4+0x11cf),_0xcbc5ec&&_0x52541e['setColors3'+'2'](_0xcbc5ec),_0x5f3f4e&&_0x52541e['setUvs'](0x62*-0x2e+-0x24af+-0x3*-0x1219,_0x5f3f4e),_0x467c44&&_0x52541e['setUvs'](-0x16ed*-0x1+0x1728+-0x2e14,_0x467c44),_0x56c3e5&&_0x52541e['setVertexS'+'tream'](ns,_0x56c3e5,-0x4eb*0x1+0xb11+-0x622,_0x56c3e5['length']/(0x29+0x7b*-0xe+0x695),Xr),_0x514560&&_0x52541e['setVertexS'+'tream'](li,_0x514560,0x2001*0x1+0x7a*0x25+-0x319f),_0x5d2e68&&_0x52541e['setIndices'](_0x5d2e68),_0x52541e['update'](),_0x52541e;}set['morph'](_0x13fa38){_0x13fa38!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x13fa38,_0x13fa38&&_0x13fa38['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x57c82b){this['_aabb']=_0x57c82b,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x4a1979=this['morph'];_0x4a1979&&(this['morph']=null,_0x4a1979['refCount']<0x8e1*-0x4+0x1*0x183e+0x1*0xb47&&_0x4a1979['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x295994=-0x1d65+0x182f+0x536;_0x295994<this['indexBuffe'+'r']['length'];_0x295994++)this['_destroyIn'+'dexBuffer'](_0x295994);this['indexBuffe'+'r']['length']=0xe*-0x1b1+-0x2*-0x3dc+0x3*0x552,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x16e000){this['indexBuffe'+'r'][_0x16e000]&&(this['indexBuffe'+'r'][_0x16e000]['destroy'](),this['indexBuffe'+'r'][_0x16e000]=null);}['_initBoneA'+'abbs'](_0x53fcc8){this['boneAabb']=[],this['boneUsed']=[];let _0x1b4a11,_0x140fc0,_0x283dc0,_0x5b223f,_0x1b2490;const _0x10b44d=[],_0xbf13df=[],_0x298a51=this['boneUsed'],_0x164a44=this['skin']['boneNames']['length'];let _0x1f352c,_0x52fe84,_0x10b0e2;for(let _0x46c0c9=0x1c3+-0x271+-0x1*-0xae;_0x46c0c9<_0x164a44;_0x46c0c9++)_0x10b44d[_0x46c0c9]=new I(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0xbf13df[_0x46c0c9]=new I(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x2221a9=new go(this['vertexBuff'+'er']),_0x1b2c27=_0x2221a9['element'][Pe],_0x3b4af7=_0x2221a9['element'][li],_0xb987ac=_0x2221a9['element'][ns],_0x5aeb49=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x4320c1=0x6*-0x568+0x14a8+-0xd*-0xe8;_0x4320c1<_0x5aeb49;_0x4320c1++){for(let _0x3e400d=-0x1679*-0x1+-0xd8c+-0x8ed;_0x3e400d<-0x2301*-0x1+0x903+-0x2c00;_0x3e400d++)if(_0x3b4af7['array'][_0x3b4af7['index']+_0x3e400d]>-0x86*0x8+0x1f3f+-0x1b0f*0x1){const _0xadbefc=_0xb987ac['array'][_0xb987ac['index']+_0x3e400d];if(_0x298a51[_0xadbefc]=!(0x1*0x1629+0x93*0x34+-0x3405),_0x1b4a11=_0x1b2c27['array'][_0x1b2c27['index']],_0x140fc0=_0x1b2c27['array'][_0x1b2c27['index']+(-0x15b2+0x97b+-0xb8*-0x11)],_0x283dc0=_0x1b2c27['array'][_0x1b2c27['index']+(0x3*-0x34a+0x226f+-0x188f)],_0x5b223f=_0xbf13df[_0xadbefc],_0x1b2490=_0x10b44d[_0xadbefc],_0x1b2490['x']>_0x1b4a11&&(_0x1b2490['x']=_0x1b4a11),_0x1b2490['y']>_0x140fc0&&(_0x1b2490['y']=_0x140fc0),_0x1b2490['z']>_0x283dc0&&(_0x1b2490['z']=_0x283dc0),_0x5b223f['x']<_0x1b4a11&&(_0x5b223f['x']=_0x1b4a11),_0x5b223f['y']<_0x140fc0&&(_0x5b223f['y']=_0x140fc0),_0x5b223f['z']<_0x283dc0&&(_0x5b223f['z']=_0x283dc0),_0x53fcc8){let _0x10c7e0=_0x1f352c=_0x1b4a11,_0x3e2c5c=_0x52fe84=_0x140fc0,_0x437046=_0x10b0e2=_0x283dc0;for(let _0x4ee4a4=-0x471*0x1+-0x4f9+-0x4b5*-0x2;_0x4ee4a4<_0x53fcc8['length'];_0x4ee4a4++){const _0x10fe9c=_0x53fcc8[_0x4ee4a4],_0x1f3654=_0x10fe9c['deltaPosit'+'ions'][_0x4320c1*(0xa87+0x2bf+-0xd43)],_0x2a475f=_0x10fe9c['deltaPosit'+'ions'][_0x4320c1*(0xb4b+-0x683+0x4c5*-0x1)+(0x190b+-0x7db+0x35*-0x53)],_0x70911=_0x10fe9c['deltaPosit'+'ions'][_0x4320c1*(0x184d*-0x1+0x1853+-0x3)+(-0x7*0x26f+-0x1eb1+0x2fbc)];_0x1f3654<0x167c+-0xc8e+0x52*-0x1f?_0x10c7e0+=_0x1f3654:_0x1f352c+=_0x1f3654,_0x2a475f<-0xccc+0x119*-0x18+0x2724?_0x3e2c5c+=_0x2a475f:_0x52fe84+=_0x2a475f,_0x70911<0x238c+0x9ef*-0x1+-0x53*0x4f?_0x437046+=_0x70911:_0x10b0e2+=_0x70911;}_0x1b2490['x']>_0x10c7e0&&(_0x1b2490['x']=_0x10c7e0),_0x1b2490['y']>_0x3e2c5c&&(_0x1b2490['y']=_0x3e2c5c),_0x1b2490['z']>_0x437046&&(_0x1b2490['z']=_0x437046),_0x5b223f['x']<_0x1f352c&&(_0x5b223f['x']=_0x1f352c),_0x5b223f['y']<_0x52fe84&&(_0x5b223f['y']=_0x52fe84),_0x5b223f['z']<_0x10b0e2&&(_0x5b223f['z']=_0x10b0e2);}}_0x2221a9['next']();}const _0x1a8da4=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x40ab20=>_0x40ab20['name']===Pe);if(_0x1a8da4&&_0x1a8da4['normalize']){const _0x1b2cd6=((()=>{switch(_0x1a8da4['dataType']){case Nc:return _0x5a1f0b=>Math['max'](_0x5a1f0b/(0x8*-0x1aa+-0x2c9*-0x3+-0x1*-0x574),-(0x1c27+0x610+0x2236*-0x1));case Xr:return _0x1240c3=>_0x1240c3/(0x24a0+-0xefe+-0x14a3);case kc:return _0x139e06=>Math['max'](_0x139e06/(-0x147a+0x4b3+-0x1de*-0x4d),-(0x47*-0x2b+0x13d*-0xe+0x1d44));case rl:return _0x1418b6=>_0x1418b6/(-0x1*-0x2def+0x12099+-0x4e89);default:return _0x127d52=>_0x127d52;}})());for(let _0x7ee969=-0x1eb5+0x47*0x88+-0x703;_0x7ee969<_0x164a44;_0x7ee969++)if(_0x298a51[_0x7ee969]){const _0x20bb2f=_0x10b44d[_0x7ee969],_0x1dfd61=_0xbf13df[_0x7ee969];_0x20bb2f['set'](_0x1b2cd6(_0x20bb2f['x']),_0x1b2cd6(_0x20bb2f['y']),_0x1b2cd6(_0x20bb2f['z'])),_0x1dfd61['set'](_0x1b2cd6(_0x1dfd61['x']),_0x1b2cd6(_0x1dfd61['y']),_0x1b2cd6(_0x1dfd61['z']));}}for(let _0x479078=0xb*0x2e7+-0x1ab*0x13+-0x2*0x1e;_0x479078<_0x164a44;_0x479078++){const _0x41589c=new Ie();_0x41589c['setMinMax'](_0x10b44d[_0x479078],_0xbf13df[_0x479078]),this['boneAabb']['push'](_0x41589c);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new Zs(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>0x20ba+0x8*-0xed+-0x1952&&this['indexBuffe'+'r'][0x256f+-0x1bf2*0x1+-0x97d]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][-0x1*-0x806+0x383*0x3+-0x128f]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][0xc3*-0x13+-0x1989*0x1+0x2802]['numIndices']));}['clear'](_0x4229df,_0x3e128a,_0x1d5961=-0x5*-0x766+-0x5ba+-0x1f44,_0x513de2=0x47*-0x47+0x8ad*-0x1+0x1c5e){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(0x95*0x3f+-0x2f*0x23+-0x1e3e),this['_geometryD'+'ata']['maxVertice'+'s']=_0x1d5961,this['_geometryD'+'ata']['maxIndices']=_0x513de2,this['_geometryD'+'ata']['verticesUs'+'age']=_0x4229df?ls:Mh,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x3e128a?ls:Mh;}['setVertexS'+'tream'](_0x262ef9,_0x4d3179,_0x334a1a,_0x4de291,_0x2a41c6=Be,_0x215f19=!(-0x23ac+-0x1*0xb49+0x2ef6),_0x358f08=!(0x16*-0x19f+0x5d9+-0x2b6*-0xb)){this['_initGeome'+'tryData']();const _0x45b53c=_0x4de291||_0x4d3179['length']/_0x334a1a;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x45b53c,_0x262ef9),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x1ea8+0x10fd*-0x2+-0x40a2*-0x1),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x262ef9]=new Pw(_0x4d3179,_0x334a1a,_0x2a41c6,_0x215f19,_0x358f08);}['getVertexS'+'tream'](_0x131fc2,_0x2898af){let _0x5252ce=-0x1be*0x10+0x2477+0x1*-0x897,_0x48a27b=!(-0x6c*0x3+0x1*-0x1e26+0x1f6b);if(this['_geometryD'+'ata']){const _0x1af116=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x131fc2];_0x1af116&&(_0x48a27b=!(-0x7bc*-0x1+-0xa28+0x26c),_0x5252ce=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x2898af)?_0x2898af['set'](_0x1af116['data']):(_0x2898af['length']=0x5*0x73b+-0x34b*-0xb+-0x4860,_0x2898af['push'](_0x1af116['data'])));}return _0x48a27b||this['vertexBuff'+'er']&&(_0x5252ce=new go(this['vertexBuff'+'er'])['readData'](_0x131fc2,_0x2898af)),_0x5252ce;}['setPositio'+'ns'](_0x41790c,_0x39b60e=Zs['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x3f7971){this['setVertexS'+'tream'](Pe,_0x41790c,_0x39b60e,_0x3f7971,Be,!(0x1*-0xb35+0x10a*-0x11+0x1ce0));}['setNormals'](_0x3d6daf,_0x25811a=Zs['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x17cf54){this['setVertexS'+'tream'](cs,_0x3d6daf,_0x25811a,_0x17cf54,Be,!(-0x61+-0xc8*-0xf+-0x2*0x5ab));}['setUvs'](_0x5921d4,_0x28907d,_0x25ab8a=Zs['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x39c1dd){this['setVertexS'+'tream'](tp+_0x5921d4,_0x28907d,_0x25ab8a,_0x39c1dd,Be,!(-0x102f*-0x2+0x2*0x1136+0x1a1*-0x29));}['setColors'](_0x42f79c,_0x5779be=Zs['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x89c75e){this['setVertexS'+'tream'](kt,_0x42f79c,_0x5779be,_0x89c75e,Be,!(-0x469*-0x3+0x97*0x2d+-0x27c5));}['setColors3'+'2'](_0x318b3d,_0x236af6){this['setVertexS'+'tream'](kt,_0x318b3d,Zs['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x236af6,Xr,!(-0x1266+-0x40*0x4+-0x9b3*-0x2));}['setIndices'](_0xf26493,_0x299b5a){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x251*-0x7+0xe6f+0x1c8),this['_geometryD'+'ata']['indices']=_0xf26493,this['_geometryD'+'ata']['indexCount']=_0x299b5a||_0xf26493['length'];}['getPositio'+'ns'](_0x2fc01c){return this['getVertexS'+'tream'](Pe,_0x2fc01c);}['getNormals'](_0x36445d){return this['getVertexS'+'tream'](cs,_0x36445d);}['getUvs'](_0x432de5,_0x1eb06e){return this['getVertexS'+'tream'](tp+_0x432de5,_0x1eb06e);}['getColors'](_0x4b87e3){return this['getVertexS'+'tream'](kt,_0x4b87e3);}['getIndices'](_0x4f01f7){let _0x5b762c=0x1*0x1c21+-0x8f1+-0x1330;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x41a75c=this['_geometryD'+'ata']['indices'];if(_0x5b762c=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x4f01f7))_0x4f01f7['set'](_0x41a75c);else{_0x4f01f7['length']=-0x1c*-0x9f+-0x140b+-0x2a7*-0x1;for(let _0x24ad40=-0x1*-0x5f+0x6f2*0x4+-0x1c27,_0x56f07f=_0x41a75c['length'];_0x24ad40<_0x56f07f;_0x24ad40++)_0x4f01f7['push'](_0x41a75c[_0x24ad40]);}}else this['indexBuffe'+'r']['length']>-0x1c2a+0x10a0+0xb8a&&this['indexBuffe'+'r'][-0x1019+0x1*0x3f5+0xc24]&&(_0x5b762c=this['indexBuffe'+'r'][0x2158*0x1+0x3*-0xad5+-0x7*0x1f]['readData'](_0x4f01f7));return _0x5b762c;}['update'](_0x3c313d=zs,_0x1048b1=!(0x1442+0xe34*0x1+-0x322*0xb)){if(this['_geometryD'+'ata']){if(_0x1048b1){const _0x5a5319=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Pe];_0x5a5319&&_0x5a5319['componentC'+'ount']===0x1*-0x223+0x1*-0x2505+0x272b*0x1&&(this['_aabb']['compute'](_0x5a5319['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0xe6dc53=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0xe6dc53=!(0x2140+-0xde6+-0x1*0x135a),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0xe6dc53&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x572bf8=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x572bf8=!(-0x9d2*-0x2+-0x10ef+-0x2b5),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x572bf8&&this['indexBuffe'+'r']['length']>0x2577+-0x437+0x4c*-0x70&&this['indexBuffe'+'r'][0x12e9+0x55*-0x57+0x9fa]&&(this['indexBuffe'+'r'][-0x201b+0xf14+0x1107]['destroy'](),this['indexBuffe'+'r'][-0x1cf8+0x1804+0x13d*0x4]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x224d*-0x1+0xb11+-0x5cf*-0x4]['type']=_0x3c313d,this['indexBuffe'+'r']['length']>0x19ce+-0xd33+-0xc9b&&this['indexBuffe'+'r'][0x17a0+-0xc7*-0x1+-0x1867*0x1]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0x1032+0x1bf0+0x1*-0x2c22]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][-0x2ca*0xb+0x46+-0x3cd*-0x8]['indexed']=!(0x5a9+0x32*0x71+-0x1*0x1bbb)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][-0x7*0x239+-0x2582+-0xd*-0x415]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][-0x964+0x1b*-0xc5+0x1e2b]['indexed']=!(-0x1*-0x2ba+0x9e9*0x1+-0xca2)),this['_geometryD'+'ata']['vertexCoun'+'t']=-0x2*0x33f+-0xb31+0x11af,this['_geometryD'+'ata']['indexCount']=-0x1*0x16b0+0x1944+-0xb*0x3c,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(0xe9b+0x250e+0x19d4*-0x2),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x582+-0x11*0x1df+0x1a4e),this['_geometryD'+'ata']['recreate']=!(0x23cd+0xcfe+-0x30ca),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x1354ca){const _0x410d41=[];for(const _0x11134f in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x15a610=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x11134f];_0x410d41['push']({'semantic':_0x11134f,'components':_0x15a610['componentC'+'ount'],'type':_0x15a610['dataType'],'normalize':_0x15a610['dataTypeNo'+'rmalize'],'asInt':_0x15a610['asInt']});}return new zt(this['device'],_0x410d41,_0x1354ca);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0x1f2f81=this['_geometryD'+'ata']['maxVertice'+'s'],_0x15d987=this['_buildVert'+'exFormat'](_0x1f2f81);this['vertexBuff'+'er']=new xs(this['device'],_0x15d987,_0x1f2f81,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x2972f8=new go(this['vertexBuff'+'er']),_0xafc07b=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x489024 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x559eac=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x489024];_0x2972f8['writeData'](_0x489024,_0x559eac['data'],_0xafc07b),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x489024];}_0x2972f8['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=-0x1*-0x5ff+0x176d*-0x1+-0x1*-0x116e||!this['indexBuffe'+'r'][0x17*-0x7+0x1435+-0x1394]){const _0x330fea=this['_geometryD'+'ata']['maxVertice'+'s'],_0x1758a8=_0x330fea>-0x164f7+0x1d8f*0x11+0x1*0x6e77||_0x330fea===0x6d*-0x2f+0x1*-0x259f+-0x2*-0x1cd1?hr:zi,_0x408a55=this['_storageIn'+'dex']?{'storage':!(0x306*-0x9+-0x9d3+0x2509)}:void(0x5*0x88+0x1e8e+-0x1a*0x147);this['indexBuffe'+'r'][-0x2b6*-0x5+-0x1*0xe2+-0xcac]=new dr(this['device'],_0x1758a8,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(-0x4c1*0x4+0x1*0x19a9+-0x6a5),_0x408a55);}const _0x396ea2=this['_geometryD'+'ata']['indices'];_0x396ea2&&(this['indexBuffe'+'r'][-0x1445+-0x10d8+0x251d]['writeData'](_0x396ea2,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x254376){_0x254376===Ir?this['generateWi'+'reframe']():_0x254376===Pl&&(this['primitive'][Pl]={'type':Oc,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:-0xa1c+-0x1a9a+0x24b6,'indexed':!(-0x252*-0x3+-0xc7c+0x587*0x1)});}['updateRend'+'erStates'](){this['primitive'][Pl]&&this['prepareRen'+'derState'](Pl),this['primitive'][Ir]&&this['prepareRen'+'derState'](Ir);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer'](Ir);const _0x176fd1=this['vertexBuff'+'er']['numVertice'+'s'],_0x322dc7=[];let _0x3a8637;if(this['indexBuffe'+'r']['length']>0xbb1+0xa9f+0xa8*-0x22&&this['indexBuffe'+'r'][0x111b*0x1+0x1deb+0x2*-0x1783]){const _0x3cf669=[[0xce5+-0x2*0xf6a+0x11ef,0x1492+0x1f7*-0x9+-0x6*0x7b],[0x1b*-0xf1+0x1*0x1655+-0x317*-0x1,0x869*0x1+0x1919+-0x2180],[0xafa*-0x1+-0x16*0x98+0x9*0x2ac,-0x2c4+-0xc9*0x9+0x1*0x9d5]],_0x223388=this['primitive'][Qa]['base'],_0x27b916=this['primitive'][Qa]['count'],_0x1b31c4=this['primitive'][Qa]['baseVertex']||-0x2b5*0xc+-0x4*0x12e+-0x1*-0x2534,_0x507e0f=this['indexBuffe'+'r'][Qa],_0x3af665=new Bh[_0x507e0f['format']](_0x507e0f['storage']),_0x137a15=new Set();for(let _0x17cae0=_0x223388;_0x17cae0<_0x223388+_0x27b916;_0x17cae0+=-0xd*-0x2f9+0x1386+-0xe8a*0x4)for(let _0x23e027=-0x1*0x90b+-0x183d+0x2148;_0x23e027<0x26f7+-0x77c+-0xd4*0x26;_0x23e027++){const _0x2b390c=_0x3af665[_0x17cae0+_0x3cf669[_0x23e027][-0x6b*0x3+0x195a+-0x1819]]+_0x1b31c4,_0x490ee2=_0x3af665[_0x17cae0+_0x3cf669[_0x23e027][-0x594+0x8bf*0x4+0x3*-0x9cd]]+_0x1b31c4,_0x3c1ffc=_0x2b390c>_0x490ee2?_0x490ee2*_0x176fd1+_0x2b390c:_0x2b390c*_0x176fd1+_0x490ee2;_0x137a15['has'](_0x3c1ffc)||(_0x137a15['add'](_0x3c1ffc),_0x322dc7['push'](_0x2b390c,_0x490ee2));}_0x3a8637=_0x507e0f['format'];}else{for(let _0x589db4=-0xa38+-0x1*0x260b+0x3043;_0x589db4<_0x176fd1;_0x589db4+=-0x183a+-0xd*-0x217+0x19*-0x1e)_0x322dc7['push'](_0x589db4,_0x589db4+(0x231a+0x36f*-0x3+-0x18cc),_0x589db4+(-0x649*0x3+0x2002+-0xd26),_0x589db4+(-0x1*0x95+-0x141*0x7+0x16*0x6d),_0x589db4+(-0x1*-0x1991+0xb1f*-0x1+-0x6*0x268),_0x589db4);_0x3a8637=_0x322dc7['length']>0x31dc*0x4+0x1ed04+-0x1b475?hr:zi;}const _0x435b05=new dr(this['vertexBuff'+'er']['device'],_0x3a8637,_0x322dc7['length']);new Bh[_0x435b05['format']](_0x435b05['storage'])['set'](_0x322dc7),_0x435b05['unlock'](),this['primitive'][Ir]={'type':Fc,'base':0x0,'baseVertex':0x0,'count':_0x322dc7['length'],'indexed':!(0x24*0x1f+0x4*-0x62f+0xa3*0x20)},this['indexBuffe'+'r'][Ir]=_0x435b05;}}const Op=new te(),ud=new I(),Fp=new le(),md=new le(),Np=new I(),kp=new I(),Mw=new te(),Iw=new le(),Zt=new I(),Vn=new te(),Qt=new le(),Sa=new le(),Up=new te(),pd=new I(),Il=new I();function Bp(_0x39ad18,_0x1ed53e){return _0x39ad18 instanceof Function?_0x39ad18:_0x318944=>{let _0x332959=_0x318944[_0x39ad18];return _0x332959 instanceof Function&&(_0x332959=_0x332959()),_0x332959===_0x1ed53e;};}function Ay(_0x51d8e5,_0xf94510){if(_0xf94510(_0x51d8e5))return _0x51d8e5;const _0x55c6e5=_0x51d8e5['_children'],_0x46b72a=_0x55c6e5['length'];for(let _0x178432=-0x15b4+0x175b+0x3*-0x8d;_0x178432<_0x46b72a;++_0x178432){const _0x22cb22=Ay(_0x55c6e5[_0x178432],_0xf94510);if(_0x22cb22)return _0x22cb22;}return null;}class He extends pe{constructor(_0x512a8d='Untitled'){super(),h(this,'name'),h(this,'tags',new uo(this)),h(this,'localPosit'+'ion',new I()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new I(0x44*-0x87+-0x18f9+-0x1e6b*-0x2,0x44f*-0x9+-0x5*0x759+0x4b85*0x1,-0x1d28+-0x5fc*-0x5+-0xc3*0x1)),h(this,'localEuler'+'Angles',new I()),h(this,'position',new I()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new I()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(-0x1f54+0xde2+0x1173)),h(this,'_aabbVer',0xb9*-0x25+0x1bc*-0x1+0x1c79),h(this,'_frozen',!(0x4c3*0x7+-0xc7*-0x27+-0x3fa5)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(-0x7db*-0x4+-0x347+0x4*-0x709)),h(this,'_worldScal'+'eSign',0x8d*0x21+0x4*0x5ae+-0x28e5),h(this,'_normalMat'+'rix',new oi()),h(this,'_dirtyNorm'+'al',!(0xbfc+-0x7*-0x50c+-0x5ea*0x8)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',0xada+0x2*-0x656+0x2*0xe9),h(this,'_enabled',!(0x279*0x3+-0x8*-0x214+-0x180b)),h(this,'_enabledIn'+'Hierarchy',!(-0x1ef2+-0x26b8+-0x57*-0xcd)),h(this,'scaleCompe'+'nsation',!(-0xd09*-0x2+0x58c+-0x1f9d)),this['name']=_0x512a8d;}get['right'](){return this['_right']||(this['_right']=new I()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new I()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new I()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(0xb05+0x1956*-0x1+-0x11a*-0xd));}get['normalMatr'+'ix'](){const _0x354f67=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x354f67['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(-0x1466+0x4*0x56d+-0x25*0x9)),_0x354f67;}set['enabled'](_0x3769e5){var _0x23c127;this['_enabled']!==_0x3769e5&&(this['_enabled']=_0x3769e5,(_0x3769e5&&((_0x23c127=this['_parent'])!=null&&_0x23c127['enabled'])||!_0x3769e5)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x3769e5));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x51e4f3=this['_parent'];if(!_0x51e4f3)return'';let _0x7d34a9=this['name'];for(;_0x51e4f3&&_0x51e4f3['_parent'];)_0x7d34a9=_0x51e4f3['name']+'/'+_0x7d34a9,_0x51e4f3=_0x51e4f3['_parent'];return _0x7d34a9;}get['root'](){let _0xd48bd=this;for(;_0xd48bd['_parent'];)_0xd48bd=_0xd48bd['_parent'];return _0xd48bd;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x5e0a68,_0x2dec29){_0x5e0a68['_onHierarc'+'hyStateCha'+'nged'](_0x2dec29);const _0x3e39bd=_0x5e0a68['_children'];for(let _0x4191e2=-0x7*0x415+-0x23d3+0x4066,_0x5d9020=_0x3e39bd['length'];_0x4191e2<_0x5d9020;_0x4191e2++)_0x3e39bd[_0x4191e2]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x3e39bd[_0x4191e2],_0x2dec29);}['_onHierarc'+'hyStateCha'+'nged'](_0x178cb8){this['_enabledIn'+'Hierarchy']=_0x178cb8,_0x178cb8&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x4516f1){_0x4516f1['name']=this['name'];const _0x222482=this['tags']['_list'];_0x4516f1['tags']['clear']();for(let _0x4740a7=-0x758*0x5+-0x1286+0x3*0x126a;_0x4740a7<_0x222482['length'];_0x4740a7++)_0x4516f1['tags']['add'](_0x222482[_0x4740a7]);_0x4516f1['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x4516f1['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x4516f1['localScale']['copy'](this['localScale']),_0x4516f1['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x4516f1['position']['copy'](this['position']),_0x4516f1['rotation']['copy'](this['rotation']),_0x4516f1['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x4516f1['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x4516f1['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x4516f1['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x4516f1['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x4516f1['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x4516f1['_aabbVer']=this['_aabbVer']+(-0x7cd+0xc24+-0x456),_0x4516f1['_enabled']=this['_enabled'],_0x4516f1['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x4516f1['_enabledIn'+'Hierarchy']=!(0x146a+-0x94d+0xc*-0xed);}['clone'](){const _0x429e8d=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x429e8d),_0x429e8d;}['copy'](_0xdc61ba){return _0xdc61ba['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0xeb91e8=this['_children'];for(;_0xeb91e8['length'];){const _0x1f4c57=_0xeb91e8['pop']();_0x1f4c57['_parent']=null,_0x1f4c57['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x192b0e,_0x3cbbde){const _0x9e09c6=[],_0x13be72=Bp(_0x192b0e,_0x3cbbde);return this['forEach'](_0x1b0be9=>{_0x13be72(_0x1b0be9)&&_0x9e09c6['push'](_0x1b0be9);}),_0x9e09c6;}['findOne'](_0x1f9ae1,_0x2fbdd0){const _0x448c72=Bp(_0x1f9ae1,_0x2fbdd0);return Ay(this,_0x448c72);}['findByTag'](..._0x1eb9bf){const _0x49ea99=[],_0x36d368=(_0x4eb0c1,_0x5a271b)=>{_0x5a271b&&_0x4eb0c1['tags']['has'](..._0x1eb9bf)&&_0x49ea99['push'](_0x4eb0c1);for(let _0x36a9dc=-0x5*0x773+-0x4c2+-0x1*-0x2a01;_0x36a9dc<_0x4eb0c1['_children']['length'];_0x36a9dc++)_0x36d368(_0x4eb0c1['_children'][_0x36a9dc],!(0x18*-0x22+-0x125*-0x1d+-0x1e01));};return _0x36d368(this,!(0x1*0x20d3+0xc81+0x1*-0x2d53)),_0x49ea99;}['findByName'](_0x5c3faa){return this['findOne']('name',_0x5c3faa);}['findByPath'](_0x5b59ca){const _0x5c2f8c=Array['isArray'](_0x5b59ca)?_0x5b59ca:_0x5b59ca['split']('/');let _0x1799d3=this;for(let _0x5c34db=0x2*-0x224+0x125c+0xd4*-0x11,_0x4ed738=_0x5c2f8c['length'];_0x5c34db<_0x4ed738;++_0x5c34db)if(_0x1799d3=_0x1799d3['children']['find'](_0x307fe1=>_0x307fe1['name']===_0x5c2f8c[_0x5c34db]),!_0x1799d3)return null;return _0x1799d3;}['forEach'](_0x75e67a,_0x209880){_0x75e67a['call'](_0x209880,this);const _0x41a6af=this['_children'],_0xc31666=_0x41a6af['length'];for(let _0x27cdd9=0x71*0x2d+0x35*0x8b+-0x11b*0x2c;_0x27cdd9<_0xc31666;++_0x27cdd9)_0x41a6af[_0x27cdd9]['forEach'](_0x75e67a,_0x209880);}['isDescenda'+'ntOf'](_0x3b325b){let _0x111bb3=this['_parent'];for(;_0x111bb3;){if(_0x111bb3===_0x3b325b)return!(0x1*-0x164f+-0x55a+-0x1*-0x1ba9);_0x111bb3=_0x111bb3['_parent'];}return!(-0x1f59+0x21d*-0x7+0x2e25);}['isAncestor'+'Of'](_0x119fd0){return _0x119fd0['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x14b*0x10+-0x245e+0x390f)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new I()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0x1f2b*0x1+0x6e5*0x3+0xa7c&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x10cf41;(_0x10cf41=this['_parent'])==null||_0x10cf41['removeChil'+'d'](this);}['reparent'](_0x4d0fc0,_0x300903){this['remove'](),_0x4d0fc0&&(_0x300903>=0x2*0x1168+0x22cd*-0x1+0x1*-0x3?_0x4d0fc0['insertChil'+'d'](this,_0x300903):_0x4d0fc0['addChild'](this));}['setLocalEu'+'lerAngles'](_0x59d1f4,_0x4b2b01,_0x59df35){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x59d1f4,_0x4b2b01,_0x59df35),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x1e0174,_0x1d7909,_0x19a1dd){_0x1e0174 instanceof I?this['localPosit'+'ion']['copy'](_0x1e0174):this['localPosit'+'ion']['set'](_0x1e0174,_0x1d7909,_0x19a1dd),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x126f11,_0x137ef3,_0x1d39db,_0x745005){_0x126f11 instanceof le?this['localRotat'+'ion']['copy'](_0x126f11):this['localRotat'+'ion']['set'](_0x126f11,_0x137ef3,_0x1d39db,_0x745005),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x3ef91f,_0x160f63,_0x3b84a1){_0x3ef91f instanceof I?this['localScale']['copy'](_0x3ef91f):this['localScale']['set'](_0x3ef91f,_0x160f63,_0x3b84a1),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(-0x1*-0xe55+-0x3*0x4a7+-0x60),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x2be0b6=this['_parent'];for(;_0x2be0b6;)_0x2be0b6['_frozen']=!(0x17df+0x51*0xf+0x19*-0x125),_0x2be0b6=_0x2be0b6['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(-0x1*0x1b7b+0x12c8+0x22d*0x4),this['_dirtyWorl'+'d']=!(-0x2663+0x251b+-0x148*-0x1);for(let _0xa9a50b=0x1*-0xfe1+-0x1bea+0x65*0x6f;_0xa9a50b<this['_children']['length'];_0xa9a50b++)this['_children'][_0xa9a50b]['_dirtyWorl'+'d']||this['_children'][_0xa9a50b]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(-0x1882+0x1f6*-0x11+-0x269*-0x18),this['_worldScal'+'eSign']=0x1*-0xeb3+0x60a+-0x3*-0x2e3,this['_aabbVer']++;}['setPositio'+'n'](_0x1aa47c,_0x279c36,_0x205383){_0x1aa47c instanceof I?Zt['copy'](_0x1aa47c):Zt['set'](_0x1aa47c,_0x279c36,_0x205383),this['_parent']===null?this['localPosit'+'ion']['copy'](Zt):(Vn['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),Vn['transformP'+'oint'](Zt,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x1160e6,_0x2db585,_0x40bbf7,_0x2aa80d){if(_0x1160e6 instanceof le?Qt['copy'](_0x1160e6):Qt['set'](_0x1160e6,_0x2db585,_0x40bbf7,_0x2aa80d),this['_parent']===null)this['localRotat'+'ion']['copy'](Qt);else{const _0x410676=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x410676)['invert'](),this['localRotat'+'ion']['copy'](Sa)['mul'](Qt);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x563909,_0x344afd){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x563909),this['localRotat'+'ion']['copy'](_0x344afd);else{const _0x4f35e3=this['_parent']['getWorldTr'+'ansform']();Vn['copy'](_0x4f35e3)['invert'](),Vn['transformP'+'oint'](_0x563909,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](Vn)['mul'](_0x344afd);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x173e86,_0x447bbe,_0x304170){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x173e86,_0x447bbe,_0x304170),this['_parent']!==null){const _0x274b2e=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x274b2e)['invert'](),this['localRotat'+'ion']['mul2'](Sa,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x561b90){this['_prepareIn'+'sertChild'](_0x561b90),this['_children']['push'](_0x561b90),this['_onInsertC'+'hild'](_0x561b90);}['addChildAn'+'dSaveTrans'+'form'](_0x153128){const _0xf1114d=_0x153128['getPositio'+'n'](),_0x1d40d8=_0x153128['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x153128),_0x153128['setPositio'+'n'](Mw['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0xf1114d)),_0x153128['setRotatio'+'n'](Iw['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x1d40d8)),this['_children']['push'](_0x153128),this['_onInsertC'+'hild'](_0x153128);}['insertChil'+'d'](_0x4497bd,_0xa5b221){this['_prepareIn'+'sertChild'](_0x4497bd),this['_children']['splice'](_0xa5b221,-0x2bd*-0xb+0xfb5+-0x2dd4,_0x4497bd),this['_onInsertC'+'hild'](_0x4497bd);}['_prepareIn'+'sertChild'](_0x4fcabd){_0x4fcabd['remove'](),M['assert'](_0x4fcabd!==this,'GraphNode\x20'+(_0x4fcabd==null?void(0x5c2+0x215d+0x5*-0x7d3):_0x4fcabd['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),M['assert'](!this['isDescenda'+'ntOf'](_0x4fcabd),'GraphNode\x20'+(_0x4fcabd==null?void(-0x9f4*-0x1+0x266e+0x1*-0x3062):_0x4fcabd['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x4dc9de,_0x54fba5,_0x54b02e){this['fire'](_0x4dc9de,_0x54b02e);for(let _0x5fe7e1=0xbf6*0x1+0x1*0x22d0+-0x2ec6;_0x5fe7e1<this['_children']['length'];_0x5fe7e1++)this['_children'][_0x5fe7e1]['_fireOnHie'+'rarchy'](_0x54fba5,_0x54fba5,_0x54b02e);}['_onInsertC'+'hild'](_0x554418){_0x554418['_parent']=this;const _0x1489cd=_0x554418['_enabled']&&this['enabled'];_0x554418['_enabledIn'+'Hierarchy']!==_0x1489cd&&(_0x554418['_enabledIn'+'Hierarchy']=_0x1489cd,_0x554418['_notifyHie'+'rarchyStat'+'eChanged'](_0x554418,_0x1489cd)),_0x554418['_updateGra'+'phDepth'](),_0x554418['_dirtifyWo'+'rld'](),this['_frozen']&&_0x554418['_unfreezeP'+'arentToRoo'+'t'](),_0x554418['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x554418);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(0x1*0x22c3+-0x1b*0x157+0x16b):-0xb*0xad+0x32b+0x444;for(let _0x2120c2=-0x1*-0xf55+-0x233e+0x1*0x13e9,_0x39a235=this['_children']['length'];_0x2120c2<_0x39a235;_0x2120c2++)this['_children'][_0x2120c2]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x2b780b){const _0x4f888d=this['_children']['indexOf'](_0x2b780b);_0x4f888d!==-(0x1658+0x249f+-0x3af6)&&(this['_children']['splice'](_0x4f888d,-0xd*0x175+-0x1388+0x267a),_0x2b780b['_parent']=null,_0x2b780b['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x2b780b));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1d5d*0x1+0x260a+-0x4366)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x12388e;const _0x2019aa=this['_parent'];let _0x443d8e=this['localScale'],_0x2d7a5f=_0x2019aa;if(_0x2d7a5f){for(;_0x2d7a5f&&_0x2d7a5f['scaleCompe'+'nsation'];)_0x2d7a5f=_0x2d7a5f['_parent'];_0x2d7a5f&&(_0x2d7a5f=_0x2d7a5f['_parent'],_0x2d7a5f&&(_0x12388e=_0x2d7a5f['worldTrans'+'form']['getScale'](),Np['mul2'](_0x12388e,this['localScale']),_0x443d8e=Np));}md['setFromMat'+'4'](_0x2019aa['worldTrans'+'form']),Fp['mul2'](md,this['localRotat'+'ion']);let _0x324a4f=_0x2019aa['worldTrans'+'form'];_0x2019aa['scaleCompe'+'nsation']&&(kp['mul2'](_0x12388e,_0x2019aa['getLocalSc'+'ale']()),Op['setTRS'](_0x2019aa['worldTrans'+'form']['getTransla'+'tion'](ud),md,kp),_0x324a4f=Op),_0x324a4f['transformP'+'oint'](this['localPosit'+'ion'],ud),this['worldTrans'+'form']['setTRS'](ud,Fp,_0x443d8e);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(0x11b2+-0x3*0x2f1+-0x2*0x46f);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(0x478*-0x6+0x7d4+0x12fc),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x111637=this['_children'];for(let _0x57f15c=0x1ba6+-0x2653+0xaad,_0x559a7c=_0x111637['length'];_0x57f15c<_0x559a7c;_0x57f15c++)_0x111637[_0x57f15c]['syncHierar'+'chy']();}['lookAt'](_0x51c452,_0x5dd83d,_0xcb3bdd,_0x29590b=0xccd+-0xa5b+-0x2*0x139,_0x55367d=-0x231*0x7+-0x6c6+0x12a*0x13,_0x3cdbad=-0x444+0x203+0x241){if(_0x51c452 instanceof I)pd['copy'](_0x51c452),_0x5dd83d instanceof I?Il['copy'](_0x5dd83d):Il['copy'](I['UP']);else{if(_0xcb3bdd===void(0x7*0x243+0x121f+0x2*-0x10fa))return;pd['set'](_0x51c452,_0x5dd83d,_0xcb3bdd),Il['set'](_0x29590b,_0x55367d,_0x3cdbad);}Up['setLookAt'](this['getPositio'+'n'](),pd,Il),Qt['setFromMat'+'4'](Up),this['setRotatio'+'n'](Qt);}['translate'](_0x2ad650,_0x886eba,_0x10b7cc){_0x2ad650 instanceof I?Zt['copy'](_0x2ad650):Zt['set'](_0x2ad650,_0x886eba,_0x10b7cc),Zt['add'](this['getPositio'+'n']()),this['setPositio'+'n'](Zt);}['translateL'+'ocal'](_0x4055e2,_0x4aec68,_0x2f0838){_0x4055e2 instanceof I?Zt['copy'](_0x4055e2):Zt['set'](_0x4055e2,_0x4aec68,_0x2f0838),this['localRotat'+'ion']['transformV'+'ector'](Zt,Zt),this['localPosit'+'ion']['add'](Zt),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x2d7690,_0x477a46,_0x101e44){if(Qt['setFromEul'+'erAngles'](_0x2d7690,_0x477a46,_0x101e44),this['_parent']===null)this['localRotat'+'ion']['mul2'](Qt,this['localRotat'+'ion']);else{const _0x34a722=this['getRotatio'+'n'](),_0x162faa=this['_parent']['getRotatio'+'n']();Sa['copy'](_0x162faa)['invert'](),Qt['mul2'](Sa,Qt),this['localRotat'+'ion']['mul2'](Qt,_0x34a722);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x15f74b,_0x1cfb54,_0x4705a9){Qt['setFromEul'+'erAngles'](_0x15f74b,_0x1cfb54,_0x4705a9),this['localRotat'+'ion']['mul'](Qt),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const by=new Ht();function cl(_0x4df50a){const _0x42a2c2=by['get'](_0x4df50a);return M['assert'](_0x42a2c2),_0x42a2c2;}function Dw(_0x39e8dd,_0x15be04){M['assert'](_0x15be04),by['get'](_0x39e8dd,()=>_0x15be04);}class Lw{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x1e86fe,_0x4ee531)=>{_0x4ee531['destroy']();}),this['cache']['clear']();}['incRef'](_0x5d8d11){const _0x4c4ab5=(this['cache']['get'](_0x5d8d11)||0xb04+-0x9f*-0x2c+-0x2658)+(0x459+-0x1578+0x890*0x2);this['cache']['set'](_0x5d8d11,_0x4c4ab5);}['decRef'](_0x5efee5){if(_0x5efee5){let _0x2afa25=this['cache']['get'](_0x5efee5);_0x2afa25&&(_0x2afa25--,_0x2afa25===0x265a+-0x465+-0x21f5?(this['cache']['delete'](_0x5efee5),_0x5efee5['destroy']()):this['cache']['set'](_0x5efee5,_0x2afa25));}}}class Li{static['incRef'](_0x52d098){this['cache']['incRef'](_0x52d098);}static['decRef'](_0x241cd5){this['cache']['decRef'](_0x241cd5);}static['destroy'](){this['cache']['destroy']();}}h(Li,'cache',new Lw());let Rw=-0x22f5+-0x196d+0x1*0x3c62;const Ow=new Ie(),Dl=new Ie(),_d=new xu(),gd=new Set(),Sr=new Uint32Array(-0x17*0x1a+-0x2*-0xcb5+0x148*-0x12);class Fw{constructor(_0x13c31f){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(-0x1c*0x12b+-0xc5+0x1*0x217a)),this['count']=_0x13c31f;}['destroy'](){var _0x208b15;this['_destroyVe'+'rtexBuffer']&&((_0x208b15=this['vertexBuff'+'er'])==null||_0x208b15['destroy']()),this['vertexBuff'+'er']=null;}}class Nw{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x133b+0x8*0x34b+-0x2d8f));}['get'](_0xe023f3){return this['map']['get'](_0xe023f3)??this['map']['get'](null);}}class kw{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x54eee0){if(!this['bindGroup']){const _0x12ac5a=this['shader'];M['assert'](_0x12ac5a);const _0xaefda2=_0x12ac5a['meshBindGr'+'oupFormat'];M['assert'](_0xaefda2),this['bindGroup']=new rm(_0x54eee0,_0xaefda2),ca['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x26b728){if(!this['uniformBuf'+'fer']){const _0xa734ea=this['shader'];M['assert'](_0xa734ea);const _0x5c02c0=_0xa734ea['meshUnifor'+'mBufferFor'+'mat'];M['assert'](_0x5c02c0),this['uniformBuf'+'fer']=new nm(_0x26b728,_0x5c02c0,!(-0x20ec+-0x1cfd+0xc62*0x5));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x8cca6f,_0x5a37f6;(_0x8cca6f=this['bindGroup'])==null||_0x8cca6f['destroy'](),this['bindGroup']=null,(_0x5a37f6=this['uniformBuf'+'fer'])==null||_0x5a37f6['destroy'](),this['uniformBuf'+'fer']=null;}}const Br=class Br{constructor(_0x5a058d,_0x440aa6,_0x390e36=null){h(this,'castShadow',!(-0xd4c+0x1*0x2ef+-0x52f*-0x2)),h(this,'shadowCasc'+'adeMask',YT),h(this,'cull',!(0x1e32+0x1*-0x252e+0x37e*0x2)),h(this,'drawOrder',-0x2*0x4b3+0x2140+-0x17da),h(this,'_drawBucke'+'t',0x1419+0x11d1*0x1+-0x256b),h(this,'node'),h(this,'visible',!(0x5c5+-0x165d*0x1+0x2c4*0x6)),h(this,'visibleThi'+'sFrame',!(0x91e+0x48f*-0x1+-0x48e)),h(this,'flipFacesF'+'actor',0x2f*0x13+-0x2*-0x10bc+0x93d*-0x4),h(this,'gsplatInst'+'ance',null),h(this,'id',Rw++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(-0x563+0x1*-0x5bb+-0xb1e*-0x1)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(-0x20f3+-0x2*-0xb01+0x1*0xaf2)),h(this,'_aabb',new Ie()),h(this,'_aabbVer',-(0x659*0x3+0x2413+-0x371d)),h(this,'_aabbMeshV'+'er',-(-0x15*0x13a+-0xacc+0x248f)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(-0x8c*0x2f+-0x813+0x21c7)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x1590+0x517+0x1*-0x1aa7),h(this,'_sortKeyFo'+'rward',0x5cf+0x138+-0x707*0x1),h(this,'_sortKeyDy'+'namic',0x1839+-0x1*0x10d5+-0x1*0x764),h(this,'_layer',iy),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(-0x49*0x35+0xd*0x43+0x2*0x5db)),h(this,'_renderSty'+'le',Qa),h(this,'_screenSpa'+'ce',!(-0x1f2b+0x17d3+0x759)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',ds<<0xa75+-0x8d*0x28+0xba3),h(this,'_calculate'+'SortDistan'+'ce',null);if(M['assert'](!(_0x5a058d instanceof He),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x390e36,this['_mesh']=_0x5a058d,_0x5a058d['incRefCoun'+'t'](),this['material']=_0x440aa6,_0x5a058d['vertexBuff'+'er']){const _0x5c0d02=_0x5a058d['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x5c0d02['hasUv0']?bm:-0x1*0x3eb+-0xb*-0x1e9+0x446*-0x4,this['_shaderDef'+'s']|=_0x5c0d02['hasUv1']?Sy:-0xe27*-0x1+-0x6e*-0x41+-0x2a15,this['_shaderDef'+'s']|=_0x5c0d02['hasColor']?yy:0x1daa+0x1*-0x46a+0x65*-0x40,this['_shaderDef'+'s']|=_0x5c0d02['hasTangent'+'s']?Cm:0x1244+-0xd68+-0x4dc;}this['updateKey']();}set['drawBucket'](_0x135686){this['_drawBucke'+'t']=Math['floor'](_0x135686)&0x1a2*-0x1+0xe1a+0x59*-0x21,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x1b493a){this['_renderSty'+'le']=_0x1b493a,this['mesh']['prepareRen'+'derState'](_0x1b493a);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x447c30){_0x447c30!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x447c30,_0x447c30&&_0x447c30['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x2d2555){this['_aabb']=_0x2d2555;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x3d60c1=this['_customAab'+'b'],_0x3e6807=!!_0x3d60c1;if(!_0x3d60c1){if(_0x3d60c1=Ow,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x7e8b97=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x7e8b97);}const _0x2418d0=this['mesh']['boneUsed'];let _0x3fbf56=!(-0xd*0x27f+0x48f*0x3+0x12c6);for(let _0xe23b4d=-0x2*0x737+-0x9d6+-0x611*-0x4;_0xe23b4d<this['mesh']['boneAabb']['length'];_0xe23b4d++)_0x2418d0[_0xe23b4d]&&(Dl['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0xe23b4d],this['skinInstan'+'ce']['matrices'][_0xe23b4d]),_0x3fbf56?(_0x3fbf56=!(0x4*0x2bb+-0x47+-0xaa4),_0x3d60c1['center']['copy'](Dl['center']),_0x3d60c1['halfExtent'+'s']['copy'](Dl['halfExtent'+'s'])):_0x3d60c1['add'](Dl));_0x3e6807=!(0x1b8c+0x6ca+0x24a*-0xf);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x3d60c1['center']['copy'](this['mesh']['aabb']['center']),_0x3d60c1['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x3d60c1['center']['set'](0x23f6+0x14dd+0x1*-0x38d3,-0x23d5+0x1347+-0x1a*-0xa3,0x133*-0x11+0xb9a+0xad*0xd),_0x3d60c1['halfExtent'+'s']['set'](0x1*-0x1568+-0x91*-0x17+-0x27*-0x37,0x1*0x23e6+0x231+-0x2617,0x2*-0x350+-0xed4+0x2*0xaba)),this['mesh']&&this['mesh']['morph']){const _0xc2c162=this['mesh']['morph']['aabb'];_0x3d60c1['_expand'](_0xc2c162['getMin'](),_0xc2c162['getMax']());}_0x3e6807=!(0x7a*0x1c+0x2ad*0x7+-0x2013),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x3e6807&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x3d60c1,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x46c066=>{_0x46c066['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x37f5b8,_0x19e33b,_0x4d6021,_0x409fbd,_0x45bb88,_0x216392,_0x57f81f){var _0x5d4965;const _0x3354ac=this['_shaderDef'+'s'];Sr[-0x146e+-0x11*0x14b+0x2a69]=_0x37f5b8,Sr[0x1414*0x1+-0x24a2+-0x3*-0x585]=_0x19e33b,Sr[0x19bf+-0x1e45+0x2*0x244]=_0x3354ac,Sr[0x2*0x6b0+0x26b+-0xfc8]=_0x409fbd['hash'];const _0x20bba9=XS(Sr);let _0x2c2b03=this['_shaderCac'+'he']['get'](_0x20bba9);if(!_0x2c2b03){const _0x55ac2c=this['_material'];if(_0x2c2b03=new kw(),_0x2c2b03['shader']=_0x55ac2c['variants']['get'](_0x20bba9),_0x2c2b03['hashes']=new Uint32Array(Sr),!_0x2c2b03['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x34c52c=_0x55ac2c['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x4d6021,'objDefs':_0x3354ac,'cameraShaderParams':_0x409fbd,'pass':_0x37f5b8,'sortedLights':_0x57f81f,'viewUniformFormat':_0x45bb88,'viewBindGroupFormat':_0x216392,'vertexFormat':(_0x5d4965=this['mesh']['vertexBuff'+'er'])==null?void(0x5d7+-0xc58+-0x25*-0x2d):_0x5d4965['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x55ac2c['variants']['set'](_0x20bba9,_0x34c52c),_0x2c2b03['shader']=_0x34c52c;}this['_shaderCac'+'he']['set'](_0x20bba9,_0x2c2b03);}return M['call'](()=>{Vx['equals'](_0x2c2b03['hashes'],Sr)||M['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x2c2b03;}set['material'](_0x5c9aa1){this['clearShade'+'rs']();const _0x39b902=this['_material'];_0x39b902&&_0x39b902['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x5c9aa1,_0x5c9aa1&&(_0x5c9aa1['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x5c9aa1['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x4e60d){_0x4e60d!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x4e60d,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x2a1486){this['_calculate'+'SortDistan'+'ce']=_0x2a1486;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x208bac){this['_receiveSh'+'adow']!==_0x208bac&&(this['_receiveSh'+'adow']=_0x208bac,this['_updateSha'+'derDefs'](_0x208bac?this['_shaderDef'+'s']&~$h:this['_shaderDef'+'s']|$h));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x175a26){this['_updateSha'+'derDefs'](_0x175a26?this['_shaderDef'+'s']|mh:this['_shaderDef'+'s']&~mh);}get['batching'](){return(this['_shaderDef'+'s']&mh)!==0x13*-0x2+-0x3*0x2+0x2c;}set['skinInstan'+'ce'](_0x581e81){this['_skinInsta'+'nce']=_0x581e81,this['_updateSha'+'derDefs'](_0x581e81?this['_shaderDef'+'s']|ko:this['_shaderDef'+'s']&~ko),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x548a78){var _0x67f35a;(_0x67f35a=this['_morphInst'+'ance'])==null||_0x67f35a['destroy'](),this['_morphInst'+'ance']=_0x548a78;let _0x5f1686=this['_shaderDef'+'s'];_0x5f1686=_0x548a78&&_0x548a78['morph']['morphPosit'+'ions']?_0x5f1686|Bo:_0x5f1686&~Bo,_0x5f1686=_0x548a78&&_0x548a78['morph']['morphNorma'+'ls']?_0x5f1686|zo:_0x5f1686&~zo,_0x5f1686=_0x548a78&&_0x548a78['morph']['intRenderF'+'ormat']?_0x5f1686|Vo:_0x5f1686&~Vo,this['_updateSha'+'derDefs'](_0x5f1686);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x2123cf){this['_screenSpa'+'ce']!==_0x2123cf&&(this['_screenSpa'+'ce']=_0x2123cf,this['_updateSha'+'derDefs'](_0x2123cf?this['_shaderDef'+'s']|Xh:this['_shaderDef'+'s']&~Xh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x1cfd53){this['_sortKeyFo'+'rward']=_0x1cfd53;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x5cd4df){const _0x319dbd=this['_shaderDef'+'s']&0x1*-0x149f+0xc384+0x511a;this['_updateSha'+'derDefs'](_0x319dbd|_0x5cd4df<<-0x369*-0xb+0x260+-0x27d3);}get['mask'](){return this['_shaderDef'+'s']>>-0x1*-0xce2+-0x273+-0xa5f;}set['instancing'+'Count'](_0x195f0c){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x195f0c);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:-0x145c+-0x4*0x364+0x21ec;}['destroy'](){var _0x47944b,_0x225cf3,_0x1b31b5;const _0x46c00=this['mesh'];_0x46c00&&(this['mesh']=null,_0x46c00['refCount']<0x1cc6+-0x345+-0x1980&&_0x46c00['destroy']()),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x4d1+0x269b+-0x21ca*0x1],null),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x1a86+-0x1195*0x1+0x2c1c*0x1],null),(_0x47944b=this['_skinInsta'+'nce'])==null||_0x47944b['destroy'](),this['_skinInsta'+'nce']=null,(_0x225cf3=this['morphInsta'+'nce'])==null||_0x225cf3['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x1b31b5=this['instancing'+'Data'])==null||_0x1b31b5['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x3939aa,_0x3d28b3){if(_0x3939aa){for(let _0x47a286=0x16cf+0x219f+-0xe9*0x3e;_0x47a286<_0x3939aa['length'];_0x47a286++){_0x3939aa[_0x47a286]['_renderSty'+'le']=_0x3d28b3;const _0x4bb7ad=_0x3939aa[_0x47a286]['mesh'];gd['has'](_0x4bb7ad)||(gd['add'](_0x4bb7ad),_0x4bb7ad['prepareRen'+'derState'](_0x3d28b3));}gd['clear']();}}['_isVisible'](_0x2dad44){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x2dad44):(_d['center']=this['aabb']['center'],_d['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x2dad44['frustum']['containsSp'+'here'](_d)>-0x24e2*-0x1+0x2199+0x467b*-0x1):!(0x127*0xa+-0x22dd+0x1*0x1758);}['updateKey'](){const {material:_0x36bd83}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x272+0xb31+0x6*-0x242|(_0x36bd83['alphaToCov'+'erage']||_0x36bd83['alphaTest']?0x10c*0x5dce+-0x2a8c1f+0x85877:0xd68+0x17b9*0x1+-0x5*0x76d)|_0x36bd83['id']&0x463717+-0xc6cf3+-0x455*-0x16f;}['setInstanc'+'ing'](_0x5dbdde,_0xc29c98=!(0x9*-0x9b+0x3*-0xb03+0x267d*0x1)){_0x5dbdde?(this['instancing'+'Data']=new Fw(_0x5dbdde['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x5dbdde,_0x5dbdde['format']['instancing']=!(0x7*-0x1c1+-0x1*0x733+0x2*0x9bd),this['cull']=_0xc29c98):(this['instancing'+'Data']=null,this['cull']=!(0x15*-0x195+-0x25b5+0x46ee)),this['_updateSha'+'derDefs'](_0x5dbdde?this['_shaderDef'+'s']|Uo:this['_shaderDef'+'s']&~Uo);}['setIndirec'+'t'](_0x367f96,_0xf1b0a5){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x367f96==null?void(-0x25c9*0x1+-0x10c9*-0x1+-0xa8*-0x20):_0x367f96['camera'])??null,_0xf1b0a5),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0xe2bb8f;this['_allocIndi'+'rectData']();const _0x10e857=(_0xe2bb8f=this['mesh'])==null?void(0x7*0x509+0x1d*-0xb5+-0xebe):_0xe2bb8f['primitive'][this['renderStyl'+'e']],_0x518ab6=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x518ab6[0x485*-0x1+0x1398+-0xe3*0x11]=_0x10e857['count'],_0x518ab6[-0x83f*0x2+0x52*-0x65+-0xcd*-0x3d]=_0x10e857['base'],_0x518ab6[0x32*-0x79+-0xc*-0x97+-0x6a*-0x28]=_0x10e857['baseVertex'],_0x518ab6;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new Nw());}['ensureMate'+'rial'](_0x344661){this['material']||(M['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=cl(_0x344661));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x22c3d7){return this['parameters'][_0x22c3d7];}['setParamet'+'er'](_0x23967c,_0x54c6ab,_0x3d993d=-0x170ad4d3f+-0x144*0xd28a1+-0x97443*-0x43d6){const _0x95c2d5=this['parameters'][_0x23967c];_0x95c2d5?(_0x95c2d5['data']=_0x54c6ab,_0x95c2d5['passFlags']=_0x3d993d):this['parameters'][_0x23967c]={'scopeId':null,'data':_0x54c6ab,'passFlags':_0x3d993d};}['setRealtim'+'eLightmap'](_0xbacc14,_0x3f5d81){const _0x19d966=this['getParamet'+'er'](_0xbacc14);_0x19d966!==_0x3f5d81&&(_0x19d966&&Li['decRef'](_0x19d966['data']),_0x3f5d81?(Li['incRef'](_0x3f5d81),this['setParamet'+'er'](_0xbacc14,_0x3f5d81)):this['deletePara'+'meter'](_0xbacc14));}['deletePara'+'meter'](_0x399e30){this['parameters'][_0x399e30]&&delete this['parameters'][_0x399e30];}['setParamet'+'ers'](_0x23a25a,_0x429b86){const _0x2d4988=this['parameters'];for(const _0x820906 in _0x2d4988){const _0x173039=_0x2d4988[_0x820906];_0x173039['passFlags']&_0x429b86&&(_0x173039['scopeId']||(_0x173039['scopeId']=_0x23a25a['scope']['resolve'](_0x820906)),_0x173039['scopeId']['setValue'](_0x173039['data']));}}['setLightma'+'pped'](_0x285d9b){_0x285d9b?this['mask']=(this['mask']|si)&-(-0x8e8+0x1*-0xded+0x16db):(this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x1cc2+0x1*0x20e9+-0x427*0x1],null),this['setRealtim'+'eLightmap'](Br['lightmapPa'+'ramNames'][-0x185f*-0x1+0x708+-0x1f66],null),this['_shaderDef'+'s']&=-(0x933+0x1*0x7e4+0x56*-0x1),this['mask']=(this['mask']|ds)&-(0x402+0x1*-0x213b+0x1d40));}['setCustomA'+'abb'](_0x1edd10){_0x1edd10?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x1edd10):this['_customAab'+'b']=_0x1edd10['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(0x1aca+0x22a*-0x8+-0x979)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Br,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let We=Br;const Uw=[-0x1*0x1535+-0xc1f*0x1+0x1da*0x12,0x6a+-0x33*0x97+-0x2*-0xed6,-0xf*0x1+0x3fa*-0x1+-0x206*-0x2,0x16c*0x17+0x3ff+0xc3b*-0x3,0x278+-0x1*-0x16db+0x30*-0x87,-0x244f+-0x12e3*-0x2+-0x176],Bw=[-0x5d*0x4f+-0xafc+-0x1*-0x27af,-0x3*0xc67+0x1bfc+0x93a,-0x1db4*-0x1+-0xa*-0x283+-0x36cf,0x1357+0x1b62+0x3*-0xf93,0x4c*-0x25+0x1ef+0x244*0x4,0x1*-0x6df+-0x1b91+-0x1*-0x2272],zp=new oi();function Vp(_0x3aa6a8,_0x6da7b0){if(_0x3aa6a8&&!_0x6da7b0||!_0x3aa6a8&&_0x6da7b0)return!(0x1ab9+-0x161c+0x127*-0x4);if(_0x3aa6a8=_0x3aa6a8['data'],_0x6da7b0=_0x6da7b0['data'],_0x3aa6a8===_0x6da7b0)return!(-0xae8+0xc36+-0x14e);if(_0x3aa6a8 instanceof Float32Array&&_0x6da7b0 instanceof Float32Array){if(_0x3aa6a8['length']!==_0x6da7b0['length'])return!(-0x1891+-0x31*-0x1d+0x1305);for(let _0x225ee9=0x181c+-0x130d+-0x50f*0x1;_0x225ee9<_0x3aa6a8['length'];_0x225ee9++)if(_0x3aa6a8[_0x225ee9]!==_0x6da7b0[_0x225ee9])return!(-0x109*-0x14+-0x6*0xb8+0x1063*-0x1);return!(0x625*-0x3+-0x4*-0x418+0x20f);}return!(-0x309*0x8+-0xa89*-0x1+-0x28*-0x58);}function zw(_0x4acda2,_0x35f3bd){for(const _0x36770b in _0x4acda2)if(_0x4acda2['hasOwnProp'+'erty'](_0x36770b)&&!Vp(_0x4acda2[_0x36770b],_0x35f3bd[_0x36770b]))return!(0x432+-0xa*-0x2b4+-0x1f39);for(const _0x58a0a1 in _0x35f3bd)if(_0x35f3bd['hasOwnProp'+'erty'](_0x58a0a1)&&!Vp(_0x35f3bd[_0x58a0a1],_0x4acda2[_0x58a0a1]))return!(0x1*-0x1009+0x1*-0x22c6+0x1968*0x2);return!(0x14b*-0x17+-0xf50+0x2d0d*0x1);}function Sd(_0x3b6e98){return _0x3b6e98['node']['worldTrans'+'form']['scaleSign'];}class Vw{constructor(_0x547e83,_0x3d9330,_0x273f96){this['device']=_0x547e83,this['rootNode']=_0x3d9330,this['scene']=_0x273f96,this['_init']=!(-0x42*-0x7+-0x5*-0x56b+-0x1ce4),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x18fc+-0x1*-0x218e+-0x3a8a,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x21c45c,_0x112334,_0x16dc91,_0x12681a,_0x4e4a63){if(_0x12681a===void(-0x194b+-0x313*0x7+0x7*0x6b0)&&(_0x12681a=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x12681a]){M['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x12681a+('\x20already\x20e'+'xists.'));return;}const _0x258d9=new mt(_0x12681a,_0x21c45c,_0x112334,_0x16dc91,_0x4e4a63);return this['_batchGrou'+'ps'][_0x12681a]=_0x258d9,_0x258d9;}['removeGrou'+'p'](_0x42d30e){if(!this['_batchGrou'+'ps'][_0x42d30e]){M['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x42d30e+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x32c1dc=[];for(let _0x24a6ff=0x12b3+0x20c*0x8+-0x3*0xbb1;_0x24a6ff<this['_batchList']['length'];_0x24a6ff++)this['_batchList'][_0x24a6ff]['batchGroup'+'Id']===_0x42d30e?this['destroyBat'+'ch'](this['_batchList'][_0x24a6ff]):_0x32c1dc['push'](this['_batchList'][_0x24a6ff]);this['_batchList']=_0x32c1dc,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x42d30e),delete this['_batchGrou'+'ps'][_0x42d30e];}['markGroupD'+'irty'](_0x275b4b){this['_dirtyGrou'+'ps']['indexOf'](_0x275b4b)<-0x12*0xc7+-0x1b14+0xe*0x2ef&&this['_dirtyGrou'+'ps']['push'](_0x275b4b);}['getGroupBy'+'Name'](_0x512610){const _0x36432d=this['_batchGrou'+'ps'];for(const _0x154188 in _0x36432d)if(_0x36432d['hasOwnProp'+'erty'](_0x154188)&&_0x36432d[_0x154188]['name']===_0x512610)return _0x36432d[_0x154188];return null;}['getBatches'](_0x468d76){const _0x21cb5b=[],_0x4e2363=this['_batchList']['length'];for(let _0x305eaa=0x135e+-0xdcd+-0x5f*0xf;_0x305eaa<_0x4e2363;_0x305eaa++){const _0x29cfa9=this['_batchList'][_0x305eaa];_0x29cfa9['batchGroup'+'Id']===_0x468d76&&_0x21cb5b['push'](_0x29cfa9);}return _0x21cb5b;}['_removeMod'+'elsFromBat'+'chGroup'](_0x243025,_0x56500e){if(_0x243025['enabled']){_0x243025['model']&&_0x243025['model']['batchGroup'+'Id']===_0x56500e&&(_0x243025['model']['batchGroup'+'Id']=-(0x67*-0x1+0xa*-0x1e9+0x1382)),_0x243025['render']&&_0x243025['render']['batchGroup'+'Id']===_0x56500e&&(_0x243025['render']['batchGroup'+'Id']=-(-0x1*-0xeb7+0x1f8a+-0x940*0x5)),_0x243025['element']&&_0x243025['element']['batchGroup'+'Id']===_0x56500e&&(_0x243025['element']['batchGroup'+'Id']=-(0x3*0xc41+-0x184*-0x6+-0x2dda)),_0x243025['sprite']&&_0x243025['sprite']['batchGroup'+'Id']===_0x56500e&&(_0x243025['sprite']['batchGroup'+'Id']=-(0x5*-0x27b+-0x66b*0x1+-0x4f*-0x3d));for(let _0x3a1203=-0x196+0x26ff+-0x9d*0x3d;_0x3a1203<_0x243025['_children']['length'];_0x3a1203++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x243025['_children'][_0x3a1203],_0x56500e);}}['insert'](_0xb490fc,_0xf422b6,_0x259261){const _0x3fbe4d=this['_batchGrou'+'ps'][_0xf422b6];M['assert'](_0x3fbe4d,'Invalid\x20ba'+'tch\x20'+_0xf422b6+'\x20insertion'),_0x3fbe4d&&_0x3fbe4d['_obj'][_0xb490fc]['indexOf'](_0x259261)<0x1*0xb7f+-0x17d*-0x6+0x15*-0xf9&&(_0x3fbe4d['_obj'][_0xb490fc]['push'](_0x259261),this['markGroupD'+'irty'](_0xf422b6));}['remove'](_0x382839,_0x4aa297,_0x2817b9){const _0x3d79ca=this['_batchGrou'+'ps'][_0x4aa297];if(M['assert'](_0x3d79ca,'Invalid\x20ba'+'tch\x20'+_0x4aa297+'\x20insertion'),_0x3d79ca){const _0x52985f=_0x3d79ca['_obj'][_0x382839]['indexOf'](_0x2817b9);_0x52985f>=0x2*-0x10d3+-0x2*-0x5e+0x20ea&&(_0x3d79ca['_obj'][_0x382839]['splice'](_0x52985f,0x33*0x70+0x2a1*-0xe+0x3*0x4d5),this['markGroupD'+'irty'](_0x4aa297));}}['_extractRe'+'nder'](_0x519f8c,_0x288952,_0x50ff29,_0x2e5ea8){return _0x519f8c['render']&&(_0x288952=_0x2e5ea8[_0x519f8c['render']['batchGroup'+'Id']]=_0x288952['concat'](_0x519f8c['render']['meshInstan'+'ces']),_0x519f8c['render']['removeFrom'+'Layers']()),_0x288952;}['_extractMo'+'del'](_0x38edfd,_0x17045f,_0x3c074f,_0x53e264){return _0x38edfd['model']&&_0x38edfd['model']['model']&&(_0x17045f=_0x53e264[_0x38edfd['model']['batchGroup'+'Id']]=_0x17045f['concat'](_0x38edfd['model']['meshInstan'+'ces']),_0x38edfd['model']['removeMode'+'lFromLayer'+'s'](),_0x38edfd['model']['_batchGrou'+'p']=_0x3c074f),_0x17045f;}['_extractEl'+'ement'](_0x32efd0,_0xa3db46,_0x4d2c0e){if(!_0x32efd0['element'])return;let _0x44d699=!(-0x1deb+0x74f+-0x33b*-0x7);_0x32efd0['element']['_text']&&_0x32efd0['element']['_text']['_model']['meshInstan'+'ces']['length']>-0xb58+-0x3*-0x16e+0x15*0x56?(_0xa3db46['push'](_0x32efd0['element']['_text']['_model']['meshInstan'+'ces'][-0x24de*-0x1+0x1*-0x1a0+0x1*-0x233e]),_0x32efd0['element']['removeMode'+'lFromLayer'+'s'](_0x32efd0['element']['_text']['_model']),_0x44d699=!(0xcbd+-0x1*-0x5db+-0x1298)):_0x32efd0['element']['_image']&&(_0xa3db46['push'](_0x32efd0['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x32efd0['element']['removeMode'+'lFromLayer'+'s'](_0x32efd0['element']['_image']['_renderabl'+'e']['model']),_0x32efd0['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0xa3db46['push'](_0x32efd0['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x32efd0['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x32efd0['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x32efd0['element']['_dirtifyMa'+'sk'](),_0x32efd0['element']['_onPrerend'+'er']())),_0x44d699=!(-0x1298+-0xe4c+0x1a5*0x14)),_0x44d699&&(_0x4d2c0e['_ui']=!(0x4a6+-0xa*0x2e3+-0x7c*-0x32),_0x32efd0['element']['_batchGrou'+'p']=_0x4d2c0e);}['_collectAn'+'dRemoveMes'+'hInstances'](_0xa3831b,_0x56a8ee){for(let _0x17855d=-0x176+-0x64b+0x7c1;_0x17855d<_0x56a8ee['length'];_0x17855d++){const _0x28853c=_0x56a8ee[_0x17855d],_0x30ec64=this['_batchGrou'+'ps'][_0x28853c];if(!_0x30ec64)continue;let _0x3695d0=_0xa3831b[_0x28853c];_0x3695d0||(_0x3695d0=_0xa3831b[_0x28853c]=[]);for(let _0xc52872=0x2dd*0xd+0xa9f+-0x2fd8;_0xc52872<_0x30ec64['_obj']['model']['length'];_0xc52872++)_0x3695d0=this['_extractMo'+'del'](_0x30ec64['_obj']['model'][_0xc52872],_0x3695d0,_0x30ec64,_0xa3831b);for(let _0x2c0907=0x2*-0xbda+-0x422*0x4+0x283c;_0x2c0907<_0x30ec64['_obj']['render']['length'];_0x2c0907++)_0x3695d0=this['_extractRe'+'nder'](_0x30ec64['_obj']['render'][_0x2c0907],_0x3695d0,_0x30ec64,_0xa3831b);for(let _0x27efa8=0x1f6f+0x1*0x2581+-0x89e*0x8;_0x27efa8<_0x30ec64['_obj']['element']['length'];_0x27efa8++)this['_extractEl'+'ement'](_0x30ec64['_obj']['element'][_0x27efa8],_0x3695d0,_0x30ec64);for(let _0x55bb11=0x5fd+0x1*0x1d12+0x167*-0x19;_0x55bb11<_0x30ec64['_obj']['sprite']['length'];_0x55bb11++){const _0x4d4f40=_0x30ec64['_obj']['sprite'][_0x55bb11];_0x4d4f40['sprite']&&_0x4d4f40['sprite']['_meshInsta'+'nce']&&(_0x30ec64['dynamic']||_0x4d4f40['sprite']['sprite']['_renderMod'+'e']===ei)&&(_0x3695d0['push'](_0x4d4f40['sprite']['_meshInsta'+'nce']),_0x4d4f40['sprite']['removeMode'+'lFromLayer'+'s'](),_0x30ec64['_sprite']=!(-0x9*0x2a7+0x1c6+0x1619),_0x4d4f40['sprite']['_batchGrou'+'p']=_0x30ec64);}}}['generate'](_0x591ed6){const _0x177ceb={};_0x591ed6||(_0x591ed6=Object['keys'](this['_batchGrou'+'ps']));const _0xfc5845=[];for(let _0x375c3f=0x38c+-0x121e+-0xa*-0x175;_0x375c3f<this['_batchList']['length'];_0x375c3f++){if(_0x591ed6['indexOf'](this['_batchList'][_0x375c3f]['batchGroup'+'Id'])<0x1b2d+-0x22d5+0x7a8){_0xfc5845['push'](this['_batchList'][_0x375c3f]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x375c3f]);}if(this['_batchList']=_0xfc5845,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x177ceb,_0x591ed6),_0x591ed6===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=-0x1*0x205f+-0x1264+0x32c3;else{const _0x50b595=[];for(let _0x5ea13d=-0x20ae+0x23bf*0x1+-0x311;_0x5ea13d<this['_dirtyGrou'+'ps']['length'];_0x5ea13d++)_0x591ed6['indexOf'](this['_dirtyGrou'+'ps'][_0x5ea13d])<-0x2558+0x3*-0x620+0x4*0xdee&&_0x50b595['push'](this['_dirtyGrou'+'ps'][_0x5ea13d]);this['_dirtyGrou'+'ps']=_0x50b595;}let _0x1758f0,_0x4cb635,_0x27a4c9,_0x5961a6;for(const _0x215fbe in _0x177ceb)if(_0x177ceb['hasOwnProp'+'erty'](_0x215fbe)){if(_0x1758f0=_0x177ceb[_0x215fbe],_0x27a4c9=this['_batchGrou'+'ps'][_0x215fbe],!_0x27a4c9){M['error']('batch\x20grou'+'p\x20'+_0x215fbe+'\x20not\x20found');continue;}_0x4cb635=this['prepare'](_0x1758f0,_0x27a4c9['dynamic'],_0x27a4c9['maxAabbSiz'+'e'],_0x27a4c9['_ui']||_0x27a4c9['_sprite']);for(let _0x10ef0f=-0x19f5+0x12ef+0x2*0x383;_0x10ef0f<_0x4cb635['length'];_0x10ef0f++)_0x5961a6=this['create'](_0x4cb635[_0x10ef0f],_0x27a4c9['dynamic'],parseInt(_0x215fbe,0x3*-0x8ee+0x678+0x145c)),_0x5961a6&&_0x5961a6['addToLayer'+'s'](this['scene'],_0x27a4c9['layers']);}}['prepare'](_0xdc0ce6,_0x453432,_0x3b9c4b=Number['POSITIVE_I'+'NFINITY'],_0x328a23){if(_0xdc0ce6['length']===0x665*-0x6+-0x1ca4+-0x2*-0x2181)return[];const _0x3d7888=_0x3b9c4b*(-0x221a+-0x73*0x25+0x32b9+0.5),_0x19c4d3=-0x65d+0x26e4+-0x1c87,_0x15ead2=0x1808e97db+0xf49129c3+-0x1751fc19f,_0x37e5ea=new Ie(),_0x47dbec=new Ie();let _0x4848d9=null,_0x1ca24f;const _0x13db00=[];let _0x301863=-0x12e5*0x1+-0xf4*-0x1f+0x1*-0xaa7;_0x328a23&&_0xdc0ce6['sort']((_0x494c6b,_0x193b40)=>_0x494c6b['drawOrder']-_0x193b40['drawOrder']);let _0x543c8b=_0xdc0ce6,_0x10cdf7;const _0x36a831=_0x328a23?function(_0x583ccb){_0x4848d9?_0x4848d9['add'](_0x583ccb['aabb']):_0x4848d9=_0x583ccb['aabb']['clone'](),_0x10cdf7['push'](_0x583ccb);}:function(_0x50c08f){_0x10cdf7['push'](_0x50c08f);};for(;_0x543c8b['length']>-0x1*-0x19a4+0x3b*-0x72+0xa2;){_0x13db00[_0x301863]=[_0x543c8b[0x1*-0x10db+0x11c3*-0x1+0x3*0xb8a]],_0x10cdf7=[];const _0x1631cc=_0x543c8b[0x1ffb+-0x1fd*0x7+-0x8*0x242]['material'],_0x519da6=_0x543c8b[-0x1fbd+-0x6b9*-0x1+-0x4*-0x641]['layer'],_0x10fe8a=_0x543c8b[-0x32*-0xc1+0x31*-0x68+-0x11ca]['_shaderDef'+'s'],_0x8267f8=_0x543c8b[0x1293+0x2*-0x10fc+0xf65]['parameters'],_0x4706e1=_0x543c8b[0x38*-0x61+0x1676+-0x13e*0x1]['stencilFro'+'nt'];let _0x3d9fd4=_0x543c8b[-0xbed+-0x3*0xf2+-0x1*-0xec3]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x1a66b4=_0x543c8b[0x1*0x9a9+-0xcd5+0x32c]['drawOrder'];_0x37e5ea['copy'](_0x543c8b[-0x3b6*-0x8+0xaa+-0xde*0x23]['aabb']);const _0x8f048e=Sd(_0x543c8b[0x23d3+-0x1*0x262a+-0x257*-0x1]),_0x185a88=_0x543c8b[-0x7c+0x1b23+0x1aa7*-0x1]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x420ae5=_0x543c8b[-0x1e9e+-0xa68+0xb2*0x3b]['mesh']['primitive'][-0x1*0x126b+0x15b*0x3+0xe5a]['indexed'];_0x4848d9=null;for(let _0x4abe26=0xedc+-0x3e*0x19+-0x8cd*0x1;_0x4abe26<_0x543c8b['length'];_0x4abe26++){const _0x465720=_0x543c8b[_0x4abe26];if(_0x453432&&_0x13db00[_0x301863]['length']>=_0x19c4d3){_0x10cdf7=_0x10cdf7['concat'](_0x543c8b['slice'](_0x4abe26));break;}if(_0x1631cc!==_0x465720['material']||_0x519da6!==_0x465720['layer']||_0x185a88!==_0x465720['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x420ae5!==_0x465720['mesh']['primitive'][-0xba4+-0x1feb*0x1+0x3f*0xb1]['indexed']||_0x10fe8a!==_0x465720['_shaderDef'+'s']||_0x3d9fd4+_0x465720['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x15ead2){_0x36a831(_0x465720);continue;}if(_0x47dbec['copy'](_0x37e5ea),_0x47dbec['add'](_0x465720['aabb']),_0x47dbec['halfExtent'+'s']['x']>_0x3d7888||_0x47dbec['halfExtent'+'s']['y']>_0x3d7888||_0x47dbec['halfExtent'+'s']['z']>_0x3d7888){_0x36a831(_0x465720);continue;}if(_0x4706e1&&(!(_0x1ca24f=_0x465720['stencilFro'+'nt'])||_0x4706e1['func']!==_0x1ca24f['func']||_0x4706e1['zpass']!==_0x1ca24f['zpass'])){_0x36a831(_0x465720);continue;}if(_0x8f048e!==Sd(_0x465720)){_0x36a831(_0x465720);continue;}if(!zw(_0x8267f8,_0x465720['parameters'])){_0x36a831(_0x465720);continue;}if(_0x328a23&&_0x4848d9&&_0x4848d9['intersects'](_0x465720['aabb'])&&_0x465720['drawOrder']!==_0x1a66b4){_0x36a831(_0x465720);continue;}_0x37e5ea['add'](_0x465720['aabb']),_0x3d9fd4+=_0x465720['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0x13db00[_0x301863]['push'](_0x465720);}_0x301863++,_0x543c8b=_0x10cdf7;}return _0x13db00;}['collectBat'+'chedMeshDa'+'ta'](_0x5a9e56,_0x2d1c17){let _0x4e0120=null,_0x2b5035=0x4c1*0x6+-0x1889+0x1*-0x3fd,_0x16ba44=-0x47*-0x5+-0x26c0+-0x779*-0x5,_0x4c4e4f=null;for(let _0x21ad64=-0xa23+0x905*-0x3+0x2532;_0x21ad64<_0x5a9e56['length'];_0x21ad64++)if(_0x5a9e56[_0x21ad64]['visible']){const _0x43dfc3=_0x5a9e56[_0x21ad64]['mesh'],_0x33217a=_0x43dfc3['vertexBuff'+'er']['numVertice'+'s'];if(_0x2b5035+=_0x33217a,_0x43dfc3['primitive'][0x67*-0x8+0x1*-0x1372+0x16aa]['indexed'])_0x16ba44+=_0x43dfc3['primitive'][0x1675+-0x21fb+0xa*0x127]['count'];else{const _0x32446c=_0x43dfc3['primitive'][0x1a7e+0x1*0xbf1+-0x266f]['type'];(_0x32446c===$r||_0x32446c===cr)&&_0x43dfc3['primitive'][-0x1596+-0x1*0x5ab+0x1b41]['count']===0x1f7*-0x1+0x849+0x21a*-0x3&&(_0x16ba44+=0x1cb9*0x1+0x2383+-0x4036);}if(!_0x4e0120){_0x4c4e4f=_0x5a9e56[_0x21ad64]['material'],_0x4e0120={};const _0x4806a4=_0x43dfc3['vertexBuff'+'er']['format']['elements'];for(let _0x733f26=0x4b2+0x59b+0x36f*-0x3;_0x733f26<_0x4806a4['length'];_0x733f26++){const _0x5b9da4=_0x4806a4[_0x733f26]['name'];_0x4e0120[_0x5b9da4]={'numComponents':_0x4806a4[_0x733f26]['numCompone'+'nts'],'dataType':_0x4806a4[_0x733f26]['dataType'],'normalize':_0x4806a4[_0x733f26]['normalize'],'count':0x0};}_0x2d1c17&&(_0x4e0120[ns]={'numComponents':0x1,'dataType':Be,'normalize':!(-0x19e4+0x1165+-0x40*-0x22),'count':0x0});}}return{'streams':_0x4e0120,'batchNumVerts':_0x2b5035,'batchNumIndices':_0x16ba44,'material':_0x4c4e4f};}['create'](_0x3b951f,_0x43c448,_0xc1a82a){const _0x427542=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(0x1698+0x28f*-0xb+0x58d));let _0x279c71=null,_0x56c4f6,_0x2bf509,_0x11ec49,_0x498439=null;const _0x2d30a5=this['collectBat'+'chedMeshDa'+'ta'](_0x3b951f,_0x43c448);if(_0x2d30a5['streams']){const _0x192c22=_0x2d30a5['streams'];let _0xbb35b=_0x2d30a5['material'];const _0x393377=_0x2d30a5['batchNumVe'+'rts'],_0x2e493c=_0x2d30a5['batchNumIn'+'dices'];_0x498439=new Dp(_0x3b951f,_0x43c448,_0xc1a82a),this['_batchList']['push'](_0x498439);let _0x378584,_0x1a5666,_0x3ea1bb,_0x44c0a7,_0xcf31c1=0x1f77+-0x1a39+-0x53e,_0x34fb3e=-0x1a75+0x1486+-0x1f*-0x31,_0x1cd9f1;const _0x33b18e=_0x393377<=-0xf*0x10cd+0x324d*-0x2+0x2609c?Uint16Array:Uint32Array,_0x56c292=new _0x33b18e(_0x2e493c);for(_0x56c4f6 in _0x192c22)_0x279c71=_0x192c22[_0x56c4f6],_0x279c71['typeArrayT'+'ype']=ln[_0x279c71['dataType']],_0x279c71['elementByt'+'eSize']=po[_0x279c71['dataType']],_0x279c71['buffer']=new _0x279c71['typeArrayT'+'ype'](_0x393377*_0x279c71['numCompone'+'nts']);for(let _0xbcbd1a=-0x1d2+-0x1995+0x1b67;_0xbcbd1a<_0x3b951f['length'];_0xbcbd1a++)if(_0x3b951f[_0xbcbd1a]['visible']){_0x2bf509=_0x3b951f[_0xbcbd1a]['mesh'],_0x11ec49=_0x2bf509['vertexBuff'+'er']['numVertice'+'s'],_0x43c448||(_0x1cd9f1=_0x3b951f[_0xbcbd1a]['node']['getWorldTr'+'ansform']());for(_0x56c4f6 in _0x192c22)if(_0x56c4f6!==ns){_0x279c71=_0x192c22[_0x56c4f6];const _0x32d0ab=new _0x279c71['typeArrayT'+'ype'](_0x279c71['buffer']['buffer'],_0x279c71['elementByt'+'eSize']*_0x279c71['count']),_0x32abe4=_0x2bf509['getVertexS'+'tream'](_0x56c4f6,_0x32d0ab)*_0x279c71['numCompone'+'nts'];if(_0x279c71['count']+=_0x32abe4,!_0x43c448&&_0x279c71['numCompone'+'nts']>=0x24e2*-0x1+0x256c+-0x5*0x1b){if(_0x56c4f6===Pe){const _0x30c290=_0x1cd9f1['data'],_0x27af44=_0x30c290[-0x67*-0x52+-0x17e2*-0x1+-0x38e0],_0x70dbc6=_0x30c290[0x18e1+-0xa8a+-0xe56],_0x72bacd=_0x30c290[0xe*-0x173+-0x5fe*0x2+-0x4*-0x812],_0x80ab3f=_0x30c290[0x22ae+-0x4c9*0x7+-0x12b],_0x53c9e0=_0x30c290[0xa7b*0x2+-0x1*0xda3+-0x37*0x22],_0x582dd5=_0x30c290[-0x1e29+-0x54a+-0x2379*-0x1],_0x9fa9f2=_0x30c290[0xd2+-0x21f4+0x212a],_0x29519d=_0x30c290[0x1719+0x2*0xbf6+0x184*-0x1f],_0x275724=_0x30c290[-0xd*0x125+-0x127d*0x1+-0x1*-0x2168],_0x195b76=_0x30c290[0x217*-0x12+-0xfde+-0x3*-0x11d8],_0x371461=_0x30c290[0x1*-0x162b+-0x2594+0x3bcc],_0x6a0801=_0x30c290[0xf9a+0x166a+-0x56*0x71];let _0x1cbadf,_0x1e4d3d,_0x413b4a;for(let _0x598815=-0x1a2e+0x15ef*0x1+0x43f*0x1;_0x598815<_0x32abe4;_0x598815+=_0x279c71['numCompone'+'nts'])_0x1cbadf=_0x32d0ab[_0x598815],_0x1e4d3d=_0x32d0ab[_0x598815+(-0x162*0x13+-0xe5f+0x2*0x1453)],_0x413b4a=_0x32d0ab[_0x598815+(0x8f5*-0x2+0x2349*-0x1+-0x1*-0x3535)],_0x32d0ab[_0x598815]=_0x1cbadf*_0x27af44+_0x1e4d3d*_0x80ab3f+_0x413b4a*_0x9fa9f2+_0x195b76,_0x32d0ab[_0x598815+(0x301*0xa+0x25b*0x3+-0x251a)]=_0x1cbadf*_0x70dbc6+_0x1e4d3d*_0x53c9e0+_0x413b4a*_0x29519d+_0x371461,_0x32d0ab[_0x598815+(-0x4*0x6f3+-0x13f8+0x2fc6)]=_0x1cbadf*_0x72bacd+_0x1e4d3d*_0x582dd5+_0x413b4a*_0x275724+_0x6a0801;}else{if(_0x56c4f6===cs||_0x56c4f6===ci){zp['invertMat4'](_0x1cd9f1)['transpose']();const [_0x459f9e,_0x17b90f,_0x43fd28,_0x4a170d,_0x5d6559,_0x417a9,_0x5bf668,_0x3849bc,_0x387963]=zp['data'];let _0x471cc1,_0xf9e436,_0x37355a;for(let _0x3d81c2=0x17af+0x44a+-0x7*0x3ff;_0x3d81c2<_0x32abe4;_0x3d81c2+=_0x279c71['numCompone'+'nts'])_0x471cc1=_0x32d0ab[_0x3d81c2],_0xf9e436=_0x32d0ab[_0x3d81c2+(0x2e9+0x65d+-0x71*0x15)],_0x37355a=_0x32d0ab[_0x3d81c2+(-0xa*-0x14b+-0xa10+-0x2dc)],_0x32d0ab[_0x3d81c2]=_0x471cc1*_0x459f9e+_0xf9e436*_0x4a170d+_0x37355a*_0x5bf668,_0x32d0ab[_0x3d81c2+(0xaa6*-0x2+-0x1*0x387+-0x38c*-0x7)]=_0x471cc1*_0x17b90f+_0xf9e436*_0x5d6559+_0x37355a*_0x3849bc,_0x32d0ab[_0x3d81c2+(0x1*-0xd8d+0x5*0x8d+0xace)]=_0x471cc1*_0x43fd28+_0xf9e436*_0x417a9+_0x37355a*_0x387963;}}}}if(_0x43c448){_0x279c71=_0x192c22[ns];for(let _0x5a1b4c=0x208f+-0x1*0x132d+0x2*-0x6b1;_0x5a1b4c<_0x11ec49;_0x5a1b4c++)_0x279c71['buffer'][_0x279c71['count']++]=_0xbcbd1a;}if(_0x2bf509['primitive'][-0xbb6+0xf42+-0x38c]['indexed']){_0x378584=_0x2bf509['primitive'][-0x2af+0x2de*0x1+-0x2f]['base'],_0x1a5666=_0x2bf509['primitive'][-0x761+-0x784+0x4f7*0x3]['baseVertex']||-0x1*0x1f52+0x1*-0x88f+-0x3*-0xd4b,_0x3ea1bb=_0x2bf509['primitive'][0x43d*-0x1+0x116f+-0x6*0x233]['count'];const _0x40be57=_0x2bf509['indexBuffe'+'r'][0x17af+-0x1421*-0x1+0x2bd0*-0x1]['getFormat']();_0x44c0a7=new Bh[_0x40be57](_0x2bf509['indexBuffe'+'r'][0x2de+-0x38*-0x7c+-0x1dfe]['storage']);}else{_0x1a5666=-0x2235+-0x8b0+0x1*0x2ae5;const _0x223294=_0x2bf509['primitive'][-0x5*-0x4e5+-0x1632+-0xb*0x35]['type'];if(_0x223294===$r||_0x223294===cr){if(_0x2bf509['primitive'][0x97*-0x29+-0xbd7+0x57*0x6a]['count']===-0x15*0x1d+0x1693+0x11f*-0x12)_0x378584=0x60e+-0x638+0x2a,_0x3ea1bb=0x2*0xe55+-0x7ef*-0x3+-0x3471,_0x44c0a7=_0x223294===$r?Uw:Bw;else{_0x3ea1bb=-0x115*-0xb+0x1a1+-0xd88;continue;}}}for(let _0x1b1b66=0x4e7+-0x1*0x9c8+0x4e1*0x1;_0x1b1b66<_0x3ea1bb;_0x1b1b66++)_0x56c292[_0x1b1b66+_0x34fb3e]=_0x44c0a7[_0x378584+_0x1b1b66]+_0x1a5666+_0xcf31c1;_0x34fb3e+=_0x3ea1bb,_0xcf31c1+=_0x11ec49;}_0x2bf509=new Ge(this['device']);for(_0x56c4f6 in _0x192c22)_0x279c71=_0x192c22[_0x56c4f6],_0x2bf509['setVertexS'+'tream'](_0x56c4f6,_0x279c71['buffer'],_0x279c71['numCompone'+'nts'],void(0x26a1+-0x16d*0x1+0x94d*-0x4),_0x279c71['dataType'],_0x279c71['normalize']);_0x56c292['length']>-0x3*0x9f5+-0x23b4*-0x1+-0x5d5&&_0x2bf509['setIndices'](_0x56c292),_0x2bf509['update'](zs,!(-0x28*-0xce+0x1436+-0x1177*0x3)),_0x43c448&&(_0xbb35b=_0xbb35b['clone'](),_0xbb35b['update']());const _0x3ff767=new We(_0x2bf509,_0xbb35b,this['rootNode']);_0x3ff767['castShadow']=_0x498439['origMeshIn'+'stances'][-0x2b5*-0xd+-0x1*0x1621+-0x4*0x344]['castShadow'],_0x3ff767['parameters']=_0x498439['origMeshIn'+'stances'][0x1d23+-0x1ee3+0x40*0x7]['parameters'],_0x3ff767['layer']=_0x498439['origMeshIn'+'stances'][0x1*-0x5e3+-0xeff+0x14e2]['layer'],_0x3ff767['_shaderDef'+'s']=_0x498439['origMeshIn'+'stances'][0x918+0x11ca+-0x1ae2]['_shaderDef'+'s'],_0x3ff767['batching']=!(-0x821*0x3+-0xdc9*-0x1+0xa9a),_0x3ff767['cull']=_0x498439['origMeshIn'+'stances'][0xb86*-0x1+-0x8*0x167+0x16be]['cull'];const _0x29f99d=this['_batchGrou'+'ps'][_0xc1a82a];if(_0x29f99d&&_0x29f99d['_ui']&&(_0x3ff767['cull']=!(-0x180f+0x2b3*0x7+0x52b)),_0x43c448){const _0x4dc432=[];for(let _0x192c98=0x1a60+-0x6*0x1d+-0x19b2*0x1;_0x192c98<_0x498439['origMeshIn'+'stances']['length'];_0x192c98++)_0x4dc432['push'](_0x498439['origMeshIn'+'stances'][_0x192c98]['node']);_0x3ff767['skinInstan'+'ce']=new Rp(this['device'],_0x4dc432,this['rootNode']);}_0x3ff767['_updateAab'+'b']=!(0x18ce+-0x9dd+-0x1*0xef0),_0x3ff767['drawOrder']=_0x498439['origMeshIn'+'stances'][-0x17cb+-0x1ead*-0x1+0x2*-0x371]['drawOrder'],_0x3ff767['stencilFro'+'nt']=_0x498439['origMeshIn'+'stances'][0xb61*0x2+-0xf67+-0x75b]['stencilFro'+'nt'],_0x3ff767['stencilBac'+'k']=_0x498439['origMeshIn'+'stances'][-0x24b8+0x1*-0x789+0x2c41]['stencilBac'+'k'],_0x3ff767['flipFacesF'+'actor']=Sd(_0x498439['origMeshIn'+'stances'][0xd7*0x1f+0x81*-0x1+0x4c*-0x56]),_0x3ff767['castShadow']=_0x498439['origMeshIn'+'stances'][0x800*-0x3+-0x957*0x1+-0x3*-0xb1d]['castShadow'],_0x498439['meshInstan'+'ce']=_0x3ff767,_0x498439['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x427542,_0x498439;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>0x2*-0x9a3+0x172f*0x1+-0xd*0x4d&&this['generate'](this['_dirtyGrou'+'ps']);const _0x52d6cf=de();for(let _0xd45ab9=-0x26fb*-0x1+-0xc81+-0x1a7a;_0xd45ab9<this['_batchList']['length'];_0xd45ab9++)this['_batchList'][_0xd45ab9]['dynamic']&&this['_batchList'][_0xd45ab9]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x52d6cf;}['clone'](_0x63f8fa,_0x409918){const _0x1f366f=new Dp(_0x409918,_0x63f8fa['dynamic'],_0x63f8fa['batchGroup'+'Id']);this['_batchList']['push'](_0x1f366f);const _0x1f8e97=[];for(let _0x3c5b95=0x13ef+-0x207+-0x23d*0x8;_0x3c5b95<_0x409918['length'];_0x3c5b95++)_0x1f8e97['push'](_0x409918[_0x3c5b95]['node']);return _0x1f366f['meshInstan'+'ce']=new We(_0x63f8fa['meshInstan'+'ce']['mesh'],_0x63f8fa['meshInstan'+'ce']['material'],_0x63f8fa['meshInstan'+'ce']['node']),_0x1f366f['meshInstan'+'ce']['_updateAab'+'b']=!(0x71e*0x2+0xd9f+-0xded*0x2),_0x1f366f['meshInstan'+'ce']['parameters']=_0x409918[-0x2b7*0x5+-0xc54+-0x1*-0x19e7]['parameters'],_0x1f366f['meshInstan'+'ce']['cull']=_0x409918[-0x25ba+-0x190*0x11+0x404a*0x1]['cull'],_0x1f366f['meshInstan'+'ce']['layer']=_0x409918[0x7a2+0x1*0x47c+0x3*-0x40a]['layer'],_0x63f8fa['dynamic']&&(_0x1f366f['meshInstan'+'ce']['skinInstan'+'ce']=new Rp(this['device'],_0x1f8e97,this['rootNode'])),_0x1f366f['meshInstan'+'ce']['castShadow']=_0x63f8fa['meshInstan'+'ce']['castShadow'],_0x1f366f;}['destroyBat'+'ch'](_0x47c323){_0x47c323['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x47c323['batchGroup'+'Id']]['layers']);}}const Gp='uSceneColo'+'rMap';class Gw extends fs{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x3e8011,_0x282656,_0x27afe4){if((_0x3e8011==null?void(0x98a+-0x1fbd+0x1633):_0x3e8011['colorBuffe'+'r']['format'])!==_0x27afe4)return!(0x18d*-0x9+0x1707+-0x36*0x2b);const _0x13eda6=(_0x282656==null?void(0x8eb*-0x2+0xc8*0xa+0xa06):_0x282656['width'])||this['device']['width'],_0x206715=(_0x282656==null?void(0x1*0x21e2+0x1*-0x1f3f+-0x2a3):_0x282656['height'])||this['device']['height'];return!_0x3e8011||_0x13eda6!==_0x3e8011['width']||_0x206715!==_0x3e8011['height'];}['allocateRe'+'nderTarget'](_0x31e7d7,_0x382e56,_0x3ed2dd,_0x574fcd){const _0x3a3740=new _e(_0x3ed2dd,{'name':Gp,'format':_0x574fcd,'width':_0x382e56?_0x382e56['colorBuffe'+'r']['width']:_0x3ed2dd['width'],'height':_0x382e56?_0x382e56['colorBuffe'+'r']['height']:_0x3ed2dd['height'],'mipmaps':!(0x142f+0x8*-0x4bd+-0x11b9*-0x1),'minFilter':ea,'magFilter':_t,'addressU':ue,'addressV':ue});return _0x31e7d7?(_0x31e7d7['destroyFra'+'meBuffers'](),_0x31e7d7['_colorBuff'+'er']=_0x3a3740,_0x31e7d7['_colorBuff'+'ers']=[_0x3a3740]):_0x31e7d7=new vt({'name':'ColorGrabR'+'T','colorBuffer':_0x3a3740,'depth':!(0x2603+0x4*-0x402+0x3a*-0x61),'stencil':!(0x24*-0x83+-0x3e2+-0x164f*-0x1),'autoResolve':!(0x18f5*0x1+-0x108b+-0x869)}),_0x31e7d7;}['releaseRen'+'derTarget'](_0x45756c){_0x45756c&&(_0x45756c['destroyTex'+'tureBuffer'+'s'](),_0x45756c['destroy']());}['frameUpdat'+'e'](){const _0x5c9452=this['device'],_0x1b9ee3=this['source'],_0x43ba0f=(_0x1b9ee3==null?void(-0x13*0x78+-0xff0+0x18d8):_0x1b9ee3['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x1b9ee3==null?void(0x471*0x8+0x48c+-0x2814):_0x1b9ee3['colorBuffe'+'r'],_0x43ba0f)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x1b9ee3,_0x5c9452,_0x43ba0f));const _0x1a1c5c=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x5c9452['scope']['resolve'](Gp)['setValue'](_0x1a1c5c);}['execute'](){const _0x48e0ff=this['device'];Q['pushGpuMar'+'ker'](_0x48e0ff,'GRAB-COLOR');const _0x2a14af=this['source'],_0x4baa53=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x48e0ff['isWebGPU']?(_0x48e0ff['copyRender'+'Target'](_0x2a14af,this['colorRende'+'rTarget'],!(0xd74*-0x1+-0xc71+0x19e5),!(-0x22e5+-0x1*0x3ef+0x26d5)),_0x48e0ff['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x48e0ff['copyRender'+'Target'](_0x2a14af,this['colorRende'+'rTarget'],!(0xb55+-0x1465+0x910),!(0x1f32+0x88d+-0x1*0x27be)),_0x48e0ff['activeText'+'ure'](_0x48e0ff['maxCombine'+'dTextures']-(-0x1a1e+-0x1*-0x8fa+-0xb*-0x18f)),_0x48e0ff['bindTextur'+'e'](_0x4baa53),_0x48e0ff['gl']['generateMi'+'pmap'](_0x4baa53['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x48e0ff);}}const Hp='uSceneDept'+'hMap';class Hw extends fs{constructor(_0x385973,_0x487cbb){super(_0x385973),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x487cbb;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x3b0723,_0x2d3de7){const _0x15c5ce=(_0x2d3de7==null?void(0x10ed*-0x2+-0x16*0x108+0x388a):_0x2d3de7['width'])||this['device']['width'],_0x238bc7=(_0x2d3de7==null?void(-0x21f5*-0x1+0x76d*-0x2+0x1*-0x131b):_0x2d3de7['height'])||this['device']['height'];return!_0x3b0723||_0x15c5ce!==_0x3b0723['width']||_0x238bc7!==_0x3b0723['height'];}['allocateRe'+'nderTarget'](_0x380430,_0x590f66,_0x4b810d,_0x3231c7,_0x3c338b){const _0xdd05ee=new _e(_0x4b810d,{'name':Hp,'format':_0x3231c7,'width':_0x590f66?_0x590f66['colorBuffe'+'r']['width']:_0x4b810d['width'],'height':_0x590f66?_0x590f66['colorBuffe'+'r']['height']:_0x4b810d['height'],'mipmaps':!(-0x196e+-0x2*0x189+0x1c81),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x380430?(_0x380430['destroyFra'+'meBuffers'](),_0x3c338b?_0x380430['_depthBuff'+'er']=_0xdd05ee:(_0x380430['_colorBuff'+'er']=_0xdd05ee,_0x380430['_colorBuff'+'ers']=[_0xdd05ee])):_0x380430=new vt({'name':'DepthGrabR'+'T','colorBuffer':_0x3c338b?null:_0xdd05ee,'depthBuffer':_0x3c338b?_0xdd05ee:null,'depth':!_0x3c338b,'stencil':_0x4b810d['supportsSt'+'encil'],'autoResolve':!(-0x1f22*0x1+0x1*-0x1e0e+-0x41*-0xf1)}),_0x380430;}['releaseRen'+'derTarget'](_0x3b3400){_0x3b3400&&(_0x3b3400['destroyTex'+'tureBuffer'+'s'](),_0x3b3400['destroy']());}['before'](){var _0x4fe334,_0x36d4af;const _0x13ca26=this['camera'],_0x5999e3=this['device'],_0x1c2186=(_0x13ca26==null?void(0x222+0x1*0x714+-0x936):_0x13ca26['renderTarg'+'et'])??_0x5999e3['backBuffer'];let _0x1145dd=!(0x5*-0xd5+-0x15*-0x101+-0x10ec),_0x432fad=_0x1c2186['stencil']?Cc:ki;_0x5999e3['isWebGPU']&&_0x1c2186['samples']>0x10c7+-0x138b+0x2c5*0x1&&(_0x432fad=Hi,_0x1145dd=!(-0x1f34+-0x1df7*-0x1+0x13e));const _0x4161=((_0x4fe334=_0x13ca26['renderTarg'+'et'])==null?void(0x483+-0x1963+0x4*0x538):_0x4fe334['depthBuffe'+'r'])??((_0x36d4af=_0x13ca26['renderTarg'+'et'])==null?void(0xc4*0x25+0x1*0x151f+-0x3173*0x1):_0x36d4af['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x4161)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x13ca26['renderTarg'+'et'],_0x5999e3,_0x432fad,_0x1145dd));const _0x40eb03=_0x1145dd?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x5999e3['scope']['resolve'](Hp)['setValue'](_0x40eb03);}['execute'](){const _0x1a0ce8=this['device'];if(Q['pushGpuMar'+'ker'](_0x1a0ce8,'GRAB-DEPTH'),_0x1a0ce8['isWebGL2']&&_0x1a0ce8['renderTarg'+'et']['samples']>-0x3+0x6eb+-0x6e7){const _0x1b6cdc=_0x1a0ce8['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x32b323=this['depthRende'+'rTarget'];_0x1a0ce8['renderTarg'+'et']=_0x32b323,_0x1a0ce8['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x1a0ce8,_0x1b6cdc,_0x32b323['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x1a0ce8['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x1a0ce8['copyRender'+'Target'](_0x1a0ce8['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x5*-0x5c7+0x226+-0x1e9*-0xe),!(-0x1596+-0x1a65+0x2ffb*0x1));Q['popGpuMark'+'er'](_0x1a0ce8);}}class Cy{constructor(){h(this,'_gammaCorr'+'ection',uh),h(this,'_toneMappi'+'ng',Tm),h(this,'_srgbRende'+'rTarget',!(0x26c9*0x1+0x1c63+-0x432b)),h(this,'_ssaoEnabl'+'ed',!(-0xd2b+0x18a5+-0xb79)),h(this,'_fog',On),h(this,'_sceneDept'+'hMapLinear',!(0xf71*-0x2+0x2e*0x5c+0xe5b)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x3*0x865+-0x2047*-0x1+-0x718));}get['hash'](){if(this['_hash']===void(0x9ad+-0x23a3*-0x1+-0x91*0x50)){const _0x68824b=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=ti(_0x68824b);}return this['_hash'];}get['defines'](){const _0x490a98=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(0x1435+-0xb*0x2af+0x951),_0x490a98['clear'](),this['_sceneDept'+'hMapLinear']&&_0x490a98['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0x45+-0xa4a+0xa8f*0x1)),_0x490a98['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x490a98['set']('TONEMAP',my[this['_toneMappi'+'ng']]),_0x490a98['set']('GAMMA',JT[this['shaderOutp'+'utGamma']])),_0x490a98;}['markDirty'](){this['_hash']=void(-0x39f+0x1b3a+-0x1*0x179b),this['_definesDi'+'rty']=!(-0x3d*-0x86+-0x17*-0x13f+-0x3c97);}set['fog'](_0x40bea7){this['_fog']!==_0x40bea7&&(this['_fog']=_0x40bea7,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x2a3b0d){this['_ssaoEnabl'+'ed']!==_0x2a3b0d&&(this['_ssaoEnabl'+'ed']=_0x2a3b0d,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x59ff01){this['_gammaCorr'+'ectionAssi'+'gned']=!(-0x1e4c+0x3*-0x29f+0x2629*0x1),this['_gammaCorr'+'ection']!==_0x59ff01&&(this['_gammaCorr'+'ection']=_0x59ff01,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x4c18c5){this['_toneMappi'+'ng']!==_0x4c18c5&&(this['_toneMappi'+'ng']=_0x4c18c5,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x1965cd){this['_srgbRende'+'rTarget']!==_0x1965cd&&(this['_srgbRende'+'rTarget']=_0x1965cd,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x3c4bc8){this['_sceneDept'+'hMapLinear']!==_0x3c4bc8&&(this['_sceneDept'+'hMapLinear']=_0x3c4bc8,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===uh&&!this['_srgbRende'+'rTarget']?uh:ol;}}const ya=new I(),Gn=new I(),Wp=new I(),$p=new te(),Ww=[new I(),new I(),new I(),new I(),new I(),new I(),new I(),new I()];class dl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new Cy()),h(this,'renderPass'+'es',[]),h(this,'jitter',0xd6*-0x18+-0x150b+0x291b),(this['_aspectRat'+'io']=(0xe1*0x11+0x2*-0x196+-0xbb5)/(0x1bbc+-0x529+-0x168a),this['_aspectRat'+'ioMode']=Im,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0x65*-0x8+-0x24be+-0x3*-0xb32+0.75,-0xb5*0xd+-0x1bc2+0x24f3+0.75,0x3*0xaa9+0x53*-0x4d+-0x704+0.75,-0x7*0x56d+-0x1230+-0x1*-0x382c),this['_clearColo'+'rBuffer']=!(-0x89e*0x1+-0x86+0x27*0x3c),this['_clearDept'+'h']=-0x1bba+0x1c19+-0x2*0x2f,this['_clearDept'+'hBuffer']=!(0x1d*0xc7+-0x3c8*0x6+0x25),this['_clearSten'+'cil']=0x133e+-0x1bd4+-0x896*-0x1,this['_clearSten'+'cilBuffer']=!(0x1*0xb65+0x255*0xb+-0x2*0x1286),this['_cullFaces']=!(-0xc1b+-0x223f*-0x1+0x34*-0x6d),this['_farClip']=0x17b7+0x142c+-0x27fb,this['_flipFaces']=!(-0x1b5*-0x4+-0x44f*-0x4+-0x3*0x805),this['_fov']=-0x17b4+-0x2042+0x3823,this['_frustumCu'+'lling']=!(-0x15*-0xd1+0x2*0x34c+-0x67*0x3b),this['_horizonta'+'lFov']=!(0x1d83+-0x17*-0x49+-0x2411),this['_layers']=[Wi,os,_m,nl,gm],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=0xced+0xe7d+-0x1b6a+0.1,this['_node']=null,this['_orthoHeig'+'ht']=0xaa9+-0x41b*0x3+-0x1b2*-0x1,this['_projectio'+'n']=Ks,this['_rect']=new ae(-0x760+0x28*0xd2+-0x1970,0x16f6+-0x20be+-0x4e4*-0x2,-0x89*0x1+0x1*-0x208b+0x2115,0x1f7d*-0x1+0x18a3+0x27*0x2d),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new ae(0x130b+0x5a4*-0x4+-0x1*-0x385,0x226f+-0x34e*-0x6+0x3643*-0x1,-0x18c3+-0x6c3+-0x1*-0x1f87,0x2208*-0x1+0x3d7*-0x1+0x2*0x12f0),this['_scissorRe'+'ctClear']=!(-0x8*-0x152+0x2*0x4f4+-0x1477),this['_aperture']=0x33*-0x41+-0x46c+0x1*0x116f,this['_shutter']=(0x2639*-0x1+-0x2133+0x1*0x476d)/(-0x148d+-0x66+0x18db),this['_sensitivi'+'ty']=-0x1*-0x1202+-0xed5+-0x11*-0xb,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(0x19d*0xb+0xd1e+-0x1*0x1edd),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(0xa0f+0x3*-0x552+-0x5e7*-0x1),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(-0x2687+-0x7d7+0x946*0x5),this['_shaderMat'+'ricesVersi'+'on']=0x22af+-0x8e*0x3b+0xa7*-0x3,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[0xb*-0x2ce+-0x2452+-0x3*-0x1664,-0x1*0x10da+-0x1*-0x5bf+0xb1b,-0x5*-0x483+0x580+0x1c0f*-0x1,-0x1719+-0x785+0x1e9e],this['frustum']=new M0(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x188d4f,_0x3fde5f;(_0x188d4f=this['renderPass'+'ColorGrab'])==null||_0x188d4f['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x3fde5f=this['renderPass'+'DepthGrab'])==null||_0x3fde5f['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=-0x146*0x8+-0x2*-0x37+0x4e1*0x2;}['_storeShad'+'erMatrices'](_0x284eb3,_0x1f7dfd,_0x4d7127,_0x3d90e4){this['_shaderMat'+'ricesVersi'+'on']!==_0x3d90e4&&(this['_shaderMat'+'ricesVersi'+'on']=_0x3d90e4,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x284eb3),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x284eb3),this['_viewProjI'+'nverse']['invert'](_0x284eb3),this['_jitters'][0x1*-0x1ae3+0x8*-0x466+0x3e15]=this['_jitters'][-0x1*0x21dd+-0x2382+-0x19d*-0x2b],this['_jitters'][0x1fc7+-0x573+0x1a51*-0x1]=this['_jitters'][0xb*0x261+0x8*0x436+0xa3*-0x5e],this['_jitters'][0x32b*0x1+0x6cb+-0x9f6]=_0x1f7dfd,this['_jitters'][-0x1b7d+0x1*-0x147f+0x2ffd*0x1]=_0x4d7127);}get['fullSizeCl'+'earRect'](){const _0x18d7b2=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x18d7b2['x']===-0xb*-0x71+-0xf4+-0x6f*0x9&&_0x18d7b2['y']===-0x1333+-0x1*0x71e+0x1a51&&_0x18d7b2['z']===0x16fc+-0xb83+-0xb78&&_0x18d7b2['w']===-0x5fb*0x5+-0xc5d+-0x3*-0xe17;}set['aspectRati'+'o'](_0x3eea6e){this['_aspectRat'+'io']!==_0x3eea6e&&(this['_aspectRat'+'io']=_0x3eea6e,this['_projMatDi'+'rty']=!(-0x1442+-0x1b0b*-0x1+-0x6c9));}get['aspectRati'+'o'](){var _0xcd910d;return(_0xcd910d=this['xr'])!=null&&_0xcd910d['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x1302f5){this['_aspectRat'+'ioMode']!==_0x1302f5&&(this['_aspectRat'+'ioMode']=_0x1302f5,this['_projMatDi'+'rty']=!(-0xf*0x15e+-0x3*0xa2d+0x3309));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x5d8b6d){this['_calculate'+'Projection']=_0x5d8b6d,this['_projMatDi'+'rty']=!(0x21f7+-0x1cf0*-0x1+-0x3ee7);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x446749){this['_calculate'+'Transform']=_0x446749;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x4cf156){this['_clearColo'+'r']['copy'](_0x4cf156);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0xb3914a){this['_clearColo'+'rBuffer']=_0xb3914a;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x59c837){this['_clearDept'+'h']=_0x59c837;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x1812dc){this['_clearDept'+'hBuffer']=_0x1812dc;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x22daed){this['_clearSten'+'cil']=_0x22daed;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x40db31){this['_clearSten'+'cilBuffer']=_0x40db31;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x240abd){this['_cullFaces']=_0x240abd;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x2c9b7b){this['_farClip']!==_0x2c9b7b&&(this['_farClip']=_0x2c9b7b,this['_projMatDi'+'rty']=!(-0xaca+-0x6ef*-0x1+0x3db));}get['farClip'](){var _0xb98c34;return(_0xb98c34=this['xr'])!=null&&_0xb98c34['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x4c279d){this['_flipFaces']=_0x4c279d;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x59aa2b){this['_fov']!==_0x59aa2b&&(this['_fov']=_0x59aa2b,this['_projMatDi'+'rty']=!(0x87f+-0xac9+0x24a));}get['fov'](){var _0x25ecbd;return(_0x25ecbd=this['xr'])!=null&&_0x25ecbd['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x44dc1c){this['_frustumCu'+'lling']=_0x44dc1c;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x2667a1){this['_horizonta'+'lFov']!==_0x2667a1&&(this['_horizonta'+'lFov']=_0x2667a1,this['_projMatDi'+'rty']=!(-0x2310+-0x6e*-0x38+-0x8*-0x160));}get['horizontal'+'Fov'](){var _0x53adfb;return(_0x53adfb=this['xr'])!=null&&_0x53adfb['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x8a8ddc){this['_layers']=_0x8a8ddc['slice'](0x21f8*0x1+0xfae+-0x31a6),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x72b176){this['_nearClip']!==_0x72b176&&(this['_nearClip']=_0x72b176,this['_projMatDi'+'rty']=!(-0x1498+0x1b8f+-0x1*0x6f7));}get['nearClip'](){var _0x398230;return(_0x398230=this['xr'])!=null&&_0x398230['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x5cc4b1){this['_node']=_0x5cc4b1;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x2e3eb2){this['_orthoHeig'+'ht']!==_0x2e3eb2&&(this['_orthoHeig'+'ht']=_0x2e3eb2,this['_projMatDi'+'rty']=!(-0x1501+0x1*0x2707+-0x903*0x2));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x273e6f){this['_projectio'+'n']!==_0x273e6f&&(this['_projectio'+'n']=_0x273e6f,this['_projMatDi'+'rty']=!(-0x10f7+-0x3b6+0x14ad));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x414be6){this['_rect']['copy'](_0x414be6);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x3816de){this['_renderTar'+'get']=_0x3816de;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x2302de){this['_scissorRe'+'ct']['copy'](_0x2302de);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x1f8e1e=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x1f8e1e)['invert'](),this['_viewMatDi'+'rty']=!(0x176a+-0x18a5+0x13c);}return this['_viewMat'];}set['aperture'](_0x2f32a1){this['_aperture']=_0x2f32a1;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x5caf3d){this['_sensitivi'+'ty']=_0x5caf3d;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x43e167){this['_shutter']=_0x43e167;}get['shutter'](){return this['_shutter'];}set['xr'](_0x57dacc){this['_xr']!==_0x57dacc&&(this['_xr']=_0x57dacc,this['_projMatDi'+'rty']=!(-0x1118+0xdd+0x103b));}get['xr'](){return this['_xr'];}['clone'](){return new dl()['copy'](this);}['copy'](_0x1ee60a){return this['_aspectRat'+'io']=_0x1ee60a['_aspectRat'+'io'],this['_farClip']=_0x1ee60a['_farClip'],this['_fov']=_0x1ee60a['_fov'],this['_horizonta'+'lFov']=_0x1ee60a['_horizonta'+'lFov'],this['_nearClip']=_0x1ee60a['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x1ee60a['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x1ee60a['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x1ee60a['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x1ee60a['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x1ee60a['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x1ee60a['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x1ee60a['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x1ee60a['calculateT'+'ransform'],this['clearColor']=_0x1ee60a['clearColor'],this['clearColor'+'Buffer']=_0x1ee60a['clearColor'+'Buffer'],this['clearDepth']=_0x1ee60a['clearDepth'],this['clearDepth'+'Buffer']=_0x1ee60a['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x1ee60a['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x1ee60a['clearStenc'+'ilBuffer'],this['cullFaces']=_0x1ee60a['cullFaces'],this['flipFaces']=_0x1ee60a['flipFaces'],this['frustumCul'+'ling']=_0x1ee60a['frustumCul'+'ling'],this['layers']=_0x1ee60a['layers'],this['orthoHeigh'+'t']=_0x1ee60a['orthoHeigh'+'t'],this['projection']=_0x1ee60a['projection'],this['rect']=_0x1ee60a['rect'],this['renderTarg'+'et']=_0x1ee60a['renderTarg'+'et'],this['scissorRec'+'t']=_0x1ee60a['scissorRec'+'t'],this['aperture']=_0x1ee60a['aperture'],this['shutter']=_0x1ee60a['shutter'],this['sensitivit'+'y']=_0x1ee60a['sensitivit'+'y'],this['shaderPass'+'Info']=_0x1ee60a['shaderPass'+'Info'],this['jitter']=_0x1ee60a['jitter'],this['_projMatDi'+'rty']=!(0x8b4+0x146+0x1*-0x9fa),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x14a365,_0x17ed58){var _0x13397c;_0x17ed58?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new Gw(_0x14a365)):((_0x13397c=this['renderPass'+'ColorGrab'])==null||_0x13397c['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x10abef,_0x1de43f,_0x10db3a){var _0x4cd22a;_0x10db3a?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new Hw(_0x10abef,this)):((_0x4cd22a=this['renderPass'+'DepthGrab'])==null||_0x4cd22a['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(0x33d+-0x2c*-0xb2+-0x21d4));}['worldToScr'+'een'](_0x2de625,_0x469848,_0x582439,_0x5d9856=new I()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x2de625,_0x5d9856);const _0x36471e=this['_viewProjM'+'at']['data'],_0x5a52da=_0x2de625['x']*_0x36471e[-0x5a*-0x1b+0xc1*-0x1+-0x8ba*0x1]+_0x2de625['y']*_0x36471e[-0x9bb*-0x1+0x1*0x205a+-0x2a0e*0x1]+_0x2de625['z']*_0x36471e[-0x882+0xb0e+-0x1*0x281]+(0x2083+-0x17f3+-0x88f)*_0x36471e[0x2*0xdad+-0xe52+-0x51*0x29];_0x5d9856['x']=(_0x5d9856['x']/_0x5a52da+(-0x26b*0xd+-0x1836+0x1bd3*0x2))*(-0x200e+-0x1c1+0x5*0x6c3+0.5),_0x5d9856['y']=(0x72b+-0xb*-0x49+-0x3*0x36f-_0x5d9856['y']/_0x5a52da)*(0x218b+-0x1040+-0x114b+0.5);const {x:_0xa48052,y:_0x5c685b,z:_0x26e213,w:_0x5def54}=this['_rect'];return _0x5d9856['x']=_0x5d9856['x']*_0x26e213*_0x469848+_0xa48052*_0x469848,_0x5d9856['y']=_0x5d9856['y']*_0x5def54*_0x582439+(0x244a+0x128e+-0x36d7-_0x5c685b-_0x5def54)*_0x582439,_0x5d9856;}['screenToWo'+'rld'](_0x2dc17b,_0x4ac08c,_0x3e6921,_0x464d87,_0x11c070,_0xc75342=new I()){const {x:_0x458d4a,y:_0xd4918b,z:_0x6264c1,w:_0x4fd25c}=this['_rect'],_0x36fb05=this['farClip']-this['nearClip'];if(ya['set']((_0x2dc17b-_0x458d4a*_0x464d87)/(_0x6264c1*_0x464d87),-0x397+-0x25b*-0x4+-0x5d4-(_0x4ac08c-(-0x94*0x36+-0x1d2a+0x3c63-_0xd4918b-_0x4fd25c)*_0x11c070)/(_0x4fd25c*_0x11c070),_0x3e6921/_0x36fb05),ya['mulScalar'](0x1*0x99b+0xc2*0x16+-0x19*0x10d),ya['sub'](I['ONE']),this['_projectio'+'n']===Ks){te['_getPerspe'+'ctiveHalfS'+'ize'](Gn,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),Gn['x']*=ya['x'],Gn['y']*=ya['y'];const _0x556b97=this['_node']['getWorldTr'+'ansform']();Gn['z']=-this['nearClip'],_0x556b97['transformP'+'oint'](Gn,Wp);const _0x27cc35=this['_node']['getPositio'+'n']();_0xc75342['sub2'](Wp,_0x27cc35),_0xc75342['normalize'](),_0xc75342['mulScalar'](_0x3e6921),_0xc75342['add'](_0x27cc35);}else this['_updateVie'+'wProjMat'](),$p['copy'](this['_viewProjM'+'at'])['invert'](),$p['transformP'+'oint'](ya,_0xc75342);return _0xc75342;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===Ks)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x522feb=this['_orthoHeig'+'ht'],_0x17ea0a=_0x522feb*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x17ea0a,_0x17ea0a,-_0x522feb,_0x522feb,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(-0x21*0x6d+-0xf3+0xf01*0x1);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x33e58d=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x1744+-0x1*0x9a+0x1842)/this['_sensitivi'+'ty']);return(0x1*-0x25be+-0x1070+0x362f)/(Math['pow'](-0x2417+-0x84c+0x2c65,_0x33e58d)*(-0x10f7+0x4*-0x4f3+-0x2d4*-0xd+0.19999999999999996));}['getScreenS'+'ize'](_0x5aa7be){if(this['_projectio'+'n']===Ks){const _0x342ec0=this['_node']['getPositio'+'n']()['distance'](_0x5aa7be['center']);if(_0x342ec0<_0x5aa7be['radius'])return 0x664+-0x5*0x712+-0x1*-0x1cf7;const _0x47ffb6=Math['asin'](_0x5aa7be['radius']/_0x342ec0),_0x3cb8f9=Math['tan'](_0x47ffb6),_0x96ec92=Math['tan'](this['fov']/(0x25*0x8b+-0x73b+-0x46*0x2f)*Y['DEG_TO_RAD']);return Math['min'](_0x3cb8f9/_0x96ec92,-0x2291*0x1+0x135d+0xf35);}return Y['clamp'](_0x5aa7be['radius']/this['_orthoHeig'+'ht'],0x263b+-0x1cda*0x1+-0x961,0x1*-0x1eaa+-0x15e2+0x348d);}['getFrustum'+'Corners'](_0x2a5df9=this['nearClip'],_0x3cd712=this['farClip']){const _0xa3a345=this['fov']*Math['PI']/(0xf*0x171+-0x4cd*-0x7+-0x3686);let _0x3b3fce,_0x2d6540;this['projection']===Ks?this['horizontal'+'Fov']?(_0x3b3fce=_0x2a5df9*Math['tan'](_0xa3a345/(0x1dc0+0x13f7+-0x31b5)),_0x2d6540=_0x3b3fce/this['aspectRati'+'o']):(_0x2d6540=_0x2a5df9*Math['tan'](_0xa3a345/(-0x142*-0x11+0x13ff*0x1+-0x1*0x295f)),_0x3b3fce=_0x2d6540*this['aspectRati'+'o']):(_0x2d6540=this['_orthoHeig'+'ht'],_0x3b3fce=_0x2d6540*this['aspectRati'+'o']);const _0x17466d=Ww;return _0x17466d[-0x3c4*-0x4+-0x8b4+0xb*-0x94]['x']=_0x3b3fce,_0x17466d[-0x14b3*0x1+-0x6f3+0x1ba6]['y']=-_0x2d6540,_0x17466d[-0x2dd*0xa+0x7df+0x1*0x14c3]['z']=-_0x2a5df9,_0x17466d[-0xb*0x2db+-0x69*0x19+0x29ab]['x']=_0x3b3fce,_0x17466d[0x1133*-0x1+0x8e*-0x31+0x2c62]['y']=_0x2d6540,_0x17466d[0x8bf+0x48b+-0xd49]['z']=-_0x2a5df9,_0x17466d[-0x7eb+-0x1037*-0x1+-0x2*0x425]['x']=-_0x3b3fce,_0x17466d[-0x4*0x559+0x1be8+0x62*-0x11]['y']=_0x2d6540,_0x17466d[-0x1ee8+0x1029*0x1+0xec1]['z']=-_0x2a5df9,_0x17466d[0x1*-0xfc3+-0xe*-0xd1+0x458]['x']=-_0x3b3fce,_0x17466d[0x11de*-0x1+-0x4ea+0x16cb]['y']=-_0x2d6540,_0x17466d[0xbd7+0x15b2+0x4ca*-0x7]['z']=-_0x2a5df9,this['_projectio'+'n']===Ks&&(this['horizontal'+'Fov']?(_0x3b3fce=_0x3cd712*Math['tan'](_0xa3a345/(-0xfa*0x28+0x19e9+0xd29)),_0x2d6540=_0x3b3fce/this['aspectRati'+'o']):(_0x2d6540=_0x3cd712*Math['tan'](_0xa3a345/(0x1*0x2133+0x92*0x27+-0x376f)),_0x3b3fce=_0x2d6540*this['aspectRati'+'o'])),_0x17466d[-0x1*-0x1acb+0x225d+-0xd*0x4b4]['x']=_0x3b3fce,_0x17466d[-0x2704+-0x4*0x266+0x30a0]['y']=-_0x2d6540,_0x17466d[0x18a*-0x4+-0x242f+0x2a5b]['z']=-_0x3cd712,_0x17466d[0x2*-0x71f+0x1f4d+0x6*-0x2d7]['x']=_0x3b3fce,_0x17466d[-0x135a+-0xda+0x1439]['y']=_0x2d6540,_0x17466d[-0x10d5+0x121d+0x13*-0x11]['z']=-_0x3cd712,_0x17466d[0x25c6*-0x1+-0x2c9*-0xc+0x460]['x']=-_0x3b3fce,_0x17466d[-0x1835+0xa54+0xde7]['y']=_0x2d6540,_0x17466d[0x25*0x44+0x14*0x10d+0x107*-0x1e]['z']=-_0x3cd712,_0x17466d[-0x1b64*0x1+0x3ce*0x1+0x179d]['x']=-_0x3b3fce,_0x17466d[0x1fee+-0x17f*-0x12+-0x3ad5]['y']=-_0x2d6540,_0x17466d[-0x16eb+0xe89+0x869*0x1]['z']=-_0x3cd712,_0x17466d;}['setXrPrope'+'rties'](_0x336848){Object['assign'](this['_xrPropert'+'ies'],_0x336848),this['_projMatDi'+'rty']=!(-0x1bbb+-0x1*-0xfb5+0xc06);}}const Xp=new te(),qp=new te(),jp=new te(),ir=class ir{static['create'](_0x21f15a,_0x1db4fb,_0x2a682b){const _0x351672=new dl();switch(_0x351672['node']=new He(_0x21f15a),_0x351672['aspectRati'+'o']=0x790+0x84f+-0xfde,_0x351672['aspectRati'+'oMode']=Mf,_0x351672['_scissorRe'+'ctClear']=!(0x3a*0x2f+0x260d+0x30b3*-0x1),_0x1db4fb){case Ye:_0x351672['node']['setRotatio'+'n'](ir['pointLight'+'Rotations'][_0x2a682b]),_0x351672['fov']=-0x16bf*0x1+-0x179c+0x2eb5,_0x351672['projection']=Ks;break;case Ke:_0x351672['projection']=Ks;break;case ve:_0x351672['projection']=hn;break;}return _0x351672;}static['evalSpotCo'+'okieMatrix'](_0x5b55df){let _0x500d6b=ir['_spotCooki'+'eCamera'];_0x500d6b||(_0x500d6b=ir['create']('SpotCookie'+'Camera',Ke),ir['_spotCooki'+'eCamera']=_0x500d6b),_0x500d6b['fov']=_0x5b55df['_outerCone'+'Angle']*(0xa*-0x1bb+-0x1*0x3fb+0x154b);const _0x11b295=_0x500d6b['_node'];_0x11b295['setPositio'+'n'](_0x5b55df['_node']['getPositio'+'n']()),_0x11b295['setRotatio'+'n'](_0x5b55df['_node']['getRotatio'+'n']()),_0x11b295['rotateLoca'+'l'](-(-0xf*0x107+-0x1cc6+0xd*0x36d),0x1401+0x37*0x60+-0x1*0x28a1,-0x6fd+-0x1367+0x1a64),Xp['setTRS'](_0x11b295['getPositio'+'n'](),_0x11b295['getRotatio'+'n'](),I['ONE'])['invert'](),qp['mul2'](_0x500d6b['projection'+'Matrix'],Xp);const _0x4a2d9f=_0x5b55df['cookieMatr'+'ix'],_0x48a9c2=_0x5b55df['atlasViewp'+'ort'];return jp['setViewpor'+'t'](_0x48a9c2['x'],_0x48a9c2['y'],_0x48a9c2['z'],_0x48a9c2['w']),_0x4a2d9f['mul2'](jp,qp),_0x4a2d9f;}};h(ir,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](0x2*-0x3d0+0x115c+-0x9bc,0x11c+-0x2*0xc09+-0x1*-0x1750,0x96*-0x37+-0x17ea+0x38d8),new le()['setFromEul'+'erAngles'](0x2005+-0x6*0x280+-0x1105,-(-0x1*-0x1f4d+-0x43*-0x3d+-0x2eea),-0x666+-0xbf*0x29+-0x25b1*-0x1),new le()['setFromEul'+'erAngles'](-0x7a*-0xb+-0x34e+-0x196,0x3*-0x1e7+-0x416+0x9cb,0x727+-0x114+0x613*-0x1),new le()['setFromEul'+'erAngles'](-(-0x1a66+-0x8*-0x43b+-0x718),-0x1286+-0x1cb5+0x71*0x6b,0x1e1f+-0x215c+0x1*0x33d),new le()['setFromEul'+'erAngles'](0x5e5+-0x2408+0x1*0x1e23,-0x1*0x25d3+0x52*0xd+0x13*0x1cf,0x3db*0x9+0x16cf+-0x38ce),new le()['setFromEul'+'erAngles'](-0x2*-0x101+-0x1b65+0x1963*0x1,0xf0e+0x421*-0x9+-0x1*-0x161b,0x6f*-0x22+0x1*-0x2357+0x32c9)]),h(ir,'_spotCooki'+'eCamera',null);let Pn=ir;const us=new I(),yr=new Float32Array(0xa0e+-0x56e+-0x49a),$w=new I(-(-0x2*-0xe8+0x131*0x5+-0x33*0x27+0.5),-0x1837*-0x1+0x11a7+-0x2*0x14ef,0x12dd+-0x2028+0x53*0x29),Xw=new I(-0xb+0x21b9+-0x21ae,-0x2414+-0x5a+0x246e,-0x166d*-0x1+0x1cd7+-0x3344+0.5),rt={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},qw={'LIGHTSHAPE_PUNCTUAL':Vs+'u','LIGHTSHAPE_RECT':ry+'u','LIGHTSHAPE_DISK':ay+'u','LIGHTSHAPE_SPHERE':ny+'u','LIGHT_COLOR_DIVIDER':fh+'.0'},Yp=(_0x25d0cc,_0x1350f4)=>Object['keys'](_0x25d0cc)['map'](_0x246844=>'#define\x20{'+_0x1350f4+_0x246844+'}\x20'+_0x25d0cc[_0x246844])['join']('\x0a'),Kp='\x0a\x0a\x20\x20\x20\x20'+Yp(rt,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+Yp(qw,'')+'\x0a';class jw{constructor(_0x72595f){h(this,'areaLights'+'Enabled',!(0x1d95*-0x1+-0x8*0x3df+0x1*0x3c8e)),(this['device']=_0x72595f,Ce['get'](_0x72595f,ze)['set']('lightBuffe'+'rDefinesPS',Kp),Ce['get'](_0x72595f,st)['set']('lightBuffe'+'rDefinesPS',Kp),this['cookiesEna'+'bled']=!(0xe*0x16+-0x6a3*0x5+0x59*0x5c),this['shadowsEna'+'bled']=!(-0x1f7c+-0x1*-0x437+0x1b46*0x1),this['areaLights'+'Enabled']=!(0x16c4+0xd3d*0x1+-0xc*0x300),this['maxLights']=-0x1526+0x2*0x120b+0x2b*-0x53);const _0x2f0bef=rt['COUNT'];this['lightsFloa'+'t']=new Float32Array((0x14+0x12cd+-0x12dd*0x1)*_0x2f0bef*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x2f0bef,this['maxLights'],Bt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x1*0x1d26+0x2075+-0x34f,this['invMaxAtte'+'nuation']=-0xc57+0x10a4+-0x44d,this['boundsMin']=new I(),this['boundsDelt'+'a']=new I();}['destroy'](){var _0x454c00;(_0x454c00=this['lightsText'+'ure'])==null||_0x454c00['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x52fe6c,_0xb3aebd,_0x227e00,_0x224620,_0x1fd60c){return new _e(_0x52fe6c,{'name':_0x1fd60c,'width':_0xb3aebd,'height':_0x227e00,'mipmaps':!(0x9df+0x4c2+-0xea0),'format':_0x224620,'addressU':ue,'addressV':ue,'type':di,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x353388,_0xd74d4){this['boundsMin']['copy'](_0x353388),this['boundsDelt'+'a']['copy'](_0xd74d4);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x24423b,_0x2fecb0){_0x2fecb0['_node']['getWorldTr'+'ansform']()['getY'](_0x24423b)['mulScalar'](-(-0x4f2+-0x1bb*0x3+0x512*0x2)),_0x24423b['normalize']();}['getLightAr'+'eaSizes'](_0x5936fe){const _0x2ab549=_0x5936fe['_node']['getWorldTr'+'ansform']();return _0x2ab549['transformV'+'ector']($w,us),yr[-0x2*0x30+-0x1*-0x2541+-0x24e1]=us['x'],yr[0xe93*0x2+0x165b+0x40*-0xce]=us['y'],yr[0x10f1*-0x2+-0x1cfb+0x1d*0x22b]=us['z'],_0x2ab549['transformV'+'ector'](Xw,us),yr[-0x1*0x1645+0x1e98+-0x850]=us['x'],yr[0x1fb4+0x2273+-0x1*0x4223]=us['y'],yr[0x1*-0x17c8+-0x44*0x1d+0x1f81]=us['z'],yr;}['addLightDa'+'ta'](_0x4b92de,_0x5414bb){const _0x1873e2=_0x4b92de['_type']===Ke,_0x352cf7=_0x4b92de['atlasViewp'+'ortAllocat'+'ed'],_0x5521d4=this['cookiesEna'+'bled']&&!!_0x4b92de['_cookie']&&_0x352cf7,_0x5ed555=this['areaLights'+'Enabled']&&_0x4b92de['shape']!==Vs,_0x22e788=this['shadowsEna'+'bled']&&_0x4b92de['castShadow'+'s']&&_0x352cf7,_0x448426=_0x4b92de['_node']['getPositio'+'n']();let _0x4859b4=null,_0xd6e321=null;_0x1873e2?_0x22e788?_0x4859b4=_0x4b92de['getRenderD'+'ata'](null,-0x1234+0x17*-0x16b+0x32d1)['shadowMatr'+'ix']:_0x5521d4&&(_0x4859b4=Pn['evalSpotCo'+'okieMatrix'](_0x4b92de)):(_0x22e788||_0x5521d4)&&(_0xd6e321=_0x4b92de['atlasViewp'+'ort']);const _0x57fa63=this['lightsFloa'+'t'],_0x32f9a2=this['lightsUint'],_0x27f3de=_0x5414bb*this['lightsText'+'ure']['width']*(-0xbf3+0x506+0x6f1);_0x57fa63[_0x27f3de+(0xf*-0x70+0x18fc+0xf8*-0x13)*rt['POSITION_R'+'ANGE']+(0xc*-0x1df+-0x93*0x7+0x1a79)]=_0x448426['x'],_0x57fa63[_0x27f3de+(-0x230d+-0x69*0x3+0x244c)*rt['POSITION_R'+'ANGE']+(-0x1*-0x8d5+-0x2218+-0x54*-0x4d)]=_0x448426['y'],_0x57fa63[_0x27f3de+(-0x1942*-0x1+-0x1*-0x207+0x27*-0xb3)*rt['POSITION_R'+'ANGE']+(0x5*0x5be+-0x846+0x2*-0xa37)]=_0x448426['z'],_0x57fa63[_0x27f3de+(-0x3*-0x611+0x57d+0x2*-0xbd6)*rt['POSITION_R'+'ANGE']+(-0xc37+0xbab*0x1+0x1*0x8f)]=_0x4b92de['attenuatio'+'nEnd'];const _0x1b760d=_0x4b92de['clusteredD'+'ata'];if(_0x32f9a2[_0x27f3de+(-0x76*0x53+0x2354*-0x1+-0x499a*-0x1)*rt['COLOR_ANGL'+'ES_BIAS']+(-0x35e*0x7+-0x1e97+-0xeb*-0x3b)]=_0x1b760d[0x14a*-0xc+-0x1cc1+0x2c39],_0x32f9a2[_0x27f3de+(0xe*0x274+-0x5a2+-0xe59*0x2)*rt['COLOR_ANGL'+'ES_BIAS']+(-0xeab+0x1*0xc1e+0x28e)]=_0x1b760d[-0x51*0x5+0x1*-0xffd+-0x199*-0xb],_0x32f9a2[_0x27f3de+(-0xbe9*0x1+0x1*-0x2539+0x36*0xe9)*rt['COLOR_ANGL'+'ES_BIAS']+(0x1892+-0xb52*-0x2+-0x26*0x13e)]=_0x1b760d[0x1*0x1535+-0x1*0x2173+0xc40],_0x4b92de['castShadow'+'s']){const _0x4e1622=_0x4b92de['getRenderD'+'ata'](null,0x1915+0x15a3+-0x2eb8),_0x485359=_0x4b92de['_getUnifor'+'mBiasValue'+'s'](_0x4e1622),_0xa010c9=mn['float2Half'](_0x485359['bias']),_0x1d6399=mn['float2Half'](_0x485359['normalBias']);_0x32f9a2[_0x27f3de+(0xe95*0x2+0xbff+0x3*-0xdb7)*rt['COLOR_ANGL'+'ES_BIAS']+(-0xb44+0x2f*-0x51+-0xd13*-0x2)]=_0xa010c9|_0x1d6399<<-0x8*-0x325+0x9*0x43+0x1*-0x1b73;}if(_0x1873e2&&(this['getSpotDir'+'ection'](us,_0x4b92de),_0x57fa63[_0x27f3de+(0x8b4+-0x7a1+-0x10f)*rt['DIRECTION_'+'FLAGS']+(-0x51*0x43+-0xce0+0x1*0x2213)]=us['x'],_0x57fa63[_0x27f3de+(0x1ea8+-0x1d0e+-0x196)*rt['DIRECTION_'+'FLAGS']+(-0x1*-0x185c+-0x1405+-0x456)]=us['y'],_0x57fa63[_0x27f3de+(-0x17c9+-0x143a+0x2c07)*rt['DIRECTION_'+'FLAGS']+(-0x11f9+-0x2b*-0xbe+-0xdef)]=us['z']),_0x32f9a2[_0x27f3de+(0xc88+0x4cf+-0x1153)*rt['DIRECTION_'+'FLAGS']+(-0x9af*0x1+0x8*-0x481+-0x2*-0x16dd)]=_0x4b92de['getCluster'+'edFlags'](_0x22e788,_0x5521d4),_0x4859b4){const _0xdd53eb=_0x4859b4['data'];for(let _0x30158e=-0xf7e+-0x50*0x20+0x197e;_0x30158e<0x7*-0x463+0x20a8+-0x1e3;_0x30158e++)_0x57fa63[_0x27f3de+(-0xca8*-0x1+-0x9b6+-0x2ee)*rt['PROJ_MAT_0']+_0x30158e]=_0xdd53eb[_0x30158e];}if(_0xd6e321&&(_0x57fa63[_0x27f3de+(0x3e2*0x9+0xd*0x18a+-0x494*0xc)*rt['ATLAS_VIEW'+'PORT']+(-0x25f4+-0x386*0x4+0x4*0xd03)]=_0xd6e321['x'],_0x57fa63[_0x27f3de+(0x2*-0x909+0x1f1+-0x1025*-0x1)*rt['ATLAS_VIEW'+'PORT']+(0x1eb0+-0x5*0x163+-0x17c0)]=_0xd6e321['y'],_0x57fa63[_0x27f3de+(-0x1af8+0xb*-0x11b+0x38f*0xb)*rt['ATLAS_VIEW'+'PORT']+(0x2547+0x1710+-0x3c55)]=_0xd6e321['z']/(0x1*-0x712+-0xc5b*-0x1+0x1b*-0x32)),_0x5ed555){const _0x1a3b18=this['getLightAr'+'eaSizes'](_0x4b92de);_0x57fa63[_0x27f3de+(0x1*-0x1d3+0x2405+0x23*-0xfa)*rt['AREA_DATA_'+'WIDTH']+(0x99b+-0x25e8+0x69*0x45)]=_0x1a3b18[-0x1790+0x1*-0x1c1b+0x33ab],_0x57fa63[_0x27f3de+(0x9ac+0x1fb7+-0x295f)*rt['AREA_DATA_'+'WIDTH']+(0x1cf4+-0x265c+-0x969*-0x1)]=_0x1a3b18[0x1493+-0x446*-0x8+-0x36c2],_0x57fa63[_0x27f3de+(0x83a+0x15*0x1b7+-0x2c39)*rt['AREA_DATA_'+'WIDTH']+(0x12f*-0x4+-0x2e*-0x47+-0x804)]=_0x1a3b18[-0x171e+0x13*-0x20e+0x3e2a],_0x57fa63[_0x27f3de+(-0xe39+-0x91*0x2e+0x284b)*rt['AREA_DATA_'+'HEIGHT']+(-0x85*0x23+0x26*-0x1d+0x65*0x39)]=_0x1a3b18[0x2bd*0x1+0x1251+-0x150b],_0x57fa63[_0x27f3de+(-0x35c+-0x1*0xae7+0xe47*0x1)*rt['AREA_DATA_'+'HEIGHT']+(0xe*-0x223+-0x1d05+0x3af0)]=_0x1a3b18[-0x5*0xf5+0x22d*-0x2+-0x47*-0x21],_0x57fa63[_0x27f3de+(-0x3e1*0x7+-0x1f6e+0x3a99)*rt['AREA_DATA_'+'HEIGHT']+(0x1367*-0x2+0x2665+0x6b)]=_0x1a3b18[0x143c+0x1*-0x15e8+0x1b1];}}}const Ll=new I(),Rl=new I(),Ol=new I(),yd=new Ie(),Zp=0x11*0x1ca+-0x1dfb+-0x5*-0x31d;class Qp{constructor(){this['light']=null,this['min']=new I(),this['max']=new I();}}class If{constructor(_0x126edb){h(this,'clusterTex'+'ture'),(this['device']=_0x126edb,this['name']='Untitled',this['reportCoun'+'t']=-0x2e5+-0x155e+-0x1*-0x1843,this['boundsMin']=new I(),this['boundsMax']=new I(),this['boundsDelt'+'a']=new I(),this['_cells']=new I(0xb3c*0x2+0x644+-0x5*0x5bf,0x21b2+-0x2*0x757+-0x9d*0x1f,-0x10c5+-0x1*0x181b+0xa1*0x41),this['_cellsLimi'+'t']=new I(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=0x40*-0x3+-0x542*0x3+0x92*0x1d,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new Qp()),this['lightsBuff'+'er']=new jw(_0x126edb),this['registerUn'+'iforms'](_0x126edb));}set['maxCellLig'+'htCount'](_0x1e9dcf){_0x1e9dcf!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x1e9dcf,this['_cellsDirt'+'y']=!(-0x102e*0x2+0x53f*-0x1+-0x259b*-0x1));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x3efc87){Ll['copy'](_0x3efc87)['floor'](),this['_cells']['equals'](Ll)||(this['_cells']['copy'](Ll),this['_cellsLimi'+'t']['copy'](Ll)['sub'](I['ONE']),this['_cellsDirt'+'y']=!(0x1*0x188f+-0x44*-0x13+-0x1d9b));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x1ba9fc){this['_clusterSk'+'ipId']=_0x1ba9fc['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x1ba9fc['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x1ba9fc['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x1ba9fc['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(-0xd01*0x1+-0x1*0x1a0b+0x270f),this['_clusterBo'+'undsMinId']=_0x1ba9fc['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(-0xa*-0x16d+-0xd01*-0x1+0x1b4*-0x10),this['_clusterBo'+'undsDeltaI'+'d']=_0x1ba9fc['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(0x3ee*-0x1+-0x523*0x1+0x914),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x1ba9fc['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(-0x1af6+0x3d*0x5a+0x587*0x1),this['_clusterCe'+'llsDotId']=_0x1ba9fc['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(-0x4*-0x8fa+-0xf74+-0x1471),this['_clusterCe'+'llsMaxId']=_0x1ba9fc['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(-0x80d+0x1002+-0x7f2);}['updatePara'+'ms'](_0x2974ee){_0x2974ee&&(this['cells']=_0x2974ee['cells'],this['maxCellLig'+'htCount']=_0x2974ee['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x2974ee['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x2974ee['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x2974ee['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(0x121f+0x584*-0x4+0x3f2*0x1);const _0x127656=this['_cells']['x'],_0x562519=this['_cells']['y'],_0x4de26b=this['_cells']['z'],_0x8205c2=_0x127656*_0x562519*_0x4de26b,_0xbe756c=this['maxCellLig'+'htCount']*_0x8205c2;let _0x48b083=Math['ceil'](Math['sqrt'](_0xbe756c));_0x48b083=Y['roundUp'](_0x48b083,this['maxCellLig'+'htCount']);const _0x33f449=Math['ceil'](_0xbe756c/_0x48b083);M['assert'](_0x48b083<=Zp&&_0x33f449<=Zp,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x1d*0xba+-0x2585*0x1+0x1*0x1073]=_0x127656,this['_clusterCe'+'llsMaxData'][-0x4a*-0x12+-0x23df+0x12e*0x1a]=_0x562519,this['_clusterCe'+'llsMaxData'][0xd38+-0x3*-0xce8+-0x33ee]=_0x4de26b,this['_clusterCe'+'llsDotData'][-0x661+-0x1*-0x63a+0x27]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0xf80+0x2522+-0x34a1]=_0x127656*_0x4de26b*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0xb78+0x1587+-0xa0d]=_0x127656*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0xbe756c),this['counts']=new Int32Array(_0x8205c2),this['_clusterTe'+'xtureSizeD'+'ata'][0x15*0x19a+-0x5*0x34b+-0x112b]=_0x48b083,this['_clusterTe'+'xtureSizeD'+'ata'][-0xf4b+-0x1*-0x1ee6+0x2*-0x7cd]=(0xbba+0x124*0x1+0xcdd*-0x1)/_0x48b083,this['_clusterTe'+'xtureSizeD'+'ata'][-0x14a+0x1*0x685+0x7*-0xbf]=(0x1ec9+-0x1*-0x1781+-0x3649)/_0x33f449,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x48b083,_0x33f449,Hu,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>0x8db*0x1+-0x1b4a+0x1270?-0x13*0x1df+-0x314+0x26a1:0x1*-0x2408+0x178+0x2291),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0xd0f37e=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0xa51+-0x1e*-0x95+0x725*-0x1]=this['_cells']['x']/_0xd0f37e['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x779*0x5+-0x19de+0x3f3c]=this['_cells']['y']/_0xd0f37e['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0xaba+-0x1454+0x99c]=this['_cells']['z']/_0xd0f37e['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][-0x997+0xa*-0x20+0xad7]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][0x1ddc+-0xe67+-0xf74]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][0x15ba+0x1723+0x2cdb*-0x1]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][0x1d80+0x2*0xc0+-0x1f00]=_0xd0f37e['x'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x86*-0x3e+-0x1*-0x11a7+-0x321a]=_0xd0f37e['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x1193+0x6e4+0xab1]=_0xd0f37e['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x1c66a0,_0x176f02,_0x3b1d20){_0x176f02['copy'](_0x1c66a0['min']),_0x176f02['sub'](this['boundsMin']),_0x176f02['div'](this['boundsDelt'+'a']),_0x176f02['mul2'](_0x176f02,this['cells']),_0x176f02['floor'](),_0x3b1d20['copy'](_0x1c66a0['max']),_0x3b1d20['sub'](this['boundsMin']),_0x3b1d20['div'](this['boundsDelt'+'a']),_0x3b1d20['mul2'](_0x3b1d20,this['cells']),_0x3b1d20['ceil'](),_0x176f02['max'](I['ZERO']),_0x3b1d20['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x30738b){const _0x68dd5e=this['lightsBuff'+'er']['maxLights'],_0x2e31cd=this['_usedLight'+'s'];let _0x1a01fe=0x5*-0x16e+-0x13ca*-0x1+0x5*-0x287;_0x30738b['forEach'](_0x24019b=>{const _0x2c0ba8=!!(_0x24019b['mask']&(ds|si)),_0x5b1f03=_0x24019b['type']===Ke&&_0x24019b['_outerCone'+'Angle']===-0x22e5+0x314*-0x1+0x25f9;if(_0x24019b['enabled']&&_0x24019b['type']!==ve&&_0x24019b['visibleThi'+'sFrame']&&_0x24019b['intensity']>0x2552+0xe5d+-0x33af*0x1&&_0x2c0ba8&&!_0x5b1f03){if(_0x1a01fe<_0x68dd5e){let _0xe87383;_0x1a01fe<_0x2e31cd['length']?_0xe87383=_0x2e31cd[_0x1a01fe]:(_0xe87383=new Qp(),_0x2e31cd['push'](_0xe87383)),_0xe87383['light']=_0x24019b,_0x24019b['getBoundin'+'gBox'](yd),_0xe87383['min']['copy'](yd['getMin']()),_0xe87383['max']['copy'](yd['getMax']()),_0x1a01fe++;}else M['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x68dd5e-(-0x1*0x11d1+0x2*-0xd49+0x2c64))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x2e31cd['length']=_0x1a01fe;}['evaluateBo'+'unds'](){const _0x361b98=this['_usedLight'+'s'],_0x3ee8d2=this['boundsMin'],_0x159289=this['boundsMax'];if(_0x361b98['length']>-0x7f3*0x1+0x1002+-0x80e){_0x3ee8d2['copy'](_0x361b98[0x19bf+-0x879*-0x1+-0x2237]['min']),_0x159289['copy'](_0x361b98[-0x6*-0x26e+-0x34*-0x6+-0xfcb]['max']);for(let _0x2a0949=-0x1*-0x4cf+0x155+0x2*-0x311;_0x2a0949<_0x361b98['length'];_0x2a0949++)_0x3ee8d2['min'](_0x361b98[_0x2a0949]['min']),_0x159289['max'](_0x361b98[_0x2a0949]['max']);}else _0x3ee8d2['set'](0x23b0+0x7a9*-0x1+-0x1c07,-0x95*-0x25+-0x70a*0x5+0xda9,0xd6+-0x1b*-0x171+0x27c1*-0x1),_0x159289['set'](-0x2298+0xe44+0x1455,-0xe81+-0x1048+0x1eca,0x1c28+0x2466+0x295*-0x19);this['boundsDelt'+'a']['sub2'](_0x159289,_0x3ee8d2),this['lightsBuff'+'er']['setBounds'](_0x3ee8d2,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x3f9efe){this['counts']['fill'](0x1c95+0x1*-0x121f+0x2*-0x53b),this['clusters']['fill'](0xab8+-0x315*0x2+-0x48e),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x3f9efe?_0x3f9efe['areaLights'+'Enabled']:!(-0xaa*-0x2a+0x148d*0x1+-0x3070);const _0x4fdd46=this['_cells']['x'],_0x2ab364=this['_cells']['z'],_0x1175b6=this['counts'],_0x1fd1b6=this['_maxCellLi'+'ghtCount'],_0x813b69=this['clusters'],_0x518366=this['maxCellLig'+'htCount'];let _0x31a603=!(0x16c2+0x31*0x35+-0x20e6);const _0x417625=this['_usedLight'+'s'];for(let _0x3400dd=0xab4+0x2d7*-0xa+0x11b3*0x1;_0x3400dd<_0x417625['length'];_0x3400dd++){const _0x5dc23b=_0x417625[_0x3400dd],_0x1eb2ce=_0x5dc23b['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x1eb2ce,_0x3400dd),this['evalLightC'+'ellMinMax'](_0x5dc23b,Rl,Ol);const _0x49a593=Rl['x'],_0x280cfe=Ol['x'],_0x596e54=Rl['y'],_0x20efdc=Ol['y'],_0x53e4ab=Rl['z'],_0x172124=Ol['z'];for(let _0x3bf03d=_0x49a593;_0x3bf03d<=_0x280cfe;_0x3bf03d++)for(let _0x776cb6=_0x53e4ab;_0x776cb6<=_0x172124;_0x776cb6++)for(let _0x4d2a1a=_0x596e54;_0x4d2a1a<=_0x20efdc;_0x4d2a1a++){const _0x12290f=_0x3bf03d+_0x4fdd46*(_0x776cb6+_0x4d2a1a*_0x2ab364),_0x1fd5fe=_0x1175b6[_0x12290f];_0x1fd5fe<_0x1fd1b6?(_0x813b69[_0x518366*_0x12290f+_0x1fd5fe]=_0x3400dd,_0x1175b6[_0x12290f]=_0x1fd5fe+(0x34*0x3a+0xe0b+-0x19d2)):_0x31a603=!(0x1c*-0x146+-0x1d08+0x18*0x2b2);}}_0x31a603&&this['reportCoun'+'t']<-0x164c+0x21d2+0x1f*-0x5f&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===0x2103*0x1+-0x1ce2*-0x1+-0x3de1?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x232bda,_0x4ea5ff=null){this['updatePara'+'ms'](_0x4ea5ff),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x232bda),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x4ea5ff),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const Jp=0xd*0x136+0x1*0x20ff+0x1f3*-0x19+0.39996322972865306,fl={'circlePoint'(_0x1ad5e4){const _0x22230d=Math['sqrt'](Math['random']()),_0x509282=Math['random']()*(-0x1ddb+-0xe2d+0x2c0a)*Math['PI'];_0x1ad5e4['x']=_0x22230d*Math['cos'](_0x509282),_0x1ad5e4['y']=_0x22230d*Math['sin'](_0x509282);},'circlePointDeterministic'(_0x20f76a,_0x50ca25,_0x4f30fb){const _0x532d4e=_0x50ca25*Jp,_0xb85c88=Math['sqrt'](_0x50ca25)/Math['sqrt'](_0x4f30fb);_0x20f76a['x']=_0xb85c88*Math['cos'](_0x532d4e),_0x20f76a['y']=_0xb85c88*Math['sin'](_0x532d4e);},'spherePointDeterministic'(_0x4ed7a0,_0x3e549d,_0x146d74,_0x1a0741=0xc*0x16+0x93+0x1*-0x19b,_0x41998b=0x3*-0x136+0x4*0x4c1+-0xf61){_0x1a0741=0x1bf*-0xf+0x1*-0x16e7+0x3119-(-0x95c+0x1dd3*0x1+0x1475*-0x1)*_0x1a0741,_0x41998b=0x5*0x365+-0xa06+-0x7*0xfe-(0x23c+0x17*-0xb5+0xe09)*_0x41998b;const _0x46104a=Y['lerp'](_0x1a0741,_0x41998b,_0x3e549d/_0x146d74),_0x33c713=Math['sqrt'](0x1c58+-0x153e*0x1+0x4f*-0x17-_0x46104a*_0x46104a),_0x3e38d8=Jp*_0x3e549d;_0x4ed7a0['x']=Math['cos'](_0x3e38d8)*_0x33c713,_0x4ed7a0['y']=_0x46104a,_0x4ed7a0['z']=Math['sin'](_0x3e38d8)*_0x33c713;},'radicalInverse'(_0x2d2dd3){let _0x4c6dbd=(_0x2d2dd3<<0x74+0x23c8+-0x1216*0x2|_0x2d2dd3>>>-0x1*0x379+0x290+0x3*0x53)>>>-0x3*0xcd4+0x751+0x1f2b;return _0x4c6dbd=((_0x4c6dbd&-0x4b7f74b+0xa2e61447+-0x1*0x48d8c7a7)<<-0x79+-0x1544+0xadf*0x2|(_0x4c6dbd&0xe0375b42+0x99f*0x2ef55+-0x51c95363)>>>0x19b3+-0x11b3*0x1+-0x7ff)>>>0x3*-0x788+-0xe86+0x2*0x128f,_0x4c6dbd=((_0x4c6dbd&0x1*-0x348d674e+0x2c248*-0x1865+0x1*0xab0e00e9)<<-0x2133+-0x1b22+-0x3*-0x141d|(_0x4c6dbd&-0x55c4b9a2*0x3+-0x1559ce579+0x323b7df2b)>>>0x2*-0xc27+0x25d4+-0xd84)>>>0x1*-0xadd+0xf77+-0x49a,_0x4c6dbd=((_0x4c6dbd&-0xa544b*0x179+0x121*-0xb2c61+0x2ae24b03)<<-0x5ca*-0x4+-0x35d+-0x53*0x3d|(_0x4c6dbd&0xca98b02d*0x1+0xf77ea6cb+-0x66*0x20cecec)>>>0x1f3b+0x48+0x1*-0x1f7f)>>>0x2435+-0x26a8+0x273,_0x4c6dbd=((_0x4c6dbd&0xa6768a+-0x181ed18+-0x1*-0x1da778d)<<0x9fa*-0x1+0x2584+-0x1b82|(_0x4c6dbd&0x17afdf0a6+-0xa4208d56+0x4*0xa08e6ec)>>>-0x14a1*-0x1+0x11d8+0x2671*-0x1)>>>0x64c+0x109f+-0x16eb,_0x4c6dbd*(0x19*0x67+0x1500+-0x1f0f+2.3283064365386963e-10);}},Yw={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},Kw={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class lr{static['decodeFunc'](_0x5c6333){return Yw[_0x5c6333]??'decodeGamm'+'a';}static['encodeFunc'](_0x31d027){return Kw[_0x31d027]??'encodeGamm'+'a';}}const e_=_0x19117f=>{switch(_0x19117f){case Tf:return'Cubemap';case Q0:return'Octahedral';default:return'Equirect';}},Fl=(_0x3540b5,_0x1d8382,_0x5d35b7)=>{if(_0x3540b5<=-0x1143+0x1*0x214c+-0x1009)_0x1d8382[_0x5d35b7+(-0x1162+0x2a9*-0x7+0x2401)]=0x23a7*0x1+-0x1*0x1274+-0x1133,_0x1d8382[_0x5d35b7+(-0x2*-0xf6b+0x1*0x2ab+-0x43*0x80)]=-0x1*0x115+-0x4*-0x274+0x3*-0x2e9,_0x1d8382[_0x5d35b7+(0x23df+0x161e+-0x39fb)]=-0xe82+-0x12f5+0xd*0x293,_0x1d8382[_0x5d35b7+(0x2162+-0xba5+-0x1*0x15ba)]=0xe6+0x7c*-0x3+0x8e;else{if(_0x3540b5>=-0x7c6*-0x1+0x411*0x3+-0x13f8)_0x1d8382[_0x5d35b7+(-0x199*-0x5+0x6e0*0x4+-0x18b*0x17)]=0x12*0x43+-0x11*0x228+-0xafb*-0x3,_0x1d8382[_0x5d35b7+(0x11aa+-0x2217+0x106e)]=0x61*0x54+-0x1*-0x220d+-0x41e1,_0x1d8382[_0x5d35b7+(-0x1*0x1726+-0x8c9+-0x1e1*-0x11)]=0x1f2+-0x2181+0x1f8f,_0x1d8382[_0x5d35b7+(-0x4da+-0xc96+0x1173)]=-0x3*-0x125+0x1eb9+-0x2228;else{let _0x4f8c86=(0x189*-0xb+0x1af8+-0xa14)*_0x3540b5%(0x1*-0x19fd+0x2532+-0xb34),_0x29374c=(-0x1b*-0x8b+0x901*0x3+-0x28ad)*_0x3540b5%(-0x1342+-0x4*-0x1a3+-0x3*-0x43d),_0x2b3ebc=(-0x194*-0x131+0x24f1+-0x10844)*_0x3540b5%(0x121*-0x1c+-0x1d8c+-0x1*-0x3d29);const _0x226380=(0x16ad348+0x204862*-0x2+-0x2d3f85)*_0x3540b5%(-0x1*0x48f+-0xeae*-0x1+-0xa*0x103);_0x4f8c86-=_0x29374c/(0x22a4+0x6e8+0x288d*-0x1),_0x29374c-=_0x2b3ebc/(0x1c6*-0xf+-0x4dc*-0x1+0x16bd*0x1),_0x2b3ebc-=_0x226380/(-0x1e1f*-0x1+0x1*-0x5b9+-0x1767),_0x1d8382[_0x5d35b7+(-0x2e7*0x6+0x6d2*-0x3+0x25e0)]=Math['min'](-0x8e2*-0x4+-0xfdc*0x1+-0x12ad,Math['floor'](_0x4f8c86*(0x2c*-0x67+-0x2*0x737+0x2122))),_0x1d8382[_0x5d35b7+(0x2516*-0x1+-0x8c*0x14+0x3007*0x1)]=Math['min'](-0x1*-0xb42+0xd16*0x1+0x1*-0x1759,Math['floor'](_0x29374c*(0x1*0x1fed+0x2*0x30b+0x2503*-0x1))),_0x1d8382[_0x5d35b7+(0x24a*-0x2+0x72d+-0x297)]=Math['min'](0x2566*0x1+-0x6b*0x49+-0x5e4,Math['floor'](_0x2b3ebc*(-0x157e+-0xb01+0x217f))),_0x1d8382[_0x5d35b7+(-0x25f9+0x8c+-0x257*-0x10)]=Math['min'](0x786+-0x14e1*0x1+0xe5a,Math['floor'](_0x226380*(0x3*-0x3ce+0x101b+-0x1*0x3b1)));}}},Zw=_0x48d9b5=>{const _0x68e6fe=_0x48d9b5['length'],_0x3b747d=Math['min'](_0x68e6fe,-0x5f+-0x9d4*-0x2+-0x1149),_0x4b723e=Math['ceil'](_0x68e6fe/_0x3b747d),_0x501964=new Uint8Array(_0x3b747d*_0x4b723e*(0x3*-0xb96+-0x1b25+0x3deb));let _0x2c4b29=-0x22e3+-0x2314+0x45f7;for(let _0x34456d=-0x192*-0x13+-0x16b*0xb+-0x1b*0x87;_0x34456d<_0x68e6fe;_0x34456d+=-0x1073+-0x1d56+0x2dcd)Fl(_0x48d9b5[_0x34456d+(-0xa*0x8b+0x354+0x21a*0x1)]*(0x2*0xc46+-0x1*-0x1996+0x2c9*-0x12+0.5)+(0x219f+0x1cf7+-0x3e96+0.5),_0x501964,_0x2c4b29+(0x9b3+-0x16ba+0xd07)),Fl(_0x48d9b5[_0x34456d+(-0xe*-0x1f6+0x993+-0x2506)]*(-0x2a*-0xb3+-0x1cc2*-0x1+-0x3a20+0.5)+(0x1*0xbfc+0xa93*-0x1+-0x169*0x1+0.5),_0x501964,_0x2c4b29+(0x11b*0x6+-0x9a*0x37+0x1a78)),Fl(_0x48d9b5[_0x34456d+(0x4*0x2a5+0x1*0x21e2+-0x2c74)]*(-0x33d+-0x23*-0xef+-0x1d70+0.5)+(-0x601+-0x39*-0xa3+-0x1e4a+0.5),_0x501964,_0x2c4b29+(-0x1e8+-0xd*-0x1ff+0x1*-0x1803)),Fl(_0x48d9b5[_0x34456d+(0x2*0x2+-0x1c55+0x1c54)]/(-0x2*-0x4f4+0x1cda*-0x1+0x12fa),_0x501964,_0x2c4b29+(0x7*0x2b7+-0x243f+0x2*0x8a5)),_0x2c4b29+=0x1*0xd4f+0x159d+-0x22dc;return{'width':_0x3b747d,'height':_0x4b723e,'data':_0x501964};},Qw=(_0x3cbee2,_0x523f45,_0x4d809e,_0x4033b2)=>{const _0x35cfd9=_0x4d809e*(-0xa*-0x152+0x1*-0x2075+0x1343)*Math['PI'],_0x27fd50=Math['pow'](0x16e*-0x8+0xbb9+-0x48-_0x523f45,(-0x322*0xc+-0x5*-0x531+0x1*0xba4)/(_0x4033b2+(0x37*0x2f+0x12ad+-0x1cc5))),_0x5d7cf6=Math['sqrt'](-0x1*-0x6db+-0x29*-0xbc+-0x24f6-_0x27fd50*_0x27fd50);_0x3cbee2['set'](Math['cos'](_0x35cfd9)*_0x5d7cf6,Math['sin'](_0x35cfd9)*_0x5d7cf6,_0x27fd50)['normalize']();},Jw=(_0x5a6042,_0x57808f,_0x1a58aa)=>{const _0x507f44=_0x1a58aa*(0xb6+-0xa6f+-0x9bb*-0x1)*Math['PI'],_0xdc139=Math['sqrt'](-0x16ce+-0x121c+0x28eb-_0x57808f),_0x15bedd=Math['sqrt'](_0x57808f);_0x5a6042['set'](Math['cos'](_0x507f44)*_0x15bedd,Math['sin'](_0x507f44)*_0x15bedd,_0xdc139)['normalize']();},eE=(_0x4bc248,_0x247ac8,_0x57fec6,_0x2297a0)=>{const _0xa5850d=_0x57fec6*(-0xfb5*-0x2+0x20f7+-0x405f)*Math['PI'],_0x3b2993=Math['sqrt']((0x2324+0x1*-0x4a9+0x5e*-0x53-_0x247ac8)/(0x143f+-0x1*-0x1d7f+-0x31bd*0x1+(_0x2297a0*_0x2297a0-(-0x145c+0x296*0xd+-0xd41))*_0x247ac8)),_0x5df948=Math['sqrt'](0x26f1*-0x1+0x1*-0x133f+-0x3a31*-0x1-_0x3b2993*_0x3b2993);_0x4bc248['set'](Math['cos'](_0xa5850d)*_0x5df948,Math['sin'](_0xa5850d)*_0x5df948,_0x3b2993)['normalize']();},tE=(_0x1d7cdf,_0x2e6ea6)=>{const _0x4055c5=_0x1d7cdf*_0x2e6ea6,_0x593819=_0x2e6ea6/(-0xf85+0x177d+-0x7f7-_0x1d7cdf*_0x1d7cdf+_0x4055c5*_0x4055c5);return _0x593819*_0x593819*((-0x65+0x9c3*-0x4+0x3*0xd26)/Math['PI']);},sE=(_0x2d261a,_0x1dfa6f)=>{const _0x25dae8=new I(),_0x6580e4=[];for(let _0x28f764=0x145f+0xb33*-0x1+-0x24b*0x4;_0x28f764<_0x2d261a;++_0x28f764)Qw(_0x25dae8,_0x28f764/_0x2d261a,fl['radicalInv'+'erse'](_0x28f764),_0x1dfa6f),_0x6580e4['push'](_0x25dae8['x'],_0x25dae8['y'],_0x25dae8['z'],0x3*-0xcff+-0x1*-0xd55+0x19a8);return _0x6580e4;},iE=(_0x143e98,_0x5e6632)=>{const _0x3a1246=_0x5e6632/_0x143e98,_0x22390a=new I(),_0x3002b6=[];for(let _0x54891d=-0xdcd+0x410+0x9bd;_0x54891d<_0x143e98;++_0x54891d){Jw(_0x22390a,_0x54891d/_0x143e98,fl['radicalInv'+'erse'](_0x54891d));const _0xd2f50f=_0x22390a['z']/Math['PI'],_0x243603=(0x1d3e+0x20f5+0x1*-0x3e33+0.5)*Math['log2'](_0x3a1246/_0xd2f50f);_0x3002b6['push'](_0x22390a['x'],_0x22390a['y'],_0x22390a['z'],_0x243603);}return _0x3002b6;},rE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},aE=(_0x211efd,_0x114d5d)=>{const _0x5ea134=rE[_0x211efd];return _0x5ea134&&_0x5ea134[_0x114d5d]||_0x211efd;},nE=(_0x4847db,_0x3e4987,_0x1303aa)=>{const _0x5e2314=_0x1303aa/_0x4847db,_0x1f7e62=-0x2*0x5e5+0x1f91+-0x13c6-Math['log2'](_0x3e4987)/(0x1ed1+-0xc15+-0x12b1),_0xea21c8=_0x1f7e62*_0x1f7e62,_0x4284b9=new I(),_0x3435fe=new I(),_0xef4297=new I(-0xe2b+-0x1266+0x2091,0x74d+0x8a*0x3d+-0x282f,-0x235*-0xa+-0x3*0x3fb+-0x3*0x360),_0x56ca4a=[],_0x1d4ce2=aE(_0x4847db,_0x3e4987);for(let _0x30a414=-0x118e+-0x5*-0x38f+-0x3d;_0x30a414<_0x1d4ce2;++_0x30a414){eE(_0x4284b9,_0x30a414/_0x1d4ce2,fl['radicalInv'+'erse'](_0x30a414),_0xea21c8);const _0x2af056=_0x4284b9['z'];if(_0x3435fe['set'](_0x4284b9['x'],_0x4284b9['y'],_0x4284b9['z'])['mulScalar']((-0x4*0x48a+0x16b0+0x6*-0xc1)*_0x2af056)['sub'](_0xef4297),_0x3435fe['z']>0x2e6*-0x9+0x7*-0x4f+-0x7*-0x409){const _0x4ceab1=tE(Math['min'](0xded+0xddd+-0x3*0x943,_0x2af056),_0xea21c8)/(-0x9*0x1e5+0x2566+-0xf*0x15b)+(0x12c+0x135b*0x2+0x3fd*-0xa+0.001),_0x51e991=(-0x2006+0x1d86*-0x1+-0x1*-0x3d8c+0.5)*Math['log2'](_0x5e2314/_0x4ceab1);_0x56ca4a['push'](_0x3435fe['x'],_0x3435fe['y'],_0x3435fe['z'],_0x51e991);}}for(;_0x56ca4a['length']<_0x4847db*(0x114a+-0x643+0x1*-0xb03);)_0x56ca4a['push'](0x2655+-0x25a6+-0xaf,0x14ad+0xdf3+-0x1150*0x2,0x17*0x20+-0x382*-0x7+0x1b6e*-0x1,0xe87+0x127d+-0x2104);return _0x56ca4a;},oE=(_0x3df20,_0x4d2a8b,_0x43ea95)=>{const _0x2488e6=Zw(_0x43ea95);return new _e(_0x3df20,{'name':_0x4d2a8b,'width':_0x2488e6['width'],'height':_0x2488e6['height'],'mipmaps':!(-0x3d*-0x5+-0xf27+0xdf7),'minFilter':Te,'magFilter':Te,'levels':[_0x2488e6['data']]});};class Py{constructor(_0x811f3c=!(-0x8b*0x39+-0x6*0x4f2+0x15*0x2e3)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x811f3c;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x241ed7,_0x16468e)=>{_0x241ed7['destroy']();});}['get'](_0x327ca0,_0x269940){if(!this['map']['has'](_0x327ca0)){const _0x11da1b=_0x269940();return this['map']['set'](_0x327ca0,_0x11da1b),_0x11da1b;}return this['map']['get'](_0x327ca0);}}const lE=new Py(!(-0x1cf+-0x21c2+0x2392)),hE=new Ht(),Dm=(_0x39cdd5,_0x5218b1,_0x265db1)=>hE['get'](_0x39cdd5,()=>new Py())['get'](_0x5218b1,()=>oE(_0x39cdd5,_0x5218b1,lE['get'](_0x5218b1,_0x265db1))),cE=(_0x4419cb,_0x33977e,_0x316d1c)=>{const _0x31b755='lambert-sa'+'mples-'+_0x33977e+'-'+_0x316d1c;return Dm(_0x4419cb,_0x31b755,()=>iE(_0x33977e,_0x316d1c));},dE=(_0x35bf74,_0x28acd2,_0x310d06)=>{const _0x13bd66='phong-samp'+'les-'+_0x28acd2+'-'+_0x310d06;return Dm(_0x35bf74,_0x13bd66,()=>sE(_0x28acd2,_0x310d06));},fE=(_0x452bbf,_0x4dfdf1,_0x712ea1,_0x15d07c)=>{const _0xe1d2e='ggx-sample'+'s-'+_0x4dfdf1+'-'+_0x712ea1+'-'+_0x15d07c;return Dm(_0x452bbf,_0xe1d2e,()=>nE(_0x4dfdf1,_0x712ea1,_0x15d07c));};function fi(_0x4ed391,_0xe6d8e3,_0x2a04bb={}){var _0x421e96,_0x4023cc;M['assert'](_0x4ed391 instanceof _e&&_0xe6d8e3 instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x35a297=_0x2a04bb['seamPixels']??0x1dee+0x41*0x67+0x7*-0x803,_0x48609f=(((_0x421e96=_0x2a04bb['rect'])==null?void(0x21a4+-0x1777+-0xa2d):_0x421e96['z'])??_0xe6d8e3['width'])-_0x35a297*(0x11*-0x37+0x3*0x16+-0x43*-0xd),_0x2fd0e1=(((_0x4023cc=_0x2a04bb['rect'])==null?void(-0x6*-0x45f+0x2710+-0x414a):_0x4023cc['w'])??_0xe6d8e3['height'])-_0x35a297*(0xef*-0xd+0x1*0x9f7+0x22e);if(_0x48609f<-0x12f*0xb+0xdfd+0x13*-0xd||_0x2fd0e1<-0x2323+0x1*-0x2d8+0x25fc)return!(-0x18ee*0x1+-0x2dd+0x251*0xc);const _0x34585a={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x4baeda=_0x2a04bb['hasOwnProp'+'erty']('specularPo'+'wer')?_0x2a04bb['specularPo'+'wer']:-0x238e+0x19e6+0x1*0x9a9,_0x584179=_0x2a04bb['hasOwnProp'+'erty']('face')?_0x2a04bb['face']:null,_0x1c22f6=_0x2a04bb['hasOwnProp'+'erty']('distributi'+'on')?_0x2a04bb['distributi'+'on']:_0x4baeda===0x4e*0xe+-0x2*-0x2+-0x447?'none':'phong',_0x487bc8=_0x34585a[_0x1c22f6]||'reproject',_0x1b5e43=_0x487bc8['startsWith']('prefilterS'+'amples'),_0x487397=lr['decodeFunc'](_0x4ed391['encoding']),_0x12ff5f=lr['encodeFunc'](_0xe6d8e3['encoding']),_0x48e6ae='sample'+e_(_0x4ed391['projection']),_0x598540='getDirecti'+'on'+e_(_0xe6d8e3['projection']),_0x5038d7=_0x2a04bb['hasOwnProp'+'erty']('numSamples')?_0x2a04bb['numSamples']:0xe4e+0x12ba+-0x1d08*0x1,_0xb43ae0='ReprojectS'+'hader:'+_0x487bc8+'_'+_0x487397+'_'+_0x12ff5f+'_'+_0x48e6ae+'_'+_0x598540+'_'+_0x5038d7,_0x3cfa15=_0x4ed391['device'];let _0xfb0245=Cn(_0x3cfa15)['getCachedS'+'hader'](_0xb43ae0);if(!_0xfb0245){const _0x2afef2=new Map();_0x1b5e43&&_0x2afef2['set']('USE_SAMPLE'+'S_TEX',''),_0x4ed391['cubemap']&&_0x2afef2['set']('CUBEMAP_SO'+'URCE',''),_0x2afef2['set']('{PROCESS_F'+'UNC}',_0x487bc8),_0x2afef2['set']('{DECODE_FU'+'NC}',_0x487397),_0x2afef2['set']('{ENCODE_FU'+'NC}',_0x12ff5f),_0x2afef2['set']('{SOURCE_FU'+'NC}',_0x48e6ae),_0x2afef2['set']('{TARGET_FU'+'NC}',_0x598540),_0x2afef2['set']('{NUM_SAMPL'+'ES}',_0x5038d7),_0x2afef2['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x5038d7))['toFixed'](-0x1bd4+-0x1*-0x1026+0xbaf));const _0x2c7f36=_0x3cfa15['isWebGPU'],_0x25fd56=Ce['get'](_0x3cfa15,_0x2c7f36?st:ze),_0x1589f8=new Map();_0x1589f8['set']('decodePS',_0x25fd56['get']('decodePS')),_0x1589f8['set']('encodePS',_0x25fd56['get']('encodePS')),_0xfb0245=Ut['createShad'+'er'](_0x3cfa15,{'uniqueName':_0xb43ae0,'attributes':{'vertex_position':Pe},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x1589f8,'fragmentDefines':_0x2afef2});}Q['pushGpuMar'+'ker'](_0x3cfa15,'ReprojectT'+'exture'),_0x3cfa15['setBlendSt'+'ate'](Ct['NOBLEND']);const _0x441980=_0x3cfa15['scope']['resolve'](_0x4ed391['cubemap']?'sourceCube':'sourceTex');M['assert'](_0x441980),_0x441980['setValue'](_0x4ed391);const _0x4d03c6=_0x3cfa15['scope']['resolve']('params'),_0x397dcf=_0x3cfa15['scope']['resolve']('uvMod');_0x35a297>-0x1b24+-0x45*-0x8e+-0xb22?_0x397dcf['setValue']([(_0x48609f+_0x35a297*(0x1*-0x1237+-0x2*-0xa6f+-0x2a5))/_0x48609f,(_0x2fd0e1+_0x35a297*(0x1*0x3cb+0x4cb+0x894*-0x1))/_0x2fd0e1,-_0x35a297/_0x48609f,-_0x35a297/_0x2fd0e1]):_0x397dcf['setValue']([0x1bfe*0x1+0x248*-0xa+-0x52d,0x1*-0xcc7+0x1b04+-0xe3c,0x2273+0x843+-0x4d*0x8e,-0x25cc+-0x21f*-0x1+0x23ad]);const _0x3030af=[-0x136b*0x1+0x1362+0x1*0x9,_0xe6d8e3['width']*_0xe6d8e3['height']*(_0xe6d8e3['cubemap']?0x7f2+-0xb8b+0x39f:-0x27*0xda+0x1b13+-0xc*-0x83),_0x4ed391['width']*_0x4ed391['height']*(_0x4ed391['cubemap']?0xbd7+-0x20c2+-0x6fb*-0x3:0x6f1+0x1*0x1cd8+-0x23c8)];if(_0x1b5e43){const _0x3001d8=_0x4ed391['width']*_0x4ed391['height']*(_0x4ed391['cubemap']?0x2144+0x58*-0x1f+-0x1696:0x89f*-0x1+-0x15d+-0x1*-0x9fd),_0xa20b66=_0x1c22f6==='ggx'?fE(_0x3cfa15,_0x5038d7,_0x4baeda,_0x3001d8):_0x1c22f6==='lambert'?cE(_0x3cfa15,_0x5038d7,_0x3001d8):dE(_0x3cfa15,_0x5038d7,_0x4baeda);_0x3cfa15['scope']['resolve']('samplesTex')['setValue'](_0xa20b66),_0x3cfa15['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(-0xa53+0x1783+-0xd2f)/_0xa20b66['width'],(-0x6f3+0x187+0x56d)/_0xa20b66['height']]);}for(let _0x1f0094=0xa*0x3b9+-0xb66*0x1+0x15c*-0x13;_0x1f0094<(_0xe6d8e3['cubemap']?0x1423+0xd71+-0x218e:-0xc9f*0x1+-0x13*-0x199+-0x11bb);_0x1f0094++)if(_0x584179===null||_0x1f0094===_0x584179){const _0x547d78=new vt({'colorBuffer':_0xe6d8e3,'face':_0x1f0094,'depth':!(-0x1989+-0xc2a*-0x2+0x136),'flipY':_0x3cfa15['isWebGPU']});_0x3030af[-0x2a7*-0x3+0xb2c+-0x1321]=_0x1f0094,_0x4d03c6['setValue'](_0x3030af),fr(_0x3cfa15,_0x547d78,_0xfb0245,_0x2a04bb==null?void(0x7*0x4c4+-0x2457+-0x1*-0x2fb):_0x2a04bb['rect']),_0x547d78['destroy']();}return Q['popGpuMark'+'er'](_0x3cfa15),!(-0xc4d+0xdd3+-0x186);}const vd=(_0x447128,_0xf2d439=-0xb6e+-0x2c*-0x40+0x5*0x16)=>0x4ba+0x9e3+-0xe9c+Math['floor'](Math['log2'](Math['max'](_0x447128,_0xf2d439))),uE=_0x553b60=>_0x553b60['textureHal'+'fFloatRend'+'erable'],mE=_0x2f4759=>_0x2f4759['textureFlo'+'atRenderab'+'le'],pE=_0x568154=>uE(_0x568154)?at:mE(_0x568154)?Bt:Oe,_E=_0x1bca3f=>Oe,gE=(_0x12710e,_0xf18e4d,_0x487f97,_0x5dd7e6)=>new _e(_0x12710e,{'name':'lighting-'+_0xf18e4d,'cubemap':!(-0x2417+0x2*0x1082+0x313),'width':_0xf18e4d,'height':_0xf18e4d,'format':_0x487f97,'type':Io,'addressU':ue,'addressV':ue,'mipmaps':!(0x1b65*0x1+-0x920+0x491*-0x4)});class My{static['generateSk'+'yboxCubema'+'p'](_0x1d9130,_0x5068a5){const _0x2eed10=_0x1d9130['device'];Q['pushGpuMar'+'ker'](_0x2eed10,'genSkyboxC'+'ubemap');const _0x545295=gE(_0x2eed10,_0x5068a5||(_0x1d9130['cubemap']?_0x1d9130['width']:_0x1d9130['width']/(-0x1893+-0x1*-0x126e+0x53*0x13)),Oe);return fi(_0x1d9130,_0x545295,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x2eed10),_0x545295;}static['generateLi'+'ghtingSour'+'ce'](_0xbe9828,_0xd9b8ab){const _0x302945=_0xbe9828['device'];Q['pushGpuMar'+'ker'](_0x302945,'genLightin'+'gSource');const _0x58fbb0=pE(_0x302945),_0x1c0c2a=(_0xd9b8ab==null?void(-0x126d+0xea4+0x3c9):_0xd9b8ab['target'])||new _e(_0x302945,{'name':'lighting-s'+'ource','cubemap':!(0x1*0x628+-0x1e2f+0x1807),'width':(_0xd9b8ab==null?void(0x1e*0xfe+0x3d1*0x8+-0x3c4c):_0xd9b8ab['size'])||0x1*0x13e5+-0x2*0x20b+-0xf4f,'height':(_0xd9b8ab==null?void(0xef9+0x1*0x14a1+-0x5d*0x62):_0xd9b8ab['size'])||0x19f*-0xb+0x5c*0x3f+-0x44f,'format':_0x58fbb0,'type':_0x58fbb0===Oe?Io:di,'addressU':ue,'addressV':ue,'mipmaps':!(0x1*-0x26ca+0x3*-0x31d+0x100b*0x3)});return fi(_0xbe9828,_0x1c0c2a,{'numSamples':_0xbe9828['mipmaps']?0x1d3c*0x1+0x61*-0x22+-0x573*0x3:-0x54f+0x5*-0x101+0xe54}),Q['popGpuMark'+'er'](_0x302945),_0x1c0c2a;}static['generateAt'+'las'](_0xf9d434,_0x32949c){const _0x4fecc8=_0xf9d434['device'],_0x21df33=_E();Q['pushGpuMar'+'ker'](_0x4fecc8,'genAtlas');const _0x156c80=(_0x32949c==null?void(0x19*0x141+0x6ba*-0x4+-0x471):_0x32949c['target'])||new _e(_0x4fecc8,{'name':'envAtlas','width':(_0x32949c==null?void(-0x1582+-0x4*-0x3f5+0x2*0x2d7):_0x32949c['size'])||-0x749*-0x5+-0x5*-0x222+0x2d17*-0x1,'height':(_0x32949c==null?void(-0x1*0x140f+-0x1b8e+-0x11*-0x2cd):_0x32949c['size'])||-0xd*-0xc7+0x9cb*-0x1+0x1b0,'format':_0x21df33,'type':Io,'projection':sp,'addressU':ue,'addressV':ue,'mipmaps':!(-0x17a9+-0x1cd1*-0x1+-0x527*0x1)});Q['pushGpuMar'+'ker'](_0x4fecc8,'mipmaps');const _0x471904=_0x156c80['width']/(-0xbd3*0x3+0x5*-0x615+0x43e2),_0x11104c=new ae(0x24*-0xa9+0x1*0x1609+0x1*0x1bb,0x287*-0xd+0x1b*0x101+0x170*0x4,(0xc1*0x2e+-0x12ea+-0xdc4)*_0x471904,(0xd83+-0x1ebb*-0x1+-0x159f*0x2)*_0x471904),_0x3f1acf=vd(-0xfcb*-0x1+0xcde+0x61*-0x49)-vd(-0x1150+0x4*0x38+0x144*0xd);for(let _0x18cdb7=0x1f*-0xd9+-0x3ec+0x1e33;_0x18cdb7<_0x3f1acf;++_0x18cdb7)fi(_0xf9d434,_0x156c80,{'numSamples':0x1,'rect':_0x11104c,'seamPixels':_0x471904}),_0x11104c['x']+=_0x11104c['w'],_0x11104c['y']+=_0x11104c['w'],_0x11104c['z']=Math['max'](-0x2*0x413+-0x2543+0x2d6a,Math['floor'](_0x11104c['z']*(-0x1*-0xda+-0x3*0x25c+0x63a+0.5))),_0x11104c['w']=Math['max'](0x2704+0x1f82+0x4685*-0x1,Math['floor'](_0x11104c['w']*(-0x2a5*0x7+0xf26+0x35d+0.5)));Q['popGpuMark'+'er'](_0x4fecc8),Q['pushGpuMar'+'ker'](_0x4fecc8,'reflection'+'s'),_0x11104c['set'](0x1a*-0x91+-0x1731*-0x1+0x1*-0x877,(-0x3f1*-0x6+-0x5c1+0x361*-0x5)*_0x471904,(-0xec6+0x1aad*0x1+-0x1*0xae7)*_0x471904,(0xbb*0x14+0x587*0x1+0x13a3*-0x1)*_0x471904);for(let _0x2c965e=-0xd27+-0xbf5+0x1*0x191d;_0x2c965e<0x6f0+0x165d+-0x1d46;++_0x2c965e)fi(_0xf9d434,_0x156c80,{'numSamples':(_0x32949c==null?void(0x3*0x7a1+0x417+-0x1afa*0x1):_0x32949c['numReflect'+'ionSamples'])||0x177f+0x1ce1*-0x1+0x962,'distribution':(_0x32949c==null?void(-0x3*0x39+-0x312*0xa+0x1f5f):_0x32949c['distributi'+'on'])||'ggx','specularPower':Math['max'](-0x1c*0xd6+-0xe39+0x25a2,-0x23*0x76+-0x4*-0x232+0x6*0x28f>>_0x2c965e*(-0x222d+-0x1*-0x1a3f+0x7f0)),'rect':_0x11104c,'seamPixels':_0x471904}),_0x11104c['y']+=_0x11104c['w'],_0x11104c['z']=Math['max'](0x87e*-0x2+0x4cb*-0x6+0x2dbf,Math['floor'](_0x11104c['z']*(0x8*0x42e+0x24f6+0x2333*-0x2+0.5))),_0x11104c['w']=Math['max'](-0x2da+-0x1bb9+0x1e94,Math['floor'](_0x11104c['w']*(-0x74*-0x29+0x1*0x1486+-0x271a+0.5)));return Q['popGpuMark'+'er'](_0x4fecc8),Q['pushGpuMar'+'ker'](_0x4fecc8,'ambient'),_0x11104c['set']((0xc0e+-0x633*0x2+0xc*0x12)*_0x471904,(0x1*-0x605+-0x51*0x47+0x1dfc)*_0x471904,(0x127*-0x9+-0x1809+0x22a8)*_0x471904,(-0xe45+0x80b+0x65a)*_0x471904),fi(_0xf9d434,_0x156c80,{'numSamples':(_0x32949c==null?void(0x2177+0x3e*0x59+-0x3705):_0x32949c['numAmbient'+'Samples'])||-0x9*0x5c+-0x149*-0xb+-0x2e7,'distribution':'lambert','rect':_0x11104c,'seamPixels':_0x471904}),Q['popGpuMark'+'er'](_0x4fecc8),Q['popGpuMark'+'er'](_0x4fecc8),_0x156c80;}static['generatePr'+'efilteredA'+'tlas'](_0x47c005,_0x367789){const _0x2084bb=_0x47c005[0xcf2+0x111d+-0x1e0f]['device'],_0x57d72a=_0x47c005[-0x6c3*-0x5+-0x21a9+-0x26*0x1]['format'],_0x20b06a=_0x47c005[-0xd2a+-0x1*0x1aff+0x2829]['type'];Q['pushGpuMar'+'ker'](_0x2084bb,'genPrefilt'+'eredAtlas');const _0x3a90a1=(_0x367789==null?void(-0x36d*-0x4+0x1c8a+-0x2a3e):_0x367789['target'])||new _e(_0x2084bb,{'name':'envPrefilt'+'eredAtlas','width':(_0x367789==null?void(0x1b9a+0x4*-0x2bd+-0x10a6):_0x367789['size'])||0x45*-0x2e+0x857+0x21*0x2f,'height':(_0x367789==null?void(-0x2*0xa13+0x2444+0x1*-0x101e):_0x367789['size'])||0x1ee*0xe+-0x1*0x809+-0x3f*0x45,'format':_0x57d72a,'type':_0x20b06a,'projection':sp,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*0x37d+0x22d2+0x322*-0xa)});Q['pushGpuMar'+'ker'](_0x2084bb,'mipmaps');const _0x5afab9=_0x3a90a1['width']/(-0x9*-0x18d+0x10d*0x1f+-0x23a*0x14),_0x344053=new ae(-0x23ab+-0x93a+-0x3*-0xef7,-0x13d5+0x43b*-0x3+0x2086,(-0xa4e+-0x13cb+0x63*0x53)*_0x5afab9,(0xe3*0x1b+0x1*-0x538+-0x11b9*0x1)*_0x5afab9),_0x396054=vd(-0x1fa4+0x4a*-0x65+0x3ed6);for(let _0x2c6245=-0x3d*-0x55+-0x67*-0x31+0x1*-0x27f8;_0x2c6245<_0x396054;++_0x2c6245)fi(_0x47c005[0x1c0b+0x1c19+-0x3824],_0x3a90a1,{'numSamples':0x1,'rect':_0x344053,'seamPixels':_0x5afab9}),_0x344053['x']+=_0x344053['w'],_0x344053['y']+=_0x344053['w'],_0x344053['z']=Math['max'](-0x6eb*-0x1+-0x1*0x19d6+-0x1c*-0xad,Math['floor'](_0x344053['z']*(-0x26*0x2f+0x34*-0x67+-0xdf3*-0x2+0.5))),_0x344053['w']=Math['max'](-0x1784+0x15d*-0x1c+0x3db1*0x1,Math['floor'](_0x344053['w']*(0x32*-0x1f+0x43e+0x1d0+0.5)));Q['popGpuMark'+'er'](_0x2084bb),Q['pushGpuMar'+'ker'](_0x2084bb,'reflection'+'s'),_0x344053['set'](0x2070+0xd9*-0x1+-0x1*0x1f97,(-0x11d3+0x123f*0x1+0x4*0x25)*_0x5afab9,(0x1ff5+-0x1*-0x1ec7+-0x3dbc)*_0x5afab9,(-0x56e+0x1eb5+-0x18c7)*_0x5afab9);for(let _0x24c929=-0x1883+-0x2621+0x3ea5;_0x24c929<_0x47c005['length'];++_0x24c929)fi(_0x47c005[_0x24c929],_0x3a90a1,{'numSamples':0x1,'rect':_0x344053,'seamPixels':_0x5afab9}),_0x344053['y']+=_0x344053['w'],_0x344053['z']=Math['max'](-0x2*-0x263+-0x1f80+0x1abb,Math['floor'](_0x344053['z']*(-0x1*-0x14f+-0x2db*-0x4+-0xcbb+0.5))),_0x344053['w']=Math['max'](0xb7c+0x155+-0xcd0,Math['floor'](_0x344053['w']*(0x29*0x99+-0x7*-0x32f+-0x2eca+0.5)));return Q['popGpuMark'+'er'](_0x2084bb),Q['pushGpuMar'+'ker'](_0x2084bb,'ambient'),_0x344053['set']((-0x1d70+-0x4d*-0x71+0x11*-0x3d)*_0x5afab9,(0x1a*0xab+0x1b90+0x147*-0x22)*_0x5afab9,(-0x20de+0x16*-0x162+-0x6*-0xa97)*_0x5afab9,(-0x2b9*-0x5+-0xc9e+0x1*-0xdf)*_0x5afab9),_0x367789!=null&&_0x367789['legacyAmbi'+'ent']?fi(_0x47c005[0x20f6*0x1+0x2616+-0x4707],_0x3a90a1,{'numSamples':0x1,'rect':_0x344053,'seamPixels':_0x5afab9}):fi(_0x47c005[0x21f0+0x22b3+-0x3*0x16e1],_0x3a90a1,{'numSamples':(_0x367789==null?void(0x232+0x208d*0x1+-0x22bf):_0x367789['numSamples'])||0x1*0x412+0xd82+-0x994,'distribution':'lambert','rect':_0x344053,'seamPixels':_0x5afab9}),Q['popGpuMark'+'er'](_0x2084bb),Q['popGpuMark'+'er'](_0x2084bb),_0x3a90a1;}}const SE={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},t_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},yE=(_0x273c88,_0x4a4399)=>{const _0x550160=_0x273c88['split']('.')['map'](_0x3f44c0=>parseInt(_0x3f44c0,0xe12+0x17a5+-0x25ad)),_0x361bc8=_0x4a4399['split']('.')['map'](_0x3189a3=>parseInt(_0x3189a3,-0x2b*-0xcd+-0xa42+-0x1823*0x1));return _0x550160[0x3d*-0x81+-0x777+0xa*0x3d2]<_0x361bc8[0xf64+0x1b81+-0x8b*0x4f]||_0x550160[0x2170*-0x1+0x163f+0xb31]===_0x361bc8[0xd6f+-0x806*0x2+0x29d]&&_0x550160[0xfa2+-0xd3*-0x2f+-0x1b2f*0x2]<_0x361bc8[-0x5*-0x26a+-0x502+0x8b*-0xd];},vE=(_0x45b1b5,_0x5950b4)=>{for(const _0x58fdf1 of _0x45b1b5['keys']())if(t_['hasOwnProp'+'erty'](_0x58fdf1)){const _0x4ff6cc=t_[_0x58fdf1];M['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x58fdf1+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x4ff6cc+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x5959b3=SE[_0x58fdf1];_0x5959b3&&(!_0x5950b4||yE(_0x5950b4,_0x5959b3))&&M['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x58fdf1+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x5959b3+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x5950b4||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},xd={'vertex_normal':cs,'vertex_tangent':ci,'vertex_texCoord0':Yt,'vertex_texCoord1':da,'vertex_color':kt,'vertex_boneWeights':li,'vertex_boneIndices':ns};class xE{constructor(_0x34ab74,_0x116c45,_0x81e212=!(0xf67*-0x1+0x11da*-0x1+0x2141)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x34ab74,this['options']=_0x116c45);const _0x14d2f9=_0x116c45['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x34ab74['isWebGPU']&&_0x81e212&&(_0x14d2f9!=null&&_0x14d2f9['useWGSL'])?st:ze,this['attributes']={'vertex_position':Pe},_0x116c45['userAttrib'+'utes']){for(const [_0x5abfeb,_0x5a2038]of Object['entries'](_0x116c45['userAttrib'+'utes']))this['attributes'][_0x5a2038]=_0x5abfeb;}const _0xfd7088=Ce['get'](_0x34ab74,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0xfd7088),_0x14d2f9){const _0x1ad0de=this['shaderLang'+'uage']===ze?_0x14d2f9['glsl']:_0x14d2f9['wgsl'];M['call'](()=>{vE(_0x1ad0de,_0x14d2f9['version']);}),_0x1ad0de['forEach']((_0x5908bf,_0x1deab6)=>{for(const _0x561e67 in xd)xd['hasOwnProp'+'erty'](_0x561e67)&&_0x5908bf['indexOf'](_0x561e67)>=0x1b25+0x1*-0xe03+0x691*-0x2&&(this['attributes'][_0x561e67]=xd[_0x561e67]);this['chunks']['set'](_0x1deab6,_0x5908bf);});}this['shaderPass'+'Info']=hi['get'](this['device'])['getByIndex'](_0x116c45['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x116c45['lights']['length']>-0x1163*0x1+0x14dd+-0x2*0x1bd||_0x116c45['dirLightMa'+'pEnabled']||_0x116c45['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x116c45['reflection'+'Source']!==nr,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x116c45['useSpecula'+'r']||_0x116c45['ambientSH']||_0x116c45['useHeights']||_0x116c45['enableGGXS'+'pecular']||_0x116c45['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x116c45['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x116c45['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x116c45['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x116c45['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x493acc,_0x2bce48,_0x320668=''){_0x493acc&&this['fDefines']['set'](_0x2bce48,_0x320668);}['generateVe'+'rtexShader'](_0x1ffaa4,_0x289d56,_0x2584fb){const {options:_0x371948,vDefines:_0x50106e,attributes:_0x4c1c11}=this,_0x563cbb=new Map();if(_0x563cbb['set']('vPositionW','vec3'),(_0x371948['nineSliced'+'Mode']===Et||_0x371948['nineSliced'+'Mode']===At)&&_0x50106e['set']('NINESLICED',!(0x30a*-0x9+0x382*-0xa+0x3e6e)),this['options']['linearDept'+'h']&&(_0x50106e['set']('LINEAR_DEP'+'TH',!(-0x62f*0x6+-0x1107+-0x1*-0x3621)),_0x563cbb['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x50106e['set']('NORMALS',!(0x2180+-0x2349+0x1*0x1c9)),this['options']['useInstanc'+'ing']){const _0x39970c=Ce['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x39970c['get']('transformI'+'nstancingV'+'S')&&(_0x4c1c11['instance_l'+'ine1']=ju,_0x4c1c11['instance_l'+'ine2']=Yu,_0x4c1c11['instance_l'+'ine3']=Ku,_0x4c1c11['instance_l'+'ine4']=_n);}this['needsNorma'+'l']&&(_0x4c1c11['vertex_nor'+'mal']=cs,_0x563cbb['set']('vNormalW','vec3'),_0x371948['hasTangent'+'s']&&(_0x371948['useHeights']||_0x371948['useNormals']||_0x371948['useClearCo'+'atNormals']||_0x371948['enableGGXS'+'pecular'])?(_0x50106e['set']('TANGENTS',!(-0x1a7+0x8a*-0xa+0x3*0x259)),_0x4c1c11['vertex_tan'+'gent']=ci,_0x563cbb['set']('vTangentW','vec3'),_0x563cbb['set']('vBinormalW','vec3')):_0x371948['enableGGXS'+'pecular']&&(_0x50106e['set']('GGX_SPECUL'+'AR',!(-0x2256+-0x1850+-0x3aa6*-0x1)),_0x563cbb['set']('vObjectSpa'+'ceUpW','vec3')));const _0x210db7=-0xf7c*-0x2+-0x9da+0x1*-0x151c;for(let _0x4fd89a=-0xecf*0x1+-0xfd0+0xc9*0x27;_0x4fd89a<_0x210db7;_0x4fd89a++)_0x1ffaa4[_0x4fd89a]&&(_0x50106e['set']('UV'+_0x4fd89a,!(0x1d2c+-0x909+-0x1423)),_0x4c1c11['vertex_tex'+'Coord'+_0x4fd89a]='TEXCOORD'+_0x4fd89a),_0x289d56[_0x4fd89a]&&(_0x50106e['set']('UV'+_0x4fd89a+('_UNMODIFIE'+'D'),!(-0x102d+0x1*0x103f+-0x12)),_0x563cbb['set']('vUv'+_0x4fd89a,'vec2'));let _0x52fded=0xbb1+-0xe2*0x4+0x1*-0x829;const _0x5742a1=new Set();_0x2584fb['forEach'](_0xbe414=>{const {id:_0x181c00,uv:_0x5cb747,name:_0x16ccbd}=_0xbe414,_0x399dc3=_0x181c00+_0x5cb747*(-0x82f+-0x17*-0x17+0x682);if(!_0x5742a1['has'](_0x399dc3)){_0x5742a1['add'](_0x399dc3),_0x563cbb['set']('vUV'+_0x5cb747+'_'+_0x181c00,'vec2');const _0x3f5aff='texture_'+_0x16ccbd+('MapTransfo'+'rm');_0x50106e['set']('{TRANSFORM'+'_NAME_'+_0x52fded+'}',_0x3f5aff),_0x50106e['set']('{TRANSFORM'+'_UV_'+_0x52fded+'}',_0x5cb747),_0x50106e['set']('{TRANSFORM'+'_ID_'+_0x52fded+'}',_0x181c00),_0x52fded++;}}),_0x50106e['set']('UV_TRANSFO'+'RMS_COUNT',_0x52fded),_0x371948['vertexColo'+'rs']&&(_0x4c1c11['vertex_col'+'or']=kt,_0x50106e['set']('VERTEX_COL'+'OR',!(0xd93*0x1+-0x8f+0x682*-0x2)),_0x563cbb['set']('vVertexCol'+'or','vec4')),_0x371948['useMsdf']&&_0x371948['msdfTextAt'+'tribute']&&(_0x4c1c11['vertex_out'+'lineParame'+'ters']=Po,_0x4c1c11['vertex_sha'+'dowParamet'+'ers']=Mo,_0x50106e['set']('MSDF',!(-0x246e+-0x1cef+0x415d))),(_0x371948['useMorphPo'+'sition']||_0x371948['useMorphNo'+'rmal'])&&(_0x50106e['set']('MORPHING',!(0x1*-0x220a+0x85*0x27+0xdc7*0x1)),_0x371948['useMorphTe'+'xtureBased'+'Int']&&_0x50106e['set']('MORPHING_I'+'NT',!(-0x1*-0x255f+0x1915*0x1+0x23b*-0x1c)),_0x371948['useMorphPo'+'sition']&&_0x50106e['set']('MORPHING_P'+'OSITION',!(-0x3df*-0x9+-0x17*-0xad+-0x1*0x3262)),_0x371948['useMorphNo'+'rmal']&&_0x50106e['set']('MORPHING_N'+'ORMAL',!(0x1070+-0x1481+-0x1*-0x411)),_0x4c1c11['morph_vert'+'ex_id']=_n),_0x371948['skin']&&(_0x4c1c11['vertex_bon'+'eIndices']=ns,_0x371948['batch']?_0x50106e['set']('BATCH',!(0x5*-0x17b+0x20*-0xa9+0x1c87)):(_0x4c1c11['vertex_bon'+'eWeights']=li,_0x50106e['set']('SKIN',!(-0xa18+0x221*-0x8+0x1b20)))),_0x371948['useInstanc'+'ing']&&_0x50106e['set']('INSTANCING',!(0x3*0x4d3+-0x56f+-0x90a)),_0x371948['screenSpac'+'e']&&_0x50106e['set']('SCREENSPAC'+'E',!(-0x77f+-0x931+0x10b0)),_0x371948['pixelSnap']&&_0x50106e['set']('PIXELSNAP',!(-0x2556+0x655*0x1+0x1f01)),_0x563cbb['forEach']((_0xd1c93e,_0x25c497)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x25c497['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===st?'varying\x20'+_0x25c497+':\x20'+GS['get'](_0xd1c93e)+';\x0a':'varying\x20'+_0xd1c93e+'\x20'+_0x25c497+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x14d2fa,_0x5d5e6a){const _0x1ca9a5=this['fDefines'],_0x501dd7=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x501dd7['lights']['length']),_0x14d2fa&&_0x1ca9a5['set']('AREA_LIGHT'+'S',!(0xba5+-0xbf9*-0x3+-0x2f90)),_0x5d5e6a&&this['lighting']&&(_0x1ca9a5['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0xa3*0x2+0x2*-0x470+-0x2*-0x3cd)),_0x501dd7['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x1ca9a5['set']('CLUSTER_CO'+'OKIES',!(-0x1799*-0x1+-0x2*0xb09+0x187*-0x1)),_0x501dd7['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x1ca9a5['set']('CLUSTER_AR'+'EALIGHTS',!(0xa*0xa7+-0x471*-0x1+-0xaf7)),_0x501dd7['lightMaskD'+'ynamic']&&_0x1ca9a5['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(-0x163*0x3+-0x97*0x14+0x1*0xff5)),_0x501dd7['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x501dd7['noShadow'])){const _0x3c4d3f=Bi['get'](_0x501dd7['clusteredL'+'ightingSha'+'dowType']);_0x1ca9a5['set']('CLUSTER_SH'+'ADOWS',!(0xec2+0x2059+-0x2f1b)),_0x1ca9a5['set']('SHADOW_KIN'+'D_'+_0x3c4d3f['kind'],!(0x1030+-0x1*0x869+-0x7c7)),_0x1ca9a5['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x3c4d3f['kind'],!(-0x913*-0x3+0x1d*0x8b+0xb*-0x3e8));}for(let _0xb9d5d3=0x23c8+-0x119*0x22+-0xc5*-0x2;_0xb9d5d3<_0x501dd7['lights']['length'];_0xb9d5d3++){const _0x18467d=_0x501dd7['lights'][_0xb9d5d3],_0x13983a=_0x18467d['_type'];if(_0x5d5e6a&&_0x13983a!==ve)continue;const _0x31a5a5=_0x14d2fa&&_0x18467d['_shape']?_0x18467d['_shape']:Vs,_0x5afa23=_0x18467d['_shadowTyp'+'e'],_0x2bcc7a=_0x18467d['castShadow'+'s']&&!_0x501dd7['noShadow'],_0x4175ec=Bi['get'](_0x5afa23);M['assert'](_0x4175ec),_0x1ca9a5['set']('LIGHT'+_0xb9d5d3,!(0x1*-0x24d7+-0x3*0x62+0x25fd)),_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'TYPE',''+Cp[_0x13983a]),_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'SHADOWTYPE',''+_0x4175ec['name']),_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'SHAPE',''+$T[_0x31a5a5]),_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'FALLOFF',''+XT[_0x18467d['_falloffMo'+'de']]),_0x18467d['affectSpec'+'ularity']&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('AFFECT_SPE'+'CULARITY'),!(-0x1*0x192e+0x1*0x22fe+-0x9d0)),_0x18467d['_cookie']&&(_0x13983a===Ke&&!_0x18467d['_cookie']['_cubemap']||_0x13983a===Ye&&_0x18467d['_cookie']['_cubemap'])&&(_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'COOKIE',!(0x232c*0x1+-0x229c+-0x90)),_0x1ca9a5['set']('{LIGHT'+_0xb9d5d3+('COOKIE_CHA'+'NNEL}'),_0x18467d['_cookieCha'+'nnel']),_0x13983a===Ke&&(_0x18467d['_cookieTra'+'nsform']&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('COOKIE_TRA'+'NSFORM'),!(0x1b5c+-0xc7*0x1f+-0x343*0x1)),_0x18467d['_cookieFal'+'loff']&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('COOKIE_FAL'+'LOFF'),!(0x1ff6+-0x6*0x2e9+0x4*-0x3a0)))),_0x2bcc7a&&(_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'CASTSHADOW',!(0x699*-0x3+0x4*0x5cc+0xb*-0x4f)),_0x4175ec['pcf']&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+'SHADOW_PCF',!(0xb5d*-0x1+0x1d40+-0x11e3)),_0x18467d['_normalOff'+'setBias']&&!_0x18467d['_isVsm']&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(-0x35*-0xb9+0x1*0x671+0xa6*-0x45)),_0x13983a===ve&&(_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_SA'+'MPLE_ORTHO'),!(-0x1090*-0x1+0x4a*0x55+0x1e*-0x15f)),_0x18467d['cascadeBle'+'nd']>0x35*0x6e+0x731*-0x1+-0x1*0xf95&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(-0xbaa+-0x2*-0x3e5+0x3e0)),_0x18467d['numCascade'+'s']>-0x11b*0x2+-0x24a9+0x4*0x9b8&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_CA'+'SCADES'),!(0xf9d*0x1+0x1d1*-0x1+-0xdcc))),(_0x4175ec['pcf']||_0x4175ec['pcss']||this['device']['isWebGPU'])&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(-0xf62+-0x1eaa+-0x1706*-0x2)),_0x13983a===Ye&&_0x1ca9a5['set']('LIGHT'+_0xb9d5d3+('_SHADOW_SA'+'MPLE_POINT'),!(0x25eb+-0x1*-0x2209+0x47f4*-0x1))),_0x2bcc7a&&(_0x1ca9a5['set']('SHADOW_KIN'+'D_'+_0x4175ec['kind'],!(-0x257*0x3+0x4*0x1fe+0x1*-0xf3)),_0x13983a===ve&&_0x1ca9a5['set']('SHADOW_DIR'+'ECTIONAL',!(0x10*-0x2f+0x40c+-0x11c)));}}['prepareFor'+'wardPass'](_0x4aecc3){const {options:_0x34653b}=this,_0xe0d439=_0x34653b['clusteredL'+'ightingEna'+'bled']&&_0x34653b['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x34653b['lights']['some'](_0x3f1948=>_0x3f1948['_shape']&&_0x3f1948['_shape']!==Vs),_0x4146a4=!_0x34653b['lightMapEn'+'abled']||_0x34653b['lightMapWi'+'thoutAmbie'+'nt'],_0x5042d4=this['needsNorma'+'l']&&(_0x34653b['useNormals']||_0x34653b['useClearCo'+'atNormals']||_0x34653b['enableGGXS'+'pecular']&&!_0x34653b['useHeights']);_0x34653b['useSpecula'+'r']&&(this['fDefineSet'](!(-0x8*0x3a8+-0x692+0x23d2),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x34653b['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x34653b['fresnelMod'+'el']>-0x2345+-0x1f01*-0x1+0x1c*0x27,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x34653b['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x34653b['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x34653b['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x34653b['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x34653b['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x34653b['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x34653b['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x34653b['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x34653b['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x34653b['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x34653b['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x34653b['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x34653b['skyboxInte'+'nsity']>0x1fc5+0x1716+-0x36db,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x34653b['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x34653b['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x5042d4,'LIT_TBN'),this['fDefineSet'](_0x4146a4,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x34653b['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x34653b['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x34653b['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x34653b['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x34653b['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x34653b['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x34653b['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x34653b['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x34653b['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x34653b['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x34653b['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x34653b['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x34653b['useAo'],'LIT_AO'),this['fDefineSet'](_0x34653b['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x34653b['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x34653b['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x34653b['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(0xa55*0x1+-0x1f99+-0x2*-0xaa2),'LIT_FRESNE'+'L_MODEL',HT[_0x34653b['fresnelMod'+'el']]),this['fDefineSet'](!(-0x1f*-0x71+0x146*0x19+-0x10f*0x2b),'LIT_NONE_S'+'LICE_MODE',iw[_0x34653b['nineSliced'+'Mode']]),this['fDefineSet'](!(0x1b8f+-0x6d1+-0x14be),'LIT_BLEND_'+'TYPE',sy[_0x34653b['blendType']]),this['fDefineSet'](!(0x2*-0xda+-0x1b90+-0x1d44*-0x1),'LIT_CUBEMA'+'P_PROJECTI'+'ON',QT[_0x34653b['cubeMapPro'+'jection']]),this['fDefineSet'](!(-0x3c*-0x95+0x1e4a+-0x1*0x4136),'LIT_OCCLUD'+'E_SPECULAR',ew[_0x34653b['occludeSpe'+'cular']]),this['fDefineSet'](!(0x1f2c+0x2b*-0x9f+-0x9*0x7f),'LIT_REFLEC'+'TION_SOURC'+'E',tw[_0x34653b['reflection'+'Source']]),this['fDefineSet'](!(-0x60e+0x26a1+-0x10d*0x1f),'LIT_AMBIEN'+'T_SOURCE',sw[_0x34653b['ambientSou'+'rce']]),this['fDefineSet'](!(-0xe5e+0xf06+0x2a*-0x4),'{lightingU'+'v}',_0x4aecc3??''),this['fDefineSet'](!(0xf46+-0x41f*-0x1+-0x1365),'{reflectio'+'nDecode}',lr['decodeFunc'](_0x34653b['reflection'+'Encoding'])),this['fDefineSet'](!(0x8a6+-0xa32+0x18c),'{reflectio'+'nCubemapDe'+'code}',lr['decodeFunc'](_0x34653b['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(0x18b*-0x3+0x185*-0x3+-0x6*-0x188),'{ambientDe'+'code}',lr['decodeFunc'](_0x34653b['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0xe0d439,_0x34653b['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x293902}=this,_0x276684=this['shaderPass'+'Info']['lightType'],_0x77eb1b=this['shaderPass'+'Info']['shadowType'],_0x13f440=Bi['get'](_0x77eb1b);M['assert'](_0x13f440);const _0x5070c4=_0x276684===ve||!_0x13f440['vsm']&&_0x276684===Ke;this['fDefineSet'](_0x5070c4,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0x1*-0x7cf+-0x1*0x653+-0x26*0xa),'LIGHT_TYPE',''+Cp[_0x276684]),this['fDefineSet'](!(0x1*-0x14c+0x2*-0x1018+0x217c),'SHADOW_TYP'+'E',''+_0x13f440['name']),this['fDefineSet'](_0x293902['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x37c95d,_0x5a9d6c,_0x231ce9){const _0x3288a8=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x37c95d??''),this['includes']['set']('frontendCo'+'dePS',_0x5a9d6c??''),_0x3288a8['pass']===Fn||_0x3288a8['pass']===ll||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x231ce9)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class TE{constructor(){h(this,'hasTangent'+'s',!(-0x379+0x78b+-0x411)),h(this,'shaderChun'+'ks',null),h(this,'pass',0x1c46+-0x450+-0x17f6),h(this,'alphaTest',!(0x1160+0x425*-0x6+-0x65*-0x13)),h(this,'blendType',ys),h(this,'separateAm'+'bient',!(-0x106e*-0x2+-0x11e9+-0x779*0x2)),h(this,'screenSpac'+'e',!(-0x771*-0x3+0x1aad*0x1+-0x71*0x6f)),h(this,'skin',!(-0xbb3+0xd7a+-0xe3*0x2)),h(this,'batch',!(-0x1d*0xe6+0x47*-0x65+0x3612)),h(this,'useInstanc'+'ing',!(-0xa73+-0x2*-0x11d8+0xbe*-0x22)),h(this,'useMorphPo'+'sition',!(0x137d*0x1+0x56d+-0x18e9)),h(this,'useMorphNo'+'rmal',!(-0x1d67+-0x1204+0x2f6c*0x1)),h(this,'useMorphTe'+'xtureBased'+'Int',!(-0x1*0xf+0xb7*-0x17+-0x19*-0xa9)),h(this,'nineSliced'+'Mode',-0x59f*-0x2+0xa96+0xfe*-0x16),h(this,'clusteredL'+'ightingEna'+'bled',!(0x2229+-0x1*-0x10ea+-0x3313)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(0x1*-0x209c+-0xa56+0x2af3)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0x7c0+0x3d0*-0x1+0x9*0x149)),h(this,'clusteredL'+'ightingSha'+'dowType',-0x15af+0x72b*-0x1+-0xe6d*-0x2),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(-0x2250+0xc4d+0x1604)),h(this,'vertexColo'+'rs',!(-0x18c+-0x2b*0x19+-0x1*-0x5c0)),h(this,'lightMapEn'+'abled',!(-0x1e49+0x486*-0x1+0x2*0x1168)),h(this,'dirLightMa'+'pEnabled',!(0x112c+-0x20c9+0x2*0x7cf)),h(this,'useHeights',!(0x88e+-0xbc5*0x1+-0x1*-0x338)),h(this,'useNormals',!(0x359+-0xf84+0xc2c)),h(this,'useClearCo'+'atNormals',!(-0x1*0x15bb+0x1*-0x17fe+0x2dba)),h(this,'useAo',!(0x5*0x7b9+0x24*0xcf+-0x43b8)),h(this,'diffuseMap'+'Enabled',!(0x1879+0x3aa*-0x4+-0x4*0x274)),h(this,'pixelSnap',!(0x1d7f+-0x1fb5+0x237)),h(this,'ambientSH',!(0x4*0x152+0x2f5*-0x3+0x398)),h(this,'ssao',!(-0x147b+-0x2c2*0x5+0x1123*0x2)),h(this,'twoSidedLi'+'ghting',!(0x1*-0x267b+0xf93+-0x3*-0x7a3)),h(this,'occludeDir'+'ect',!(0x1edb+-0x156+-0x1d84)),h(this,'occludeSpe'+'cular',0x1*-0x1915+0x1*0xc1a+0xcfb),h(this,'occludeSpe'+'cularFloat',!(-0x2*0x623+0x51c*-0x1+0x1163)),h(this,'useMsdf',!(-0x2336+0x5e9*-0x5+0x33d*0x14)),h(this,'msdfTextAt'+'tribute',!(-0x226d*-0x1+-0xa6f*0x2+-0xd8e)),h(this,'alphaToCov'+'erage',!(0xa*-0xda+-0x406+0xc8b)),h(this,'opacityFad'+'esSpecular',!(-0xcb*0xf+-0x13cb+0x1ab*0x13)),h(this,'opacityDit'+'her',ra),h(this,'opacitySha'+'dowDither',ra),h(this,'cubeMapPro'+'jection',0x257a+-0x6c9*0x1+-0x1eb1),h(this,'useSpecula'+'r',!(0x1e8f*0x1+0x1*0x3fd+0xef*-0x25)),h(this,'useSpecula'+'rityFactor',!(0x27*0xa0+-0x50f*0x2+-0xe41)),h(this,'enableGGXS'+'pecular',!(0x1e25+0x1932+-0x2*0x1bab)),h(this,'fresnelMod'+'el',-0x2305+0x16da+0xc2b),h(this,'useRefract'+'ion',!(-0x1*-0x24f7+0xb0+-0x25a6)),h(this,'useClearCo'+'at',!(0x151*-0x4+0x2442+-0x1efd)),h(this,'useSheen',!(0xe*0x12b+0xbaa+-0x47*0x65)),h(this,'useIridesc'+'ence',!(0x2d4*0x5+0x1f81+-0x2da4)),h(this,'useMetalne'+'ss',!(0x327*-0x7+-0x1f54+0x3566)),h(this,'useDynamic'+'Refraction',!(-0xa0d+-0x8*-0x1fb+0x72*-0xd)),h(this,'dispersion',!(0xed2+-0xfaa+0xd9)),h(this,'fog',On),h(this,'gamma',ol),h(this,'toneMap',-(-0xc27+-0x146e+0x2096)),h(this,'reflection'+'Source',nr),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',0xd10+-0x1*0x11ed+0x7*0xb2),h(this,'useCubeMap'+'Rotation',!(0x397*-0x9+0x1*0x1145+-0xf0b*-0x1)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(-0x209*-0x9+0x268b+-0x38db)),h(this,'lights',[]),h(this,'noShadow',!(-0x74b*0x1+0x2a7+0x4a5)),h(this,'lightMaskD'+'ynamic',-0x1*-0x659+0x1ee2*-0x1+0x1*0x1889),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(-0xa*-0xf4+0x51*0x6d+-0x2c04)),h(this,'shadowCatc'+'her',!(-0xcc1*0x3+0x9a9*0x1+0x1c9b));}}class Yh{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(0x20d1+0x1*0x1a85+-0x1*0x3b55)),h(this,'specularTi'+'nt',!(0x1*0x634+-0x1e19*0x1+-0x26*-0xa1)),h(this,'metalnessT'+'int',!(0x350*-0x1+-0x127+0x478)),h(this,'glossTint',!(-0x1*-0x761+0x175d*-0x1+0xffd)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(-0x9fe*0x1+-0x485*0x1+-0x742*-0x2)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(0x20c+-0x164e+-0x13*-0x111)),h(this,'clearCoatP'+'ackedNorma'+'l',!(-0xb*-0x14b+0x3*-0x28f+-0x68b)),h(this,'glossInver'+'t',!(0x26*0x88+-0x1*-0x407+-0x1836)),h(this,'sheenGloss'+'Invert',!(-0x1024*0x1+0x57a*0x4+-0x3b*0x19)),h(this,'clearCoatG'+'lossInvert',!(0x4bc*-0x8+0x1*-0x1d27+0x4308)),h(this,'useAO',!(0x171b+-0x21d5+-0x1*-0xabb)),h(this,'litOptions',new TE());}get['pass'](){return this['litOptions']['pass'];}}const Iy={'generateKey'(_0x206322){return'lit'+Object['keys'](_0x206322)['sort']()['map'](_0xbcb704=>{var _0x35f5c5;return _0xbcb704==='shaderChun'+'ks'?((_0x35f5c5=_0x206322['shaderChun'+'ks'])==null?void(-0x1*0x2041+-0x40f*0x1+-0x14c*-0x1c):_0x35f5c5['key'])??'':_0xbcb704==='lights'?Iy['generateLi'+'ghtsKey'](_0x206322):_0xbcb704+_0x206322[_0xbcb704];})['join']('\x0a');},'generateLightsKey'(_0x49975a){return'lights:'+_0x49975a['lights']['map'](_0x27f85b=>!_0x49975a['clusteredL'+'ightingEna'+'bled']||_0x27f85b['_type']===ve?_0x27f85b['key']+',':'')['join']('');}},cn=[],Td=_0xb6743d=>Object['keys'](_0xb6743d)['filter'](_0x42a922=>_0x42a922!=='litOptions')['sort']();class wE extends aa{constructor(){super(...arguments),h(this,'optionsCon'+'text',new Yh()),h(this,'optionsCon'+'textMin',new Yh());}['generateKe'+'y'](_0x4bd243){let _0x3b9122;return _0x4bd243===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Td(_0x4bd243)),_0x3b9122=this['propsMin']):_0x4bd243===this['optionsCon'+'text']?(this['props']||(this['props']=Td(_0x4bd243)),_0x3b9122=this['props']):_0x3b9122=Td(_0x4bd243),'standard:\x0a'+aa['definesHas'+'h'](_0x4bd243['defines'])+'\x0a'+_0x3b9122['map'](_0x2bfc56=>_0x2bfc56+_0x4bd243[_0x2bfc56])['join']('\x0a')+Iy['generateKe'+'y'](_0x4bd243['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x430c0e,_0x5a06d1,_0x47d41f){const _0x4f3ab6=_0x47d41f[_0x430c0e],_0x264077=_0x47d41f[_0x5a06d1],_0x33e828=_0x47d41f['litOptions']['pass']===fa;let _0x2803a2;return _0x33e828&&_0x47d41f['litOptions']['nineSliced'+'Mode']===Et||_0x33e828&&_0x47d41f['litOptions']['nineSliced'+'Mode']===At?_0x2803a2='nineSliced'+'Uv':(_0x4f3ab6===-0x599*0x1+-0x13c3+0xc*0x21d?_0x2803a2='vUv'+_0x264077:_0x2803a2='vUV'+_0x264077+'_'+_0x4f3ab6,_0x47d41f['heightMap']&&_0x430c0e!=='heightMapT'+'ransform'&&(_0x2803a2+='\x20+\x20dUvOffs'+'et')),_0x2803a2;}['_validateM'+'apChunk'](_0x47d307,_0x1dd3d8,_0x38e3e5){M['call'](()=>{const _0x307df3=_0x38e3e5['get'](_0x1dd3d8)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x2ed954=[],_0x17911e=(_0x3218fb,_0x1b2cfe)=>{_0x307df3['includes'](_0x3218fb)&&_0x2ed954['push']('\x20\x20'+_0x3218fb+'\x20->\x20'+_0x1b2cfe);};[['$UV','{STD_'+_0x47d307+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x47d307+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x47d307+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x47d307+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x47d307+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x47d307+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x47d307+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x2938cf,_0xe03f88])=>_0x17911e(_0x2938cf,_0xe03f88)),[['MAPFLOAT','STD_'+_0x47d307+'_CONSTANT'],['MAPCOLOR','STD_'+_0x47d307+'_CONSTANT'],['MAPVERTEX','STD_'+_0x47d307+'_VERTEX'],['MAPTEXTURE','STD_'+_0x47d307+'_TEXTURE'],['MAPINVERT','STD_'+_0x47d307+'_INVERT']]['forEach'](([_0x3698af,_0x4a173d])=>_0x17911e(_0x3698af,_0x4a173d)),_0x307df3['includes']('$texture2D'+'SAMPLE')&&_0x17911e('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x2ed954['length']>0x121*0x17+-0xed3+-0xb24&&M['errorOnce']('Shader\x20chu'+'nk\x20'+_0x1dd3d8+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x2ed954['join']('\x0a'),{'code':_0x307df3});});}['_addMapDef'+'ines'](_0xcf6c4f,_0x2b77c5,_0x525eab,_0x2b16d4,_0x5c6ca8,_0x3f8a54,_0x38837c=null){const _0x43a53b=_0x2b77c5+'Map',_0x39dac0=_0x2b77c5['toUpperCas'+'e'](),_0x5a8d42=_0x43a53b+'Uv',_0x1e8f4f=_0x43a53b+'Identifier',_0x214d45=_0x43a53b+'Transform',_0xbc3cf3=_0x43a53b+'Channel',_0x173b53=_0x2b77c5+('VertexColo'+'rChannel'),_0x123bda=_0x2b77c5+'Tint',_0x91a73a=_0x2b77c5+('VertexColo'+'r'),_0x359881=_0x2b77c5+'Mode',_0x4c24a5=_0x2b77c5+'Invert',_0x3d7215=_0x2b16d4[_0x123bda],_0x3d517e=_0x2b16d4[_0x91a73a],_0x351ea0=_0x2b16d4[_0x43a53b],_0xe9ca69=_0x2b16d4[_0x1e8f4f],_0x5d380b=_0x2b16d4[_0x359881],_0x5ea860=_0x5c6ca8['get'](_0x525eab);if(M['assert'](_0x5ea860,'Shader\x20chu'+'nk\x20'+_0x525eab+('\x20not\x20found'+'.')),M['call'](()=>{_0x5ea860&&this['_validateM'+'apChunk'](_0x39dac0,_0x525eab,_0x5c6ca8);}),_0x351ea0){_0xcf6c4f['set']('STD_'+_0x39dac0+'_TEXTURE','');const _0x46c4cc=this['_getUvSour'+'ceExpressi'+'on'](_0x214d45,_0x5a8d42,_0x2b16d4);_0xcf6c4f['set']('{STD_'+_0x39dac0+('_TEXTURE_U'+'V}'),_0x46c4cc),_0xcf6c4f['set']('{STD_'+_0x39dac0+('_TEXTURE_C'+'HANNEL}'),_0x2b16d4[_0xbc3cf3]);const _0x2aebc8='{STD_'+_0x39dac0+('_TEXTURE_N'+'AME}');if(_0x5ea860['includes'](_0x2aebc8)){let _0x4b18bb='texture_'+_0x43a53b;const _0x1da499=_0x3f8a54[_0xe9ca69];_0x1da499?_0x4b18bb=_0x1da499:(_0x3f8a54[_0xe9ca69]=_0x4b18bb,_0xcf6c4f['set']('STD_'+_0x39dac0+('_TEXTURE_A'+'LLOCATE'),'')),_0xcf6c4f['set'](_0x2aebc8,_0x4b18bb);}if(_0x38837c){const _0x1a5805=_0x2b16d4[_0xbc3cf3]==='aaa'?'passThroug'+'h':lr['decodeFunc'](_0x38837c);_0xcf6c4f['set']('{STD_'+_0x39dac0+('_TEXTURE_D'+'ECODE}'),_0x1a5805);}}_0x3d517e&&(_0xcf6c4f['set']('STD_'+_0x39dac0+'_VERTEX',''),_0xcf6c4f['set']('{STD_'+_0x39dac0+('_VERTEX_CH'+'ANNEL}'),_0x2b16d4[_0x173b53])),_0x5d380b&&_0xcf6c4f['set']('{STD_'+_0x39dac0+('_DETAILMOD'+'E}'),_0x5d380b),_0x3d7215&&_0xcf6c4f['set']('STD_'+_0x39dac0+'_CONSTANT',''),_0x2b16d4[_0x4c24a5]&&_0xcf6c4f['set']('STD_'+_0x39dac0+'_INVERT','');}['_correctCh'+'annel'](_0x4a103d,_0x1cb7c7,_0x1b5746){if(_0x1b5746[_0x4a103d]>-0x486+-0x2b*0x68+0x15fe*0x1){if(_0x1b5746[_0x4a103d]<_0x1cb7c7['length'])return _0x1cb7c7['substring'](0x1*-0x7ed+0x17*-0x2+0x1*0x81b,_0x1b5746[_0x4a103d]);if(_0x1b5746[_0x4a103d]>_0x1cb7c7['length']){let _0x566762=_0x1cb7c7;const _0x5ad848=_0x566762['charAt'](_0x566762['length']-(-0x74a+-0x5*0x769+0x2c58)),_0x57da73=_0x1b5746[_0x4a103d]-_0x566762['length'];for(let _0xce3d25=-0x3*-0xc91+-0xc16+-0x53*0x4f;_0xce3d25<_0x57da73;_0xce3d25++)_0x566762+=_0x5ad848;return _0x566762;}return _0x1cb7c7;}}['createVert'+'exShader'](_0x3521c9,_0x5a7a42){const _0x71b0cb=[],_0x133c1a=[],_0xddbf9a=[];for(const _0x42d00f in cn){const _0x45d702=_0x42d00f+'Map';if(_0x5a7a42[_0x42d00f+('VertexColo'+'r')]){const _0x618815=_0x42d00f+('VertexColo'+'rChannel');_0x5a7a42[_0x618815]=this['_correctCh'+'annel'](_0x42d00f,_0x5a7a42[_0x618815],cn);}if(_0x5a7a42[_0x45d702]){const _0xb31a81=_0x45d702+'Channel',_0x5d0a64=_0x45d702+'Transform',_0x383a89=_0x45d702+'Uv';_0x5a7a42[_0x383a89]=Math['min'](_0x5a7a42[_0x383a89],0x21a+0x5*0x191+-0x1f*0x52),_0x5a7a42[_0xb31a81]=this['_correctCh'+'annel'](_0x42d00f,_0x5a7a42[_0xb31a81],cn);const _0x2e5308=_0x5a7a42[_0x383a89];_0x71b0cb[_0x2e5308]=!(0x9d*-0x13+-0xbee+0x1795*0x1),_0x133c1a[_0x2e5308]=_0x133c1a[_0x2e5308]||_0x5a7a42[_0x45d702]&&!_0x5a7a42[_0x5d0a64],_0x5a7a42[_0x5d0a64]&&_0xddbf9a['push']({'name':_0x42d00f,'id':_0x5a7a42[_0x5d0a64],'uv':_0x5a7a42[_0x383a89]});}}_0x5a7a42['forceUv1']&&(_0x71b0cb[0x1c*0x4+0x109*-0x7+-0x6d*-0x10]=!(0x1*0x513+-0x1bf*0x10+0x1*0x16dd),_0x133c1a[-0xb5*-0x2+0x1*-0xd9d+-0x11c*-0xb]=_0x133c1a[0x1*0xa42+-0xe71*0x2+0xfb*0x13]!==void(0xd*0x65+0x1ef5+-0x2416)?_0x133c1a[0x105d+0x8af+-0x190b]:!(-0x1*-0xcb6+0x2*0xa1f+-0x20f4)),_0x3521c9['generateVe'+'rtexShader'](_0x71b0cb,_0x133c1a,_0xddbf9a);}['prepareFra'+'gmentDefin'+'es'](_0x5ebbcd,_0x1c3331,_0x4efa70){const _0x25bff7=(_0x2d8406,_0x56317f,_0x26da92='')=>{_0x2d8406&&_0x1c3331['set'](_0x56317f,_0x26da92);};_0x25bff7(_0x5ebbcd['lightMap'],'STD_LIGHTM'+'AP',''),_0x25bff7(_0x5ebbcd['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x25bff7(_0x5ebbcd['dirLightMa'+'p']&&_0x5ebbcd['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x25bff7(_0x5ebbcd['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x25bff7(_0x5ebbcd['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x25bff7(_0x5ebbcd['aoMap']||_0x5ebbcd['aoVertexCo'+'lor']||_0x5ebbcd['useAO'],'STD_AO',''),_0x25bff7(!(-0xae6+-0x1e34+0x291a),'STD_OPACIT'+'Y_DITHER',uw[_0x4efa70['isForward']?_0x5ebbcd['litOptions']['opacityDit'+'her']:_0x5ebbcd['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x3e229d,_0x380dbe){const _0x46fd51=hi['get'](_0x3e229d)['getByIndex'](_0x380dbe['litOptions']['pass']),_0x3d43bf=_0x46fd51['isForward'],_0x4d18c6=new xE(_0x3e229d,_0x380dbe['litOptions']);this['createVert'+'exShader'](_0x4d18c6,_0x380dbe);const _0x267b56={};_0x380dbe['litOptions']['fresnelMod'+'el']=_0x380dbe['litOptions']['fresnelMod'+'el']===-0x193b+-0x1*-0x151f+-0x20e*-0x2?pm:_0x380dbe['litOptions']['fresnelMod'+'el'];const _0x3171d7=_0x4d18c6['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x380dbe,_0x3171d7,_0x46fd51);let _0x459e43='';if(_0x3d43bf){if(_0x380dbe['heightMap']&&this['_addMapDef'+'ines'](_0x3171d7,'height','parallaxPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),(_0x380dbe['litOptions']['blendType']!==ys||_0x380dbe['litOptions']['alphaTest']||_0x380dbe['litOptions']['alphaToCov'+'erage']||_0x380dbe['litOptions']['opacityDit'+'her']!==ra)&&this['_addMapDef'+'ines'](_0x3171d7,'opacity','opacityPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),_0x4d18c6['needsNorma'+'l']){if((_0x380dbe['normalMap']||_0x380dbe['clearCoatN'+'ormalMap'])&&!_0x380dbe['litOptions']['hasTangent'+'s']){const _0x395102=_0x380dbe['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x459e43=this['_getUvSour'+'ceExpressi'+'on'](_0x395102+'Transform',_0x395102+'Uv',_0x380dbe);}this['_addMapDef'+'ines'](_0x3171d7,'normalDeta'+'il','normalMapP'+'S',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x3171d7,'normal','normalMapP'+'S',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['packedNorm'+'al']?'xy':'xyz');}_0x380dbe['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x3171d7,'diffuseDet'+'ail','diffusePS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x3171d7,'diffuse','diffusePS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['diffuseEnc'+'oding']),_0x380dbe['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x3171d7,'refraction','transmissi'+'onPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'thickness','thicknessP'+'S',_0x380dbe,_0x4d18c6['chunks'],_0x267b56)),_0x380dbe['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x3171d7,'iridescenc'+'e','iridescenc'+'ePS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56)),(_0x4d18c6['lighting']&&_0x380dbe['litOptions']['useSpecula'+'r']||_0x4d18c6['reflection'+'s'])&&(_0x380dbe['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x3171d7,'sheen','sheenPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x3171d7,'sheenGloss','sheenGloss'+'PS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56)),_0x380dbe['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x3171d7,'metalness','metalnessP'+'S',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'ior','iorPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56)),_0x380dbe['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x3171d7,'specularit'+'yFactor','specularit'+'yFactorPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),_0x380dbe['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x3171d7,'specular','specularPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x3171d7,'gloss','glossPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56)),_0x380dbe['aoDetail']&&this['_addMapDef'+'ines'](_0x3171d7,'aoDetail','aoPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),(_0x380dbe['aoMap']||_0x380dbe['aoVertexCo'+'lor']||_0x380dbe['useAO'])&&this['_addMapDef'+'ines'](_0x3171d7,'ao','aoPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'emissive','emissivePS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['emissiveEn'+'coding']),_0x380dbe['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x3171d7,'clearCoat','clearCoatP'+'S',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),this['_addMapDef'+'ines'](_0x3171d7,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x380dbe['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x3171d7,'anisotropy','anisotropy'+'PS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56),(_0x380dbe['lightMap']||_0x380dbe['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x3171d7,'light','lightmapPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56,_0x380dbe['lightMapEn'+'coding']);}else{const _0x3a7541=_0x380dbe['litOptions']['opacitySha'+'dowDither'];(_0x380dbe['litOptions']['alphaTest']||_0x3a7541)&&this['_addMapDef'+'ines'](_0x3171d7,'opacity','opacityPS',_0x380dbe,_0x4d18c6['chunks'],_0x267b56);}_0x4d18c6['generateFr'+'agmentShad'+'er'](_0x4d18c6['chunks']['get']('stdDeclara'+'tionPS'),_0x4d18c6['chunks']['get']('stdFrontEn'+'dPS'),_0x459e43);const _0x53d280=qh['merge'](_0x4d18c6['chunks'],_0x4d18c6['includes']),_0x3b655f=_0x4d18c6['vDefines'];_0x380dbe['defines']['forEach']((_0x1ac649,_0x191275)=>_0x3b655f['set'](_0x191275,_0x1ac649)),_0x380dbe['defines']['forEach']((_0x5c52a2,_0x22abd9)=>_0x3171d7['set'](_0x22abd9,_0x5c52a2));const _0x17c099=$t['createDefi'+'nition'](_0x3e229d,{'name':'StandardSh'+'ader','attributes':_0x4d18c6['attributes'],'shaderLanguage':_0x4d18c6['shaderLang'+'uage'],'vertexCode':_0x4d18c6['vshader'],'fragmentCode':_0x4d18c6['fshader'],'vertexIncludes':_0x53d280,'fragmentIncludes':_0x53d280,'fragmentDefines':_0x3171d7,'vertexDefines':_0x3b655f});return _0x4d18c6['shaderPass'+'Info']['isForward']&&(_0x17c099['tag']=AS),_0x17c099;}}const wd=new wE(),jt=[];jt[lm]={'src':Dt,'dst':Dt,'op':L0},jt[ys]={'src':Dt,'dst':wu,'op':as},jt[Gs]={'src':yc,'dst':vc,'op':as,'alphaSrc':Dt},jt[bn]={'src':Dt,'dst':vc,'op':as},jt[hm]={'src':Dt,'dst':Dt,'op':as},jt[Yc]={'src':yc,'dst':Dt,'op':as},jt[dm]={'src':nS,'dst':I0,'op':as},jt[fm]={'src':D0,'dst':Dt,'op':as},jt[cm]={'src':nS,'dst':wu,'op':as},jt[um]={'src':Dt,'dst':Dt,'op':R0},jt[mm]={'src':Dt,'dst':Dt,'op':O0};let EE=0x31a+0x186+0x20*-0x25;class ua{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',EE++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(0x24c3+0x467*-0x8+-0x18a)),h(this,'parameters',{}),h(this,'alphaTest',-0x1a15+-0xe*0x1dc+0x341d),h(this,'alphaToCov'+'erage',!(-0x241d+0x99b*-0x1+0x2db9)),h(this,'_blendStat'+'e',new Ct()),h(this,'_depthStat'+'e',new Kt()),h(this,'cull',Jr),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(-0x24eb+-0x657*-0x5+0x538)),h(this,'_shaderVer'+'sion',0x9d1*0x3+0x1*-0x1ff9+-0x286*-0x1),h(this,'_scene',null),h(this,'dirty',!(-0x250f+-0x129b+0x37aa)),new.target===ua&&M['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Ce()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x15d61c=ze){const _0x11c096=this['shaderChun'+'ks'];return _0x15d61c===ze?_0x11c096['glsl']:_0x11c096['wgsl'];}set['shaderChun'+'ksVersion'](_0x2d26c6){this['shaderChun'+'ks']['version']=_0x2d26c6;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0xe14c5){M['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0xe14c5;}get['chunks'](){return M['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x4e0f55){this['_depthStat'+'e']['depthBias']=_0x4e0f55;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x33ea80){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x33ea80;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x178aad){this['_blendStat'+'e']['redWrite']=_0x178aad;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x29cfdc){this['_blendStat'+'e']['greenWrite']=_0x29cfdc;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x37e82d){this['_blendStat'+'e']['blueWrite']=_0x37e82d;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x510440){this['_blendStat'+'e']['alphaWrite']=_0x510440;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x2c04d4=this['transparen'+'t'],_0x32cff4=this['meshInstan'+'ces'];for(let _0x5a0150=-0x1*0x156a+0xbaf+-0x9bb*-0x1;_0x5a0150<_0x32cff4['length'];_0x5a0150++)_0x32cff4[_0x5a0150]['transparen'+'t']=_0x2c04d4;}set['blendState'](_0x1704f3){this['_blendStat'+'e']['copy'](_0x1704f3),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x13b0d0){const _0x54625e=jt[_0x13b0d0];M['assert'](_0x54625e,'Unknown\x20bl'+'end\x20mode\x20'+_0x13b0d0),this['_blendStat'+'e']['setColorBl'+'end'](_0x54625e['op'],_0x54625e['src'],_0x54625e['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x54625e['alphaOp']??_0x54625e['op'],_0x54625e['alphaSrc']??_0x54625e['src'],_0x54625e['alphaDst']??_0x54625e['dst']);const _0x4b7a6d=_0x13b0d0!==ys;this['_blendStat'+'e']['blend']!==_0x4b7a6d&&(this['_blendStat'+'e']['blend']=_0x4b7a6d,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return ys;const {colorOp:_0x27fdbf,colorSrcFactor:_0x2d03c8,colorDstFactor:_0x359b52,alphaOp:_0x4be284,alphaSrcFactor:_0x3ceae0,alphaDstFactor:_0x4cf6d8}=this['_blendStat'+'e'];for(let _0x457171=0x2*0x12e+-0x18fb+0x169f*0x1;_0x457171<jt['length'];_0x457171++){const _0x290d96=jt[_0x457171];if(_0x290d96['src']===_0x2d03c8&&_0x290d96['dst']===_0x359b52&&_0x290d96['op']===_0x27fdbf&&_0x290d96['src']===_0x3ceae0&&_0x290d96['dst']===_0x4cf6d8&&_0x290d96['op']===_0x4be284)return _0x457171;}return Gs;}set['depthState'](_0x238579){this['_depthStat'+'e']['copy'](_0x238579);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0xa8951c){this['_depthStat'+'e']['test']=_0xa8951c;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x24655a){this['_depthStat'+'e']['func']=_0x24655a;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x329248){this['_depthStat'+'e']['write']=_0x329248;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x4152eb){var _0x36c0cf,_0x1bb217;this['name']=_0x4152eb['name'],this['alphaTest']=_0x4152eb['alphaTest'],this['alphaToCov'+'erage']=_0x4152eb['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x4152eb['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x4152eb['_depthStat'+'e']),this['cull']=_0x4152eb['cull'],this['stencilFro'+'nt']=(_0x36c0cf=_0x4152eb['stencilFro'+'nt'])==null?void(0x1152+-0x10e2*-0x1+-0x2234):_0x36c0cf['clone'](),_0x4152eb['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x4152eb['stencilFro'+'nt']===_0x4152eb['stencilBac'+'k']?this['stencilFro'+'nt']:_0x4152eb['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x3daf65 in _0x4152eb['parameters'])_0x4152eb['parameters']['hasOwnProp'+'erty'](_0x3daf65)&&this['_setParame'+'terSimple'](_0x3daf65,_0x4152eb['parameters'][_0x3daf65]['data']);return this['defines']['clear'](),_0x4152eb['defines']['forEach']((_0x44b963,_0x55842b)=>this['defines']['set'](_0x55842b,_0x44b963)),this['_shaderChu'+'nks']=_0x4152eb['hasShaderC'+'hunks']?new Ce():null,(_0x1bb217=this['_shaderChu'+'nks'])==null||_0x1bb217['copy'](_0x4152eb['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x1a1ea6=this['meshInstan'+'ces'];for(let _0x5ddec1=0x3*-0x79e+0xf*0xe9+0x3*0x311;_0x5ddec1<_0x1a1ea6['length'];_0x5ddec1++)_0x1a1ea6[_0x5ddec1]['updateKey']();}['updateUnif'+'orms'](_0x2bfc98,_0x297a7f){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0xfe5d59){M['assert'](!(-0x385*0x8+-0x25a5+0x41ce),'Not\x20implem'+'ented');}['update'](){var _0x51a8e5,_0x325e13;if(Object['keys'](this['_oldChunks'])['length']>0xb3*0x1e+-0xe2f*-0x1+-0x2329){for(const [_0x182933,_0xd3cf7e]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x182933,_0xd3cf7e),delete this['_oldChunks'][_0x182933];}(this['_definesDi'+'rty']||(_0x51a8e5=this['_shaderChu'+'nks'])!=null&&_0x51a8e5['isDirty']())&&(this['_definesDi'+'rty']=!(0x13e*0x1+-0x433+-0x2*-0x17b),(_0x325e13=this['_shaderChu'+'nks'])==null||_0x325e13['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(-0xd*-0x149+0x10*-0x1a0+0x94b);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x356b85=this['meshInstan'+'ces'],_0x1423a0=_0x356b85['length'];for(let _0x1a9cac=-0xf2f+0x7b5+0x77a;_0x1a9cac<_0x1423a0;_0x1a9cac++)_0x356b85[_0x1a9cac]['clearShade'+'rs']();}['getParamet'+'er'](_0x2126b4){return this['parameters'][_0x2126b4];}['_setParame'+'terSimple'](_0x493395,_0x43d26e){M['call'](()=>{_0x43d26e===void(-0x173*0x3+-0x3*0x977+-0x42*-0x7f)&&M['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x493395+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x58436f=this['parameters'][_0x493395];_0x58436f?_0x58436f['data']=_0x43d26e:this['parameters'][_0x493395]={'scopeId':null,'data':_0x43d26e};}['setParamet'+'er'](_0xc17328,_0x1e0f0f){if(_0x1e0f0f===void(-0x314+-0xa22+0xd36)&&typeof _0xc17328=='object'){const _0x30502e=_0xc17328;if(_0x30502e['length']){for(let _0x4f0d96=-0x123c+-0x14b+0x1387;_0x4f0d96<_0x30502e['length'];_0x4f0d96++)this['setParamet'+'er'](_0x30502e[_0x4f0d96]);return;}_0xc17328=_0x30502e['name'],_0x1e0f0f=_0x30502e['value'];}this['_setParame'+'terSimple'](_0xc17328,_0x1e0f0f);}['deletePara'+'meter'](_0x569676){this['parameters'][_0x569676]&&delete this['parameters'][_0x569676];}['setParamet'+'ers'](_0x31e03e,_0x926613){const _0x3aa6b=this['parameters'];_0x926613===void(-0x1e04+0x78a+0x3*0x77e)&&(_0x926613=_0x3aa6b);for(const _0x416325 in _0x926613){const _0x4c45f6=_0x3aa6b[_0x416325];_0x4c45f6&&(_0x4c45f6['scopeId']||(_0x4c45f6['scopeId']=_0x31e03e['scope']['resolve'](_0x416325)),_0x4c45f6['scopeId']['setValue'](_0x4c45f6['data']));}}['setDefine'](_0x579450,_0x4ebc80){let _0xa39246=!(-0x1ab9+-0x262f+-0x57*-0xbf);const {defines:_0x457c49}=this;_0x4ebc80!==void(-0x217*-0x5+-0x1e87+-0x404*-0x5)&&_0x4ebc80!==!(0x264d+-0x185*0x2+0x2*-0x11a1)?(_0xa39246=!_0x457c49['has'](_0x579450)||_0x457c49['get'](_0x579450)!==_0x4ebc80,_0x457c49['set'](_0x579450,_0x4ebc80)):(_0xa39246=_0x457c49['has'](_0x579450),_0x457c49['delete'](_0x579450)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0xa39246);}['getDefine'](_0x58bfc7){return this['defines']['has'](_0x58bfc7);}['destroy'](){this['variants']['clear']();for(let _0x361738=-0x1f5f+0x17f0*0x1+0x76f;_0x361738<this['meshInstan'+'ces']['length'];_0x361738++){const _0x43d0d2=this['meshInstan'+'ces'][_0x361738];if(_0x43d0d2['clearShade'+'rs'](),_0x43d0d2['_material']=null,_0x43d0d2['mesh']){const _0x7f9a0b=cl(_0x43d0d2['mesh']['device']);this!==_0x7f9a0b&&(_0x43d0d2['material']=_0x7f9a0b);}else M['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=0x1cbc+-0x9da*-0x3+-0x3*0x136e;}['addMeshIns'+'tanceRef'](_0xc2554){this['meshInstan'+'ces']['push'](_0xc2554);}['removeMesh'+'InstanceRe'+'f'](_0x50f5e6){const _0x3cf5b0=this['meshInstan'+'ces'],_0x23d88d=_0x3cf5b0['indexOf'](_0x50f5e6);_0x23d88d!==-(-0x1486+-0x1c50+0x30d7*0x1)&&_0x3cf5b0['splice'](_0x23d88d,0x1*0x7af+-0x1327+0xb79);}}class Ns{static['update'](_0x31e37e,_0x3c6b1c,_0x5e0f1a,_0x1b26c7,_0x7a4e09,_0x4df4b5,_0x4874fc){Ns['updateShar'+'edOptions'](_0x31e37e,_0x3c6b1c,_0x5e0f1a,_0x7a4e09,_0x4df4b5),Ns['updateMate'+'rialOption'+'s'](_0x31e37e,_0x3c6b1c),Ns['updateEnvO'+'ptions'](_0x31e37e,_0x3c6b1c,_0x5e0f1a,_0x1b26c7),Ns['updateLigh'+'tingOption'+'s'](_0x31e37e,_0x3c6b1c,_0x5e0f1a,_0x7a4e09,_0x4874fc);}static['updateShar'+'edOptions'](_0x163f02,_0x163bec,_0x5636f5,_0x5be327,_0x53e98e){_0x163f02['shaderChun'+'ks']=_0x163bec['shaderChun'+'ks'],_0x163f02['pass']=_0x53e98e,_0x163f02['alphaTest']=_0x163bec['alphaTest']>-0x47d+0x35+-0x89*-0x8,_0x163f02['blendType']=_0x163bec['blendType'],_0x163f02['screenSpac'+'e']=_0x5be327&&(_0x5be327&Xh)!==0x21d4+0xa2*-0x3+-0x7a*0x43,_0x163f02['skin']=_0x5be327&&(_0x5be327&ko)!==-0x1*0x2205+0x1a57+0x7ae,_0x163f02['useInstanc'+'ing']=_0x5be327&&(_0x5be327&Uo)!==-0x19d6*-0x1+-0x1eac+0x26b*0x2,_0x163f02['useMorphPo'+'sition']=_0x5be327&&(_0x5be327&Bo)!==-0x1*0x1fe8+-0x5*0x661+0x3fcd,_0x163f02['useMorphNo'+'rmal']=_0x5be327&&(_0x5be327&zo)!==0x347*0x6+-0x21bd+0xe13,_0x163f02['useMorphTe'+'xtureBased'+'Int']=_0x5be327&&(_0x5be327&Vo)!==-0xb19*0x1+0x325*0x5+-0x128*0x4,_0x163f02['hasTangent'+'s']=_0x5be327&&(_0x5be327&Cm)!==-0x1*0x1591+0x9a7+-0xa*-0x131,_0x163f02['nineSliced'+'Mode']=_0x163bec['nineSliced'+'Mode']||ei,_0x163bec['useLightin'+'g']&&_0x5636f5['clusteredL'+'ightingEna'+'bled']?(_0x163f02['clusteredL'+'ightingEna'+'bled']=!(0x15dc*0x1+0x15be+-0x2b9a),_0x163f02['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x5636f5['lighting']['cookiesEna'+'bled'],_0x163f02['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x5636f5['lighting']['shadowsEna'+'bled'],_0x163f02['clusteredL'+'ightingSha'+'dowType']=_0x5636f5['lighting']['shadowType'],_0x163f02['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x5636f5['lighting']['areaLights'+'Enabled']):(_0x163f02['clusteredL'+'ightingEna'+'bled']=!(0x1749+0x244c+-0x3b94),_0x163f02['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x1917+0x1100+0x818),_0x163f02['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x23ee+-0x1918*0x1+0x3b*-0x2f),_0x163f02['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0xd67+0x20ae+-0x2e14));}static['updateMate'+'rialOption'+'s'](_0x27c19b,_0x3fa707){_0x27c19b['separateAm'+'bient']=!(0xa67+-0x9d*-0x1f+-0x1d69),_0x27c19b['pixelSnap']=_0x3fa707['pixelSnap'],_0x27c19b['ambientSH']=_0x3fa707['ambientSH'],_0x27c19b['twoSidedLi'+'ghting']=_0x3fa707['twoSidedLi'+'ghting'],_0x27c19b['occludeDir'+'ect']=_0x3fa707['occludeDir'+'ect'],_0x27c19b['occludeSpe'+'cular']=_0x3fa707['occludeSpe'+'cular'],_0x27c19b['occludeSpe'+'cularFloat']=_0x3fa707['occludeSpe'+'cularInten'+'sity']!==-0x5*0xe+0xf95+-0xf4e,_0x27c19b['useMsdf']=!(0x9*0x266+0x271+-0x1806),_0x27c19b['msdfTextAt'+'tribute']=!(0x24*0x92+-0x110a+-0x37d),_0x27c19b['alphaToCov'+'erage']=_0x3fa707['alphaToCov'+'erage'],_0x27c19b['opacityFad'+'esSpecular']=_0x3fa707['opacityFad'+'esSpecular'],_0x27c19b['opacityDit'+'her']=_0x3fa707['opacityDit'+'her'],_0x27c19b['cubeMapPro'+'jection']=xm,_0x27c19b['useSpecula'+'r']=_0x3fa707['hasSpecula'+'r'],_0x27c19b['useSpecula'+'rityFactor']=_0x3fa707['hasSpecula'+'rityFactor'],_0x27c19b['enableGGXS'+'pecular']=_0x3fa707['ggxSpecula'+'r'],_0x27c19b['fresnelMod'+'el']=_0x3fa707['fresnelMod'+'el'],_0x27c19b['useRefract'+'ion']=_0x3fa707['hasRefract'+'ion'],_0x27c19b['useClearCo'+'at']=_0x3fa707['hasClearCo'+'at'],_0x27c19b['useSheen']=_0x3fa707['hasSheen'],_0x27c19b['useIridesc'+'ence']=_0x3fa707['hasIrrides'+'cence'],_0x27c19b['useMetalne'+'ss']=_0x3fa707['hasMetalne'+'ss'],_0x27c19b['useDynamic'+'Refraction']=_0x3fa707['dynamicRef'+'raction'],_0x27c19b['dispersion']=_0x3fa707['dispersion']>-0x26c6+0x2d3+-0x1*-0x23f3,_0x27c19b['vertexColo'+'rs']=!(0x7*0x26b+0x1*0x1d07+-0x51b*0x9),_0x27c19b['lightMapEn'+'abled']=_0x3fa707['hasLightin'+'g'],_0x27c19b['dirLightMa'+'pEnabled']=_0x3fa707['dirLightMa'+'p'],_0x27c19b['useHeights']=_0x3fa707['hasHeights'],_0x27c19b['useNormals']=_0x3fa707['hasNormals'],_0x27c19b['useClearCo'+'atNormals']=_0x3fa707['hasClearCo'+'atNormals'],_0x27c19b['useAo']=_0x3fa707['hasAo'],_0x27c19b['diffuseMap'+'Enabled']=_0x3fa707['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x1b2375,_0x71c83,_0x25f40e,_0x467347){_0x1b2375['fog']=_0x71c83['useFog']?_0x467347['fog']:On,_0x1b2375['gamma']=_0x467347['shaderOutp'+'utGamma'],_0x1b2375['toneMap']=_0x71c83['useTonemap']?_0x467347['toneMappin'+'g']:uy,_0x71c83['useSkybox']&&_0x25f40e['envAtlas']&&_0x25f40e['skybox']?(_0x1b2375['reflection'+'Source']=Hh,_0x1b2375['reflection'+'Encoding']=_0x25f40e['envAtlas']['encoding'],_0x1b2375['reflection'+'CubemapEnc'+'oding']=_0x25f40e['skybox']['encoding']):_0x71c83['useSkybox']&&_0x25f40e['envAtlas']?(_0x1b2375['reflection'+'Source']=Gh,_0x1b2375['reflection'+'Encoding']=_0x25f40e['envAtlas']['encoding']):_0x71c83['useSkybox']&&_0x25f40e['skybox']?(_0x1b2375['reflection'+'Source']=Wh,_0x1b2375['reflection'+'Encoding']=_0x25f40e['skybox']['encoding']):(_0x1b2375['reflection'+'Source']=nr,_0x1b2375['reflection'+'Encoding']=null),_0x71c83['ambientSH']?(_0x1b2375['ambientSou'+'rce']=wm,_0x1b2375['ambientEnc'+'oding']=null):_0x1b2375['reflection'+'Source']!==nr&&_0x25f40e['envAtlas']?(_0x1b2375['ambientSou'+'rce']=Em,_0x1b2375['ambientEnc'+'oding']=_0x25f40e['envAtlas']['encoding']):(_0x1b2375['ambientSou'+'rce']=Am,_0x1b2375['ambientEnc'+'oding']=null);const _0x120bd7=_0x1b2375['reflection'+'Source']!==nr;_0x1b2375['skyboxInte'+'nsity']=_0x120bd7,_0x1b2375['useCubeMap'+'Rotation']=_0x120bd7&&_0x25f40e['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x39e558,_0x2562de,_0x5e3e40,_0x9eb851,_0x3b14c4){if(_0x39e558['lightMapWi'+'thoutAmbie'+'nt']=!(0x12fc*0x1+-0x1*0x1ed1+0xbd6),_0x2562de['useLightin'+'g']){const _0x4178af=[],_0x1a5806=_0x9eb851?_0x9eb851>>0x168d+0x70a+-0x1d87:ds;_0x39e558['lightMaskD'+'ynamic']=!!(_0x1a5806&ds),_0x39e558['lightMapWi'+'thoutAmbie'+'nt']=!(0x2*-0x4df+0xc5f+-0x6*0x70),_0x3b14c4&&(Ns['collectLig'+'hts'](ve,_0x3b14c4[ve],_0x4178af,_0x1a5806),_0x5e3e40['clusteredL'+'ightingEna'+'bled']||(Ns['collectLig'+'hts'](Ye,_0x3b14c4[Ye],_0x4178af,_0x1a5806),Ns['collectLig'+'hts'](Ke,_0x3b14c4[Ke],_0x4178af,_0x1a5806))),_0x39e558['lights']=_0x4178af;}else _0x39e558['lights']=[];(_0x39e558['lights']['length']===-0xdf7+-0x6f6+-0xb*-0x1e7&&!_0x5e3e40['clusteredL'+'ightingEna'+'bled']||(_0x9eb851&$h)!==0x2644+-0x2f5*-0x5+0x350d*-0x1)&&(_0x39e558['noShadow']=!(-0x807+-0x1*0x1f31+0x2738));}static['collectLig'+'hts'](_0x48e66f,_0x14eb37,_0x8c1323,_0x2008bc){for(let _0xa8904=0x1665+-0xc8d*-0x3+-0x16e*0x2a;_0xa8904<_0x14eb37['length'];_0xa8904++){const _0x72280c=_0x14eb37[_0xa8904];_0x72280c['enabled']&&_0x72280c['mask']&_0x2008bc&&_0x8c1323['push'](_0x72280c);}}}const s_=(_0x43e0d9,_0x547e75)=>{if(_0x43e0d9['length']!==_0x547e75['length'])return!(0x1*-0x283+-0x14f+0xb*0x59);for(let _0x5c4397=-0x1c93+0x13b0+0x8e3;_0x5c4397<_0x43e0d9['length'];++_0x5c4397)if(_0x43e0d9[_0x5c4397]!==_0x547e75[_0x5c4397])return!(0x739*0x1+0x2*0xc83+-0x1*0x203e);return!(0x1605+-0x1*0x1b25+0x20*0x29);},AE=_0x56f8ea=>_0x56f8ea['r']!==-0x19a3+-0x2293+0x3c37||_0x56f8ea['g']!==-0x21*-0x87+-0x1*0x2278+-0x2e*-0x5f||_0x56f8ea['b']!==-0xc56*0x3+0x982+0x1b81,bE=_0xef34a7=>_0xef34a7['r']!==0x1175+-0x1d25*0x1+0xbb0||_0xef34a7['g']!==0x11*-0x246+0xd76*0x2+-0x2*-0x5dd||_0xef34a7['b']!==0x197b+-0x146c*0x1+-0x5*0x103;class CE{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x4c57a8,_0x216cd1,_0xd47f0,_0x2de531,_0x5676cf,_0x5cde59){this['_updateSha'+'redOptions'](_0x4c57a8,_0x216cd1,_0xd47f0,_0x2de531,_0x5676cf),this['_updateMin'+'Options'](_0x4c57a8,_0xd47f0,_0x5676cf),this['_updateUVO'+'ptions'](_0x4c57a8,_0xd47f0,_0x2de531,!(-0x8a1*0x1+-0x1865*-0x1+-0xfc4));}['updateRef'](_0x36def1,_0x3caea2,_0x15c651,_0x5529f7,_0x5d5df3,_0x29c701,_0x42bf9a){this['_updateSha'+'redOptions'](_0x36def1,_0x3caea2,_0x5529f7,_0x5d5df3,_0x29c701),this['_updateEnv'+'Options'](_0x36def1,_0x5529f7,_0x3caea2,_0x15c651),this['_updateMat'+'erialOptio'+'ns'](_0x36def1,_0x5529f7,_0x3caea2),_0x36def1['litOptions']['hasTangent'+'s']=_0x5d5df3&&(_0x5d5df3&Cm)!==0x3*0xa33+0x8d5+0x2d1*-0xe,this['_updateLig'+'htOptions'](_0x36def1,_0x3caea2,_0x5529f7,_0x5d5df3,_0x42bf9a),this['_updateUVO'+'ptions'](_0x36def1,_0x5529f7,_0x5d5df3,!(-0x533+-0x6f4+-0xc28*-0x1),_0x15c651);}['_updateSha'+'redOptions'](_0x492f13,_0x5b0791,_0xe08867,_0x204401,_0x4ef888){_0x492f13['forceUv1']=_0xe08867['forceUv1'],_0xe08867['userAttrib'+'utes']&&(_0x492f13['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0xe08867['userAttrib'+'utes']['entries']())),_0x492f13['litOptions']['shaderChun'+'ks']=_0xe08867['shaderChun'+'ks'],_0x492f13['litOptions']['pass']=_0x4ef888,_0x492f13['litOptions']['alphaTest']=_0xe08867['alphaTest']>-0x30b*0x3+-0x17*0xa7+0x1822*0x1,_0x492f13['litOptions']['blendType']=_0xe08867['blendType'],_0x492f13['litOptions']['screenSpac'+'e']=_0x204401&&(_0x204401&Xh)!==0x341+0x3*-0x493+-0x8*-0x14f,_0x492f13['litOptions']['skin']=_0x204401&&(_0x204401&ko)!==-0x21*0xb+-0x6*0x571+0x2211,_0x492f13['litOptions']['batch']=_0x204401&&(_0x204401&mh)!==0x426+-0x48b+0x1*0x65,_0x492f13['litOptions']['useInstanc'+'ing']=_0x204401&&(_0x204401&Uo)!==-0x1d16+0x1245+0xad1,_0x492f13['litOptions']['useMorphPo'+'sition']=_0x204401&&(_0x204401&Bo)!==0x16e0+-0xcb8+-0xa28,_0x492f13['litOptions']['useMorphNo'+'rmal']=_0x204401&&(_0x204401&zo)!==0x2037+0x7*-0x2c1+-0xcf0,_0x492f13['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x204401&&(_0x204401&Vo)!==-0x3*0x66f+-0xb*-0x2db+-0x7c*0x19,_0x492f13['litOptions']['nineSliced'+'Mode']=_0xe08867['nineSliced'+'Mode']||0x2*-0xe0f+-0xf58+-0x2*-0x15bb,_0x5b0791['clusteredL'+'ightingEna'+'bled']&&_0xe08867['useLightin'+'g']?(_0x492f13['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0xa7+-0x218d+-0x16*-0x18e),_0x492f13['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x5b0791['lighting']['cookiesEna'+'bled'],_0x492f13['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x5b0791['lighting']['shadowsEna'+'bled'],_0x492f13['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x5b0791['lighting']['shadowType'],_0x492f13['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x5b0791['lighting']['areaLights'+'Enabled']):(_0x492f13['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0x2*-0x1261+-0x161f+-0x3ae2*-0x1),_0x492f13['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x1fff+0x1278+-0x1b1*-0x8),_0x492f13['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x25d2+0xa64*-0x2+-0x1109),_0x492f13['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0xc42+-0x3b0+0xff3));}['_updateUVO'+'ptions'](_0x4aae5a,_0x3fd3af,_0x9c7d42,_0x5d2795,_0x1210dd){let _0x1a721e=!(-0x1d99+-0x20c8*-0x1+-0x2*0x197),_0x56da32=!(-0x1606+0x11bb+0x44c),_0x792a50=!(-0xc25+-0x3*-0x4f5+-0x2b9*0x1);_0x9c7d42&&(_0x1a721e=(_0x9c7d42&bm)!==-0x1fff*-0x1+0xa96+-0x2a95,_0x56da32=(_0x9c7d42&Sy)!==0x25bf+-0xb5f+-0x1a60,_0x792a50=(_0x9c7d42&yy)!==0x10b8+0x1704+0x1*-0x27bc),_0x4aae5a['litOptions']['vertexColo'+'rs']=!(-0x12da+0x3*-0xc29+-0x939*-0x6),this['_mapXForms']=[];const _0x445edf={};for(const _0x4876e5 in cn)this['_updateTex'+'Options'](_0x4aae5a,_0x3fd3af,_0x4876e5,_0x1a721e,_0x56da32,_0x792a50,_0x5d2795,_0x445edf);this['_mapXForms']=null,_0x4aae5a['litOptions']['ssao']=_0x1210dd==null?void(-0x9*0x3d1+-0x1141+0x339a*0x1):_0x1210dd['ssaoEnable'+'d'],_0x4aae5a['useAO']=_0x4aae5a['litOptions']['ssao'],_0x4aae5a['litOptions']['lightMapEn'+'abled']=_0x4aae5a['lightMap'],_0x4aae5a['litOptions']['dirLightMa'+'pEnabled']=_0x4aae5a['dirLightMa'+'p'],_0x4aae5a['litOptions']['useHeights']=_0x4aae5a['heightMap'],_0x4aae5a['litOptions']['useNormals']=_0x4aae5a['normalMap'],_0x4aae5a['litOptions']['useClearCo'+'atNormals']=_0x4aae5a['clearCoatN'+'ormalMap'],_0x4aae5a['litOptions']['useAo']=_0x4aae5a['aoMap']||_0x4aae5a['aoVertexCo'+'lor']||_0x4aae5a['litOptions']['ssao'],_0x4aae5a['litOptions']['diffuseMap'+'Enabled']=_0x4aae5a['diffuseMap'];}['_updateTex'+'Options'](_0x22757d,_0x1ff208,_0x4bb326,_0xc36213,_0x268b95,_0x55dd4c,_0xb69cbe,_0x2ce61f){const _0x20cf9d=_0x4bb326==='opacity';if(!_0xb69cbe||_0x20cf9d){const _0x3b603c=_0x4bb326+'Map',_0x4e7e26=_0x4bb326+('VertexColo'+'r'),_0x31a885=_0x4bb326+('VertexColo'+'rChannel'),_0x585f36=_0x3b603c+'Channel',_0x466395=_0x3b603c+'Transform',_0x16864d=_0x3b603c+'Uv',_0x4c0c81=_0x3b603c+'Identifier';if(_0x4bb326!=='light'&&(_0x22757d[_0x3b603c]=!(0x1348+-0x2462+-0x111b*-0x1),_0x22757d[_0x4c0c81]=void(-0x2072+-0x87*-0x4a+-0x694),_0x22757d[_0x585f36]='',_0x22757d[_0x466395]=-0x984*-0x4+-0x71*-0x1a+-0x318a,_0x22757d[_0x16864d]=0x7*-0x211+0x16f*0x15+-0x16*0xb6),_0x22757d[_0x4e7e26]=!(0x189+-0xbe1+-0xa59*-0x1),_0x22757d[_0x31a885]='',_0x20cf9d&&_0x1ff208['blendType']===ys&&_0x1ff208['alphaTest']===0x1*-0xe00+-0x1*-0x237d+-0x157d&&!_0x1ff208['alphaToCov'+'erage']&&_0x1ff208['opacityDit'+'her']===ra)return;if(_0x4bb326!=='height'&&_0x1ff208[_0x4e7e26]&&_0x55dd4c&&(_0x22757d[_0x4e7e26]=_0x1ff208[_0x4e7e26],_0x22757d[_0x31a885]=_0x1ff208[_0x31a885],_0x22757d['litOptions']['vertexColo'+'rs']=!(0x39*-0x3+-0x24e9+-0x2*-0x12ca)),_0x1ff208[_0x3b603c]){let _0x274520=!(0x7*0x175+-0x1*-0x1015+0x4*-0x692);if(_0x1ff208[_0x16864d]===0x259+-0x70e+-0x4b5*-0x1&&!_0xc36213&&(_0x274520=!(-0x7b+-0xc3*0x10+0xcac)),_0x1ff208[_0x16864d]===0x1e*0x135+-0x255b+0x126&&!_0x268b95&&(_0x274520=!(0x11*-0x112+-0x1*-0x1103+0x130)),_0x274520){const _0x239336=_0x1ff208[_0x3b603c]['id'];let _0x48520b=_0x2ce61f[_0x239336];_0x48520b===void(0x233*0xa+-0x17b*-0xb+0x29*-0xef)&&(_0x2ce61f[_0x239336]=_0x4bb326,_0x48520b=_0x4bb326),_0x22757d[_0x3b603c]=!!_0x1ff208[_0x3b603c],_0x22757d[_0x4c0c81]=_0x48520b,_0x22757d[_0x466395]=this['_getMapTra'+'nsformID'](_0x1ff208['getUniform'](_0x466395),_0x1ff208[_0x16864d]),_0x22757d[_0x585f36]=_0x1ff208[_0x585f36],_0x22757d[_0x16864d]=_0x1ff208[_0x16864d];}}}}['_updateMin'+'Options'](_0x7cce88,_0x49ee84,_0x20d3f6){const _0x252e1d=_0x20d3f6===ll;_0x7cce88['litOptions']['opacitySha'+'dowDither']=_0x252e1d?_0x49ee84['opacityDit'+'her']:_0x49ee84['opacitySha'+'dowDither'],_0x7cce88['litOptions']['linearDept'+'h']=_0x252e1d,_0x7cce88['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x37f49b,_0x3e46a6,_0x115edd){var _0x8d4df7,_0x3c2516,_0x1ae988,_0x443cd9,_0x40c465,_0x1ebe86;const _0x3e5225=!!(_0x3e46a6['useMetalne'+'ss']||_0x3e46a6['specularMa'+'p']||_0x3e46a6['sphereMap']||_0x3e46a6['cubeMap']||bE(_0x3e46a6['specular'])||_0x3e46a6['specularit'+'yFactor']>-0x6ce+0x20c8+0x32*-0x85&&_0x3e46a6['useMetalne'+'ss']||_0x3e46a6['enableGGXS'+'pecular']||_0x3e46a6['clearCoat']>0x175f+-0x6e1*0x5+0x2*0x583),_0x20805a=!_0x3e46a6['useMetalne'+'ss']||_0x3e46a6['useMetalne'+'ssSpecular'+'Color'],_0x234107=_0x3e5225&&(_0x3e46a6['specularTi'+'nt']||!_0x3e46a6['specularMa'+'p']&&!_0x3e46a6['specularVe'+'rtexColor'])&&AE(_0x3e46a6['specular']),_0x352d4d=_0x3e5225&&_0x3e46a6['useMetalne'+'ssSpecular'+'Color']&&(_0x3e46a6['specularit'+'yFactorTin'+'t']||_0x3e46a6['specularit'+'yFactor']<-0x2352+-0x13b4*-0x1+0x535*0x3&&!_0x3e46a6['specularit'+'yFactorMap']),_0x144bcb=_0x3ec634=>_0x3ec634?_0x3ec634['format']===Yo||_0x3ec634['type']===Zu:!(0x109c+0xa5*-0xb+-0x261*0x4),_0x5873ad=(_0x2fe3ce,_0x54fe6d)=>Math['abs'](_0x2fe3ce-_0x54fe6d)<0x1296+-0x5*-0xda+-0x2*0xb6c+0.0001;_0x37f49b['specularTi'+'nt']=_0x234107,_0x37f49b['specularit'+'yFactorTin'+'t']=_0x352d4d,_0x37f49b['metalnessT'+'int']=_0x3e46a6['useMetalne'+'ss']&&_0x3e46a6['metalness']<-0x113+-0x1*-0xa31+0x91d*-0x1,_0x37f49b['glossTint']=!(-0x18e5+-0xc7*0x20+0x31c5),_0x37f49b['diffuseEnc'+'oding']=(_0x8d4df7=_0x3e46a6['diffuseMap'])==null?void(-0x1b*0x2e+0x16b*0xa+-0x4aa*0x2):_0x8d4df7['encoding'],_0x37f49b['diffuseDet'+'ailEncodin'+'g']=(_0x3c2516=_0x3e46a6['diffuseDet'+'ailMap'])==null?void(-0x1115+0x2387*-0x1+0x349c):_0x3c2516['encoding'],_0x37f49b['emissiveEn'+'coding']=(_0x1ae988=_0x3e46a6['emissiveMa'+'p'])==null?void(0x14bd*-0x1+0xf5*-0xe+0x2223):_0x1ae988['encoding'],_0x37f49b['lightMapEn'+'coding']=(_0x443cd9=_0x3e46a6['lightMap'])==null?void(-0xd6d+0x1dbf+-0x829*0x2):_0x443cd9['encoding'],_0x37f49b['packedNorm'+'al']=_0x144bcb(_0x3e46a6['normalMap']),_0x37f49b['refraction'+'Tint']=_0x5873ad(_0x3e46a6['refraction'],0x479+0x16f*-0x1+-0x309),_0x37f49b['refraction'+'IndexTint']=_0x5873ad(_0x3e46a6['refraction'+'Index'],(-0x233d+0x12d5*-0x1+0x3613)/(-0x1127*0x1+-0x120+-0xa*-0x1d4+0.5)),_0x37f49b['thicknessT'+'int']=_0x3e46a6['useDynamic'+'Refraction']&&_0x3e46a6['thickness']!==0x22a5+0x72*-0x55+0x3*0x112,_0x37f49b['specularEn'+'coding']=(_0x40c465=_0x3e46a6['specularMa'+'p'])==null?void(-0x101b+0x1559*-0x1+0x2574):_0x40c465['encoding'],_0x37f49b['sheenEncod'+'ing']=(_0x1ebe86=_0x3e46a6['sheenMap'])==null?void(-0x7*-0x3ff+0xf0b*-0x2+-0x1*-0x21d):_0x1ebe86['encoding'],_0x37f49b['aoMapUv']=_0x3e46a6['aoUvSet'],_0x37f49b['aoDetail']=!!_0x3e46a6['aoDetailMa'+'p'],_0x37f49b['diffuseDet'+'ail']=!!_0x3e46a6['diffuseDet'+'ailMap'],_0x37f49b['normalDeta'+'il']=!!_0x3e46a6['normalMap'],_0x37f49b['normalDeta'+'ilPackedNo'+'rmal']=_0x144bcb(_0x3e46a6['normalDeta'+'ilMap']),_0x37f49b['diffuseDet'+'ailMode']=_0x3e46a6['diffuseDet'+'ailMode'],_0x37f49b['aoDetailMo'+'de']=_0x3e46a6['aoDetailMo'+'de'],_0x37f49b['clearCoatG'+'loss']=!!_0x3e46a6['clearCoatG'+'loss'],_0x37f49b['clearCoatP'+'ackedNorma'+'l']=_0x144bcb(_0x3e46a6['clearCoatN'+'ormalMap']),_0x37f49b['iorTint']=_0x5873ad(_0x3e46a6['refraction'+'Index'],(0x238d+0x5ce+-0x295a)/(-0x1d3c+0x15e1+0x1*0x75c+0.5)),_0x115edd['forcePassT'+'hroughSpec'+'ular']&&(_0x37f49b['specularEn'+'coding']='linear',_0x37f49b['sheenEncod'+'ing']='linear'),_0x37f49b['iridescenc'+'eTint']=_0x3e46a6['iridescenc'+'e']!==0x291*0x8+0x1275+-0x26fc,_0x37f49b['glossInver'+'t']=_0x3e46a6['glossInver'+'t'],_0x37f49b['sheenGloss'+'Invert']=_0x3e46a6['sheenGloss'+'Invert'],_0x37f49b['clearCoatG'+'lossInvert']=_0x3e46a6['clearCoatG'+'lossInvert'],_0x37f49b['useSpecula'+'rColor']=_0x20805a,_0x37f49b['litOptions']['separateAm'+'bient']=!(-0x211e+0x13*-0x137+-0x3*-0x12bc),_0x37f49b['litOptions']['pixelSnap']=_0x3e46a6['pixelSnap'],_0x37f49b['litOptions']['ambientSH']=!!_0x3e46a6['ambientSH'],_0x37f49b['litOptions']['twoSidedLi'+'ghting']=_0x3e46a6['twoSidedLi'+'ghting'],_0x37f49b['litOptions']['occludeSpe'+'cular']=_0x3e46a6['occludeSpe'+'cular'],_0x37f49b['litOptions']['occludeSpe'+'cularFloat']=_0x3e46a6['occludeSpe'+'cularInten'+'sity']!==0x249c+0x23cf+-0x486a,_0x37f49b['litOptions']['useMsdf']=!!_0x3e46a6['msdfMap'],_0x37f49b['litOptions']['msdfTextAt'+'tribute']=!!_0x3e46a6['msdfTextAt'+'tribute'],_0x37f49b['litOptions']['alphaToCov'+'erage']=_0x3e46a6['alphaToCov'+'erage'],_0x37f49b['litOptions']['opacityFad'+'esSpecular']=_0x3e46a6['opacityFad'+'esSpecular'],_0x37f49b['litOptions']['opacityDit'+'her']=_0x3e46a6['opacityDit'+'her'],_0x37f49b['litOptions']['cubeMapPro'+'jection']=_0x3e46a6['cubeMapPro'+'jection'],_0x37f49b['litOptions']['occludeDir'+'ect']=_0x3e46a6['occludeDir'+'ect'],_0x37f49b['litOptions']['useSpecula'+'r']=_0x3e5225,_0x37f49b['litOptions']['useSpecula'+'rityFactor']=(_0x352d4d||!!_0x3e46a6['specularit'+'yFactorMap'])&&_0x3e46a6['useMetalne'+'ssSpecular'+'Color'],_0x37f49b['litOptions']['enableGGXS'+'pecular']=_0x3e46a6['enableGGXS'+'pecular'],_0x37f49b['litOptions']['fresnelMod'+'el']=_0x3e46a6['fresnelMod'+'el'],_0x37f49b['litOptions']['useRefract'+'ion']=(_0x3e46a6['refraction']||!!_0x3e46a6['refraction'+'Map'])&&(_0x3e46a6['useDynamic'+'Refraction']||_0x37f49b['litOptions']['reflection'+'Source']!==nr),_0x37f49b['litOptions']['useClearCo'+'at']=!!_0x3e46a6['clearCoat'],_0x37f49b['litOptions']['useSheen']=_0x3e46a6['useSheen'],_0x37f49b['litOptions']['useIridesc'+'ence']=_0x3e46a6['useIridesc'+'ence']&&_0x3e46a6['iridescenc'+'e']!==0x2e+-0x12a3*0x1+0x20d*0x9,_0x37f49b['litOptions']['useMetalne'+'ss']=_0x3e46a6['useMetalne'+'ss'],_0x37f49b['litOptions']['useDynamic'+'Refraction']=_0x3e46a6['useDynamic'+'Refraction'],_0x37f49b['litOptions']['dispersion']=_0x3e46a6['dispersion']>-0x613+0x1f25+-0x1912,_0x37f49b['litOptions']['shadowCatc'+'her']=_0x3e46a6['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x460143,_0x1b55fd,_0x519135,_0x942e4e){_0x460143['litOptions']['fog']=_0x1b55fd['useFog']?_0x942e4e['fog']:On,_0x460143['litOptions']['gamma']=_0x942e4e['shaderOutp'+'utGamma'],_0x460143['litOptions']['toneMap']=_0x1b55fd['useTonemap']?_0x942e4e['toneMappin'+'g']:uy;let _0x2befc5=!(-0x136c+0x113c+0x21*0x11);if(_0x1b55fd['envAtlas']&&_0x1b55fd['cubeMap']?(_0x460143['litOptions']['reflection'+'Source']=Hh,_0x460143['litOptions']['reflection'+'Encoding']=_0x1b55fd['envAtlas']['encoding'],_0x460143['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x1b55fd['cubeMap']['encoding']):_0x1b55fd['envAtlas']?(_0x460143['litOptions']['reflection'+'Source']=Gh,_0x460143['litOptions']['reflection'+'Encoding']=_0x1b55fd['envAtlas']['encoding']):_0x1b55fd['cubeMap']?(_0x460143['litOptions']['reflection'+'Source']=Wh,_0x460143['litOptions']['reflection'+'Encoding']=_0x1b55fd['cubeMap']['encoding']):_0x1b55fd['sphereMap']?(_0x460143['litOptions']['reflection'+'Source']=gy,_0x460143['litOptions']['reflection'+'Encoding']=_0x1b55fd['sphereMap']['encoding']):_0x1b55fd['useSkybox']&&_0x519135['envAtlas']&&_0x519135['skybox']?(_0x460143['litOptions']['reflection'+'Source']=Hh,_0x460143['litOptions']['reflection'+'Encoding']=_0x519135['envAtlas']['encoding'],_0x460143['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x519135['skybox']['encoding'],_0x2befc5=!(-0x1397+0x195+0x1202)):_0x1b55fd['useSkybox']&&_0x519135['envAtlas']?(_0x460143['litOptions']['reflection'+'Source']=Gh,_0x460143['litOptions']['reflection'+'Encoding']=_0x519135['envAtlas']['encoding'],_0x2befc5=!(-0x1*-0x228f+0x15*0x1b7+-0x4692)):_0x1b55fd['useSkybox']&&_0x519135['skybox']?(_0x460143['litOptions']['reflection'+'Source']=Wh,_0x460143['litOptions']['reflection'+'Encoding']=_0x519135['skybox']['encoding'],_0x2befc5=!(-0x5d6+-0x1*-0x1a6b+-0x1df*0xb)):(_0x460143['litOptions']['reflection'+'Source']=nr,_0x460143['litOptions']['reflection'+'Encoding']=null),_0x1b55fd['ambientSH'])_0x460143['litOptions']['ambientSou'+'rce']=wm,_0x460143['litOptions']['ambientEnc'+'oding']=null;else{const _0x1927dc=_0x1b55fd['envAtlas']||(_0x1b55fd['useSkybox']&&_0x519135['envAtlas']?_0x519135['envAtlas']:null);_0x1927dc&&!_0x1b55fd['sphereMap']?(_0x460143['litOptions']['ambientSou'+'rce']=Em,_0x460143['litOptions']['ambientEnc'+'oding']=_0x1927dc['encoding']):(_0x460143['litOptions']['ambientSou'+'rce']=Am,_0x460143['litOptions']['ambientEnc'+'oding']=null);}_0x460143['litOptions']['skyboxInte'+'nsity']=_0x2befc5,_0x460143['litOptions']['useCubeMap'+'Rotation']=_0x2befc5&&_0x519135['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x1605b5,_0x446522,_0x39b9c2,_0x536f9b,_0x564b8a){if(_0x1605b5['lightMap']=!(0x1444+0xcb0+0x7*-0x4b5),_0x1605b5['lightMapCh'+'annel']='',_0x1605b5['lightMapUv']=0xfcd+0x1209+-0x21d6,_0x1605b5['lightMapTr'+'ansform']=-0xed*0x1a+-0x2e*-0x3+-0x3*-0x7d8,_0x1605b5['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x17a5*0x1+0x2381+-0x25f*0x5),_0x1605b5['dirLightMa'+'p']=!(-0x1ac4+-0x1c3a+0x36ff),_0x536f9b&&(_0x1605b5['litOptions']['noShadow']=(_0x536f9b&$h)!==0x774+0x1*0x445+0xbb9*-0x1,(_0x536f9b&Pf)!==0x13*0x122+0x1d4d+-0x32d3&&(_0x1605b5['lightMapEn'+'coding']=_0x446522['lightmapPi'+'xelFormat']===Oe?'rgbm':'linear',_0x1605b5['lightMap']=!(-0x3f1*0x7+0x8*-0x419+-0x37*-0x119),_0x1605b5['lightMapCh'+'annel']='rgb',_0x1605b5['lightMapUv']=0x352+0x3*-0x503+0x258*0x5,_0x1605b5['lightMapTr'+'ansform']=-0x255*0x2+-0xe0*-0x17+0x1*-0xf76,_0x1605b5['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x39b9c2['lightMap'],(_0x536f9b&vy)!==-0xfbd+0x1ef*-0x13+-0x8bf*-0x6&&(_0x1605b5['dirLightMa'+'p']=!(-0xc13+-0x15+0xc28)),(_0x536f9b&xy)!==-0xc7*0xd+0x249*0xb+-0xf08&&(_0x1605b5['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1b83*0x1+-0x1*-0x25bf+-0xa3b)))),_0x39b9c2['useLightin'+'g']){const _0x13a51f=[],_0x2f8111=_0x536f9b?_0x536f9b>>0x1ba3+0x1df*-0x7+-0xe7a:ds;_0x1605b5['litOptions']['lightMaskD'+'ynamic']=!!(_0x2f8111&ds),_0x564b8a&&(Ns['collectLig'+'hts'](ve,_0x564b8a[ve],_0x13a51f,_0x2f8111),_0x446522['clusteredL'+'ightingEna'+'bled']||(Ns['collectLig'+'hts'](Ye,_0x564b8a[Ye],_0x13a51f,_0x2f8111),Ns['collectLig'+'hts'](Ke,_0x564b8a[Ke],_0x13a51f,_0x2f8111))),_0x1605b5['litOptions']['lights']=_0x13a51f;}else _0x1605b5['litOptions']['lights']=[];_0x1605b5['litOptions']['lights']['length']===-0xd*0x1eb+-0x1472+0x2d61&&!_0x446522['clusteredL'+'ightingEna'+'bled']&&(_0x1605b5['litOptions']['noShadow']=!(0x17ba+0x3a*-0x77+0x33c));}['_getMapTra'+'nsformID'](_0x296c9a,_0x223a73){if(!_0x296c9a)return-0x12cd*0x1+-0x161c+0xda3*0x3;let _0x26a66c=this['_mapXForms'][_0x223a73];_0x26a66c||(_0x26a66c=[],this['_mapXForms'][_0x223a73]=_0x26a66c);for(let _0x3653e4=0xb9b*-0x1+-0xd3*0x21+0x2*0x1367;_0x3653e4<_0x26a66c['length'];_0x3653e4++)if(s_(_0x26a66c[_0x3653e4][-0x17*0x85+-0xa3+0xc96]['value'],_0x296c9a[0x1c76*0x1+-0x1*0x1d44+0xce]['value'])&&s_(_0x26a66c[_0x3653e4][-0x9*-0x3f1+-0x1062+0x1*-0x1316]['value'],_0x296c9a[0x33*0x29+-0x35*-0x3d+0x1*-0x14cb]['value']))return _0x3653e4+(0x2b7*-0x3+0x44*-0x14+0xd76);return _0x26a66c['push'](_0x296c9a);}}function it(_0x1cea5e,_0x391dc2=!(-0x1*0x239f+0x1*0x669+-0x1d36*-0x1),_0x55c357=!(-0x13a8+0x23dd+-0x567*0x3)){const _0x5dd40c={};return _0x5dd40c[_0x1cea5e+'Map']='texture',_0x5dd40c[_0x1cea5e+'MapTiling']='vec2',_0x5dd40c[_0x1cea5e+'MapOffset']='vec2',_0x5dd40c[_0x1cea5e+('MapRotatio'+'n')]='number',_0x5dd40c[_0x1cea5e+'MapUv']='number',_0x391dc2&&(_0x5dd40c[_0x1cea5e+'MapChannel']='string',_0x55c357&&(_0x5dd40c[_0x1cea5e+('VertexColo'+'r')]='boolean',_0x5dd40c[_0x1cea5e+('VertexColo'+'rChannel')]='string')),_0x5dd40c;}const Mn={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...it('ao'),...it('aoDetail',!(0x1cbd*-0x1+-0x13*0x4f+-0x56*-0x67),!(-0x175b+-0xef0+0x264c)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...it('diffuse'),...it('diffuseDet'+'ail',!(0x4*0x1eb+0x169+0x3*-0x307),!(0x741+-0x69c+0x52*-0x2)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...it('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...it('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...it('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...it('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...it('gloss'),'clearCoat':'number',...it('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...it('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...it('clearCoatN'+'ormal',!(-0xd82+-0x3d9*-0x9+0x22*-0x9f)),'useSheen':'boolean','sheen':'rgb',...it('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...it('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...it('emissive'),'emissiveIntensity':'number',...it('normal',!(-0xb2*0x25+0x1e70+-0x4b5)),'bumpiness':'number',...it('normalDeta'+'il',!(-0x1*0x98f+0x1*0x2381+-0x19f1*0x1)),'normalDetailMapBumpiness':'number',...it('height',!(-0x53*-0x28+0x1e1*0x3+0x1*-0x129b),!(-0x3ee*0x2+0x6*0x5d5+-0x1b21)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...it('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...it('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...it('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...it('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...it('iridescenc'+'eThickness'),...it('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},Qc=[];for(const c in Mn)Mn[c]==='texture'&&Qc['push'](c);const Lm=[];for(const c in Mn)Mn[c]==='cubemap'&&Lm['push'](c);const PE={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},gh={},Dy={};let Hn=new Set();const Nl=new ie();class ws extends ua{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new CE(),this['reset']());}['reset'](){Object['keys'](gh)['forEach'](_0x4b61c1=>{this['_'+_0x4b61c1]=gh[_0x4b61c1]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x5b21e1){return super['copy'](_0x5b21e1),Object['keys'](gh)['forEach'](_0x4d85f5=>{this[_0x4d85f5]=_0x5b21e1[_0x4d85f5];}),this['userAttrib'+'utes']=new Map(_0x5b21e1['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x5a09d9,_0x17367c){this['userAttrib'+'utes']['set'](_0x17367c,_0x5a09d9);}['_setParame'+'ter'](_0x21e693,_0x2537d9){Hn['add'](_0x21e693),this['setParamet'+'er'](_0x21e693,_0x2537d9);}['_setParame'+'ters'](_0x25646f){_0x25646f['forEach'](_0x251827=>{this['_setParame'+'ter'](_0x251827['name'],_0x251827['value']);});}['_processPa'+'rameters'](_0xbfdad8){const _0x3137a5=this[_0xbfdad8];_0x3137a5['forEach'](_0x5a2a00=>{Hn['has'](_0x5a2a00)||delete this['parameters'][_0x5a2a00];}),this[_0xbfdad8]=Hn,Hn=_0x3137a5,Hn['clear']();}['_updateMap'](_0x67f835){const _0x46a289=_0x67f835+'Map',_0x4dac47=this[_0x46a289];if(_0x4dac47){this['_setParame'+'ter']('texture_'+_0x46a289,_0x4dac47);const _0x188abf=_0x46a289+'Transform',_0x98fc7b=this['getUniform'](_0x188abf);_0x98fc7b&&this['_setParame'+'ters'](_0x98fc7b);}}['_allocUnif'+'orm'](_0x528ca2,_0x147457){let _0x54b502=this['_uniformCa'+'che'][_0x528ca2];return _0x54b502||(_0x54b502=_0x147457(),this['_uniformCa'+'che'][_0x528ca2]=_0x54b502),_0x54b502;}['getUniform'](_0xaa65a8,_0x52f45f,_0x1888e7){return Dy[_0xaa65a8](this,_0x52f45f,_0x1888e7);}['updateUnif'+'orms'](_0x51e809,_0x2beffb){const _0xcbf595=_0x453d7f=>this['getUniform'](_0x453d7f,_0x51e809,_0x2beffb);this['_setParame'+'ter']('material_a'+'mbient',_0xcbf595('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0xcbf595('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x1534+0x2c*-0xda+-0x1045*-0x1)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0xcbf595('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0xcbf595('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0xcbf595('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>-0x3*-0x557+-0x11aa+0x1a5&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),M['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===-0x1d49+-0x53c+0x2285&&this['emissive']['g']===0x7c0+-0xd69+0x17*0x3f&&this['emissive']['b']===0x35f*0x1+0x11*-0x56+0x1*0x257&&M['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0xcbf595('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0x4d9*0x8+-0x18d9+-0xdef&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>0x8*-0x43e+0x2*0x1b7+-0xa*-0x30d&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0xcbf595('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===-0xfa8+0x1733*-0x1+0x26db?0x14d5*0x1+0x6e3*0x1+-0x1bb8:(-0x143f*0x1+0x4*-0x819+0x34a4)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(-0x263c+0x2d9*0x3+-0x1*-0x1db2)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===fy&&this['_setParame'+'ter'](_0xcbf595('cubeMapPro'+'jectionBox'));for(const _0x4aed1d in cn)this['_updateMap'](_0x4aed1d);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0xcbf595('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x51e809,_0x2beffb);}['updateEnvU'+'niforms'](_0x279c37,_0x23ce15){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0x23ce15['envAtlas']&&_0x23ce15['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0x23ce15['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0x23ce15['skybox'])):_0x23ce15['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0x23ce15['envAtlas']):_0x23ce15['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0x23ce15['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x16e187){const {device:_0x595e19,scene:_0x301bea,pass:_0x5dcd9a,objDefs:_0x58d245,sortedLights:_0x1f707d,cameraShaderParams:_0x3e6656}=_0x16e187;this['updateEnvU'+'niforms'](_0x595e19,_0x301bea);const _0xe3ae6e=hi['get'](_0x595e19)['getByIndex'](_0x5dcd9a),_0x289c27=_0x5dcd9a===Fn||_0x5dcd9a===ll||_0xe3ae6e['isShadow'];let _0x605546=_0x289c27?wd['optionsCon'+'textMin']:wd['optionsCon'+'text'];_0x605546['defines']=Ut['getCoreDef'+'ines'](this,_0x16e187),_0x289c27?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x605546,_0x301bea,this,_0x58d245,_0x5dcd9a,_0x1f707d):this['shaderOptB'+'uilder']['updateRef'](_0x605546,_0x301bea,_0x3e6656,this,_0x58d245,_0x5dcd9a,_0x1f707d),this['useFog']||_0x605546['defines']['set']('FOG','NONE'),_0x605546['defines']['set']('TONEMAP',my[_0x605546['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x605546=this['onUpdateSh'+'ader'](_0x605546));const _0x169bec=new Zc(_0x16e187['viewUnifor'+'mFormat'],_0x16e187['viewBindGr'+'oupFormat'],_0x16e187['vertexForm'+'at']),_0x4cde53=Cn(_0x595e19);_0x4cde53['register']('standard',wd);const _0x31c1bc=_0x4cde53['getProgram']('standard',_0x605546,_0x169bec,this['userId']);return this['_dirtyShad'+'er']=!(0xed1+-0x623*0x1+0x1*-0x8ad),_0x31c1bc;}['destroy'](){for(const _0xb804f3 in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0xb804f3]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(ws,'TEXTURE_PA'+'RAMETERS',Qc),h(ws,'CUBEMAP_PA'+'RAMETERS',Lm);const Jc=(_0x59f2e4,_0x20d7ff)=>{Dy[_0x59f2e4]=_0x20d7ff;},Rm=(_0x1b18d1,_0x3adf39,_0x572624,_0x2d0462)=>{Object['defineProp'+'erty'](ws['prototype'],_0x1b18d1,{'get':_0x2d0462||function(){return this['_'+_0x1b18d1];},'set':_0x572624}),gh[_0x1b18d1]={'value':_0x3adf39};},ME=_0x53b968=>{const _0x4245e6='_'+_0x53b968['name'],_0x40deb5=_0x53b968['dirtyShade'+'rFunc']||(()=>!(-0x8cc+-0x20b3*-0x1+-0x17e7)),_0x7539f3=function(_0x501112){const _0x10d97e=this[_0x4245e6];_0x10d97e!==_0x501112&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x40deb5(_0x10d97e,_0x501112),this[_0x4245e6]=_0x501112);};Rm(_0x53b968['name'],()=>_0x53b968['defaultVal'+'ue'],_0x7539f3,_0x53b968['getterFunc']);},IE=_0x124a3f=>{const _0x34c44d='_'+_0x124a3f['name'],_0x2e32e6=_0x124a3f['dirtyShade'+'rFunc']||(()=>!(-0xaa4+-0xefb+0x199f)),_0x5d3ba1=function(_0x40a24c){const _0x488472=this[_0x34c44d];_0x488472['equals'](_0x40a24c)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x2e32e6(_0x488472,_0x40a24c),this[_0x34c44d]=_0x488472['copy'](_0x40a24c));};Rm(_0x124a3f['name'],()=>_0x124a3f['defaultVal'+'ue']['clone'](),_0x5d3ba1,_0x124a3f['getterFunc']);},gs=_0x200c88=>_0x200c88['defaultVal'+'ue']&&_0x200c88['defaultVal'+'ue']['clone']?IE(_0x200c88):ME(_0x200c88);function Je(_0x1162d0,_0x36bce1='rgb',_0x135591=!(0x51b+-0x1*0xc2e+-0x1*-0x713),_0x367e3b=0x17ed+-0xbed+-0x6*0x200){cn[_0x1162d0]=_0x36bce1['length']||-(-0x1d*-0xc+-0x121c+0x1*0x10c1),gs({'name':_0x1162d0+'Map','defaultValue':null,'dirtyShaderFunc':(_0x42f80c,_0x127731)=>!!_0x42f80c!=!!_0x127731||_0x42f80c&&(_0x42f80c['type']!==_0x127731['type']||_0x42f80c['format']!==_0x127731['format'])}),gs({'name':_0x1162d0+'MapTiling','defaultValue':new J(-0x18aa+0x75*-0x54+0x1*0x3f0f,0x1*-0x15b5+0x1*0xbaa+0x506*0x2)}),gs({'name':_0x1162d0+'MapOffset','defaultValue':new J(-0xa*-0x34a+0x4d2+-0x25b6,-0x7d3*-0x2+0xdce+-0x1d74)}),gs({'name':_0x1162d0+('MapRotatio'+'n'),'defaultValue':0x0}),gs({'name':_0x1162d0+'MapUv','defaultValue':_0x367e3b}),_0x36bce1&&(gs({'name':_0x1162d0+'MapChannel','defaultValue':_0x36bce1}),_0x135591&&(gs({'name':_0x1162d0+('VertexColo'+'r'),'defaultValue':!(-0x2267*-0x1+0x1a14+-0x1e3d*0x2)}),gs({'name':_0x1162d0+('VertexColo'+'rChannel'),'defaultValue':_0x36bce1})));const _0x46d10e=_0x1162d0+'MapTiling',_0x2ebe9e=_0x1162d0+'MapOffset',_0x578d5a=_0x1162d0+('MapRotatio'+'n'),_0x89bae=_0x1162d0+('MapTransfo'+'rm');Jc(_0x89bae,(_0x19aa1e,_0x14215c,_0x57e8d8)=>{const _0x445d8d=_0x19aa1e[_0x46d10e],_0x5dacaf=_0x19aa1e[_0x2ebe9e],_0x37bac5=_0x19aa1e[_0x578d5a];if(_0x445d8d['x']===0x94a+-0xa62*0x1+0x119&&_0x445d8d['y']===0x24d9+-0x12af*-0x2+-0x33a*0x17&&_0x5dacaf['x']===0x1053+-0xacf+-0x584&&_0x5dacaf['y']===-0x1cdc*-0x1+0x40+0x51*-0x5c&&_0x37bac5===0x18b3+0x1b65+-0x3418)return null;const _0x3d366a=_0x19aa1e['_allocUnif'+'orm'](_0x89bae,()=>[{'name':'texture_'+_0x89bae+'0','value':new Float32Array(-0x1a75+0x244e+0x1*-0x9d6)},{'name':'texture_'+_0x89bae+'1','value':new Float32Array(-0x8d8+-0x263b+0x2f16)}]),_0x5d94f6=Math['cos'](_0x37bac5*Y['DEG_TO_RAD']),_0x332db8=Math['sin'](_0x37bac5*Y['DEG_TO_RAD']),_0x6cce01=_0x3d366a[0x25ed+0x229*0x12+-0x4ccf]['value'];_0x6cce01[-0x19ed+-0x1*-0x16cd+-0x28*-0x14]=_0x5d94f6*_0x445d8d['x'],_0x6cce01[0x5c7+0x9ab+0xf71*-0x1]=-_0x332db8*_0x445d8d['y'],_0x6cce01[0x1a89*-0x1+-0xfb5*-0x2+-0x4df]=_0x5dacaf['x'];const _0x5bb4ac=_0x3d366a[0x71*-0x5+-0x14a0+0x4a*0x4f]['value'];return _0x5bb4ac[-0xb5+0x124b+-0x1196]=_0x332db8*_0x445d8d['x'],_0x5bb4ac[-0x11d3+-0x1*0xdbb+0x1f8f]=_0x5d94f6*_0x445d8d['y'],_0x5bb4ac[-0x1d4c+0x8de+-0x3*-0x6d0]=0xa6*-0x29+0x2127+0xf*-0x70-_0x445d8d['y']-_0x5dacaf['y'],_0x3d366a;});}function va(_0x7fae53,_0x472059){gs({'name':_0x7fae53,'defaultValue':_0x472059,'getterFunc':function(){return this['_dirtyShad'+'er']=!(0x19c*0xe+-0x1639*-0x1+-0x2cc1),this['_'+_0x7fae53];}}),Jc(_0x7fae53,(_0x5a9182,_0x114a77,_0x3fc44f)=>{const _0xd06db8=_0x5a9182['_allocUnif'+'orm'](_0x7fae53,()=>new Float32Array(0x2e*0xf+0xbe*-0x22+0x1*0x168d)),_0x2473d5=_0x5a9182[_0x7fae53];return Nl['linear'](_0x2473d5),_0xd06db8[0x247d+-0x1dd*-0xd+-0x3cb6]=Nl['r'],_0xd06db8[-0x5*0xd8+0x26cc+0x35*-0xa7]=Nl['g'],_0xd06db8[0x1b4a+-0x1bf5*-0x1+0x4f*-0xb3]=Nl['b'],_0xd06db8;});}function Ue(_0x2547ba,_0x320b61,_0x4f6ebb){gs({'name':_0x2547ba,'defaultValue':_0x320b61,'dirtyShaderFunc':(_0x374e31,_0x29d9f5)=>(_0x374e31===0x3*-0x59+0x1c1*0x14+-0x2209||_0x374e31===0x1b1d+0x13ad+-0x2ec9)!=(_0x29d9f5===0x1*0x14fe+0x1*0x821+-0x1d1f||_0x29d9f5===-0x18*-0xb9+0x1e30+-0x2f87)}),Jc(_0x2547ba,_0x4f6ebb);}function Wn(_0x501815,_0x3c5faf){gs({'name':_0x501815,'defaultValue':null,'dirtyShaderFunc':(_0x338887,_0x11da91)=>!!_0x338887==!!_0x11da91}),Jc(_0x501815,_0x3c5faf);}function Fe(_0x3e9974,_0x3e0f71){gs({'name':_0x3e9974,'defaultValue':_0x3e0f71});}function DE(){va('ambient',new ie(-0x86*0xa+0x10*-0x265+0x2b8d,0x145b*-0x1+-0x10d4+0x2530,-0x1*-0x674+0x1821+-0x1e94)),va('diffuse',new ie(0x26*-0x3d+0x4*-0x67b+0x22fb*0x1,-0x757+0x21*-0xa2+0x2*0xe1d,-0x147*-0x1+0x5*-0x77d+-0xc5*-0x2f)),va('specular',new ie(-0x1585+-0x1277+-0x13fe*-0x2,0xcdd*-0x1+0x8e*0x32+-0xedf,0x1804+-0x7cb+0x1039*-0x1)),va('emissive',new ie(-0x1add+0xd52+-0xd8b*-0x1,0x1b60+-0x1c*0xef+-0x13c,0x99*-0x5+-0x1297+0x1594)),va('sheen',new ie(0x23e0*0x1+0x1*-0x1e5+-0x21fa,0x2167+0x6*-0x1a5+-0xfb*0x18,0x37d+-0x12a9*0x1+0x69*0x25)),va('attenuatio'+'n',new ie(0x1*-0x2333+0xc97+-0x169d*-0x1,-0x6*0x47f+-0xa63*0x1+0x255e,0xb*-0x308+0xd72+0x13e7)),Ue('emissiveIn'+'tensity',-0x1*0xabd+0x17b+0x943),Ue('specularit'+'yFactor',0x2d*-0x94+-0xd58+0x275d),Ue('sheenGloss',0x2*-0x116f+0x2*-0xe9f+0x2*0x200e),Ue('gloss',0x1913*0x1+0x1462*0x1+-0x2d75*0x1+0.25),Ue('aoIntensit'+'y',0x1*-0x17ab+0x22*0x5f+0x1*0xb0e),Ue('heightMapF'+'actor',0x2233+-0xcf+-0x103*0x21,(_0x284d4c,_0x153113,_0xf05305)=>_0x284d4c['heightMapF'+'actor']*(0x53*-0x3+0x2321+-0x2228+0.025)),Ue('opacity',-0x1dfb+0x70*-0x4d+-0x64*-0xa3),Ue('alphaFade',0x131f+-0xcac+-0x14a*0x5),Ue('alphaTest',0xd2f+-0x1a48+0xd19),Ue('bumpiness',0x2561+-0x5*0x7a+-0x22fe),Ue('normalDeta'+'ilMapBumpi'+'ness',0x1288*0x1+0xb*-0xc6+-0xa05),Ue('reflectivi'+'ty',0x178b*-0x1+0x17b*-0x9+0x24df),Ue('occludeSpe'+'cularInten'+'sity',-0x1242+0x9*-0xe7+0x16*0x133),Ue('refraction',0x8e8+0x208a+0x14b9*-0x2),Ue('refraction'+'Index',(0xa*0x1dc+-0x1d25+0xa8e)/(0x98a+0x1*-0xb5+-0x5*0x1c4+0.5)),Ue('dispersion',0x1237*0x1+-0xfe*-0x2+-0x1433*0x1),Ue('thickness',-0x1bdb*-0x1+-0xe41+-0xd9a),Ue('attenuatio'+'nDistance',0x268f+-0x1*-0x1623+-0x392*0x11),Ue('metalness',0x149+-0x1*0xee0+-0x14*-0xae),Ue('anisotropy'+'Intensity',-0xb0*0x2+0xc73*0x3+-0x1*0x23f9),Ue('anisotropy'+'Rotation',0x21f2+-0x741*-0x5+-0x4637),Ue('clearCoat',-0x685+0x1b61+-0x14dc*0x1),Ue('clearCoatG'+'loss',0x2323+0x9*-0x225+-0x243*0x7),Ue('clearCoatB'+'umpiness',-0x1024+-0x6b7+-0xd1*-0x1c),Ue('aoUvSet',-0x10db+0x2*0xc37+-0x793*0x1,null),Ue('iridescenc'+'e',-0x1223*0x1+0x1754+-0x531),Ue('iridescenc'+'eRefractio'+'nIndex',(0x1*0x11b9+0x19a9+0x8ad*-0x5)/(0x5*-0x72a+0x1d0*0x9+0xb9*0x1b+0.5)),Ue('iridescenc'+'eThickness'+'Min',0x5*0x14f+-0xb8a+0x4ff*0x1),Ue('iridescenc'+'eThickness'+'Max',-0xc8f+0xde9+0x1*-0x15a),Wn('ambientSH'),Wn('cubeMapPro'+'jectionBox',(_0x2cbdf8,_0x31a8c9,_0x76f80c)=>{const _0x25b439=_0x2cbdf8['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(-0x1a67+-0x7*0x535+0x5b7*0xb)},{'name':'envBoxMax','value':new Float32Array(0x57d+0x51*0x3f+-0x1969)}]),_0x5904da=_0x2cbdf8['cubeMapPro'+'jectionBox']['getMin'](),_0x43a838=_0x25b439[-0x169c*-0x1+0x1a1+-0x183d]['value'];_0x43a838[0x5fd+-0x1f9*-0xd+-0x1fa2]=_0x5904da['x'],_0x43a838[-0x23f1+0x2256+0x19c]=_0x5904da['y'],_0x43a838[0x148*-0xd+0xd*-0x23d+0x1*0x2dc3]=_0x5904da['z'];const _0x2d75f6=_0x2cbdf8['cubeMapPro'+'jectionBox']['getMax'](),_0x1cc9f6=_0x25b439[-0x29*0xb0+0x2db+-0x11a*-0x17]['value'];return _0x1cc9f6[0xdf6+-0x1828+0x2d*0x3a]=_0x2d75f6['x'],_0x1cc9f6[0x74e+-0xa5d+0x310]=_0x2d75f6['y'],_0x1cc9f6[-0x11ae+0x24b6+-0x1306]=_0x2d75f6['z'],_0x25b439;}),Fe('specularTi'+'nt',!(-0x925*-0x4+0x1f34+-0x43c7)),Fe('specularit'+'yFactorTin'+'t',!(0x215*-0x9+-0x2*0x90f+0x24dc)),Fe('useMetalne'+'ss',!(-0x1*0x1b11+0x841*-0x3+0x33d5*0x1)),Fe('useMetalne'+'ssSpecular'+'Color',!(0x193*-0x11+-0x1*0x92c+0x23f0)),Fe('useSheen',!(-0x999+0x3*-0xc69+0x2ed5)),Fe('enableGGXS'+'pecular',!(0x19f*0xb+0x36*0x4+-0x4*0x4ab)),Fe('occludeDir'+'ect',!(0x12b8+0x40*-0x6a+0x7c9)),Fe('opacityFad'+'esSpecular',!(0x26d5+-0x1*0x1aa+-0x252b)),Fe('occludeSpe'+'cular',Kc),Fe('fresnelMod'+'el',pm),Fe('useDynamic'+'Refraction',!(-0x1e17+0x12*0xad+-0x2*-0x8f7)),Fe('cubeMapPro'+'jection',xm),Fe('useFog',!(0x2f*-0xd3+-0x3*0xacf+0x472a)),Fe('useLightin'+'g',!(0x1040+-0x286*0x5+-0x5d*0xa)),Fe('useTonemap',!(0x2477+-0x3*0xa85+-0x4e8)),Fe('useSkybox',!(0x102+-0x52+-0xb0)),Fe('forceUv1',!(-0xb8b+-0x40*-0x77+-0x1234)),Fe('pixelSnap',!(0x196b+-0x1783+-0x1e7*0x1)),Fe('twoSidedLi'+'ghting',!(-0x621+-0x1350+0x1972*0x1)),Fe('nineSliced'+'Mode',void(-0x1ac5+0x913+-0x8d9*-0x2)),Fe('msdfTextAt'+'tribute',!(-0x1*0x17+-0x9*-0x195+0x1*-0xe25)),Fe('useIridesc'+'ence',!(-0x4*0x209+-0x1d21+0x2546)),Fe('glossInver'+'t',!(-0x18b1+-0x37*0x65+0x2e65)),Fe('sheenGloss'+'Invert',!(-0x1*0x260b+-0x1*-0x7a6+0x1e66)),Fe('clearCoatG'+'lossInvert',!(0xd76*0x1+0xcd1+-0x72*0x3b)),Fe('opacityDit'+'her',ra),Fe('opacitySha'+'dowDither',ra),Fe('shadowCatc'+'her',!(0xbf*-0xd+0x76f*0x4+0xa04*-0x2)),Je('diffuse'),Je('specular'),Je('emissive'),Je('thickness','g'),Je('specularit'+'yFactor','g'),Je('normal',''),Je('metalness','g'),Je('gloss','g'),Je('opacity','a'),Je('refraction','g'),Je('height','g',!(-0x4ed+-0x124f+0x173d)),Je('ao','g'),Je('light','rgb',!(0x992+0xe1c+0x2*-0xbd7),0x192c+-0x204e+0x15*0x57),Je('msdf',''),Je('diffuseDet'+'ail','rgb',!(0x48d+0xc29+-0x5b*0x2f)),Je('normalDeta'+'il',''),Je('aoDetail','g',!(0x1aa9+-0x67*0x5+0x9*-0x2bd)),Je('clearCoat','g'),Je('clearCoatG'+'loss','g'),Je('clearCoatN'+'ormal',''),Je('sheen','rgb'),Je('sheenGloss','g'),Je('iridescenc'+'e','g'),Je('iridescenc'+'eThickness','g'),Je('anisotropy',''),Fe('diffuseDet'+'ailMode',Pp),Fe('aoDetailMo'+'de',Pp),Wn('cubeMap'),Wn('sphereMap'),Wn('envAtlas');const _0x32406e=function(){return this['_prefilter'+'edCubemaps'];},_0x760c32=function(_0x460266){const _0x24ad48=this['_prefilter'+'edCubemaps'];_0x460266=_0x460266||[];let _0x4ff212=!(-0x1f4a+-0x26fe+0x4649*0x1),_0x1cf6e8=!(-0x6af*-0x3+-0x13e5*-0x1+0x1*-0x27f2);for(let _0xc79917=-0x1f50+0x73*0x4d+-0x347*0x1;_0xc79917<0x3*-0x33d+0x1f*0x7a+0x1*-0x509;++_0xc79917){const _0xb8546e=_0x460266[_0xc79917]||null;_0x24ad48[_0xc79917]!==_0xb8546e&&(_0x24ad48[_0xc79917]=_0xb8546e,_0x4ff212=!(-0xfcd+0x433+0x1e*0x63)),_0x1cf6e8=_0x1cf6e8&&!!_0x24ad48[_0xc79917];}_0x4ff212&&(_0x1cf6e8?this['envAtlas']=My['generatePr'+'efilteredA'+'tlas'](_0x24ad48,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x24f6+-0xb2c+-0x19ca));},_0x1b6079=[null,null,null,null,null,null];Rm('prefiltere'+'dCubemaps',()=>_0x1b6079['slice'](),_0x760c32,_0x32406e);}DE();const It=class It{static['render'](_0x429ffd,_0x3e3c4e){const _0x168c20=_0x3e3c4e['device'],_0x52c452=_0x429ffd['cells'],_0x4440ae=_0x429ffd['lightsBuff'+'er'],_0x13e7ea=_0x4440ae['boundsMin'],_0x1b0018=_0x4440ae['boundsDelt'+'a'],_0x56d477=_0x13e7ea['clone']()['add'](_0x1b0018),_0x1237bf=_0x4440ae['boundsDelt'+'a']['clone']()['div'](_0x52c452),_0x28d77e=It['gridPositi'+'ons'],_0x2dd3c3=It['gridColors'],_0x49eb62=new ie(-0x102c+-0x24ac+0x26*0x164+0.3,-0x12bc+-0x1337*-0x1+-0x7b+0.3,-0x7e1+0x6d*-0x47+0x261c+0.3),_0x13aef4=(_0x1c6be4,_0x5ae3fd,_0x524431,_0x2d7e6a,_0x52310c,_0x18d658,_0x59933b,_0x511d22,_0x370ffc)=>{for(let _0x3f1514=-0x19da+-0x7*-0x3a3+-0x65*-0x1;_0x3f1514<=_0x1c6be4;_0x3f1514++)for(let _0x52ce22=0x1*0xcdb+-0x17db*0x1+0xb00;_0x52ce22<=_0x5ae3fd;_0x52ce22++){const _0x508cae=_0x524431+_0x3f1514*_0x2d7e6a,_0x22ca50=_0x52310c+_0x52ce22*_0x18d658;_0x370ffc===0x1aa7*-0x1+0xfd8+-0xacf*-0x1?_0x28d77e['push'](_0x508cae,_0x59933b,_0x22ca50,_0x508cae,_0x511d22,_0x22ca50):_0x370ffc===-0x1*-0x25b3+0x133*-0x1d+0xf9*-0x3?_0x28d77e['push'](_0x508cae,_0x22ca50,_0x59933b,_0x508cae,_0x22ca50,_0x511d22):_0x370ffc===0x234f+0x241*0x9+-0x3796&&_0x28d77e['push'](_0x59933b,_0x508cae,_0x22ca50,_0x511d22,_0x508cae,_0x22ca50);}};if(_0x13aef4(_0x52c452['x'],_0x52c452['z'],_0x13e7ea['x'],_0x1237bf['x'],_0x13e7ea['z'],_0x1237bf['z'],_0x13e7ea['y'],_0x56d477['y'],0x1*0x18c2+0x1*0x133+0x3*-0x8a7),_0x13aef4(_0x52c452['x'],_0x52c452['y'],_0x13e7ea['x'],_0x1237bf['x'],_0x13e7ea['y'],_0x1237bf['y'],_0x13e7ea['z'],_0x56d477['z'],-0x459*-0x1+0x1659+-0x1ab1),_0x13aef4(_0x52c452['y'],_0x52c452['z'],_0x13e7ea['y'],_0x1237bf['y'],_0x13e7ea['z'],_0x1237bf['z'],_0x13e7ea['x'],_0x56d477['x'],-0x1*0x10f+0x258f+-0x247e),_0x28d77e['length']){const _0x3bc72e=_0x28d77e['length']/(0x1b9d+0x1570+0x1885*-0x2);if(_0x3bc72e!==_0x2dd3c3['length']/(0x3*-0xa2b+-0x1*0x1a93+0x3918)){_0x2dd3c3['length']=-0x1092+0x200+0xe92;for(let _0x1bb2f2=-0x858+0x2bb*0x1+0x59d;_0x1bb2f2<_0x3bc72e;_0x1bb2f2++)_0x2dd3c3['push'](_0x49eb62['r'],_0x49eb62['g'],_0x49eb62['b'],_0x49eb62['a']);}_0x3e3c4e['drawLineAr'+'rays'](_0x28d77e,_0x2dd3c3),_0x28d77e['length']=0x57a*0x4+0x8b7+-0x1e9f;}let _0x59f9a1=It['mesh'];_0x59f9a1||(_0x59f9a1=new Ge(_0x168c20),_0x59f9a1['clear'](!(0x14e3*0x1+-0x10*0x14d+-0x13),!(-0x3*-0x9f7+-0x5*-0x283+-0x2a74)),It['mesh']=_0x59f9a1);const _0xca0ff8=[],_0x557e63=[],_0xb9d105=[],_0x5c22c5=_0x429ffd['_cells']['x'],_0x21c282=_0x429ffd['_cells']['z'],_0x283435=_0x429ffd['counts'],_0x6146cc=_0x429ffd['_maxCellLi'+'ghtCount'],_0x2f1a05=new I(),_0x5d3a41=new I(),_0x369dd1=new I(),_0x28d770=_0x1b0018['clone']()['div'](_0x52c452);let _0x45ed4a=-0x641*-0x1+0xf*0x265+0x2*-0x1516;for(let _0x342607=-0x88d*0x1+0x125*0x1+0xed*0x8;_0x342607<_0x52c452['x'];_0x342607++)for(let _0x345bb1=0x201f+0x6c9+-0x1f2*0x14;_0x345bb1<_0x52c452['z'];_0x345bb1++)for(let _0x4d3d5e=0x53f+0x1af2+-0x2031;_0x4d3d5e<_0x52c452['y'];_0x4d3d5e++){const _0x485619=_0x342607+_0x5c22c5*(_0x345bb1+_0x4d3d5e*_0x21c282),_0x19bd0f=_0x283435[_0x485619];if(_0x19bd0f>0x1b9c+0x2*0x588+0x9ab*-0x4){_0x2f1a05['x']=_0x13e7ea['x']+_0x28d770['x']*_0x342607,_0x2f1a05['y']=_0x13e7ea['y']+_0x28d770['y']*_0x4d3d5e,_0x2f1a05['z']=_0x13e7ea['z']+_0x28d770['z']*_0x345bb1,_0x5d3a41['add2'](_0x2f1a05,_0x28d770),_0xca0ff8['push'](_0x2f1a05['x'],_0x2f1a05['y'],_0x5d3a41['z']),_0xca0ff8['push'](_0x5d3a41['x'],_0x2f1a05['y'],_0x5d3a41['z']),_0xca0ff8['push'](_0x5d3a41['x'],_0x5d3a41['y'],_0x5d3a41['z']),_0xca0ff8['push'](_0x2f1a05['x'],_0x5d3a41['y'],_0x5d3a41['z']),_0xca0ff8['push'](_0x5d3a41['x'],_0x2f1a05['y'],_0x2f1a05['z']),_0xca0ff8['push'](_0x2f1a05['x'],_0x2f1a05['y'],_0x2f1a05['z']),_0xca0ff8['push'](_0x2f1a05['x'],_0x5d3a41['y'],_0x2f1a05['z']),_0xca0ff8['push'](_0x5d3a41['x'],_0x5d3a41['y'],_0x2f1a05['z']),_0x369dd1['lerp'](It['colorLow'],It['colorHigh'],_0x19bd0f/_0x6146cc)['round']();for(let _0x152ec0=-0x1b*-0x1+-0x11*-0x151+-0x167c;_0x152ec0<-0x1*-0x422+0x2589+-0x29a3;_0x152ec0++)_0x557e63['push'](_0x369dd1['x'],_0x369dd1['y'],_0x369dd1['z'],0x1fe5+0x1a89+0x1*-0x3a6d);_0xb9d105['push'](_0x45ed4a*(0x1c3e+0xd6f+-0x29a5)+(-0x1664+-0x1188+0x27ec),_0x45ed4a*(-0x2*0x875+-0x2a9*-0x2+0xba0)+(0xd*-0x14d+-0x25f0+-0x36da*-0x1),_0x45ed4a*(-0xe37+-0x2d9+0x1118)+(0x23d1*-0x1+-0xf*-0x24b+0x1*0x16f)),_0xb9d105['push'](_0x45ed4a*(-0x2*0x65a+-0x1a0d+0x26c9*0x1)+(-0x1*-0x1087+0x2151*0x1+-0x31d5),_0x45ed4a*(0x24af*0x1+-0x12fa+-0x1*0x11ad)+(0xa*0x8f+-0x1f7e+0x19e9),_0x45ed4a*(-0x210e+-0x36e*0x1+0x3*0xc2c)+(-0x1*-0x935+0xb9*-0x22+0xf5f)),_0xb9d105['push'](_0x45ed4a*(0x4a*0x77+0x1*-0xacd+-0x1791)+(0x1*-0xf4d+-0x790*0x2+0x1*0x1e71),_0x45ed4a*(0x11*0x185+0x2660+0x1*-0x402d)+(-0x1*0x270b+0x1*-0x1416+0x3b26),_0x45ed4a*(0x167*0x16+0x2*-0x6e+-0x1df6)+(0x367*-0x9+-0x24a9+0x434f)),_0xb9d105['push'](_0x45ed4a*(0x1fd4+-0x419+0x3f5*-0x7)+(0x19a3+0x1aec+0x1a44*-0x2),_0x45ed4a*(-0xd5d*-0x2+-0xf49*0x1+-0xb69)+(-0x311+0x565*-0x7+0x28d9),_0x45ed4a*(0xec5+0x1*0x67+0x4*-0x3c9)+(-0x1a46+-0x13e7+0x2e33*0x1)),_0xb9d105['push'](_0x45ed4a*(-0x1771+-0x198f+0x3*0x1058)+(0x1e*-0xd1+0x2524+-0xca3),_0x45ed4a*(0x1271+-0x10*-0x107+-0x22d9)+(-0x59*0x61+0x55*0xa+0x1e69),_0x45ed4a*(-0x49f+-0x2f*-0x89+-0x1480)+(-0xc52+-0x1613+0x226b)),_0xb9d105['push'](_0x45ed4a*(-0x527+-0x1208+0x1737)+(-0x2382+-0x979+0x2cfd),_0x45ed4a*(0x1110+-0xd5b*-0x1+0xa21*-0x3)+(-0x1e03+0x1e3a+-0x3*0x10),_0x45ed4a*(0xd83+0xa1b+0xbcb*-0x2)+(0x4*0x8c9+0x141d+-0x373b)),_0xb9d105['push'](_0x45ed4a*(-0x10a+-0x184c+0x195e)+(-0xe39+-0x241+-0x107b*-0x1),_0x45ed4a*(0x1c0+-0x1a1b+0x1863)+(0x2f*0x9d+0x1*-0x178d+0x1e*-0x2d),_0x45ed4a*(0x1968+0x13c1*0x1+-0x3*0xf0b)+(0x1a32+-0x17b0+-0x27e)),_0xb9d105['push'](_0x45ed4a*(0x2*-0x1296+-0x1bc5*0x1+-0x1*-0x40f9)+(0x1f22+0x87e*-0x2+-0xe26),_0x45ed4a*(-0x23eb+0x103*-0x15+0x3932)+(-0xce5*-0x3+-0xb9*0x6+-0x2254),_0x45ed4a*(0x8*-0x95+-0x26*0xa6+-0x2*-0xeaa)+(-0xe66+0x1453+0x5e9*-0x1)),_0xb9d105['push'](_0x45ed4a*(0x5c*0x52+-0x2*-0x4d2+-0x2714)+(-0x1683+-0x14f+0x39*0x6b),_0x45ed4a*(0x2065+0x352+0x261*-0xf)+(-0x2052+0xc25+0x1*0x1431),_0x45ed4a*(0x267b+0x17c4+-0x3e37)+(0x58f*0x2+0x204e+-0x2b6a)),_0xb9d105['push'](_0x45ed4a*(-0x206a+-0x5*0x11b+0x25f9)+(0x1*-0xdbf+-0xd1*-0x7+-0x80c*-0x1),_0x45ed4a*(-0x218e+0x22*-0x125+0x4880)+(0x11b*0x11+0xad*-0x25+0x1*0x63d),_0x45ed4a*(0x41d+0x1afe+-0x1f13)+(0x3*0x3f3+-0x2679+0x1aa2)),_0xb9d105['push'](_0x45ed4a*(-0x9*-0x13e+-0xfd1*0x2+-0x2e*-0x72)+(0x1*0x1b8f+-0x20a3+0x519),_0x45ed4a*(0x17a*0x8+-0x10*0xb8+-0x48*0x1)+(-0x7*-0x55d+-0x86e+-0x1d1d),_0x45ed4a*(-0x8db*-0x4+-0xe97+0xf*-0x163)+(0x125f*-0x2+-0x8*0xb1+0x2a4c)),_0xb9d105['push'](_0x45ed4a*(0x1a25+-0x1*0x2170+0x5*0x177)+(0x76*-0x3+-0x4ea+-0x2*-0x326),_0x45ed4a*(-0x8*-0x47+0x1c5*0x3+-0x77f)+(-0x3*-0xc85+0x1b8e+-0x1*0x411a),_0x45ed4a*(-0x1508+0x831*0x2+-0x1*-0x4ae)+(0x5*0x257+-0x24e8+0x1*0x193b)),_0x45ed4a++;}}if(_0x45ed4a){if(_0x59f9a1['setPositio'+'ns'](_0xca0ff8),_0x59f9a1['setNormals'](new Float32Array(_0xca0ff8['length'])),_0x59f9a1['setColors3'+'2'](_0x557e63),_0x59f9a1['setIndices'](_0xb9d105),_0x59f9a1['update'](zs,!(-0x4*0x119+0x32*0x9e+-0x1a77)),!It['meshInstan'+'ce']){const _0x32585f=new ws();_0x32585f['useLightin'+'g']=!(-0x1*-0x1db6+-0x1*-0x43e+-0x21f3),_0x32585f['emissive']=new ie(0x11e9+0x83*-0x1b+-0x15d*0x3,0x16*0x191+-0xeab*-0x2+-0x3fcb,0x1b9+-0x1847+-0xa5*-0x23),_0x32585f['emissiveVe'+'rtexColor']=!(0x2633+-0x14f6+-0x3*0x5bf),_0x32585f['blendType']=Yc,_0x32585f['depthWrite']=!(0x24ff+-0x94f*-0x1+-0x1b*0x1b7),_0x32585f['update']();const _0x1f84ab=new He('WorldClust'+'ersDebug');_0x1f84ab['worldTrans'+'form']=te['IDENTITY'],_0x1f84ab['_dirtyWorl'+'d']=_0x1f84ab['_dirtyNorm'+'al']=!(-0x17*-0xdd+0x1152+-0x252c*0x1),It['meshInstan'+'ce']=new We(_0x59f9a1,_0x32585f,_0x1f84ab),It['meshInstan'+'ce']['cull']=!(-0x21*-0x5b+0xd*0x6d+0x1*-0x1143);}const _0xa19a27=It['meshInstan'+'ce'];_0x3e3c4e['immediate']['drawMesh'](_0xa19a27['material'],_0xa19a27['node']['worldTrans'+'form'],null,_0xa19a27,_0x3e3c4e['defaultDra'+'wLayer']);}}};h(It,'gridPositi'+'ons',[]),h(It,'gridColors',[]),h(It,'mesh',null),h(It,'meshInstan'+'ce',null),h(It,'colorLow',new I(0x7*-0x38a+0x392+-0x59*-0x3d,-0x7*-0x2cb+-0xb*-0x347+-0x3799,-0xc94+0x1d*-0xe9+0x26fa)),h(It,'colorHigh',new I(-0x852+-0x1*0xd13+0x265*0x9,0x1*-0x1f46+0x17fc+0x26e*0x3,0x3*-0x862+0xaaa+0xe7c));let Df=It;const LE='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let Ri=null;const Ly=()=>{if(!Ri){const _0x46d3b0=atob(LE);Ri=Uint8Array['from'](_0x46d3b0,_0x527d87=>_0x527d87['charCodeAt'](0x26fa+-0x1164+-0x266*0x9));}},RE=()=>(Ly(),Ri);class OE{constructor(_0x2701c7=-0xf7*0xc+0x24b9+-0x1925){h(this,'seed',-0x5a8*0x3+0x1*0x2333+-0xd*0x167),(this['seed']=_0x2701c7*(-0x1081+-0x1a8d+0x2b12),Ly());}['_next'](){this['seed']=(this['seed']+(0x9*0x37d+0x1913+-0x3874))%Ri['length'];}['value'](){return this['_next'](),Ri[this['seed']]/(-0xaf*0x26+-0x11b*-0x7+-0x133c*-0x1);}['vec4'](_0x344fc2=new ae()){return this['_next'](),_0x344fc2['set'](Ri[this['seed']],Ri[this['seed']+(0x31*-0x22+0x1*0x11b9+-0xb36)],Ri[this['seed']+(-0x255*-0xb+-0x22c3+-0x6*-0x185)],Ri[this['seed']+(-0xc0*-0xa+-0x13a7+0x40e*0x3)])['mulScalar']((0x9*-0x85+0x1db1+-0x1903)/(-0x36*-0xa6+-0x1ef1+-0x314));}}const FE=[new I(-(-0x21f0+0x2*0x243+-0x11*-0x1bb),-0x1fb+-0x137d+0x1578,-0x3*-0x6c5+0x971+-0x1dc0),new I(0x1*-0x1a2d+-0x160f+0x303d,0xa*0x3b4+0xaf3+-0x2ffb,0x1*-0x817+-0x15bf+-0x43*-0x72),new I(-0x6a1+-0x5e9+-0xf*-0xd6,-(0x985*-0x1+0xb6*0x1+0x8d0),-0xf3*-0x12+-0x1aaf+0x999),new I(0x20d8+-0x13eb+-0xced,-0x1253+-0xcd1*0x2+0x2bf6,0xd*0x149+0x2703+-0x8*0x6f7),new I(-0x19d6+-0x267c+-0x1*-0x4052,0x124f+0x352+0x71*-0x31,-(-0x61f*0x5+-0x1*0x1867+0x3703)),new I(0x1e2*-0xa+0x32b*0x7+-0x359,-0x1*0xe26+0x4*0x203+0x30d*0x2,0xaf4+0x2*-0x374+0x1*-0x40b)];class NE{constructor(){h(this,'colors',new Float32Array(-0x2f3*-0x5+0x1*-0x254f+0x16a2));}['update'](_0x132587,_0x2f0342){const _0x67538b=this['colors'],{r:_0xec8cda,g:_0x5d2fff,b:_0x41433e}=_0x132587;for(let _0x29fc87=0x5ac+0x838+-0xfe*0xe;_0x29fc87<0x359*-0x4+0x1*0xc2c+-0x35*-0x6;_0x29fc87++)_0x67538b[_0x29fc87*(-0x19e+0x1528+-0x1387*0x1)]=_0xec8cda,_0x67538b[_0x29fc87*(-0x182e*-0x1+-0x1fc3+0x798)+(-0x5*-0x282+0x2*-0x595+0xd*-0x1b)]=_0x5d2fff,_0x67538b[_0x29fc87*(-0x959*0x2+0x3*-0xcf7+0x399a)+(0xb*0x106+0x175d+-0x229d)]=_0x41433e;for(let _0x3e5b40=0xd7+-0x7*0xeb+-0x41*-0x16;_0x3e5b40<_0x2f0342['length'];_0x3e5b40++){const _0x17f53b=_0x2f0342[_0x3e5b40];if(_0x17f53b['_type']===ve)for(let _0x5e652e=0x471*-0x3+0x8c*0xb+0x74f;_0x5e652e<-0x1a*0xba+0x4d4*-0x1+0x3f5*0x6;_0x5e652e++){const _0x489424=Math['max'](FE[_0x5e652e]['dot'](_0x17f53b['_direction']),-0x18b8+-0x183*-0x11+0x1*-0xfb)*_0x17f53b['_intensity'],_0x5ed78c=_0x17f53b['_color'];_0x67538b[_0x5e652e*(0x7d6+-0xe5*-0x21+-0x2558)]+=_0x5ed78c['r']*_0x489424,_0x67538b[_0x5e652e*(0x12d4+0x2131+0x3402*-0x1)+(0x1*-0x263b+-0x263c*-0x1+0x0)]+=_0x5ed78c['g']*_0x489424,_0x67538b[_0x5e652e*(0xb88+-0x1eb9+0x1334)+(-0x15*-0x6f+0x4fc*-0x5+-0x1*-0xfd3)]+=_0x5ed78c['b']*_0x489424;}}}}const kE=(_0x5ef2e7,_0x4e09bb,_0xf60510,_0x285736)=>{const _0x5e10a9=new _e(_0x5ef2e7,{'name':''+_0x4e09bb+_0xf60510,'width':_0xf60510,'height':_0xf60510,'format':Oe,'addressU':pt,'addressV':pt,'type':di,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0xdfc*0x2+0x5*-0x4+0x1c0d)});return _0x5e10a9['lock']()['set'](_0x285736),_0x5e10a9['unlock'](),_0x5e10a9;},UE=new Ht(),BE=_0x123f5e=>UE['get'](_0x123f5e,()=>{const _0xb69231=RE(),_0x4e7429=Math['sqrt'](_0xb69231['length']/(-0x2*-0x10fd+0x2065*-0x1+-0x191*0x1));return kE(_0x123f5e,'BlueNoise',_0x4e7429,_0xb69231);});class na{constructor(_0xe3a663,_0x4acb40){this['texture']=_0xe3a663,this['cached']=!(0x6*0x623+-0x61*0x49+-0x494*0x2),this['renderTarg'+'ets']=_0x4acb40;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0xaa350d=this['renderTarg'+'ets'];for(let _0x4e94de=0x154e+0x118b+-0x26d9;_0x4e94de<_0xaa350d['length'];_0x4e94de++)_0xaa350d[_0x4e94de]['destroy']();this['renderTarg'+'ets']['length']=0x2674+-0x43*0x1+-0xcbb*0x3;}static['create'](_0x3306f8,_0x59a70f){let _0x42e44b=null;return _0x59a70f['_type']===Ye?_0x42e44b=this['createCube'+'map'](_0x3306f8,_0x59a70f['_shadowRes'+'olution'],_0x59a70f['_shadowTyp'+'e']):_0x42e44b=this['create2dMa'+'p'](_0x3306f8,_0x59a70f['_shadowRes'+'olution'],_0x59a70f['_shadowTyp'+'e']),_0x42e44b;}static['createAtla'+'s'](_0x1143ce,_0x305682,_0x26e083){const _0x375da3=this['create2dMa'+'p'](_0x1143ce,_0x305682,_0x26e083),_0x3a7968=_0x375da3['renderTarg'+'ets'],_0x31eb64=_0x3a7968[-0xb7*0xc+0x2*0x639+-0xa5*0x6];for(let _0xeab9c7=0x12cd+-0x239b+0x10ce;_0xeab9c7<0x139f+0x23df+-0x3779;_0xeab9c7++)_0x3a7968['push'](_0x31eb64);return _0x375da3;}static['create2dMa'+'p'](_0x2e29a7,_0x2c6894,_0x3babc5){var _0x2fdc89;const _0xb740ee=Bi['get'](_0x3babc5);M['assert'](_0xb740ee);let _0x379a5d=_0xb740ee['format'];_0x379a5d===Hi&&!_0x2e29a7['textureFlo'+'atRenderab'+'le']&&_0x2e29a7['textureHal'+'fFloatRend'+'erable']&&(_0x379a5d=Lc);const _0x53403c=(_0x2fdc89=Lt['get'](_0x379a5d))==null?void(-0x65*0x1+0x2ad+-0x2*0x124):_0x2fdc89['name'];let _0x496d9a=_t;_0x3babc5===ym&&(_0x496d9a=_0x2e29a7['extTexture'+'FloatLinea'+'r']?_t:Te),_0x3babc5===No&&(_0x496d9a=Te);const _0x472f5c=new _e(_0x2e29a7,{'profilerHint':xf,'format':_0x379a5d,'width':_0x2c6894,'height':_0x2c6894,'mipmaps':!(0xdcf+0x1b75+-0x2943),'minFilter':_0x496d9a,'magFilter':_0x496d9a,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x53403c});let _0x187ef1=null;return _0xb740ee!=null&&_0xb740ee['pcf']?(_0x472f5c['compareOnR'+'ead']=!(0x12d3+0xd40*0x1+0x15*-0x187),_0x472f5c['compareFun'+'c']=Dh,_0x187ef1=new vt({'depthBuffer':_0x472f5c})):_0x187ef1=new vt({'colorBuffer':_0x472f5c,'depth':!(-0xf91+-0x291+0x1222)}),_0x2e29a7['isWebGPU']&&(_0x187ef1['flipY']=!(0x185*-0xb+-0x2268+0x331f)),new na(_0x472f5c,[_0x187ef1]);}static['createCube'+'map'](_0x4d7dee,_0x5dc6e1,_0xe9771d){var _0xda2486;const _0x1ffa3e=Bi['get'](_0xe9771d);M['assert'](_0x1ffa3e);const _0x4ef9fe=(_0xda2486=Lt['get'](_0x1ffa3e['format']))==null?void(-0x1f1*0x7+-0x20*0x71+-0xf*-0x1d9):_0xda2486['name'],_0x2386a2=_0xe9771d===No,_0x3584fe=_0x2386a2?Te:_t,_0x3bd288=new _e(_0x4d7dee,{'profilerHint':xf,'format':_0x1ffa3e==null?void(-0xb*0x4c+-0x1e61+0x21a5):_0x1ffa3e['format'],'width':_0x5dc6e1,'height':_0x5dc6e1,'cubemap':!(-0x16*-0x12f+-0x1081+-0x989*0x1),'mipmaps':!(0x43d+-0xff5+0xbb9),'minFilter':_0x3584fe,'magFilter':_0x3584fe,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x4ef9fe});_0x2386a2||(_0x3bd288['compareOnR'+'ead']=!(0x2044+-0x29*-0x65+-0x3071*0x1),_0x3bd288['compareFun'+'c']=Dh);const _0x188db5=[];for(let _0x445692=-0x17d*-0x6+-0x33a+-0x5b4;_0x445692<0x112e+-0x1*0x145a+0x1*0x332;_0x445692++)_0x2386a2?_0x188db5['push'](new vt({'colorBuffer':_0x3bd288,'face':_0x445692,'depth':!(-0x5*0x179+0x4*0x89c+0x1*-0x1b13)})):_0x188db5['push'](new vt({'depthBuffer':_0x3bd288,'face':_0x445692}));return new na(_0x3bd288,_0x188db5);}}const zE=[],VE=[],ui=new ae(),Ed=new ae();class Ad{constructor(_0x1e0251){this['size']=Math['floor'](_0x1e0251['w']*(0xe+0xf30+-0xb3e)),this['used']=!(0x16f9+-0x1b*-0x2d+-0x1bb7),this['lightId']=-(-0x17bc+0x44*0x2c+0xc0d),this['rect']=_0x1e0251;}}class GE{constructor(_0x5b5c0a){this['device']=_0x5b5c0a,this['version']=-0x109*-0x25+0x23e1+-0x4a2d,this['shadowAtla'+'sResolutio'+'n']=-0x29*0x2f+-0x1*0x566+-0x1*-0x14ed,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=0x148f+0x2224+0x1*-0x36b0,this['cookieAtla'+'sResolutio'+'n']=-0x2*0x1a5+0x434+-0xe6,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':hs,'cubemap':!(0x269c+-0x2*0x531+-0x1c39),'mipmaps':!(0x1*-0xf0f+0xa*-0x16c+0x1d48),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new vt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(-0x1a3b+-0x1*-0x1cdb+-0x3d*0xb),'flipY':!(0xa1a+-0x7f*-0x2e+0x31*-0xac)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(0x147f+-0x9*-0x24e+0x33*-0xcf,-0x21d6+0x148a+0x2*0x6a6),new J(-0x2*-0x1064+0x1*-0xd5+-0x1ff3,-0xff+0x2*-0x1132+0x714*0x5),new J(-0x25cf*-0x1+-0x183*0x4+-0x1fc2,0x4*-0x376+0x1bff+-0xe27*0x1),new J(-0x150c+-0x4*-0x3a3+0x681,0x10e9+0x4*-0x518+0x378),new J(-0x6b*0x3b+0x8*-0x2de+0x2f9b,0x123b*-0x2+-0x522+-0x2998*-0x1),new J(0x876+0x1*0x1381+-0x1bf5,0x2*-0xffb+-0xd9*0x4+0x235b)],this['scissorVec']=new ae(),this['allocateSh'+'adowAtlas'](-0xf*-0x20e+0x143*0x7+0x46*-0x91),this['allocateCo'+'okieAtlas'](0x1665+-0x11d7*-0x1+0x3*-0xd69),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x28abea;(_0x28abea=this['shadowAtla'+'s'])==null||_0x28abea['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0xa94d63,_0x1a9372;(_0xa94d63=this['cookieAtla'+'s'])==null||_0xa94d63['destroy'](),this['cookieAtla'+'s']=null,(_0x1a9372=this['cookieRend'+'erTarget'])==null||_0x1a9372['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x59db64,_0x33e4aa=ks){var _0x4178d3;const _0x140646=(_0x4178d3=this['shadowAtla'+'s'])==null?void(0x1*-0x1272+-0x7f6+-0x548*-0x5):_0x4178d3['texture']['format'],_0x3382d9=Bi['get'](_0x33e4aa)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x59db64||_0x140646!==_0x3382d9){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=na['createAtla'+'s'](this['device'],_0x59db64,_0x33e4aa),this['shadowAtla'+'s']['cached']=!(-0x644*-0x5+0x15df+-0x3533);const _0x572442=(-0x151c+-0x1233*0x1+-0x2753*-0x1)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x572442,_0x572442,-(-0x112*-0xe+0x24d1+-0x33cb)*_0x572442,-(0x24a6+0x536+-0x29da)*_0x572442);}}['allocateCo'+'okieAtlas'](_0x5869ae){this['cookieAtla'+'s']['width']!==_0x5869ae&&(this['cookieRend'+'erTarget']['resize'](_0x5869ae,_0x5869ae),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x1*-0x29f+0x1*0x463+-0x9*0x32),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x2acaeb=this['shadowAtla'+'s']['renderTarg'+'ets'][0x1279+-0x9e8+-0x1*0x891]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x2acaeb),this['_shadowAtl'+'asParams'][-0x1d*0x84+0x247a+-0x1586]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][-0x9d*0x19+0x1*-0x1ee2+0x2e38]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x378f50,_0x4a1137){let _0x362acc=_0x4a1137['atlasSplit'];if(!_0x362acc){const _0x5da137=Math['ceil'](Math['sqrt'](_0x378f50));_0x362acc=VE,_0x362acc[-0x37*0xb4+0x2bf*-0x2+0x2c2a]=_0x5da137,_0x362acc['length']=0x1cf7+0x12fd*-0x1+0x9f9*-0x1;}if(!((_0x3954f8,_0x37a64a)=>_0x3954f8['length']===_0x37a64a['length']&&_0x3954f8['every']((_0x5e7d2a,_0x282c44)=>_0x5e7d2a===_0x37a64a[_0x282c44]))(_0x362acc,this['atlasSplit'])){this['version']++,this['slots']['length']=0x4f*0x17+0x1*0x1229+-0x1942,this['atlasSplit']['length']=-0x24dd*-0x1+0x7f4*0x1+-0xb*0x413,this['atlasSplit']['push'](..._0x362acc);const _0x582a02=this['atlasSplit'][0x1f67+0x39*-0x72+-0x605];if(_0x582a02>0x2469+0x6c1+-0x2b29){const _0x13b129=(-0x1*-0xbf6+0x15db+-0x21d0)/_0x582a02;for(let _0x605504=0x23ae+0xa7*-0x1f+-0xf75;_0x605504<_0x582a02;_0x605504++)for(let _0x538a08=-0x3c*0x8f+-0x12*0x171+0x3b76;_0x538a08<_0x582a02;_0x538a08++){const _0x4e0db9=new ae(_0x605504*_0x13b129,_0x538a08*_0x13b129,_0x13b129,_0x13b129),_0x56e096=this['atlasSplit'][-0x18+0x21ab+-0x2192+_0x605504*_0x582a02+_0x538a08];if(_0x56e096>0x4*-0x28+0x4*-0x933+0x256d*0x1){for(let _0x3ae7a2=-0x9cf+0xb3c*0x2+-0xca9;_0x3ae7a2<_0x56e096;_0x3ae7a2++)for(let _0x46c9e5=-0x1*-0x14db+-0x559+-0xf82;_0x46c9e5<_0x56e096;_0x46c9e5++){const _0x3c8a35=_0x13b129/_0x56e096,_0xd27b92=new ae(_0x4e0db9['x']+_0x3ae7a2*_0x3c8a35,_0x4e0db9['y']+_0x46c9e5*_0x3c8a35,_0x3c8a35,_0x3c8a35);this['slots']['push'](new Ad(_0xd27b92));}}else this['slots']['push'](new Ad(_0x4e0db9));}}else this['slots']['push'](new Ad(new ae(0x144d*0x1+0x3*0x68e+-0x27f7,-0x1*0xe6f+0x57e+-0x15*-0x6d,0x2*0x1351+-0xfe5+-0x61*0x3c,0x96e*0x1+0x582*0x3+0x7*-0x3b5)));this['slots']['sort']((_0x581af8,_0x24af7d)=>_0x24af7d['size']-_0x581af8['size']);}}['collectLig'+'hts'](_0xad56dd,_0x51d82a){const _0x412a2f=_0x51d82a['cookiesEna'+'bled'],_0x17878b=_0x51d82a['shadowsEna'+'bled'];let _0x8bcece=!(-0xa4c*-0x2+0x5*-0x6b7+-0x33f*-0x4),_0x35daf2=!(-0x1495+0xc49+-0x55*-0x19);const _0x3162a2=zE;return _0x3162a2['length']=-0x1617+0x84a*-0x1+0x1e61,(_0x412a2f||_0x17878b)&&(_0x34eb0f=>{for(let _0x529bfe=0x1cf1+-0xfad*0x1+0x11b*-0xc;_0x529bfe<_0x34eb0f['length'];_0x529bfe++){const _0x570c84=_0x34eb0f[_0x529bfe];if(_0x570c84['visibleThi'+'sFrame']){const _0x103bbb=_0x17878b&&_0x570c84['castShadow'+'s'],_0x255811=_0x412a2f&&!!_0x570c84['cookie'];_0x8bcece||(_0x8bcece=_0x103bbb),_0x35daf2||(_0x35daf2=_0x255811),(_0x103bbb||_0x255811)&&_0x3162a2['push'](_0x570c84);}}})(_0xad56dd),_0x3162a2['sort']((_0x431d61,_0x599ed8)=>_0x599ed8['maxScreenS'+'ize']-_0x431d61['maxScreenS'+'ize']),_0x8bcece&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x51d82a['shadowType']),_0x35daf2&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x8bcece||_0x35daf2)&&this['subdivide'](_0x3162a2['length'],_0x51d82a),_0x3162a2;}['setupSlot'](_0x4cd679,_0x513c69){_0x4cd679['atlasViewp'+'ort']['copy'](_0x513c69);const _0x36c603=_0x4cd679['numShadowF'+'aces'];for(let _0x50729e=-0x260e+-0x11d4+0x37e2;_0x50729e<_0x36c603;_0x50729e++)if(_0x4cd679['castShadow'+'s']||_0x4cd679['_cookie']){if(ui['copy'](_0x513c69),Ed['copy'](_0x513c69),_0x4cd679['_type']===Ke&&ui['add'](this['scissorVec']),_0x4cd679['_type']===Ye){const _0x54bb2f=ui['z']/(0x131+-0x4cd*-0x6+-0x1dfc),_0x5e755d=this['cubeSlotsO'+'ffsets'][_0x50729e];ui['x']+=_0x54bb2f*_0x5e755d['x'],ui['y']+=_0x54bb2f*_0x5e755d['y'],ui['z']=_0x54bb2f,ui['w']=_0x54bb2f,Ed['copy'](ui);}if(_0x4cd679['castShadow'+'s']){const _0x21fd3c=_0x4cd679['getRenderD'+'ata'](null,_0x50729e);_0x21fd3c['shadowView'+'port']['copy'](ui),_0x21fd3c['shadowScis'+'sor']['copy'](Ed);}}}['assignSlot'](_0xd19854,_0x39a301,_0x409630){_0xd19854['atlasViewp'+'ortAllocat'+'ed']=!(-0x7*0x2af+-0x3*0x5ff+0x24c6);const _0x1a46cb=this['slots'][_0x39a301];_0x1a46cb['lightId']=_0xd19854['id'],_0x1a46cb['used']=!(0x1ba8+-0x2621+0xa79),_0x409630&&(_0xd19854['atlasSlotU'+'pdated']=!(0x504+0x3*-0x623+0x7f*0x1b),_0xd19854['atlasVersi'+'on']=this['version'],_0xd19854['atlasSlotI'+'ndex']=_0x39a301);}['update'](_0x5982e9,_0x325fc1){this['shadowAtla'+'sResolutio'+'n']=_0x325fc1['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x325fc1['cookieAtla'+'sResolutio'+'n'];const _0x2204e=this['collectLig'+'hts'](_0x5982e9,_0x325fc1);if(_0x2204e['length']>-0x3d*0x76+-0x1*-0x212e+-0x510){const _0x11a307=this['slots'];for(let _0x5150b0=-0x10*-0x250+-0x9*-0xa3+0x2abb*-0x1;_0x5150b0<_0x11a307['length'];_0x5150b0++)_0x11a307[_0x5150b0]['used']=!(-0xb*0xdb+0x2*0x8f2+-0xa*0xd9);const _0x122ead=Math['min'](_0x2204e['length'],_0x11a307['length']);for(let _0x21a1c4=-0x5*0x86+0x2*-0xaab+0x17f4;_0x21a1c4<_0x122ead;_0x21a1c4++){const _0x365568=_0x2204e[_0x21a1c4];_0x365568['castShadow'+'s']&&(_0x365568['_shadowMap']=this['shadowAtla'+'s']);const _0x551632=_0x11a307[_0x365568['atlasSlotI'+'ndex']];if(_0x365568['atlasVersi'+'on']===this['version']&&_0x365568['id']===(_0x551632==null?void(-0x6ef+0x334+0x3bb):_0x551632['lightId'])){const _0x5dbfd0=_0x11a307[_0x365568['atlasSlotI'+'ndex']];_0x5dbfd0['size']===_0x11a307[_0x21a1c4]['size']&&!_0x5dbfd0['used']&&this['assignSlot'](_0x365568,_0x365568['atlasSlotI'+'ndex'],!(-0x107e+-0x1673+-0xa*-0x3e5));}}let _0x334544=-0x62f*-0x2+-0x7*-0x165+0x46d*-0x5;for(let _0x1298bd=0x417+-0x1*0x19b2+0x159b;_0x1298bd<_0x122ead;_0x1298bd++){for(;_0x334544<_0x11a307['length']&&_0x11a307[_0x334544]['used'];)_0x334544++;const _0x4d3d4a=_0x2204e[_0x1298bd];_0x4d3d4a['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x4d3d4a,_0x334544,!(-0x86*0x1d+-0x25ab*0x1+0x34d9));const _0x272fb1=_0x11a307[_0x4d3d4a['atlasSlotI'+'ndex']];this['setupSlot'](_0x4d3d4a,_0x272fb1['rect']);}}this['updateUnif'+'orms']();}}class HE{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x299703=>{_0x299703['forEach'](_0x59aefd=>{_0x59aefd['destroy']();});}),this['cache']['clear']();}['getKey'](_0x47a7ea){const _0x408884=_0x47a7ea['_type']===Ye,_0x2791a2=_0x47a7ea['_shadowTyp'+'e'],_0x2f4598=_0x47a7ea['_shadowRes'+'olution'];return _0x408884+'-'+_0x2791a2+'-'+_0x2f4598;}['get'](_0x100917,_0x3ed18f){const _0x1dbda9=this['getKey'](_0x3ed18f),_0x13c078=this['cache']['get'](_0x1dbda9);if(_0x13c078&&_0x13c078['length'])return _0x13c078['pop']();const _0x45b4ad=na['create'](_0x100917,_0x3ed18f);return _0x45b4ad['cached']=!(0x3c5+0x1*-0x1a7d+0x16b8),_0x45b4ad;}['add'](_0x964503,_0x43ba19){const _0x510ad9=this['getKey'](_0x964503),_0x553c4c=this['cache']['get'](_0x510ad9);_0x553c4c?_0x553c4c['push'](_0x43ba19):this['cache']['set'](_0x510ad9,[_0x43ba19]);}}class WE extends fs{constructor(_0x44da38,_0x1a340d,_0xac9cfd,_0x59d333,_0x19489a){super(_0x44da38),ca['setName'](this,this['name']+'-'+_0xac9cfd['_node']['name']),this['requiresCu'+'bemaps']=!(0x24ad+0x2*0x44b+-0x2d42),this['shadowRend'+'erer']=_0x1a340d,this['light']=_0xac9cfd,this['face']=_0x59d333,this['applyVsm']=_0x19489a,this['shadowCame'+'ra']=_0x1a340d['prepareFac'+'e'](_0xac9cfd,null,_0x59d333),_0x1a340d['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(0x1*0x8cb+0x140c+0x141*-0x17));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0xdf*0x16+-0x16b7+0x29e2));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class $E{constructor(_0xe220d0,_0x4991bd){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0xe220d0,this['shadowRend'+'erer']=_0x4991bd,this['device']=_0xe220d0['device']);}['cull'](_0x444af4,_0x28a077,_0x50a98e=null){const _0x1f604b=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x444af4['visibleThi'+'sFrame']=!(0x1346*0x1+-0x1e16+0xad0),_0x1f604b||_0x444af4['_shadowMap']||(_0x444af4['_shadowMap']=na['create'](this['device'],_0x444af4));const _0x5c16c2=_0x444af4['_type'],_0x58367f=_0x5c16c2===Ke?-0x70*-0x22+-0x14*-0x187+0x4d*-0x97:-0x123b*0x2+0xac0+0x19bc;for(let _0x4ca673=-0x4*-0x683+0x11*-0x130+-0x5dc;_0x4ca673<_0x58367f;_0x4ca673++){const _0x5f0ed0=_0x444af4['getRenderD'+'ata'](null,_0x4ca673),_0x4dfa79=_0x5f0ed0['shadowCame'+'ra'];_0x4dfa79['nearClip']=_0x444af4['attenuatio'+'nEnd']/(-0x1*-0x75a+0x2*0x445+0xbfc*-0x1),_0x4dfa79['farClip']=_0x444af4['attenuatio'+'nEnd'];const _0x904cf9=_0x4dfa79['_node'],_0x12fe32=_0x444af4['_node'];if(_0x904cf9['setPositio'+'n'](_0x12fe32['getPositio'+'n']()),_0x5c16c2===Ke)_0x4dfa79['fov']=_0x444af4['_outerCone'+'Angle']*(0x314+0x2540*0x1+-0x2852),_0x904cf9['setRotatio'+'n'](_0x12fe32['getRotatio'+'n']()),_0x904cf9['rotateLoca'+'l'](-(-0x695+0x1e4b+-0x175c),-0xd51+0xcfb*0x1+-0x56*-0x1,-0x2*0x40d+0x1407+0x47*-0x2b);else{if(_0x5c16c2===Ye){if(_0x1f604b){const _0x3dc187=(0x1903+-0x2c*0x2b+-0x119d)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x444af4['atlasViewp'+'ort']['z']/(-0x1e6c+0x10bb+0xdb4))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x4dfa79['fov']=Math['atan'](-0x2348+0x47b*0x1+0x1ece+_0x3dc187)*Y['RAD_TO_DEG']*(-0x1287+0x21b3+-0xf2a);}else _0x4dfa79['fov']=-0x1aee+0x48e*-0x7+0x3b2a*0x1;}}this['renderer']['updateCame'+'raFrustum'](_0x4dfa79),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x28a077,_0x444af4,_0x5f0ed0['visibleCas'+'ters'],_0x4dfa79,_0x50a98e);}}['prepareLig'+'hts'](_0x22ae6c,_0x3195c6){let _0x554bb5;for(let _0x495b54=0x1*0x8cf+-0x7a7+-0x128;_0x495b54<_0x3195c6['length'];_0x495b54++){const _0x1ec66d=_0x3195c6[_0x495b54];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x1ec66d)&&_0x1ec66d['atlasViewp'+'ortAllocat'+'ed']){_0x22ae6c['push'](_0x1ec66d);for(let _0x116488=0x1518+0x15d9+-0x2af1;_0x116488<_0x1ec66d['numShadowF'+'aces'];_0x116488++)_0x554bb5=this['shadowRend'+'erer']['prepareFac'+'e'](_0x1ec66d,null,_0x116488);}}return _0x554bb5;}['buildNonCl'+'usteredRen'+'derPasses'](_0x283f67,_0x3013d1){for(let _0x441ab8=-0x25ad+0x6b8+0x1*0x1ef5;_0x441ab8<_0x3013d1['length'];_0x441ab8++){const _0x35a024=_0x3013d1[_0x441ab8];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x35a024)){const _0x22a7af=_0x35a024['_type']===Ke,_0x78183=_0x35a024['numShadowF'+'aces'];for(let _0x5eeec1=-0x1f99+-0x7*0x4f2+0x4237;_0x5eeec1<_0x78183;_0x5eeec1++){const _0x4a34fc=new WE(this['device'],this['shadowRend'+'erer'],_0x35a024,_0x5eeec1,_0x22a7af);_0x283f67['addRenderP'+'ass'](_0x4a34fc);}}}}}class XE extends fs{constructor(_0x41c384,_0x39ba65,_0x2c46df,_0x5e42e8,_0x567ccb){super(_0x41c384),ca['setName'](this,this['name']+'-'+_0x2c46df['_node']['name']),this['shadowRend'+'erer']=_0x39ba65,this['light']=_0x2c46df,this['camera']=_0x5e42e8,this['allCascade'+'sRendering']=_0x567ccb;}['execute'](){const {light:_0x23f26d,camera:_0xb6aaeb,shadowRenderer:_0x51fd37,allCascadesRendering:_0x2de91d}=this,_0xf57a48=_0x23f26d['numShadowF'+'aces'],_0x42fe3c=_0x23f26d['shadowUpda'+'teOverride'+'s'];for(let _0xc44ed9=0x1*0x1b44+-0x1*-0x1871+-0x763*0x7;_0xc44ed9<_0xf57a48;_0xc44ed9++)(_0x42fe3c==null?void(-0x1*-0x48d+0x87e+-0xd0b):_0x42fe3c[_0xc44ed9])!==vs&&_0x51fd37['renderFace'](_0x23f26d,_0xb6aaeb,_0xc44ed9,!_0x2de91d),(_0x42fe3c==null?void(-0x6d*0xd+-0x12f9+-0x1882*-0x1):_0x42fe3c[_0xc44ed9])===or&&(_0x42fe3c[_0xc44ed9]=vs);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const kl=new Ie(),mi=new I(),i_=new te(),$e=[new I(),new I(),new I(),new I(),new I(),new I(),new I(),new I()],bd={'min':0x0,'max':0x0};function qE(_0x4ba76a,_0x4366ad,_0x401b52){$e[-0x18ed*0x1+0x7a*-0x1c+0x2645]['x']=$e[0x1b1d+-0x32f*-0x7+-0x3165]['x']=$e[0x1b70+0xe22+0x230*-0x13]['x']=$e[-0x492+-0xe6b*-0x2+0x377*-0x7]['x']=_0x4366ad['x'],$e[-0xd1b+-0xd3f*0x1+-0x1a5b*-0x1]['y']=$e[-0x8*0x108+-0x1a3*0x11+0x2416]['y']=$e[0x17d8+0x1d98+-0xb*0x4db]['y']=$e[0x1*-0x198f+-0x51*-0xc+-0x11*-0x148]['y']=_0x4366ad['y'],$e[-0x19be+0xaf*-0x30+0x3a90]['z']=$e[-0x267e+-0x2*-0x2d9+-0xe3*-0x25]['z']=$e[-0x2*0xa49+-0x1da4*0x1+0x323c]['z']=$e[0x5*-0x724+0x2406+-0x1*0x4b]['z']=_0x4366ad['z'],$e[0x2323+-0x19f5+-0x2*0x495]['x']=$e[0x19c2+0x16*-0x2f+0x5*-0x457]['x']=$e[0x1ce1+0x2b*-0xc2+0x3bb]['x']=$e[-0x33e+0x3*-0x23b+0x9f6]['x']=_0x401b52['x'],$e[0x21aa+-0x1fe4+-0x1c6*0x1]['y']=$e[0x1cb8+0x1*0x24bf+-0x4175]['y']=$e[0x2c9*0x1+0x1e30+-0x20f5]['y']=$e[0x5c9+-0x528+0x1f*-0x5]['y']=_0x401b52['y'],$e[0xce*0x2c+-0x96d*-0x2+-0x3642]['z']=$e[0x18e3*-0x1+-0x1*0x1e4d+0x3731]['z']=$e[-0x17*0x8d+-0x157c+-0x1*-0x222b]['z']=$e[0x409*-0x9+-0xd*-0x2bd+0xbd]['z']=_0x401b52['z'];let _0x4d509b=0x33feff435+0x1353f47*-0x10f+0x5b79ebf3,_0x3eb4d9=-(-0x1*0x48e829e6f+0x2b94a8a80+0x17*0x2e50de42);for(let _0x144830=0x2264+0x1589+-0x37ed;_0x144830<-0x1c8+-0x14f2+-0x1*-0x16c2;++_0x144830){_0x4ba76a['transformP'+'oint']($e[_0x144830],$e[_0x144830]);const _0x2c7993=$e[_0x144830]['z'];_0x2c7993<_0x4d509b&&(_0x4d509b=_0x2c7993),_0x2c7993>_0x3eb4d9&&(_0x3eb4d9=_0x2c7993);}return bd['min']=_0x4d509b,bd['max']=_0x3eb4d9,bd;}class jE{constructor(_0x5f5a6c,_0xe810df){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x5f5a6c,this['shadowRend'+'erer']=_0xe810df,this['device']=_0x5f5a6c['device']);}['cull'](_0x61cb59,_0x183fc6,_0x58ec40,_0x491229=null){_0x61cb59['visibleThi'+'sFrame']=!(0x1*0xc85+-0x2f*0x7f+0xacc),_0x61cb59['_shadowMap']||(_0x61cb59['_shadowMap']=na['create'](this['device'],_0x61cb59));const _0x5c5e47=_0x58ec40['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x61cb59,_0x5c5e47,Math['min'](_0x58ec40['_farClip'],_0x61cb59['shadowDist'+'ance']));const _0x27b804=_0x61cb59['shadowUpda'+'teOverride'+'s'];for(let _0xb6737f=-0xb8f+0xe8d+0x2fe*-0x1;_0xb6737f<_0x61cb59['numCascade'+'s']&&(_0x27b804==null?void(-0xbb4+0x1b87+-0xfd3):_0x27b804[_0xb6737f])!==vs;_0xb6737f++){const _0x1653dc=_0x61cb59['getRenderD'+'ata'](_0x58ec40,_0xb6737f),_0x39e3d3=_0x1653dc['shadowCame'+'ra'];_0x39e3d3['renderTarg'+'et']=_0x61cb59['_shadowMap']['renderTarg'+'ets'][-0x25c3*-0x1+-0x16*0x11b+-0xd71],_0x1653dc['shadowView'+'port']['copy'](_0x61cb59['cascades'][_0xb6737f]),_0x1653dc['shadowScis'+'sor']['copy'](_0x61cb59['cascades'][_0xb6737f]);const _0x648e5b=_0x39e3d3['_node'],_0x2845a2=_0x61cb59['_node'];_0x648e5b['setPositio'+'n'](_0x2845a2['getPositio'+'n']()),_0x648e5b['setRotatio'+'n'](_0x2845a2['getRotatio'+'n']()),_0x648e5b['rotateLoca'+'l'](-(-0xbd*0x2b+-0xe89+0x2ea2),0x92*-0x4+0x240+-0x4*-0x2,-0x25bb+-0x1247+-0x86*-0x6b);const _0x3182c8=_0xb6737f===-0x398+-0x7*0x23f+0x1351?_0x5c5e47:_0x61cb59['_shadowCas'+'cadeDistan'+'ces'][_0xb6737f-(-0x20c5+-0x259e+0xe14*0x5)],_0x286c0c=_0x61cb59['_shadowCas'+'cadeDistan'+'ces'][_0xb6737f],_0x209503=_0x58ec40['getFrustum'+'Corners'](_0x3182c8,_0x286c0c);mi['set'](0x395*-0x5+-0x1284+0x246d,0x1350+0x95*0x5+0x1*-0x1639,-0x1e*0x130+-0x3*-0xae7+0x1*0x2eb);const _0x4d0db8=_0x58ec40['node']['getWorldTr'+'ansform']();for(let _0x3944db=-0x8d+-0x16f5+-0x22*-0xb1;_0x3944db<0x2372+-0xa29+0x1af*-0xf;_0x3944db++)_0x4d0db8['transformP'+'oint'](_0x209503[_0x3944db],_0x209503[_0x3944db]),mi['add'](_0x209503[_0x3944db]);mi['mulScalar']((0x11*-0x1ba+-0x1*0xd1d+-0x24*-0x12e)/(-0x81a+-0x1ac1+0x22e3));let _0x4566b5=-0x11*0xfd+-0x1bfc+-0x8f5*-0x5;for(let _0xc21c09=-0x1*-0xa67+-0x55*-0xb+-0xe0e;_0xc21c09<-0x1*-0x1d63+0x1*-0x10d+-0x1c4e;_0xc21c09++){const _0x4b617e=_0x209503[_0xc21c09]['sub'](mi)['length']();_0x4b617e>_0x4566b5&&(_0x4566b5=_0x4b617e);}const _0x3ef708=_0x648e5b['right'],_0x5a48c0=_0x648e5b['up'],_0x3527ab=_0x648e5b['forward'],_0x567cf0=(-0x120b+-0x155b+0x2766+0.25)*_0x61cb59['_shadowRes'+'olution']/_0x4566b5,_0x1e9bf1=Math['ceil'](mi['dot'](_0x5a48c0)*_0x567cf0)/_0x567cf0,_0x2a0bf3=Math['ceil'](mi['dot'](_0x3ef708)*_0x567cf0)/_0x567cf0,_0x154971=_0x5a48c0['mulScalar'](_0x1e9bf1),_0x3fbdf7=_0x3ef708['mulScalar'](_0x2a0bf3),_0x56cc39=mi['dot'](_0x3527ab),_0x362b1b=_0x3527ab['mulScalar'](_0x56cc39);mi['add2'](_0x154971,_0x3fbdf7)['add'](_0x362b1b),_0x648e5b['setPositio'+'n'](mi),_0x648e5b['translateL'+'ocal'](-0x26d5*0x1+0x1b97+0xb3e,0x6af*0x1+-0x2517+0x1e68,0x13*0xc179+0x1a9b5*0x8+0x1*-0xc6763),_0x39e3d3['nearClip']=-0xfe0+-0x20ab+-0x11*-0x2db+0.01,_0x39e3d3['farClip']=-0xd0a41*0x3+0x38b23e+0x54f3*0x27,_0x39e3d3['orthoHeigh'+'t']=_0x4566b5,this['renderer']['updateCame'+'raFrustum'](_0x39e3d3),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x183fc6,_0x61cb59,_0x1653dc['visibleCas'+'ters'],_0x39e3d3,_0x491229);const _0x9ae7c0=0x13*-0x19d+0x1ccb+0x1dd<<_0xb6737f,_0x36c5be=_0x1653dc['visibleCas'+'ters'],_0x117129=_0x36c5be['length'];let _0x33d62a=0xdb8*0x1+-0x1*-0x1601+-0x1*0x23b9;for(let _0x354c74=0x61*0x4f+0x23fa+-0x2f*0x167;_0x354c74<_0x117129;_0x354c74++){const _0x4d98ac=_0x36c5be[_0x354c74];_0x4d98ac['shadowCasc'+'adeMask']&_0x9ae7c0&&(_0x36c5be[_0x33d62a++]=_0x4d98ac,_0x33d62a===-0xb8*-0x2+0x1*0x1b7+-0x326?kl['copy'](_0x4d98ac['aabb']):kl['add'](_0x4d98ac['aabb']));}_0x117129!==_0x33d62a&&(_0x36c5be['length']=_0x33d62a),i_['copy'](_0x648e5b['getWorldTr'+'ansform']())['invert']();const _0x3a1e00=qE(i_,kl['getMin'](),kl['getMax']());_0x648e5b['translateL'+'ocal'](0x1*0x752+0x53*0x74+-0x2cee,0x4*-0x3c4+-0x130c+0x1*0x221c,_0x3a1e00['max']+(-0x18eb+-0x1f*-0x6+-0xb*-0x233+0.1)),_0x39e3d3['farClip']=_0x3a1e00['max']-_0x3a1e00['min']+(0x1*-0x153b+0x23b9+-0x35*0x46+0.2),_0x1653dc['projection'+'Compensati'+'on']=_0x4566b5;}}['generateSp'+'litDistanc'+'es'](_0x4d21d6,_0x387ac6,_0x55abe1){_0x4d21d6['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x55abe1);for(let _0x383646=0x1ec5+-0x2*-0x1042+-0x3f48;_0x383646<_0x4d21d6['numCascade'+'s'];_0x383646++){const _0xcdad50=_0x383646/_0x4d21d6['numCascade'+'s'],_0x5e75b6=_0x387ac6+(_0x55abe1-_0x387ac6)*_0xcdad50,_0x39e15e=_0x387ac6*(_0x55abe1/_0x387ac6)**_0xcdad50,_0x359371=Y['lerp'](_0x5e75b6,_0x39e15e,_0x4d21d6['cascadeDis'+'tribution']);_0x4d21d6['_shadowCas'+'cadeDistan'+'ces'][_0x383646-(0xf97+-0x2*0x167+-0xcc8)]=_0x359371;}}['getLightRe'+'nderPass'](_0x5c65d2,_0x20e780){M['assert'](_0x5c65d2&&_0x5c65d2['_type']===ve);let _0x1ce409=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x5c65d2)){const _0x5e3ab8=_0x5c65d2['numShadowF'+'aces'],_0x2e2a2e=_0x5c65d2['shadowUpda'+'teOverride'+'s'];let _0x161c8c=!(-0x3*0x2e2+0x2491+0x7*-0x3fd),_0x171190;for(let _0x380b29=0x16d9*0x1+-0x14c7+-0x35*0xa;_0x380b29<_0x5e3ab8;_0x380b29++)(_0x2e2a2e==null?void(-0x5*-0x7ce+-0xd62+0x669*-0x4):_0x2e2a2e[_0x380b29])===vs&&(_0x161c8c=!(0x2*0x669+0x28d+-0xf5e)),_0x171190=this['shadowRend'+'erer']['prepareFac'+'e'](_0x5c65d2,_0x20e780,_0x380b29);_0x1ce409=new XE(this['device'],this['shadowRend'+'erer'],_0x5c65d2,_0x20e780,_0x161c8c),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x1ce409,_0x171190,_0x161c8c);}return _0x1ce409;}}const Cd=new Set(),r_=new te(),a_=new te(),vr=new Float32Array(-0x43*-0x29+-0x11f4+0x73b*0x1),$n=new ae(0x1*0xfa7+-0xdfa+-0x1ac,-0x139*-0x2+0x6*0x207+-0xe9b*0x1,-0x38*0x83+0xc1*0x5+0x18e3,-0xf0e+0x2381+0x6d1*-0x3),n_=new te();function YE(_0x5c02f5,_0x204ff0){return Math['exp'](-(_0x5c02f5*_0x5c02f5)/((-0xa7b*0x3+0x7bd+0x17b6)*_0x204ff0*_0x204ff0));}function KE(_0x2926ff){const _0x41660b=(_0x2926ff-(-0x4*-0x97+-0x34d+0xf2))/(-0x2382+-0x39f*0x1+0x1*0x2727),_0x36bdc2=(_0x2926ff-(-0x13b*-0xa+0x7d+-0xcca))*(-0x1*0x25ea+-0x53a*0x7+0x20*0x254+0.5),_0x1be83b=new Array(_0x2926ff);let _0x298496=-0xcb*-0x2a+-0x164+0x13*-0x1ae;for(let _0x4482ab=0x10ec+-0x39*0x75+0x1*0x921;_0x4482ab<_0x2926ff;++_0x4482ab)_0x1be83b[_0x4482ab]=YE(_0x4482ab-_0x36bdc2,_0x41660b),_0x298496+=_0x1be83b[_0x4482ab];for(let _0x38796c=0x2*0x110e+-0x1*-0x2597+-0x1*0x47b3;_0x38796c<_0x2926ff;++_0x38796c)_0x1be83b[_0x38796c]/=_0x298496;return _0x1be83b;}class Ry{constructor(_0x119f8b,_0x12222f){h(this,'shadowPass'+'Cache',[]),(this['device']=_0x119f8b['device'],this['renderer']=_0x119f8b,this['lightTextu'+'reAtlas']=_0x12222f);const _0x1f7573=this['device']['scope'];this['sourceId']=_0x1f7573['resolve']('source'),this['pixelOffse'+'tId']=_0x1f7573['resolve']('pixelOffse'+'t'),this['weightId']=_0x1f7573['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x1f7573['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new Ct(),this['blendState'+'NoWrite']=new Ct(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(0x1fc3+0x23e6+-0x43a8),!(0xd1d+-0x157d+0x861),!(-0x61a+-0x26*0xeb+0x28fd*0x1),!(-0x256d+-0x1b52+0x25*0x1c0));}static['createShad'+'owCamera'](_0x3c3914,_0xc81b5e,_0x3b397c){const _0x3e80e2=Pn['create']('ShadowCame'+'ra',_0xc81b5e,_0x3b397c),_0x40ea07=Bi['get'](_0x3c3914);M['assert'](_0x40ea07);const _0xb6cb2=(_0x40ea07==null?void(0x116*-0x7+-0x2b*0x7+0x15*0x6b):_0x40ea07['vsm'])??!(-0x22ca+-0x3d1*0x5+-0x1af*-0x20),_0x21205f=(_0x40ea07==null?void(0x1*0x20d8+-0xef5+-0x11e3):_0x40ea07['pcf'])??!(-0xde7*0x2+0xb8a+0x1045);return _0xb6cb2?_0x3e80e2['clearColor']=new ie(0x1e1*-0x2+0x1d6+-0x1ec*-0x1,0xf7e+-0x4cf*-0x3+-0x1deb,-0x29*0xc5+-0x61*0x19+0x2906,-0x907*0x1+0x21b3*0x1+-0x2*0xc56):_0x3e80e2['clearColor']=new ie(0x3*0xbf1+-0x9*0x2d0+-0xa82,-0x1681*-0x1+-0x1*-0x1ea1+-0x3521,0x2515+0x506*0x1+-0x2a1a,-0x18b4+-0x1498*0x1+0x2d4d),_0x3e80e2['clearDepth'+'Buffer']=!(-0x3f7+-0x25*-0x9a+0x124b*-0x1),_0x3e80e2['clearStenc'+'ilBuffer']=!(-0xe2*0x1+0x2b*0x1d+0x5*-0xcc),_0x3e80e2['clearColor'+'Buffer']=!_0x21205f,_0x3e80e2;}['_cullShado'+'wCastersIn'+'ternal'](_0x19e190,_0x383f8f,_0x47d3cc){const _0x14f4a4=_0x19e190['length'];for(let _0x3bf6fe=-0x10af*0x1+-0x168b+0x273a;_0x3bf6fe<_0x14f4a4;_0x3bf6fe++){const _0x42f7ad=_0x19e190[_0x3bf6fe];_0x42f7ad['castShadow']&&(!_0x42f7ad['cull']||_0x42f7ad['_isVisible'](_0x47d3cc))&&(_0x42f7ad['visibleThi'+'sFrame']=!(-0x5*0x20b+0x68*0x2f+-0x8e1*0x1),_0x383f8f['push'](_0x42f7ad));}}['cullShadow'+'Casters'](_0x44cc4d,_0x2e2354,_0x13d283,_0x436782,_0x546746){var _0x260483,_0x497b85;if((_0x260483=this['renderer']['scene'])==null||_0x260483['fire'](Ty,_0x436782),_0x13d283['length']=0x1b02+0x424+-0x376*0x9,_0x546746)this['_cullShado'+'wCastersIn'+'ternal'](_0x546746,_0x13d283,_0x436782);else{const _0x506c71=_0x44cc4d['layerList'],_0x169b0c=_0x506c71['length'];for(let _0x4d821f=-0x1ad2+-0x146a+0x2f3c;_0x4d821f<_0x169b0c;_0x4d821f++){const _0x1a9a76=_0x506c71[_0x4d821f];_0x1a9a76['_lightsSet']['has'](_0x2e2354)&&(Cd['has'](_0x1a9a76)||(Cd['add'](_0x1a9a76),this['_cullShado'+'wCastersIn'+'ternal'](_0x1a9a76['shadowCast'+'ers'],_0x13d283,_0x436782)));}Cd['clear']();}_0x13d283['sort'](this['sortCompar'+'eShader']),(_0x497b85=this['renderer']['scene'])==null||_0x497b85['fire'](wy,_0x436782);}['sortCompar'+'eShader'](_0x2f11ea,_0xbe1868){const _0x4548f3=_0x2f11ea['_sortKeySh'+'adow'],_0x188d3d=_0xbe1868['_sortKeySh'+'adow'];return _0x4548f3===_0x188d3d?_0xbe1868['mesh']['id']-_0x2f11ea['mesh']['id']:_0x188d3d-_0x4548f3;}['setupRende'+'rState'](_0x2f5d82,_0x4d27eb){const _0x13bd32=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x4d27eb['_isPcf']:_0x4d27eb['_isPcf']&&_0x4d27eb['_type']!==Ye;_0x2f5d82['setBlendSt'+'ate'](_0x13bd32?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x2f5d82['setDepthSt'+'ate'](_0x4d27eb['shadowDept'+'hState']),_0x2f5d82['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x4d00b3,_0xd7e31d,_0x17af8c,_0xc43642){const _0x40c2f5=_0xd7e31d['_node'];_0x4d00b3['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x40c2f5['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x4d00b3['attenuatio'+'nEnd'])),r_['setTRS'](_0x40c2f5['getPositio'+'n'](),_0x40c2f5['getRotatio'+'n'](),I['ONE'])['invert'](),a_['mul2'](_0xd7e31d['projection'+'Matrix'],r_);const _0x3ef3c0=_0x17af8c['shadowView'+'port'];_0xd7e31d['rect']=_0x3ef3c0,_0xd7e31d['scissorRec'+'t']=_0x17af8c['shadowScis'+'sor'],n_['setViewpor'+'t'](_0x3ef3c0['x'],_0x3ef3c0['y'],_0x3ef3c0['z'],_0x3ef3c0['w']),_0x17af8c['shadowMatr'+'ix']['mul2'](n_,a_),_0x4d00b3['_type']===ve&&_0x4d00b3['_shadowMat'+'rixPalette']['set'](_0x17af8c['shadowMatr'+'ix']['data'],_0xc43642*(-0x8f5+-0x4bf*0x7+0x151f*0x2));}['getShadowP'+'ass'](_0xf0057){var _0x3864fa;const _0x4b59c8=_0xf0057['_type'],_0x10d2f5=_0xf0057['_shadowTyp'+'e'];let _0x1abfda=(_0x3864fa=this['shadowPass'+'Cache'][_0x4b59c8])==null?void(-0xc69+0x884+-0x1*-0x3e5):_0x3864fa[_0x10d2f5];if(!_0x1abfda){const _0x3c9140='ShadowPass'+'_'+_0x4b59c8+'_'+_0x10d2f5;_0x1abfda=hi['get'](this['device'])['allocate'](_0x3c9140,{'isShadow':!(-0x2*0x9f7+0x18d*-0x6+0x74f*0x4),'lightType':_0x4b59c8,'shadowType':_0x10d2f5}),this['shadowPass'+'Cache'][_0x4b59c8]||(this['shadowPass'+'Cache'][_0x4b59c8]=[]),this['shadowPass'+'Cache'][_0x4b59c8][_0x10d2f5]=_0x1abfda;}return _0x1abfda['index'];}['submitCast'+'ers'](_0x42b65d,_0xafed62,_0x4dd6b0){var _0x562246;const _0x75b34e=this['device'],_0x2e9dfb=this['renderer'],_0x2459cf=_0x2e9dfb['scene'],_0x20b371=-0xcf0+0x58d*-0x7+0x4*0xcf3<<Mm,_0x262fd7=this['getShadowP'+'ass'](_0xafed62),_0x2e146d=_0x4dd6b0['shaderPara'+'ms'],_0x4ac50c=_0x4dd6b0['renderTarg'+'et']['flipY']?-(-0xf47*0x2+-0x5*-0x6a+0x1c7d):0xc29+-0x2217+0x15ef,_0x24aeed=_0x42b65d['length'];for(let _0x2cc81b=0xdfa+-0x1fd*0x2+-0xa00;_0x2cc81b<_0x24aeed;_0x2cc81b++){const _0x17ac0f=_0x42b65d[_0x2cc81b],_0x59b353=_0x17ac0f['mesh'],_0x2682c4=_0x17ac0f['instancing'+'Data'];if(_0x2682c4&&_0x2682c4['count']<=-0x1c2c+-0x22*-0xa1+0x6ca)continue;_0x17ac0f['ensureMate'+'rial'](_0x75b34e);const _0x157362=_0x17ac0f['material'];Q['pushGpuMar'+'ker'](_0x75b34e,'Node:\x20'+_0x17ac0f['node']['name']+(',\x20Material'+':\x20')+_0x157362['name']),_0x2e9dfb['setBaseCon'+'stants'](_0x75b34e,_0x157362),_0x2e9dfb['setSkinnin'+'g'](_0x75b34e,_0x17ac0f),_0x157362['dirty']&&(_0x157362['updateUnif'+'orms'](_0x75b34e,_0x2459cf),_0x157362['dirty']=!(-0x31*0x74+0x10ab*-0x1+-0x4dc*-0x8)),_0x2e9dfb['setupCullM'+'ode'](!(0xb31*0x2+-0x936+-0xd2c),_0x4ac50c,_0x17ac0f),_0x157362['setParamet'+'ers'](_0x75b34e),_0x17ac0f['setParamet'+'ers'](_0x75b34e,_0x20b371);const _0x2cbc66=_0x17ac0f['getShaderI'+'nstance'](_0x262fd7,-0xa27+0xae4+-0xbd,_0x2459cf,_0x2e146d,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x2375c1=_0x2cbc66['shader'];if(M['assert'](_0x2375c1,'no\x20shader\x20'+'for\x20pass\x20'+_0x262fd7,_0x157362),_0x2375c1['failed'])continue;_0x17ac0f['_sortKeySh'+'adow']=_0x2375c1['id'],_0x75b34e['setShader'](_0x2375c1),_0x2e9dfb['setVertexB'+'uffers'](_0x75b34e,_0x59b353),_0x2e9dfb['setMorphin'+'g'](_0x75b34e,_0x17ac0f['morphInsta'+'nce']),_0x2682c4&&_0x75b34e['setVertexB'+'uffer'](_0x2682c4['vertexBuff'+'er']),_0x2e9dfb['setMeshIns'+'tanceMatri'+'ces'](_0x17ac0f),_0x2e9dfb['setupMeshU'+'niformBuff'+'ers'](_0x2cbc66);const _0x122104=_0x17ac0f['renderStyl'+'e'],_0x11f9d8=(_0x562246=_0x17ac0f['indirectDa'+'ta'])==null?void(-0x1*0x177b+-0x20d2+0x384d):_0x562246['get'](_0x4dd6b0);_0x75b34e['draw'](_0x59b353['primitive'][_0x122104],_0x59b353['indexBuffe'+'r'][_0x122104],_0x2682c4==null?void(0x20*-0x30+-0x5ea+0xbea):_0x2682c4['count'],_0x11f9d8),_0x2e9dfb['_shadowDra'+'wCalls']++,_0x2682c4&&_0x2e9dfb['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x75b34e);}}['needsShado'+'wRendering'](_0x23f662){const _0x492a90=_0x23f662['enabled']&&_0x23f662['castShadow'+'s']&&_0x23f662['shadowUpda'+'teMode']!==vs&&_0x23f662['visibleThi'+'sFrame'];return _0x23f662['shadowUpda'+'teMode']===or&&(_0x23f662['shadowUpda'+'teMode']=vs),_0x492a90&&(this['renderer']['_shadowMap'+'Updates']+=_0x23f662['numShadowF'+'aces']),_0x492a90;}['getLightRe'+'nderData'](_0x370b18,_0xd8de3a,_0xc3acde){return _0x370b18['getRenderD'+'ata'](_0x370b18['_type']===ve?_0xd8de3a:null,_0xc3acde);}['setupRende'+'rPass'](_0x48d4b5,_0x40953f,_0x1341e7){const _0x339f99=_0x40953f['renderTarg'+'et'];_0x48d4b5['init'](_0x339f99),_0x48d4b5['depthStenc'+'ilOps']['clearDepth'+'Value']=-0x1*0xc0d+-0x1*-0x5ab+-0x221*-0x3,_0x48d4b5['depthStenc'+'ilOps']['clearDepth']=_0x1341e7,_0x339f99['depthBuffe'+'r']?_0x48d4b5['depthStenc'+'ilOps']['storeDepth']=!(-0x1d0f+0x16a1+0x66e):(_0x48d4b5['colorOps']['clearValue']['copy'](_0x40953f['clearColor']),_0x48d4b5['colorOps']['clear']=_0x1341e7,_0x48d4b5['depthStenc'+'ilOps']['storeDepth']=!(-0x1da9+0x101e+0xd8c*0x1)),_0x48d4b5['requiresCu'+'bemaps']=!(-0xb80+-0x1194+0x1d15);}['prepareFac'+'e'](_0xcb1e1c,_0x276fb6,_0x2f852e){const _0x432656=_0xcb1e1c['_type'],_0x48104c=this['getLightRe'+'nderData'](_0xcb1e1c,_0x276fb6,_0x2f852e)['shadowCame'+'ra'],_0x15ad86=_0x432656===ve?0x781*-0x1+0x12b3*-0x1+0x1a34:_0x2f852e;return _0x48104c['renderTarg'+'et']=_0xcb1e1c['_shadowMap']['renderTarg'+'ets'][_0x15ad86],_0x48104c;}['renderFace'](_0x5c4a7a,_0x479d5e,_0x37aeae,_0x2b8f2c,_0x393f02=!(0x24df*0x1+-0x1*-0x1baa+0x1583*-0x3)){const _0x1ba062=this['device'],_0x17ec48=de();Q['pushGpuMar'+'ker'](_0x1ba062,'SHADOW\x20'+_0x5c4a7a['_node']['name']+'\x20FACE\x20'+_0x37aeae);const _0x214b99=this['getLightRe'+'nderData'](_0x5c4a7a,_0x479d5e,_0x37aeae),_0x7f4f10=_0x214b99['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x5c4a7a,_0x7f4f10,_0x214b99,_0x37aeae);const _0x3c3983=_0x7f4f10['renderTarg'+'et'],_0x1ceb05=this['renderer'];_0x1ceb05['setCameraU'+'niforms'](_0x7f4f10,_0x3c3983),_0x1ba062['supportsUn'+'iformBuffe'+'rs']&&_0x1ceb05['setupViewU'+'niformBuff'+'ers'](_0x214b99['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x393f02?(_0x1ceb05['setupViewp'+'ort'](_0x7f4f10,_0x3c3983),_0x2b8f2c&&_0x1ceb05['clear'](_0x7f4f10)):_0x1ceb05['clearView'](_0x7f4f10,_0x3c3983,!(0x17c*0x5+-0x1594*0x1+0xe28),!(0xa6f*0x1+-0xd3*0x19+0x5*0x209)),this['setupRende'+'rState'](_0x1ba062,_0x5c4a7a),this['submitCast'+'ers'](_0x214b99['visibleCas'+'ters'],_0x5c4a7a,_0x7f4f10),Q['popGpuMark'+'er'](_0x1ba062),_0x1ceb05['_shadowMap'+'Time']+=de()-_0x17ec48;}['render'](_0x1fbe9d,_0x3b74dc,_0x5d9e82=!(0x1*-0x23ae+-0xde2+0x1*0x3190)){if(this['needsShado'+'wRendering'](_0x1fbe9d)){const _0x582f41=_0x1fbe9d['numShadowF'+'aces'];for(let _0x371b4d=0x9*0x33+0xa*0x188+-0x1d*0x97;_0x371b4d<_0x582f41;_0x371b4d++)this['prepareFac'+'e'](_0x1fbe9d,_0x3b74dc,_0x371b4d),this['renderFace'](_0x1fbe9d,_0x3b74dc,_0x371b4d,!(0x892*-0x2+0x9b2*0x1+-0x2*-0x3b9),_0x5d9e82);this['renderVsm'](_0x1fbe9d,_0x3b74dc);}}['renderVsm'](_0x2b399b,_0x381c58){_0x2b399b['_isVsm']&&_0x2b399b['_vsmBlurSi'+'ze']>-0x114d+-0x18e8*-0x1+0x3cd*-0x2&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x2b399b['_type']===ve)&&this['applyVsmBl'+'ur'](_0x2b399b,_0x381c58);}['getVsmBlur'+'Shader'](_0x9498fb,_0x321a23){const _0x6cc8a8=this['blurVsmSha'+'der'];let _0x4ca319=_0x6cc8a8[_0x9498fb][_0x321a23];if(!_0x4ca319){this['blurVsmWei'+'ghts'][_0x321a23]=KE(_0x321a23);const _0x293437=new Map();_0x293437['set']('{SAMPLES}',_0x321a23),_0x9498fb===0x25*-0x69+0x1053+-0x125&&_0x293437['set']('GAUSS',''),_0x4ca319=Ut['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x9498fb+_0x321a23,'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x293437}),_0x6cc8a8[_0x9498fb][_0x321a23]=_0x4ca319;}return _0x4ca319;}['applyVsmBl'+'ur'](_0x114c98,_0x17fb33){const _0x553b27=this['device'];Q['pushGpuMar'+'ker'](_0x553b27,'VSM\x20'+_0x114c98['_node']['name']),_0x553b27['setBlendSt'+'ate'](Ct['NOBLEND']);const _0x26d419=_0x114c98['getRenderD'+'ata'](_0x114c98['_type']===ve?_0x17fb33:null,-0x1eb4+0x17af+0x705)['shadowCame'+'ra']['renderTarg'+'et'],_0x4f5529=this['renderer']['shadowMapC'+'ache']['get'](_0x553b27,_0x114c98),_0x18d4e6=_0x4f5529['renderTarg'+'ets'][-0x11*-0xe5+0x1c1f+0x2*-0x15aa],_0x2bebc7=_0x114c98['vsmBlurMod'+'e'],_0x28e430=_0x114c98['_vsmBlurSi'+'ze'],_0x4e007b=this['getVsmBlur'+'Shader'](_0x2bebc7,_0x28e430);$n['z']=_0x114c98['_shadowRes'+'olution']-(-0x1d09*0x1+0x1137+0xbd4),$n['w']=$n['z'],this['sourceId']['setValue'](_0x26d419['colorBuffe'+'r']),vr[-0x2537+0x1779+0xdbe]=(0xb78+0x566+0x3*-0x59f)/_0x114c98['_shadowRes'+'olution'],vr[0x1d30+-0x1*0xa77+-0x12b8]=-0x712*-0x1+-0x12c3*0x2+0x1e74*0x1,this['pixelOffse'+'tId']['setValue'](vr),_0x2bebc7===vm&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x28e430]),fr(_0x553b27,_0x18d4e6,_0x4e007b,null,$n),this['sourceId']['setValue'](_0x18d4e6['colorBuffe'+'r']),vr[0x50b+-0x1d*-0x9d+-0x1*0x16d3]=vr[-0x18*0x31+-0x4bd+0x955*0x1],vr[0x16b2+0x37*0x63+-0x2bf7]=0x65d+0x45b+0x31*-0x38,this['pixelOffse'+'tId']['setValue'](vr),fr(_0x553b27,_0x26d419,_0x4e007b,null,$n),this['renderer']['shadowMapC'+'ache']['add'](_0x114c98,_0x4f5529),Q['popGpuMark'+'er'](_0x553b27);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new qS(this['device'],[new ct('matrix_vie'+'wProjectio'+'n',Js)]),this['viewBindGr'+'oupFormat']=new HS(this['device'],[new im(sm,tm|LS)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const Ul=[];class ZE{constructor(_0x348514){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x348514;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x5e6f9c=>{_0x5e6f9c['destroy']();}),this['_allocated']['length']=-0x1683+0xff1+0x349*0x2;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x238c17=new If(this['device']);_0x238c17['name']='ClusterEmp'+'ty',_0x238c17['update']([]),this['_empty']=_0x238c17;}return this['_empty'];}['assign'](_0x4958c5){const _0x2789dc=this['empty'];Ul['push'](...this['_allocated']),this['_allocated']['length']=-0x59*0x2a+-0xa*-0x36f+-0x4*0x4ef,this['_clusters']['clear']();const _0x477cef=_0x4958c5['length'];for(let _0x239324=-0x1*-0xe78+0x1*0x650+-0x14c8;_0x239324<_0x477cef;_0x239324++){const _0x3f5351=_0x4958c5[_0x239324]['renderActi'+'ons'];if(_0x3f5351){const _0xa0b959=_0x3f5351['length'];for(let _0x297e4e=-0x13b2+0xf6*0x2+0x11c6;_0x297e4e<_0xa0b959;_0x297e4e++){const _0x1f9be2=_0x3f5351[_0x297e4e];_0x1f9be2['lightClust'+'ers']=null;const _0x378067=_0x1f9be2['layer'];if(_0x378067['hasCluster'+'edLights']&&_0x378067['meshInstan'+'ces']['length']){const _0x1c7f3b=_0x378067['getLightId'+'Hash'](),_0x1ce628=this['_clusters']['get'](_0x1c7f3b);let _0x33fff3=_0x1ce628==null?void(0x2*-0x5ec+-0x1c88+-0x130*-0x22):_0x1ce628['lightClust'+'ers'];_0x33fff3||(_0x33fff3=Ul['pop']()??new If(this['device']),ca['setName'](_0x33fff3,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x33fff3),this['_clusters']['set'](_0x1c7f3b,_0x1f9be2)),_0x1f9be2['lightClust'+'ers']=_0x33fff3;}_0x1f9be2['lightClust'+'ers']||(_0x1f9be2['lightClust'+'ers']=_0x2789dc);}}}Ul['forEach'](_0x377d9f=>_0x377d9f['destroy']()),Ul['length']=0x5bd*-0x2+0x397*-0x7+0x249b;}['update'](_0x1dd39a,_0xb828d0){this['assign'](_0x1dd39a),this['_clusters']['forEach'](_0x1eaa1e=>{const _0x27679e=_0x1eaa1e['layer'];_0x1eaa1e['lightClust'+'ers']['update'](_0x27679e['clusteredL'+'ightsSet'],_0xb828d0);});}}const qi=new ae(),Pd=[];class Om extends fs{constructor(_0x3dc1e6,_0x54b43f){super(_0x3dc1e6),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0xfbd*-0x2+-0x1224+-0xd55*0x1)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x54b43f,this['requiresCu'+'bemaps']=!(-0xde*-0x22+-0x5*-0x1a6+-0x25b9),this['blitTextur'+'eId']=_0x3dc1e6['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x3dc1e6['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x3dc1e6['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x24fa08,_0x4afd9b,_0x3071e6;(_0x24fa08=this['_quadRende'+'rer2D'])==null||_0x24fa08['destroy'](),this['_quadRende'+'rer2D']=null,(_0x4afd9b=this['_quadRende'+'rerCube'])==null||_0x4afd9b['destroy'](),this['_quadRende'+'rerCube']=null,(_0x3071e6=this['_evtDevice'+'Restored'])==null||_0x3071e6['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x8f8db5,_0x5b31c0){M['assert'](_0x8f8db5);const _0x489b73=new Om(_0x8f8db5['device'],_0x5b31c0);return _0x489b73['init'](_0x8f8db5),_0x489b73['colorOps']['clear']=!(0xb8*-0xe+0x5b0+0x461),_0x489b73['depthStenc'+'ilOps']['clearDepth']=!(-0x1447+-0x1e31+-0x1*-0x3279),_0x489b73;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x91f*0x2+-0x16c9*0x1+0x185*0x1b);}['update'](_0x1c2e80){const _0x404d27=this['_filteredL'+'ights'];this['filter'](_0x1c2e80,_0x404d27),this['executeEna'+'bled']=_0x404d27['length']>0x9a3*0x1+0x8*-0x2e2+0xd6d;}['filter'](_0x5c5a7d,_0x4e522c){for(let _0x1433f3=0x2544+-0x124b+-0x12f9;_0x1433f3<_0x5c5a7d['length'];_0x1433f3++){const _0x546eb9=_0x5c5a7d[_0x1433f3];_0x546eb9['_type']!==ve&&_0x546eb9['atlasViewp'+'ortAllocat'+'ed']&&(!_0x546eb9['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x546eb9['enabled']&&_0x546eb9['cookie']&&_0x546eb9['visibleThi'+'sFrame']&&_0x4e522c['push'](_0x546eb9));}this['_forceCopy']=!(-0xd*0x2fb+0x71a+-0xfd3*-0x2);}['initInvVie'+'wProjMatri'+'ces'](){if(!Pd['length'])for(let _0x470649=-0x3d6+0x1c39+-0x1863;_0x470649<-0x4*-0x5e4+-0xdc9+0xb*-0xe3;_0x470649++){const _0x48e1b7=Pn['create'](null,Ye,_0x470649),_0x2db83d=_0x48e1b7['projection'+'Matrix'],_0x5080a2=_0x48e1b7['node']['getLocalTr'+'ansform']()['clone']()['invert']();Pd[_0x470649]=new te()['mul2'](_0x2db83d,_0x5080a2)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x1d8b22=Ut['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new jh(_0x1d8b22);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x3f1a5b=Ut['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new jh(_0x3f1a5b);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x102c79=this['device'];_0x102c79['setBlendSt'+'ate'](Ct['NOBLEND']),_0x102c79['setCullMod'+'e'](xt),_0x102c79['setDepthSt'+'ate'](Kt['NODEPTH']),_0x102c79['setStencil'+'State']();const _0x7a26d9=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x4c5f63=this['_cubeSlots'+'Offsets'],_0xb825a1=this['_filteredL'+'ights'];for(let _0x300b70=-0x1*0x1eca+-0x2557+-0x6b*-0xa3;_0x300b70<_0xb825a1['length'];_0x300b70++){const _0x27af68=_0xb825a1[_0x300b70];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x27af68['_node']['name']);const _0x5e9244=_0x27af68['numShadowF'+'aces'],_0x55299f=_0x5e9244>0xed4+0x7c0+0x1693*-0x1?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x5e9244>0x9*0x20d+-0x13*-0x16a+-0x2*0x16a9&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x27af68['cookie']);for(let _0x245ef9=-0x15ca+0x2212+-0xc48;_0x245ef9<_0x5e9244;_0x245ef9++){if(qi['copy'](_0x27af68['atlasViewp'+'ort']),_0x5e9244>0x737*0x1+-0x1777+-0x56b*-0x3){const _0x450397=qi['z']/(0x250c*0x1+0x9b7+-0x2ec0),_0x254f4d=_0x4c5f63[_0x245ef9];qi['x']+=_0x450397*_0x254f4d['x'],qi['y']+=_0x450397*_0x254f4d['y'],qi['z']=_0x450397,qi['w']=_0x450397,this['invViewPro'+'jId']['setValue'](Pd[_0x245ef9]['data']);}qi['mulScalar'](_0x7a26d9),_0x55299f['render'](qi);}Q['popGpuMark'+'er'](_0x102c79);}_0xb825a1['length']=-0xc*0x319+-0x2*-0x5f6+0x8*0x328;}}class QE extends fs{constructor(_0x5edc2e,_0x5d8d46,_0x56c9c6){super(_0x5edc2e),this['requiresCu'+'bemaps']=!(0x26f9+0xab3+-0x31ab),this['shadowRend'+'erer']=_0x5d8d46,this['shadowRend'+'ererLocal']=_0x56c9c6;}['update'](_0x6ad404){const _0x5ee835=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x175825=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x5ee835,_0x6ad404),_0x225dbd=_0x5ee835['length'];this['enabled']=_0x225dbd>-0xfb+-0x2d3*0x8+0x1793,_0x225dbd&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x175825,!(-0xd88+0x797+0x2f9*0x2));}['execute'](){const _0x282b14=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x5473b6=_0x282b14['length'];for(let _0x209946=0xc9*-0x23+-0xde1+0x295c;_0x209946<_0x5473b6;_0x209946++){const _0x321615=_0x282b14[_0x209946];for(let _0x4a0e2d=-0x2468*0x1+0x44*0xf+0x206c;_0x4a0e2d<_0x321615['numShadowF'+'aces'];_0x4a0e2d++)this['shadowRend'+'erer']['renderFace'](_0x321615,null,_0x4a0e2d,!(0x266c+0xfc1+-0x362d));}_0x282b14['length']=-0x9f8+0x13b6+-0x1d*0x56;}}class JE extends fs{constructor(_0x28e44e,_0x55980d,_0x4db51c,_0x4ba180,_0x572552){super(_0x28e44e),this['renderer']=_0x55980d,this['frameGraph']=null,this['cookiesRen'+'derPass']=Om['create'](_0x572552['cookieRend'+'erTarget'],_0x572552['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new QE(_0x28e44e,_0x4db51c,_0x4ba180),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x3a3acc,_0xe57f1d,_0x162c26,_0x3bcfa7,_0x14ef39){this['frameGraph']=_0x3a3acc,this['cookiesRen'+'derPass']['enabled']=_0x162c26,_0x162c26&&this['cookiesRen'+'derPass']['update'](_0x3bcfa7),this['shadowRend'+'erPass']['enabled']=_0xe57f1d,_0xe57f1d&&this['shadowRend'+'erPass']['update'](_0x14ef39);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0xcb8bec=de(),{renderer:_0x4f06ac}=this,{scene:_0x2ab9ac}=_0x4f06ac;_0x4f06ac['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x2ab9ac['lighting']),_0x4f06ac['_lightClus'+'tersTime']+=de()-_0xcb8bec,_0x4f06ac['_lightClus'+'ters']=_0x4f06ac['worldClust'+'ersAllocat'+'or']['count'];}}let Md=-0x2a7*0x1+-0x2*-0x20c+-0x171;const ji=new te(),Yi=new te(),xa=new te(),o_=new oi(),Id=new xu(),l_=new te()['setScale'](-0x268+0x185f+0x3a9*-0x6,-(0x1119+0xdf*0x3+-0x3f1*0x5),-0x10ba*-0x2+-0x2537*0x1+0x1e2*0x2),Dd=new Set(),Ld=new Set(),Rd=new WS(),h_=new te()['set']([-0x1b*0x107+0xde7+0x3*0x49d,0x1090+-0xce2+-0x3ae,-0xb2b+0x21e6+-0x16bb,0x5*0x563+0x1*-0x17fe+0x1*-0x2f1,0x30c+-0x1276+0xf6a,0x5d6+-0x5*-0x79f+-0x2bf0,-0x132d*0x1+-0x1a39+-0x1bf*-0x1a,0xe5*0x1b+0xfc7*-0x2+0x17b*0x5,0x1127+-0x5*-0x571+0x1*-0x2c5c,0x1a2c+0x3*0x1e2+0x2*-0xfe9,0x1e95*-0x1+-0x2f*0x79+0x34cc+0.5,-0x9f9*-0x2+-0x8+-0x13ea*0x1,0x1*0x1406+0x84b+-0x1c51,0x1249*0x1+-0x236e+0x1*0x1125,-0x1eb+-0x18ce+-0x1ab9*-0x1+0.5,-0x1d7a+0x1a0a+0x371]),c_=[new J(-0x398*-0x2+-0x4f5*-0x1+-0xc25+0.5,-0x26aa+0xa0d+0x5*0x5b9+0.333333),new J(-0x19ca+0x1*0x9d+0x192d+0.25,-0x5ee+-0x19e2+0x1fd0+0.666667),new J(0x2*0x1276+-0x1551+-0xf9b+0.75,0x1baa+-0xe*0x11c+-0xc22+0.111111),new J(-0x9*-0x275+-0xdc6+-0x857+0.125,-0x2*0x1017+0x2182+-0x154+0.444444),new J(-0x22b*0x11+0x1104+0x13d7*0x1+0.625,-0x1*-0x1d9a+0x1*-0x593+-0x1*0x1807+0.777778),new J(-0x1814+-0x5*0x4d3+0x3*0x1011+0.375,0x12f1+-0x1aa7+0x7b6+0.222222),new J(-0x2*-0x10c9+0x2242+-0x10f5*0x4+0.875,-0xa*-0x2b7+0x25*0xdf+-0x3b61+0.555556),new J(0x1*0x1744+-0x70e+-0x1036+0.0625,-0xb*-0x7f+-0x2e*0x7c+-0x1*-0x10d3+0.888889),new J(-0xf*-0x1e7+-0x1f63+0x2da*0x1+0.5625,0x1*0x260f+-0x125c+-0x13b3+0.037037),new J(-0xc76+-0x712+0x1388+0.3125,0x1*0x24df+-0x254b+0x6c+0.37037),new J(0x1db8*0x1+0x1da1+-0x3b59+0.8125,-0x167a+0x1b17+-0x49d+0.703704),new J(0x45*-0x18+-0xc*-0x40+0x378+0.1875,0x7fd+-0x26f5*0x1+0x1ef8+0.148148),new J(-0x169*0x2+0xffc+-0xd2a+0.6875,0xa6b+-0x351+-0x71a+0.481481),new J(-0x71*0x13+-0x1*0x1c2e+0x17*0x197+0.4375,0x19b4+-0x18e3+-0x1*0xd1+0.814815),new J(0x1ff5+0x13cc+-0x33c1+0.9375,0x84a*0x3+-0x1c4b+0x36d*0x1+0.259259),new J(-0x1af0+-0x1515+0x3005*0x1+0.03125,-0x2043+-0xde7*-0x1+-0x1d6*-0xa+0.592593)],eA=new te(),tA=new te(),sA=new te(),iA=new te(),rA=new te(),aA=new te(),Ta=new Set(),Od=[],Fd=[];class nA{constructor(_0x1a85dc){h(this,'clustersDe'+'bugRendere'+'d',!(0x1ec1+0x1*-0x21b3+0x2f3)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new OE(-0x71*-0x44+-0x71e*0x2+-0xf4d)),(this['device']=_0x1a85dc,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new ZE(_0x1a85dc),this['lightTextu'+'reAtlas']=new GE(_0x1a85dc),this['shadowMapC'+'ache']=new HE(),this['shadowRend'+'erer']=new Ry(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new $E(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new jE(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new JE(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0x78+-0x20f9+0x2171,this['_morphTime']=0x8f6+-0x1cf3*0x1+-0x1*-0x13fd,this['_cullTime']=0xadf+0x4c*-0x36+-0x529*-0x1,this['_shadowMap'+'Time']=-0x4*0x6a6+0x25c8+-0xb3*0x10,this['_lightClus'+'tersTime']=-0xd*0x3a+-0xeab+0x119d*0x1,this['_layerComp'+'ositionUpd'+'ateTime']=0x4*-0x765+0x1f97+-0x203,this['_shadowDra'+'wCalls']=-0x40*0x2c+-0xf09+0x1a09,this['_skinDrawC'+'alls']=-0x1*0x1409+-0x3e0*0xa+0x3ac9,this['_instanced'+'DrawCalls']=0x19a3+-0x18e*-0x6+-0x22f7*0x1,this['_shadowMap'+'Updates']=0x26c7+0x1e16+0x11*-0x40d,this['_numDrawCa'+'llsCulled']=-0x85*0x1c+-0x2619+0x34a5*0x1,this['_camerasRe'+'ndered']=0x257e+-0x174b*0x1+-0xe33,this['_lightClus'+'ters']=0x2bd+0x1a1+-0x45e);const _0x10a9c2=_0x1a85dc['scope'];this['boneTextur'+'eId']=_0x10a9c2['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x10a9c2['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x10a9c2['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x10a9c2['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(-0x2179+0xd9*0x25+0x21f),this['viewPosId']=_0x10a9c2['resolve']('view_posit'+'ion'),this['projId']=_0x10a9c2['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x10a9c2['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x10a9c2['resolve']('matrix_vie'+'w'),this['viewId3']=_0x10a9c2['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x10a9c2['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x10a9c2['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x10a9c2['resolve']('tbnBasis'),this['nearClipId']=_0x10a9c2['resolve']('camera_nea'+'r'),this['farClipId']=_0x10a9c2['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(-0x1*-0x21a1+0x24ff+-0x469c),this['cameraPara'+'msId']=_0x10a9c2['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x10a9c2['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](0x509+-0x3*-0xa17+-0x1*0x234e),this['blueNoiseJ'+'itterVersi'+'on']=0x29c+0x10ac+-0x1348,this['blueNoiseJ'+'itterVec']=new ae(),this['blueNoiseJ'+'itterData']=new Float32Array(0x7fa*0x3+-0x11*-0x49+-0x1cc3),this['blueNoiseJ'+'itterId']=_0x10a9c2['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x10a9c2['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x10a9c2['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x10a9c2['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x10a9c2['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x10a9c2['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](-0x71e*-0x5+0x1050+0xd*-0x3fe),this['morphPosit'+'ionTex']=_0x10a9c2['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x10a9c2['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x10a9c2['resolve']('morph_tex_'+'params'),this['lightCube']=new NE(),this['constantLi'+'ghtCube']=_0x10a9c2['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x36f9d2,_0xafcec0){const _0x35ab0d=this['device'],_0x37fc18=_0xafcec0?_0xafcec0['width']:_0x35ab0d['width'],_0x401930=_0xafcec0?_0xafcec0['height']:_0x35ab0d['height'],_0x155884=_0x36f9d2['rect'];let _0x238cf6=Math['floor'](_0x155884['x']*_0x37fc18),_0x1a8bac=Math['floor'](_0x155884['y']*_0x401930),_0x28a50b=Math['floor'](_0x155884['z']*_0x37fc18),_0x2254d3=Math['floor'](_0x155884['w']*_0x401930);if(_0x35ab0d['setViewpor'+'t'](_0x238cf6,_0x1a8bac,_0x28a50b,_0x2254d3),_0x36f9d2['_scissorRe'+'ctClear']){const _0x2af26c=_0x36f9d2['scissorRec'+'t'];_0x238cf6=Math['floor'](_0x2af26c['x']*_0x37fc18),_0x1a8bac=Math['floor'](_0x2af26c['y']*_0x401930),_0x28a50b=Math['floor'](_0x2af26c['z']*_0x37fc18),_0x2254d3=Math['floor'](_0x2af26c['w']*_0x401930);}_0x35ab0d['setScissor'](_0x238cf6,_0x1a8bac,_0x28a50b,_0x2254d3);}['setCameraU'+'niforms'](_0x2c01da,_0x33fb47){var _0x59cda2,_0x5b7ba1;const _0x165fdb=_0x33fb47==null?void(0x2fa*0x2+-0x214e+0x1b5a):_0x33fb47['flipY'];let _0x45a67a=null;if(_0x2c01da['xr']&&_0x2c01da['xr']['session']){const _0x20ab10=((_0x5b7ba1=(_0x59cda2=_0x2c01da['_node'])==null?void(0x11e4+0x155*-0x7+0x2db*-0x3):_0x59cda2['parent'])==null?void(0x1*-0x1fc1+-0xd71*0x2+0x3aa3):_0x5b7ba1['getWorldTr'+'ansform']())||null;_0x45a67a=_0x2c01da['xr']['views']['list'];for(let _0x49a7b0=0x62e+-0x4*0xc5+0x2*-0x18d;_0x49a7b0<_0x45a67a['length'];_0x49a7b0++){const _0x3f705a=_0x45a67a[_0x49a7b0];_0x3f705a['updateTran'+'sforms'](_0x20ab10),_0x2c01da['frustum']['setFromMat'+'4'](_0x3f705a['projViewOf'+'fMat']);}}else{let _0x215a70=_0x2c01da['projection'+'Matrix'];_0x2c01da['calculateP'+'rojection']&&_0x2c01da['calculateP'+'rojection'](_0x215a70,Ml);let _0x1c00d8=_0x2c01da['getProject'+'ionMatrixS'+'kybox']();_0x165fdb&&(_0x215a70=eA['mul2'](l_,_0x215a70),_0x1c00d8=tA['mul2'](l_,_0x1c00d8)),this['device']['isWebGPU']&&(_0x215a70=sA['mul2'](h_,_0x215a70),_0x1c00d8=iA['mul2'](h_,_0x1c00d8));const {jitter:_0x305fc3}=_0x2c01da;let _0x3f2974=0x2051+0x1*-0x3c9+-0x58*0x53,_0x47c76b=0x13*-0x14b+-0x153*-0x1+0x173e;if(_0x305fc3>-0x1*-0x94a+-0x425*-0x3+-0x15b9){const _0xa05acc=_0x33fb47?_0x33fb47['width']:this['device']['width'],_0x592f1f=_0x33fb47?_0x33fb47['height']:this['device']['height'],_0x2ec740=c_[this['device']['renderVers'+'ion']%c_['length']];_0x3f2974=_0x305fc3*(_0x2ec740['x']*(-0x17e+-0x463+0x1*0x5e3)-(0x6f*0x2+-0x1eb2+0x1dd5))/_0xa05acc,_0x47c76b=_0x305fc3*(_0x2ec740['y']*(-0xab6+0x617+0x4a1)-(0x1a87*0x1+-0x17ee+-0x298))/_0x592f1f,_0x215a70=rA['copy'](_0x215a70),_0x215a70['data'][0x2653+0x2690+-0x4cdb]=_0x3f2974,_0x215a70['data'][-0x8b*-0xf+-0x24b+-0x1*0x5d1]=_0x47c76b,_0x1c00d8=aA['copy'](_0x1c00d8),_0x1c00d8['data'][0x1d7e+0x1d*0x12a+-0x3f38]=_0x3f2974,_0x1c00d8['data'][0xc6b+0x19a*-0x8+0x6e]=_0x47c76b,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x2c0578=_0x305fc3>0x1d86+-0x89f*-0x1+-0x9b*0x3f?this['blueNoiseJ'+'itterVec']:ae['ZERO'];if(this['blueNoiseJ'+'itterData'][0x1c*-0xc9+0x1fad*-0x1+-0x1*-0x35a9]=_0x2c0578['x'],this['blueNoiseJ'+'itterData'][-0x5f6+0x1f*0x49+-0x2e0]=_0x2c0578['y'],this['blueNoiseJ'+'itterData'][0xe7*0xb+0x30+-0xa1b]=_0x2c0578['z'],this['blueNoiseJ'+'itterData'][0x16*-0x128+0x30c+0x1667]=_0x2c0578['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x215a70['data']),this['projSkybox'+'Id']['setValue'](_0x1c00d8['data']),_0x2c01da['calculateT'+'ransform'])_0x2c01da['calculateT'+'ransform'](Yi,Ml);else{const _0x297440=_0x2c01da['_node']['getPositio'+'n'](),_0x28f775=_0x2c01da['_node']['getRotatio'+'n']();Yi['setTRS'](_0x297440,_0x28f775,I['ONE']);}this['viewInvId']['setValue'](Yi['data']),xa['copy'](Yi)['invert'](),this['viewId']['setValue'](xa['data']),o_['setFromMat'+'4'](xa),this['viewId3']['setValue'](o_['data']),ji['mul2'](_0x215a70,xa),this['viewProjId']['setValue'](ji['data']),_0x2c01da['_storeShad'+'erMatrices'](ji,_0x3f2974,_0x47c76b,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x165fdb?-(0x1cfe+0x1*-0x11a1+-0x2d7*0x4):-0x537+0xb75*0x2+-0x3*0x5e6),this['dispatchVi'+'ewPos'](_0x2c01da['_node']['getPositio'+'n']()),_0x2c01da['frustum']['setFromMat'+'4'](ji);}this['tbnBasis']['setValue'](_0x165fdb?-(-0x455*-0x7+0xcce*-0x2+0x3*-0x192):0x2523*-0x1+0x1aa3+0xa81*0x1);const _0x4ce0ae=_0x2c01da['_nearClip'],_0x12b8d1=_0x2c01da['_farClip'];return this['nearClipId']['setValue'](_0x4ce0ae),this['farClipId']['setValue'](_0x12b8d1),this['cameraPara'+'ms'][0x285+-0x9*-0x2b4+-0x3*0x8f3]=(0x1a61+-0x10b*-0x13+-0x2e31)/_0x12b8d1,this['cameraPara'+'ms'][-0x6b*0x4d+-0x3*0x10f+-0x337*-0xb]=_0x12b8d1,this['cameraPara'+'ms'][0x1*-0x5f6+-0x2f*-0xa6+-0x2*0xc41]=_0x4ce0ae,this['cameraPara'+'ms'][-0x1a+-0x1*-0x2064+-0x2047]=_0x2c01da['projection']===hn?-0x1*-0x1cb+-0x12cf+0x1105:-0x12b0+-0xe66+0x6e*0x4d,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x2c01da['getExposur'+'e']():this['scene']['exposure']),_0x45a67a;}['clear'](_0x299d24,_0x49d193,_0x3e9d21,_0x53e677){const _0x17628d=(_0x49d193??_0x299d24['_clearColo'+'rBuffer']?bo:0x20*-0xab+0x184d+0x1*-0x2ed)|(_0x3e9d21??_0x299d24['_clearDept'+'hBuffer']?Co:-0x1936+0x896+0x10a0)|(_0x53e677??_0x299d24['_clearSten'+'cilBuffer']?Ih:0x17*0x16e+0x1f24+-0x4006);if(_0x17628d){const _0x3bb9c1=this['device'];Q['pushGpuMar'+'ker'](_0x3bb9c1,'CLEAR'),_0x3bb9c1['clear']({'color':[_0x299d24['_clearColo'+'r']['r'],_0x299d24['_clearColo'+'r']['g'],_0x299d24['_clearColo'+'r']['b'],_0x299d24['_clearColo'+'r']['a']],'depth':_0x299d24['_clearDept'+'h'],'stencil':_0x299d24['_clearSten'+'cil'],'flags':_0x17628d}),Q['popGpuMark'+'er'](_0x3bb9c1);}}['setCamera'](_0x5d3e20,_0x1312b7,_0x2c75ee,_0xf83e7a=null){this['setCameraU'+'niforms'](_0x5d3e20,_0x1312b7),this['clearView'](_0x5d3e20,_0x1312b7,_0x2c75ee,!(-0xb79+-0x3ea+0xf64));}['clearView'](_0x401715,_0x23be8d,_0x237bdd,_0x27e457){const _0xb63f7a=this['device'];if(Q['pushGpuMar'+'ker'](_0xb63f7a,'CLEAR-VIEW'),_0xb63f7a['setRenderT'+'arget'](_0x23be8d),_0xb63f7a['updateBegi'+'n'](),_0x27e457&&(_0xb63f7a['setColorWr'+'ite'](!(0x89*-0x25+-0x1db8+-0x1*-0x3185),!(0x12*0x221+0x1859+-0x3eab),!(-0x89*0x28+0x23*-0x73+0x2521),!(-0x1999+0x8*0x31a+0xc9)),_0xb63f7a['setDepthWr'+'ite'](!(-0x23b0+0x1702+-0x657*-0x2))),this['setupViewp'+'ort'](_0x401715,_0x23be8d),_0x237bdd){const _0x4e0645=_0x401715['_clearOpti'+'ons'];_0xb63f7a['clear'](_0x4e0645||{'color':[_0x401715['_clearColo'+'r']['r'],_0x401715['_clearColo'+'r']['g'],_0x401715['_clearColo'+'r']['b'],_0x401715['_clearColo'+'r']['a']],'depth':_0x401715['_clearDept'+'h'],'flags':(_0x401715['_clearColo'+'rBuffer']?bo:-0xb+-0xe78*0x1+0x2e7*0x5)|(_0x401715['_clearDept'+'hBuffer']?Co:0x1f*0x79+0x14*-0x12e+-0x2fb*-0x3)|(_0x401715['_clearSten'+'cilBuffer']?Ih:-0x2082+-0xcdf+0x2d61*0x1),'stencil':_0x401715['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0xb63f7a);}['setupCullM'+'ode'](_0xdb7812,_0x298090,_0x4db784){const _0x559f8d=_0x4db784['material'];let _0xb6be5d=xt;if(_0xdb7812){let _0x8fac9b=0x1de3*-0x1+-0x8b*0x1+0x1e6f;(_0x559f8d['cull']===mo||_0x559f8d['cull']===Jr)&&(_0x8fac9b=_0x298090*_0x4db784['flipFacesF'+'actor']*_0x4db784['node']['worldScale'+'Sign']),_0x8fac9b<-0x3*0x9+0x33*0x96+0x21*-0xe7?_0xb6be5d=_0x559f8d['cull']===mo?Jr:mo:_0xb6be5d=_0x559f8d['cull'];}this['device']['setCullMod'+'e'](_0xb6be5d),_0xb6be5d===xt&&_0x559f8d['cull']===xt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x4db784['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x131d5d){if(_0x131d5d['xr']&&_0x131d5d['xr']['views']['list']['length']){const _0x2f2dc7=_0x131d5d['xr']['views']['list'][-0x568+-0x1b4e+0x6a*0x4f];ji['mul2'](_0x2f2dc7['projMat'],_0x2f2dc7['viewOffMat']),_0x131d5d['frustum']['setFromMat'+'4'](ji);return;}const _0x1a64d9=_0x131d5d['projection'+'Matrix'];if(_0x131d5d['calculateP'+'rojection']&&_0x131d5d['calculateP'+'rojection'](_0x1a64d9,Ml),_0x131d5d['calculateT'+'ransform'])_0x131d5d['calculateT'+'ransform'](Yi,Ml);else{const _0x2340c7=_0x131d5d['_node']['getPositio'+'n'](),_0x22823d=_0x131d5d['_node']['getRotatio'+'n']();Yi['setTRS'](_0x2340c7,_0x22823d,I['ONE']),this['viewInvId']['setValue'](Yi['data']);}xa['copy'](Yi)['invert'](),ji['mul2'](_0x1a64d9,xa),_0x131d5d['frustum']['setFromMat'+'4'](ji);}['setBaseCon'+'stants'](_0x553bf3,_0x5d8502){_0x553bf3['setCullMod'+'e'](_0x5d8502['cull']),_0x5d8502['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x5d8502['opacityMap']),(_0x5d8502['opacityMap']||_0x5d8502['alphaTest']>-0x1*0x1709+0x52b+-0x2*-0x8ef)&&this['alphaTestI'+'d']['setValue'](_0x5d8502['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0xbb3c05){Md++;const _0x2586fb=_0xbb3c05['length'];if(_0x2586fb===-0x14c7+-0x488+0x1f*0xd1)return;const _0x300bd7=de();for(let _0x90276f=0x1465+0x3d*-0x15+-0xf64;_0x90276f<_0x2586fb;_0x90276f++){const _0x19e42a=_0xbb3c05[_0x90276f]['skinInstan'+'ce'];_0x19e42a&&(_0x19e42a['updateMatr'+'ices'](_0xbb3c05[_0x90276f]['node'],Md),_0x19e42a['_dirty']=!(-0x66*-0x35+-0x1eaa+0xd*0xbc));}this['_skinTime']+=de()-_0x300bd7;}['updateGpuS'+'kinMatrice'+'s'](_0x51dd9f){const _0x2f3494=de();for(const _0x54840b of _0x51dd9f){const _0x1be3c1=_0x54840b['skinInstan'+'ce'];_0x1be3c1&&_0x1be3c1['_dirty']&&(_0x1be3c1['updateMatr'+'ixPalette'](_0x54840b['node'],Md),_0x1be3c1['_dirty']=!(-0xd2b*0x1+0x77*0x39+-0xd53));}this['_skinTime']+=de()-_0x2f3494;}['updateMorp'+'hing'](_0x39d07c){const _0x21bb9d=de();for(const _0x523b26 of _0x39d07c){const _0x8418a6=_0x523b26['morphInsta'+'nce'];_0x8418a6&&_0x8418a6['_dirty']&&_0x8418a6['update']();}this['_morphTime']+=de()-_0x21bb9d;}['updateGSpl'+'ats'](_0x1bd5f2){var _0x3e55c9;for(const _0x4486c0 of _0x1bd5f2)(_0x3e55c9=_0x4486c0['gsplatInst'+'ance'])==null||_0x3e55c9['update']();}['gpuUpdate'](_0x34160a){this['updateGpuS'+'kinMatrice'+'s'](_0x34160a),this['updateMorp'+'hing'](_0x34160a),this['updateGSpl'+'ats'](_0x34160a);}['setVertexB'+'uffers'](_0x47715b,_0x5f6114){_0x47715b['setVertexB'+'uffer'](_0x5f6114['vertexBuff'+'er']);}['setMorphin'+'g'](_0x4ece55,_0x59d224){_0x59d224&&(_0x59d224['prepareRen'+'dering'](_0x4ece55),_0x4ece55['setVertexB'+'uffer'](_0x59d224['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x59d224['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x59d224['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x59d224['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x2fc17b,_0x1dd1cd){const _0xa4bb5c=_0x1dd1cd['skinInstan'+'ce'];if(_0xa4bb5c){this['_skinDrawC'+'alls']++;const _0x526a1c=_0xa4bb5c['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x526a1c);}}['dispatchVi'+'ewPos'](_0x3b096a){const _0x23536d=this['viewPos'];_0x23536d[0x26ee+0x1455+-0x3b43]=_0x3b096a['x'],_0x23536d[0x168c+-0x10c*-0x1+-0x1797]=_0x3b096a['y'],_0x23536d[0x1827+-0x14fa+-0x32b]=_0x3b096a['z'],this['viewPosId']['setValue'](_0x23536d);}['initViewBi'+'ndGroupFor'+'mat'](_0x5debf9){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x543201=[new ct('matrix_vie'+'w',Js),new ct('matrix_vie'+'wInverse',Js),new ct('matrix_pro'+'jection',Js),new ct('matrix_pro'+'jectionSky'+'box',Js),new ct('matrix_vie'+'wProjectio'+'n',Js),new ct('matrix_vie'+'w3',Sn),new ct('cubeMapRot'+'ationMatri'+'x',Sn),new ct('view_posit'+'ion',rs),new ct('skyboxInte'+'nsity',Us),new ct('exposure',Us),new ct('textureBia'+'s',Us),new ct('view_index',Us)];_0x5debf9&&_0x543201['push'](new ct('clusterCel'+'lsCountByB'+'oundsSize',rs),new ct('clusterTex'+'tureSize',rs),new ct('clusterBou'+'ndsMin',rs),new ct('clusterBou'+'ndsDelta',rs),new ct('clusterCel'+'lsDot',rs),new ct('clusterCel'+'lsMax',rs),new ct('shadowAtla'+'sParams',ia),new ct('clusterMax'+'Cells',sa),new ct('clusterSki'+'p',Us)),this['viewUnifor'+'mFormat']=new qS(this['device'],_0x543201);const _0x2d4e7d=[new im(sm,tm|LS)];this['viewBindGr'+'oupFormat']=new HS(this['device'],_0x2d4e7d);}}['setupViewU'+'niforms'](_0x1b1428,_0x1fc75a){this['projId']['setValue'](_0x1b1428['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x1b1428['projMat']['data']),this['viewId']['setValue'](_0x1b1428['viewOffMat']['data']),this['viewInvId']['setValue'](_0x1b1428['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x1b1428['viewMat3']['data']),this['viewProjId']['setValue'](_0x1b1428['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x1b1428['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x1fc75a);}['setupViewU'+'niformBuff'+'ers'](_0x453045,_0x3c4220,_0x57b5de,_0x303395){M['assert'](Array['isArray'](_0x453045),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x3d7f6a}=this,_0x21a3f2=(_0x303395==null?void(0xe0+0x1305+-0x1*0x13e5):_0x303395['length'])??-0x235*0x5+-0x1*-0x7da+0x330;for(;_0x453045['length']<_0x21a3f2;){const _0x32caaf=new nm(_0x3d7f6a,_0x3c4220,!(0x8*-0x59+0x617*0x4+0x1*-0x1593)),_0x47bef4=new rm(_0x3d7f6a,_0x57b5de,_0x32caaf);ca['setName'](_0x47bef4,'ViewBindGr'+'oup_'+_0x47bef4['id']),_0x453045['push'](_0x47bef4);}if(_0x303395)for(let _0x53e986=0xd14+-0x11*-0x238+-0x32cc;_0x53e986<_0x21a3f2;_0x53e986++){const _0x2723ad=_0x303395[_0x53e986];this['setupViewU'+'niforms'](_0x2723ad,_0x53e986);const _0x11119d=_0x453045[_0x53e986];_0x11119d['defaultUni'+'formBuffer']['update'](),_0x11119d['update']();}else{const _0x57aad2=_0x453045[0x439+-0x14f6*-0x1+-0x192f];_0x57aad2['defaultUni'+'formBuffer']['update'](),_0x57aad2['update']();}_0x303395||_0x3d7f6a['setBindGro'+'up'](Fo,_0x453045[-0x163e+0x186c+-0xba*0x3]);}['setupMeshU'+'niformBuff'+'ers'](_0x4b72cd){const _0x548742=this['device'];if(_0x548742['supportsUn'+'iformBuffe'+'rs']){const _0xace3f6=_0x4b72cd['getBindGro'+'up'](_0x548742);_0xace3f6['update'](),_0x548742['setBindGro'+'up'](VS,_0xace3f6),_0x4b72cd['getUniform'+'Buffer'](_0x548742)['update'](Rd),_0x548742['setBindGro'+'up'](wf,Rd['bindGroup'],Rd['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x1120e5,_0x5dee49=!(-0x2*0xa39+0x98a+0x7*0x18f)){const _0x386bda=_0x1120e5['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x386bda['data']),_0x5dee49&&this['normalMatr'+'ixId']['setValue'](_0x1120e5['node']['normalMatr'+'ix']['data']);}['cull'](_0x291407,_0x1d53c5,_0x71482f){const _0x3f11ea=de(),_0x590b49=_0x71482f['opaque'];_0x590b49['length']=0x1a8d+-0xb87+-0xf06;const _0xdc5ed8=_0x71482f['transparen'+'t'];_0xdc5ed8['length']=0x25c4+-0x2017+-0x1*0x5ad;const _0x10626=_0x291407['frustumCul'+'ling'],_0x745c9=_0x1d53c5['length'];for(let _0x223389=-0x6a*-0xe+-0x21b2+-0xdf3*-0x2;_0x223389<_0x745c9;_0x223389++){const _0x38adab=_0x1d53c5[_0x223389];_0x38adab['visible']&&(!_0x10626||!_0x38adab['cull']||_0x38adab['_isVisible'](_0x291407))&&(_0x38adab['visibleThi'+'sFrame']=!(0x1dba+0xe37*0x2+-0x3a28),(_0x38adab['transparen'+'t']?_0xdc5ed8:_0x590b49)['push'](_0x38adab),(_0x38adab['skinInstan'+'ce']||_0x38adab['morphInsta'+'nce']||_0x38adab['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x38adab),_0x38adab['gsplatInst'+'ance']&&_0x38adab['gsplatInst'+'ance']['cameras']['push'](_0x291407)));}this['_cullTime']+=de()-_0x3f11ea,this['_numDrawCa'+'llsCulled']+=_0x10626?_0x745c9:0x1246+0x15d7+-0x281d;}['collectLig'+'hts'](_0x53c5c8){this['lights']['length']=0x17dc+-0xa8f+-0xd4d,this['localLight'+'s']['length']=-0x18b4+0x1164+-0x4e*-0x18;const _0x3663a7=this['scene']['_stats'];_0x3663a7['dynamicLig'+'hts']=-0x2*0x271+0x1339+-0xe57,_0x3663a7['bakedLight'+'s']=-0x1*-0xaab+0x1*-0x1750+0xca5;const _0x472404=_0x53c5c8['layerList']['length'];for(let _0x3cff1f=-0x8ba*0x1+0x1fd7+-0x171d;_0x3cff1f<_0x472404;_0x3cff1f++){const _0x9e4865=_0x53c5c8['layerList'][_0x3cff1f];if(!Ld['has'](_0x9e4865)){Ld['add'](_0x9e4865);const _0x20d74e=_0x9e4865['_lights'];for(let _0x3d016e=0x164e+-0x77*0x3e+0x684;_0x3d016e<_0x20d74e['length'];_0x3d016e++){const _0x4076e3=_0x20d74e[_0x3d016e];Dd['has'](_0x4076e3)||(Dd['add'](_0x4076e3),this['lights']['push'](_0x4076e3),_0x4076e3['_type']!==ve&&this['localLight'+'s']['push'](_0x4076e3),(_0x4076e3['mask']&ds||_0x4076e3['mask']&si)&&_0x3663a7['dynamicLig'+'hts']++,_0x4076e3['mask']&ii&&_0x3663a7['bakedLight'+'s']++);}}}_0x3663a7['lights']=this['lights']['length'],Dd['clear'](),Ld['clear']();}['cullLights'](_0x3feb85,_0x34602b){const _0x43435b=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x582b97=this['scene']['physicalUn'+'its'];for(let _0x5c7778=-0x23f3*-0x1+0x5*-0x8+-0x23cb;_0x5c7778<_0x34602b['length'];_0x5c7778++){const _0x4a8beb=_0x34602b[_0x5c7778];if(_0x4a8beb['enabled']){if(_0x4a8beb['_type']!==ve){if(_0x4a8beb['getBoundin'+'gSphere'](Id),_0x3feb85['frustum']['containsSp'+'here'](Id)){_0x4a8beb['visibleThi'+'sFrame']=!(0xc5a+0x67f*-0x1+0x1*-0x5db),_0x4a8beb['usePhysica'+'lUnits']=_0x582b97;const _0x499631=_0x3feb85['getScreenS'+'ize'](Id);_0x4a8beb['maxScreenS'+'ize']=Math['max'](_0x4a8beb['maxScreenS'+'ize'],_0x499631);}else _0x43435b||_0x4a8beb['castShadow'+'s']&&!_0x4a8beb['shadowMap']&&(_0x4a8beb['visibleThi'+'sFrame']=!(-0xd83*0x1+-0x1c6b+0x29ee));}else _0x4a8beb['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x1d9488){const _0x1fd213=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x225a31=-0x2304+0x1*-0x24a0+0x20c*0x23;_0x225a31<this['localLight'+'s']['length'];_0x225a31++){const _0x11012c=this['localLight'+'s'][_0x225a31];_0x11012c['_type']!==ve&&(_0x1fd213?_0x11012c['atlasSlotU'+'pdated']&&_0x11012c['shadowUpda'+'teMode']===vs&&(_0x11012c['shadowUpda'+'teMode']=or):_0x11012c['shadowUpda'+'teMode']===vs&&_0x11012c['castShadow'+'s']&&(_0x11012c['getRenderD'+'ata'](null,-0x2582+0x1ccb+0x8b7)['shadowCame'+'ra']['renderTarg'+'et']||(_0x11012c['shadowUpda'+'teMode']=or)),_0x11012c['visibleThi'+'sFrame']&&_0x11012c['castShadow'+'s']&&_0x11012c['shadowUpda'+'teMode']!==vs&&this['_shadowRen'+'dererLocal']['cull'](_0x11012c,_0x1d9488));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x592cbd=_0x1d9488['cameras'];for(let _0x1806a4=-0x1*-0x1417+-0x11*-0x67+-0x1aee;_0x1806a4<_0x592cbd['length'];_0x1806a4++){const _0x28bbdb=_0x592cbd[_0x1806a4];if(_0x28bbdb['enabled']){const _0x446daf=_0x28bbdb['camera'];let _0xd8b2b5;const _0x35d622=_0x446daf['layers'];for(let _0x6e9994=-0x1b6e+0x1aa6+-0x32*-0x4;_0x6e9994<_0x35d622['length'];_0x6e9994++){const _0x883e50=_0x1d9488['getLayerBy'+'Id'](_0x35d622[_0x6e9994]);if(_0x883e50){const _0x26b016=_0x883e50['splitLight'+'s'][ve];for(let _0x574c03=0x1435+0x1c7*0x1+0xafe*-0x2;_0x574c03<_0x26b016['length'];_0x574c03++){const _0x1d9dc7=_0x26b016[_0x574c03];_0x1d9dc7['castShadow'+'s']&&!Ta['has'](_0x1d9dc7)&&(Ta['add'](_0x1d9dc7),_0xd8b2b5=_0xd8b2b5??[],_0xd8b2b5['push'](_0x1d9dc7),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x1d9dc7,_0x1d9488,_0x446daf));}}}_0xd8b2b5&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x446daf,_0xd8b2b5),Ta['clear']();}}}['cullCompos'+'ition'](_0x4e6d42){const _0x5c0915=de(),{scene:_0x5d296e}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x3bf61a=_0x4e6d42['cameras']['length'];this['_camerasRe'+'ndered']+=_0x3bf61a;for(let _0x53f313=0x4*0x7a7+-0x79*-0x1+-0x1f15;_0x53f313<_0x3bf61a;_0x53f313++){const _0x4dbbf4=_0x4e6d42['cameras'][_0x53f313];_0x5d296e==null||_0x5d296e['fire'](Ty,_0x4dbbf4);const _0x25ce3a=_0x4dbbf4['renderTarg'+'et'];_0x4dbbf4['frameUpdat'+'e'](_0x25ce3a),this['updateCame'+'raFrustum'](_0x4dbbf4['camera']);const _0x16edf8=_0x4dbbf4['layers'];for(let _0x4df519=-0xdec+0x207b*-0x1+0x2e67;_0x4df519<_0x16edf8['length'];_0x4df519++){const _0x2955a5=_0x4e6d42['getLayerBy'+'Id'](_0x16edf8[_0x4df519]);if(_0x2955a5&&_0x2955a5['enabled']){this['cullLights'](_0x4dbbf4['camera'],_0x2955a5['_lights']);const _0xe2360=_0x2955a5['getCulledI'+'nstances'](_0x4dbbf4['camera']);this['cull'](_0x4dbbf4['camera'],_0x2955a5['meshInstan'+'ces'],_0xe2360);}}_0x5d296e==null||_0x5d296e['fire'](wy,_0x4dbbf4);}_0x5d296e['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x4e6d42),_0x5d296e==null||_0x5d296e['fire'](Sw),this['_cullTime']+=de()-_0x5c0915;}['updateShad'+'ers'](_0x11b6f8,_0x4fd88b){const _0x43de16=_0x11b6f8['length'];for(let _0x1ded58=-0x5ce+-0x1*0x476+0xa44;_0x1ded58<_0x43de16;_0x1ded58++){const _0x152a22=_0x11b6f8[_0x1ded58]['material'];if(_0x152a22&&!Ta['has'](_0x152a22)&&(Ta['add'](_0x152a22),_0x152a22['getShaderV'+'ariant']!==ua['prototype']['getShaderV'+'ariant'])){if(_0x4fd88b&&(!_0x152a22['useLightin'+'g']||_0x152a22['emitter']&&!_0x152a22['emitter']['lighting']))continue;_0x152a22['clearVaria'+'nts']();}}Ta['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](BE(this['device']));}['beginFrame'](_0x32f2a1){const _0x14111a=this['scene'],_0x232a0e=_0x14111a['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x21df44=0xac3+0x188d+-0x5*0x710;const _0x4395d9=_0x32f2a1['layerList'],_0x3a1a23=_0x4395d9['length'];for(let _0x30a051=0x3*0xc1+-0x8a4+0x661;_0x30a051<_0x3a1a23;_0x30a051++){const _0x2d183f=_0x4395d9[_0x30a051]['meshInstan'+'ces'],_0x5b71f9=_0x2d183f['length'];_0x21df44+=_0x5b71f9;for(let _0x4f4938=-0xda2+-0x1340+-0x20e2*-0x1;_0x4f4938<_0x5b71f9;_0x4f4938++){const _0x2e8dfc=_0x2d183f[_0x4f4938];_0x2e8dfc['visibleThi'+'sFrame']=!(-0x704*0x1+-0x3*-0x3e5+0x2*-0x255),_0x232a0e&&Od['push'](_0x2e8dfc),_0x2e8dfc['skinInstan'+'ce']&&Fd['push'](_0x2e8dfc);}}if(_0x14111a['_stats']['meshInstan'+'ces']=_0x21df44,_0x232a0e){const _0x2b99aa=!_0x14111a['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](Od,_0x2b99aa),_0x14111a['updateShad'+'ers']=!(-0x133+-0x72*0x34+-0x4*-0x617),this['device']['_shadersDi'+'rty']=!(0x2275*0x1+-0x11*-0xd3+-0x3077),_0x14111a['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](Fd),Od['length']=0xb*-0x143+0x12df+0x1aa*-0x3,Fd['length']=0x113e*0x1+0x1fdc+-0x311a*0x1;const _0x46ea85=this['lights'],_0x1195eb=_0x46ea85['length'];for(let _0x48d34e=-0xb49+0x210d+-0x1*0x15c4;_0x48d34e<_0x1195eb;_0x48d34e++)_0x46ea85[_0x48d34e]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x4e4e08){const _0x543d68=de(),_0x37dca0=_0x4e4e08['layerList']['length'],_0xfd47ea=this['scene']['_shaderVer'+'sion'];for(let _0x599938=-0xa31+0xb3*0x4+0x765;_0x599938<_0x37dca0;_0x599938++){const _0x6d1152=_0x4e4e08['layerList'][_0x599938];_0x6d1152['_shaderVer'+'sion']=_0xfd47ea,_0x6d1152['_skipRende'+'rCounter']=0x1e32+-0x20*-0x59+0x6*-0x6e3,_0x6d1152['_forwardDr'+'awCalls']=-0x194+0x5*0x2e3+-0xcdb*0x1,_0x6d1152['_shadowDra'+'wCalls']=0x5*0x6d5+-0xce*-0x27+-0x418b,_0x6d1152['_renderTim'+'e']=0x1aa9+-0x7b8+-0x1*0x12f1;}_0x4e4e08['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x543d68;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0x1a3*0x16+0xcee*-0x3+0x2c9),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Oy{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(-0x2033+0x7f3*-0x2+0x301a),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(-0x1f5+-0xb27+-0x9*-0x175),this['clearDepth']=!(0x8f1+-0x1121+-0x9*-0xe9),this['clearStenc'+'il']=!(-0x1fe4+-0x2*0xbf7+0x37d3*0x1),this['triggerPos'+'tprocess']=!(0x19d1+-0x1*-0x19cf+-0x339f),this['firstCamer'+'aUse']=!(-0x24cb+0x11bd+-0x77*-0x29),this['lastCamera'+'Use']=!(-0x1*0x1065+-0x1113+-0x29*-0xd1),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(-0x1f9d+-0x109b+0x1*0x3039));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x521812=>{_0x521812['defaultUni'+'formBuffer']['destroy'](),_0x521812['destroy']();}),this['viewBindGr'+'oups']['length']=-0x9*0x108+0x132f+-0x9e7;}['setupClear'+'s'](_0x49d61b,_0x11eb34){this['clearColor']=(_0x49d61b==null?void(0x2f5*-0xd+-0x1*0x90e+-0x547*-0x9):_0x49d61b['clearColor'+'Buffer'])||_0x11eb34['clearColor'+'Buffer'],this['clearDepth']=(_0x49d61b==null?void(-0x39*-0x57+-0xb07+0x4*-0x216):_0x49d61b['clearDepth'+'Buffer'])||_0x11eb34['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x49d61b==null?void(0x1c52*0x1+0x1d9e+0x1*-0x39f0):_0x49d61b['clearStenc'+'ilBuffer'])||_0x11eb34['clearStenc'+'ilBuffer'];}}class oA extends fs{constructor(_0x2d4720,_0xfd6191,_0x593953,_0x32e3ff){super(_0x2d4720),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0xa*-0x20b+0x8d*-0xc+0x1b0b)),(this['layerCompo'+'sition']=_0xfd6191,this['scene']=_0x593953,this['renderer']=_0x32e3ff);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>-0xaaa+-0x4f*0x6d+0x2c4d;}['addRenderA'+'ction'](_0x22252){this['renderActi'+'ons']['push'](_0x22252);}['addLayer'](_0x3a61ec,_0x389b00,_0x17be7c,_0x599e03=!(-0x655+-0x1c89+0x1*0x22de)){M['assert'](_0x3a61ec),M['assert'](this['renderTarg'+'et']!==void(-0xe0f+0x150c+-0x6fd),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),M['assert'](_0x3a61ec['camera']['layersSet']['has'](_0x389b00['id']),'Camera\x20'+_0x3a61ec['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x389b00['name']+'.');const _0x1ae287=new Oy();if(_0x1ae287['renderTarg'+'et']=this['renderTarg'+'et'],_0x1ae287['camera']=_0x3a61ec,_0x1ae287['layer']=_0x389b00,_0x1ae287['transparen'+'t']=_0x17be7c,_0x599e03){const _0x2d3550=this['renderActi'+'ons']['length']===-0x2*0x1129+-0x1c4b+-0xd*-0x4d1;_0x1ae287['setupClear'+'s'](_0x2d3550?_0x3a61ec:void(-0x3c7*0xa+-0x1d3+0x147*0x1f),_0x389b00);}this['addRenderA'+'ction'](_0x1ae287);}['addLayers'](_0x32c769,_0x11bf36,_0x19622e,_0x57af1d,_0xeffca,_0x422c55=!(0x827*-0x1+0x1896+0x106f*-0x1)){const {layerList:_0x1ee263,subLayerList:_0x4d5227}=_0x32c769;let _0x4760ab=_0x57af1d,_0x32d367=_0x19622e;for(;_0x32d367<_0x1ee263['length'];){const _0x41b60b=_0x1ee263[_0x32d367],_0x535615=_0x4d5227[_0x32d367];if(_0x11bf36['camera']['layersSet']['has'](_0x41b60b['id'])&&(this['addLayer'](_0x11bf36,_0x41b60b,_0x535615,_0x4760ab),_0x4760ab=!(0x206+-0x2416+0x2211)),_0x32d367++,_0x41b60b['id']===_0xeffca&&_0x535615===_0x422c55)break;}return _0x32d367;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x22e5d1,renderActions:_0x77e74a}=this;for(let _0x2569e2=0xd8c+0xb*-0x125+0x7*-0x23;_0x2569e2<_0x77e74a['length'];_0x2569e2++){const _0x2be9ba=_0x77e74a[_0x2569e2]['camera']['camera'],_0x265189=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x2be9ba);if(_0x265189)for(let _0xc2b03b=-0x1c31+-0x10a6+-0x1*-0x2cd7;_0xc2b03b<_0x265189['length'];_0xc2b03b++){const _0x4b2dd7=_0x265189[_0xc2b03b];if(_0x22e5d1['dirLightSh'+'adows']['get'](_0x4b2dd7)!==_0x2be9ba){_0x22e5d1['dirLightSh'+'adows']['set'](_0x4b2dd7,_0x2be9ba);const _0x3bf59d=_0x22e5d1['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x4b2dd7,_0x2be9ba);_0x3bf59d&&this['beforePass'+'es']['push'](_0x3bf59d);}}}}['updateClea'+'rs'](){const _0x219a21=this['renderActi'+'ons'][-0x12d9+0x12e7+-0xe];if(_0x219a21){const _0xe67b8f=_0x219a21['camera']['camera'],_0x40b29b=_0xe67b8f['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x40b29b&&_0x219a21['clearColor']?_0xe67b8f['clearColor']:void(-0x2*-0xaec+-0x100c+0xe*-0x6a)),this['setClearDe'+'pth'](_0x40b29b&&_0x219a21['clearDepth']&&!this['noDepthCle'+'ar']?_0xe67b8f['clearDepth']:void(0x17fb*0x1+-0x7ed+-0x100e)),this['setClearSt'+'encil'](_0x40b29b&&_0x219a21['clearStenc'+'il']?_0xe67b8f['clearStenc'+'il']:void(0x1caf+-0x2384+0x9f*0xb));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x437e39}=this;for(let _0x4fbfcb=0x1*0x4cb+-0x8e3+0x418;_0x4fbfcb<_0x437e39['length'];_0x4fbfcb++){const _0x141f0f=_0x437e39[_0x4fbfcb];_0x141f0f['firstCamer'+'aUse']&&this['scene']['fire'](mw,_0x141f0f['camera']);}}['execute'](){const {layerComposition:_0x4ac01c,renderActions:_0x52418d}=this;for(let _0x531681=0x1eb8+-0x10*-0x1f8+-0x3e38;_0x531681<_0x52418d['length'];_0x531681++){const _0x963f6c=_0x52418d[_0x531681],_0x20a55b=_0x963f6c['layer'];M['call'](()=>{_0x4ac01c['getLayerBy'+'Name'](_0x20a55b['name'])||M['warnOnce']('Layer\x20'+_0x20a55b['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x4ac01c['isEnabled'](_0x20a55b,_0x963f6c['transparen'+'t'])&&this['renderRend'+'erAction'](_0x963f6c,_0x531681===0xc*-0x17a+-0x7*0x59+0x1427);}}['after'](){for(let _0x39fe0a=-0xa6+-0x7*-0x475+-0x1e8d;_0x39fe0a<this['renderActi'+'ons']['length'];_0x39fe0a++){const _0x171f1f=this['renderActi'+'ons'][_0x39fe0a];_0x171f1f['lastCamera'+'Use']&&this['scene']['fire'](pw,_0x171f1f['camera']);}this['beforePass'+'es']['length']=0x1*-0x2586+0x1c1*-0x7+0x31cd;}['renderRend'+'erAction'](_0x3d5c60,_0x458a02){var _0x4a7f5d;const {renderer:_0x31bb28,scene:_0x588972}=this,_0x5029c8=_0x31bb28['device'],{layer:_0x319d52,transparent:_0x7379c0,camera:_0x4e7424}=_0x3d5c60;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x4e7424?_0x4e7424['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x319d52['name']+'('+(_0x7379c0?'TRANSP':'OPAQUE')+')');const _0x4d7483=de();if(_0x4e7424){const _0xce8dc1=_0x4e7424['gammaCorre'+'ction'],_0x596ca0=_0x4e7424['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(-0x216c+-0x19c7+0x3b33)&&(_0x4e7424['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0x6d*0x27+0xe2d*0x1+-0x1ec8)&&(_0x4e7424['toneMappin'+'g']=this['toneMappin'+'g']),_0x588972['fire'](_w,_0x4e7424,_0x319d52,_0x7379c0);const _0x13ebf0={'lightClusters':_0x3d5c60['lightClust'+'ers']},_0x23ff1a=((_0x4a7f5d=_0x4e7424['camera']['shaderPass'+'Info'])==null?void(-0xa0e+0x1*-0x737+-0x1145*-0x1):_0x4a7f5d['index'])??fa;(!_0x458a02||!_0x4e7424['camera']['fullSizeCl'+'earRect'])&&(_0x13ebf0['clearColor']=_0x3d5c60['clearColor'],_0x13ebf0['clearDepth']=_0x3d5c60['clearDepth'],_0x13ebf0['clearStenc'+'il']=_0x3d5c60['clearStenc'+'il']);const _0x5894d7=_0x3d5c60['renderTarg'+'et']??_0x5029c8['backBuffer'];_0x31bb28['renderForw'+'ardLayer'](_0x4e7424['camera'],_0x5894d7,_0x319d52,_0x7379c0,_0x23ff1a,_0x3d5c60['viewBindGr'+'oups'],_0x13ebf0),_0x5029c8['setBlendSt'+'ate'](Ct['NOBLEND']),_0x5029c8['setStencil'+'State'](null,null),_0x5029c8['setAlphaTo'+'Coverage'](!(-0x84a*0x1+0x9*-0xee+0x10a9)),_0x588972['fire'](gw,_0x4e7424,_0x319d52,_0x7379c0),this['gammaCorre'+'ction']!==void(0x1299+-0x179*-0xd+-0x25be)&&(_0x4e7424['gammaCorre'+'ction']=_0xce8dc1),this['toneMappin'+'g']!==void(0x1b24+0x1*0x8fd+-0x2421)&&(_0x4e7424['toneMappin'+'g']=_0x596ca0);}Q['popGpuMark'+'er'](this['device']),_0x319d52['_renderTim'+'e']+=de()-_0x4d7483;}['log'](_0x5a0c53,_0xc60fe2){if(super['log'](_0x5a0c53,_0xc60fe2),ni['get'](qa)){const {layerComposition:_0x47a528}=this;this['renderActi'+'ons']['forEach']((_0x3e5cea,_0x3ce90b)=>{const _0x58006f=_0x3e5cea['layer'],_0x176a78=_0x58006f['enabled']&&_0x47a528['isEnabled'](_0x58006f,_0x3e5cea['transparen'+'t']),_0x21fab8=_0x3e5cea['camera'];M['trace'](qa,'\x20\x20\x20\x20'+_0x3ce90b+':'+('\x20Cam:\x20'+(_0x21fab8?_0x21fab8['entity']['name']:'-'))['padEnd'](-0xc75+0x12*0x13+0xb35,'\x20')+('\x20Lay:\x20'+_0x58006f['name'])['padEnd'](0x21f3+-0x1e7d+-0x6c*0x8,'\x20')+(_0x3e5cea['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x176a78?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x58006f['meshInstan'+'ces']['length'])['padEnd'](0xbb9*0x1+-0x6ed*-0x2+-0x198e,'\x20'));});}}}class lA extends fs{constructor(_0x544f51,_0x360f0c,_0x4fba00){super(_0x544f51),this['renderer']=_0x360f0c,this['renderActi'+'on']=_0x4fba00,this['requiresCu'+'bemaps']=!(0x3cd*-0x1+-0x37*-0x3+0x329*0x1);}['execute'](){const _0x3bdb9d=this['renderActi'+'on'],_0xc17b5d=_0x3bdb9d['camera'];M['assert'](_0x3bdb9d['triggerPos'+'tprocess']&&_0xc17b5d['onPostproc'+'essing']),_0xc17b5d['onPostproc'+'essing']();}}const hA=[[],[],[]],Ki=new ie(),xr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=-0x1*-0x1248+-0xc7a*0x2+0x6ac,this['shaderInst'+'ances']['length']=0x1fff*-0x1+-0xb47*-0x3+-0xeb*0x2,this['isNewMater'+'ial']['length']=-0x644+-0xcb6*0x1+0x12fa,this['lightMaskC'+'hanged']['length']=0x1*-0x971+-0x24a8+-0x2e19*-0x1;}};function cA(_0x59220c){const _0x2f51b8=[];for(let _0x4575d4=0x1932+0x22bf+-0x3ff*0xf;_0x4575d4<_0x59220c;++_0x4575d4){const _0x54029c=Math['sqrt'](_0x4575d4+(0x4b5+0x171f+-0x6f5*0x4+0.5))/Math['sqrt'](_0x59220c);_0x2f51b8['push'](_0x54029c);}return _0x2f51b8;}function dA(_0x42c0ae){const _0x224c88=[];for(let _0x1b2261=-0x2655*0x1+-0xc9f+0x32f4;_0x1b2261<_0x42c0ae;_0x1b2261++){const _0x32c329=_0x1b2261/_0x42c0ae,_0x5cb813=Math['sqrt'](_0x32c329*_0x32c329);_0x224c88['push'](_0x5cb813);}return _0x224c88;}const Pi=class Pi extends nA{constructor(_0x35c3e6){super(_0x35c3e6);const _0x570a53=this['device'];this['_forwardDr'+'awCalls']=-0x1*0xe6d+0x3*-0x961+0x2a90,this['_materialS'+'witches']=-0x1*-0x2023+0x69d+0xf8*-0x28,this['_depthMapT'+'ime']=-0x19ce+0x1c8e+-0x58*0x8,this['_forwardTi'+'me']=-0x1a53+-0x33*-0x13+0x168a,this['_sortTime']=0x2*0x107b+0x5c0+0x1*-0x26b6;const _0x1b9e06=_0x570a53['scope'];this['fogColorId']=_0x1b9e06['resolve']('fog_color'),this['fogStartId']=_0x1b9e06['resolve']('fog_start'),this['fogEndId']=_0x1b9e06['resolve']('fog_end'),this['fogDensity'+'Id']=_0x1b9e06['resolve']('fog_densit'+'y'),this['ambientId']=_0x1b9e06['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x1b9e06['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x1b9e06['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x1b9e06['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x1b9e06['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x1b9e06['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(-0x1*0x18a6+-0x125*0x9+0x22f7),this['fogColor']=new Float32Array(0x2264+0x175b+-0x39bc),this['ambientCol'+'or']=new Float32Array(0x24bd+-0x4d0+-0x1fea),this['pcssDiskSa'+'mples']=cA(0x16c9+-0x1aba+-0x29*-0x19),this['pcssSphere'+'Samples']=dA(0x1*-0x863+-0x2558+0x2dcb);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x57df25){const _0x4fc91a=this['ambientCol'+'or'];if(Ki['linear'](_0x57df25['ambientLig'+'ht']),_0x4fc91a[-0x1a08+-0x9bf+-0xbed*-0x3]=Ki['r'],_0x4fc91a[-0x11*0xed+0xaf6+0x4c8]=Ki['g'],_0x4fc91a[-0x1*0xa09+-0x2f9*0x7+0x2ce*0xb]=Ki['b'],_0x57df25['physicalUn'+'its']){for(let _0x513768=-0x1*0xc61+-0x1cde+0x293f*0x1;_0x513768<0x1666+0xc62+-0x22c5;_0x513768++)_0x4fc91a[_0x513768]*=_0x57df25['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x4fc91a),this['skyboxInte'+'nsityId']['setValue'](_0x57df25['physicalUn'+'its']?_0x57df25['skyboxLumi'+'nance']:_0x57df25['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x57df25['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x1526cb,_0x37870e){const _0x2f6859='light'+_0x37870e;this['lightColor'+'Id'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_color'),this['lightDir'][_0x37870e]=new Float32Array(-0x2273+-0x2493+0x4709*0x1),this['lightDirId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_direction'),this['lightShado'+'wMapId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_radius'),this['lightPos'][_0x37870e]=new Float32Array(-0x16db*-0x1+0xc12+-0x1175*0x2),this['lightPosId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_position'),this['lightWidth'][_0x37870e]=new Float32Array(0x15c5*0x1+-0x16bc+0x1*0xfa),this['lightWidth'+'Id'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_halfWidth'),this['lightHeigh'+'t'][_0x37870e]=new Float32Array(-0x237+-0x1*0x133+0x36d*0x1),this['lightHeigh'+'tId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+'_cookie'),this['lightCooki'+'eIntId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x37870e]=_0x1526cb['resolve'](_0x2f6859+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x3e75ba,_0x38039b,_0x44aea0,_0x2a198d,_0x22dac9){this['lightPos'][_0x38039b][0x1*0x1e0b+-0x19*-0x79+-0x29dc]=_0x2a198d['x']-_0x44aea0['x']*_0x22dac9,this['lightPos'][_0x38039b][-0x908*-0x2+0x6f1*-0x1+0xb1e*-0x1]=_0x2a198d['y']-_0x44aea0['y']*_0x22dac9,this['lightPos'][_0x38039b][0x11*-0x1b2+0x17fc+0x4d8]=_0x2a198d['z']-_0x44aea0['z']*_0x22dac9,this['lightPosId'][_0x38039b]['setValue'](this['lightPos'][_0x38039b]);const _0x13e20a=_0x3e75ba['transformV'+'ector'](new I(-(-0x16*0x160+0x1364+-0x5*-0x22c+0.5),0xf70+0x3b6+-0x1326,-0x7bd*0x3+-0x1*0x15e2+0x2d19));this['lightWidth'][_0x38039b][-0x1*-0x1bed+-0x87*-0x49+-0x426c]=_0x13e20a['x']*_0x22dac9,this['lightWidth'][_0x38039b][0x93a*-0x1+0x7f*-0x1+0x9ba]=_0x13e20a['y']*_0x22dac9,this['lightWidth'][_0x38039b][0xd3+0xd23+0x2*-0x6fa]=_0x13e20a['z']*_0x22dac9,this['lightWidth'+'Id'][_0x38039b]['setValue'](this['lightWidth'][_0x38039b]);const _0x24d94b=_0x3e75ba['transformV'+'ector'](new I(-0x22f*0xd+0x9*0x3d+0x2*0xd1f,-0x106*-0x1+-0x40d+-0x1f*-0x19,0x6a1*-0x5+0x1cf5*-0x1+0x3e1a*0x1+0.5));this['lightHeigh'+'t'][_0x38039b][-0x1467+0x9*0x327+-0x7f8]=_0x24d94b['x']*_0x22dac9,this['lightHeigh'+'t'][_0x38039b][-0x342+0x202*-0x1+0x545]=_0x24d94b['y']*_0x22dac9,this['lightHeigh'+'t'][_0x38039b][-0x3*-0xca+-0x1eac*0x1+0x1c50]=_0x24d94b['z']*_0x22dac9,this['lightHeigh'+'tId'][_0x38039b]['setValue'](this['lightHeigh'+'t'][_0x38039b]);}['dispatchDi'+'rectLights'](_0x2cc584,_0x13d485,_0x4a5b28){let _0x134241=0x1379+-0x2647+0x12ce;const _0x4f27d4=this['device']['scope'];for(let _0x25b49d=0x13c1+0x25e9+0x1cd5*-0x2;_0x25b49d<_0x2cc584['length'];_0x25b49d++){if(!(_0x2cc584[_0x25b49d]['mask']&_0x13d485))continue;const _0x28a110=_0x2cc584[_0x25b49d],_0x496987=_0x28a110['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x134241]||this['_resolveLi'+'ght'](_0x4f27d4,_0x134241),this['lightColor'+'Id'][_0x134241]['setValue'](_0x28a110['_colorLine'+'ar']),_0x496987['getY'](_0x28a110['_direction'])['mulScalar'](-(0x1*-0xdfd+0xf91*-0x2+0x169*0x20)),_0x28a110['_direction']['normalize'](),this['lightDir'][_0x134241][0x332*-0x6+0x1fc9+-0xc9d]=_0x28a110['_direction']['x'],this['lightDir'][_0x134241][0x722+0x1b5+0x6*-0x179]=_0x28a110['_direction']['y'],this['lightDir'][_0x134241][-0xa7*0x27+-0x44*-0x2+0x18eb]=_0x28a110['_direction']['z'],this['lightDirId'][_0x134241]['setValue'](this['lightDir'][_0x134241]),_0x28a110['shape']!==Vs&&this['setLTCDire'+'ctionalLig'+'ht'](_0x496987,_0x134241,_0x28a110['_direction'],_0x4a5b28['_node']['getPositio'+'n'](),_0x4a5b28['farClip']),_0x28a110['castShadow'+'s']){const _0x3a2324=_0x28a110['getRenderD'+'ata'](_0x4a5b28,0x251b+-0x2*-0x132a+-0x4b6f),_0x471b79=_0x28a110['_getUnifor'+'mBiasValue'+'s'](_0x3a2324);this['lightShado'+'wMapId'][_0x134241]['setValue'](_0x3a2324['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x134241]['setValue'](_0x3a2324['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x134241]['setValue'](_0x28a110['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x134241]['setValue'](_0x28a110['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x134241]['setValue'](_0x28a110['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x134241]['setValue'](0x1*-0x1a17+-0x20ec*0x1+0x2*0x1d82-_0x28a110['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x134241]['setValue'](_0x28a110['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x134241]['setValue'](_0x28a110['_softShado'+'wParams']),_0x3a2324['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x134241]['setValue'](_0x28a110['penumbraSi'+'ze']/_0x3a2324['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x3a2324['projection'+'Compensati'+'on']);const _0x54bdbd=_0x28a110['_shadowCam'+'eraParams'];_0x54bdbd['length']=0x2c3*0x1+-0x1*-0x2632+-0x28f1,_0x54bdbd[-0x3*0xc9d+-0x7*-0x3b2+0x1*0xbf9]=-0x1145*-0x1+-0x9*-0xd7+-0xe3*0x1c,_0x54bdbd[0x752*0x1+-0x698+-0xb9]=_0x3a2324['shadowCame'+'ra']['_farClip'],_0x54bdbd[-0x645+0x92f+-0x2e8]=_0x3a2324['shadowCame'+'ra']['_nearClip'],_0x54bdbd[0x1ad7+0x1d21+-0x37f5]=-0x4*0x9a9+0xad*-0x17+0x3630,this['lightCamer'+'aParamsId'][_0x134241]['setValue'](_0x54bdbd);const _0x3b7f4b=_0x28a110['_shadowRen'+'derParams'];_0x3b7f4b['length']=-0x170e+-0xf*0x28d+-0x7*-0x8c3,_0x3b7f4b[-0x1*-0x176d+0x1*-0xc75+-0xaf8]=_0x28a110['_shadowRes'+'olution'],_0x3b7f4b[-0x160+-0x14a1+0x1602]=_0x471b79['normalBias'],_0x3b7f4b[0x2218+-0x1f*-0x107+0x41ef*-0x1]=_0x471b79['bias'],_0x3b7f4b[-0x12ef*0x1+-0x1def*0x1+0x104b*0x3]=-0x2*-0xb84+-0x17c3+-0x11*-0xb,this['lightShado'+'wParamsId'][_0x134241]['setValue'](_0x3b7f4b);}_0x134241++;}return _0x134241;}['setLTCPosi'+'tionalLigh'+'t'](_0x4f8974,_0x39235f){const _0xf676b8=_0x4f8974['transformV'+'ector'](new I(-(0x2390+0x2*0x4c7+-0x23*0x14a+0.5),0x1a7f+0xce0+-0x275f,-0x2*0x1b1+-0x20b2+0x2414));this['lightWidth'][_0x39235f][0xf0f+0x5*-0x415+-0x55a*-0x1]=_0xf676b8['x'],this['lightWidth'][_0x39235f][-0xe04+-0x192b*0x1+-0x108*-0x26]=_0xf676b8['y'],this['lightWidth'][_0x39235f][-0x7*0x1eb+0x8e+0x1*0xce1]=_0xf676b8['z'],this['lightWidth'+'Id'][_0x39235f]['setValue'](this['lightWidth'][_0x39235f]);const _0x464886=_0x4f8974['transformV'+'ector'](new I(0xc6f*-0x3+0x829+0x1d24,-0x1ba8+0x4a7+0x1701,0x3*-0xee+0x1940+-0x1676+0.5));this['lightHeigh'+'t'][_0x39235f][0x22e6+-0x20a2+-0x244]=_0x464886['x'],this['lightHeigh'+'t'][_0x39235f][-0x16a*-0x1+0xb*-0x4f+0x1fc]=_0x464886['y'],this['lightHeigh'+'t'][_0x39235f][0x16bf*-0x1+0x3*0x75a+0xb3]=_0x464886['z'],this['lightHeigh'+'tId'][_0x39235f]['setValue'](this['lightHeigh'+'t'][_0x39235f]);}['dispatchOm'+'niLight'](_0x2a4ce0,_0xce1f20,_0xb16554){const _0x591f20=_0xce1f20['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0xb16554]||this['_resolveLi'+'ght'](_0x2a4ce0,_0xb16554),this['lightRadiu'+'sId'][_0xb16554]['setValue'](_0xce1f20['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0xb16554]['setValue'](_0xce1f20['_colorLine'+'ar']),_0x591f20['getTransla'+'tion'](_0xce1f20['_position']),this['lightPos'][_0xb16554][-0x1f02+0x11*0x73+-0x175f*-0x1]=_0xce1f20['_position']['x'],this['lightPos'][_0xb16554][0x1344+-0x25f7+-0x54*-0x39]=_0xce1f20['_position']['y'],this['lightPos'][_0xb16554][0x11fc+-0x1f5f+0xd65]=_0xce1f20['_position']['z'],this['lightPosId'][_0xb16554]['setValue'](this['lightPos'][_0xb16554]),_0xce1f20['shape']!==Vs&&this['setLTCPosi'+'tionalLigh'+'t'](_0x591f20,_0xb16554),_0xce1f20['castShadow'+'s']){const _0x3843b4=_0xce1f20['getRenderD'+'ata'](null,0xc6b+0x317*-0x2+0x63d*-0x1);this['lightShado'+'wMapId'][_0xb16554]['setValue'](_0x3843b4['shadowBuff'+'er']);const _0x1a8335=_0xce1f20['_getUnifor'+'mBiasValue'+'s'](_0x3843b4),_0x2d7037=_0xce1f20['_shadowRen'+'derParams'];_0x2d7037['length']=0x2279+-0x12b3*-0x2+-0x47db,_0x2d7037[-0x1*0x1b0d+-0x1dde+0x38eb]=_0xce1f20['_shadowRes'+'olution'],_0x2d7037[-0xfef+-0x74c+0x173c]=_0x1a8335['normalBias'],_0x2d7037[0x19db+-0x67c+-0x135d]=_0x1a8335['bias'],_0x2d7037[-0x16b0+-0x1*0x1f1f+0x35d2]=(-0x8d*0x3d+-0x1016+0x31b0)/_0xce1f20['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0xb16554]['setValue'](_0x2d7037),this['lightShado'+'wIntensity'][_0xb16554]['setValue'](_0xce1f20['shadowInte'+'nsity']);const _0x512826=_0xce1f20['penumbraSi'+'ze']/_0x3843b4['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0xb16554]['setValue'](_0x512826);const _0x31b43d=_0xce1f20['_shadowCam'+'eraParams'];_0x31b43d['length']=-0xb35*-0x1+-0x1362+0x831,_0x31b43d[-0x1*0x1184+-0x214c+0x32d0]=0x252b+-0x1288+-0xd*0x16f,_0x31b43d[-0xa43+0x56a+0xcf*0x6]=_0x3843b4['shadowCame'+'ra']['_farClip'],_0x31b43d[-0x10a0+0xd18*0x1+-0x1*-0x38a]=_0x3843b4['shadowCame'+'ra']['_nearClip'],_0x31b43d[0xdfe+-0x1*-0xdb7+-0x1bb2]=0x263*-0x1+0x1c2e+-0x19cb,this['lightCamer'+'aParamsId'][_0xb16554]['setValue'](_0x31b43d);}_0xce1f20['_cookie']&&(this['lightCooki'+'eId'][_0xb16554]['setValue'](_0xce1f20['_cookie']),this['lightShado'+'wMatrixId'][_0xb16554]['setValue'](_0x591f20['data']),this['lightCooki'+'eIntId'][_0xb16554]['setValue'](_0xce1f20['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x8bbeb2,_0x445b78,_0x1a2368){const _0x5d1d9c=_0x445b78['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x1a2368]||this['_resolveLi'+'ght'](_0x8bbeb2,_0x1a2368),this['lightInAng'+'leId'][_0x1a2368]['setValue'](_0x445b78['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x1a2368]['setValue'](_0x445b78['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x1a2368]['setValue'](_0x445b78['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x1a2368]['setValue'](_0x445b78['_colorLine'+'ar']),_0x5d1d9c['getTransla'+'tion'](_0x445b78['_position']),this['lightPos'][_0x1a2368][-0x1c1+0xf53+-0x182*0x9]=_0x445b78['_position']['x'],this['lightPos'][_0x1a2368][-0x2499+-0x3*-0xbb6+0x178*0x1]=_0x445b78['_position']['y'],this['lightPos'][_0x1a2368][0x2332+-0x1e3e+-0x4f2]=_0x445b78['_position']['z'],this['lightPosId'][_0x1a2368]['setValue'](this['lightPos'][_0x1a2368]),_0x445b78['shape']!==Vs&&this['setLTCPosi'+'tionalLigh'+'t'](_0x5d1d9c,_0x1a2368),_0x5d1d9c['getY'](_0x445b78['_direction'])['mulScalar'](-(-0x112*0x9+0x834+0x16f)),_0x445b78['_direction']['normalize'](),this['lightDir'][_0x1a2368][0x210e+0x1e5e+-0x3f6c]=_0x445b78['_direction']['x'],this['lightDir'][_0x1a2368][-0x353*-0x2+-0x63*0x45+0x140a]=_0x445b78['_direction']['y'],this['lightDir'][_0x1a2368][-0x59f*-0x2+-0x2065*-0x1+-0x4d9*0x9]=_0x445b78['_direction']['z'],this['lightDirId'][_0x1a2368]['setValue'](this['lightDir'][_0x1a2368]),_0x445b78['castShadow'+'s']){const _0x309f9c=_0x445b78['getRenderD'+'ata'](null,-0x244f+-0x1d31+0x4180);this['lightShado'+'wMapId'][_0x1a2368]['setValue'](_0x309f9c['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x1a2368]['setValue'](_0x309f9c['shadowMatr'+'ix']['data']);const _0x5aa14a=_0x445b78['_getUnifor'+'mBiasValue'+'s'](_0x309f9c),_0xddd9bf=_0x445b78['_shadowRen'+'derParams'];_0xddd9bf['length']=0x34e+0x2b5*0x2+-0x8b4,_0xddd9bf[-0x1b1b*0x1+0x1803+0x318]=_0x445b78['_shadowRes'+'olution'],_0xddd9bf[-0xa4b+0x5e8+0x464]=_0x5aa14a['normalBias'],_0xddd9bf[-0x899+0xd0*0x10+0xe1*-0x5]=_0x5aa14a['bias'],_0xddd9bf[-0x2527+-0xe09+-0x303*-0x11]=(0x1aae*-0x1+0x11e1+0x8ce)/_0x445b78['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x1a2368]['setValue'](_0xddd9bf),this['lightShado'+'wIntensity'][_0x1a2368]['setValue'](_0x445b78['shadowInte'+'nsity']);const _0x4d40e9=_0x445b78['penumbraSi'+'ze']/_0x309f9c['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x4fe2d6=_0x309f9c['shadowCame'+'ra']['_fov']*Math['PI']/(0x1*0x1315+0x2b8*0x2+-0x17d1),_0x62c572=(0x402*0x3+0x9d*0x3b+0x4*-0xc0d)/Math['tan'](_0x4fe2d6/(-0x151*-0x16+-0x1bcd+-0x127));this['lightShado'+'wSearchAre'+'aId'][_0x1a2368]['setValue'](_0x4d40e9*_0x62c572);const _0x3c2e48=_0x445b78['_shadowCam'+'eraParams'];_0x3c2e48['length']=0xa74+0x217*-0x3+-0xb*0x61,_0x3c2e48[0x4*-0xc+-0x36e+0x1*0x39e]=-0x1dd8+-0x3cb*0x5+0x30cf,_0x3c2e48[0xcf*-0x1d+-0x539+0x1cad]=_0x309f9c['shadowCame'+'ra']['_farClip'],_0x3c2e48[-0x1*-0x18e6+-0x2c2+0x2*-0xb11]=_0x309f9c['shadowCame'+'ra']['_nearClip'],_0x3c2e48[-0x10d6+-0xb7*-0x2e+-0x1009]=-0x1a9*0x11+-0x2d2+-0xa59*-0x3,this['lightCamer'+'aParamsId'][_0x1a2368]['setValue'](_0x3c2e48);}if(_0x445b78['_cookie']){if(!_0x445b78['castShadow'+'s']){const _0x546d82=Pn['evalSpotCo'+'okieMatrix'](_0x445b78);this['lightShado'+'wMatrixId'][_0x1a2368]['setValue'](_0x546d82['data']);}this['lightCooki'+'eId'][_0x1a2368]['setValue'](_0x445b78['_cookie']),this['lightCooki'+'eIntId'][_0x1a2368]['setValue'](_0x445b78['cookieInte'+'nsity']),_0x445b78['_cookieTra'+'nsform']&&(_0x445b78['_cookieTra'+'nsformUnif'+'orm'][0x515*-0x7+-0x47*-0x83+-0xc2*0x1]=_0x445b78['_cookieTra'+'nsform']['x'],_0x445b78['_cookieTra'+'nsformUnif'+'orm'][-0xe5*-0x12+0x467*0x7+0x962*-0x5]=_0x445b78['_cookieTra'+'nsform']['y'],_0x445b78['_cookieTra'+'nsformUnif'+'orm'][0x131d+-0x1cb3*-0x1+0x2fce*-0x1]=_0x445b78['_cookieTra'+'nsform']['z'],_0x445b78['_cookieTra'+'nsformUnif'+'orm'][-0x26*0xd9+-0x267c+0x46b5]=_0x445b78['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x1a2368]['setValue'](_0x445b78['_cookieTra'+'nsformUnif'+'orm']),_0x445b78['_cookieOff'+'setUniform'][0xe6d+0x1*0xf99+-0x1e06]=_0x445b78['_cookieOff'+'set']['x'],_0x445b78['_cookieOff'+'setUniform'][-0xa7f*0x1+-0x2272+0x2cf2]=_0x445b78['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x1a2368]['setValue'](_0x445b78['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x1032aa,_0x25cee5,_0x31689a){let _0x7de50d=_0x31689a;const _0x31e38b=this['device']['scope'],_0x1789e1=_0x1032aa[Ye],_0x35da07=_0x1789e1['length'];for(let _0x263376=-0x388+-0x591+0x1*0x919;_0x263376<_0x35da07;_0x263376++){const _0x17f6e9=_0x1789e1[_0x263376];_0x17f6e9['mask']&_0x25cee5&&(this['dispatchOm'+'niLight'](_0x31e38b,_0x17f6e9,_0x7de50d),_0x7de50d++);}const _0x382e36=_0x1032aa[Ke],_0x200269=_0x382e36['length'];for(let _0x3950ba=-0x151*0xc+0x9*-0x2d3+0x2937;_0x3950ba<_0x200269;_0x3950ba++){const _0x27c4b9=_0x382e36[_0x3950ba];_0x27c4b9['mask']&_0x25cee5&&(this['dispatchSp'+'otLight'](_0x31e38b,_0x27c4b9,_0x7de50d),_0x7de50d++);}}['renderForw'+'ardPrepare'+'Materials'](_0x4ad709,_0x2b558a,_0x4df46d,_0x44b40,_0x59086a,_0x39e740){const _0x5a676b=_0x4ad709['fogParams']??this['scene']['fog'],_0x349f40=_0x4ad709['shaderPara'+'ms'];_0x349f40['fog']=_0x5a676b['type'],_0x349f40['srgbRender'+'Target']=(_0x2b558a==null?void(-0x1*-0x11ea+0x1003+-0x21ed):_0x2b558a['isColorBuf'+'ferSrgb'](-0x2dd*-0x2+0x1013+-0x15cd))??!(-0x5*0x4b+-0x1*0x13e4+0x155c);const _0x5a0f2a=(_0x2743dc,_0x1f81cc,_0x8dfb3d,_0x1cf6ad)=>{xr['drawCalls']['push'](_0x2743dc),xr['shaderInst'+'ances']['push'](_0x1f81cc),xr['isNewMater'+'ial']['push'](_0x8dfb3d),xr['lightMaskC'+'hanged']['push'](_0x1cf6ad);};xr['clear']();const _0x527f64=this['device'],_0x512637=this['scene'],_0x163739=_0x512637['clusteredL'+'ightingEna'+'bled'],_0x21e37c=(_0x59086a==null?void(0x2491+0x1*0x513+-0x29a4):_0x59086a['getLightHa'+'sh'](_0x163739))??-0x49*-0x42+0xfff+-0x22d1*0x1;let _0x414004=null,_0x9f74d0,_0x59e623;const _0x464a45=_0x4df46d['length'];for(let _0x4b4d0b=0x21bb+0x1*-0x1517+0x4*-0x329;_0x4b4d0b<_0x464a45;_0x4b4d0b++){const _0x1c5baa=_0x4df46d[_0x4b4d0b];if(_0x4ad709===Pi['skipRender'+'Camera']){if(Pi['_skipRende'+'rCounter']>=Pi['skipRender'+'After'])continue;Pi['_skipRende'+'rCounter']++;}if(_0x59086a){if(_0x59086a['_skipRende'+'rCounter']>=_0x59086a['skipRender'+'After'])continue;_0x59086a['_skipRende'+'rCounter']++;}const _0x57f04a=_0x1c5baa['instancing'+'Data'];if(_0x57f04a&&_0x57f04a['count']<=-0x2e9+0x25e1*-0x1+0x28ca)continue;_0x1c5baa['ensureMate'+'rial'](_0x527f64);const _0x275ed6=_0x1c5baa['material'],_0x31aa84=_0x1c5baa['_shaderDef'+'s'],_0xefe212=_0x1c5baa['mask'];_0x275ed6&&_0x275ed6===_0x414004&&_0x31aa84!==_0x9f74d0&&(_0x414004=null),_0x275ed6!==_0x414004&&(this['_materialS'+'witches']++,_0x275ed6['_scene']=_0x512637,_0x275ed6['dirty']&&(Q['pushGpuMar'+'ker'](_0x527f64,'Node:\x20'+_0x1c5baa['node']['name']+(',\x20Material'+':\x20')+_0x275ed6['name']),_0x275ed6['updateUnif'+'orms'](_0x527f64,_0x512637),_0x275ed6['dirty']=!(0x1d3f*0x1+0x1543+-0x3281),Q['popGpuMark'+'er'](_0x527f64)));const _0x4d7c73=_0x1c5baa['getShaderI'+'nstance'](_0x39e740,_0x21e37c,_0x512637,_0x349f40,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x44b40);_0x5a0f2a(_0x1c5baa,_0x4d7c73,_0x275ed6!==_0x414004,!_0x414004||_0xefe212!==_0x59e623),_0x414004=_0x275ed6,_0x9f74d0=_0x31aa84,_0x59e623=_0xefe212;}return xr;}['renderForw'+'ardInterna'+'l'](_0x19fff4,_0x10351a,_0x16bd7b,_0x5a3f6c,_0x350133,_0x6f33ca,_0x2d3698){var _0x318237,_0x448336;const _0x4c2a22=this['device'],_0x5a811c=this['scene'],_0x506e10=-0x113f+0x7d9+0x1*0x967<<_0x5a3f6c,_0x3f43ff=_0x6f33ca?-(0x1c9c+-0x10*0x261+0x975):-0x2c1+-0x20ad+0x236f,_0x12e9f5=_0x5a811c['clusteredL'+'ightingEna'+'bled'],_0x827b1c=(_0x318237=_0x19fff4['xr'])!=null&&_0x318237['session']&&_0x19fff4['xr']['views']['list']['length']?_0x19fff4['xr']['views']['list']:null,_0x495752=_0x10351a['drawCalls']['length'];for(let _0x30d5e2=0x31*0x5+0x1a95*0x1+-0x1b8a;_0x30d5e2<_0x495752;_0x30d5e2++){const _0x1d545c=_0x10351a['drawCalls'][_0x30d5e2],_0x3453a5=_0x10351a['isNewMater'+'ial'][_0x30d5e2],_0xf01062=_0x10351a['lightMaskC'+'hanged'][_0x30d5e2],_0x52fe43=_0x10351a['shaderInst'+'ances'][_0x30d5e2],_0x1122a4=_0x1d545c['material'],_0x448b02=_0x1d545c['mask'];if(_0x52fe43['shader']['failed'])continue;if(_0x3453a5){if(_0x4c2a22['setShader'](_0x52fe43['shader'],!(-0x4b1*-0x7+-0x1*0x1952+-0x784)),_0x1122a4['setParamet'+'ers'](_0x4c2a22),_0xf01062){const _0x399d5e=this['dispatchDi'+'rectLights'](_0x16bd7b[ve],_0x448b02,_0x19fff4);_0x12e9f5||this['dispatchLo'+'calLights'](_0x16bd7b,_0x448b02,_0x399d5e);}this['alphaTestI'+'d']['setValue'](_0x1122a4['alphaTest']),_0x4c2a22['setBlendSt'+'ate'](_0x1122a4['blendState']),_0x4c2a22['setDepthSt'+'ate'](_0x1122a4['depthState']),_0x4c2a22['setAlphaTo'+'Coverage'](_0x1122a4['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x4c2a22,'Node:\x20'+_0x1d545c['node']['name']+(',\x20Material'+':\x20')+_0x1122a4['name']),this['setupCullM'+'ode'](_0x19fff4['_cullFaces'],_0x3f43ff,_0x1d545c);const _0x368e15=_0x1d545c['stencilFro'+'nt']??_0x1122a4['stencilFro'+'nt'],_0x28081f=_0x1d545c['stencilBac'+'k']??_0x1122a4['stencilBac'+'k'];_0x4c2a22['setStencil'+'State'](_0x368e15,_0x28081f),_0x1d545c['setParamet'+'ers'](_0x4c2a22,_0x506e10),_0x4c2a22['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x1d545c['id']);const _0x240f2a=_0x1d545c['mesh'];this['setVertexB'+'uffers'](_0x4c2a22,_0x240f2a),this['setMorphin'+'g'](_0x4c2a22,_0x1d545c['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x4c2a22,_0x1d545c);const _0x65587a=_0x1d545c['instancing'+'Data'];_0x65587a&&_0x4c2a22['setVertexB'+'uffer'](_0x65587a['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x1d545c,!(-0x1ab9*0x1+0xbcc+-0xeed*-0x1)),this['setupMeshU'+'niformBuff'+'ers'](_0x52fe43);const _0x5caf0c=_0x1d545c['renderStyl'+'e'],_0xfe49e9=_0x240f2a['indexBuffe'+'r'][_0x5caf0c];_0x350133==null||_0x350133(_0x1d545c,_0x30d5e2);const _0x2919ed=(_0x448336=_0x1d545c['indirectDa'+'ta'])==null?void(0x3*0x710+0x11e*-0x1+-0x1412):_0x448336['get'](_0x19fff4);if(_0x827b1c)for(let _0x1c52e9=0xc2a+-0x7*-0x11+0x3d*-0x35;_0x1c52e9<_0x827b1c['length'];_0x1c52e9++){const _0x3fd0b9=_0x827b1c[_0x1c52e9];if(_0x4c2a22['setViewpor'+'t'](_0x3fd0b9['viewport']['x'],_0x3fd0b9['viewport']['y'],_0x3fd0b9['viewport']['z'],_0x3fd0b9['viewport']['w']),_0x4c2a22['supportsUn'+'iformBuffe'+'rs']){const _0x37a01f=_0x2d3698[_0x1c52e9];_0x4c2a22['setBindGro'+'up'](Fo,_0x37a01f);}else this['setupViewU'+'niforms'](_0x3fd0b9,_0x1c52e9);const _0x45b227=_0x1c52e9===0x56f*-0x5+-0xd3a+0x2865,_0x2f9270=_0x1c52e9===_0x827b1c['length']-(0x4ed*-0x4+-0x4f7+0x1*0x18ac);_0x4c2a22['draw'](_0x240f2a['primitive'][_0x5caf0c],_0xfe49e9,_0x65587a==null?void(-0x1*0xb69+0xca0+-0x137):_0x65587a['count'],_0x2919ed,_0x45b227,_0x2f9270),this['_forwardDr'+'awCalls']++,_0x1d545c['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x4c2a22['draw'](_0x240f2a['primitive'][_0x5caf0c],_0xfe49e9,_0x65587a==null?void(-0xd84+0x2610+0xc46*-0x2):_0x65587a['count'],_0x2919ed),this['_forwardDr'+'awCalls']++,_0x1d545c['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x30d5e2<_0x495752-(-0xe*-0x97+-0x1*-0x25aa+-0x2deb)&&!_0x10351a['isNewMater'+'ial'][_0x30d5e2+(0xb6+0x11df*0x2+-0x2473)]&&_0x1122a4['setParamet'+'ers'](_0x4c2a22,_0x1d545c['parameters']),Q['popGpuMark'+'er'](_0x4c2a22);}}['renderForw'+'ard'](_0x227160,_0x3fd609,_0x12a880,_0x118d01,_0x289275,_0x198ef2,_0x397c69,_0x2cb95d,_0x5c7f9f){const _0x159ca0=de(),_0x3cb03b=this['renderForw'+'ardPrepare'+'Materials'](_0x227160,_0x3fd609,_0x12a880,_0x118d01,_0x397c69,_0x289275);this['renderForw'+'ardInterna'+'l'](_0x227160,_0x3cb03b,_0x118d01,_0x289275,_0x198ef2,_0x2cb95d,_0x5c7f9f),xr['clear'](),this['_forwardTi'+'me']+=de()-_0x159ca0;}['renderForw'+'ardLayer'](_0x3c29c4,_0x1874ae,_0x56c271,_0x165081,_0x5778c5,_0x1b0681,_0x4380c9={}){const {scene:_0x286253,device:_0x64f4e5}=this,_0x382560=_0x286253['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x3c29c4,_0x1874ae);let _0x16166b,_0x47c7db;if(_0x56c271){const _0x4ea540=de();_0x56c271['sortVisibl'+'e'](_0x3c29c4,_0x165081),this['_sortTime']+=de()-_0x4ea540;const _0x3a0f83=_0x56c271['getCulledI'+'nstances'](_0x3c29c4);_0x16166b=_0x165081?_0x3a0f83['transparen'+'t']:_0x3a0f83['opaque'],_0x286253['immediate']['onPreRende'+'rLayer'](_0x56c271,_0x16166b,_0x165081),_0x56c271['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x286253['ambientLig'+'ht'],_0x56c271['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x47c7db=_0x56c271['splitLight'+'s'];}else _0x16166b=_0x4380c9['meshInstan'+'ces'],_0x47c7db=_0x4380c9['splitLight'+'s']??hA;if(M['assert'](_0x16166b,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x382560){const _0x109ddb=_0x4380c9['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x109ddb['activate'](),_0x56c271&&!this['clustersDe'+'bugRendere'+'d']&&_0x286253['lighting']['debugLayer']===_0x56c271['id']&&(this['clustersDe'+'bugRendere'+'d']=!(0x1*0x722+-0x1a29*0x1+0x1307),Df['render'](_0x109ddb,this['scene']));}_0x286253['_activeCam'+'era']=_0x3c29c4;const _0x21d8ee=_0x3c29c4['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x21d8ee);const _0x38d809=this['setCameraU'+'niforms'](_0x3c29c4,_0x1874ae);_0x64f4e5['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x1b0681,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x38d809);const _0x477948=_0x4380c9['clearColor']??!(0xaf3+0x2*0xb01+-0xafc*0x3),_0x5246ac=_0x4380c9['clearDepth']??!(-0xc3*0x2d+-0x182*-0xe+0xd2c),_0x444635=_0x4380c9['clearStenc'+'il']??!(-0x1*-0x19b+0xea0+-0x1*0x103a);(_0x477948||_0x5246ac||_0x444635)&&this['clear'](_0x3c29c4,_0x477948,_0x5246ac,_0x444635);const _0x44b517=!!(_0x3c29c4['_flipFaces']^(_0x1874ae==null?void(0x1e20+0xb1*0x13+-0x2b43):_0x1874ae['flipY'])),_0x439c53=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x3c29c4,_0x1874ae,_0x16166b,_0x47c7db,_0x5778c5,null,_0x56c271,_0x44b517,_0x1b0681),_0x56c271&&(_0x56c271['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x439c53);}['setFogCons'+'tants'](_0x3153e0){if(_0x3153e0['type']!==On){Ki['linear'](_0x3153e0['color']);const _0x1ed4ef=this['fogColor'];_0x1ed4ef[0x1712+-0x1*0x1797+0x85]=Ki['r'],_0x1ed4ef[-0x191*0x1+-0x14*-0xd9+-0xf62]=Ki['g'],_0x1ed4ef[0x9*-0x1f1+0x1872+0x1*-0x6f7]=Ki['b'],this['fogColorId']['setValue'](_0x1ed4ef),_0x3153e0['type']===VT?(this['fogStartId']['setValue'](_0x3153e0['start']),this['fogEndId']['setValue'](_0x3153e0['end'])):this['fogDensity'+'Id']['setValue'](_0x3153e0['density']);}}['setSceneCo'+'nstants'](){const _0x4bc237=this['scene'];this['dispatchGl'+'obalLights'](_0x4bc237);const _0x1c10cb=this['device'];this['_screenSiz'+'e'][0x124b+0x1*0x168c+0x29*-0xff]=_0x1c10cb['width'],this['_screenSiz'+'e'][0x3*-0xbfb+0x8c6*-0x1+0x2cb8]=_0x1c10cb['height'],this['_screenSiz'+'e'][-0x93c+-0x48c*-0x7+-0x31*0x76]=(0xd36*0x1+-0x645+-0x6f0)/_0x1c10cb['width'],this['_screenSiz'+'e'][0x12fc+-0x1030+-0x2c9]=(-0x2673+-0x2111+0x4785)/_0x1c10cb['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0xcfb6a0,_0x30ef81){const _0x269a4f=this['scene'];if(_0xcfb6a0['reset'](),_0x269a4f['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x53a380,cookiesEnabled:_0x4e580d}=_0x269a4f['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0xcfb6a0,_0x53a380,_0x4e580d,this['lights'],this['localLight'+'s']),_0xcfb6a0['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0xcfb6a0,this['localLight'+'s']);let _0x2a0ffb=-0x3*0xb74+-0x18d8+0x3b34,_0x896636=!(0x1d99+-0x4*-0x253+0x26e5*-0x1),_0x1a7b99=null;const _0xbee9d1=_0x30ef81['_renderAct'+'ions'];for(let _0x30bf51=_0x2a0ffb;_0x30bf51<_0xbee9d1['length'];_0x30bf51++){const _0x4f153d=_0xbee9d1[_0x30bf51],{layer:_0x4644bc,camera:_0x53c1c6}=_0x4f153d;if(_0x4f153d['useCameraP'+'asses'])M['call'](()=>{_0x53c1c6['postEffect'+'s']['effects']['length']>0x2*0x338+0x14da+-0x1b4a*0x1&&M['warnOnce']('Camera\x20\x27'+_0x53c1c6['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x53c1c6['camera']['renderPass'+'es']['forEach'](_0x17d47f=>{_0xcfb6a0['addRenderP'+'ass'](_0x17d47f);});else{const _0x546cc7=_0x4644bc['id']===os,_0x20648b=_0x546cc7&&(_0x53c1c6['renderScen'+'eColorMap']||_0x53c1c6['renderScen'+'eDepthMap']);_0x896636&&(_0x896636=!(0xb5*0x12+0xafb*0x3+-0x2daa),_0x2a0ffb=_0x30bf51,_0x1a7b99=_0x4f153d['renderTarg'+'et']);const _0xeb580b=_0xbee9d1[_0x30bf51+(0x132d*0x1+-0x11*-0x22a+-0x37f6)],_0x5f022b=(_0xeb580b?!_0xeb580b['useCameraP'+'asses']&&_0xeb580b['layer']['id']===os:!(-0x2*-0x10a+-0x1888+0x1675))&&(_0x53c1c6['renderScen'+'eColorMap']||_0x53c1c6['renderScen'+'eDepthMap']),_0x2155b8=_0xeb580b?_0xeb580b['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0xeb580b['camera']['camera']):!(-0x500+0x1*-0x134f+0x2*0xc28);if(!_0xeb580b||_0xeb580b['renderTarg'+'et']!==_0x1a7b99||_0x2155b8||_0x5f022b||_0x20648b){if(_0x546cc7&&_0x2a0ffb===_0x30bf51||this['addMainRen'+'derPass'](_0xcfb6a0,_0x30ef81,_0x1a7b99,_0x2a0ffb,_0x30bf51),_0x546cc7){if(_0x53c1c6['renderScen'+'eColorMap']){const _0x23775a=_0x53c1c6['camera']['renderPass'+'ColorGrab'];_0x23775a['source']=_0x53c1c6['renderTarg'+'et'],_0xcfb6a0['addRenderP'+'ass'](_0x23775a);}_0x53c1c6['renderScen'+'eDepthMap']&&_0xcfb6a0['addRenderP'+'ass'](_0x53c1c6['camera']['renderPass'+'DepthGrab']);}if(_0x4f153d['triggerPos'+'tprocess']&&(_0x53c1c6!=null&&_0x53c1c6['onPostproc'+'essing'])){const _0x4893e8=new lA(this['device'],this,_0x4f153d);_0xcfb6a0['addRenderP'+'ass'](_0x4893e8);}_0x896636=!(-0x1109*0x1+-0xe4*0x2b+0x3755);}}}}['addMainRen'+'derPass'](_0x113813,_0x4db940,_0x4e733d,_0x380c96,_0x18fa71){const _0x46ad5a=new oA(this['device'],_0x4db940,this['scene'],this);_0x46ad5a['init'](_0x4e733d);const _0x1f3191=_0x4db940['_renderAct'+'ions'];for(let _0x2d4593=_0x380c96;_0x2d4593<=_0x18fa71;_0x2d4593++)_0x46ad5a['addRenderA'+'ction'](_0x1f3191[_0x2d4593]);_0x113813['addRenderP'+'ass'](_0x46ad5a);}['update'](_0x533360){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x533360),this['collectLig'+'hts'](_0x533360),this['beginFrame'](_0x533360),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x533360),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Pi,'skipRender'+'Camera',null),h(Pi,'_skipRende'+'rCounter',-0x1364*0x2+0xe02+0x18c6),h(Pi,'skipRender'+'After',0x134*-0x4+-0x35f*-0x5+-0xc0b);let Kh=Pi,Nd=-0x41b*0x1+-0x26*0x103+0x2a8d;const Xn=[],Bl=new Set();function fA(_0x2ff059,_0x2d1d4e){return _0x2ff059['drawOrder']-_0x2d1d4e['drawOrder'];}function uA(_0x43d2e9,_0x8f7a95){const _0x449b99=_0x43d2e9['_sortKeyFo'+'rward'],_0x5457b4=_0x8f7a95['_sortKeyFo'+'rward'];return _0x449b99===_0x5457b4?_0x8f7a95['mesh']['id']-_0x43d2e9['mesh']['id']:_0x5457b4-_0x449b99;}function mA(_0x47fe5a,_0x2285fe){return _0x2285fe['_sortKeyDy'+'namic']-_0x47fe5a['_sortKeyDy'+'namic'];}function pA(_0x16f8f7,_0x1925e4){return _0x16f8f7['_sortKeyDy'+'namic']-_0x1925e4['_sortKeyDy'+'namic'];}const _A=[null,fA,uA,mA,pA];class gA{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Dr{constructor(_0x1028cc={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x96e+0x1*-0x2597+0x1*0x2f05)),h(this,'requiresLi'+'ghtCube',!(-0x1133+-0x1ca2+0x2dd6)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(0x15b*-0xd+0xd70+0x430)),(_0x1028cc['id']!==void(-0xeec*0x2+0x1700+0x6d8)?(this['id']=_0x1028cc['id'],Nd=Math['max'](this['id']+(-0xd*0x2a5+0x6ac+0x1bb6),Nd)):this['id']=Nd++,this['name']=_0x1028cc['name'],this['_enabled']=_0x1028cc['enabled']??!(-0x23da+-0x23d0+0x47aa),this['_refCounte'+'r']=this['_enabled']?-0x1ebb*-0x1+0x667+-0x2521:-0xc84+-0x1*-0xe79+-0x1f5,this['opaqueSort'+'Mode']=_0x1028cc['opaqueSort'+'Mode']??aw,this['transparen'+'tSortMode']=_0x1028cc['transparen'+'tSortMode']??Mp,_0x1028cc['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x1028cc['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x1028cc['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x1028cc['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x1028cc['clearStenc'+'ilBuffer'],this['onEnable']=_0x1028cc['onEnable'],this['onDisable']=_0x1028cc['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=0x142f+0x3b7*-0x1+-0x1078,this['_lightHash'+'Dirty']=!(0x5*-0x3af+0x20d7+0x1*-0xe6b),this['_lightIdHa'+'sh']=0x743+0x1163+-0xa*0x277,this['_lightIdHa'+'shDirty']=!(0x1821+-0x1*-0x22b5+0x3ad5*-0x1),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=0x12f7+-0x24cd*0x1+0x2f9*0x6,this['_renderTim'+'e']=-0x257*0x1+-0x7ac*0x4+0x5f*0x59,this['_forwardDr'+'awCalls']=0xcfb*0x3+0x1*0x1e9+-0x28da,this['_shadowDra'+'wCalls']=0x263c+0x18de+0x2*-0x1f8d,this['_shaderVer'+'sion']=-(0x18eb+-0x1416+-0x4d4));}set['enabled'](_0x2cf9e8){_0x2cf9e8!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(0x1753+0x92f+-0x2082),this['_enabled']=_0x2cf9e8,_0x2cf9e8?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x343bb7){this['_clearColo'+'rBuffer']=_0x343bb7,this['_dirtyComp'+'osition']=!(0xa0d+0xfd4*-0x1+0x5c7);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x397b99){this['_clearDept'+'hBuffer']=_0x397b99,this['_dirtyComp'+'osition']=!(0xbdd*0x3+-0x715+-0x1*0x1c82);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x4a9845){this['_clearSten'+'cilBuffer']=_0x4a9845,this['_dirtyComp'+'osition']=!(0x67*0x19+0x1b1a*-0x1+0x110b);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>0x21c7+0x1f7d+-0x4144;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0x1*-0x2621+-0xb0a+-0x1b17*0x1&&(this['_enabled']=!(0x7c3+-0x70c+0xb7*-0x1),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===-0x2541+-0xb30+0x3072)this['_enabled']=!(0xed7+-0x42*0x71+-0x726*-0x2),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===-0x22b6+0x1*0x2615+-0x35f){M['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x33013e,_0xa645d6){const _0x565f50=this['meshInstan'+'ces'],_0x550730=this['meshInstan'+'cesSet'];for(let _0x57f813=0xb32*0x1+-0x1b29+0xff7;_0x57f813<_0x33013e['length'];_0x57f813++){const _0xc0f43e=_0x33013e[_0x57f813];_0x550730['has'](_0xc0f43e)||(_0x565f50['push'](_0xc0f43e),_0x550730['add'](_0xc0f43e),Bl['add'](_0xc0f43e['material']));}if(_0xa645d6||this['addShadowC'+'asters'](_0x33013e),Bl['size']>0xcd6*-0x2+-0x95*-0x40+0x6*-0x1ee){const _0x488727=this['_shaderVer'+'sion'];Bl['forEach'](_0x1f3827=>{_0x488727>=-0xe53+0x1ca1+-0xe4e&&_0x1f3827['_shaderVer'+'sion']!==_0x488727&&(_0x1f3827['getShaderV'+'ariant']!==ua['prototype']['getShaderV'+'ariant']&&_0x1f3827['clearVaria'+'nts'](),_0x1f3827['_shaderVer'+'sion']=_0x488727);}),Bl['clear']();}}['removeMesh'+'Instances'](_0x2c5648,_0x2f88c7){const _0x3fe684=this['meshInstan'+'ces'],_0x1c5323=this['meshInstan'+'cesSet'];for(let _0x50b70f=0xc7d+0x2*-0x1271+-0x5*-0x4e1;_0x50b70f<_0x2c5648['length'];_0x50b70f++){const _0x5f0626=_0x2c5648[_0x50b70f];if(_0x1c5323['has'](_0x5f0626)){_0x1c5323['delete'](_0x5f0626);const _0x216345=_0x3fe684['indexOf'](_0x5f0626);_0x216345>=0x29*0x29+-0x32f*0xb+0xe3a*0x2&&_0x3fe684['splice'](_0x216345,0x1eb+-0x1*0x192a+-0x5d0*-0x4);}}_0x2f88c7||this['removeShad'+'owCasters'](_0x2c5648);}['addShadowC'+'asters'](_0x4dd2ef){const _0x296656=this['shadowCast'+'ers'],_0x5a8c69=this['shadowCast'+'ersSet'];for(let _0x49f348=-0x1*0xed5+-0x9d*-0x31+-0x1e7*0x8;_0x49f348<_0x4dd2ef['length'];_0x49f348++){const _0x1b3a46=_0x4dd2ef[_0x49f348];_0x1b3a46['castShadow']&&!_0x5a8c69['has'](_0x1b3a46)&&(_0x5a8c69['add'](_0x1b3a46),_0x296656['push'](_0x1b3a46));}}['removeShad'+'owCasters'](_0x5a14f7){const _0xb4367f=this['shadowCast'+'ers'],_0x15b419=this['shadowCast'+'ersSet'];for(let _0x2ac9ec=0x16b0+0x2f6*0x2+0x1c9c*-0x1;_0x2ac9ec<_0x5a14f7['length'];_0x2ac9ec++){const _0x12c9ec=_0x5a14f7[_0x2ac9ec];if(_0x15b419['has'](_0x12c9ec)){_0x15b419['delete'](_0x12c9ec);const _0x266552=_0xb4367f['indexOf'](_0x12c9ec);_0x266552>=-0x2597*-0x1+0x16fd+-0x3c94&&_0xb4367f['splice'](_0x266552,-0x7e2+-0x10a+-0x5*-0x1c9);}}}['clearMeshI'+'nstances'](_0x284da4=!(0x1*0x239a+-0xc0f+-0x178a)){this['meshInstan'+'ces']['length']=0x124*-0x16+0x2*-0x1172+0x3bfc,this['meshInstan'+'cesSet']['clear'](),_0x284da4||(this['shadowCast'+'ers']['length']=-0x18c*0xb+-0x1a92+-0x31d*-0xe,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(0xc4d+0x24ea+-0x3137),this['_lightIdHa'+'shDirty']=!(-0x415+0xb2a+0x715*-0x1),this['_splitLigh'+'tsDirty']=!(-0x208+-0x1e2d+0x2035);}['hasLight'](_0x1518f8){return this['_lightsSet']['has'](_0x1518f8);}['addLight'](_0x4d766a){const _0x5a9376=_0x4d766a['light'];this['_lightsSet']['has'](_0x5a9376)||(this['_lightsSet']['add'](_0x5a9376),this['_lights']['push'](_0x5a9376),this['markLights'+'Dirty']()),_0x5a9376['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0x5a9376);}['removeLigh'+'t'](_0x2ca8fc){const _0x1841f9=_0x2ca8fc['light'];this['_lightsSet']['has'](_0x1841f9)&&(this['_lightsSet']['delete'](_0x1841f9),this['_lights']['splice'](this['_lights']['indexOf'](_0x1841f9),-0x1bd*-0x16+0x19eb+-0x4028),this['markLights'+'Dirty']()),_0x1841f9['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x1841f9);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x4a3d67=>_0x4a3d67['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=-0x6*-0x9d+0x18b1+-0x1c5f,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0xf4d+-0x11*-0x1e5+0x1*-0x10e7);const _0x31872b=this['_splitLigh'+'ts'];for(let _0x31763c=0x119a+-0x14d6+0x33c;_0x31763c<_0x31872b['length'];_0x31763c++)_0x31872b[_0x31763c]['length']=0x148e+-0x1dc8+0x93a;const _0xa87b6=this['_lights'];for(let _0x202f85=0x69*-0x25+-0x1a78+0x29a5;_0x202f85<_0xa87b6['length'];_0x202f85++){const _0x447fb9=_0xa87b6[_0x202f85];_0x447fb9['enabled']&&_0x31872b[_0x447fb9['_type']]['push'](_0x447fb9);}for(let _0x4b6b16=0x3*0x591+0x78b+-0x183e;_0x4b6b16<_0x31872b['length'];_0x4b6b16++)_0x31872b[_0x4b6b16]['sort']((_0x13f85c,_0x1b56bc)=>_0x13f85c['key']-_0x1b56bc['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x34342a,_0x39b7b5,_0x23ce76){let _0x458439=0x1056+-0x644+-0x2*0x509;const _0x435107=this['_lights'];for(let _0x3eea82=0x1*0x1231+-0x1f2d+0xcfc;_0x3eea82<_0x435107['length'];_0x3eea82++){const _0x59d0ef=_0x435107[_0x3eea82]['type']!==ve;(_0x34342a&&_0x59d0ef||_0x39b7b5&&!_0x59d0ef)&&Xn['push'](_0x23ce76?_0x435107[_0x3eea82]['id']:_0x435107[_0x3eea82]['key']);}return Xn['length']>-0x1999+-0x2064+0x39fd&&(Xn['sort'](),_0x458439=XS(Xn),Xn['length']=0x1616+0x1*-0x190d+0x2f7*0x1),_0x458439;}['getLightHa'+'sh'](_0x40ebcd){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(-0x232a+0x253d+-0x212),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x40ebcd,!(-0x1fcf*0x1+0xdef+0x58*0x34),!(0xc66+-0xcd7+-0x1*-0x72))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(-0x1*-0x8af+0x1*0x1cab+0x3*-0xc73),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(0x709*-0x1+-0x7ee+0xef7),!(0x88f+0x22e6+-0x2b74),!(-0x1a84+0xe*0x26e+-0x8*0xf0))),this['_lightIdHa'+'sh'];}['addCamera'](_0x194fb6){this['camerasSet']['has'](_0x194fb6['camera'])||(this['camerasSet']['add'](_0x194fb6['camera']),this['cameras']['push'](_0x194fb6),this['_dirtyComp'+'osition']=!(0x1*-0xf53+-0x5*0xd9+-0x4*-0x4e4));}['removeCame'+'ra'](_0x1d169e){if(this['camerasSet']['has'](_0x1d169e['camera'])){this['camerasSet']['delete'](_0x1d169e['camera']);const _0x53ec6c=this['cameras']['indexOf'](_0x1d169e);this['cameras']['splice'](_0x53ec6c,-0x1bca*-0x1+0x1975+-0x1*0x353e),this['_dirtyComp'+'osition']=!(0x1faf+0x3a*-0x8b+-0x31);}}['clearCamer'+'as'](){this['cameras']['length']=0x1eb9+-0x2b7*0xe+-0x175*-0x5,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(-0xcdb*0x3+0x1*0x1646+0x104b);}['_calculate'+'SortDistan'+'ces'](_0xef6a34,_0x69934e,_0x1b3f8e){const _0x1097fb=_0xef6a34['length'],{x:_0x53fea4,y:_0x69a09d,z:_0x7ee4fa}=_0x69934e,{x:_0x2423f1,y:_0x528f08,z:_0x9947ca}=_0x1b3f8e;for(let _0x21b6f3=0x17e*-0xe+0x9c2*0x1+0x3*0x3b6;_0x21b6f3<_0x1097fb;_0x21b6f3++){const _0x1ec61d=_0xef6a34[_0x21b6f3];let _0x257d26;if(_0x1ec61d['calculateS'+'ortDistanc'+'e'])_0x257d26=_0x1ec61d['calculateS'+'ortDistanc'+'e'](_0x1ec61d,_0x69934e,_0x1b3f8e);else{const _0x32739f=_0x1ec61d['aabb']['center'];_0x257d26=(_0x32739f['x']-_0x53fea4)*_0x2423f1+(_0x32739f['y']-_0x69a09d)*_0x528f08+(_0x32739f['z']-_0x7ee4fa)*_0x9947ca;}const _0x44217c=_0x1ec61d['_drawBucke'+'t']*(0x5a27d2d4+-0x76b2cea3*0x1+0x1*0x5825c5cf);_0x1ec61d['_sortKeyDy'+'namic']=_0x44217c+_0x257d26;}}['getCulledI'+'nstances'](_0x516502){let _0x54fc4a=this['_visibleIn'+'stances']['get'](_0x516502);return _0x54fc4a||(_0x54fc4a=new gA(),this['_visibleIn'+'stances']['set'](_0x516502,_0x54fc4a)),_0x54fc4a;}['sortVisibl'+'e'](_0x2ed93c,_0x4d3b17){const _0xc2098a=_0x4d3b17?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0xc2098a===_h)return;const _0xb6e83a=this['getCulledI'+'nstances'](_0x2ed93c),_0x160ac4=_0x4d3b17?_0xb6e83a['transparen'+'t']:_0xb6e83a['opaque'],_0x2cad91=_0x2ed93c['node'];if(_0xc2098a===ow){const _0x2ceb28=_0x2cad91['getPositio'+'n'](),_0x346485=_0x2cad91['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x160ac4,_0x160ac4['length'],_0x2ceb28,_0x346485),this['customSort'+'Callback']&&_0x160ac4['sort'](this['customSort'+'Callback']);}else{if(_0xc2098a===Mp||_0xc2098a===nw){const _0x146eb5=_0x2cad91['getPositio'+'n'](),_0x4b6af1=_0x2cad91['forward'];this['_calculate'+'SortDistan'+'ces'](_0x160ac4,_0x146eb5,_0x4b6af1);}_0x160ac4['sort'](_A[_0xc2098a]);}}}const SA=(_0x537d5d,_0x3913dd)=>_0x537d5d['priority']-_0x3913dd['priority'],Go=_0x1c643e=>_0x1c643e['sort'](SA);class d_ extends pe{constructor(_0x4d9af0='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0x1820+-0x1*0x85d+-0x1*-0x207e)),(this['name']=_0x4d9af0,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x49866c=>_0x49866c['destroy']()),this['_renderAct'+'ions']['length']=0x793+-0x1*0x1909+0x1e*0x95;}['markDirty'](){this['_dirty']=!(-0x210f*-0x1+-0x14+-0x20fb*0x1);}['_update'](){const _0x326ecc=this['layerList']['length'];if(!this['_dirty']){for(let _0x259b83=-0x181b+-0xb*-0x1fd+0x2*0x11e;_0x259b83<_0x326ecc;_0x259b83++)if(this['layerList'][_0x259b83]['_dirtyComp'+'osition']){this['_dirty']=!(-0x2253+-0x1*-0x136+0x211d);break;}}if(this['_dirty']){this['_dirty']=!(0x1*-0x1ad7+0x10b4+-0x3b*-0x2c),this['cameras']['length']=-0xbbd+0x219c+-0x15df;for(let _0x180ac4=0x4e6+-0x1f*0x7b+-0x3*-0x355;_0x180ac4<_0x326ecc;_0x180ac4++){const _0x5c24c8=this['layerList'][_0x180ac4];_0x5c24c8['_dirtyComp'+'osition']=!(-0x1cf*0x1+-0x1*-0x1c3d+-0x1a6d);for(let _0x4ac51e=-0x2e*-0x54+-0x1160+-0x49*-0x8;_0x4ac51e<_0x5c24c8['cameras']['length'];_0x4ac51e++){const _0x372f08=_0x5c24c8['cameras'][_0x4ac51e];this['cameras']['indexOf'](_0x372f08)<-0x1def+-0x552+0x2341&&this['cameras']['push'](_0x372f08);}}this['cameras']['length']>0x2b*0x31+0x1*0x1337+-0x1b71&&Go(this['cameras']);let _0x2e5fe=-0xada*0x3+0x12fe*0x2+-0x2b7*0x2;this['destroyRen'+'derActions']();for(let _0x4054a2=-0x889+0x18*0xab+0x65*-0x13;_0x4054a2<this['cameras']['length'];_0x4054a2++){const _0x4250ed=this['cameras'][_0x4054a2];if(_0x4250ed['camera']['renderPass'+'es']['length']>-0x13f8+-0x163*-0x5+0xd09){this['addDummyRe'+'nderAction'](_0x2e5fe,_0x4250ed),_0x2e5fe++;continue;}let _0x265170=!(0x4*-0x90f+-0x3d*-0x14+0x8*0x3ef);const _0x56e4ad=_0x2e5fe;let _0x2e526b=null,_0x3ef302=!(-0x5*0x41d+-0x15a9+0x2a3b);for(let _0x1e26fe=0x1*-0x2489+0x18f+-0x1*-0x22fa;_0x1e26fe<_0x326ecc;_0x1e26fe++){const _0xc03526=this['layerList'][_0x1e26fe];if(_0xc03526['enabled']&&this['subLayerEn'+'abled'][_0x1e26fe]&&_0xc03526['cameras']['length']>0x2212+0x5*-0x25d+-0x1641&&_0x4250ed['layers']['indexOf'](_0xc03526['id'])>=-0x3e7+-0x430+0x817*0x1){!_0x3ef302&&_0xc03526['id']===_0x4250ed['disablePos'+'tEffectsLa'+'yer']&&(_0x3ef302=!(-0x7*0x45b+-0x36b*0x1+0x9b*0x38),_0x2e526b&&(_0x2e526b['triggerPos'+'tprocess']=!(0x851+-0x3d1+-0x480)));const _0x158ff8=this['subLayerLi'+'st'][_0x1e26fe];_0x2e526b=this['addRenderA'+'ction'](_0x2e5fe,_0xc03526,_0x158ff8,_0x4250ed,_0x265170,_0x3ef302),_0x2e5fe++,_0x265170=!(-0x1bf*-0x11+-0x4d3+0x1*-0x18db);}}_0x56e4ad<_0x2e5fe&&(_0x2e526b['lastCamera'+'Use']=!(0x4db*0x1+0xb2b*0x1+-0x803*0x2)),!_0x3ef302&&_0x2e526b&&(_0x2e526b['triggerPos'+'tprocess']=!(0x9*0x3be+0x2*-0x8fb+0x2*-0x7dc)),_0x4250ed['renderTarg'+'et']&&_0x4250ed['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x56e4ad-(-0x3de+0x760+0x45*-0xd),_0x4250ed);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x21c56d){M['assert'](this['_renderAct'+'ions']['length']===_0x21c56d);const _0x17ac08=new Oy();return this['_renderAct'+'ions']['push'](_0x17ac08),_0x17ac08;}['addDummyRe'+'nderAction'](_0x303bf6,_0x4eb0d1){const _0x40aca6=this['getNextRen'+'derAction'](_0x303bf6);_0x40aca6['camera']=_0x4eb0d1,_0x40aca6['useCameraP'+'asses']=!(0x526*0x7+-0x22ae+-0x3a*0x6);}['addRenderA'+'ction'](_0x5244c6,_0xaeef2c,_0x1f31ec,_0x5c206d,_0x4a49bb,_0x136d18){let _0xcff2a4=_0xaeef2c['id']!==os?_0x5c206d['renderTarg'+'et']:null,_0x294c34=!(-0xc18+-0x1*-0x1d6b+-0x1152);const _0x6430ae=this['_renderAct'+'ions'];for(let _0x4d739c=_0x5244c6-(0x1bee+-0x4ca+-0x1723*0x1);_0x4d739c>=0xf76+-0x1d6b+-0x4a7*-0x3;_0x4d739c--)if(_0x6430ae[_0x4d739c]['camera']===_0x5c206d&&_0x6430ae[_0x4d739c]['renderTarg'+'et']===_0xcff2a4){_0x294c34=!(-0x36b*0x4+-0x255e+0x330a);break;}_0x136d18&&_0x5c206d['postEffect'+'sEnabled']&&(_0xcff2a4=null);const _0x1432bf=this['getNextRen'+'derAction'](_0x5244c6);_0x1432bf['triggerPos'+'tprocess']=!(-0x2142+-0x37e+-0x1*-0x24c1),_0x1432bf['layer']=_0xaeef2c,_0x1432bf['transparen'+'t']=_0x1f31ec,_0x1432bf['camera']=_0x5c206d,_0x1432bf['renderTarg'+'et']=_0xcff2a4,_0x1432bf['firstCamer'+'aUse']=_0x4a49bb,_0x1432bf['lastCamera'+'Use']=!(-0xdaf+-0xf*-0x10a+-0x1b*0x12);const _0x90a93b=_0x4a49bb||!_0x294c34,_0x49a79e=_0xaeef2c['clearColor'+'Buffer']||_0xaeef2c['clearDepth'+'Buffer']||_0xaeef2c['clearStenc'+'ilBuffer'];return(_0x90a93b||_0x49a79e)&&_0x1432bf['setupClear'+'s'](_0x90a93b?_0x5c206d:void(-0x1edd+0xb9+-0xc*-0x283),_0xaeef2c),_0x1432bf;}['propagateR'+'enderTarge'+'t'](_0xac7f3a,_0x458f03){for(let _0x53a7ab=_0xac7f3a;_0x53a7ab>=-0x40e*-0x7+0x17b*-0x14+-0x9d*-0x2;_0x53a7ab--){const _0x229fa7=this['_renderAct'+'ions'][_0x53a7ab],_0x3aa844=_0x229fa7['layer'];if(_0x229fa7['renderTarg'+'et']&&_0x3aa844['id']!==os)break;if(_0x3aa844['id']===os)continue;if(_0x229fa7['useCameraP'+'asses'])break;const _0x294458=_0x229fa7==null?void(-0x45f+-0x1*0x2197+0x25f6):_0x229fa7['camera']['camera'];if(_0x294458&&(!_0x458f03['camera']['rect']['equals'](_0x294458['rect'])||!_0x458f03['camera']['scissorRec'+'t']['equals'](_0x294458['scissorRec'+'t'])))break;_0x229fa7['renderTarg'+'et']=_0x458f03['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(ni['get'](gl)){M['trace'](gl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x464426=-0x262a+-0x468*-0x4+-0x148a*-0x1;_0x464426<this['_renderAct'+'ions']['length'];_0x464426++){const _0x1ad7dd=this['_renderAct'+'ions'][_0x464426],_0x36dd18=_0x1ad7dd['camera'];if(_0x1ad7dd['useCameraP'+'asses'])M['trace'](gl,_0x464426+('CustomPass'+'es\x20Cam:\x20')+(_0x36dd18?_0x36dd18['entity']['name']:'-'));else{const _0x538c85=_0x1ad7dd['layer'],_0x5486e1=_0x538c85['enabled']&&this['isEnabled'](_0x538c85,_0x1ad7dd['transparen'+'t']),_0x4060c0=(_0x1ad7dd['clearColor']?'Color\x20':'.....\x20')+(_0x1ad7dd['clearDepth']?'Depth\x20':'.....\x20')+(_0x1ad7dd['clearStenc'+'il']?'Stencil':'.......');M['trace'](gl,_0x464426+('\x20Cam:\x20'+(_0x36dd18?_0x36dd18['entity']['name']:'-'))['padEnd'](0x1694+-0x643*-0x2+-0x2304,'\x20')+('\x20Lay:\x20'+_0x538c85['name'])['padEnd'](-0x174+0xc15+0xa8b*-0x1,'\x20')+(_0x1ad7dd['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x5486e1?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x1ad7dd['renderTarg'+'et']?_0x1ad7dd['renderTarg'+'et']['name']:'-'))['padEnd'](-0x2186+0xd67+-0x1d7*-0xb,'\x20')+'\x20Clear:\x20'+_0x4060c0+(_0x1ad7dd['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x1ad7dd['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x1ad7dd['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x376894){const _0x1042c3=this['layerIdMap']['get'](_0x376894['id'])===_0x376894;return M['assert'](!_0x1042c3,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x376894['name']),_0x1042c3;}['_isSublaye'+'rAdded'](_0x588731,_0x1f5835){return(_0x1f5835?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x588731)!==void(-0x15eb+0x2288*0x1+-0xc9d*0x1)?(M['error']('Sublayer\x20'+_0x588731['name']+(',\x20transpar'+'ent:\x20')+_0x1f5835+('\x20is\x20alread'+'y\x20added.')),!(-0x33c+0x7*0x67+-0x1*-0x6b)):!(-0x217*-0xd+0x3*0xccf+-0x4197);}['push'](_0x4dc93d){this['_isLayerAd'+'ded'](_0x4dc93d)||(this['layerList']['push'](_0x4dc93d),this['layerList']['push'](_0x4dc93d),this['_opaqueOrd'+'er'][_0x4dc93d['id']]=this['subLayerLi'+'st']['push'](!(0x1fd2*0x1+-0x3*0xa12+-0x19b))-(-0x182f+0x184e+-0x1e),this['_transpare'+'ntOrder'][_0x4dc93d['id']]=this['subLayerLi'+'st']['push'](!(-0x1*-0x1afe+-0x242a+0x92c))-(-0x46*0x89+-0x179*0x5+0x2cd4),this['subLayerEn'+'abled']['push'](!(-0xa7*-0x11+-0x2658+0x1*0x1b41)),this['subLayerEn'+'abled']['push'](!(-0x407*0x3+-0x1ef4+0x2b09)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1d*0x65+-0x1c48+0x27b9),this['fire']('add',_0x4dc93d));}['insert'](_0x3dae69,_0x2a30d0){if(this['_isLayerAd'+'ded'](_0x3dae69))return;this['layerList']['splice'](_0x2a30d0,0x2b3*-0xa+0x1b7+0x1947,_0x3dae69,_0x3dae69),this['subLayerLi'+'st']['splice'](_0x2a30d0,0x1abc+0x2042+0x2*-0x1d7f,!(-0xb*0x14+0x55f+-0x482),!(0x48a+-0x2486+0x4*0x7ff));const _0xa1def4=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x2a30d0,_0xa1def4-(-0x2497+-0x11fc*-0x1+0x129c)),this['_updateTra'+'nsparentOr'+'der'](_0x2a30d0,_0xa1def4-(0x19e8*-0x1+0xc90+-0xd59*-0x1)),this['subLayerEn'+'abled']['splice'](_0x2a30d0,-0x1ee5+-0x5ed*-0x1+0x18f8,!(-0xbe1+0x12f2+-0xc9*0x9),!(0x1c7f*0x1+-0x8f*0x23+-0x8f2)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1*-0x16f7+0x1a33+0xcb*-0x3e),this['fire']('add',_0x3dae69);}['remove'](_0x347969){let _0x5c9958=this['layerList']['indexOf'](_0x347969);for(delete this['_opaqueOrd'+'er'][_0x5c9958],delete this['_transpare'+'ntOrder'][_0x5c9958];_0x5c9958>=0x1db5+0xb7b*-0x1+-0x123a;)this['layerList']['splice'](_0x5c9958,-0x220f+-0x20e*-0x4+0xcec*0x2),this['subLayerLi'+'st']['splice'](_0x5c9958,-0x1b69+0x1*-0x1d1e+0x3888),this['subLayerEn'+'abled']['splice'](_0x5c9958,-0x885*0x3+0x1b87+-0x1f7*0x1),_0x5c9958=this['layerList']['indexOf'](_0x347969),this['_dirty']=!(-0x3*-0x985+0x547*0x3+0x3b3*-0xc),this['fire']('remove',_0x347969);const _0x753bbe=this['layerList']['length'];this['_updateOpa'+'queOrder'](-0x1737+-0x5*-0xe9+0x12aa,_0x753bbe-(0x21be+-0x1dc6+-0x3f7)),this['_updateTra'+'nsparentOr'+'der'](0x82a+-0x1b9e+0x1374,_0x753bbe-(0x262d+0x166c+-0x3c98)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x23fe89){this['_isSublaye'+'rAdded'](_0x23fe89,!(-0x4f*0x33+-0x1da3+-0x1*-0x2d61))||(this['layerList']['push'](_0x23fe89),this['_opaqueOrd'+'er'][_0x23fe89['id']]=this['subLayerLi'+'st']['push'](!(0x25c3+-0x1005+-0x15bd))-(0x1cab+0x1*-0x118d+-0xb1d*0x1),this['subLayerEn'+'abled']['push'](!(-0x3*0x28d+-0x1dab+0x2552)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x6*0x51+-0x244a+-0x2*-0x1132),this['fire']('add',_0x23fe89));}['insertOpaq'+'ue'](_0x3fc454,_0x5ee594){if(this['_isSublaye'+'rAdded'](_0x3fc454,!(0x1df5*-0x1+-0x18*-0x14+0x1c16)))return;this['layerList']['splice'](_0x5ee594,0x2702*-0x1+0xcf2+0x1a10,_0x3fc454),this['subLayerLi'+'st']['splice'](_0x5ee594,0x1a3*-0x3+0x71+-0x1*-0x478,!(-0x1*-0x82f+-0x11bd+0x98f));const _0x3ef763=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x5ee594,_0x3ef763-(0x99*0x1+-0x3*0x4fb+-0xe59*-0x1)),this['subLayerEn'+'abled']['splice'](_0x5ee594,0xb*-0x373+-0x1d89*-0x1+-0x868*-0x1,!(-0x1673+0x2097+-0xa24)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1b40+0x48c+-0x1fcc),this['fire']('add',_0x3fc454);}['removeOpaq'+'ue'](_0x51158d){for(let _0x2331c2=0x7a*0x2f+-0x2*0x85f+-0x5a8,_0x3b0fa6=this['layerList']['length'];_0x2331c2<_0x3b0fa6;_0x2331c2++)if(this['layerList'][_0x2331c2]===_0x51158d&&!this['subLayerLi'+'st'][_0x2331c2]){this['layerList']['splice'](_0x2331c2,0x54d*0x1+0xfd*0x11+-0x1619),this['subLayerLi'+'st']['splice'](_0x2331c2,-0xb*-0x323+0x97*0x4+0x1*-0x24dc),_0x3b0fa6--,this['_updateOpa'+'queOrder'](_0x2331c2,_0x3b0fa6-(-0x63*-0x5b+0x260e+-0x4e2*0xf)),this['subLayerEn'+'abled']['splice'](_0x2331c2,-0x3*0x85d+-0x4*-0x50b+0x4ec),this['_dirty']=!(0x1*-0x8ba+0x21bd+-0x1903),this['layerList']['indexOf'](_0x51158d)<0x1d02+0x184d*0x1+-0x354f&&this['fire']('remove',_0x51158d);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x533932){this['_isSublaye'+'rAdded'](_0x533932,!(0xc22*-0x2+-0x1d6e+0x35b2))||(this['layerList']['push'](_0x533932),this['_transpare'+'ntOrder'][_0x533932['id']]=this['subLayerLi'+'st']['push'](!(-0x1*-0x1ab9+0x1*-0x1f9d+-0x4*-0x139))-(-0x1c86+-0x1cf*0xb+0x1*0x306c),this['subLayerEn'+'abled']['push'](!(-0x1b6f+-0x694*0x2+0x2897)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0xf84+-0x3b8*0x8+0xe3c*0x1),this['fire']('add',_0x533932));}['insertTran'+'sparent'](_0x18472a,_0x1f2585){if(this['_isSublaye'+'rAdded'](_0x18472a,!(0x17*0x15+-0xf04+-0x1*-0xd21)))return;this['layerList']['splice'](_0x1f2585,-0x1b07+-0x1f29+-0xe8c*-0x4,_0x18472a),this['subLayerLi'+'st']['splice'](_0x1f2585,-0x2063+-0x4*-0x3d2+0x111b,!(0x2317+0x2039+-0x4350));const _0x40014a=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x1f2585,_0x40014a-(0x25c2+0x82d+-0x2dee)),this['subLayerEn'+'abled']['splice'](_0x1f2585,0xd3f+-0x25b5+-0x1f*-0xca,!(0x1f91*0x1+-0x203d+-0x2*-0x56)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x2402+-0x4*-0x663+0x3d8e*-0x1),this['fire']('add',_0x18472a);}['removeTran'+'sparent'](_0x2dfe1b){for(let _0x3724e4=0x1c80+0x1f11+0x17*-0x297,_0x2407a5=this['layerList']['length'];_0x3724e4<_0x2407a5;_0x3724e4++)if(this['layerList'][_0x3724e4]===_0x2dfe1b&&this['subLayerLi'+'st'][_0x3724e4]){this['layerList']['splice'](_0x3724e4,0x540+-0x793+0x254),this['subLayerLi'+'st']['splice'](_0x3724e4,0x788*0x2+0xf86+-0x1*0x1e95),_0x2407a5--,this['_updateTra'+'nsparentOr'+'der'](_0x3724e4,_0x2407a5-(-0x1265*0x1+-0x1545+-0xf*-0x2a5)),this['subLayerEn'+'abled']['splice'](_0x3724e4,-0x176+-0xb4c*-0x3+-0x206d),this['_dirty']=!(-0x109d+0x1501+0x232*-0x2),this['layerList']['indexOf'](_0x2dfe1b)<-0x13b8+0x86+0xe*0x15f&&this['fire']('remove',_0x2dfe1b);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x362be9){return this['layerOpaqu'+'eIndexMap']['get'](_0x362be9)??-(-0x2352+0x1e38+0x51b);}['getTranspa'+'rentIndex'](_0x92270c){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x92270c)??-(-0x17*0x65+0x189c+-0xf88);}['isEnabled'](_0x30daf6,_0x42c749){if(_0x30daf6['enabled']){const _0x58bcca=_0x42c749?this['getTranspa'+'rentIndex'](_0x30daf6):this['getOpaqueI'+'ndex'](_0x30daf6);if(_0x58bcca>=0x29*-0x31+0x3f5*0x1+0xa6*0x6)return this['subLayerEn'+'abled'][_0x58bcca];}return!(0x1*0x207a+-0x171*0x15+-0x234);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x4ece8a=0x25a0+0xa3b+-0x2fdb*0x1;_0x4ece8a<this['layerList']['length'];_0x4ece8a++){const _0x1b68a6=this['layerList'][_0x4ece8a];this['layerIdMap']['set'](_0x1b68a6['id'],_0x1b68a6),this['layerNameM'+'ap']['set'](_0x1b68a6['name'],_0x1b68a6),(this['subLayerLi'+'st'][_0x4ece8a]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x1b68a6,_0x4ece8a);}}['getLayerBy'+'Id'](_0x3dd214){return this['layerIdMap']['get'](_0x3dd214)??null;}['getLayerBy'+'Name'](_0x435f1f){return this['layerNameM'+'ap']['get'](_0x435f1f)??null;}['_updateOpa'+'queOrder'](_0x306083,_0x57a5fa){for(let _0x3a6e9a=_0x306083;_0x3a6e9a<=_0x57a5fa;_0x3a6e9a++)this['subLayerLi'+'st'][_0x3a6e9a]===!(-0x1*0x1d41+0x26e9*0x1+-0x9a7)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x3a6e9a]['id']]=_0x3a6e9a);}['_updateTra'+'nsparentOr'+'der'](_0x5710d7,_0x1f7628){for(let _0x286a3c=_0x5710d7;_0x286a3c<=_0x1f7628;_0x286a3c++)this['subLayerLi'+'st'][_0x286a3c]===!(0x11*0x4f+-0x1*0xe6b+-0x4*-0x24b)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x286a3c]['id']]=_0x286a3c);}['_sortLayer'+'sDescendin'+'g'](_0x2461d1,_0x5f4ee7,_0x2d526b){let _0x5ca57f=-(0x10*-0x1a2+-0x7*-0x41b+-0x29c),_0x34bb93=-(0x3*0x5b1+-0x3*-0xf6+-0x13f4);for(let _0x4ef06b=0x1*-0xea3+-0x1133+-0xa*-0x32f,_0x443f9e=_0x2461d1['length'];_0x4ef06b<_0x443f9e;_0x4ef06b++){const _0x407b0b=_0x2461d1[_0x4ef06b];_0x2d526b['hasOwnProp'+'erty'](_0x407b0b)&&(_0x5ca57f=Math['max'](_0x5ca57f,_0x2d526b[_0x407b0b]));}for(let _0x4dec2e=-0xdf9+-0x1d*0x117+0x2*0x16ca,_0xccdd6e=_0x5f4ee7['length'];_0x4dec2e<_0xccdd6e;_0x4dec2e++){const _0x2e1e23=_0x5f4ee7[_0x4dec2e];_0x2d526b['hasOwnProp'+'erty'](_0x2e1e23)&&(_0x34bb93=Math['max'](_0x34bb93,_0x2d526b[_0x2e1e23]));}return _0x5ca57f===-(0x17a9+0x80f*0x1+-0x161*0x17)&&_0x34bb93!==-(0x1*-0x1381+-0x111f+0x24a1*0x1)?0x1403+0x33*-0x61+0xaf*-0x1:_0x34bb93===-(-0x74c+0xc*0x83+0x3*0x63)&&_0x5ca57f!==-(0x10f7+-0x10e*-0x24+0x59*-0x9e)?-(-0xf*0x274+0x2341+-0x2c*-0x9):_0x34bb93-_0x5ca57f;}['sortTransp'+'arentLayer'+'s'](_0x6c63c9,_0x425c6c){return this['_sortLayer'+'sDescendin'+'g'](_0x6c63c9,_0x425c6c,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x32c243,_0x3699a8){return this['_sortLayer'+'sDescendin'+'g'](_0x32c243,_0x3699a8,this['_opaqueOrd'+'er']);}}const zl=new I(),pi={'bias':0x0,'normalBias':0x0},qn=new ie(),kd={'r':0x0,'g':0x1,'b':0x2,'a':0x3},Lf={'directional':ve,'omni':Ye,'point':Ye,'spot':Ke},yA=[[new ae(0x138*0xb+-0x2669*-0x1+-0x33d1,0x1*-0x12e2+-0xa83+-0x5*-0x5e1,0x1*0x5c2+0xa2d+-0x2*0x7f7,-0x1*0xa6d+0x39*0x83+-0x29*0x75)],[new ae(0x19ad+-0x222a*0x1+-0x87d*-0x1,0x4b1*-0x3+-0x25da+0x5c5*0x9,0x7c0+-0x2*-0x39e+-0xefc+0.5,-0x20e4+0x2119+-0x35+0.5),new ae(0x12ae*0x2+0x1c4c+-0x41a8,-0x1c2e+-0x1aa+0x1dd8+0.5,-0x14c7+0xf1d+-0x32*-0x1d+0.5,0x236b*-0x1+0x13df+0xa*0x18e+0.5)],[new ae(0x699+-0x12b9+0x10*0xc2,0x9*-0x43f+-0x2324+0x495b,0x35*-0x2f+0x2f3*-0x7+0x2*0xf30+0.5,0x1*-0x130d+0x20a5+-0xd98+0.5),new ae(-0x52e+0x67b+-0x14d,-0x1e91*-0x1+-0xc2*-0x27+-0x3c1f+0.5,-0x51a+-0x3f1*0x1+0x90b+0.5,0x7*-0x149+-0x43*0x53+0x7ae*0x4+0.5),new ae(0x19cf*0x1+-0x15c0+-0x40f*0x1+0.5,-0x90d+0x33e*0x4+0x1*-0x3eb,0x206*0xe+0x11de+-0x1b*0x1b6+0.5,-0x101+-0x2*0xa97+0x9*0x277+0.5)],[new ae(-0x2fa+-0x35*-0x22+0x104*-0x4,0x41*0x16+-0x1*-0x20b1+-0x2647,-0x238c+0x1a85+0x907+0.5,-0x1dbd+-0x2*0x1231+-0x1*-0x421f+0.5),new ae(-0x1843+0x24de+-0xc9b*0x1,-0xf1+0xa55+-0x964+0.5,-0x20d3+-0x1*0x18d+-0x370*-0xa+0.5,-0x137*-0x19+0xef4+-0x2d53*0x1+0.5),new ae(-0xf92+0x2*-0x1114+0x14f*0x26+0.5,0x689+-0x113e+0x1*0xab5,0x1*0x160d+-0x535+-0x10d8+0.5,0x4*0x35e+0x204b*-0x1+0x12d3+0.5),new ae(0x26f4+0x2*-0x943+-0x146e+0.5,-0x16*-0x10c+0x2a7+-0x19af+0.5,0x975*0x1+0x1f1a+0x3*-0xd85+0.5,-0x2*-0x120d+0x2f2+-0x270c+0.5)]],vA={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let xA=0x2537*0x1+0x2610+0xac1*-0x7;class TA{constructor(_0x558587,_0x4fb1ce,_0x1e042b){this['light']=_0x1e042b,this['camera']=_0x558587,this['shadowCame'+'ra']=Ry['createShad'+'owCamera'](_0x1e042b['_shadowTyp'+'e'],_0x1e042b['_type'],_0x4fb1ce),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new ae(-0x2029*-0x1+-0x191+0x7a6*-0x4,-0xe51*-0x1+-0x1*-0x1529+-0x237a,-0x1*0x4db+0x24eb+-0x200f*0x1,-0x862*0x4+0x24c1+0x338*-0x1),this['shadowScis'+'sor']=new ae(0xcdb+0x309+-0xfe4,-0x3*-0x2f3+0xfe*-0x1b+0x11f1,0x3*0x1bf+-0x1*0x1ab6+0x157a,0x183d+-0xd*-0x297+-0x39e7),this['projection'+'Compensati'+'on']=0x1d5*0x1+0x20d7+-0x22ac,this['face']=_0x4fb1ce,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x185c9c=>{_0x185c9c['defaultUni'+'formBuffer']['destroy'](),_0x185c9c['destroy']();}),this['viewBindGr'+'oups']['length']=-0x10f6+-0x1f7*-0xd+-0x895;}get['shadowBuff'+'er'](){const _0xd16184=this['shadowCame'+'ra']['renderTarg'+'et'];return _0xd16184?this['light']['_isPcf']?_0xd16184['depthBuffe'+'r']:_0xd16184['colorBuffe'+'r']:null;}}class Ho{constructor(_0xbbe05d,_0x18ffc2){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Kt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',-0x151*0x1c+-0x20c9+0x9*0x7bd),h(this,'clusteredD'+'ata',new Uint32Array(-0x2b*-0x25+-0x2b*-0x61+0x1bb*-0xd)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0xbbe05d,this['clusteredL'+'ighting']=_0x18ffc2,this['id']=xA++,this['_evtDevice'+'Restored']=_0xbbe05d['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(-0x1b12+0xdb8+0xd5a+0.8,0x207+0x25b6+0x3*-0xd3f+0.8,-0x10a0+0x21fa+-0x115a+0.8),this['_intensity']=-0x1*-0x26cb+0x1*-0x1181+0x1549*-0x1,this['_affectSpe'+'cularity']=!(-0x88d+-0x27f+0xb0c*0x1),this['_luminance']=-0x2035+-0x1*-0x1521+-0x58a*-0x2,this['_castShado'+'ws']=!(-0x2020+0x1c4*-0x14+0x4371),this['_enabled']=!(0x1f80+0x22bf+-0x423e),this['_mask']=ds,this['isStatic']=!(0xdcd*0x1+0x1d38+-0x2b04),this['key']=0x4*0x683+0x99+-0x1aa5,this['bakeDir']=!(0x1*0xc25+0x485*0x6+0x17*-0x1b5),this['bakeNumSam'+'ples']=0x598*-0x5+-0x238b*0x1+0x14*0x32d,this['bakeArea']=-0x503*0x1+-0x5*0x395+-0x7a4*-0x3,this['attenuatio'+'nStart']=0x28a+0x1*0x1711+0xb*-0x253,this['attenuatio'+'nEnd']=-0x8f7+0x4a*0x1d+0x9f,this['_falloffMo'+'de']=Sm,this['_shadowTyp'+'e']=ks,this['_vsmBlurSi'+'ze']=0x1b33+-0xa81+-0x10a7,this['vsmBlurMod'+'e']=vm,this['vsmBias']=(-0x111f+-0x75d*0x5+0x35f0+0.01)*(0x257e*0x1+-0x7*-0x4ba+-0x4694+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=-0x195e*-0x1+-0x209*-0xd+0xc6*-0x43,this['_cookieFal'+'loff']=!(-0x95f+0x289+0xfa*0x7),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x2190+0x219*-0x3+0x3b*0xad),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0x7*0x1c7+0x181d*0x1+-0xbaa*0x1),this['_cookieTra'+'nsformSet']=!(-0x226f+0x4*-0x31+0x2334),this['_cookieOff'+'setSet']=!(0x49*0x7b+0x1*-0x1e5b+-0x4b7),this['_innerCone'+'Angle']=0xb5a*0x2+-0x911+0xcb*-0x11,this['_outerCone'+'Angle']=-0x27*-0xa9+0x5*-0x28d+0xcd1*-0x1,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=0x14a1+-0x1ad*0x1+-0x9*0x21b,this['_cascadeBl'+'end']=0x1*0x11+0x15ca+-0x15db,this['cascadeDis'+'tribution']=0xf81+-0x256e*0x1+0x74f*0x3+0.5,this['_shape']=Vs,this['_colorLine'+'ar']=new Float32Array(-0x19f+-0x7e8+-0x25*-0x42),this['_updateLin'+'earColor'](),this['_position']=new I(0x14*-0x8f+-0x1faf*-0x1+-0x1483,-0x1f73*-0x1+-0x145e+-0x1*0xb15,0x1c55+-0x1fe1+-0x38c*-0x1),this['_direction']=new I(0x260b*-0x1+0xef9*0x1+0x1712*0x1,0x1*-0x1d1e+-0xcc7+0x29e5,0x1*0x11cb+-0x144d+0x1*0x282),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(-0x22*0xb+-0x61*0x15+0xa1f)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(0x36*-0x9d+-0x1*-0xbb9+0x1*0x1565),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=-0x1a2f+0x1*0x21ff+-0x7a8,this['_shadowRes'+'olution']=0x26a0+0x58+-0x22f8,this['_shadowBia'+'s']=-(0xec*0xe+0x1f67+-0x2c4f+0.0005),this['_shadowInt'+'ensity']=-0x4*-0x361+-0x12ea*-0x1+-0x206d,this['_normalOff'+'setBias']=-0x1c7e+0x3e9*-0x8+0x3bc6,this['shadowUpda'+'teMode']=Pm,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(-0x1d4b+-0x833*-0x1+0x1519),this['_isPcf']=!(0x9*-0xb5+-0x753+-0x2*-0x6d8),this['_softShado'+'wParams']=new Float32Array(0x1*0x2533+0x1517*-0x1+-0x1018),this['shadowSamp'+'les']=-0x10a9+0x2*0x1343+0x15cd*-0x1,this['shadowBloc'+'kerSamples']=0x1*0xeb8+-0x6b0+-0x7f8,this['penumbraSi'+'ze']=0x1*-0x124c+-0x1491+0x26de*0x1,this['penumbraFa'+'lloff']=-0xaf5+0x67f*-0x2+0x17f4,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(0x8*0x411+0x1a03+-0x3a8a),this['atlasVersi'+'on']=0x21d5+0x262f+-0x2c*0x1a3,this['atlasSlotI'+'ndex']=-0x86*-0x3+-0x7*-0x13+-0x217,this['atlasSlotU'+'pdated']=!(0x2670+0xd22+-0x3391),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(0xf4d+0x19fc+-0x2948),this['maxScreenS'+'ize']=0x17f9+-0x3f7*-0x5+-0x2bcc,this['_updateSha'+'dowBias']());}['destroy'](){var _0x246e83;(_0x246e83=this['_evtDevice'+'Restored'])==null||_0x246e83['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===vs&&(this['shadowUpda'+'teMode']=or);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x3a8ffb=-0x25ef+-0x2003+0xe*0x4ff;_0x3a8ffb<this['_renderDat'+'a']['length'];_0x3a8ffb++)this['_renderDat'+'a'][_0x3a8ffb]['destroy']();this['_renderDat'+'a']['length']=-0x2*-0xf77+0x17b5+0xc5*-0x47;}}['addLayer'](_0x197bf7){this['layers']['add'](_0x197bf7);}['removeLaye'+'r'](_0x273de1){this['layers']['delete'](_0x273de1);}set['shadowSamp'+'les'](_0x33a74e){this['_softShado'+'wParams'][0x1a7+-0x595*0x3+0xf18]=_0x33a74e;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0x76d+0x204b+-0x27b8];}set['shadowBloc'+'kerSamples'](_0xb4c924){this['_softShado'+'wParams'][0x1*-0x1141+0x8c1*-0x1+0x1a03]=_0xb4c924;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][-0x256*-0x1+-0xfe2+0xd8d];}set['shadowBias'](_0x574c9f){this['_shadowBia'+'s']!==_0x574c9f&&(this['_shadowBia'+'s']=_0x574c9f,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x29a5be){(!this['cascades']||this['numCascade'+'s']!==_0x29a5be)&&(this['cascades']=yA[_0x29a5be-(0x11dd+0x5fe+-0x8e*0x2b)],this['_shadowMat'+'rixPalette']=new Float32Array(-0x177d+-0xef*-0x1d+-0x356),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(0x1a7a+-0x1be2+0x16c),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x32ca89){this['_cascadeBl'+'end']!==_0x32ca89&&(this['_cascadeBl'+'end']=_0x32ca89,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x2278b4){this['_shadowMap']!==_0x2278b4&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x2278b4);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x5a7469){this['_mask']!==_0x5a7469&&(this['_mask']=_0x5a7469,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x38b137=this['_type'];return _0x38b137===ve?this['numCascade'+'s']:_0x38b137===Ye?-0xb*0x2ef+-0x1d8e+0x3dd9:-0x4a5*0x5+-0x2*-0x2d7+0x2*0x8c6;}set['type'](_0x142327){if(this['_type']===_0x142327)return;this['_type']=_0x142327,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x5390a9=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x5390a9;}get['type'](){return this['_type'];}set['shape'](_0x17a7f3){if(this['_shape']===_0x17a7f3)return;this['_shape']=_0x17a7f3,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x219fcc=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x219fcc;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0xddfb41){this['_usePhysic'+'alUnits']!==_0xddfb41&&(this['_usePhysic'+'alUnits']=_0xddfb41,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x327f64){if(this['_shadowTyp'+'e']===_0x327f64)return;let _0x344160=Bi['get'](_0x327f64);_0x344160||(_0x327f64=ks);const _0x2a9604=this['device'];_0x327f64===No&&!_0x2a9604['textureFlo'+'atRenderab'+'le']&&!_0x2a9604['textureHal'+'fFloatRend'+'erable']&&(_0x327f64=ks),this['_type']===Ye&&_0x327f64!==ly&&_0x327f64!==ks&&_0x327f64!==hy&&_0x327f64!==cy&&_0x327f64!==No&&(_0x327f64=ks),_0x327f64===ym&&(!_0x2a9604['textureFlo'+'atRenderab'+'le']||!_0x2a9604['textureFlo'+'atFilterab'+'le'])&&(_0x327f64=bf),_0x327f64===bf&&!_0x2a9604['textureHal'+'fFloatRend'+'erable']&&(_0x327f64=ks),_0x344160=Bi['get'](_0x327f64),this['_isVsm']=(_0x344160==null?void(-0xa2d*-0x1+0x882+-0x12af):_0x344160['vsm'])??!(0x178*-0xa+0x17f4+0x1*-0x943),this['_isPcf']=(_0x344160==null?void(-0x1f04+0x2612*0x1+-0x70e):_0x344160['pcf'])??!(0x1*0x1945+-0x1840+-0x104),this['_shadowTyp'+'e']=_0x327f64,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x218496){this['_enabled']!==_0x218496&&(this['_enabled']=_0x218496,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x2b0722){this['_castShado'+'ws']!==_0x2b0722&&(this['_castShado'+'ws']=_0x2b0722,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==ii&&this['_mask']!==-0x1e4+-0x2ee+0x4d2*0x1;}set['shadowInte'+'nsity'](_0x56a19b){this['_shadowInt'+'ensity']!==_0x56a19b&&(this['_shadowInt'+'ensity']=_0x56a19b,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===ii;}set['shadowReso'+'lution'](_0x50bf9f){this['_shadowRes'+'olution']!==_0x50bf9f&&(this['_type']===Ye?_0x50bf9f=Math['min'](_0x50bf9f,this['device']['maxCubeMap'+'Size']):_0x50bf9f=Math['min'](_0x50bf9f,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x50bf9f,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x35548c){this['_vsmBlurSi'+'ze']!==_0x35548c&&(_0x35548c%(-0xa3*0x2e+-0x2*-0x689+0x103a)===-0x2b1+-0x17ca+0x1a7b&&_0x35548c++,this['_vsmBlurSi'+'ze']=_0x35548c);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x355efa){if(this['_normalOff'+'setBias']!==_0x355efa){const _0x3ffabc=!this['_normalOff'+'setBias']&&_0x355efa||this['_normalOff'+'setBias']&&!_0x355efa;this['_normalOff'+'setBias']=_0x355efa,_0x3ffabc&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x15f253){this['_falloffMo'+'de']!==_0x15f253&&(this['_falloffMo'+'de']=_0x15f253,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x11b45a){this['_innerCone'+'Angle']!==_0x11b45a&&(this['_innerCone'+'Angle']=_0x11b45a,this['_innerCone'+'AngleCos']=Math['cos'](_0x11b45a*Math['PI']/(-0x1017+0xa*0x5e+0xd1f)),this['updateClus'+'terData'](!(-0x609+0x359*-0x4+0x6*0x33d),!(0x1351+0x1*0x1567+-0x28b8)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x5574ff){this['_outerCone'+'Angle']!==_0x5574ff&&(this['_outerCone'+'Angle']=_0x5574ff,this['_updateOut'+'erAngle'](_0x5574ff),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x2d3955){this['_penumbraS'+'ize']=_0x2d3955,this['_softShado'+'wParams'][0xa81*0x1+0x2e*-0x4a+0xef*0x3]=_0x2d3955;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x43a0d8){this['_softShado'+'wParams'][0xf8e+-0x1082+0xf7]=_0x43a0d8;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][-0xaaf*0x3+-0x11a8+0x31b8];}['_updateOut'+'erAngle'](_0x11a934){const _0x372a95=_0x11a934*Math['PI']/(0x1ef2+0x1ebd+-0x1*0x3cfb);this['_outerCone'+'AngleCos']=Math['cos'](_0x372a95),this['_outerCone'+'AngleSin']=Math['sin'](_0x372a95),this['updateClus'+'terData'](!(-0x119*0x1c+-0x45*-0x20+0x161d),!(0xb*-0x11f+0x829*-0x2+0x1ca7));}set['intensity'](_0x2ca953){this['_intensity']!==_0x2ca953&&(this['_intensity']=_0x2ca953,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0x57fc23){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0x57fc23,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x22bff6){this['_luminance']!==_0x22bff6&&(this['_luminance']=_0x22bff6,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new ae(-0x1*-0x1955+0x18ad+0x1901*-0x2,0x1*-0x2660+-0x2384+0x49e4,0x9b*0x27+-0x124c+-0x550,-0x83*0xd+-0x1*-0x3bc+0xbb*0x4)),this['_atlasView'+'port'];}set['cookie'](_0x292b42){this['_cookie']!==_0x292b42&&(this['_cookie']=_0x292b42,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x72d938){this['_cookieFal'+'loff']!==_0x72d938&&(this['_cookieFal'+'loff']=_0x72d938,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x11d063){if(this['_cookieCha'+'nnel']!==_0x11d063){if(_0x11d063['length']<-0x23a3+-0x2fe+-0x4*-0x9a9){const _0x5d8cc0=_0x11d063['charAt'](_0x11d063['length']-(0x59*0x27+-0x1*-0xb02+-0x1890)),_0x111195=0xe68+0x26ef+-0x3554-_0x11d063['length'];for(let _0x178674=0x1b1a*0x1+-0x5*0x581+-0x1*-0x6b;_0x178674<_0x111195;_0x178674++)_0x11d063+=_0x5d8cc0;}this['_cookieCha'+'nnel']=_0x11d063,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x3e4eab){this['_cookieTra'+'nsform']!==_0x3e4eab&&(this['_cookieTra'+'nsform']=_0x3e4eab,this['_cookieTra'+'nsformSet']=!!_0x3e4eab,_0x3e4eab&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(-0x182*-0x2+-0x19fb+-0xe*-0x1a4)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x550386){if(this['_cookieOff'+'set']===_0x550386)return;!!(this['_cookieTra'+'nsformSet']||_0x550386)&&!_0x550386&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](0x1*0x1c3c+0x1f*-0xfb+0x4f*0x7,0x9b*-0x33+-0x25ad+-0x1b*-0x28a):this['_cookieOff'+'set']=_0x550386,this['_cookieOff'+'setSet']=!!_0x550386,_0x550386&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new ae(0x512*0x2+0x648+-0x106b*0x1,0x1657+0x2cf*-0x2+-0x10b8,-0x110c+0x9e*-0x2a+0x2af8,-0x1d87+0x11dd*0x2+-0x633),this['_cookieTra'+'nsformSet']=!(-0x742+-0x79b*0x1+-0xede*-0x1)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=-0x266c*0x1+0xed0+0x179c,this['atlasViewp'+'ortAllocat'+'ed']=!(0x1*0xb55+-0xe9*-0x1b+-0x23e7),this['atlasSlotU'+'pdated']=!(0x129e+-0x2665*-0x1+-0x3902);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===vs&&(this['shadowUpda'+'teMode']=or),this['shadowUpda'+'teOverride'+'s']){for(let _0xecb029=-0x2233+0x19*-0x10f+-0x1e55*-0x2;_0xecb029<this['shadowUpda'+'teOverride'+'s']['length'];_0xecb029++)this['shadowUpda'+'teOverride'+'s'][_0xecb029]===vs&&(this['shadowUpda'+'teOverride'+'s'][_0xecb029]=or);}}['getRenderD'+'ata'](_0x5a03,_0x4a6980){for(let _0x132a96=0x3*-0xb6f+0x1066+0x11e7;_0x132a96<this['_renderDat'+'a']['length'];_0x132a96++){const _0x1f9471=this['_renderDat'+'a'][_0x132a96];if(_0x1f9471['camera']===_0x5a03&&_0x1f9471['face']===_0x4a6980)return _0x1f9471;}const _0x3c5f6f=new TA(_0x5a03,_0x4a6980,this);return this['_renderDat'+'a']['push'](_0x3c5f6f),_0x3c5f6f;}['clone'](){const _0x288066=new Ho(this['device'],this['clusteredL'+'ighting']);return _0x288066['type']=this['_type'],_0x288066['setColor'](this['_color']),_0x288066['intensity']=this['_intensity'],_0x288066['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x288066['luminance']=this['_luminance'],_0x288066['castShadow'+'s']=this['castShadow'+'s'],_0x288066['_enabled']=this['_enabled'],_0x288066['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x288066['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x288066['falloffMod'+'e']=this['_falloffMo'+'de'],_0x288066['shadowType']=this['_shadowTyp'+'e'],_0x288066['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x288066['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x288066['vsmBias']=this['vsmBias'],_0x288066['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x288066['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x288066['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x288066['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x288066['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x288066['numCascade'+'s']=this['numCascade'+'s'],_0x288066['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x288066['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x288066['shape']=this['_shape'],_0x288066['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x288066['shadowBias']=this['shadowBias'],_0x288066['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x288066['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x288066['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x288066['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x288066['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x288066['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x288066['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x288066['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x288066;}static['getLightUn'+'itConversi'+'on'](_0x592644,_0x4e4f8f=Math['PI']/(0x132+0x2be*0x6+-0x11a2),_0x57abba=-0x110*0x1f+-0x9ae+-0x154f*-0x2){switch(_0x592644){case Ke:{const _0x270338=Math['cos'](_0x4e4f8f),_0x17781a=Math['cos'](_0x57abba);return(-0x1a*0x1+-0x10*-0x271+-0x26f4)*Math['PI']*(-0x655*0x6+-0x10e3+-0x119*-0x32-_0x17781a+(_0x17781a-_0x270338)/(-0x4*0x293+-0x13f0+-0x62*-0x4f));}case Ye:return(0xaa6*-0x1+-0x270c+0x31b6)*Math['PI'];case ve:return 0x1e37+-0xc16+0x1220*-0x1;}}['_getUnifor'+'mBiasValue'+'s'](_0x5074ef){const _0x2f11a0=_0x5074ef['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ye:pi['bias']=this['shadowBias'],pi['normalBias']=this['_normalOff'+'setBias'];break;case Ke:this['_isVsm']?pi['bias']=-(0x19d8+-0x235e+-0x6a*-0x17+0.00001)*(0x1*0x23f3+-0xff4+-0x1*0x13eb):pi['bias']=this['shadowBias']*(-0x1*-0x1eec+-0x4ab+0x1a2d*-0x1),pi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(0x52*0x76+0x2290+-0x4855)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?pi['bias']=-(0x965+-0x74f*-0x5+-0x2df0+0.00001)*(-0x462*-0x1+0x109*0x25+-0x2a9b):pi['bias']=this['shadowBias']/_0x2f11a0*(0x20c5*-0x1+0x1*-0x18ea+-0x3a13*-0x1),pi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x2f11a0/(-0x239*-0x5+0x14*0x17e+-0x28ee)):this['_normalOff'+'setBias'];break;}return pi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x530bf7){if(this['_type']===Ke){const _0x53a274=this['attenuatio'+'nEnd'],_0x15531d=this['_outerCone'+'Angle'],_0xd140df=this['_outerCone'+'AngleCos'],_0x5da13a=this['_node'];zl['copy'](_0x5da13a['up']),_0x15531d>-0x716+0x82b+-0xe8?(_0x530bf7['radius']=_0x53a274*this['_outerCone'+'AngleSin'],zl['mulScalar'](-_0x53a274*_0xd140df)):(_0x530bf7['radius']=_0x53a274/((-0x1515+-0x3b*-0x27+0xc1a)*_0xd140df),zl['mulScalar'](-_0x530bf7['radius'])),_0x530bf7['center']['add2'](_0x5da13a['getPositio'+'n'](),zl);}else this['_type']===Ye&&(_0x530bf7['center']=this['_node']['getPositio'+'n'](),_0x530bf7['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x527644){if(this['_type']===Ke){const _0x138fa6=this['attenuatio'+'nEnd'],_0x2ac343=this['_outerCone'+'Angle'],_0x26489e=this['_node'],_0x59c1e7=Math['abs'](Math['sin'](_0x2ac343*Y['DEG_TO_RAD'])*_0x138fa6);_0x527644['center']['set'](-0x59f*-0x2+0x3ff+-0xf3d,-_0x138fa6*(-0x176*0x1a+-0x1f47+0x4543+0.5),0x2*0x1199+-0x1*0xf7b+0x31*-0x67),_0x527644['halfExtent'+'s']['set'](_0x59c1e7,_0x138fa6*(0x44a*0x1+0x1*-0x1+-0x449+0.5),_0x59c1e7),_0x527644['setFromTra'+'nsformedAa'+'bb'](_0x527644,_0x26489e['getWorldTr'+'ansform'](),!(-0x5*0x2b3+0x4a9+-0x2*-0x46b));}else this['_type']===Ye&&(_0x527644['center']['copy'](this['_node']['getPositio'+'n']()),_0x527644['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ye&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=-0x1*0x1a5f+-0x294+-0x1*-0x1cf3,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0xd05+0x2c0*-0x5+0x1ac5;else{const _0x5d62e9=this['shadowBias']*-(0x7f*0x2+-0x1d23+0x223*0xf);this['shadowDept'+'hState']['depthBias']=_0x5d62e9,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x5d62e9;}}['_updateLin'+'earColor'](){let _0x1d8f1a=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0x1d8f1a=this['_luminance']/Ho['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x3d8d6e=this['_color'],_0x57b660=this['_colorLine'+'ar'];_0x1d8f1a>=0xd4f+-0x825+-0x529?qn['linear'](_0x3d8d6e)['mulScalar'](_0x1d8f1a):qn['copy'](_0x3d8d6e)['mulScalar'](_0x1d8f1a)['linear'](),_0x57b660[0x2096+0x1c2c+0x1e61*-0x2]=qn['r'],_0x57b660[0x1e5f+-0xd28+-0x1*0x1136]=qn['g'],_0x57b660[0x5*0x323+-0x7f*-0x13+-0x6*0x42f]=qn['b'],this['updateClus'+'terData'](!(0xf34+0x1c84+-0x2bb8));}['setColor'](){arguments['length']===0x1b46+-0x17*-0x46+0x47*-0x79?this['_color']['set'](arguments[-0x324*-0x3+0x2*-0x28a+-0x8*0x8b]['r'],arguments[-0x4eb*-0x1+-0x19b5*0x1+0x14ca]['g'],arguments[0x24d7+-0x2*0x1047+0x1*-0x449]['b']):arguments['length']===0xc0*0x34+0x1cf7*0x1+0x43f4*-0x1&&this['_color']['set'](arguments[0x49+0xd*0x1aa+-0x1*0x15eb],arguments[-0x9a3+-0x5*0x30c+-0x638*-0x4],arguments[-0x30f*-0xb+-0x1703+-0xaa0]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x1491ed=>{_0x1491ed['hasLight'](this)&&_0x1491ed['markLights'+'Dirty']();});}['updateKey'](){let _0x3e5dd7=this['_type']<<0x7c1*0x1+-0x1b*-0xe5+-0x1fcb|this['_shadowTyp'+'e']<<0x2a4+-0x45f+0x1d4|this['_falloffMo'+'de']<<-0x114f+-0x34*0x6c+0x2756|(this['_normalOff'+'setBias']!==-0xaf*0x13+-0x2118+-0x2e15*-0x1?0x15a2+0x1f4e+-0x34ef:-0x2080+0x76*-0x3e+0x3d14)<<0x25fd+-0xf38+-0x1*0x16af|(this['_cookie']?0x5c0+-0x15*-0x147+-0x2092*0x1:-0x8b6*-0x1+-0x7eb+0xcb*-0x1)<<-0xb7*0x2f+-0x1644+0x37f2|(this['_cookieFal'+'loff']?0x1*0x859+0x1*-0x12e9+0xa91:0x1*-0x1319+0x2650+0x1*-0x1337)<<0xae1+-0x263f+0x1b72|kd[this['_cookieCha'+'nnel']['charAt'](0x28d*0x1+0x13c1+-0xa*0x23b)]<<-0x247a+-0x2db+-0x2767*-0x1|(this['_cookieTra'+'nsform']?0x3*-0xe7+-0x3*0xb52+0x24ac:0x148a*0x1+0x148+-0x13*0x126)<<-0xb2*-0x2+-0x76*0x13+0x76a|this['_shape']<<-0x2f*-0xc5+0x924+-0x2d45|(this['numCascade'+'s']>0x1639+0x4a*-0x2+0x737*-0x3?-0x1853+-0x1d45+-0x1*-0x3599:-0x242d*-0x1+0x14b*0x1+-0x1*0x2578)<<0x1*-0x53+0x1*0x827+0x5*-0x18f|(this['_cascadeBl'+'end']>0x15a6+-0x109*-0x21+-0x44b*0xd?0x1*0x2289+-0xa*-0x41+0x5*-0x76a:0x1*-0x1be7+-0x491*0x6+0x374d)<<0x2122+0x1d71+-0x3e8b|(this['affectSpec'+'ularity']?0x1*0x1ec5+-0x53f+-0x1985:-0x219f+-0x6da*0x1+0x1*0x2879)<<0x13*0x14b+-0xb18+-0xd72|this['mask']<<-0x1387+-0x1*-0x1dfe+-0x1*0xa71|(this['_castShado'+'ws']?0x1*0x2442+0x19c8+-0x3e09:0x4*-0x1eb+0x957+-0x1ab)<<0x161a+0x25a4+-0x3bbb;this['_cookieCha'+'nnel']['length']===-0x49*0x21+0x10c8+0x4*-0x1d7&&(_0x3e5dd7|=kd[this['_cookieCha'+'nnel']['charAt'](-0x16*-0x4f+0x1c33*0x1+-0x8bf*0x4)]<<0x1f5d+-0x185+-0x772*0x4,_0x3e5dd7|=kd[this['_cookieCha'+'nnel']['charAt'](-0x1*-0x295+-0x142b*0x1+0x1198)]<<0x8*0x399+0x6*-0xb4+-0x2*0xc41),_0x3e5dd7!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x3e5dd7;}['updateClus'+'teredFlags'](){const _0x1f18b4=!!(this['mask']&ds),_0x1d93ba=!!(this['mask']&si);this['clusteredF'+'lags']=(this['type']===Ke?0x1f8*-0x2+0xca2+0x1*-0x8b1:0xc3+0x21c5+-0x2288)<<-0x1*-0x116f+-0x1*-0x87a+0x47*-0x5d|(this['_shape']&-0x18b*0x17+0x4*-0x511+0x37c4)<<0x1*-0x941+0x2680+-0x1d23*0x1|(this['_falloffMo'+'de']&0x990+0x9b0+-0xd*0x17b)<<0x1385+0x1097+-0x2c5*0xd|(vA[this['_cookieCha'+'nnel']]??0xdb5+-0x255b+0x17a6)<<0x1dd3+-0x1*0xbe1+-0x11db*0x1|(_0x1f18b4?0x1407*-0x1+0x1de+0x122a:0x1328+0x20cb+-0x33f3)<<0x2027+0x319+0x283*-0xe|(_0x1d93ba?0x35*0x87+0x57e+-0x2*0x10b8:0x1d32*-0x1+-0x1a18+0x374a)<<0x18e1+0x517+-0x1de3;}['getCluster'+'edFlags'](_0xe92b93,_0x4ba254){return this['clusteredF'+'lags']|((_0xe92b93?Math['floor'](this['shadowInte'+'nsity']*(0x593+0x3f*0x49+-0xc7*0x1d)):0x200e+-0xb2*-0x22+-0x1*0x37b2)&-0x1374+-0x12d+0x15a0)<<-0x1*-0x6e9+-0x78e+-0xa5*-0x1|((_0x4ba254?Math['floor'](this['cookieInte'+'nsity']*(-0x1581+0x1bdc+-0x55c)):-0xc*-0x13d+0x13*-0xef+0x2e1)&0xd9f*0x1+-0x2*0xd59+0xe12)<<0x1dff+0x985+0x4c*-0x85;}['updateClus'+'terData'](_0x499c95,_0x19cb4f){const {clusteredData16:_0x1a36e8}=this,_0x47d508=mn['float2Half'];_0x499c95&&(_0x1a36e8[0xe*0x2bf+0x902*0x1+-0x17ba*0x2]=_0x47d508(Y['clamp'](this['_colorLine'+'ar'][-0x12ad+0x107*-0x2+0x14bb]/fh,-0x1982+-0x1*-0x8c9+0x10b9,-0xc4bf+-0x20c1+0xb08*0x2c)),_0x1a36e8[0x289*-0x5+0x2676+-0x19c8]=_0x47d508(Y['clamp'](this['_colorLine'+'ar'][0x130e+-0x11*-0x127+-0x26a4]/fh,-0x1c00+0x1db*0x14+-0x91c,-0x11a22+-0x1*0x1df9+-0x61*-0x5db)),_0x1a36e8[-0x9ea+0x1cc9+-0xb*0x1b7]=_0x47d508(Y['clamp'](this['_colorLine'+'ar'][-0xbf9+0xefe+-0x101*0x3]/fh,0x1a*0x8+-0x4bc+0x3ec,0x1*0x40f+-0x1a4b4+-0x8681*-0x5))),_0x19cb4f&&(_0x1a36e8[0x23fd*0x1+0x2131+-0x1*0x452a]=_0x47d508(this['_innerCone'+'AngleCos']),_0x1a36e8[-0x363+0x972*0x3+-0x18ee]=_0x47d508(this['_outerCone'+'AngleCos']));}}class Fy{constructor(_0x2caf05,_0x13d313,_0x4c0c00){h(this,'_areaLight'+'sEnabled',!(0x3*0x4fd+0xc72+-0x1b68)),h(this,'_cells',new I(-0x16b+-0x17e4+0x9*0x2d1,-0xb*-0x2ca+0x1*0x11b+-0x1fc6,0x9ab+-0x5f5+-0x1*0x3ac)),h(this,'_maxLights'+'PerCell',0x1a56+0x278*0x5+-0xb*0x36d),h(this,'_shadowsEn'+'abled',!(0x257b+-0x1be8+0x993*-0x1)),h(this,'_shadowTyp'+'e',ks),h(this,'_shadowAtl'+'asResoluti'+'on',0x1886*0x1+-0x3*-0x249+-0x1761),h(this,'_cookiesEn'+'abled',!(-0x27f*0x1+-0x21fe+0x247e)),h(this,'_cookieAtl'+'asResoluti'+'on',0x2062+0x3*0x59b+-0x35*0xc7),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x2caf05,this['_maxTextur'+'eSize']=_0x13d313,this['_dirtyLigh'+'tsFnc']=_0x4c0c00);}['applySetti'+'ngs'](_0x1b3627){this['shadowsEna'+'bled']=_0x1b3627['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x1b3627['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x1b3627['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x1b3627['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x1b3627['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x1b3627['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x1b3627['lightingSh'+'adowType']??this['shadowType'],_0x1b3627['lightingCe'+'lls']&&(this['cells']=new I(_0x1b3627['lightingCe'+'lls']));}set['cells'](_0x301b0e){this['_cells']['copy'](_0x301b0e);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x5c924f){this['_maxLights'+'PerCell']=Y['clamp'](_0x5c924f,0x1d*0x41+0x1ec4+-0x4c4*0x8,-0x1*0x1d41+-0x1230+0x3070);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x4dc1b4){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x4dc1b4,-0x1e65*-0x1+-0x4fd*0x1+-0x329*0x8,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x32dc02){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x32dc02,0x223*0x6+0x2473+-0x3125,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x433f46){this['_shadowTyp'+'e']!==_0x433f46&&(this['_shadowTyp'+'e']=_0x433f46,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x38e4df){this['_cookiesEn'+'abled']!==_0x38e4df&&(this['_cookiesEn'+'abled']=_0x38e4df,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x1bd673){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x1bd673&&(this['_areaLight'+'sEnabled']=_0x1bd673,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x3dcb95){this['_shadowsEn'+'abled']!==_0x3dcb95&&(this['_shadowsEn'+'abled']=_0x3dcb95,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class oa{constructor(_0xbd2008){this['morph']=_0xbd2008,_0xbd2008['incRefCoun'+'t'](),this['device']=_0xbd2008['device'];const _0x6ddb7c=_0xbd2008['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x6ddb7c),this['_weights']=[],this['_weightMap']=new Map();for(let _0xc10f71=0x579+-0x6a*0x52+0x1c7b;_0xc10f71<_0xbd2008['_targets']['length'];_0xc10f71++){const _0x2792d2=_0xbd2008['_targets'][_0xc10f71];_0x2792d2['name']&&this['_weightMap']['set'](_0x2792d2['name'],_0xc10f71),this['setWeight'](_0xc10f71,_0x2792d2['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x6ddb7c),this['_shaderMor'+'phIndex']=new Uint32Array(_0x6ddb7c);const _0x383783=(_0x154870,_0xb632a)=>(this[_0xb632a]=_0xbd2008['_createTex'+'ture'](_0x154870,_0xbd2008['_renderTex'+'tureFormat']),new vt({'colorBuffer':this[_0xb632a],'depth':!(0xa9*0x39+-0x2*0x515+0xb9*-0x26)}));_0xbd2008['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x383783('MorphRTPos','texturePos'+'itions')),_0xbd2008['morphNorma'+'ls']&&(this['rtNormals']=_0x383783('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0xbd2008['morphTextu'+'reWidth'],_0xbd2008['morphTextu'+'reHeight']]);const _0x5aea71=_0xbd2008['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x5aea71['x']*(0xe5c*-0x1+0x1adf+0x1c9*-0x7),_0x5aea71['y']*(0xa61+0x1590+0xb*-0x2e7),_0x5aea71['z']*(0xf1d*0x1+0x578+-0x1491)]);const _0xa8c2c4=_0xbd2008['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0xa8c2c4['x']*(-0xb98*0x2+0x35*-0x61+0x2b47),_0xa8c2c4['y']*(-0x182d+0x2065+-0x836),_0xa8c2c4['z']*(0x17b9+-0x3*0xa2+-0x15d1)]),this['_aabbNrmSi'+'ze']=new Float32Array([-0x20ce+-0x260f+-0x46df*-0x1,0x1924+0x146d+0x6d*-0x6b,-0x2e*-0x21+0x23c8+-0x29b4]),this['_aabbNrmMi'+'n']=new Float32Array([-(0x2556+-0x3*-0x7c1+0x793*-0x8),-(-0x1562+-0x2ac+-0x180f*-0x1),-(0x1bca*0x1+0x29*-0x81+-0x4*0x1c8)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(0x1f8d+0x1901+0x1*-0x388d);}['destroy'](){var _0x2cbcc7,_0xb4bac3,_0x3af9ec,_0x117b5e;this['shader']=null;const _0x195faf=this['morph'];_0x195faf&&(this['morph']=null,_0x195faf['decRefCoun'+'t'](),_0x195faf['refCount']<0x1e77+0x1*-0x1b4e+-0x328&&_0x195faf['destroy']()),(_0x2cbcc7=this['rtPosition'+'s'])==null||_0x2cbcc7['destroy'](),this['rtPosition'+'s']=null,(_0xb4bac3=this['texturePos'+'itions'])==null||_0xb4bac3['destroy'](),this['texturePos'+'itions']=null,(_0x3af9ec=this['rtNormals'])==null||_0x3af9ec['destroy'](),this['rtNormals']=null,(_0x117b5e=this['textureNor'+'mals'])==null||_0x117b5e['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new oa(this['morph']);}['_getWeight'+'Index'](_0x3b16ba){if(typeof _0x3b16ba=='string'){const _0x13f4ab=this['_weightMap']['get'](_0x3b16ba);return _0x13f4ab===void(0x1652+-0x4*0x6fd+-0x2*-0x2d1)&&M['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x3b16ba+'.'),_0x13f4ab;}return _0x3b16ba;}['getWeight'](_0x1c7938){const _0x48242a=this['_getWeight'+'Index'](_0x1c7938);return this['_weights'][_0x48242a];}['setWeight'](_0x4dc91a,_0x22ae52){const _0x37a0e9=this['_getWeight'+'Index'](_0x4dc91a);M['assert'](_0x37a0e9>=0x1b53+-0x51f+-0x1634&&_0x37a0e9<this['morph']['_targets']['length']),this['_weights'][_0x37a0e9]=_0x22ae52,this['_dirty']=!(0x551*-0x1+0x1*-0x172b+0x1c7c);}['_createSha'+'der'](_0x59dbb4){const _0x2b43db=new Map();_0x2b43db['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x59dbb4),this['morph']['intRenderF'+'ormat']&&_0x2b43db['set']('MORPH_INT','');const _0x5b0095=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return Ut['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x59dbb4+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Pe},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x2b43db,'fragmentOutputTypes':[_0x5b0095]});}['_updateTex'+'tureRender'+'Target'](_0x4caf16,_0x34266f,_0x7c8c91){const {morph:_0x38c5d7,device:_0x17e2a8}=this;this['setAabbUni'+'forms'](_0x7c8c91),this['morphTextu'+'reId']['setValue'](_0x7c8c91?_0x38c5d7['targetsTex'+'turePositi'+'ons']:_0x38c5d7['targetsTex'+'tureNormal'+'s']),_0x17e2a8['setBlendSt'+'ate'](Ct['NOBLEND']),this['countId']['setValue'](_0x34266f),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),fr(_0x17e2a8,_0x4caf16,this['shader']);}['_updateTex'+'tureMorph'](_0x16c481){const _0x268d2b=this['device'];Q['pushGpuMar'+'ker'](_0x268d2b,'MorphUpdat'+'e'),(_0x16c481>0xc*0x66+-0x22c8+0x30*0xa0||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x16c481,!(-0x1cb2*0x1+-0x1*-0x2e7+0x1f*0xd5)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x16c481,!(-0x6bf+0x18c3*-0x1+0x1f83)),this['zeroTextur'+'es']=_0x16c481===0x1a*-0xb3+0x1d3f+-0xb11),Q['popGpuMark'+'er'](_0x268d2b);}['setAabbUni'+'forms'](_0x554549=!(0x2*-0x1075+-0xbf2*0x1+0x2cdc)){this['aabbSizeId']['setValue'](_0x554549?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x554549?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x14c834){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(-0x2b*-0x97+0xab2*-0x1+-0xeaa);const _0x318306=this['morph']['_targets'],_0x28a167=0x4*-0x57+0x1*-0xbe1+0xd3d+0.00001,_0x2f3d44=this['_shaderMor'+'phWeights'],_0x50540c=this['_shaderMor'+'phIndex'];let _0x3a139c=0xa89+0x1650+-0x20d9;for(let _0x347a77=-0x2508+0xb0d+0x19fb;_0x347a77<_0x318306['length'];_0x347a77++)Math['abs'](this['getWeight'](_0x347a77))>_0x28a167&&(_0x2f3d44[_0x3a139c]=this['getWeight'](_0x347a77),_0x50540c[_0x3a139c]=_0x347a77,_0x3a139c++);this['_updateTex'+'tureMorph'](_0x3a139c);}}class $i{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=0x8e0*0x1+-0x338*0x3+0xc8,this['_immutable']=!(0x4ca+-0xf48*-0x1+-0x1411));}['getGraph'](){return this['graph'];}['setGraph'](_0x36cb37){this['graph']=_0x36cb37;}['getCameras'](){return this['cameras'];}['setCameras'](_0x1f6a7c){this['cameras']=_0x1f6a7c;}['getLights'](){return this['lights'];}['setLights'](_0x369147){this['lights']=_0x369147;}['getMateria'+'ls'](){const _0x3c9319=[];for(let _0x4caab5=-0xb*-0x1c5+0x1*0x11ef+-0x2566;_0x4caab5<this['meshInstan'+'ces']['length'];_0x4caab5++){const _0x8726d5=this['meshInstan'+'ces'][_0x4caab5];_0x3c9319['indexOf'](_0x8726d5['material'])===-(0x42b*0x3+-0x217c+0x14fc)&&_0x3c9319['push'](_0x8726d5['material']);}return _0x3c9319;}['clone'](){const _0x42585b=[],_0x27b753=[],_0x1b7835=function(_0x176113){const _0x366f82=_0x176113['clone']();_0x42585b['push'](_0x176113),_0x27b753['push'](_0x366f82);for(let _0x2483df=-0x85e*0x1+0x2*-0xcbb+0x21d4;_0x2483df<_0x176113['_children']['length'];_0x2483df++)_0x366f82['addChild'](_0x1b7835(_0x176113['_children'][_0x2483df]));return _0x366f82;},_0x3b9a8f=_0x1b7835(this['graph']),_0x3894bc=[],_0x1c75e1=[],_0x819ed5=[];for(let _0xb7d81b=-0xdd7+0x98*-0x3e+0x32a7*0x1;_0xb7d81b<this['skinInstan'+'ces']['length'];_0xb7d81b++){const _0x126427=this['skinInstan'+'ces'][_0xb7d81b]['skin'],_0x3d9930=new hl(_0x126427),_0x4d5d7b=[];for(let _0x3eb1ae=0xa7b+0x44*0x67+-0x25d7;_0x3eb1ae<_0x126427['boneNames']['length'];_0x3eb1ae++){const _0x4eaa63=_0x126427['boneNames'][_0x3eb1ae],_0x3229c6=_0x3b9a8f['findByName'](_0x4eaa63);_0x4d5d7b['push'](_0x3229c6);}_0x3d9930['bones']=_0x4d5d7b,_0x1c75e1['push'](_0x3d9930);}for(let _0x4b44ea=-0xd*-0x215+-0xd96+-0xd7b;_0x4b44ea<this['morphInsta'+'nces']['length'];_0x4b44ea++){const _0x3f62f0=this['morphInsta'+'nces'][_0x4b44ea]['morph'],_0x592249=new oa(_0x3f62f0);_0x819ed5['push'](_0x592249);}for(let _0x302eaf=-0x1ed4+0xb6+-0x1*-0x1e1e;_0x302eaf<this['meshInstan'+'ces']['length'];_0x302eaf++){const _0x29bf82=this['meshInstan'+'ces'][_0x302eaf],_0x3d16e0=_0x42585b['indexOf'](_0x29bf82['node']),_0xe75751=new We(_0x29bf82['mesh'],_0x29bf82['material'],_0x27b753[_0x3d16e0]);if(_0x29bf82['skinInstan'+'ce']){const _0x20127c=this['skinInstan'+'ces']['indexOf'](_0x29bf82['skinInstan'+'ce']);_0xe75751['skinInstan'+'ce']=_0x1c75e1[_0x20127c];}if(_0x29bf82['morphInsta'+'nce']){const _0x4fea86=this['morphInsta'+'nces']['indexOf'](_0x29bf82['morphInsta'+'nce']);_0xe75751['morphInsta'+'nce']=_0x819ed5[_0x4fea86];}_0x3894bc['push'](_0xe75751);}const _0x995edd=new $i();return _0x995edd['graph']=_0x3b9a8f,_0x995edd['meshInstan'+'ces']=_0x3894bc,_0x995edd['skinInstan'+'ces']=_0x1c75e1,_0x995edd['morphInsta'+'nces']=_0x819ed5,_0x995edd['getGraph']()['syncHierar'+'chy'](),_0x995edd;}['destroy'](){const _0x1e5641=this['meshInstan'+'ces'];for(let _0x3e5128=-0x595+-0x16b6+0x1c4b;_0x3e5128<_0x1e5641['length'];_0x3e5128++)_0x1e5641[_0x3e5128]['destroy']();this['meshInstan'+'ces']['length']=-0x1*-0x14a5+0xad1+-0x1f76;}['generateWi'+'reframe'](){We['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],Ir);}}class Ny extends jc{constructor(_0x7bf080,_0x263a93,{preferHighPrecision:_0x3906c0=!(0x1*-0x68e+0x1b47+-0x14b8)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(M['assert'](_0x263a93,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x263a93);const _0x180706=_0x263a93;this['preferHigh'+'Precision']=_0x3906c0,M['assert'](_0x7bf080['every'](_0x19a018=>!_0x19a018['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x7bf080['slice']();const _0x185b96=_0x180706['textureHal'+'fFloatRend'+'erable']?at:void(0xe*0x1f5+0x16ab+-0x3211),_0x1fff2d=_0x180706['textureFlo'+'atRenderab'+'le']?Bt:void(-0x1*0x7db+-0x5*-0x291+-0x4fa);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x1fff2d??_0x185b96:_0x185b96??_0x1fff2d,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??Dc,this['intRenderF'+'ormat']=Ya(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Bt:at,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0xe4f5b2,_0xf160d,_0x3c0468;(_0xe4f5b2=this['vertexBuff'+'erIds'])==null||_0xe4f5b2['destroy'](),this['vertexBuff'+'erIds']=null,(_0xf160d=this['targetsTex'+'turePositi'+'ons'])==null||_0xf160d['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x3c0468=this['targetsTex'+'tureNormal'+'s'])==null||_0x3c0468['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x2d8b8b=new I(),_0x6dd686=new I();for(let _0xa1e23c=-0x1ee4+0x13f1*-0x1+0x32d5;_0xa1e23c<this['_targets']['length'];_0xa1e23c++){const _0x1f09eb=this['_targets'][_0xa1e23c]['aabb'];_0x2d8b8b['min'](_0x1f09eb['getMin']()),_0x6dd686['max'](_0x1f09eb['getMax']());}this['_aabb']=new Ie(),this['_aabb']['setMinMax'](_0x2d8b8b,_0x6dd686);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x3521a9=0x7ff+0x101d+0x1*-0x181c;_0x3521a9<this['_targets']['length'];_0x3521a9++)this['_targets'][_0x3521a9]['_postInit']();}['_findSpars'+'eSet'](_0x442511,_0x2dd19c,_0x465a3e){let _0x40a494=-0xc07+-0x4*-0x162+0x680;const _0x28ebe8=_0x442511[-0x2584+0x672+0x1f12]['length'];for(let _0x51f2a6=0xbd5*0x1+-0x14*-0xb+-0xcb1;_0x51f2a6<_0x28ebe8;_0x51f2a6+=-0x1*-0x1011+0x2*0x925+-0x274*0xe){let _0x54b112=!(-0x18b6+0x2013+0xc*-0x9d);for(let _0x398f3c=-0x71*-0x31+-0x22*-0x10d+-0x395b;_0x398f3c<_0x442511['length'];_0x398f3c++){const _0x2a69a6=_0x442511[_0x398f3c];if(_0x2a69a6[_0x51f2a6]!==0x10ae+0x2*0x10c1+-0x3230||_0x2a69a6[_0x51f2a6+(-0x1*-0x2a6+0x2215*0x1+-0x24ba)]!==-0x45b+-0xdab*0x1+0x1206||_0x2a69a6[_0x51f2a6+(0x21f5*0x1+0x411*0x3+-0x2e26)]!==-0x21cd+-0x25*-0x17+0xa6*0x2f){_0x54b112=!(0xcbb*-0x1+-0x82*0xc+-0x3d*-0x4f);break;}}_0x54b112?(_0x2dd19c['push'](_0x40a494),_0x465a3e['push'](_0x51f2a6/(-0x27*-0x95+0x209+-0x18b9)),_0x40a494++):_0x2dd19c['push'](0x1433+0x29*0x83+-0x292e);}return _0x40a494;}['_initTextu'+'reBased'](){const _0x111389=[],_0x4d99f0=[],_0x22d49b=this['_targets'];for(let _0x2b378d=-0x153f+0x1a4a+0x50b*-0x1;_0x2b378d<_0x22d49b['length'];_0x2b378d++){const _0x28ec33=_0x22d49b[_0x2b378d];_0x28ec33['options']['deltaPosit'+'ions']&&(_0x111389['push'](_0x28ec33['options']['deltaPosit'+'ions']),_0x4d99f0['push'](!(-0x13f5+0x25e2+-0x11ed))),_0x28ec33['options']['deltaNorma'+'ls']&&(_0x111389['push'](_0x28ec33['options']['deltaNorma'+'ls']),_0x4d99f0['push'](!(-0x2362+0x130f+0x1054)));}const _0x5d505e=[],_0xc9844=[],_0x34dc91=this['_findSpars'+'eSet'](_0x111389,_0x5d505e,_0xc9844),_0x3edbb7=this['device']['maxTexture'+'Size'];let _0x1e30fe=Math['ceil'](Math['sqrt'](_0x34dc91));_0x1e30fe=Math['min'](_0x1e30fe,_0x3edbb7);const _0x24f6ea=Math['ceil'](_0x34dc91/_0x1e30fe);if(_0x24f6ea>_0x3edbb7){M['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x1e30fe+'x'+_0x24f6ea+(',\x20max\x20text'+'ure\x20size:\x20')+_0x3edbb7+'x'+_0x3edbb7+'.');return;}this['morphTextu'+'reWidth']=_0x1e30fe,this['morphTextu'+'reHeight']=_0x24f6ea;let _0x5dd51d=!(0x3*0x197+0x202c+0x18*-0x18a);const _0x516b72=mn['float2Half'];this['_textureFo'+'rmat']===at&&(_0x5dd51d=!(0xc*-0x21+-0x55a+0x6e6));const _0x618be7=[],_0x3429ca=[],_0x472c66=_0x1e30fe*_0x24f6ea*(0x74*-0x7+-0x1007+0x1337);for(let _0x44171d=0x511+0x13d4+-0x1*0x18e5;_0x44171d<_0x111389['length'];_0x44171d++){const _0x59e29c=_0x111389[_0x44171d],_0x4da38b=this['_textureFo'+'rmat']===at?new Uint16Array(_0x472c66):new Float32Array(_0x472c66);if((_0x4d99f0[_0x44171d]?_0x618be7:_0x3429ca)['push'](_0x4da38b),_0x5dd51d)for(let _0x2874c0=-0x2*-0x5c5+0x9a3*0x1+-0x1*0x152d;_0x2874c0<_0xc9844['length'];_0x2874c0++){const _0x37126a=_0xc9844[_0x2874c0]*(-0x33b*-0xa+0x22+-0x206d*0x1),_0x4c5cd7=_0x2874c0*(0x2a2*-0x9+0x11c*0x18+0x2*-0x175)+(0x2012*0x1+0xd31*0x2+-0x5d8*0xa);_0x4da38b[_0x4c5cd7]=_0x516b72(_0x59e29c[_0x37126a]),_0x4da38b[_0x4c5cd7+(-0x2*0xffb+-0xa8b*0x1+0x2a82)]=_0x516b72(_0x59e29c[_0x37126a+(-0x590+0x1*0xff6+0x1*-0xa65)]),_0x4da38b[_0x4c5cd7+(0x1d5*-0xe+-0x2e*-0x35+0x1022)]=_0x516b72(_0x59e29c[_0x37126a+(0x2*0x512+0x1b7a+-0x259c)]);}else for(let _0x29a5e5=-0x212b+-0x2567+-0x1786*-0x3;_0x29a5e5<_0xc9844['length'];_0x29a5e5++){const _0x3a704e=_0xc9844[_0x29a5e5]*(-0x1bec+0x6ac+0x1543),_0x4d2741=_0x29a5e5*(-0x2384+0x9eb+0x199d)+(0xe24+0x13*-0x6d+-0x3*0x203);_0x4da38b[_0x4d2741]=_0x59e29c[_0x3a704e],_0x4da38b[_0x4d2741+(-0xc7e+-0x24ad+-0x2*-0x1896)]=_0x59e29c[_0x3a704e+(0x471+0xa1f+-0xe8f)],_0x4da38b[_0x4d2741+(-0x13fc+0x20e9+-0xceb)]=_0x59e29c[_0x3a704e+(-0x9d1*-0x2+-0x1ea1*-0x1+-0x3241)];}}_0x618be7['length']>0x1480+-0x65*0x19+0x7*-0x185&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x22d49b['length'],[_0x618be7]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x3429ca['length']>0x415+0xab3*-0x1+0x69e&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x22d49b['length'],[_0x3429ca]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x42c124=[{'semantic':_n,'components':0x1,'type':Do,'asInt':!(-0x136a*0x1+-0x3*0xb74+0x35c6)}];return this['vertexBuff'+'erIds']=new xs(this['device'],new zt(this['device'],_0x42c124,_0x5d505e['length']),_0x5d505e['length'],{'data':new Uint32Array(_0x5d505e)}),!(0x260a+-0xb*-0x69+-0x3*0xe2f);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(0x1b9+-0xe1*0x16+0x119e),this['_morphNorm'+'als']=!(0x1e66+-0xa78+-0x13ed);for(let _0x2404df=0xb*0xdc+-0xf5e+-0x2*-0x2f5;_0x2404df<this['_targets']['length'];_0x2404df++){const _0x1262e1=this['_targets'][_0x2404df];_0x1262e1['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(-0x1*-0x215b+-0x12*0x7d+-0x1891)),_0x1262e1['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0x6*-0x234+-0x1*-0xcdc+-0x4*-0x17));}}['_createTex'+'ture'](_0x1574a4,_0x2d7e2c,_0x21c318,_0x5a3570){return new _e(this['device'],{'levels':_0x5a3570,'arrayLength':_0x21c318,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x2d7e2c,'cubemap':!(0x4*-0x46a+-0x1fbd+0x1*0x3166),'mipmaps':!(-0x697*0x1+-0x1d65+0x25*0xf9),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x1574a4});}}class ed{constructor(_0x5394c0){h(this,'used',!(-0xb11+0xa02+0x110)),(M['assert'](arguments['length']===0x59b*-0x1+0x1*-0x25db+-0x1*-0x2b77),this['options']=_0x5394c0,this['_name']=_0x5394c0['name'],this['_defaultWe'+'ight']=_0x5394c0['defaultWei'+'ght']||0x1162+0xbdc+-0xc5*0x26,this['_aabb']=_0x5394c0['aabb'],this['deltaPosit'+'ions']=_0x5394c0['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x5394c0['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x5394c0['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new Ie(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return M['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new ed(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(-0x152f+0x8d*-0x35+0xd0*0x3e);}}let _i,f_=0xbbb+0x27a*0x2+-0x262*0x7;const he=0x77c+0x24e+-0x9c6,Ud=new te(),Bd=new te(),$s=new I(),et=new I(),Cs=new I(),wa=new I(),Jt=new I(),ut=new I(),Ea=new I(),Aa=new I(),jn=new I(),u_=new I(),Rt=new I(),Vl=new I(),Tr=new I();function Ja(_0x4b9493){return _0x4b9493-Math['floor'](_0x4b9493);}function wA(_0x33acd8){return Math['max'](Math['min'](_0x33acd8,-0x1841+0x1534+-0x2e*-0x11),0x3*-0xbdd+-0x1bd4+-0x3bb*-0x11);}function zd(_0x5e39d7,_0x465ef3){return _0x5e39d7-_0x465ef3*Math['floor'](_0x5e39d7/_0x465ef3);}function EA(_0x477f21){let _0x400b19=Ja(_0x477f21),_0x4ebe84=Ja((-0x3da+0x323+-0x1*-0x1b6)*_0x477f21),_0x145778=Ja((0x7*-0x245b+-0x1*-0x1e2aa+0x1d*0xe4)*_0x477f21),_0x1834ce=Ja((0x8c68626+-0x2*-0x1706737+-0x55e1*0x635)*_0x477f21);return _0x400b19-=_0x4ebe84/(-0x7*-0x269+-0x229b+0x12bb),_0x4ebe84-=_0x145778/(0x4c*-0x7+0xe*-0x94+0xb2b),_0x145778-=_0x1834ce/(0x115c+0x23e3+0x3440*-0x1),_0x1834ce-=_0x1834ce/(-0x57e*-0x4+-0x2602+0x1109),[_0x400b19,_0x4ebe84,_0x145778,_0x1834ce];}function Gl(_0x309c73){let _0xb61edb=Ja(_0x309c73),_0x3c93d3=Ja((0x2470+-0x1280+-0x10f1)*_0x309c73);return _0xb61edb-=_0x3c93d3/(-0x1*0xb3a+-0x3ea+0x561*0x3),_0x3c93d3-=_0x3c93d3/(-0x239*0x11+0x26*-0xe3+0x2*0x243d),[_0xb61edb,_0x3c93d3];}class AA{constructor(_0x1b5f25){this['_emitter']=_0x1b5f25;}['calcSpawnP'+'osition'](_0x24ee09,_0x42a9ea,_0x51b578,_0x2b6477,_0x149e69){const _0x3f3fae=this['_emitter'],_0x2c8669=Math['random'](),_0x50abec=Math['random'](),_0x1dba1f=Math['random'](),_0x543dfa=Math['random']();if(_0x3f3fae['useCpu']&&(_0x24ee09[_0x149e69*he+(-0x478*0x1+-0x869*-0x4+-0x1d2c)+_0x3f3fae['numParticl'+'esPot']*(0x13f5+-0x17d8+0x1*0x3e5)*he]=_0x2c8669,_0x24ee09[_0x149e69*he+(0xf*0x296+0x4e3*-0x5+-0xb*0x14e)+_0x3f3fae['numParticl'+'esPot']*(-0x1089+0xb*-0x9b+0x84*0x2d)*he]=_0x50abec,_0x24ee09[_0x149e69*he+(-0x2271+0x158f+0xce4)+_0x3f3fae['numParticl'+'esPot']*(-0x29*0x1d+-0x1e22+0x89*0x41)*he]=_0x1dba1f),et['x']=_0x2c8669-(-0x23*-0xeb+0x1fe+-0x221f+0.5),et['y']=_0x50abec-(0xa*0x27+0x1bdf*0x1+-0x1d65+0.5),et['z']=_0x1dba1f-(-0x1c4a+0x1*0x19c9+-0x1*-0x281+0.5),_0x3f3fae['emitterSha'+'pe']===Ys){const _0x399a6c=Math['max'](Math['abs'](et['x']),Math['max'](Math['abs'](et['y']),Math['abs'](et['z']))),_0x317676=_0x399a6c+(0xef3+-0x385*-0xb+-0x35aa+0.5-_0x399a6c)*_0x51b578[0x15b*0xa+0xd09+-0x1a97],_0x1d87b8=_0x399a6c+(-0xc37+0x2173*0x1+-0x153c+0.5-_0x399a6c)*_0x51b578[-0x276+0x383+-0x10c],_0x49674a=_0x399a6c+(0x5a1*-0x3+-0x4cf*0x4+0x241f+0.5-_0x399a6c)*_0x51b578[-0x1f77+0x1*-0x2522+0x449b];et['x']=_0x317676*(_0x399a6c===Math['abs'](et['x'])?Math['sign'](et['x']):(0x8bf*0x1+0x4*-0x647+0x105f)*et['x']),et['y']=_0x1d87b8*(_0x399a6c===Math['abs'](et['y'])?Math['sign'](et['y']):(0x910+0x593+-0xea1)*et['y']),et['z']=_0x49674a*(_0x399a6c===Math['abs'](et['z'])?Math['sign'](et['z']):(0x9*0x2bf+0xab8+0xbcf*-0x3)*et['z']),_0x3f3fae['localSpace']?$s['copy'](_0x42a9ea['transformP'+'oint'](et)):$s['copy'](_0x2b6477)['add'](_0x42a9ea['transformP'+'oint'](et));}else{et['normalize']();const _0x1dd548=_0x3f3fae['emitterRad'+'ius']===0x19fc+0x133e+-0x2d3a?0x1c2b*-0x1+0x26d5*0x1+0x4e*-0x23:_0x3f3fae['emitterRad'+'iusInner']/_0x3f3fae['emitterRad'+'ius'],_0x32f013=_0x543dfa*(0x9*-0x29+-0xec6*0x1+0x1038-_0x1dd548)+_0x1dd548;_0x3f3fae['localSpace']?$s['copy'](et['mulScalar'](_0x32f013*_0x3f3fae['emitterRad'+'ius'])):$s['copy'](_0x2b6477)['add'](et['mulScalar'](_0x32f013*_0x3f3fae['emitterRad'+'ius']));}let _0xa9005c=-Y['lerp'](_0x3f3fae['rate'],_0x3f3fae['rate2'],_0x2c8669)*_0x149e69;if(_0x3f3fae['pack8']){const _0x3d3323=($s['x']-_0x3f3fae['worldBound'+'s']['center']['x'])/_0x3f3fae['worldBound'+'sSize']['x']+(-0x129e*-0x1+-0x1517*0x1+0x279+0.5),_0x2d57ad=($s['y']-_0x3f3fae['worldBound'+'s']['center']['y'])/_0x3f3fae['worldBound'+'sSize']['y']+(0x2675+0x17ce+0x21*-0x1e3+0.5),_0x300e61=($s['z']-_0x3f3fae['worldBound'+'s']['center']['z'])/_0x3f3fae['worldBound'+'sSize']['z']+(0x39d*0x2+-0x2524+0x446*0x7+0.5);let _0x176d34=Y['lerp'](_0x3f3fae['startAngle']*Y['DEG_TO_RAD'],_0x3f3fae['startAngle'+'2']*Y['DEG_TO_RAD'],_0x2c8669);_0x176d34=_0x176d34%(Math['PI']*(0xa43+0x2404+-0x5*0x941))/(Math['PI']*(0x14*-0x52+0x167b+0x55b*-0x3));const _0x543667=Gl(_0x3d3323);_0x24ee09[_0x149e69*he]=_0x543667[0xedc+0x7d3+-0x16af],_0x24ee09[_0x149e69*he+(-0x232f+-0x8*-0x10f+0x1ab8)]=_0x543667[0x71*0xc+-0x1*-0x447+-0x992];const _0x8ff28d=Gl(_0x2d57ad);_0x24ee09[_0x149e69*he+(0x185a+0xe4c+-0x26a4)]=_0x8ff28d[-0x5*0x461+0xb51*0x1+0xa94],_0x24ee09[_0x149e69*he+(-0x1*0x124c+0x5*0x683+-0xe40)]=_0x8ff28d[0xd47+0x2099+0x1*-0x2ddf];const _0x30c8e3=Gl(_0x300e61);_0x24ee09[_0x149e69*he+(-0x1d99+0x4ad+0x18ec)+_0x3f3fae['numParticl'+'esPot']*he]=_0x30c8e3[-0x4d4+0x7f7+-0x323*0x1],_0x24ee09[_0x149e69*he+(-0x206e*0x1+-0x1bae+-0xb*-0x577)+_0x3f3fae['numParticl'+'esPot']*he]=_0x30c8e3[0x1542+-0x26cb*-0x1+-0x3c0c*0x1];const _0x5bd88c=Gl(_0x176d34);_0x24ee09[_0x149e69*he+(-0x1*0xcf2+0x15cf+-0x8db)+_0x3f3fae['numParticl'+'esPot']*he]=_0x5bd88c[-0x593+-0x1*-0xa31+-0x49e],_0x24ee09[_0x149e69*he+(0x1956+-0xc25*-0x2+-0x319d)+_0x3f3fae['numParticl'+'esPot']*he]=_0x5bd88c[0x1206+-0x1f96+0xd91];const _0x22a384=0x1*-0x3d5+-0x4*0x468+0x1576;_0x24ee09[_0x149e69*he+(-0x2f6*-0x1+0xd*-0xbe+0x1*0x6b3)+_0x3f3fae['numParticl'+'esPot']*he*(0x12*-0x197+-0x9fe+0x269e)]=_0x22a384;const _0x3bf4ff=Math['max'](_0x3f3fae['lifetime'],(_0x3f3fae['numParticl'+'es']-(0xab1+-0x7a*0x1d+0x2*0x191))*Math['max'](_0x3f3fae['rate'],_0x3f3fae['rate2'])),_0x261b9d=_0x3f3fae['lifetime']+(0x3d*0x2+0x1c93+0x743*-0x4);_0xa9005c=(_0xa9005c+_0x3bf4ff)/(_0x3bf4ff+_0x261b9d);const _0x4acdf2=EA(_0xa9005c);_0x24ee09[_0x149e69*he+(0x1c6b+-0x34*0x75+-0x4a7)+_0x3f3fae['numParticl'+'esPot']*he*(0x1*-0x245+-0x4*-0x769+-0x1*0x1b5c)]=_0x4acdf2[0xb*0x120+-0xc0d+-0x53],_0x24ee09[_0x149e69*he+(-0x20d1+-0x7*0x39d+0x3a1d)+_0x3f3fae['numParticl'+'esPot']*he*(0x185d+0x19bf+-0x3219)]=_0x4acdf2[0x9e6*0x1+0x5*-0x437+0xb2e],_0x24ee09[_0x149e69*he+(-0x18bb+-0x33b*0x1+0x1bf8)+_0x3f3fae['numParticl'+'esPot']*he*(-0x744+0x12dc+-0xb95)]=_0x4acdf2[-0x140*-0x7+-0xa19+0x15b],_0x24ee09[_0x149e69*he+(-0x15a6+-0x2*-0x1277+-0xf45)+_0x3f3fae['numParticl'+'esPot']*he*(0x5bd+0x1999*-0x1+-0x1*-0x13df)]=_0x4acdf2[0x34e+0xe5*0x13+0x173*-0xe];}else _0x24ee09[_0x149e69*he]=$s['x'],_0x24ee09[_0x149e69*he+(-0x3c*0x2b+0x23b*0x10+0x1*-0x199b)]=$s['y'],_0x24ee09[_0x149e69*he+(0xf*0x18b+-0x6*-0x577+-0x37ed)]=$s['z'],_0x24ee09[_0x149e69*he+(0x6ef+0x20d3+-0x27bf)]=Y['lerp'](_0x3f3fae['startAngle']*Y['DEG_TO_RAD'],_0x3f3fae['startAngle'+'2']*Y['DEG_TO_RAD'],_0x2c8669),_0x24ee09[_0x149e69*he+(0x5*0x379+-0x4*0xef+0xf9*-0xe)+_0x3f3fae['numParticl'+'esPot']*he]=_0xa9005c;}['update'](_0x4f6162,_0x4616de,_0x36ebe6,_0x51b4ff,_0xb75483,_0x1cc61a,_0x4b14aa,_0x174dd){let _0x32bf32,_0x52c859,_0x919715;const _0x3ca792=this['_emitter'];if(_0x3ca792['meshInstan'+'ce']['node']){const _0x4b0b7e=_0x3ca792['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x505f42=-0x3*0x5da+0x5*-0x5b9+0x2e2b*0x1;_0x505f42<-0x2b*-0x4e+-0x14*-0x44+-0x125e;_0x505f42++)Ud['data'][_0x505f42]=_0x4b0b7e['data'][_0x505f42];Bd['copy'](Ud),Bd['invert'](),_i=_0x3ca792['meshInstan'+'ce']['node']['localScale'],f_=Math['max'](Math['max'](_i['x'],_i['y']),_i['z']);}_0x1cc61a=_0x3ca792['meshInstan'+'ce']['node']===null||_0x3ca792['localSpace']?I['ZERO']:_0x3ca792['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x28230c=_0x3ca792['camera']?_0x3ca792['camera']['_node']['getPositio'+'n']():I['ZERO'],_0x5cbfec=_0x3ca792['useMesh']?-0xa0*-0x28+-0x25f7*-0x1+-0x1*0x3ee6:-0x2245+-0x669*-0x1+0x7*0x3fd;let _0x4e11a6,_0x377b5b,_0x1d6c26,_0x5ca35e,_0xb834b4,_0x57f635,_0x34aa65,_0x2b2124,_0x5b04cc;const _0x207bbf=_0x3ca792['precision']-(0x15d1+0x1ddd+-0x33ad);for(let _0x24d201=-0x24cd*0x1+-0x2*-0x1006+-0x4c1*-0x1;_0x24d201<_0x3ca792['numParticl'+'es'];_0x24d201++){const _0x2b7cbd=Math['floor'](_0x3ca792['vbCPU'][_0x24d201*_0x3ca792['numParticl'+'eVerts']*(_0x3ca792['useMesh']?-0x1*0x2f7+0x1*0xf7f+0x1*-0xc82:-0x8*0x67+0x1*0xd8d+-0x8b*0x13)+(-0xdc3+0x1d03*0x1+-0xf3d)]),_0xaa819d=_0x36ebe6[_0x2b7cbd*he+(0x1*0xf77+-0x63b+0x2*-0x49e)+_0x3ca792['numParticl'+'esPot']*(-0xc50*-0x2+-0x30*-0x1+-0x2*0xc67)*he];Cs['x']=_0xaa819d,Cs['y']=_0x36ebe6[_0x2b7cbd*he+(-0x7c1+-0x47+0x809)+_0x3ca792['numParticl'+'esPot']*(0x1*0x267b+-0x5e9+-0x2090)*he],Cs['z']=_0x36ebe6[_0x2b7cbd*he+(-0x127a+0x1*0x21ad+0xf31*-0x1)+_0x3ca792['numParticl'+'esPot']*(0x2a1*0xb+-0x67f*0x4+0x1*-0x2ed)*he];const _0x3ce6ed=_0x3ca792['rate']+(_0x3ca792['rate2']-_0x3ca792['rate'])*_0xaa819d,_0x27822c=_0x3ca792['lifetime'];let _0x464ffa=_0x36ebe6[_0x2b7cbd*he+(0xf*0x271+0x39*-0x3d+-0x1707)+_0x3ca792['numParticl'+'esPot']*he]+_0x4b14aa;const _0x3c67ed=wA(_0x464ffa/_0x27822c);let _0x280eba=0x1318*0x2+0x247d+-0x4aad*0x1,_0x41840e=0x3*0x322+-0x1*-0x260c+-0x2f72;const _0x4008d7=0x25*0xe9+-0x100e+-0x119f;(_0x464ffa-_0x4b14aa<=-0x3d*-0x71+-0x2cb+-0xc11*0x2||_0x464ffa>=_0x27822c)&&this['calcSpawnP'+'osition'](_0x36ebe6,_0x51b4ff,_0xb75483,_0x1cc61a,_0x2b7cbd);let _0x339fff=_0x464ffa>0x5*-0x69+0x45+0x1c8&&_0x464ffa<_0x27822c;_0x339fff&&(_0x919715=_0x3c67ed*_0x207bbf,_0x4e11a6=Math['floor'](_0x919715),_0x377b5b=Math['ceil'](_0x919715),_0x919715%=0x24b9+-0x281*0x2+-0x1fb6,_0x32bf32=_0x3ca792['qRotSpeed'][_0x4e11a6],_0x52c859=_0x3ca792['qRotSpeed'][_0x377b5b],_0x1d6c26=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qRotSpeed2'][_0x4e11a6],_0x52c859=_0x3ca792['qRotSpeed2'][_0x377b5b],_0x5ca35e=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qScale'][_0x4e11a6],_0x52c859=_0x3ca792['qScale'][_0x377b5b],_0x280eba=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qScale2'][_0x4e11a6],_0x52c859=_0x3ca792['qScale2'][_0x377b5b],_0xb834b4=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qAlpha'][_0x4e11a6],_0x52c859=_0x3ca792['qAlpha'][_0x377b5b],_0x57f635=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qAlpha2'][_0x4e11a6],_0x52c859=_0x3ca792['qAlpha2'][_0x377b5b],_0x34aa65=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qRadialSpe'+'ed'][_0x4e11a6],_0x52c859=_0x3ca792['qRadialSpe'+'ed'][_0x377b5b],_0x2b2124=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qRadialSpe'+'ed2'][_0x4e11a6],_0x52c859=_0x3ca792['qRadialSpe'+'ed2'][_0x377b5b],_0x5b04cc=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x2b2124+=(_0x5b04cc-_0x2b2124)*(_0xaa819d*(0x1*0x18eb+0x1518+0xe5*-0x33)%(0x144e+0xab0+-0x1efd)),wa['x']=_0x36ebe6[_0x2b7cbd*he],wa['y']=_0x36ebe6[_0x2b7cbd*he+(-0x7*-0x464+0x1e4a*-0x1+0x1*-0x71)],wa['z']=_0x36ebe6[_0x2b7cbd*he+(-0x9*0x1bf+0x226e+-0x12b5)],_0x3ca792['localSpace']?jn['copy'](wa):jn['copy'](wa)['sub'](_0x1cc61a),jn['normalize']()['mulScalar'](_0x2b2124),_0x4e11a6*=0x25df+0x1968+-0x3f44,_0x377b5b*=-0x41d*0x9+0x1*0x1550+0xfb8,_0x32bf32=_0x3ca792['qLocalVelo'+'city'][_0x4e11a6],_0x52c859=_0x3ca792['qLocalVelo'+'city'][_0x377b5b],ut['x']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qLocalVelo'+'city'][_0x4e11a6+(0x475+0x313+0x787*-0x1)],_0x52c859=_0x3ca792['qLocalVelo'+'city'][_0x377b5b+(0x993+-0x16ab*-0x1+-0x1*0x203d)],ut['y']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qLocalVelo'+'city'][_0x4e11a6+(-0x4bc*-0x1+-0x4*0xf4+-0x75*0x2)],_0x52c859=_0x3ca792['qLocalVelo'+'city'][_0x377b5b+(-0x2558*0x1+0x17*0x47+-0x9*-0x371)],ut['z']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qLocalVelo'+'city2'][_0x4e11a6],_0x52c859=_0x3ca792['qLocalVelo'+'city2'][_0x377b5b],Aa['x']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qLocalVelo'+'city2'][_0x4e11a6+(0x1d8b+-0xb85+-0x1205)],_0x52c859=_0x3ca792['qLocalVelo'+'city2'][_0x377b5b+(0x1*0x187a+0x1061*-0x1+-0x818)],Aa['y']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qLocalVelo'+'city2'][_0x4e11a6+(0x3*0x1c6+-0x23a4+0x1e54)],_0x52c859=_0x3ca792['qLocalVelo'+'city2'][_0x377b5b+(-0x17e6+0x699+-0x15*-0xd3)],Aa['z']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity'][_0x4e11a6],_0x52c859=_0x3ca792['qVelocity'][_0x377b5b],Jt['x']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity'][_0x4e11a6+(0x111a+-0x2690*0x1+-0x7*-0x311)],_0x52c859=_0x3ca792['qVelocity'][_0x377b5b+(-0x3f*0x21+0xf2e+-0x70e)],Jt['y']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity'][_0x4e11a6+(-0x2560+0x1*0x56f+-0x1*-0x1ff3)],_0x52c859=_0x3ca792['qVelocity'][_0x377b5b+(-0x2255+-0x67b*0x1+-0x2*-0x1469)],Jt['z']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity2'][_0x4e11a6],_0x52c859=_0x3ca792['qVelocity2'][_0x377b5b],Ea['x']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity2'][_0x4e11a6+(-0x1fde*-0x1+-0xbb+-0x1f22)],_0x52c859=_0x3ca792['qVelocity2'][_0x377b5b+(0x21b2+0x1*0x2241+-0x43f2)],Ea['y']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,_0x32bf32=_0x3ca792['qVelocity2'][_0x4e11a6+(0x2*-0x121f+-0xc01+0xb*0x463)],_0x52c859=_0x3ca792['qVelocity2'][_0x377b5b+(0x18c5+0x242*0x11+-0x109*0x3d)],Ea['z']=_0x32bf32+(_0x52c859-_0x32bf32)*_0x919715,ut['x']+=(Aa['x']-ut['x'])*Cs['x'],ut['y']+=(Aa['y']-ut['y'])*Cs['y'],ut['z']+=(Aa['z']-ut['z'])*Cs['z'],_0x3ca792['initialVel'+'ocity']>-0x10f*-0x21+0x39f*0x5+-0x350a&&(_0x3ca792['emitterSha'+'pe']===KT?(et['copy'](Cs)['mulScalar'](-0xa54*-0x1+0x12fb*-0x1+-0x1*-0x8a9)['sub'](I['ONE'])['normalize'](),ut['add'](et['mulScalar'](_0x3ca792['initialVel'+'ocity']))):ut['add'](I['FORWARD']['mulScalar'](_0x3ca792['initialVel'+'ocity']))),Jt['x']+=(Ea['x']-Jt['x'])*Cs['x'],Jt['y']+=(Ea['y']-Jt['y'])*Cs['y'],Jt['z']+=(Ea['z']-Jt['z'])*Cs['z'],_0x1d6c26+=(_0x5ca35e-_0x1d6c26)*Cs['y'],_0x280eba=(_0x280eba+(_0xb834b4-_0x280eba)*(_0xaa819d*(-0x1a38+0x1*0x23a9+0x1d9f*0x1)%(-0x7*0x1e4+0x1f72+-0x1235*0x1)))*f_,_0x41840e=(_0x34aa65-_0x57f635)*(_0xaa819d*(0x2c9+-0x379+-0xc4*-0x6)%(0x2b4+-0xf37+-0x4*-0x321)),_0x3ca792['meshInstan'+'ce']['node']&&(_0x3ca792['localSpace']?(ut['x']/=_i['x'],ut['y']/=_i['y'],ut['z']/=_i['z']):Ud['transformP'+'oint'](ut,ut)),_0x3ca792['localSpace']?(Bd['transformP'+'oint'](Jt,Jt),ut['add'](Jt)['add'](jn)):(ut['add'](Jt['mul'](_i)),ut['add'](jn['mul'](_i))),Vl['copy'](ut),u_['copy'](wa)['add'](ut['mulScalar'](_0x4b14aa)),Rt['copy'](u_),_0x36ebe6[_0x2b7cbd*he]=Rt['x'],_0x36ebe6[_0x2b7cbd*he+(0x18a+-0x59*-0x52+-0x1e0b*0x1)]=Rt['y'],_0x36ebe6[_0x2b7cbd*he+(0x1*0x5bf+0x2564*-0x1+-0x6f*-0x49)]=Rt['z'],_0x36ebe6[_0x2b7cbd*he+(-0x1221+-0x1b7*0x7+0x1e25)]+=_0x1d6c26*_0x4b14aa,_0x3ca792['wrap']&&_0x3ca792['wrapBounds']&&(_0x3ca792['localSpace']||Rt['sub'](_0x1cc61a),Rt['x']=zd(Rt['x'],_0x3ca792['wrapBounds']['x'])-_0x3ca792['wrapBounds']['x']*(0x243a+0x618+-0x2a52+0.5),Rt['y']=zd(Rt['y'],_0x3ca792['wrapBounds']['y'])-_0x3ca792['wrapBounds']['y']*(0x2031+0x2bc+-0x1*0x22ed+0.5),Rt['z']=zd(Rt['z'],_0x3ca792['wrapBounds']['z'])-_0x3ca792['wrapBounds']['z']*(0x11*0x29+0xa32+-0xceb+0.5),_0x3ca792['localSpace']||Rt['add'](_0x1cc61a)),_0x3ca792['sort']>-0x1134+-0xc96+-0x4f7*-0x6&&(_0x3ca792['sort']===0x7ff+-0x2*0xa9f+0x1*0xd40?(Tr['copy'](Rt)['sub'](_0x28230c),_0x3ca792['particleDi'+'stance'][_0x2b7cbd]=-(Tr['x']*Tr['x']+Tr['y']*Tr['y']+Tr['z']*Tr['z'])):_0x3ca792['sort']===0x1ae7+0x1*-0x2217+-0x6*-0x133?_0x3ca792['particleDi'+'stance'][_0x2b7cbd]=_0x464ffa:_0x3ca792['sort']===-0x7*0xd7+0xdc6+-0x3f1*0x2&&(_0x3ca792['particleDi'+'stance'][_0x2b7cbd]=-_0x464ffa))),_0x174dd?_0x464ffa<-0xb1f+0x1*-0x6a+0xb89&&(_0x36ebe6[_0x2b7cbd*he+(0x1ad6+0x1279+-0x1*0x2d4c)+_0x3ca792['numParticl'+'esPot']*(0x2069+0x76*-0xb+-0x1b55)*he]=-(-0x16f3+0x51f+-0xb*-0x19f)):(_0x464ffa>=_0x27822c&&(_0x464ffa-=Math['max'](_0x27822c,(_0x3ca792['numParticl'+'es']-(0x2*0xdd5+-0x2123+-0x1*-0x57a))*_0x3ce6ed),_0x36ebe6[_0x2b7cbd*he+(0xcb9*0x1+0x185d+-0x2513)+_0x3ca792['numParticl'+'esPot']*(-0x246+0x1*0x1145+-0xefd)*he]=_0x3ca792['loop']?-0x628*0x2+0x1*0x1a12+-0xdc1:-(-0x1*0x449+-0x24d6+0x2920)),_0x464ffa<0x38*0x62+-0x1a37*0x1+0x4c7&&_0x3ca792['loop']&&(_0x36ebe6[_0x2b7cbd*he+(0x2595+-0x254a+-0x24*0x2)+_0x3ca792['numParticl'+'esPot']*(0x13d8*-0x1+0x54*-0x18+0x1bba)*he]=-0x1*-0x1057+0x2119+-0x316f*0x1)),_0x36ebe6[_0x2b7cbd*he+(0x177e*0x1+0xbfd*-0x1+-0x1*0xb7e)+_0x3ca792['numParticl'+'esPot']*(0x750+0x26f6+-0x2e44)*he]<0x6*0x101+0x1b9d+-0x21a3&&(_0x339fff=!(-0x266*0x2+0x1*0x235e+-0x1e91)),_0x36ebe6[_0x2b7cbd*he+(-0x700+0x187*0x16+-0x1a97*0x1)+_0x3ca792['numParticl'+'esPot']*he]=_0x464ffa;for(let _0x1f5a39=-0x1242+0x1*-0xb5b+0x1d9d;_0x1f5a39<_0x3ca792['numParticl'+'eVerts'];_0x1f5a39++){const _0x4b0b39=(_0x24d201*_0x3ca792['numParticl'+'eVerts']+_0x1f5a39)*(_0x3ca792['useMesh']?0x7cf*-0x1+0x1518+-0x5*0x2a7:0x9cf+0x2290+-0x5*0x8df);let _0x46dab9=_0x3ca792['vbCPU'][_0x4b0b39],_0x28c9e9=_0x3ca792['vbCPU'][_0x4b0b39+(-0x17f*-0x1+-0x62f*0x1+0x1*0x4b1)],_0x587f59=_0x3ca792['vbCPU'][_0x4b0b39+(-0x1bdc+-0x6c*-0x12+0x1446)];_0x339fff||(_0x46dab9=_0x28c9e9=_0x587f59=0x238c*0x1+0xb9a+-0x2f26);const _0x5740fb=_0x24d201*_0x3ca792['numParticl'+'eVerts']*_0x5cbfec+_0x1f5a39*_0x5cbfec;_0x4f6162[_0x5740fb]=Rt['x'],_0x4f6162[_0x5740fb+(-0x189*0x18+0x1*-0x153+-0x262c*-0x1)]=Rt['y'],_0x4f6162[_0x5740fb+(-0x1ac0+0xb8*0x27+-0x146)]=Rt['z'],_0x4f6162[_0x5740fb+(0xf8d+0x1a13+-0x299d)]=_0x3c67ed,_0x4f6162[_0x5740fb+(-0x1*-0x2356+0x76*-0x1f+-0x1508)]=_0x3ca792['alignToMot'+'ion']?_0x4008d7:_0x36ebe6[_0x2b7cbd*he+(-0xbec+0x655*-0x3+0x1eee)],_0x4f6162[_0x5740fb+(0x1f3*0x11+-0x1189+0x1*-0xf95)]=_0x280eba,_0x4f6162[_0x5740fb+(0x2057+-0x2135*-0x1+-0x4186)]=_0x41840e,_0x4f6162[_0x5740fb+(0x13*0x123+0x143b+-0x29cd)]=Vl['x'],_0x4f6162[_0x5740fb+(-0x667+-0x77f+-0x1*-0xdee)]=_0x46dab9,_0x4f6162[_0x5740fb+(-0x5*0x54a+-0x9d7*-0x1+0x10a4)]=_0x28c9e9,_0x4f6162[_0x5740fb+(0x2641+-0x14d5*-0x1+-0x3b0c)]=_0x587f59,_0x4f6162[_0x5740fb+(0x17ac+-0x291+-0x1510)]=Vl['y'],_0x4f6162[_0x5740fb+(-0x54d*0x1+0x19f9+-0x60*0x37)]=_0x2b7cbd,_0x4f6162[_0x5740fb+(0x22a*-0xd+0xc6e+0xfc1)]=Vl['z'],_0x4f6162[_0x5740fb+(-0x603+0x7*0x43f+-0xbd4*0x2)]=_0x3ca792['vbCPU'][_0x4b0b39+(-0xd66+0xa5b+0x30e)],_0x3ca792['useMesh']&&(_0x4f6162[_0x5740fb+(0x1*-0x15ed+0x7a*-0x19+0x21e6)]=_0x3ca792['vbCPU'][_0x4b0b39+(-0x1f31+-0x1663+-0x46*-0xc4)],_0x4f6162[_0x5740fb+(0x346*0xb+-0x82*0x4b+0x224)]=_0x3ca792['vbCPU'][_0x4b0b39+(0xd*-0x2a2+0x200b+0x2*0x11a)]);}}if(_0x3ca792['sort']>Cf&&_0x3ca792['camera']){const _0x1b7196=_0x3ca792['useMesh']?0x101b+0x20c+0x1221*-0x1:0x220c+-0x1*-0x2563+-0x476b,_0x33e1f0=_0x3ca792['particleDi'+'stance'];for(let _0x2372c1=-0x162b+-0x12aa*-0x1+0x381;_0x2372c1<_0x3ca792['numParticl'+'es'];_0x2372c1++)_0x4616de[_0x2372c1][-0x1b0e+-0x2b*0x3b+0x24f7]=_0x2372c1,_0x4616de[_0x2372c1][-0x1d76+0x577*-0x3+-0x2*-0x16ee]=_0x33e1f0[Math['floor'](_0x3ca792['vbCPU'][_0x2372c1*_0x3ca792['numParticl'+'eVerts']*_0x1b7196+(0x1754+0x3b*0x68+-0x9*0x541)])];_0x3ca792['vbOld']['set'](_0x3ca792['vbCPU']),_0x4616de['sort']((_0x5d152f,_0x39e694)=>_0x5d152f[-0x13*-0xb7+0x2431+-0x31c5]-_0x39e694[-0x1dd7+0x26a4+0x1*-0x8cc]);for(let _0x4f1dfa=-0xa3f+0xe7a+-0x43b;_0x4f1dfa<_0x3ca792['numParticl'+'es'];_0x4f1dfa++){const _0x1b75b9=_0x4616de[_0x4f1dfa][-0x879+0xd43+-0x4ca]*_0x3ca792['numParticl'+'eVerts']*_0x1b7196,_0x42566e=_0x4f1dfa*_0x3ca792['numParticl'+'eVerts']*_0x1b7196;for(let _0x4c203e=-0x9*0x399+-0x2274+-0x76d*-0x9;_0x4c203e<_0x3ca792['numParticl'+'eVerts']*_0x1b7196;_0x4c203e++)_0x3ca792['vbCPU'][_0x42566e+_0x4c203e]=_0x3ca792['vbOld'][_0x1b75b9+_0x4c203e];}}}}const m_=new oi(),p_=new oi(),__=new oi();class bA{constructor(_0x531bd6,_0x42b650){this['_emitter']=_0x531bd6,this['frameRando'+'mUniform']=new Float32Array(-0x983+0x4f+0x937),this['emitterPos'+'Uniform']=new Float32Array(-0xa29+-0x842*0x1+0x126e),this['emitterSca'+'leUniform']=new Float32Array([0x24d3*0x1+0x575*0x5+0x401b*-0x1,0x1a35*-0x1+-0x9bb*-0x1+-0x1*-0x107b,0x2183+0x16a8+0x7*-0x806]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(-0x4c7*0x1+-0x2245+-0x65*-0x63),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(-0x86b+-0x14d3+0x1d41),this['inBoundsSi'+'zeUniform']=new Float32Array(-0x24*0xad+0x530+0x1327),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(-0x16d5*-0x1+0x6f*-0x41+0x1*0x55d),this['constantPa'+'rticleTexI'+'N']=_0x42b650['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x42b650['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x42b650['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x42b650['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x42b650['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x42b650['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x42b650['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x42b650['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x42b650['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x42b650['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x42b650['scope']['resolve']('delta'),this['constantRa'+'te']=_0x42b650['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x42b650['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x42b650['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x42b650['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x42b650['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x42b650['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x42b650['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x42b650['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x42b650['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x42b650['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x42b650['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x42b650['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x42b650['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x42b650['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x42b650['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x42b650['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x42b650['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x42b650['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x42b650['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x42b650['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x42b650['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x42b650['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x42b650['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x42b650['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x42b650['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x42b650['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][-0x3ee*-0x9+0x1f*-0x131+0x191]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][0x9e7+-0x11f2+0x80c]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][-0x49*-0x25+0x2*-0x382+0x3*-0x12d]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][-0x28b+0x3d*-0x52+0x1615]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][0xd4e+-0x1bcf+0xe82]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][0x1390+-0xa42+0xa*-0xee]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][-0x1*0x1c1a+0x1*0x90b+0x130f]=Math['random'](),this['frameRando'+'mUniform'][-0x2*-0xf6d+-0xeb*-0xd+-0x2ac8]=Math['random'](),this['frameRando'+'mUniform'][-0x1*0x26dd+0x1b6+0x2529]=Math['random']();}['update'](_0xde12d6,_0x8885e,_0xd3df18,_0x3c1e64,_0x22023a){Q['pushGpuMar'+'ker'](_0xde12d6,'ParticleGP'+'U');const _0x386f6d=this['_emitter'];_0xde12d6['setBlendSt'+'ate'](Ct['NOBLEND']),_0xde12d6['setDepthSt'+'ate'](Kt['NODEPTH']),_0xde12d6['setCullMod'+'e'](xt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0x3*0x3b3+-0x8e8+-0x2*-0xa01)/_0x386f6d['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x386f6d['precision']),this['constantNu'+'mParticles']['setValue'](_0x386f6d['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x386f6d['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x386f6d['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x386f6d['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x386f6d['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x386f6d['internalTe'+'x3']);const _0x56d7ae=_0x386f6d['meshInstan'+'ce']['node'],_0x57401f=_0x56d7ae===null?I['ONE']:_0x56d7ae['localScale'];if(_0x386f6d['pack8']){this['worldBound'+'sMulUnifor'+'m'][0x197+-0x1dff+0x71a*0x4]=_0x386f6d['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][-0xb23*-0x1+0x3+0xb25*-0x1]=_0x386f6d['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][-0x20b9*-0x1+0x408+-0x24bf]=_0x386f6d['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][0x1207+0x1a4f+-0x2c56]=_0x386f6d['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][0x1ba2+-0x7*-0x2a9+-0x50*0x94]=_0x386f6d['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0x1f*-0x89+-0x3*0x8ab+0x96c]=_0x386f6d['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x17ca37=_0x386f6d['maxVel']*Math['max'](Math['max'](_0x57401f['x'],_0x57401f['y']),_0x57401f['z']);_0x17ca37=Math['max'](_0x17ca37,0xc7*-0x9+-0xf33+0x1*0x1633),this['constantMa'+'xVel']['setValue'](_0x17ca37);}const _0xdeda3f=_0x56d7ae===null||_0x386f6d['localSpace']?I['ZERO']:_0x56d7ae['getPositio'+'n'](),_0xec4588=_0x56d7ae===null?te['IDENTITY']:_0x56d7ae['getWorldTr'+'ansform']();_0x386f6d['emitterSha'+'pe']===Ys?(m_['setFromMat'+'4'](_0x8885e),this['constantSp'+'awnBounds']['setValue'](m_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0xd3df18)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x386f6d['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x386f6d['emitterRad'+'ius']===0x131*-0xe+0x1*0xd15+0x399?-0xa18+0x4*-0x472+0x1be0:_0x386f6d['emitterRad'+'iusInner']/_0x386f6d['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x386f6d['initialVel'+'ocity']),p_['setFromMat'+'4'](_0xec4588),__['invertMat4'](_0xec4588),this['emitterPos'+'Uniform'][-0x1d6e+-0xa2*-0x9+0x17bc]=_0xdeda3f['x'],this['emitterPos'+'Uniform'][-0x102d+-0x14fe+0x252c]=_0xdeda3f['y'],this['emitterPos'+'Uniform'][-0x12d1*-0x1+-0x3a*-0x7f+-0x3a9*0xd]=_0xdeda3f['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x3c1e64),this['constantRa'+'te']['setValue'](_0x386f6d['rate']),this['constantRa'+'teDiv']['setValue'](_0x386f6d['rate2']-_0x386f6d['rate']),this['constantSt'+'artAngle']['setValue'](_0x386f6d['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x386f6d['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x386f6d['seed']),this['constantLi'+'fetime']['setValue'](_0x386f6d['lifetime']),this['emitterSca'+'leUniform'][0xa3f+0x1*0x1421+-0x1e60]=_0x57401f['x'],this['emitterSca'+'leUniform'][-0xfa*0x23+0x165e*0x1+0xbd1]=_0x57401f['y'],this['emitterSca'+'leUniform'][0x584+0x1145*0x1+-0x77*0x31]=_0x57401f['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](p_['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](__['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x386f6d['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x386f6d['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x386f6d['rotSpeedUM'+'ax'][-0x1c42+0x1e4b+0x1*-0x209]);let _0x54f281=_0x386f6d['swapTex']?_0x386f6d['particleTe'+'xOUT']:_0x386f6d['particleTe'+'xIN'];_0x54f281=_0x386f6d['beenReset']?_0x386f6d['particleTe'+'xStart']:_0x54f281;const _0x3e60da=_0x386f6d['swapTex']?_0x386f6d['particleTe'+'xIN']:_0x386f6d['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x54f281),fr(_0xde12d6,_0x386f6d['swapTex']?_0x386f6d['rtParticle'+'TexIN']:_0x386f6d['rtParticle'+'TexOUT'],_0x22023a?_0x386f6d['shaderPart'+'icleUpdate'+'OnStop']:_0x386f6d['loop']?_0x386f6d['shaderPart'+'icleUpdate'+'Respawn']:_0x386f6d['shaderPart'+'icleUpdate'+'NoRespawn']),_0x386f6d['material']['setParamet'+'er']('particleTe'+'xOUT',_0x54f281),_0x386f6d['material']['setParamet'+'er']('particleTe'+'xIN',_0x3e60da),_0x386f6d['beenReset']=!(-0x2f*-0x71+0xc7*0x5+0x61*-0x41),_0x386f6d['swapTex']=!_0x386f6d['swapTex'],_0x386f6d['prevWorldB'+'oundsSize']['copy'](_0x386f6d['worldBound'+'sSize']),_0x386f6d['prevWorldB'+'oundsCente'+'r']['copy'](_0x386f6d['worldBound'+'s']['center']),_0x386f6d['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0xde12d6);}}const g_=['NONE','VERTEX','MAP'];class CA extends aa{['generateKe'+'y'](_0x1226f6){let _0x31fc3d='particle_'+aa['definesHas'+'h'](_0x1226f6['defines'])+'_';for(const _0x1f61f5 in _0x1226f6)_0x1226f6['hasOwnProp'+'erty'](_0x1f61f5)&&(_0x31fc3d+=_0x1226f6[_0x1f61f5]);return _0x31fc3d;}['createVert'+'exDefines'](_0x35cb57,_0x252247){const _0x2ed538=new Map(_0x35cb57['defines']);return _0x35cb57['mesh']&&_0x2ed538['set']('USE_MESH',''),_0x35cb57['meshUv']&&_0x2ed538['set']('USE_MESH_U'+'V',''),_0x35cb57['localSpace']&&_0x2ed538['set']('LOCAL_SPAC'+'E',''),_0x35cb57['screenSpac'+'e']&&_0x2ed538['set']('SCREEN_SPA'+'CE',''),_0x35cb57['animTex']&&_0x2ed538['set']('ANIMTEX',''),_0x35cb57['soft']>0x29*-0x28+-0x38b*0x8+-0x20*-0x116&&_0x2ed538['set']('SOFT',''),_0x35cb57['stretch']>-0x6*-0x61c+0x62a+-0x2ad2&&_0x2ed538['set']('STRETCH',''),_0x35cb57['customFace']&&_0x2ed538['set']('CUSTOM_FAC'+'E',''),_0x35cb57['pack8']&&_0x2ed538['set']('PACK8',''),_0x35cb57['localSpace']&&_0x2ed538['set']('LOCAL_SPAC'+'E',''),_0x35cb57['animTexLoo'+'p']&&_0x2ed538['set']('ANIMTEX_LO'+'OP',''),_0x35cb57['wrap']&&_0x2ed538['set']('WRAP',''),_0x35cb57['alignToMot'+'ion']&&_0x2ed538['set']('ALIGN_TO_M'+'OTION',''),_0x2ed538['set']('NORMAL',g_[_0x35cb57['normal']]),_0x252247['particle_v'+'ertexData']=Pe,_0x35cb57['mesh']&&_0x35cb57['meshUv']&&(_0x252247['particle_u'+'v']=Yt),_0x35cb57['useCpu']&&(_0x252247['particle_v'+'ertexData2']=Oh,_0x252247['particle_v'+'ertexData3']=$u,_0x252247['particle_v'+'ertexData4']=Xu,_0x252247['particle_v'+'ertexData5']=qu),_0x2ed538;}['createFrag'+'mentDefine'+'s'](_0x2503b0){const _0x50c96b=new Map(_0x2503b0['defines']);return _0x2503b0['soft']>-0xe85+-0xb*0x116+0x54b*0x5&&_0x50c96b['set']('SOFT',''),_0x2503b0['halflamber'+'t']&&_0x50c96b['set']('HALF_LAMBE'+'RT',''),_0x50c96b['set']('NORMAL',g_[_0x2503b0['normal']]),_0x50c96b['set']('BLEND',sy[_0x2503b0['blend']]),_0x50c96b;}['createShad'+'erDefiniti'+'on'](_0x5b94cc,_0x4429f8){const _0x5e36be=_0x5b94cc['isWebGPU']?st:ze,_0x5638c9=Ce['get'](_0x5b94cc,_0x5e36be),_0x46bdd6={},_0x265a74=this['createVert'+'exDefines'](_0x4429f8,_0x46bdd6),_0x5e16e8=this['createFrag'+'mentDefine'+'s'](_0x4429f8),_0xe9bfad='PARTICLE_'+(_0x4429f8['useCpu']?'CPU':'GPU')+'\x0a';_0x265a74['set'](_0xe9bfad,''),_0x5e16e8['set'](_0xe9bfad,'');const _0x10a003=new Map(_0x5638c9);return $t['createDefi'+'nition'](_0x5b94cc,{'name':'ParticleSh'+'ader','shaderLanguage':_0x5e36be,'attributes':_0x46bdd6,'vertexCode':_0x5638c9['get']('particle_s'+'haderVS'),'fragmentCode':_0x5638c9['get']('particle_s'+'haderPS'),'fragmentDefines':_0x5e16e8,'fragmentIncludes':_0x10a003,'vertexIncludes':_0x10a003,'vertexDefines':_0x265a74});}}const PA=new CA();class MA extends ua{constructor(_0x581aad){super(),h(this,'emitter',null),(this['emitter']=_0x581aad,M['assert'](_0x581aad));}['getShaderV'+'ariant'](_0x313a43){const {device:_0x55fa9c,scene:_0xc3a5ee,cameraShaderParams:_0x6b7e52,objDefs:_0x554683}=_0x313a43,{emitter:_0x5b4ab3}=this,_0x56510d={'defines':Ut['getCoreDef'+'ines'](this,_0x313a43),'pass':fa,'useCpu':this['emitter']['useCpu'],'normal':_0x5b4ab3['lighting']?_0x5b4ab3['normalMap']!==null?-0x1607+-0x1*-0x2336+-0xd2d:0x1730+0x2436+-0x3b65*0x1:-0x1*-0x19a8+0x207*-0xc+-0x55*0x4,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x554683&bm,'gamma':(_0x6b7e52==null?void(-0x7*0x5+0xb*-0x275+0x1b2a):_0x6b7e52['shaderOutp'+'utGamma'])??ol,'toneMap':(_0x6b7e52==null?void(-0x61b*0x1+0x1cb1+-0x1696):_0x6b7e52['toneMappin'+'g'])??Tm,'fog':_0xc3a5ee&&!this['emitter']['noFog']?_0xc3a5ee['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x5b4ab3['inTools']?!(-0x1d3f*-0x1+0x4cb+-0x2209):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==Vh},_0x1ffb1e=new Zc(_0x313a43['viewUnifor'+'mFormat'],_0x313a43['viewBindGr'+'oupFormat'],_0x313a43['vertexForm'+'at']),_0x5eb3db=Cn(_0x55fa9c);return _0x5eb3db['register']('particle',PA),_0x5eb3db['getProgram']('particle',_0x56510d,_0x1ffb1e,this['userId']);}}const S_=[[-(-0x1e35+-0x1763+0x1*0x3599),-(-0x1e5d*-0x1+0x1*-0x6a1+0xf*-0x195)],[-0x9*-0x2cc+0x1*-0x1d87+-0x174*-0x3,-(0x137b*0x2+-0x1*0x9f5+-0x1d00)],[0x128b+0x2384+-0x275*0x16,-0x1*0xbc9+0x760+-0x1*-0x46a],[-(0x679*0x2+0xf52+-0x1*0x1c43),-0x2046*-0x1+0x1b53+-0x3b98]];function ms(_0x46dcb9,_0x3782f6,_0x2889ca,_0x211a59,_0x558249=Bt,_0x425a37,_0x4c90ea){let _0x345817=Te;_0x4c90ea&&(_0x558249===Oe||_0x558249===hs)&&(_0x345817=_t);const _0x30c907=new _e(_0x46dcb9,{'width':_0x3782f6,'height':_0x2889ca,'format':_0x558249,'cubemap':!(-0x221+0x2*-0x113d+0x3*0xc34),'mipmaps':!(-0x1e97+-0x196c+0x1c02*0x2),'minFilter':_0x345817,'magFilter':_0x345817,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x36825c=_0x30c907['lock']();if(_0x558249===Oe||_0x558249===hs){const _0x1cdad8=new Uint8Array(_0x211a59['length']);for(let _0x776fe2=-0x12be+0x4e*0x4c+-0x46a;_0x776fe2<_0x211a59['length'];_0x776fe2++)_0x1cdad8[_0x776fe2]=_0x211a59[_0x776fe2]*_0x425a37*(-0x2513+-0x2564+0x2*0x25bb);_0x211a59=_0x1cdad8;}return _0x36825c['set'](_0x211a59),_0x30c907['unlock'](),_0x30c907;}function y_(_0x38c4d7){return Math['max'](Math['min'](_0x38c4d7,-0xee7+-0x4f7*0x6+-0x773*-0x6),-0x2488+0x2644+-0x4*0x6f);}const v_=new Bs([-0x8e4+-0x717+-0xffb*-0x1,0x493*0x2+0x18b4+-0x21da,-0x4f*-0x73+-0x5*0x4e9+-0xaef,-0xca7*-0x3+-0x1451+-0x11a4]),x_=new Bs([0x139*0x17+-0x8*-0x2+0x6f*-0x41,-0xb3c*-0x1+0x994+-0x7*0x2f9,-0x22f6+0x2*-0x4cc+0x2c8f,-0x8*0x22c+0xc8c*-0x3+0x1*0x3705]),T_=new Wr([0x1d09+0x260c+-0x4315,0x26a+0x14*-0x1ac+0x16*0x169,0x1c0f*0x1+-0x5b2*-0x1+-0x21c0,-0x1134*0x2+0x755*-0x1+0x29bd],[-0x1d5+-0xf99+0x116e,0x1838+-0x1038+0x800*-0x1,-0x179b+-0xac*0x16+-0x1b*-0x16c,-0x342*-0xb+0xe48+-0x5*0xa06],[-0x589+-0xf76+0x14ff,0x22a7+0x181d*0x1+0x4*-0xeb1,-0x117*0x22+0x1*0x997+0x1b78,0x68*-0x34+-0x1657+0x2b77]),IA=new Wr([-0x16bb+0x17*0x125+-0x398,0x2c5+-0x447*0x8+0xc*0x29f,0x49*0x45+-0x1*-0x1f58+-0x4*0xcc1,0xd*-0x2f8+0x356+0x2343],[-0x1e8*-0x7+0x1fbf+-0x2d17,-0x2033+0xa3d*0x1+0x15f7,-0x22ef+0x1a5*-0x7+0x2e73,-0x1*-0x1265+-0x1*-0x56c+0x1fc*-0xc],[0x9*0x49+0x1051+-0x12e2,0x3eb+0x1aef+0x1ed9*-0x1,0xc90+0x5fe*-0x6+-0x1*-0x1765,0x7fd+-0x12de+0xae2]);let gi=-0x5a8*-0x2+0x1*0x65b+0xb*-0x19b;const Hl=0x1a00+0x25b1+-0x3fad,Si=new Float32Array(0x1*-0x1dff+-0x24d+-0x3*-0xac5),wr=new te(),w_=new I(),Wl=new I(),$l=new I();let Rf,Sh;function ce(_0x5aa73,_0x251808){Sh[_0x5aa73]!==void(0x4e*0x10+0x626+-0xb06)&&Sh[_0x5aa73]!==null?Rf[_0x5aa73]=Sh[_0x5aa73]:Rf[_0x5aa73]=_0x251808;}function ky(_0x1e1d94,_0x41d527,_0x5eda33){return(_0x1e1d94*(-0x10d3+-0xb*0x8b+0x17cb)<<-0x6dd+-0xfa*0x18+0x1e5d|_0x41d527*(0x1*-0x120d+-0xdcd+0x1*0x20d9)<<0xdae+-0x99c+0xb*-0x5e|_0x5eda33*(-0x6*-0xb+0xa*-0x5c+0x455))/(0x10be+0x1258*-0x2+0x13f3*0x1<<0x2*0xcc5+0x1*-0x1c90+-0x6*-0x85);}function E_(_0x5e0f5d,_0x538c99){const _0x2d4dff=_0x5e0f5d['length']/(-0xdf9+-0x1*0x19c7+-0x27c3*-0x1),_0x5f06a4=new Array(_0x2d4dff*(-0x206a+-0x11e4+0x10c6*0x3));for(let _0x78dba0=-0xc37*-0x2+0xd7f*-0x2+0x290;_0x78dba0<_0x2d4dff;_0x78dba0++)_0x5f06a4[_0x78dba0*(-0x16ca+-0x20f8+0x37c6)]=_0x5e0f5d[_0x78dba0*(0x1b3+-0xae5*0x3+0xa55*0x3)],_0x5f06a4[_0x78dba0*(-0x1*-0x86e+0x12*0x1e4+0x713*-0x6)+(0x1*-0x2b5+0x4*-0x599+-0x6*-0x42f)]=_0x5e0f5d[_0x78dba0*(-0x8ba+-0x1*0xb91+0x144e)+(-0x1*-0x146b+-0x66b+-0xdff)],_0x5f06a4[_0x78dba0*(-0x1*-0xb39+0x1*-0x88f+0x6*-0x71)+(0x1*0x146b+-0x1*0x1d15+0x8ac)]=_0x5e0f5d[_0x78dba0*(-0x9*0x440+-0x15e8+0x3c2b*0x1)+(-0xb2*-0x21+-0x1162+-0x58e*0x1)],_0x5f06a4[_0x78dba0*(-0x17*0xf7+0xbb5+0xa80)+(0x7bf*0x1+0x1714+-0x1ed0)]=ky(_0x538c99[_0x78dba0*(-0x5e1+0x80f*0x2+0xee*-0xb)],_0x538c99[_0x78dba0*(-0x1249+-0x1*-0x431+0x9d*0x17)+(0x1d20+0x25ce+0x42ed*-0x1)],_0x538c99[_0x78dba0*(-0x2642+0x1c4*-0x9+0x3629)+(0x1c3b+-0x7c*-0x4c+-0x4109*0x1)]);return _0x5f06a4;}function DA(_0x1346f9,_0x4150f3){const _0x2a0056=new Array(_0x4150f3['length']*(0xab8+0xfb6+-0x1a6a));for(let _0x17c7ea=0x1*0x15e+0x171+-0x2cf;_0x17c7ea<_0x4150f3['length'];_0x17c7ea++)_0x2a0056[_0x17c7ea*(0x1294+-0x2273*-0x1+0x14b*-0x29)]=_0x1346f9[_0x17c7ea*(0x1*-0x1952+0x1d31+0xf7*-0x4)],_0x2a0056[_0x17c7ea*(0x7*0x47d+0x67a+-0x25e1)+(-0xa3*0x15+-0xc07*-0x2+-0xaae)]=_0x1346f9[_0x17c7ea*(0x1945*-0x1+-0xdc+0x1a24)+(-0xecb*-0x1+0x1e56+-0x2d20)],_0x2a0056[_0x17c7ea*(-0x1*-0x121a+-0x79f+-0xa77)+(0xb6c+-0x2*0xfeb+-0xa36*-0x2)]=_0x1346f9[_0x17c7ea*(0x2111+-0x1*-0x135d+0x1*-0x346b)+(0x98b+0x2330+-0x1*0x2cb9)],_0x2a0056[_0x17c7ea*(0x1*0xec3+0x153f+0x22*-0x10f)+(-0xd98+-0x93*-0xd+0x83*0xc)]=_0x4150f3[_0x17c7ea];return _0x2a0056;}function LA(_0x2e1b29,_0x4a12b3,_0x1ddb78,_0x28cd7,_0x30b830){const _0x3103a9=new Array(_0x2e1b29['length']*(-0xd36+0x1869*-0x1+-0x787*-0x5));for(let _0x31b527=-0x6ff*0x1+0x32c+0xb*0x59;_0x31b527<_0x2e1b29['length'];_0x31b527++)_0x3103a9[_0x31b527*(-0x10a4+0x1ebc+-0x22*0x6a)]=_0x2e1b29[_0x31b527],_0x3103a9[_0x31b527*(0x845+0x163a+-0x1e7b)+(-0x1*0x2429+-0xdcc+-0x1*-0x31f6)]=_0x4a12b3[_0x31b527],_0x3103a9[_0x31b527*(0xef4+-0x176*-0xa+-0x1d8c)+(-0x266a+0x2588+0xe4)]=-0x2586+-0x44c+0xca*0x35,_0x3103a9[_0x31b527*(0x20b5+-0x489+-0x70a*0x4)+(-0x22c*0xb+0x1*0x17f5+0x2*-0x7)]=ky(_0x1ddb78[_0x31b527],_0x28cd7[_0x31b527],_0x30b830[_0x31b527]);return _0x3103a9;}function RA(_0x3d8c74,_0x49e055){const _0x58d055=new Array(_0x3d8c74['length']*(0x1f3*-0x3+-0xe*0xf6+0x1351));for(let _0x1be675=0x1ccf+-0xab+-0x1c24*0x1;_0x1be675<_0x3d8c74['length'];_0x1be675++)_0x58d055[_0x1be675*(0x1e7c+-0x21a1+0x1*0x329)]=_0x3d8c74[_0x1be675],_0x58d055[_0x1be675*(-0x2c*-0x7c+-0x3*0x923+0x61d)+(-0x4d*0x33+-0xc23*-0x3+0x1*-0x1511)]=_0x49e055[_0x1be675],_0x58d055[_0x1be675*(0x1*0x247f+-0xc7c*0x2+0x1*-0xb83)+(0xbb*-0x30+-0x8ad*-0x4+0x5e)]=0xd*-0x5b+0x1084+-0xbe5,_0x58d055[_0x1be675*(-0x210c+-0x25f6+0x4706)+(0x2a0*0xc+-0x1dd6+-0x1a7)]=-0xb1e*-0x1+0x2260+-0x2d7e;return _0x58d055;}function OA(_0x2fe70d){const _0x31fb40=Math['max'](_0x2fe70d['rate'],_0x2fe70d['rate2'])*_0x2fe70d['numParticl'+'es']+_0x2fe70d['lifetime'];return Date['now']()+_0x31fb40*(-0xc3c+0x19d4+-0x9b0);}function FA(_0x5be3a6,_0x592c1c){const _0x25012e=new Float32Array(_0x5be3a6['length']);for(let _0x53829f=-0x2*0x1a5+0x4fc+-0x1b2;_0x53829f<_0x5be3a6['length'];_0x53829f++)_0x25012e[_0x53829f]=_0x5be3a6[_0x53829f]-_0x592c1c[_0x53829f];return _0x25012e;}function Lr(_0x11128a,_0x37e711){const _0x4f4455=_0x37e711['length'],_0x6c7a37=_0x11128a['length']/_0x4f4455;for(let _0x250b57=0xdcc+-0x99c+-0x430;_0x250b57<_0x6c7a37;_0x250b57++)for(let _0x374d69=-0x158a+0x1b5f+-0x5d5;_0x374d69<_0x4f4455;_0x374d69++){const _0x41ac4b=Math['abs'](_0x11128a[_0x250b57*_0x4f4455+_0x374d69]);_0x37e711[_0x374d69]=Math['max'](_0x37e711[_0x374d69],_0x41ac4b);}}function NA(_0x21f04c,_0x3de270){const _0x3c8941=_0x3de270['length'],_0x3a5515=_0x21f04c['length']/_0x3c8941;for(let _0xd8f712=0xd0*0x1f+0x25c*0xb+-0x3324*0x1;_0xd8f712<_0x3a5515;_0xd8f712++)for(let _0x446b1d=0x90d*0x1+-0x3f*-0x95+-0x2db8;_0x446b1d<_0x3c8941;_0x446b1d++)_0x21f04c[_0xd8f712*_0x3c8941+_0x446b1d]/=_0x3de270[_0x446b1d]===0x1*0xe21+-0x279*0x7+0x197*0x2?-0xc56+-0xb74*-0x3+-0x1605:_0x3de270[_0x446b1d],_0x21f04c[_0xd8f712*_0x3c8941+_0x446b1d]*=-0x1a*0x68+-0x25b*0x3+0x11a1+0.5,_0x21f04c[_0xd8f712*_0x3c8941+_0x446b1d]+=0x2623+0x1d*-0x10d+-0x7aa+0.5;}function Er(_0x384c9e,_0x68328c,_0x2d0d85){const _0x576b4b=FA(_0x68328c,_0x384c9e);return Lr(_0x576b4b,_0x2d0d85),NA(_0x576b4b,_0x2d0d85),_0x576b4b;}const kA=new Ht();class UA{constructor(_0x3aa680,_0x154331){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x3aa680;const _0x1e9ad5=_0x3aa680,_0x5e01a1=-0x19df+0x19af+0x14*0x4;this['precision']=_0x5e01a1,this['_addTimeTi'+'me']=0x2*0xc4+0x1*0x23db+-0x2563,Rf=this,Sh=_0x154331,ce('numParticl'+'es',0x1221+0x1c0a+0x137*-0x26),this['numParticl'+'es']>_0x3aa680['maxTexture'+'Size']&&(M['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x3aa680['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x3aa680['maxTexture'+'Size']),ce('rate',-0x1226+-0x1*0x207b+-0x32a2*-0x1),ce('rate2',this['rate']),ce('lifetime',-0x73*-0xa+0x1381*0x2+0x2b4e*-0x1),ce('emitterExt'+'ents',new I(0x15*0x138+-0x1*0x1c6a+0x2d2,0x1c1c+-0x172c+-0x4f0,-0x218c+0x1*-0x1a14+0x3ba0)),ce('emitterExt'+'entsInner',new I(0x1b09+0x221c+-0x3d25,0x1de7+0x74a*0x1+0x1*-0x2531,-0x2699+0x1543*0x1+0x1156)),ce('emitterRad'+'ius',0x4bf+-0x2*0x2fe+0x13d*0x1),ce('emitterRad'+'iusInner',0xa*-0x44+-0x2*0xeb5+0x2012),ce('emitterSha'+'pe',Ys),ce('initialVel'+'ocity',0x245c+0x1731+0x3b8c*-0x1),ce('wrap',!(-0x22b3+-0x26*0x49+0x2d8a)),ce('localSpace',!(-0x1*-0x2207+0x357+0x1*-0x255d)),ce('screenSpac'+'e',!(-0x2093+-0x3*-0xc68+0x2*-0x252)),ce('wrapBounds',null),ce('colorMap',this['defaultPar'+'amTexture']),ce('normalMap',null),ce('loop',!(0xb99+0x71c*-0x1+-0x47d)),ce('preWarm',!(0x7ed+-0x1*-0x185e+-0x204a)),ce('sort',Cf),ce('mode',dy),ce('scene',null),ce('lighting',!(-0x1010*0x2+0x1be2+0x43f)),ce('halfLamber'+'t',!(0x1a15+0x26c3+-0x40d7)),ce('intensity',0x157d*0x1+0x16f5+-0x1*0x2c71),ce('stretch',0x3*0x553+-0x774+-0x885),ce('alignToMot'+'ion',!(0xc5e*-0x3+0x2db+0x4*0x890)),ce('depthSofte'+'ning',-0x114d+-0x5b2*0x4+0x2815),ce('mesh',null),ce('particleNo'+'rmal',new I(0x1904+0x223f+-0x3*0x13c1,0x13*-0x209+0xfbe+-0x5*-0x496,-0xb8*0x7+-0x1c16*0x1+0x211e)),ce('orientatio'+'n',Vh),ce('depthWrite',!(0x136c+0x2653+-0x39be)),ce('noFog',!(-0x224+0x4d1+-0x2ac)),ce('blendType',Gs),ce('node',null),ce('startAngle',-0x1*0x2132+0x1e33+0x2ff),ce('startAngle'+'2',this['startAngle']),ce('animTilesX',0x11df+0x6*0x4d2+-0x2*0x1765),ce('animTilesY',0x342+0x225e+0x1*-0x259f),ce('animStartF'+'rame',-0x1*0xff3+-0x225*-0x6+0x1*0x315),ce('animNumFra'+'mes',-0x21e8+-0x3*0x5b5+-0x238*-0x17),ce('animNumAni'+'mations',0xc5b*0x2+0xd2f+0x184*-0x19),ce('animIndex',-0x57d+0x80e+-0x291),ce('randomizeA'+'nimIndex',!(-0x1c5c+-0x1*-0x146e+0x3*0x2a5)),ce('animSpeed',0x2*0x47e+-0x31*0xbc+0x1b01),ce('animLoop',!(-0x1*0x772+-0x20fe+0x2870)),this['_gpuUpdate'+'r']=new bA(this,_0x1e9ad5),this['_cpuUpdate'+'r']=new AA(this),this['emitterPos'+'Uniform']=new Float32Array(-0x20af+-0x1fac+-0x202f*-0x2),this['wrapBounds'+'Uniform']=new Float32Array(-0x245b*0x1+-0xbbd+0x301b),this['emitterSca'+'leUniform']=new Float32Array([0xbb*-0x8+-0x3*-0xe9+0x1*0x31e,-0xd8a*0x1+0x6d+0x1*0xd1e,0x382*0x1+-0x61*0x2b+0xcca]),ce('colorGraph',IA),ce('colorGraph'+'2',this['colorGraph']),ce('scaleGraph',x_),ce('scaleGraph'+'2',this['scaleGraph']),ce('alphaGraph',x_),ce('alphaGraph'+'2',this['alphaGraph']),ce('localVeloc'+'ityGraph',T_),ce('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),ce('velocityGr'+'aph',T_),ce('velocityGr'+'aph2',this['velocityGr'+'aph']),ce('rotationSp'+'eedGraph',v_),ce('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),ce('radialSpee'+'dGraph',v_),ce('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(-0x1*0x7e3+-0x15a9+0x1d8e),this['animParams']=new Float32Array(0x1ff4+0x1283+0x10d1*-0x3),this['animIndexP'+'arams']=new Float32Array(-0x21b2*-0x1+-0x1beb*0x1+-0x5c5),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(0x9b*-0x5+-0x1*0x1b7b+0x6b*0x49),this['useMesh']=!(0x209*-0xb+0x1183+0x4e0),this['useCpu']=!_0x3aa680['supportsGp'+'uParticles'],this['pack8']=!(0x1d19+-0x1412+-0x1*0x907),this['localBound'+'s']=new Ie(),this['worldBound'+'sNoTrail']=new Ie(),this['worldBound'+'sTrail']=[new Ie(),new Ie()],this['worldBound'+'s']=new Ie(),this['worldBound'+'sSize']=new I(),this['prevWorldB'+'oundsSize']=new I(),this['prevWorldB'+'oundsCente'+'r']=new I(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new I(),this['worldBound'+'sAdd']=new I(),this['timeToSwit'+'chBounds']=-0x216+-0x527*-0x4+0x1*-0x1286,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0x270a+-0xdac+0x34b6,this['numParticl'+'eIndices']=-0x179f*-0x1+0x76e+0x1f0d*-0x1,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=0x3*-0x43a+-0xe*0x15d+-0x1*-0x1fc4,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(-0x127b+0x24f1+-0x1275)/(0xe94+-0x153e*0x1+0x6e6),this['maxSubStep'+'s']=-0x43*-0x76+-0x2*-0xb6f+-0x35b6,this['simTime']=0x1*0x5f1+0x16cc+-0x1cbd*0x1,this['simTimeTot'+'al']=-0x25d2+-0x104e+0x3620,this['beenReset']=!(-0x1944+0x2b*-0x9f+0x1*0x33fa),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return M['assert'](this['graphicsDe'+'vice']),kA['get'](this['graphicsDe'+'vice'],()=>{const _0x4d7053=new Float32Array(0xc43*0x3+-0x2e2+-0x1de7);for(let _0x565aee=0x1489+-0x1cc2+-0x1a5*-0x5;_0x565aee<0x13b0+0x18c8+-0x2c68;_0x565aee++)for(let _0x9022d3=0x16*0x17d+0xd9*0x2e+-0x47bc;_0x9022d3<0x3d*0x4+0xb70+0x6*-0x20e;_0x9022d3++){const _0xb79a59=_0x9022d3+(0x1*-0xaf2+-0x7b0+0x1*0x12a3)-(-0x1a3*-0x1+0x2*0x76d+-0x1075+0.5),_0x1ca1cc=_0x565aee+(0x570+-0x1eee+0x197f)-(-0x99a*0x1+0x1056+-0x6b4+0.5),_0x4908b1=y_(-0x1*-0x2209+0x2aa*0x2+0x2*-0x13ae-y_(Math['sqrt'](_0xb79a59*_0xb79a59+_0x1ca1cc*_0x1ca1cc)/(0xeb+0x61*-0x2e+0x1093))-(-0x2ef*0x5+-0x7de+0x3*0x783+0.5)),_0x3ba8ff=_0x565aee*(0x1d*0x6+-0x4c*-0x6e+-0x2146)+_0x9022d3;_0x4d7053[_0x3ba8ff*(-0x16d8+0x152*0xb+0x16*0x61)]=0x1b4a+-0x1*0x16b7+-0xea*0x5,_0x4d7053[_0x3ba8ff*(-0x1*-0x20c+-0x651+-0x1*-0x449)+(0x1*0x24b9+-0x2671+0x3*0x93)]=0x33+0x1dbb+-0x1ded,_0x4d7053[_0x3ba8ff*(0x7b8*0x4+-0x1*-0x1c65+-0xb*0x563)+(0x4*-0x4cd+-0xc85+0x1fbb)]=0x1209+-0x293+-0xf75,_0x4d7053[_0x3ba8ff*(0x7*0x13+-0x20bb+0x203a)+(-0x6*0x3b+0xcb2*0x3+0x65*-0x5d)]=_0x4908b1;}const _0x249ae5=ms(this['graphicsDe'+'vice'],0x1fac+0x54*-0x47+-0x850,-0x1a04+0x3fb+0x1*0x1619,_0x4d7053,hs,0xd10+0xd*-0x1af+0x14*0x71,!(-0xbde+-0x59*0x4f+0x2755));return _0x249ae5['minFilter']=_t,_0x249ae5['magFilter']=_t,_0x249ae5;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(0x2568+-0x6a6+-0x1ec1)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(0x1d*-0x6b+0x1647+-0x17*0x71)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(0x24b6+0x1c9c+-0x4151*0x1)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(-0x61b+0x1c3d*0x1+0x5*-0x46d)),this['worldBound'+'sAdd']['x']+=0x617*-0x2+-0x1b80+-0xd3a*-0x3+0.5,this['worldBound'+'sAdd']['y']+=0x1318+-0x705+-0xc13+0.5,this['worldBound'+'sAdd']['z']+=0x17b5+0x43*-0x83+0xa94+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x15051c=!(-0x2248+0x1*0x1556+0xcf3);this['emitterSha'+'pe']===Ys?_0x15051c=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x15051c=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x15051c&&this['calculateL'+'ocalBounds']();}const _0x128d81=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x128d81),this['worldBound'+'sTrail'][0x972+0x62b+0x7*-0x23b]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0xdb5+0x1dfc+-0x2bb0]['add'](this['worldBound'+'sNoTrail']);const _0x129d0d=this['simTimeTot'+'al'];_0x129d0d>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][0x1ae4+-0x371*0x1+-0x1773]['copy'](this['worldBound'+'sTrail'][0x2146+0x10d0+0x1*-0x3215]),this['worldBound'+'sTrail'][0x1f4b+0x78b+-0x26d5]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x129d0d+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x417+0x1853+-0x25*0x8c]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x264+-0x23b3+0x3*0xcb3),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x128d81),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x128d81)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=-0x2155+0xa30+0x1726-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x17f6+0x1555+-0x2d4b]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x1e2e+-0x4c7*0x3+0x2a4*-0x6]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x2*-0xea3+0x3*-0x7ad+0x344d]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x7*0x1aa+-0x1b02+0x26aa),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=0x239b*0x1+-0x1*0x187d+-0x1*0xb1e,this['timeToSwit'+'chBounds']=-0xbd1+-0x93d+0x23*0x9a);}['calculateL'+'ocalBounds'](){let _0x14dc73=Number['MAX_VALUE'],_0x5e7f81=Number['MAX_VALUE'],_0x101fa6=Number['MAX_VALUE'],_0xa56b35=-Number['MAX_VALUE'],_0x1cf759=-Number['MAX_VALUE'],_0x5a498a=-Number['MAX_VALUE'],_0x20a66a=-0xa*-0xbb+-0x99a+0x24c,_0x4c9778=-0xbb*0x19+0x1*-0x1c85+0x2ec8*0x1;const _0x3ca6e9=this['lifetime']/this['precision'],_0x89460d=[this['qVelocity'],this['qVelocity2']],_0x1d53ac=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x30a720=[-0x7*0x43+0x1511+0x99e*-0x2,-0xd8d*-0x1+0x166+-0xef3],_0xfae4d1=[0x1*0xc86+-0x6e*0x29+0x518,0x1224+0x448*0x2+-0x1ab4],_0x2c4775=[-0x15d8+0x53*-0x13+0x6b*0x43,0x26db+0x2105+-0x47e0],_0x4d36f4=[0x259b+0x1833+0x3dce*-0x1,-0x2*0x9a4+0x1e8*-0xa+-0xc*-0x332],_0x3443c7=[-0x1*-0x1ca6+-0x1*0x2258+0x5b2,0xa*-0x27f+-0xb*-0x1e+0x2*0xbd6];let _0x20cfd7,_0x1c69eb,_0x26a031;for(let _0x587363=0xd4*0x15+-0x267a+0x2*0xa8b;_0x587363<this['precision']+(-0x212+0x3*-0x695+-0xae9*-0x2);_0x587363++){const _0x2b8b3f=Math['min'](_0x587363,this['precision']-(0x33+0xa*0xad+-0x6f4));for(let _0x8e8ffe=-0xd75+-0x1db7+0x2b2c;_0x8e8ffe<0x1ea+-0xb7+-0x131*0x1;_0x8e8ffe++)_0x20cfd7=_0x1d53ac[_0x8e8ffe][_0x2b8b3f*(-0x125*-0xd+-0x1572+-0x34a*-0x2)+(-0xc26+-0x7b5*0x1+0x13db)]*_0x3ca6e9+_0x30a720[_0x8e8ffe],_0x1c69eb=_0x1d53ac[_0x8e8ffe][_0x2b8b3f*(-0x1d55+0x1*0x493+0x18c5*0x1)+(-0x5*0x124+0x2bc+0x2f9)]*_0x3ca6e9+_0xfae4d1[_0x8e8ffe],_0x26a031=_0x1d53ac[_0x8e8ffe][_0x2b8b3f*(0x199d*0x1+0x1*-0xdb7+-0xbe3)+(-0x1a4*-0x3+-0x197c+0x1492)]*_0x3ca6e9+_0x2c4775[_0x8e8ffe],_0x14dc73=Math['min'](_0x20cfd7,_0x14dc73),_0x5e7f81=Math['min'](_0x1c69eb,_0x5e7f81),_0x101fa6=Math['min'](_0x26a031,_0x101fa6),_0xa56b35=Math['max'](_0x20cfd7,_0xa56b35),_0x1cf759=Math['max'](_0x1c69eb,_0x1cf759),_0x5a498a=Math['max'](_0x26a031,_0x5a498a),_0x30a720[_0x8e8ffe]=_0x20cfd7,_0xfae4d1[_0x8e8ffe]=_0x1c69eb,_0x2c4775[_0x8e8ffe]=_0x26a031;for(let _0x43e7ab=0x17*0xb5+-0xb5e+-0x4e5;_0x43e7ab<0x1*0x18d0+-0x463+-0x146b;_0x43e7ab++)_0x3443c7[_0x43e7ab]+=_0x3ca6e9*Math['sqrt'](_0x89460d[_0x43e7ab][_0x2b8b3f*(0x1169+-0xc9e+-0x22*0x24)+(0x6*0x293+0x2449+-0x33bb)]*_0x89460d[_0x43e7ab][_0x2b8b3f*(0x23a5+0x9af+-0x2d51)+(-0x11df+0x593*0x3+0x126)]+_0x89460d[_0x43e7ab][_0x2b8b3f*(-0x47f*-0x1+0x1169+-0x15e5)+(0x8ad*0x1+0x2*-0x59e+0x290)]*_0x89460d[_0x43e7ab][_0x2b8b3f*(-0x1*0x1331+-0xab9+0x1ded)+(0x2324+-0x10*0xa4+-0x18e3)]+_0x89460d[_0x43e7ab][_0x2b8b3f*(0x13a5+-0x257d+-0x11db*-0x1)+(0x2221+-0x1282+-0x23b*0x7)]*_0x89460d[_0x43e7ab][_0x2b8b3f*(-0x20a9+0x1*0x26e7+-0x5*0x13f)+(-0x1*-0x1bcf+-0x43f+-0x178e)]);_0x4d36f4[-0x2af+0x576+-0xed*0x3]+=this['qRadialSpe'+'ed'][_0x2b8b3f]*_0x3ca6e9,_0x4d36f4[-0x10*0x98+-0x188*-0x4+0x361]+=this['qRadialSpe'+'ed2'][_0x2b8b3f]*_0x3ca6e9,_0x20a66a=Math['max'](_0x20a66a,Math['max'](Math['abs'](_0x4d36f4[-0x2ea*0xb+0x844*0x3+-0x2*-0x3a1]),Math['abs'](_0x4d36f4[0x3d9+0x37+-0x40f]))),_0x4c9778=Math['max'](_0x4c9778,this['qScale'][_0x2b8b3f]);}this['emitterSha'+'pe']===Ys?(_0x20cfd7=this['emitterExt'+'ents']['x']*(0x1*-0xb11+-0x530+0x1041*0x1+0.5),_0x1c69eb=this['emitterExt'+'ents']['y']*(-0x9*0x3bb+-0x81+0x2*0x110a+0.5),_0x26a031=this['emitterExt'+'ents']['z']*(-0x1fd2+0x161d+0x9b5+0.5)):(_0x20cfd7=this['emitterRad'+'ius'],_0x1c69eb=this['emitterRad'+'ius'],_0x26a031=this['emitterRad'+'ius']);const _0x5e3473=Math['max'](_0x3443c7[0x665*0x6+-0x16e3+-0xf7b],_0x3443c7[-0x207d+0x100*-0x25+0x457e]);Wl['x']=_0x14dc73-_0x4c9778-_0x20cfd7-_0x20a66a-_0x5e3473,Wl['y']=_0x5e7f81-_0x4c9778-_0x1c69eb-_0x20a66a-_0x5e3473,Wl['z']=_0x101fa6-_0x4c9778-_0x26a031-_0x20a66a-_0x5e3473,$l['x']=_0xa56b35+_0x4c9778+_0x20cfd7+_0x20a66a+_0x5e3473,$l['y']=_0x1cf759+_0x4c9778+_0x1c69eb+_0x20a66a+_0x5e3473,$l['z']=_0x5a498a+_0x4c9778+_0x26a031+_0x20a66a+_0x5e3473,this['localBound'+'s']['setMinMax'](Wl,$l);}['rebuild'](){const _0x5b8dea=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===Ys?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>Cf||_0x5b8dea['maxVertexT'+'extures']<=-0x1*0xd9+0x1693*-0x1+0x176d||_0x5b8dea['fragmentUn'+'iformsCoun'+'t']<-0x5*-0x557+0x1fb2+-0x41*0xe5||_0x5b8dea['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x5b8dea['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],gi=this['useCpu']||this['pack8']?-0xcc*-0xb+0xa82+-0x22*0x91:0x2670+-0x2108+0x1*-0x566,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x1*0x980+0x3c*0x9b+-0x2dd4]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x1f7d*-0x1+0x23*0x71+0x100b]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x1886+0x20d2+-0x84a),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x36b300=-0x1*-0x223+0x5*0x133+0x2b6*-0x3;_0x36b300<this['numParticl'+'es'];_0x36b300++)this['vbToSort'][_0x36b300]=[0x4*0x998+0x192+0x13f9*-0x2,0xe5*-0x2b+-0x28b+0x2902];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*gi*Hl);const _0xe32c01=this['node']===null||this['localSpace']?I['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===Ys&&(this['node']===null||this['localSpace']?wr['setTRS'](I['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):wr['setTRS'](I['ZERO'],this['node']['getRotatio'+'n'](),w_['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Si[0xf97+0x2*0x5bf+-0x3*0x907]=this['emitterExt'+'ents']['x']!==-0x17e7+0x969*-0x2+0x2ab9?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:-0x535+0x6ac+-0x177,Si[0x14*-0x1c8+-0x10d*-0x8+0x1*0x1b39]=this['emitterExt'+'ents']['y']!==0x182f+0x1af5+-0x3324?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x24c2+0x1*0x8e+0x10*-0x255,Si[-0x3*0xbb1+-0x1b15*0x1+0x3e2a]=this['emitterExt'+'ents']['z']!==-0x24d8+0x1*0x541+0x1f97?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x6d9*-0x2+0x5*0x713+0x1f*-0xb3);for(let _0x2e7394=0xb7a*-0x2+0x215f+-0xa6b;_0x2e7394<this['numParticl'+'es'];_0x2e7394++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],wr,Si,_0xe32c01,_0x2e7394),this['useCpu']&&(this['particleTe'+'x'][_0x2e7394*Hl+(-0x1*-0xbeb+-0x6*-0x58f+-0x2d42*0x1)+this['numParticl'+'esPot']*(-0x216d+-0x2*-0x1365+-0x55b)*Hl]=0xd*-0x2c3+-0x14d3+-0x12e9*-0x3);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*gi*Hl);for(let _0x3dfc30=-0xac6+-0x240b*0x1+0x2ed1;_0x3dfc30<this['particleTe'+'xStart']['length'];_0x3dfc30++)this['particleTe'+'xStart'][_0x3dfc30]=this['particleTe'+'x'][_0x3dfc30];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'x'],Oe,0xd*-0x22d+-0x998+-0x1*-0x25e2,!(-0x1b7a+0x87b+0x1300)),this['particleTe'+'xOUT']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'x'],Oe,0x13*0xa3+0x18a7+-0x24bf,!(-0x983+-0x1b7d+-0x2501*-0x1)),this['particleTe'+'xStart']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'xStart'],Oe,-0xf78+-0xe47+-0x20*-0xee,!(0xe5b+-0x41+0x1*-0xe19))):(this['particleTe'+'xIN']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'x']),this['particleTe'+'xOUT']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'x']),this['particleTe'+'xStart']=ms(_0x5b8dea,this['numParticl'+'esPot'],gi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new vt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0xe00+-0xc0b+-0x2*0xfa)}),this['rtParticle'+'TexOUT']=new vt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(-0xfae+-0x1*0xda3+-0xea9*-0x2)}),this['swapTex']=!(0x16ce+0xa89+-0x2156));const _0x422e47=new Map();this['localSpace']&&_0x422e47['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x422e47['set']('PACK8',''),this['emitterSha'+'pe']===Ys&&_0x422e47['set']('EMITTERSHA'+'PE_BOX','');const _0x3e91e5='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x165639=Ce['get'](_0x5b8dea,_0x5b8dea['isWebGPU']?st:ze),_0x41281a=new Map(_0x165639),_0x3280cc={'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x422e47,'fragmentIncludes':_0x41281a};_0x3280cc['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x3e91e5,_0x422e47['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=Ut['createShad'+'er'](_0x5b8dea,_0x3280cc),_0x422e47['delete']('RESPAWN'),_0x3280cc['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x3e91e5,_0x422e47['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=Ut['createShad'+'er'](_0x5b8dea,_0x3280cc),_0x422e47['delete']('NO_RESPAWN'),_0x3280cc['uniqueName']='ParticleUp'+'dateStop-'+_0x3e91e5,_0x422e47['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=Ut['createShad'+'er'](_0x5b8dea,_0x3280cc),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:-0xc95+0x10b7*0x2+-0x14d5,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][0x635+0xe4*-0x8+0xeb]['numIndices']:0xed3+0x110b*0x2+-0x30e3,this['_allocate'](this['numParticl'+'es']);const _0x410b78=new Ge(_0x5b8dea);_0x410b78['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x410b78['indexBuffe'+'r'][0x1d0b+0x427+-0x2132]=this['indexBuffe'+'r'],_0x410b78['primitive'][-0x9a4+-0x2623*-0x1+-0x1c7f]['type']=zs,_0x410b78['primitive'][-0x22f*0x9+0x1a67+0x18*-0x48]['base']=-0x140c+-0x9*0x51+0x16e5,_0x410b78['primitive'][0x662+-0x982+0x4*0xc8]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x410b78['primitive'][0x1d58+0x3*-0xb8d+0x54f]['indexed']=!(-0x5*-0x133+-0x1abd+0x14be),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x1ad9ff=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(0xb5*-0x1f+-0x149d*-0x1+0x14e*0x1);this['meshInstan'+'ce']=new We(_0x410b78,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(-0x14ad+0x1694+-0x1e6),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(0xf59+0xfa0*0x2+0x2e99*-0x1),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(-0xc3f+-0x18d*0xd+0x2069),this['meshInstan'+'ce']['visible']=_0x1ad9ff,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](-0x1*0x15f1+0xd*0x49+-0x30a*-0x6,!(0xe5*-0xb+0x226a+0xa*-0x275)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=0x1ba7*-0x1+0x9d6+0x8e9*0x2&&(this['animTilesX']>0x1807+-0x1282*-0x1+-0x2a88||this['animTilesY']>-0x421+-0x28*-0xab+-0x1696)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x58e6c4=this['precision'],_0x15db47=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x58e6c4),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x58e6c4),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x58e6c4,-0x4ae*0x2+-0x454+0xdb0,-0x1d6f+0xdf2+0x6*0x295),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x58e6c4),this['qScale']=this['scaleGraph']['quantize'](_0x58e6c4),this['qAlpha']=this['alphaGraph']['quantize'](_0x58e6c4),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x58e6c4),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x58e6c4),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x58e6c4),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x58e6c4,-0xc1b+0x1d3*-0x11+-0x1*-0x2b1e,0x1679*-0x1+-0x506*-0x3+0x768*0x1),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x58e6c4),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x58e6c4),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x58e6c4),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x58e6c4);for(let _0x3159cd=-0x1a4d+0x3*0xad1+0x1*-0x626;_0x3159cd<_0x58e6c4;_0x3159cd++)this['qRotSpeed'][_0x3159cd]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x3159cd]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x22cb+-0x1*0x2681+0x3b9*0x1),this['velocityUM'+'ax']=new Float32Array(0x1f65+-0x1*0x1097+-0x21d*0x7),this['colorUMax']=new Float32Array(-0x196f+0x1803+0x16f),this['rotSpeedUM'+'ax']=[0x24c5*-0x1+0x7f1*0x2+0x14e3],this['scaleUMax']=[-0xa*-0x267+-0xda0*0x2+0x33a],this['alphaUMax']=[0x815+0x6a*-0x7+0x1*-0x52f],this['radialSpee'+'dUMax']=[-0x1cf*-0x4+0x511+-0xc4d],this['qLocalVelo'+'cityDiv']=Er(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Er(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Er(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Er(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Er(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Er(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Er(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x5a5d91=[0x959+-0x41b*0x3+-0x8*-0x5f,0x1*-0x1e1d+0x52*-0x72+0x1*0x42a1,0xabc*-0x2+0x1*-0x1a35+0x2fad];Lr(this['qVelocity'],_0x5a5d91);const _0x567af6=[0xf27+-0x779+0x2*-0x3d7,0x4c4*0x2+0x12af*-0x1+0x47*0x21,-0x1*-0x2513+0x1cec*-0x1+-0x827*0x1];Lr(this['qVelocity2'],_0x567af6);const _0x33da78=[0x1974*-0x1+0x1b3b+0x5*-0x5b,0x1*0x22be+0x1*-0x257f+0x2c1,0x1411+-0x106e+-0x3a3];Lr(this['qLocalVelo'+'city'],_0x33da78);const _0x18cdba=[0x13b*-0xf+0x9*0x389+-0x17c*0x9,0x7b9+-0xec5+-0x4*-0x1c3,0x2*0x40a+-0x20d6+-0x1*-0x18c2];Lr(this['qLocalVelo'+'city2'],_0x18cdba);const _0xd9dc83=[-0x344+0x2348+-0x1*0x2004];Lr(this['qRadialSpe'+'ed'],_0xd9dc83);const _0x4f0418=[0x1*-0x222a+0x17c*-0x4+0x1d*0x162];Lr(this['qRadialSpe'+'ed2'],_0x4f0418);let _0x4df182=Math['max'](_0x5a5d91[0x125+0xffc+-0x1121],_0x567af6[-0x2230+-0x1*0x217d+0x43ad]);_0x4df182=Math['max'](_0x4df182,_0x5a5d91[0x26+-0x113b+-0x9*-0x1e6]),_0x4df182=Math['max'](_0x4df182,_0x567af6[0x2063+0x3d1*0x5+-0x3377]),_0x4df182=Math['max'](_0x4df182,_0x5a5d91[-0xba9+0x2345+0x6*-0x3ef]),_0x4df182=Math['max'](_0x4df182,_0x567af6[-0x235f+0x1c*-0x8+0x2441]);let _0xf006bb=Math['max'](_0x33da78[0x490*0x2+-0x4f*0x49+0xd67],_0x18cdba[-0x4*0x3f1+0x11cf+-0x20b]);_0xf006bb=Math['max'](_0xf006bb,_0x33da78[-0x11*0x12f+-0x1*0xd38+-0x61*-0x58]),_0xf006bb=Math['max'](_0xf006bb,_0x18cdba[-0x1*-0x1849+0x1*-0xa14+-0x194*0x9]),_0xf006bb=Math['max'](_0xf006bb,_0x33da78[-0x169e+-0x12e6+0x2986]),_0xf006bb=Math['max'](_0xf006bb,_0x18cdba[-0x6+0x2*-0xb96+0x24*0xa5]);const _0x1b0085=Math['max'](_0xd9dc83[0x74+-0xd3*-0x29+0x223f*-0x1],_0x4f0418[-0x64b+0x195b+-0x1310]);this['maxVel']=_0x4df182+_0xf006bb+_0x1b0085;}this['useCpu']||(this['internalTe'+'x0']=ms(_0x15db47,_0x58e6c4,0x1*-0xd0e+-0x3*0x65b+0x2020,E_(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=ms(_0x15db47,_0x58e6c4,0x771+-0x42*-0x2+0x7f4*-0x1,E_(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=ms(_0x15db47,_0x58e6c4,0x44*-0x59+0x71*-0x2a+-0x2a2f*-0x1,LA(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=ms(_0x15db47,_0x58e6c4,-0x2*0xea2+-0x1c45+0x398a,RA(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=ms(_0x15db47,_0x58e6c4,0x2ea+0xd*0x1d4+0x1aad*-0x1,DA(this['qColor'],this['qAlpha']),hs,0xec3+0x1ed*-0x1+-0x16d*0x9,!(-0x6*0xe3+0x25c*-0x6+-0x137a*-0x1));}['_setMateri'+'alTextures'](){this['colorMap']&&(M['call'](()=>{xS(this['colorMap']['format'])&&M['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x3e357c=new MA(this);return _0x3e357c['name']='EmitterMat'+'erial:'+this['node']['name'],_0x3e357c['cull']=xt,_0x3e357c['alphaWrite']=!(-0x16f2+-0x1f0c+0x35ff),_0x3e357c['blendType']=this['blendType'],_0x3e357c['depthWrite']=this['depthWrite'],_0x3e357c;}['resetMater'+'ial'](){const _0x309616=this['material'];_0x309616['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x309616['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x309616['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x309616['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x309616['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x309616['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x309616['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x309616['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x309616['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x309616['setParamet'+'er']('colorParam',this['colorParam']),_0x309616['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x309616['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x309616['setParamet'+'er']('lifetime',this['lifetime']),_0x309616['setParamet'+'er']('rate',this['rate']),_0x309616['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x309616['setParamet'+'er']('seed',this['seed']),_0x309616['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][0x1*-0x2595+0x1f21+0x674]),_0x309616['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][-0x89*-0x37+-0x1f57+-0x1*-0x1e8]),_0x309616['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x1*-0x1e7f+0x2663*-0x1+0x2271*0x2]),_0x309616['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x309616['setParamet'+'er']('graphSampl'+'eSize',(0x1*-0x1f1e+0x1*0x14f7+0x208*0x5)/this['precision']),_0x309616['setParamet'+'er']('emitterSca'+'le',new Float32Array([-0x615+0x1695*-0x1+0x1cab,0x1*-0x4a5+-0xe*0x109+-0x5*-0x3d4,0xca7+0x1459*0x1+-0x20ff*0x1])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x309616['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x309616['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x309616['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][0x789+0x1*-0x97+-0x7*0xfe]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x114f*0x2+0xeb4+0x13eb]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][0x4b7*-0x1+0x158d+-0x1*0x10d4]=this['wrapBounds']['z'],_0x309616['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>-0x15ca+0x3*-0x782+0x2c50&&_0x309616['setParamet'+'er']('softening',(0xc5c+0x1baf*0x1+-0x280a)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x171a*-0x1+-0x6ab+0x1*0x1e29))),this['stretch']>-0x3e9*-0x3+-0x2286*0x1+-0xf*-0x185&&(_0x309616['cull']=xt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x3c09c9,_0x278b7e;if(this['orientatio'+'n']===Vh)_0x3c09c9=new Float32Array([0x1d03+0x705*0x1+-0x2407,0x144d*-0x1+-0xa25*0x2+0x2897,-0x5*0x2a5+0x6f8+0x641]),_0x278b7e=new Float32Array([0x1b55+0x2*-0x2bd+-0x749*0x3,-0x1*0x20a+0x24f2+-0x22e8,-0x85f+-0x9*0x269+0x1e11]);else{let _0x8d826a;this['orientatio'+'n']===ZT?_0x8d826a=this['particleNo'+'rmal']['normalize']():_0x8d826a=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x17a049=new I(-0x18e9+0x959*-0x1+0x4e5*0x7,-0x19c4+0x1*0x1f4b+-0x587,-0xa7*0x2b+-0x2*0x16c+0x1ee5);Math['abs'](_0x17a049['dot'](_0x8d826a))===-0x1ffb+-0x2*-0xa77+-0x236*-0x5&&_0x17a049['set'](0x7b1*0x1+-0xc96*0x1+0x4e5,-0x43d+-0x10b*0x2+0x653*0x1,0xcdf*-0x3+0x687+0x2017);const _0x9e21fb=new I()['cross'](_0x8d826a,_0x17a049)['normalize']();_0x17a049['cross'](_0x9e21fb,_0x8d826a)['normalize'](),_0x3c09c9=new Float32Array([_0x17a049['x'],_0x17a049['y'],_0x17a049['z']]),_0x278b7e=new Float32Array([_0x9e21fb['x'],_0x9e21fb['y'],_0x9e21fb['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x3c09c9),this['material']['setParamet'+'er']('faceBinorm',_0x278b7e);}['getVertexI'+'nfo'](){const _0x2fa772=[];return this['useCpu']?_0x2fa772['push']({'semantic':vf,'components':0x4,'type':Be},{'semantic':Oh,'components':0x4,'type':Be},{'semantic':$u,'components':0x4,'type':Be},{'semantic':Xu,'components':0x1,'type':Be},{'semantic':qu,'components':this['useMesh']?-0x5*-0x211+0x2214+-0x5*0x8e1:0xf4a+0x103f*0x2+-0x2fc6,'type':Be}):(_0x2fa772['push']({'semantic':vf,'components':0x4,'type':Be}),this['useMesh']&&_0x2fa772['push']({'semantic':Oh,'components':0x2,'type':Be})),_0x2fa772;}['_allocate'](_0x3523e1){const _0x1b6a3d=_0x3523e1*this['numParticl'+'eVerts'],_0x23152d=_0x3523e1*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(-0x1869*-0x1+-0x5*-0x67d+0x1*-0x38da)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x1b6a3d){const _0x4da17f=this['getVertexI'+'nfo'](),_0x11cd13=new zt(this['graphicsDe'+'vice'],_0x4da17f);this['vertexBuff'+'er']=new xs(this['graphicsDe'+'vice'],_0x11cd13,_0x1b6a3d,{'usage':Mh}),this['indexBuffe'+'r']=new dr(this['graphicsDe'+'vice'],hr,_0x23152d);const _0x5b19a9=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x560673,_0x3d1690,_0x285e5c;if(this['useMesh']){_0x560673=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x3d1690=_0x560673['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x28be37=-0xe75+-0x11c*0x11+0x2151;_0x28be37<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x28be37++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x28be37]['name']===Yt){_0x285e5c=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x28be37]['offset']/(0x2*0xa25+-0x15*0x65+-0xbfd);break;}}for(let _0xb3602=-0xf*-0xa7+0x69d*0x2+0x1703*-0x1;_0xb3602<_0x1b6a3d;_0xb3602++){const _0x2a6552=Math['floor'](_0xb3602/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x5767a2=_0xb3602%this['numParticl'+'eVerts'];_0x5b19a9[_0xb3602*(0x1*0xf91+-0x34d*0x1+-0xc3e*0x1)]=_0x560673[_0x5767a2*_0x3d1690],_0x5b19a9[_0xb3602*(0x2*-0xd5d+0x2*0xee7+-0x30e)+(0x1b14+0x1*-0x152e+0x1*-0x5e5)]=_0x560673[_0x5767a2*_0x3d1690+(-0x2174+0x2*0x1373+0x1*-0x571)],_0x5b19a9[_0xb3602*(-0x2*-0x1225+-0x1b*-0x31+-0x296f)+(-0x25f2+-0xe1*0x5+0x2a59)]=_0x560673[_0x5767a2*_0x3d1690+(0x49e+0x25e0+-0x4*0xa9f)],_0x5b19a9[_0xb3602*(0x23e9+0x16e2+-0x3eb*0xf)+(-0x2*-0x11fa+0x6f+-0x6*0x610)]=_0x2a6552,_0x5b19a9[_0xb3602*(-0x9ca+0x7e5*-0x1+0x11b5)+(-0xc82+-0xd*0x2bf+0x3039)]=_0x560673[_0x5767a2*_0x3d1690+_0x285e5c+(-0xb67+0x316+0x851)],_0x5b19a9[_0xb3602*(-0x217b*0x1+0x1*-0x1553+-0x74*-0x79)+(0x927+0xc01*-0x3+0x1ae1)]=0x1*0x25c3+-0xe*-0x277+-0x4844-_0x560673[_0x5767a2*_0x3d1690+_0x285e5c+(0x795+0xa3b*0x1+-0x11cf)];}else{const _0x9a613b=_0xb3602%(0x1*-0x15bf+0x1bb3+0x2*-0x2f8);_0x5b19a9[_0xb3602*(0x1901+-0xb1f+-0xdde*0x1)]=S_[_0x9a613b][-0x1*-0x559+0x52*-0x5f+0x1*0x1915],_0x5b19a9[_0xb3602*(-0x1082*-0x1+0x5c6+-0x1644)+(0xa*0x24b+-0x1f69+-0x3*-0x2d4)]=S_[_0x9a613b][0x633*0x2+-0x863+-0x402],_0x5b19a9[_0xb3602*(-0x184e+0x1*0xa9+0x17a9)+(-0x1686+-0x7*0x146+-0x15e*-0x17)]=-0x11*0xf4+0xec2+0x172,_0x5b19a9[_0xb3602*(-0xf0f+0x1afe+-0xbeb)+(-0xfe*-0x2+-0x5d4+-0x1*-0x3db)]=_0x2a6552;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x5b19a9),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x3a942d=0x1bfe+-0x2598+0x99a*0x1;const _0x47308f=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x4137a1=this['mesh']['indexBuffe'+'r'][0x15e9+-0x23ad*0x1+0xdc4];_0x560673=new Bh[_0x4137a1['format']](_0x4137a1['lock']());}for(let _0x30a362=-0x20ec*-0x1+-0x4ca*-0x8+-0x473c;_0x30a362<_0x3523e1;_0x30a362++)if(this['useMesh']){for(let _0x39b369=0x1e7a+0x1*-0x169d+-0x7dd;_0x39b369<this['numParticl'+'eIndices'];_0x39b369++)_0x47308f[_0x30a362*this['numParticl'+'eIndices']+_0x39b369]=_0x560673[_0x39b369]+_0x30a362*this['numParticl'+'eVerts'];}else{const _0x217240=_0x30a362*(0x3a0+0xa1*-0x29+0x162d);_0x47308f[_0x3a942d++]=_0x217240,_0x47308f[_0x3a942d++]=_0x217240+(0x489+-0x26be+-0x12e*-0x1d),_0x47308f[_0x3a942d++]=_0x217240+(-0x2*-0x33b+0x1895+-0xe3*0x23),_0x47308f[_0x3a942d++]=_0x217240,_0x47308f[_0x3a942d++]=_0x217240+(0x1*0x236e+-0x34*0x89+-0x798),_0x47308f[_0x3a942d++]=_0x217240+(0x1ff3+-0x2*-0xa31+-0x3452);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][0x1*-0xaff+0xce5*-0x2+0x24c9]['unlock']();}}['reset'](){if(this['beenReset']=!(-0x2513+-0x166*-0xa+0x101*0x17),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x5a0fb5=-0x22b4+-0x1495+-0x1*-0x3749;_0x5a0fb5<this['particleTe'+'xStart']['length'];_0x5a0fb5++)this['particleTe'+'x'][_0x5a0fb5]=this['particleTe'+'xStart'][_0x5a0fb5];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x4ebf93=this['loop'];this['loop']=!(0x8e2+0x1*0x2339+-0x7*0x64d),this['addTime'](-0xfe+-0x24f3+0xb*0x373,!(-0x38b*-0x1+-0xa8c+0x702)),this['loop']=_0x4ebf93,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x508064){const _0x5c421b=_0x508064/this['lifetime'],_0x4f61e6=Math['min'](Math['floor'](_0x5c421b*this['precision']),this['precision']),_0x356585=_0x508064/_0x4f61e6;for(let _0x4c2731=0x6e0+0x759*0x1+-0xb*0x14b;_0x4c2731<_0x4f61e6;_0x4c2731++)this['addTime'](_0x356585,!(0x19b8+-0x25*-0x48+-0x529*0x7));}['resetTime'](){this['endTime']=OA(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x1d6caf,_0x4c9902){const _0x1c519e=this['graphicsDe'+'vice'],_0x50a9eb=de();if(this['simTimeTot'+'al']+=_0x1d6caf,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x450f95=this['animTilesP'+'arams'];_0x450f95[0x16b7+0x354*-0x5+-0x5*0x137]=(0x173*0x9+0x16a*0x3+-0x1148)/this['animTilesX'],_0x450f95[0x2191+-0xaf2+0x243*-0xa]=(0x244d+0x2293+-0x46df)/this['animTilesY'];const _0x5272bb=this['animParams'];_0x5272bb[0x73*0x1d+0x73a*-0x1+-0x5cd]=this['animStartF'+'rame'],_0x5272bb[0x371*0xb+-0x1*0x1f33+-0xd*0x83]=this['animNumFra'+'mes']*this['animSpeed'],_0x5272bb[-0x9*-0x329+0x11*0x35+-0x1ff4]=this['animNumFra'+'mes']-(0x2db+-0xeb4+0xbda),_0x5272bb[0x11a7+0x6*0x19d+0xda9*-0x2]=this['animNumAni'+'mations']-(-0xb1b*0x1+-0xb1+-0x3*-0x3ef);const _0x418285=this['animIndexP'+'arams'];_0x418285[0x10*0x251+-0xd4*0x8+-0x1e70]=this['animIndex'],_0x418285[-0x186+-0xb2a*0x1+0x43b*0x3]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===Ys&&(Si[0x1658+-0x431*0x1+-0x1227]=this['emitterExt'+'ents']['x']!==0x427*0x1+-0x1d28+-0x1901*-0x1?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x959*-0x1+0x185c*-0x1+0x1*0x21b5,Si[-0x15a2+-0x1b48+0x30eb]=this['emitterExt'+'ents']['y']!==-0xe63+-0x9bf*0x1+0x1822?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x184f+-0xcb6+-0xb99,Si[0x154*0xb+-0x1c73+0x1*0xdd9]=this['emitterExt'+'ents']['z']!==-0xcaa+0x1352*0x1+0xc*-0x8e?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x1183+0x1f*0xd3+-0x2b10,this['meshInstan'+'ce']['node']===null?wr['setTRS'](I['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):wr['setTRS'](I['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),w_['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x904beb;const _0x3445b4=this['meshInstan'+'ce']['node']===null?I['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x2*0x7d+0x14c9+-0x13cf]=_0x3445b4['x'],this['emitterSca'+'leUniform'][-0x1d50+0x1dd6+-0x85]=_0x3445b4['y'],this['emitterSca'+'leUniform'][0x120a*0x1+0x21ed*-0x1+0xfe5]=_0x3445b4['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x904beb=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][-0x58*0x3e+0x2*0x22d+-0x87b*-0x2]=_0x904beb['x'],this['emitterPos'+'Uniform'][0x175c+-0x259*0x10+0xe35]=_0x904beb['y'],this['emitterPos'+'Uniform'][0x1*-0x3f1+-0xe1d+0x908*0x2]=_0x904beb['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x1c519e,wr,Si,_0x1d6caf,_0x4c9902);else{const _0x2449dc=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x2449dc,this['vbToSort'],this['particleTe'+'x'],wr,Si,_0x904beb,_0x1d6caf,_0x4c9902);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(0x55*-0x49+-0x761+0x1f9f)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x50a9eb;}['_destroyRe'+'sources'](){var _0x4e8e00,_0x2525f0,_0x1b78c5,_0x212c70,_0x71182,_0x42bd2d,_0x5d47f9,_0x5c7a4e,_0x182b73,_0x4b1c71,_0x2ba35a,_0x57ef57;(_0x4e8e00=this['particleTe'+'xIN'])==null||_0x4e8e00['destroy'](),this['particleTe'+'xIN']=null,(_0x2525f0=this['particleTe'+'xOUT'])==null||_0x2525f0['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x1b78c5=this['rtParticle'+'TexIN'])==null||_0x1b78c5['destroy'](),this['rtParticle'+'TexIN']=null,(_0x212c70=this['rtParticle'+'TexOUT'])==null||_0x212c70['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x71182=this['internalTe'+'x0'])==null||_0x71182['destroy'](),this['internalTe'+'x0']=null,(_0x42bd2d=this['internalTe'+'x1'])==null||_0x42bd2d['destroy'](),this['internalTe'+'x1']=null,(_0x5d47f9=this['internalTe'+'x2'])==null||_0x5d47f9['destroy'](),this['internalTe'+'x2']=null,(_0x5c7a4e=this['internalTe'+'x3'])==null||_0x5c7a4e['destroy'](),this['internalTe'+'x3']=null,(_0x182b73=this['colorParam'])==null||_0x182b73['destroy'](),this['colorParam']=null,(_0x4b1c71=this['vertexBuff'+'er'])==null||_0x4b1c71['destroy'](),this['vertexBuff'+'er']=void(0x1720+0x27*-0xb3+-0x1*-0x425),(_0x2ba35a=this['indexBuffe'+'r'])==null||_0x2ba35a['destroy'](),this['indexBuffe'+'r']=void(0x1d15+0x1ffa+-0xcb*0x4d),(_0x57ef57=this['material'])==null||_0x57ef57['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class BA extends aa{['generateKe'+'y'](_0x1fac17){var _0x3b4a43;const _0x466c72=_0x1fac17['shaderDesc'],_0x5d3e64=_0x466c72['vertexGLSL']?ti(_0x466c72['vertexGLSL']):0x891+-0x5e*0x8+-0x5a1,_0x418522=_0x466c72['fragmentGL'+'SL']?ti(_0x466c72['fragmentGL'+'SL']):-0x1734+-0x1c*-0x26+0x5c*0x35,_0x411c2f=_0x466c72['vertexWGSL']?ti(_0x466c72['vertexWGSL']):-0x3*0x4fd+0x2599+-0xb51*0x2,_0x1788b4=_0x466c72['fragmentWG'+'SL']?ti(_0x466c72['fragmentWG'+'SL']):-0x37b*0x3+0xafd+-0x8c,_0x49b868=aa['definesHas'+'h'](_0x1fac17['defines']),_0x46b6dd=((_0x3b4a43=_0x1fac17['shaderChun'+'ks'])==null?void(0x1*-0x2695+-0x1675*0x1+-0x4b2*-0xd):_0x3b4a43['key'])??'';let _0x511241=_0x466c72['uniqueName']+'_'+_0x49b868+'_'+_0x5d3e64+'_'+_0x418522+'_'+_0x411c2f+'_'+_0x1788b4+'_'+_0x46b6dd;return _0x1fac17['skin']&&(_0x511241+='_skin'),_0x1fac17['useInstanc'+'ing']&&(_0x511241+='_inst'),_0x1fac17['useMorphPo'+'sition']&&(_0x511241+='_morphp'),_0x1fac17['useMorphNo'+'rmal']&&(_0x511241+='_morphn'),_0x1fac17['useMorphTe'+'xtureBased'+'Int']&&(_0x511241+='_morphi'),_0x511241;}['createAttr'+'ibutesDefi'+'nition'](_0x25ffa9,_0x142186){const _0x2c466a=_0x142186['shaderDesc']['attributes'],_0x4495c7=_0x2c466a?{..._0x2c466a}:void(-0x7*-0x25f+0x947+-0x24*0xb8);_0x142186['skin']&&(_0x4495c7['vertex_bon'+'eWeights']=li,_0x4495c7['vertex_bon'+'eIndices']=ns),(_0x142186['useMorphPo'+'sition']||_0x142186['useMorphNo'+'rmal'])&&(_0x4495c7['morph_vert'+'ex_id']=_n),_0x25ffa9['attributes']=_0x4495c7;}['createVert'+'exDefiniti'+'on'](_0x365600,_0x3199d2,_0x4a7726,_0x51b5df){const _0xa2d8a0=_0x3199d2['shaderDesc'],_0x366624=new Map(_0x4a7726);_0x366624['set']('transformI'+'nstancingV'+'S','');const _0x413e28=new Map(_0x3199d2['defines']);_0x3199d2['skin']&&_0x413e28['set']('SKIN',!(0x7fd+-0x3*-0x735+-0x1d9c)),_0x3199d2['useInstanc'+'ing']&&_0x413e28['set']('INSTANCING',!(-0x13d6+-0x151*0x2+0x1678)),(_0x3199d2['useMorphPo'+'sition']||_0x3199d2['useMorphNo'+'rmal'])&&(_0x413e28['set']('MORPHING',!(0x1a51+0x4c3*-0x6+0x241)),_0x3199d2['useMorphTe'+'xtureBased'+'Int']&&_0x413e28['set']('MORPHING_I'+'NT',!(-0x1*0x2357+0x1f17+0x440)),_0x3199d2['useMorphPo'+'sition']&&_0x413e28['set']('MORPHING_P'+'OSITION',!(0x204*0xb+-0x1b09+0x4dd)),_0x3199d2['useMorphNo'+'rmal']&&_0x413e28['set']('MORPHING_N'+'ORMAL',!(0x1*0x1094+0x789+-0x1*0x181d))),_0x365600['vertexCode']=_0x51b5df?_0xa2d8a0['vertexWGSL']:_0xa2d8a0['vertexGLSL'],_0x365600['vertexIncl'+'udes']=_0x366624,_0x365600['vertexDefi'+'nes']=_0x413e28;}['createFrag'+'mentDefini'+'tion'](_0x28e168,_0xb08699,_0x2be2df,_0x291726){const _0x9d42b5=_0xb08699['shaderDesc'],_0xbdbf77=new Map(_0x2be2df),_0x5d6112=new Map(_0xb08699['defines']);_0x28e168['fragmentCo'+'de']=_0x291726?_0x9d42b5['fragmentWG'+'SL']:_0x9d42b5['fragmentGL'+'SL'],_0x28e168['fragmentIn'+'cludes']=_0xbdbf77,_0x28e168['fragmentDe'+'fines']=_0x5d6112;}['createShad'+'erDefiniti'+'on'](_0x4111bb,_0x384801){var _0x4ac243;const _0x4cae10=_0x384801['shaderDesc'],_0x332f22=_0x4111bb['isWebGPU']&&!!_0x4cae10['vertexWGSL']&&!!_0x4cae10['fragmentWG'+'SL']&&(((_0x4ac243=_0x384801['shaderChun'+'ks'])==null?void(0xa9f*-0x3+-0x591+0xc7a*0x3):_0x4ac243['useWGSL'])??!(-0x2224+-0x194*0x11+0x79f*0x8)),_0x3d406f={'name':'ShaderMate'+'rial-'+_0x4cae10['uniqueName'],'shaderLanguage':_0x332f22?st:ze,'fragmentOutputTypes':_0x4cae10['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x4cae10['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x4cae10['meshBindGr'+'oupFormat']},_0x1ca8de=_0x332f22?st:ze,_0x25cd60=qh['merge'](Ce['get'](_0x4111bb,_0x1ca8de),_0x384801['shaderChun'+'ks'][_0x1ca8de]);return this['createAttr'+'ibutesDefi'+'nition'](_0x3d406f,_0x384801),this['createVert'+'exDefiniti'+'on'](_0x3d406f,_0x384801,_0x25cd60,_0x332f22),this['createFrag'+'mentDefini'+'tion'](_0x3d406f,_0x384801,_0x25cd60,_0x332f22),$t['createDefi'+'nition'](_0x4111bb,_0x3d406f);}}const zA=new BA();class In extends ua{constructor(_0x247b7b){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x247b7b;}set['shaderDesc'](_0x4e9285){if(this['_shaderDes'+'c']=void(0x1aab*-0x1+-0x1*-0x247+-0xc32*-0x2),_0x4e9285&&(this['_shaderDes'+'c']={'uniqueName':_0x4e9285['uniqueName'],'attributes':_0x4e9285['attributes'],'fragmentOutputTypes':_0x4e9285['fragmentOu'+'tputTypes'],'vertexGLSL':_0x4e9285['vertexGLSL'],'fragmentGLSL':_0x4e9285['fragmentGL'+'SL'],'vertexWGSL':_0x4e9285['vertexWGSL'],'fragmentWGSL':_0x4e9285['fragmentWG'+'SL']},_0x4e9285['vertexCode']||_0x4e9285['fragmentCo'+'de']||_0x4e9285['shaderLang'+'uage'])){M['deprecated']('ShaderMate'+'rial\x20['+_0x4e9285['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x260b08=_0x4e9285['shaderLang'+'uage']??ze;_0x260b08===ze?(this['_shaderDes'+'c']['vertexGLSL']=_0x4e9285['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x4e9285['fragmentCo'+'de']):_0x260b08===st&&(this['_shaderDes'+'c']['vertexWGSL']=_0x4e9285['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x4e9285['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x1cc692){return super['copy'](_0x1cc692),this['shaderDesc']=_0x1cc692['shaderDesc'],this;}['getShaderV'+'ariant'](_0x213058){const {objDefs:_0x37c339}=_0x213058,_0x1143b5={'defines':Ut['getCoreDef'+'ines'](this,_0x213058),'skin':(_0x37c339&ko)!==-0x22ba+-0x1e8f*-0x1+0x42b,'useInstancing':(_0x37c339&Uo)!==-0x1f*-0xdf+-0x101d+-0xae4,'useMorphPosition':(_0x37c339&Bo)!==-0x4ba+-0x33c*-0x3+0x7*-0xb6,'useMorphNormal':(_0x37c339&zo)!==0xa*0x282+-0x1a*0x9e+-0x11*0x88,'useMorphTextureBasedInt':(_0x37c339&Vo)!==-0x9ab+0xab4+-0x35*0x5,'pass':_0x213058['pass'],'gamma':_0x213058['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x213058['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x213058['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x2b3b47=new Zc(_0x213058['viewUnifor'+'mFormat'],_0x213058['viewBindGr'+'oupFormat'],_0x213058['vertexForm'+'at']),_0x307335=Cn(_0x213058['device']);return _0x307335['register']('shader-mat'+'erial',zA),_0x307335['getProgram']('shader-mat'+'erial',_0x1143b5,_0x2b3b47,this['userId']);}}const Uy=(_0x176fe5,_0x4e9f63)=>{const _0x57f0b2=_0x4e9f63['length']/(-0x443*0x1+0xeb*-0x19+-0x12f*-0x17),_0x4c79cb=_0x176fe5['length']/(0x1755+-0x5db*0x1+-0x1177),_0x2f1077=new I(),_0xe91161=new I(),_0x248c19=new I(),_0x8402ce=new I(),_0x5049ff=new I(),_0x79d1c3=new I(),_0x268589=[];for(let _0x304c49=-0x1a70+0x47*-0xf+0x7*0x45f;_0x304c49<_0x176fe5['length'];_0x304c49++)_0x268589[_0x304c49]=-0x54*-0x36+0x27b*-0x5+-0x551;for(let _0x4d2699=-0x13b8+0x17fd+-0x445;_0x4d2699<_0x57f0b2;_0x4d2699++){const _0x328534=_0x4e9f63[_0x4d2699*(-0x1047+-0x19a5+0x29ef)],_0x1830e9=_0x4e9f63[_0x4d2699*(-0x53*0x5c+0x3*-0x263+0x40*0x94)+(0x1c90+0x259c*-0x1+-0x14b*-0x7)],_0xb3c53a=_0x4e9f63[_0x4d2699*(0x1*0x248b+-0x8c6*-0x2+-0x3614)+(0x1742+-0x1a95+-0x1*-0x355)];_0x2f1077['set'](_0x176fe5[_0x328534*(0x62*-0x25+-0x178d+-0x1*-0x25ba)],_0x176fe5[_0x328534*(-0x1953+-0xe59*0x1+-0x27af*-0x1)+(-0x5*-0x239+-0x108*0x3+-0x804)],_0x176fe5[_0x328534*(0x213a+-0x24*-0x21+-0x371*0xb)+(-0x45d*-0x5+-0x221f+0xc50)]),_0xe91161['set'](_0x176fe5[_0x1830e9*(-0x18c1*-0x1+-0x23f2+0xb34)],_0x176fe5[_0x1830e9*(-0x26a8+-0x137f+0x3a2a)+(-0x1*0x18fe+0x1*0x160f+0x2f0)],_0x176fe5[_0x1830e9*(-0x79*-0x2f+0x232+0x411*-0x6)+(-0x2386+0x1*-0x2099+0x4421)]),_0x248c19['set'](_0x176fe5[_0xb3c53a*(-0x1*-0xd83+0x9a3*0x2+-0x20c6)],_0x176fe5[_0xb3c53a*(0x154b+-0xa9*0xd+-0xcb3)+(0x1056+0x32*0xab+-0x31bb)],_0x176fe5[_0xb3c53a*(0x76+-0x1d9+0x166)+(0x1*-0xc5+0x1b3d+0x469*-0x6)]),_0x8402ce['sub2'](_0xe91161,_0x2f1077),_0x5049ff['sub2'](_0x248c19,_0x2f1077),_0x79d1c3['cross'](_0x8402ce,_0x5049ff)['normalize'](),_0x268589[_0x328534*(-0xd5e+0xc7d*-0x1+-0x3b2*-0x7)]+=_0x79d1c3['x'],_0x268589[_0x328534*(-0xd5*0x1d+0x14e6+0x19f*0x2)+(0x2*-0xa04+0x13bf+-0x1*-0x4a)]+=_0x79d1c3['y'],_0x268589[_0x328534*(-0x1*0xec4+-0x1*-0x197f+-0xab8)+(-0x141+0x1b7f+0x92*-0x2e)]+=_0x79d1c3['z'],_0x268589[_0x1830e9*(-0x100e*0x1+-0x7ca*-0x4+-0xf17)]+=_0x79d1c3['x'],_0x268589[_0x1830e9*(0x169*0xb+-0x2e*0x7f+0x752)+(0x2b2+0x13ca*0x1+0x167b*-0x1)]+=_0x79d1c3['y'],_0x268589[_0x1830e9*(0x1*-0x2462+0x7*-0x366+0x3c2f)+(0xf94+0xea0+-0x1e32*0x1)]+=_0x79d1c3['z'],_0x268589[_0xb3c53a*(0x3*-0xaaa+-0x55f+0x1a*0x170)]+=_0x79d1c3['x'],_0x268589[_0xb3c53a*(0x1a0f+-0x6a+-0x19a2)+(0x1*-0x773+-0x6d*0x11+-0x1*-0xeb1)]+=_0x79d1c3['y'],_0x268589[_0xb3c53a*(-0x1*-0x6d0+0xb5d*-0x3+0x1b4a)+(0x21e*0x2+0xd2f+-0x1*0x1169)]+=_0x79d1c3['z'];}for(let _0x4a7105=-0x54f*-0x6+0x2a8+0x7*-0x4ee;_0x4a7105<_0x4c79cb;_0x4a7105++){const _0x10d688=_0x268589[_0x4a7105*(-0x44d+0xc97+-0x847)],_0x2353a2=_0x268589[_0x4a7105*(0x1d4c+0x1beb+-0x3934)+(0x5*0x728+-0x149b+-0xf2c)],_0x2f72a1=_0x268589[_0x4a7105*(0x1764+-0x868+-0xef9)+(0xd*-0x1b+-0xe*-0x2a6+-0x23b3)],_0x3ae5ab=(-0x2*-0xffb+-0xc6*0x2d+0x1*0x2d9)/Math['sqrt'](_0x10d688*_0x10d688+_0x2353a2*_0x2353a2+_0x2f72a1*_0x2f72a1);_0x268589[_0x4a7105*(-0x10*-0x265+-0x188b+-0x6*0x24b)]*=_0x3ae5ab,_0x268589[_0x4a7105*(-0x2a7+0x1a3b+0x1*-0x1791)+(-0x1c9b+-0x1df7+0xbb7*0x5)]*=_0x3ae5ab,_0x268589[_0x4a7105*(-0xd58+-0x974+-0x16cf*-0x1)+(0x1612+0x302+0x1912*-0x1)]*=_0x3ae5ab;}return _0x268589;},pr=(_0x22df60,_0x1ebb81,_0x4a9b02,_0x27a7a3)=>{const _0x166098=_0x27a7a3['length']/(0x17d2+-0x173a+-0x95*0x1),_0xd9140=_0x22df60['length']/(0x1*0x240b+-0xb5*0x14+-0x15e4),_0x479cdc=new I(),_0x2571ec=new I(),_0xdfec9f=new I(),_0x55367b=new J(),_0x136a80=new J(),_0x3128ee=new J(),_0x1bf740=new I(),_0x38f1b7=new I(),_0x4661d2=new Float32Array(_0xd9140*(0x30c+-0x1db9+-0x1*-0x1ab0)),_0x5cab1b=new Float32Array(_0xd9140*(-0x3*0xa9b+0x51b*-0x2+0x2a0a)),_0x14cdd6=[];for(let _0x4c80b0=-0xbf*0x2b+0x1e5d*-0x1+0x3e72;_0x4c80b0<_0x166098;_0x4c80b0++){const _0x405e20=_0x27a7a3[_0x4c80b0*(0xbf0*-0x3+0x2*0x4ae+-0x54b*-0x5)],_0x4286fc=_0x27a7a3[_0x4c80b0*(-0x18ee+-0xd0+0x19c1)+(-0xb5*-0x9+-0x1cef+-0x1*-0x1693)],_0x405af5=_0x27a7a3[_0x4c80b0*(0x1*0xb93+-0x2d*0x50+0x280)+(0xd4b+-0x1*-0x1040+-0x1d89*0x1)];_0x479cdc['set'](_0x22df60[_0x405e20*(0x15+0x1*0x328+-0x33a)],_0x22df60[_0x405e20*(-0xbe3+-0xc7f+-0x1865*-0x1)+(-0x1a8b+-0xd98+0x1c*0x16f)],_0x22df60[_0x405e20*(0x83*-0x21+-0x19fb*0x1+-0x1*-0x2ae1)+(-0x38b+-0x10*-0x53+-0x1a3*0x1)]),_0x2571ec['set'](_0x22df60[_0x4286fc*(0x39*0x1f+0x5e3+0xcc7*-0x1)],_0x22df60[_0x4286fc*(0x2634+-0x35d+-0x22d4)+(0xae1+0x15dd*0x1+0x1d*-0x121)],_0x22df60[_0x4286fc*(-0x7b*0x4d+-0xa*-0xb2+-0x2*-0xf07)+(-0x2*-0xbb9+0x1e94+0xd81*-0x4)]),_0xdfec9f['set'](_0x22df60[_0x405af5*(-0x1519+-0x1b5f+-0x7*-0x6ed)],_0x22df60[_0x405af5*(-0x7f*-0x37+-0x7a*-0x14+-0x24ce)+(-0x5*0x6ce+0x1e9c+0x36b)],_0x22df60[_0x405af5*(0xfa8+-0x15a5+0x600)+(0x231c+0x4ab*0x2+-0x6*0x768)]),_0x55367b['set'](_0x4a9b02[_0x405e20*(0x1bde+-0x2f*0x83+0x3cf*-0x1)],_0x4a9b02[_0x405e20*(-0x1b1d*0x1+-0x11*0x139+0x2fe8)+(0xfc7+-0x352*0x5+-0x2*-0x6a)]),_0x136a80['set'](_0x4a9b02[_0x4286fc*(-0x5ea+-0x205b+0x2647)],_0x4a9b02[_0x4286fc*(0x2dd+0x13*0x1a5+-0x221a)+(0x18ce+-0x3e9+-0x14e4)]),_0x3128ee['set'](_0x4a9b02[_0x405af5*(-0xdcc*0x2+0x9*0x376+0x1c6*-0x2)],_0x4a9b02[_0x405af5*(-0x2340+-0x661+0x39*0xbb)+(-0x259f+0x50d*-0x6+0x43ee*0x1)]);const _0x26b406=_0x2571ec['x']-_0x479cdc['x'],_0x595168=_0xdfec9f['x']-_0x479cdc['x'],_0x56174d=_0x2571ec['y']-_0x479cdc['y'],_0x128840=_0xdfec9f['y']-_0x479cdc['y'],_0x2c4caf=_0x2571ec['z']-_0x479cdc['z'],_0x1ed6e8=_0xdfec9f['z']-_0x479cdc['z'],_0xb65728=_0x136a80['x']-_0x55367b['x'],_0xf246fb=_0x3128ee['x']-_0x55367b['x'],_0x51ca34=_0x136a80['y']-_0x55367b['y'],_0x48a886=_0x3128ee['y']-_0x55367b['y'],_0x52bce3=_0xb65728*_0x48a886-_0xf246fb*_0x51ca34;if(_0x52bce3===0x839+-0x81*-0x1+-0x8ba)_0x1bf740['set'](-0x1cc9*0x1+-0x1faf+0x3c78,-0x52*-0x49+0x2699+-0x3dfa,-0x43f*-0x7+0x1b35+-0x38ee),_0x38f1b7['set'](0xb65+0xd9a+0x7*-0x392,-0x163c+0x255+0x13e7,0x13cf+-0x97d+-0x2*0x529);else{const _0x1d3ee5=(-0x233e+0x6*-0x417+-0x5*-0xbf5)/_0x52bce3;_0x1bf740['set']((_0x48a886*_0x26b406-_0x51ca34*_0x595168)*_0x1d3ee5,(_0x48a886*_0x56174d-_0x51ca34*_0x128840)*_0x1d3ee5,(_0x48a886*_0x2c4caf-_0x51ca34*_0x1ed6e8)*_0x1d3ee5),_0x38f1b7['set']((_0xb65728*_0x595168-_0xf246fb*_0x26b406)*_0x1d3ee5,(_0xb65728*_0x128840-_0xf246fb*_0x56174d)*_0x1d3ee5,(_0xb65728*_0x1ed6e8-_0xf246fb*_0x2c4caf)*_0x1d3ee5);}_0x4661d2[_0x405e20*(0x1*0x110b+-0x1381+0x279)+(0x74*-0x2b+0x145a+-0xde)]+=_0x1bf740['x'],_0x4661d2[_0x405e20*(0x2*0xbcd+0xd*0x26d+-0x3720)+(0x1e2f+-0x151*0xd+-0xd11)]+=_0x1bf740['y'],_0x4661d2[_0x405e20*(-0x6b*-0x59+0x21*-0x91+-0x1*0x127f)+(-0xb*-0x1c3+-0x72c+-0x1*0xc33)]+=_0x1bf740['z'],_0x4661d2[_0x4286fc*(0x1b1a+0xfbb+-0x2ad2)+(0xb9*-0x1d+0x159*-0x5+-0xa*-0x2c5)]+=_0x1bf740['x'],_0x4661d2[_0x4286fc*(0x10b5+-0xb*0xdf+-0x71d)+(-0x1396+0x200*-0x2+0x3*0x7dd)]+=_0x1bf740['y'],_0x4661d2[_0x4286fc*(0x4*0xe9+-0x5*-0x697+0x2494*-0x1)+(0x1*0x374+0x215b*-0x1+0x1de9)]+=_0x1bf740['z'],_0x4661d2[_0x405af5*(0x5*-0x388+0x1f2d+0x1*-0xd82)+(0x1339+-0x5b0+-0x15*0xa5)]+=_0x1bf740['x'],_0x4661d2[_0x405af5*(0x1*-0x21b5+-0x1151+0x3ed*0xd)+(0x1c53+0x3*0xc15+-0x4091)]+=_0x1bf740['y'],_0x4661d2[_0x405af5*(0xeed+-0x1809+-0x91f*-0x1)+(-0x13b1+-0x22d6+0x3689)]+=_0x1bf740['z'],_0x5cab1b[_0x405e20*(0x1*-0xaa4+-0x19a3+0x244a)+(0x2f*-0xa5+0x1df*0xa+0xb95*0x1)]+=_0x38f1b7['x'],_0x5cab1b[_0x405e20*(-0x1897+-0xa9b*0x2+-0x1*-0x2dd0)+(0x8*0xa6+0x23c4+-0x28f3)]+=_0x38f1b7['y'],_0x5cab1b[_0x405e20*(0x3*0xc37+-0x19bc+-0xae6)+(0x391*-0x8+0x2563+-0xf*0x97)]+=_0x38f1b7['z'],_0x5cab1b[_0x4286fc*(0x125f*0x1+-0x1bd2+0x976)+(-0x208c+-0x359*-0x5+0xfcf)]+=_0x38f1b7['x'],_0x5cab1b[_0x4286fc*(-0x6*-0x15+-0x4ea+0x1*0x46f)+(-0x1407+-0x2667+0x3a6f)]+=_0x38f1b7['y'],_0x5cab1b[_0x4286fc*(-0x41e+-0x2b*-0x76+0xfb1*-0x1)+(-0x1a3+-0x3f6+0x59b)]+=_0x38f1b7['z'],_0x5cab1b[_0x405af5*(0x11bc+0x1c*-0x4f+-0x915)+(-0x4*-0x26+0x9d7+-0xa6f)]+=_0x38f1b7['x'],_0x5cab1b[_0x405af5*(-0x501+0x1*0x2ca+0x23a)+(-0x193a+-0x1*-0x183b+0x100*0x1)]+=_0x38f1b7['y'],_0x5cab1b[_0x405af5*(0x1*-0xf6a+0x2*-0xa97+0x1*0x249b)+(-0x21a8+-0x22d4+0x447e)]+=_0x38f1b7['z'];}const _0x4d07b5=new I(),_0x1aa080=new I(),_0x40705d=new I(),_0x17149c=new I();for(let _0x20ad09=-0x1*0x1a21+-0x10cb+0x2aec;_0x20ad09<_0xd9140;_0x20ad09++){_0x40705d['set'](_0x1ebb81[_0x20ad09*(0xaed+0x1d*-0x109+-0x49*-0x43)],_0x1ebb81[_0x20ad09*(0x11ac+0xac6+-0x1c6f)+(0x43*-0x19+0x238f+-0x1d03)],_0x1ebb81[_0x20ad09*(-0x1999+-0x1*0xf3f+-0x28db*-0x1)+(0x2*-0x37d+0xbb*0x13+-0x6e5)]),_0x4d07b5['set'](_0x4661d2[_0x20ad09*(-0x811+0x2*-0x4ea+0x11e8*0x1)],_0x4661d2[_0x20ad09*(-0x6*-0x4c1+-0x53*0x5c+0x151)+(0x31f+0xca3*-0x2+-0x1*-0x1628)],_0x4661d2[_0x20ad09*(-0xc5c*0x3+-0x1242+0x3759)+(0x19a1+-0x17d3+-0x1cc)]),_0x1aa080['set'](_0x5cab1b[_0x20ad09*(-0x796+-0x1559+0x3*0x9a6)],_0x5cab1b[_0x20ad09*(0x4f0*0x1+-0x150f*-0x1+0x19fc*-0x1)+(-0xe*0x119+-0x1*-0x1457+-0x13e*0x4)],_0x5cab1b[_0x20ad09*(0xdff+0x120e+-0x200a)+(0x224b+0x83*-0x3f+0x4*-0x83)]);const _0x502ec3=_0x40705d['dot'](_0x4d07b5);_0x17149c['copy'](_0x40705d)['mulScalar'](_0x502ec3),_0x17149c['sub2'](_0x4d07b5,_0x17149c)['normalize'](),_0x14cdd6[_0x20ad09*(-0x2133+0x1dc4+0x1*0x373)]=_0x17149c['x'],_0x14cdd6[_0x20ad09*(0x2*-0x115c+0x1*0xa8b+0x1831)+(-0xe36+-0x4b*0x3f+0x20ac)]=_0x17149c['y'],_0x14cdd6[_0x20ad09*(-0x53*-0x49+-0x155b+-0xe*0x2a)+(-0x383+-0x3*-0x254+-0x377)]=_0x17149c['z'],_0x17149c['cross'](_0x40705d,_0x4d07b5),_0x14cdd6[_0x20ad09*(0x1e4f+0x1499+-0x32e4)+(-0xae8+-0x223c+-0xf0d*-0x3)]=_0x17149c['dot'](_0x1aa080)<-0x1e4d+0x1117*-0x1+0x1*0x2f64?-(-0x161c+0xb2d+0xaf0):0x25*-0x4e+0x887+0x2c0;}return _0x14cdd6;};class la{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){M['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),M['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Uy(this['positions'],this['indices']);}['calculateT'+'angents'](){M['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),M['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),M['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),M['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']);}}const Of=(-0xe*0xef+0x1ad7+0xdc1*-0x1)/(-0x4f9*0x4+0x12b*0xb+0x74b),A_=-0x2*0x5e+-0x17*0x3d+0x638-Of*(-0x2433*0x1+-0x3a7+0x27dc);class Ff extends la{constructor(_0x48dac9={}){super();const _0x5ececc=_0x48dac9['halfExtent'+'s']??new I(0x1877*0x1+0x1475*-0x1+-0x402+0.5,-0x15df*0x1+0x1d*-0x13f+-0x12*-0x339+0.5,-0xa79*-0x2+-0x3*0x839+0x3b9*0x1+0.5),_0x11637c=_0x48dac9['widthSegme'+'nts']??-0x2*0x877+0x1645+-0x556,_0x2d7620=_0x48dac9['lengthSegm'+'ents']??0xa49*-0x1+-0x1c8f*0x1+-0x249*-0x11,_0x43f332=_0x48dac9['heightSegm'+'ents']??0x113e+0x6a*0x2a+0xc5*-0x2d,_0x2f6312=_0x48dac9['yOffset']??0x62d+-0x2f*-0x79+-0x1c64,_0x128c4b=-_0x5ececc['y']+_0x2f6312,_0xe6d69f=_0x5ececc['y']+_0x2f6312,_0x31de0e=[new I(-_0x5ececc['x'],_0x128c4b,_0x5ececc['z']),new I(_0x5ececc['x'],_0x128c4b,_0x5ececc['z']),new I(_0x5ececc['x'],_0xe6d69f,_0x5ececc['z']),new I(-_0x5ececc['x'],_0xe6d69f,_0x5ececc['z']),new I(_0x5ececc['x'],_0x128c4b,-_0x5ececc['z']),new I(-_0x5ececc['x'],_0x128c4b,-_0x5ececc['z']),new I(-_0x5ececc['x'],_0xe6d69f,-_0x5ececc['z']),new I(_0x5ececc['x'],_0xe6d69f,-_0x5ececc['z'])],_0x100e06=[[-0x1f3*-0x1+0x1*-0x14e7+0x12f4,-0x25e2+0x169*-0x17+0x4652,-0x1fb+0xed3+-0xcd5],[0x17ea+0x1aab+-0x3291*0x1,0x83+0x236d+-0x23eb,0x2009+-0x5*0x769+0x50b],[-0x2*-0x6f2+-0x43*-0x37+0xe*-0x205,0x1*-0x1943+-0x3d7+0x1d1c,-0x2449+-0xaa1*0x1+0x2ef0],[0x87d*-0x2+0x11e6+-0xeb,0x15*0x47+-0x7cb*-0x2+0x723*-0x3,0x5*-0x7a2+-0x67f*-0x5+0x5b3],[0xd23+0x9de*-0x1+-0xd1*0x4,0x1bf*-0x4+-0x1f0d*-0x1+-0x180d,-0x2*-0x999+-0x7e*0x8+-0xf40],[0x272*0x1+0x4a3+-0x710,0x16c4+0x74c*-0x1+0xf*-0x108,-0x1586+-0x1*-0x1da5+-0x1*0x819]],_0x9f4cc1=[[-0x2092+-0x1e7b+-0x3f0d*-0x1,-0x14*0x37+0x1e55+0x2b*-0x9b,0x2685+-0x15e2+-0x2*0x851],[-0x3b*0x53+0x64b*0x4+0xdd*-0x7,-0x8f2+-0x245d+-0x1*-0x2d4f,-(0xf5d+-0x59*0x61+0x125d)],[0x1cf9+-0x1d8c+0x93,0x796+-0x15fb+-0xe66*-0x1,-0xd20+0x1749+-0xa29],[0x22fa+-0x683*0x1+-0x15b*0x15,-(-0x1bc1+-0x2299+-0x33*-0x139),-0x10*-0x9e+0x6*0x3a1+-0x1fa6],[0x7c*-0x14+0x1249+-0xb*0xc8,0xb*-0x2e5+0x1e29*0x1+0xa*0x2b,-0x2*0x99e+-0x85a+0x141*0x16],[-(-0x738+-0x1f*0x102+0x2677),0x230c*0x1+-0x1c33*0x1+-0x6d9,0x1945+0xbe7*-0x1+-0xd5e]],_0x45aa51={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x1b7f82=[],_0xf8df1e=[],_0x214830=[],_0x5b72b0=[];let _0x57838d=-0x1*-0x1588+0x14b9+-0x2a41;const _0x41ffc7=(_0x4cfbdc,_0x5ab86b,_0x31bb85)=>{const _0x48f229=new I(),_0x51b55a=new I(),_0xb6dcf4=new I(),_0x5a46fb=new I();for(let _0x4bb2e4=0x2f*-0x2b+-0x6e5*0x2+0xd*0x1ab;_0x4bb2e4<=_0x5ab86b;_0x4bb2e4++)for(let _0x5ccc58=-0x2254+-0x1dd*-0x5+0x13*0x151;_0x5ccc58<=_0x31bb85;_0x5ccc58++){_0x48f229['lerp'](_0x31de0e[_0x100e06[_0x4cfbdc][0x1e04+0x2ff+-0x2103]],_0x31de0e[_0x100e06[_0x4cfbdc][0x55d+0x6c1+-0xc1d]],_0x4bb2e4/_0x5ab86b),_0x51b55a['lerp'](_0x31de0e[_0x100e06[_0x4cfbdc][-0x1*0x10cb+-0x25fc+-0x25*-0x17b]],_0x31de0e[_0x100e06[_0x4cfbdc][0x1*-0x1810+-0xc7c+0x248e]],_0x5ccc58/_0x31bb85),_0xb6dcf4['sub2'](_0x51b55a,_0x31de0e[_0x100e06[_0x4cfbdc][0xf20+-0x2*0xed4+0xe88]]),_0x5a46fb['add2'](_0x48f229,_0xb6dcf4);let _0x5bdedf=_0x4bb2e4/_0x5ab86b,_0x409609=_0x5ccc58/_0x31bb85;_0x1b7f82['push'](_0x5a46fb['x'],_0x5a46fb['y'],_0x5a46fb['z']),_0xf8df1e['push'](_0x9f4cc1[_0x4cfbdc][-0xceb*0x2+-0x4a*-0x1+0x198c],_0x9f4cc1[_0x4cfbdc][0xf2*0xb+-0x25bd+0x1b58],_0x9f4cc1[_0x4cfbdc][0x47*0x2f+-0x223f+0x4*0x54e]),_0x214830['push'](_0x5bdedf,-0x1c+-0xfcc+0xfe9-_0x409609),_0x5bdedf=_0x5bdedf*A_+Of,_0x409609=_0x409609*A_+Of,_0x5bdedf/=0x146b+0x1e7c+-0x32e4,_0x409609/=0x1*0x24aa+0x393+0x141d*-0x2,_0x5bdedf+=_0x4cfbdc%(0x1655+0x55b+0x1*-0x1bad)/(-0x1*0x14b5+0xae0+-0xd2*-0xc),_0x409609+=Math['floor'](_0x4cfbdc/(-0xea8+-0x175*-0x13+-0xd04))/(0x1889*-0x1+0x2e7*-0x8+0x17e2*0x2),_0x4bb2e4<_0x5ab86b&&_0x5ccc58<_0x31bb85&&(_0x5b72b0['push'](_0x57838d+_0x31bb85+(0x1*-0x33+-0x1e53+0x1e87),_0x57838d+(-0xd*-0x18d+0x1*0x1aff+-0x2f27*0x1),_0x57838d),_0x5b72b0['push'](_0x57838d+_0x31bb85+(-0xb18+-0x5bb*0x1+0xc*0x167),_0x57838d+_0x31bb85+(-0x106c+0x2317+-0x12a9),_0x57838d+(-0x15f0+0x1441+0x1b0))),_0x57838d++;}};_0x41ffc7(_0x45aa51['FRONT'],_0x11637c,_0x43f332),_0x41ffc7(_0x45aa51['BACK'],_0x11637c,_0x43f332),_0x41ffc7(_0x45aa51['TOP'],_0x11637c,_0x2d7620),_0x41ffc7(_0x45aa51['BOTTOM'],_0x11637c,_0x2d7620),_0x41ffc7(_0x45aa51['RIGHT'],_0x2d7620,_0x43f332),_0x41ffc7(_0x45aa51['LEFT'],_0x2d7620,_0x43f332),this['positions']=_0x1b7f82,this['normals']=_0xf8df1e,this['uvs']=_0x214830,this['uvs1']=_0x214830,this['indices']=_0x5b72b0,_0x48dac9['calculateT'+'angents']&&(this['tangents']=pr(_0x1b7f82,_0xf8df1e,_0x214830,_0x5b72b0));}}class By extends la{constructor(_0x917b53={}){super();const _0x505069=_0x917b53['radius']??0xe8*-0xd+-0xc47*0x1+0x3*0x805+0.5,_0x183542=_0x917b53['latitudeBa'+'nds']??0x790+0x412+-0xb92,_0x5ed561=_0x917b53['longitudeB'+'ands']??0x1575+0x1*0x20f9+0x365e*-0x1,_0xa30d8b=[],_0x2e1cdc=[],_0x55c772=[],_0x29ab48=[];for(let _0x43331c=-0x12a7+-0x399*0x6+0x283d;_0x43331c<=_0x183542;_0x43331c++){const _0x242bff=_0x43331c*Math['PI']/_0x183542,_0x1e7ed9=Math['sin'](_0x242bff),_0x389d24=Math['cos'](_0x242bff);for(let _0x59ea76=-0x1543*-0x1+0x701*0x1+-0x711*0x4;_0x59ea76<=_0x5ed561;_0x59ea76++){const _0x114801=_0x59ea76*(0x1*-0x2255+-0x22cf+-0x35*-0x14e)*Math['PI']/_0x5ed561-Math['PI']/(0xb03*0x2+-0x222+0x1fd*-0xa),_0x2801d3=Math['sin'](_0x114801),_0xf9b1a=Math['cos'](_0x114801)*_0x1e7ed9,_0x274b4e=_0x389d24,_0x299a52=_0x2801d3*_0x1e7ed9,_0x26e0b0=0x1*-0x5e3+0x243e*0x1+-0x6f*0x46-_0x59ea76/_0x5ed561,_0x32d5c6=0x682+0x10d*-0x1+-0x2*0x2ba-_0x43331c/_0x183542;_0xa30d8b['push'](_0xf9b1a*_0x505069,_0x274b4e*_0x505069,_0x299a52*_0x505069),_0x2e1cdc['push'](_0xf9b1a,_0x274b4e,_0x299a52),_0x55c772['push'](_0x26e0b0,0x1ead*-0x1+0x36e+0x1b40-_0x32d5c6);}}for(let _0x4d7a2f=0xef*-0x25+-0x116c+-0x33f7*-0x1;_0x4d7a2f<_0x183542;++_0x4d7a2f)for(let _0x48d75b=-0x7*-0x299+0x1*0x1fa3+-0x7*0x71e;_0x48d75b<_0x5ed561;++_0x48d75b){const _0x4003b7=_0x4d7a2f*(_0x5ed561+(-0xa7f+-0x87c+-0x3cc*-0x5))+_0x48d75b,_0x438b82=_0x4003b7+_0x5ed561+(0x3*0x39b+-0x10d*0x14+0xa34);_0x29ab48['push'](_0x4003b7+(-0x3b*-0x4f+-0x26e9+0x117*0x13),_0x438b82,_0x4003b7),_0x29ab48['push'](_0x4003b7+(0xa*0x1cd+0x19*0x91+-0x202a),_0x438b82+(-0x247f*0x1+-0x2d*0x60+0x3560),_0x438b82);}this['positions']=_0xa30d8b,this['normals']=_0x2e1cdc,this['uvs']=_0x55c772,this['uvs1']=_0x55c772,this['indices']=_0x29ab48,_0x917b53['calculateT'+'angents']&&(this['tangents']=pr(_0xa30d8b,_0x2e1cdc,_0x55c772,_0x29ab48));}}class VA extends By{constructor(_0x3dda02={}){const _0x5996dd=_0x3dda02['latitudeBa'+'nds']??0x1bbb*-0x1+0x2491+0x463*-0x2,_0x13f37b=_0x3dda02['longitudeB'+'ands']??0x612*0x1+0x3b*-0x1d+0xad;super({'radius':0.5,'latitudeBands':_0x5996dd,'longitudeBands':_0x13f37b});const _0x345c9c=-0x559*-0x7+-0x277*-0x1+-0x27e6*0x1+0.1,_0x45c874=0xb*0x32b+0x1d80+0x3c9*-0x11+0.95,_0x681b9e=_0x45c874*_0x45c874,_0x5347d8=this['positions'];for(let _0x51bf88=0xe0d+0x3f0+-0x11fd;_0x51bf88<_0x5347d8['length'];_0x51bf88+=0x14b*0x1d+0x36*-0x11+-0x21e6){const _0x4e7fbb=_0x5347d8[_0x51bf88]/(-0x2*0x111b+0x1252+0xe2*0x12+0.5);let _0xd17e7f=_0x5347d8[_0x51bf88+(-0x11b*0xd+0x15e3+-0x783)]/(-0x1367*0x2+-0x1dbf+0x448d+0.5);const _0x474e4c=_0x5347d8[_0x51bf88+(-0x74*-0x17+-0x1ed*-0xb+-0x1f99*0x1)]/(0x10*-0x206+0x65e+0x1a02*0x1+0.5);_0xd17e7f<0x1*0x2f9+-0x1*0x3a4+-0x9*-0x13&&(_0xd17e7f*=-0x18b*0x13+0x4a3*-0x1+0x21f4+0.3,_0x4e7fbb*_0x4e7fbb+_0x474e4c*_0x474e4c<_0x681b9e&&(_0xd17e7f=-_0x345c9c)),_0xd17e7f+=_0x345c9c,_0xd17e7f*=-0x8db*0x1+0x556*0x1+0x385+0.5,_0x5347d8[_0x51bf88+(-0x17*0x179+-0x5*0x4eb+0x3a77)]=_0xd17e7f;}}}class yo{static['create'](_0x2f3502,_0x235228){switch(_0x235228){case lw:return yo['box'](_0x2f3502);case hw:return yo['dome'](_0x2f3502);}return M['assert'](_0x235228===So,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x235228),yo['infinite'](_0x2f3502);}static['infinite'](_0x27e754){return Ge['fromGeomet'+'ry'](_0x27e754,new Ff(_0x27e754));}static['box'](_0x366ed2){return Ge['fromGeomet'+'ry'](_0x366ed2,new Ff({'yOffset':0.5}));}static['dome'](_0x11c29f){const _0xdea9e6=new VA({'latitudeBands':0x32,'longitudeBands':0x32});return _0xdea9e6['normals']=void(0x144b*-0x1+0x187e+-0x433),_0xdea9e6['uvs']=void(-0x1bb9+-0x5ea+0x21a3*0x1),Ge['fromGeomet'+'ry'](_0x11c29f,_0xdea9e6);}}class GA{constructor(_0x1e2530,_0x32da27,_0x46501c,_0x255cd6,_0xc1b8cc){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(-0x1b8+-0x1901+0x1aba));const _0x1349e3=new In({'uniqueName':'SkyMateria'+'l','vertexGLSL':Ce['get'](_0x1e2530,ze)['get']('skyboxVS'),'fragmentGLSL':Ce['get'](_0x1e2530,ze)['get']('skyboxPS'),'vertexWGSL':Ce['get'](_0x1e2530,st)['get']('skyboxVS'),'fragmentWGSL':Ce['get'](_0x1e2530,st)['get']('skyboxPS'),'attributes':{'aPosition':Pe}});_0x1349e3['setDefine']('{SKYBOX_DE'+'CODE_FNC}',lr['decodeFunc'](_0x255cd6['encoding'])),_0xc1b8cc!==So&&_0x1349e3['setDefine']('SKYMESH',''),_0x255cd6['cubemap']&&_0x1349e3['setDefine']('SKY_CUBEMA'+'P',''),_0x1349e3['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x32da27['skyboxHigh'+'lightMulti'+'plier']),_0x255cd6['cubemap']?_0x1349e3['setParamet'+'er']('texture_cu'+'beMap',_0x255cd6):(_0x1349e3['setParamet'+'er']('texture_en'+'vAtlas',_0x255cd6),_0x1349e3['setParamet'+'er']('mipLevel',_0x32da27['skyboxMip'])),_0x1349e3['cull']=mo,_0x1349e3['depthWrite']=this['_depthWrit'+'e'];const _0x189775=_0x32da27['layers']['getLayerBy'+'Id'](_m);if(_0x189775){const _0x87d8c9=yo['create'](_0x1e2530,_0xc1b8cc),_0x40bbb2=new We(_0x87d8c9,_0x1349e3,_0x46501c);this['meshInstan'+'ce']=_0x40bbb2,_0x40bbb2['cull']=!(-0x14d0+0x3d*0x14+0x100d),_0x40bbb2['pick']=!(0x1*0x120d+-0x259*-0x1+0x17*-0xe3),_0x189775['addMeshIns'+'tances']([_0x40bbb2]),this['skyLayer']=_0x189775;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x52e4b3){this['_depthWrit'+'e']=_0x52e4b3,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x52e4b3);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class HA{constructor(_0x1c0420){h(this,'_type',So),h(this,'_center',new I(-0x4b0*0x4+-0x39*-0x10+0x1b0*0x9,0x467+-0x105f+0x5*0x265,0x1337+0x15d0+-0x2907)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0x1851+0x42*0x7e+-0xb5c*0x5)),h(this,'node',new He('SkyMeshNod'+'e')),(this['device']=_0x1c0420['device'],this['scene']=_0x1c0420,this['center']=new I(0x1cd7*-0x1+-0x2377+0x2*0x2027,0x15a9+-0x869+0x1*-0xd3f,0x3c9*0x5+0x1*-0x2f9+0x2*-0x7fa),this['centerArra'+'y']=new Float32Array(-0xf25*0x1+-0x2001+0x2f29*0x1),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x371eaf){this['type']=_0x371eaf['skyType']??So,this['node']['setLocalPo'+'sition'](new I(_0x371eaf['skyMeshPos'+'ition']??[-0x33b*-0x8+-0x134e*-0x2+-0x4074,-0x2cf*-0x5+-0x1ea1*0x1+0x1096*0x1,-0xafc+0x1693+-0xb97])),this['node']['setLocalEu'+'lerAngles'](new I(_0x371eaf['skyMeshRot'+'ation']??[-0xb3*-0x6+-0x13*0x89+-0x1*-0x5f9,-0x1236+-0x1*-0xe2f+0x407,-0x1e65*0x1+0x23ab*0x1+-0x546])),this['node']['setLocalSc'+'ale'](new I(_0x371eaf['skyMeshSca'+'le']??[0x732+-0x1*-0x63d+-0xd6e,0x27*0x8b+-0x84e+0x2*-0x66f,-0xa2*0x29+0xab4+0xf3f])),_0x371eaf['skyCenter']&&(this['_center']=new I(_0x371eaf['skyCenter']));}set['type'](_0x10f22a){this['_type']!==_0x10f22a&&(this['_type']=_0x10f22a,this['scene']['updateShad'+'ers']=!(0xa*0x37f+0x190d*0x1+-0x9*0x6ab),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x2c08bf){this['_center']['copy'](_0x2c08bf);}get['center'](){return this['_center'];}set['depthWrite'](_0x4821db){this['_depthWrit'+'e']!==_0x4821db&&(this['_depthWrit'+'e']=_0x4821db,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x4821db));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x1d8c7b=this['scene']['_getSkybox'+'Tex']();_0x1d8c7b&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new GA(this['device'],this['scene'],this['node'],_0x1d8c7b,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x1d8c7b));}['resetSkyMe'+'sh'](){var _0x46973d;(_0x46973d=this['skyMesh'])==null||_0x46973d['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==So){const {center:_0x406131,centerArray:_0x4fa640}=this,_0x37f960=new I();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x406131,_0x37f960),_0x4fa640[0x19fb+0x21ec+-0x3be7]=_0x37f960['x'],_0x4fa640[0x51b*0x2+-0x1*0x64e+-0x3e7]=_0x37f960['y'],_0x4fa640[0x15a3+-0x77+0x9*-0x25a]=_0x37f960['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x4fa640);}}}const Zh=new He();Zh['worldTrans'+'form']=te['IDENTITY'],Zh['_dirtyWorl'+'d']=Zh['_dirtyNorm'+'al']=!(0x65c*0x2+0x3c2+-0x1079);class WA{constructor(_0xabfefc,_0x5948cc,_0x48c2d4){this['material']=_0x5948cc,this['layer']=_0x48c2d4,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0xabfefc),this['meshInstan'+'ce']=null;}['addLines'](_0x38e31d,_0x1f30ae){const _0x497cc1=this['positions'],_0x2e876c=_0x38e31d['length'];for(let _0x18670f=0x773*0x3+0xdcd*-0x2+-0x10d*-0x5;_0x18670f<_0x2e876c;_0x18670f++){const _0x5564b5=_0x38e31d[_0x18670f];_0x497cc1['push'](_0x5564b5['x'],_0x5564b5['y'],_0x5564b5['z']);}const _0x1190aa=this['colors'];if(_0x1f30ae['length'])for(let _0x45924f=-0x3*-0x8b1+0x6*0x517+-0x1*0x389d;_0x45924f<_0x2e876c;_0x45924f++){const _0x26657b=_0x1f30ae[_0x45924f];_0x1190aa['push'](_0x26657b['r'],_0x26657b['g'],_0x26657b['b'],_0x26657b['a']);}else{for(let _0x26e34d=-0xb74+0x7da+0x39a;_0x26e34d<_0x2e876c;_0x26e34d++)_0x1190aa['push'](_0x1f30ae['r'],_0x1f30ae['g'],_0x1f30ae['b'],_0x1f30ae['a']);}}['addLinesAr'+'rays'](_0xbd93a0,_0x395cb1){const _0x3761ce=this['positions'];for(let _0x5c8e02=0x27a*-0x3+-0xe84+-0x15f2*-0x1;_0x5c8e02<_0xbd93a0['length'];_0x5c8e02+=0x2485*-0x1+0x1*-0x138b+0x3813)_0x3761ce['push'](_0xbd93a0[_0x5c8e02],_0xbd93a0[_0x5c8e02+(-0x4b*-0x14+0xfa0+-0x157b)],_0xbd93a0[_0x5c8e02+(0x946+0xde5*-0x2+-0x943*-0x2)]);const _0x22abe4=this['colors'];if(_0x395cb1['length']){for(let _0x208ee0=-0x1146+-0xe71*-0x2+0x1*-0xb9c;_0x208ee0<_0x395cb1['length'];_0x208ee0+=0x1*0x19e0+-0x1871*-0x1+-0x324d)_0x22abe4['push'](_0x395cb1[_0x208ee0],_0x395cb1[_0x208ee0+(0x79*-0x39+-0x1da1*-0x1+0x1*-0x2af)],_0x395cb1[_0x208ee0+(0x122+0x1cf+-0x2ef)],_0x395cb1[_0x208ee0+(-0x725*-0x4+0x34*-0x2f+0x1305*-0x1)]);}else{const _0x201415=_0xbd93a0['length']/(0x1*-0x1f3+0x12*0x5a+-0x45e);for(let _0xdeea7d=-0x1ff6*-0x1+0x23f2+0x29*-0x1a8;_0xdeea7d<_0x201415;_0xdeea7d++)_0x22abe4['push'](_0x395cb1['r'],_0x395cb1['g'],_0x395cb1['b'],_0x395cb1['a']);}}['onPreRende'+'r'](_0x12efe9,_0x318c0b){this['positions']['length']>-0x1a39+-0x90f+-0x8d2*-0x4&&this['material']['transparen'+'t']===_0x318c0b&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](Fc,!(0x2*0x75b+-0x3ae*0x1+-0xb07)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new We(this['mesh'],this['material'],Zh)),_0x12efe9['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=-0x2*0x545+-0x6*-0x1e7+-0xe0,this['colors']['length']=-0x23e9+-0xbc9*-0x1+0x608*0x4;}}class $A{constructor(_0x11ea4d){this['device']=_0x11ea4d,this['map']=new Map();}['getBatch'](_0x9a5f94,_0x3b259b){let _0x70fdf1=this['map']['get'](_0x9a5f94);return _0x70fdf1||(_0x70fdf1=new WA(this['device'],_0x9a5f94,_0x3b259b),this['map']['set'](_0x9a5f94,_0x70fdf1)),_0x70fdf1;}['onPreRende'+'r'](_0xdadbcf,_0xbc6b){this['map']['forEach'](_0x2dd00e=>{_0x2dd00e['onPreRende'+'r'](_0xdadbcf,_0xbc6b);});}['clear'](){this['map']['forEach'](_0xf550d6=>_0xf550d6['clear']());}}const ps=[],ba=new I();class XA{constructor(_0x27a50e){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x27a50e,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x2fbdec){const _0x51d9d3=new In({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Ce['get'](this['device'],ze)['get']('immediateL'+'ineVS'),'fragmentGLSL':Ce['get'](this['device'],ze)['get']('immediateL'+'inePS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('immediateL'+'ineVS'),'fragmentWGSL':Ce['get'](this['device'],st)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Pe,'vertex_color':kt}});return _0x51d9d3['blendType']=Gs,_0x51d9d3['depthTest']=_0x2fbdec,_0x51d9d3['update'](),_0x51d9d3;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(0x1b64+0x16*0xc9+0x1*-0x2caa))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(-0x2358+0x977*-0x2+0x3647))),this['_materialN'+'oDepth'];}['getBatch'](_0x4a8c59,_0x47ebc8){let _0x21ed20=this['batchesMap']['get'](_0x4a8c59);_0x21ed20||(_0x21ed20=new $A(this['device']),this['batchesMap']['set'](_0x4a8c59,_0x21ed20)),this['allBatches']['add'](_0x21ed20);const _0x2dd945=_0x47ebc8?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x21ed20['getBatch'](_0x2dd945,_0x4a8c59);}['getShaderD'+'esc'](_0x103cc1,_0x290e64,_0x5e9fdf){return this['shaderDesc'+'s']['has'](_0x103cc1)||this['shaderDesc'+'s']['set'](_0x103cc1,{'uniqueName':'DebugShade'+'r:'+_0x103cc1,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x290e64,'fragmentWGSL':_0x5e9fdf,'attributes':{'vertex_position':Pe}}),this['shaderDesc'+'s']['get'](_0x103cc1);}['getTexture'+'ShaderDesc'](_0x1815e0){const _0x38934a=lr['decodeFunc'](_0x1815e0);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x1815e0,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x38934a+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x38934a+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(0x109+-0x1d24+-0x59f*-0x5+0.5),-(-0x26d+0x1311+-0x10a4+0.5),-0x1*0x112b+-0x8c7+0xa2*0x29,-0x2479+-0x245f+0x48d8+0.5,-(-0x1*0x1990+-0x13*0xf7+0x2be5+0.5),-0x15de+0x16d*-0x19+-0x1*-0x3983,-(-0x1d*-0x6b+-0x6f5*0x4+0xfb5+0.5),-0x332+0x2413*-0x1+-0x3*-0xd17+0.5,-0x1b83*-0x1+0xb23*0x1+0x1*-0x26a6,0xc0b*0x2+-0x10*-0x1a2+-0x2*0x191b+0.5,-0x1544+-0x352+0x2*0xc4b+0.5,0x49*-0x17+0x2074+-0x19e5]),this['quadMesh']['update'](cr)),this['quadMesh'];}['drawMesh'](_0x53d622,_0x15f78c,_0x320827,_0x292163,_0xc5d3d6){if(!_0x292163){const _0x509c71=this['getGraphNo'+'de'](_0x15f78c);_0x292163=new We(_0x320827,_0x53d622,_0x509c71);}let _0x1fdb40=this['layerMeshI'+'nstances']['get'](_0xc5d3d6);_0x1fdb40||(_0x1fdb40=[],this['layerMeshI'+'nstances']['set'](_0xc5d3d6,_0x1fdb40)),_0x1fdb40['push'](_0x292163);}['drawWireAl'+'ignedBox'](_0x186740,_0x436c70,_0x44a9d1,_0x10184b,_0x1c2f7b,_0x2bf315){if(_0x2bf315){const _0x4b5af9=(_0x5b4291,_0x42c63b,_0x39b3a6)=>{ba['set'](_0x5b4291,_0x42c63b,_0x39b3a6),_0x2bf315['transformP'+'oint'](ba,ba),ps['push'](ba['x'],ba['y'],ba['z']);};_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x436c70['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x436c70['z']),_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x436c70['z']),_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x186740['y'],_0x436c70['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x186740['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x436c70['y'],_0x436c70['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x186740['z']),_0x4b5af9(_0x436c70['x'],_0x186740['y'],_0x436c70['z']);}else ps['push'](_0x186740['x'],_0x186740['y'],_0x186740['z'],_0x186740['x'],_0x436c70['y'],_0x186740['z'],_0x186740['x'],_0x436c70['y'],_0x186740['z'],_0x436c70['x'],_0x436c70['y'],_0x186740['z'],_0x436c70['x'],_0x436c70['y'],_0x186740['z'],_0x436c70['x'],_0x186740['y'],_0x186740['z'],_0x436c70['x'],_0x186740['y'],_0x186740['z'],_0x186740['x'],_0x186740['y'],_0x186740['z'],_0x186740['x'],_0x186740['y'],_0x436c70['z'],_0x186740['x'],_0x436c70['y'],_0x436c70['z'],_0x186740['x'],_0x436c70['y'],_0x436c70['z'],_0x436c70['x'],_0x436c70['y'],_0x436c70['z'],_0x436c70['x'],_0x436c70['y'],_0x436c70['z'],_0x436c70['x'],_0x186740['y'],_0x436c70['z'],_0x436c70['x'],_0x186740['y'],_0x436c70['z'],_0x186740['x'],_0x186740['y'],_0x436c70['z'],_0x186740['x'],_0x186740['y'],_0x186740['z'],_0x186740['x'],_0x186740['y'],_0x436c70['z'],_0x186740['x'],_0x436c70['y'],_0x186740['z'],_0x186740['x'],_0x436c70['y'],_0x436c70['z'],_0x436c70['x'],_0x436c70['y'],_0x186740['z'],_0x436c70['x'],_0x436c70['y'],_0x436c70['z'],_0x436c70['x'],_0x186740['y'],_0x186740['z'],_0x436c70['x'],_0x186740['y'],_0x436c70['z']);this['getBatch'](_0x1c2f7b,_0x10184b)['addLinesAr'+'rays'](ps,_0x44a9d1),ps['length']=0x1872+0x4c9+0x1*-0x1d3b;}['drawWireSp'+'here'](_0x3e989e,_0x5b931a,_0x1eeadf,_0x46e478,_0x32d355,_0x30f61e){const _0x279f00=(0x1*0x1685+-0x1*0x18bd+-0x23a*-0x1)*Math['PI']/_0x46e478;let _0x261dab=-0xf84+0x2154+0x11d0*-0x1;for(let _0x37599a=0x1a8c+0x2*0xb95+-0x31b6;_0x37599a<_0x46e478;_0x37599a++){const _0x25caab=Math['sin'](_0x261dab),_0x5c3eb6=Math['cos'](_0x261dab);_0x261dab+=_0x279f00;const _0x2a66ac=Math['sin'](_0x261dab),_0x2caacd=Math['cos'](_0x261dab);ps['push'](_0x3e989e['x']+_0x5b931a*_0x25caab,_0x3e989e['y'],_0x3e989e['z']+_0x5b931a*_0x5c3eb6),ps['push'](_0x3e989e['x']+_0x5b931a*_0x2a66ac,_0x3e989e['y'],_0x3e989e['z']+_0x5b931a*_0x2caacd),ps['push'](_0x3e989e['x']+_0x5b931a*_0x25caab,_0x3e989e['y']+_0x5b931a*_0x5c3eb6,_0x3e989e['z']),ps['push'](_0x3e989e['x']+_0x5b931a*_0x2a66ac,_0x3e989e['y']+_0x5b931a*_0x2caacd,_0x3e989e['z']),ps['push'](_0x3e989e['x'],_0x3e989e['y']+_0x5b931a*_0x25caab,_0x3e989e['z']+_0x5b931a*_0x5c3eb6),ps['push'](_0x3e989e['x'],_0x3e989e['y']+_0x5b931a*_0x2a66ac,_0x3e989e['z']+_0x5b931a*_0x2caacd);}this['getBatch'](_0x30f61e,_0x32d355)['addLinesAr'+'rays'](ps,_0x1eeadf),ps['length']=0xf26+0x1*-0x10a+-0xac*0x15;}['getGraphNo'+'de'](_0x17d99f){const _0x236f06=new He('ImmediateD'+'ebug');return _0x236f06['worldTrans'+'form']=_0x17d99f,_0x236f06['_dirtyWorl'+'d']=_0x236f06['_dirtyNorm'+'al']=!(0xc*-0x2b+0x2f1+-0x1*0xec),_0x236f06;}['onPreRende'+'rLayer'](_0x19fa5e,_0x42806d,_0x108349){if(this['batchesMap']['forEach']((_0x1d900e,_0x129e8f)=>{_0x129e8f===_0x19fa5e&&_0x1d900e['onPreRende'+'r'](_0x42806d,_0x108349);}),!this['updatedLay'+'ers']['has'](_0x19fa5e)){this['updatedLay'+'ers']['add'](_0x19fa5e);const _0x176d1d=this['layerMeshI'+'nstances']['get'](_0x19fa5e);if(_0x176d1d){for(let _0x222872=-0x2*0xdcc+0x26dc+-0xb44;_0x222872<_0x176d1d['length'];_0x222872++)_0x42806d['push'](_0x176d1d[_0x222872]);_0x176d1d['length']=0x14b*0x13+0x18bf+-0x838*0x6;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x1be943=>_0x1be943['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class qA{constructor(){h(this,'type',On),h(this,'color',new ie(0xfae+0x87e+-0x182c,-0x1629+-0x22f9+-0x1c91*-0x2,0x9f7*-0x2+0x1a52+-0x664)),h(this,'density',0x157*0x2+0x22a9+-0x4f*0x79),h(this,'start',0x1737+-0xbb*0xb+0x6f*-0x23),h(this,'end',-0xf05*0x1+-0x1*0x1365+0x2652);}}class wi extends pe{constructor(_0x1416df){super(),h(this,'ambientBak'+'e',!(0x4*0x568+-0x179c*-0x1+-0x2d3b)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0x1*0x187+-0x5b2+0x739),h(this,'ambientBak'+'eOcclusion'+'Contrast',0xe5f+0x1a35+-0x2894),h(this,'ambientLig'+'ht',new ie(0x121*0xb+-0x1f2+-0xa79,0x37*-0x86+-0x4fe+0xbc*0x2e,-0x1*0x111+0x4*-0x653+0x1a5d)),h(this,'ambientLum'+'inance',0x276+-0x9c2+0x74c),h(this,'exposure',0x25*0x40+-0x1*0x23ba+0x1a7b),h(this,'lightmapSi'+'zeMultipli'+'er',-0xc5+0xdd3*0x2+-0x1ae0),h(this,'lightmapMa'+'xResolutio'+'n',-0x24cd*-0x1+0x19c6*-0x1+-0x307),h(this,'lightmapMo'+'de',ph),h(this,'lightmapFi'+'lterEnable'+'d',!(0x1*0x95f+0x184d*-0x1+0xeef*0x1)),h(this,'lightmapHD'+'R',!(0xe62*0x2+-0x125*0x15+-0x25d*0x2)),h(this,'root',null),h(this,'physicalUn'+'its',!(0x10fd+0x3*-0x89e+0x8de)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new qA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(0x1a7*0x17+-0x7a0+-0x1e60)),(M['assert'](_0x1416df,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x1416df,this['_gravity']=new I(-0x174b+-0x7*0x3cb+0x37*0xe8,-(0x2027+0x199a+-0x8*0x737+0.8000000000000007),-0xd71+0x172f+-0x9be),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=-0xfd9+-0x1f4+0x2b*0x6a,this['_skyboxLum'+'inance']=0x1*0x129c+-0x271*0x5+-0x667,this['_skyboxMip']=-0x13a3+-0x2*0x876+0x7*0x539,this['_skyboxHig'+'hlightMult'+'iplier']=-0x121*0x17+-0x57*-0x66+-0x8b2,this['_skyboxRot'+'ationShade'+'rInclude']=!(0x3*-0x9a9+-0x1*0x1f0+0x1eec),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new oi(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=0x1*0x20c3+0x1f78+-0x1*0x403a,this['_ambientBa'+'keSpherePa'+'rt']=-0x1b68*0x1+-0x1230+0x2d98+0.4,this['_lightmapF'+'ilterRange']=0x258e+0x962+-0x2ee6,this['_lightmapF'+'ilterSmoot'+'hness']=0x7*0x201+0x25*0xa3+0x2596*-0x1+0.2,this['_clustered'+'LightingEn'+'abled']=!(-0x1583*0x1+0x54*-0x53+-0x30bf*-0x1),this['_lightingP'+'arams']=new Fy(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(0x2*-0x94+0x1997+0x5*-0x4e3);}),this['_sky']=new HA(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(0x1*0x65d+0x1bb8+-0x2215),this['_shaderVer'+'sion']=-0x4db*0x2+-0xa94*0x2+0x1b7*0x12,this['immediate']=new XA(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](gm);}set['ambientBak'+'eNumSample'+'s'](_0x4880f6){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x4880f6),-0x115*-0x1c+0x1c1*0x13+-0x22*0x1df,-0x4e1*-0x1+-0xdb3+0x9d1);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x2a5250){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x2a5250,-0x2697+-0xd*0x236+0x4355+0.001,-0x1eec+0x5*0x141+0x315*0x8);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x17f4ea){if(this['device']['isWebGPU']&&!_0x17f4ea){M['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x17f4ea){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x17f4ea;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x5ce4b8){_0x5ce4b8!==this['_envAtlas']&&(this['_envAtlas']=_0x5ce4b8,_0x5ce4b8&&(_0x5ce4b8['addressU']=ue,_0x5ce4b8['addressV']=ue,_0x5ce4b8['minFilter']=_t,_0x5ce4b8['magFilter']=_t,_0x5ce4b8['mipmaps']=!(-0x8a1*0x1+-0x176a+-0x494*-0x7)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x57dc8d){const _0xc56937=this['_layers'];this['_layers']=_0x57dc8d,this['fire']('set:layers',_0xc56937,_0x57dc8d);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x425677){this['_lightmapF'+'ilterRange']=Math['max'](_0x425677,-0x3*0xb51+-0x1f31+0x4124+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x7b2170){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x7b2170,0x1f47+0x5*-0xe0+-0x1*0x1ae7+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x227cbf){_0x227cbf=_0x227cbf||[];const _0x55535f=this['_prefilter'+'edCubemaps'];(_0x55535f['length']!==_0x227cbf['length']||_0x55535f['some']((_0x11442e,_0x13551b)=>_0x11442e!==_0x227cbf[_0x13551b]))&&(_0x227cbf['length']===0x2198+0x1bed+-0x3d7f&&_0x227cbf['every'](_0x477121=>!!_0x477121)?(this['_internalE'+'nvAtlas']=My['generatePr'+'efilteredA'+'tlas'](_0x227cbf,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x227cbf['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x29c5db){_0x29c5db!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x29c5db,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x58e80b){_0x58e80b!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x58e80b,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x165908){_0x165908!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x165908,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0xb7faf6){_0xb7faf6!==this['_skyboxMip']&&(this['_skyboxMip']=_0xb7faf6,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x5570bb){_0x5570bb!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x5570bb,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x5823b0){if(!this['_skyboxRot'+'ation']['equals'](_0x5823b0)){const _0x51a658=_0x5823b0['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x5823b0),_0x51a658?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](I['ZERO'],_0x5823b0,I['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x51a658&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(0x3b9*-0x9+0x10a7+0x10da),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x2c8f59,_0x58c525,_0x13e7d5=ie['WHITE'],_0x477807=!(0x1a2b+0x1ac0+-0x34eb),_0x2d2d7c=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x2d2d7c,_0x477807)['addLines']([_0x2c8f59,_0x58c525],[_0x13e7d5,_0x13e7d5]);}['drawLines'](_0x1ee826,_0x3f8609,_0x9c7864=!(-0x2544+0xa*-0x3b+-0x1*-0x2792),_0x56c79c=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x56c79c,_0x9c7864)['addLines'](_0x1ee826,_0x3f8609);}['drawLineAr'+'rays'](_0x2497f5,_0x42b5db,_0x19dea9=!(-0x3eb*-0x9+-0xaf9+0x184a*-0x1),_0x456a38=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x456a38,_0x19dea9)['addLinesAr'+'rays'](_0x2497f5,_0x42b5db);}['applySetti'+'ngs'](_0x3462cf){const _0x4aab4c=_0x3462cf['physics'],_0x2db4d0=_0x3462cf['render'];this['_gravity']['set'](_0x4aab4c['gravity'][0x25ac+0x98*0x1b+-0x1*0x35b4],_0x4aab4c['gravity'][0x267b+-0x1978+-0xd02],_0x4aab4c['gravity'][-0x79*-0x23+0x2b*0xda+-0x3527]),this['ambientLig'+'ht']['set'](_0x2db4d0['global_amb'+'ient'][0x1847+-0x31*0x61+-0x5b6],_0x2db4d0['global_amb'+'ient'][-0x6de*-0x2+0x1*0x7d5+0x3*-0x730],_0x2db4d0['global_amb'+'ient'][-0x2390+0xc2f+0x1763]),this['ambientLum'+'inance']=_0x2db4d0['ambientLum'+'inance'],this['fog']['type']=_0x2db4d0['fog'],this['fog']['color']['set'](_0x2db4d0['fog_color'][-0x1336+0xd24*0x2+-0xa*0xb5],_0x2db4d0['fog_color'][-0x8*-0x181+0xe45+-0x1a4c],_0x2db4d0['fog_color'][0x1251+-0x1*0x1d+-0x1*0x1232]),this['fog']['start']=_0x2db4d0['fog_start'],this['fog']['end']=_0x2db4d0['fog_end'],this['fog']['density']=_0x2db4d0['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x2db4d0['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x2db4d0['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x2db4d0['lightmapMo'+'de'],this['exposure']=_0x2db4d0['exposure'],this['_skyboxInt'+'ensity']=_0x2db4d0['skyboxInte'+'nsity']??-0x250c+0x2453*-0x1+0x4960,this['_skyboxLum'+'inance']=_0x2db4d0['skyboxLumi'+'nance']??0x1*0x7159+0x3df*-0x14+0x2a33,this['_skyboxMip']=_0x2db4d0['skyboxMip']??-0x1ed3+0x5a6+0x192d,_0x2db4d0['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x2db4d0['skyboxRota'+'tion'][0x1803+0x8fd*0x3+0x91*-0x5a],_0x2db4d0['skyboxRota'+'tion'][-0x161+-0x13b7+0x1519],_0x2db4d0['skyboxRota'+'tion'][-0xd4e+-0x25e3+0x3333])),this['sky']['applySetti'+'ngs'](_0x2db4d0),this['clusteredL'+'ightingEna'+'bled']=_0x2db4d0['clusteredL'+'ightingEna'+'bled']??!(0x1*-0x1799+-0x1*0x1acf+-0x91*-0x59),this['lighting']['applySetti'+'ngs'](_0x2db4d0),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x4d3d71=>{_0x2db4d0['hasOwnProp'+'erty'](_0x4d3d71)&&(this[_0x4d3d71]=_0x2db4d0[_0x4d3d71]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x50c257=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x50c257[[-0x2f9*0xd+0x1f32+0x773,-0x18d1+-0x4d*-0x71+-0x92b,-0x97f*-0x1+0x2*0x3e3+0x1142*-0x1,0xb5*-0x2f+-0x266c*0x1+-0x1*-0x47ab,0x45*-0x68+0x13ec+0x821*0x1,-0x632*-0x1+-0x1*0x1a17+0x13eb][this['_skyboxMip']]]||this['_envAtlas']||_0x50c257[-0x12fe+-0x40*0x86+-0x2*-0x1a3f]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x50c257[0x1621+-0x942+-0xcdf]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x1755+-0x1288+0x29dd);}['setSkybox'](_0x3d139f){_0x3d139f?(this['skybox']=_0x3d139f[-0x25*-0xf9+-0x1*0x2273+0x1*-0x18a]||null,_0x3d139f[-0x181c+0x1c3e+0x421*-0x1]&&!_0x3d139f[-0xdce+0x2*0x11d9+0x15e3*-0x1]['cubemap']?this['envAtlas']=_0x3d139f[0x1e6d*-0x1+0xd*0x1bd+0x1*0x7d5]:this['prefiltere'+'dCubemaps']=_0x3d139f['slice'](-0x2d2*-0x3+0x100c+-0x1881)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Oe;}}h(wi,'EVENT_SETL'+'AYERS','set:layers'),h(wi,'EVENT_SETS'+'KYBOX','set:skybox'),h(wi,'EVENT_PRER'+'ENDER','prerender'),h(wi,'EVENT_POST'+'RENDER','postrender'),h(wi,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(wi,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(wi,'EVENT_PREC'+'ULL','precull'),h(wi,'EVENT_POST'+'CULL','postcull');class zy{constructor(_0x5136af,_0x513333,_0xa68592){this['device']=_0x5136af,this['inverseBin'+'dPose']=_0x513333,this['boneNames']=_0xa68592;}}const jA=[0x1c1*0x10+0xda5+0x3*-0xde7,0x277*0x6+0x1bbb+-0x2a85,0x409+-0xe4+-0x324,0x19e0+0x645+-0xd*0x279,-0x173+-0x1dd3+-0x2*-0xfa3,0x874+0x2063*-0x1+0x17f0,0x5*0x3da+-0x27b+-0x10c7,0x252e+-0x183*-0xd+-0x38d5,0x1fd3+-0x120c+0x2b*-0x52,-0xb9*0x25+0x1438+0x685,0x888+-0x1*-0x635+-0xebd,-0x10*-0xe+0xbe9+0x1*-0xcc8],YA=[-0x4c0+0x2*0x3cb+-0x2d6,-0x1645+0x53*-0x43+-0x7*-0x649,0x1543+-0x1d5c+0x81c,-0x1*-0x1e5b+-0x1cf*0x1+-0x1c8a,0x18c8+0x1788+0x9a9*-0x5,-0xdca+-0xea0+0x123*0x19];class KA extends pe{constructor(_0xe0a893,_0x560c86){super(),this['_device']=_0xe0a893,this['_pixelsPer'+'Unit']=_0x560c86&&_0x560c86['pixelsPerU'+'nit']!==void(-0x1b2e*0x1+-0x1ce8+0x3816)?_0x560c86['pixelsPerU'+'nit']:0x1*0x55d+0xb4b+-0x3*0x58d,this['_renderMod'+'e']=_0x560c86&&_0x560c86['renderMode']!==void(0x1d39*-0x1+0xe63+-0x3*-0x4f2)?_0x560c86['renderMode']:ei,this['_atlas']=_0x560c86&&_0x560c86['atlas']!==void(-0xa9*-0x7+-0x4cb*0x2+0x4f7)?_0x560c86['atlas']:null,this['_frameKeys']=_0x560c86&&_0x560c86['frameKeys']!==void(0x17bd+-0x1351+-0x46c)?_0x560c86['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0x1197*-0x1+-0x1ca1*-0x1+0x19*-0x71),this['_meshesDir'+'ty']=!(-0x14d7+0x2*-0xa21+-0x291a*-0x1),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0xd7cf93){this['_frameKeys']=_0xd7cf93,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0xc8b*-0x1+0xd*0xd7+-0xd0*-0x2):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0xd7cf93);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0xc243c3){_0xc243c3!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0xc243c3,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x627+0x25b3+0x2a1*-0xc):this['_createMes'+'hes']()),this['fire']('set:atlas',_0xc243c3));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x65e0a){this['_pixelsPer'+'Unit']!==_0x65e0a&&(this['_pixelsPer'+'Unit']=_0x65e0a,this['fire']('set:pixels'+'PerUnit',_0x65e0a),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ei&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x76*0x47+0xd*0x79+0x5d*-0x6b):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x592139){if(this['_renderMod'+'e']===_0x592139)return;const _0x3992f3=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x592139,this['fire']('set:render'+'Mode',_0x592139),(_0x3992f3===ei||_0x592139===ei)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x21e9+-0x34d+-0x1b1*-0x16):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x1d6bb4=this['_meshes']['length'];for(let _0x3912ea=0x1*-0x16bf+-0x21f6+0x3*0x12e7;_0x3912ea<_0x1d6bb4;_0x3912ea++){const _0x43ae77=this['_meshes'][_0x3912ea];_0x43ae77&&_0x43ae77['destroy']();}const _0x1833df=this['_frameKeys']['length'];this['_meshes']=new Array(_0x1833df);const _0x22d2c3=this['renderMode']===Et||this['_renderMod'+'e']===At?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x3d0c41=0x9b1+-0x1c34+0x1283;_0x3d0c41<_0x1833df;_0x3d0c41++){const _0x3a24f5=this['_atlas']['frames'][this['_frameKeys'][_0x3d0c41]];this['_meshes'][_0x3d0c41]=_0x3a24f5?_0x22d2c3['call'](this,_0x3a24f5):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x43eba9){const _0x4a5300=_0x43eba9['rect'],_0x150257=this['_atlas']['texture']['width'],_0x4d99b8=this['_atlas']['texture']['height'],_0x5b5cee=_0x4a5300['z']/this['_pixelsPer'+'Unit'],_0x543f87=_0x4a5300['w']/this['_pixelsPer'+'Unit'],_0x28d7e3=_0x43eba9['pivot']['x'],_0x5eb0fc=_0x43eba9['pivot']['y'],_0x314113=[-_0x28d7e3*_0x5b5cee,-_0x5eb0fc*_0x543f87,0x2*-0x12d1+-0x779+0x2d1b,(-0x13b0+0x23d9+-0x1028-_0x28d7e3)*_0x5b5cee,-_0x5eb0fc*_0x543f87,0xa*-0x248+0x1dee+-0x71e,(0x91b+-0x12be+0x9a4-_0x28d7e3)*_0x5b5cee,(-0xab*0x19+0x1*0x15e5+-0x531-_0x5eb0fc)*_0x543f87,0x1*-0x15cd+-0x5*0x14c+0x1c49,-_0x28d7e3*_0x5b5cee,(0x38b+-0x47*0x22+0x5e4-_0x5eb0fc)*_0x543f87,0x2397*-0x1+0x2079+0x31e],_0x50823e=_0x4a5300['x']/_0x150257,_0x5e7c01=-0x147a+-0xac6+0x1f41-_0x4a5300['y']/_0x4d99b8,_0x470232=(_0x4a5300['x']+_0x4a5300['z'])/_0x150257,_0x618f6f=-0x1*-0x9eb+-0x2394+0x19aa-(_0x4a5300['y']+_0x4a5300['w'])/_0x4d99b8,_0x51bbbe=[_0x50823e,_0x5e7c01,_0x470232,_0x5e7c01,_0x470232,_0x618f6f,_0x50823e,_0x618f6f],_0x90d3a3=new la();return _0x90d3a3['positions']=_0x314113,_0x90d3a3['normals']=jA,_0x90d3a3['uvs']=_0x51bbbe,_0x90d3a3['indices']=YA,Ge['fromGeomet'+'ry'](this['_device'],_0x90d3a3);}['_create9Sl'+'iceMesh'](){const _0xea4400=J['ONE'],_0x1c8a15=-0x1139*-0x2+0xc48+-0x2eb7,_0x55ea80=-0x1cd5+-0x1dd3+0x3aab,_0xeb8aeb=[],_0x3cce31=[],_0x523a20=[],_0x5659f6=[];let _0x3db4e6=-0x684+-0x1bb9+-0x223d*-0x1;for(let _0x59b1a5=0x11*-0x11e+0xfda+0x324;_0x59b1a5<=_0x1c8a15;_0x59b1a5++){const _0x1fef8c=_0x59b1a5===-0x1cd7+0x68*-0x1f+0x296f*0x1||_0x59b1a5===_0x1c8a15?0x235d+-0x38+-0x1*0x2325:-0x11ca+0x97*-0x1b+0x21b8;for(let _0xcbf4f6=-0x23e8+-0x4e7+0x151*0x1f;_0xcbf4f6<=_0x55ea80;_0xcbf4f6++){const _0x2fa924=-_0xea4400['x']+(-0xeae+0x1c27*0x1+-0xd77)*_0xea4400['x']*(_0x59b1a5<=-0x1e77+-0x3f*0x35+0x2b83?-0x1a6f*-0x1+-0x80d+0x1a*-0xb5:-0x1*0x1322+-0x1d3d+0x3062)/_0x1c8a15,_0x5961f1=-0x85b*0x1+-0xde1+-0x163c*-0x1,_0x4aa342=-(-_0xea4400['y']+(0x2290+-0x33a*-0x2+0x1481*-0x2)*_0xea4400['y']*(_0xcbf4f6<=0x20c5*0x1+0x8b*0x12+0x63*-0x6e?0xcc7*-0x1+-0x1*-0x1831+-0x1*0xb6a:0x2062+-0x90b+-0x1*0x1754)/_0x55ea80),_0x1b7d0c=_0xcbf4f6===-0xf29*0x1+-0x2489+-0x3fa*-0xd||_0xcbf4f6===_0x55ea80?-0x318+-0x97d+0x1*0xc95:-0xb02*0x1+0x8e3+-0x11*-0x20;_0xeb8aeb['push'](-_0x2fa924,_0x5961f1,_0x4aa342),_0x3cce31['push'](0x7fc*0x2+-0xa*-0x13+-0x10b6,0x1757+-0x1*-0xa4e+-0x21a4,-0x1*-0x14e7+-0x1*-0x2655+-0x3b3c),_0x523a20['push'](_0x1fef8c,_0x1b7d0c),_0x59b1a5<_0x1c8a15&&_0xcbf4f6<_0x55ea80&&(_0x5659f6['push'](_0x3db4e6+_0x55ea80+(0xb26+0x27c*-0x4+-0x135),_0x3db4e6+(-0x1c5e+0xc45+0x101a*0x1),_0x3db4e6),_0x5659f6['push'](_0x3db4e6+_0x55ea80+(-0x58f+-0xc*0xe3+-0x1*-0x1034),_0x3db4e6+_0x55ea80+(-0x1*0x207e+-0x217*-0x3+-0x18b*-0x11),_0x3db4e6+(0x142d+0x43e+-0x186a))),_0x3db4e6++;}}const _0x597cb6=new la();return _0x597cb6['positions']=_0xeb8aeb,_0x597cb6['normals']=_0x3cce31,_0x597cb6['uvs']=_0x523a20,_0x597cb6['indices']=_0x5659f6,Ge['fromGeomet'+'ry'](this['_device'],_0x597cb6);}['_onSetFram'+'es'](_0x34f274){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x4bd+0x7*-0xe2+-0x171*-0x1):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0xb4fec3,_0x4f6367){const _0x3fef6e=this['_frameKeys']['indexOf'](_0xb4fec3);_0x3fef6e<0xdcd*-0x1+0xacf+0x1*0x2fe||(_0x4f6367?this['renderMode']===ei&&(this['_meshes'][_0x3fef6e]=this['_createSim'+'pleMesh'](_0x4f6367)):this['_meshes'][_0x3fef6e]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x30a950){const _0x5af7c7=this['_frameKeys']['indexOf'](_0x30a950);_0x5af7c7<0x20b5+-0x5de+0x1*-0x1ad7||(this['_meshes'][_0x5af7c7]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(0xc32+0x2240+-0x2e72),this['_meshesDir'+'ty']=!(-0x16*0x19+-0x1d2f+0x1f56);}['endUpdate'](){this['_updatingP'+'roperties']=!(0xf0b*-0x1+-0x1049+0x1f55),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(0x5c*0x17+0x6a*0x25+-0x1795*0x1);}['destroy'](){for(const _0x38b846 of this['_meshes'])_0x38b846&&_0x38b846['destroy']();this['_meshes']['length']=-0xc7*0xa+0x8*-0x2de+0x1eb6;}}class ZA extends pe{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x434990){this['_texture']=_0x434990,this['fire']('set:textur'+'e',_0x434990);}get['texture'](){return this['_texture'];}set['frames'](_0x329e2e){this['_frames']=_0x329e2e,this['fire']('set:frames',_0x329e2e);}get['frames'](){return this['_frames'];}['setFrame'](_0x141583,_0x55aef9){let _0x54feec=this['_frames'][_0x141583];_0x54feec?(_0x54feec['rect']['copy'](_0x55aef9['rect']),_0x54feec['pivot']['copy'](_0x55aef9['pivot']),_0x54feec['border']['copy'](_0x55aef9['border'])):(_0x54feec={'rect':_0x55aef9['rect']['clone'](),'pivot':_0x55aef9['pivot']['clone'](),'border':_0x55aef9['border']['clone']()},this['_frames'][_0x141583]=_0x54feec),this['fire']('set:frame',_0x141583['toString'](),_0x54feec);}['removeFram'+'e'](_0x2d4a7d){const _0x13d0c8=this['_frames'][_0x2d4a7d];_0x13d0c8&&(delete this['_frames'][_0x2d4a7d],this['fire']('remove:fra'+'me',_0x2d4a7d['toString'](),_0x13d0c8));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class b_{constructor(_0x3a8abd,_0x2a4daf,_0x4ab8ca,_0x24c6ab){this['time']=_0x3a8abd,this['position']=_0x2a4daf,this['rotation']=_0x4ab8ca,this['scale']=_0x24c6ab;}}class C_{constructor(){this['_name']='',this['_keys']=[];}}class P_{constructor(){h(this,'name',''),h(this,'duration',-0x2*-0x7+0x10b5+-0x265*0x7),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x3c98d3){return this['_nodeDict'][_0x3c98d3];}['addNode'](_0xf061a9){this['_nodes']['push'](_0xf061a9),this['_nodeDict'][_0xf061a9['_name']]=_0xf061a9;}get['nodes'](){return this['_nodes'];}}class QA{constructor(){this['_written']=!(0x1d3f+0x1a25*-0x1+-0x319),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new I(),this['_scale']=new I(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x3174c3){this['_targetNod'+'e']=_0x3174c3;}}class Vd{constructor(_0xab1a05){h(this,'looping',!(-0x316+-0x24cd*0x1+0x27e3*0x1)),(this['_animation']=null,this['_time']=-0x1abe*0x1+0x18a9+0x215,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x2b8376=_0x49d157=>{const _0x221c73=new QA();_0x221c73['_name']=_0x49d157['name'],this['_interpola'+'tedKeys']['push'](_0x221c73),this['_interpola'+'tedKeyDict'][_0x49d157['name']]=_0x221c73,this['_currKeyIn'+'dices'][_0x49d157['name']]=0x6a9+-0xd*-0x27a+-0x26db;for(let _0x3f39e5=-0x19c0*-0x1+0x1fda+-0x49*0xca;_0x3f39e5<_0x49d157['_children']['length'];_0x3f39e5++)_0x2b8376(_0x49d157['_children'][_0x3f39e5]);};_0x2b8376(_0xab1a05);}set['animation'](_0x430fdd){this['_animation']=_0x430fdd,this['currentTim'+'e']=-0x1ff4+0x97e*-0x3+0x82*0x77;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x283e12){this['_time']=_0x283e12;const _0x404b53=this['_interpola'+'tedKeys']['length'];for(let _0x15f510=0xb*0xb2+0x1619*-0x1+0xe73;_0x15f510<_0x404b53;_0x15f510++){const _0x2b38d0=this['_interpola'+'tedKeys'][_0x15f510]['_name'];this['_currKeyIn'+'dices'][_0x2b38d0]=0x1dbc+0x117a*0x1+-0x2f36;}this['addTime'](-0x270d*0x1+-0x25*-0x6b+0x1796),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x119d23){if(this['_animation']!==null){const _0x30bf8f=this['_animation']['_nodes'],_0x4eb948=this['_animation']['duration'];if(this['_time']===_0x4eb948&&!this['looping'])return;if(this['_time']+=_0x119d23,this['_time']>_0x4eb948){this['_time']=this['looping']?-0x8*-0x3b5+0x31d*0xc+-0x4304:_0x4eb948;for(let _0x26a016=-0x1*0x21c7+-0x25aa+-0x1*-0x4771;_0x26a016<_0x30bf8f['length'];_0x26a016++){const _0x37f4c4=_0x30bf8f[_0x26a016]['_name'];this['_currKeyIn'+'dices'][_0x37f4c4]=-0x25*0xd6+-0x1077+0x2f65;}}else{if(this['_time']<0xffb*-0x1+0x229c+-0x13*0xfb){this['_time']=this['looping']?_0x4eb948:0x174e+0x20db+-0x3829;for(let _0xeb1fd4=-0x1f16+-0x4*0x8b4+-0x4b5*-0xe;_0xeb1fd4<_0x30bf8f['length'];_0xeb1fd4++){const _0x146e46=_0x30bf8f[_0xeb1fd4],_0x25666b=_0x146e46['_name'];this['_currKeyIn'+'dices'][_0x25666b]=_0x146e46['_keys']['length']-(-0x1842+-0x129c+0x2ae0);}}}const _0x4e135e=_0x119d23>=0xa12+0x1fbe+-0x29d0?0x10d4+0x9*0x30d+-0x2c48:-(0x2030+0x4*0x755+0x3*-0x1481);for(let _0x11fa43=0x1*0x155d+0x238f+-0x1c76*0x2;_0x11fa43<_0x30bf8f['length'];_0x11fa43++){const _0x4235e1=_0x30bf8f[_0x11fa43],_0x47c325=_0x4235e1['_name'],_0x16e434=_0x4235e1['_keys'],_0x315330=this['_interpola'+'tedKeyDict'][_0x47c325];if(_0x315330===void(-0x10bd+-0x1083*0x2+0x31c3)){M['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x47c325);continue;}let _0x47b73d=!(-0x1d*0x43+0x203+0x1*0x595);if(_0x16e434['length']!==-0x1629+-0x23fb+0x3a25)for(let _0x194fb3=this['_currKeyIn'+'dices'][_0x47c325];_0x194fb3<_0x16e434['length']-(-0xac3+-0x18cb*-0x1+-0xe07)&&_0x194fb3>=0x2185+-0x1313*-0x1+-0x3498;_0x194fb3+=_0x4e135e){const _0x37cf5a=_0x16e434[_0x194fb3],_0x27b333=_0x16e434[_0x194fb3+(0xb72+-0x1767+0xbf6*0x1)];if(_0x37cf5a['time']<=this['_time']&&_0x27b333['time']>=this['_time']){const _0x3c30da=(this['_time']-_0x37cf5a['time'])/(_0x27b333['time']-_0x37cf5a['time']);_0x315330['_pos']['lerp'](_0x37cf5a['position'],_0x27b333['position'],_0x3c30da),_0x315330['_quat']['slerp'](_0x37cf5a['rotation'],_0x27b333['rotation'],_0x3c30da),_0x315330['_scale']['lerp'](_0x37cf5a['scale'],_0x27b333['scale'],_0x3c30da),_0x315330['_written']=!(0x22f4+0x1e6e+-0x4162*0x1),this['_currKeyIn'+'dices'][_0x47c325]=_0x194fb3,_0x47b73d=!(-0xb*0xbe+0x233*-0x4+0x10f6);break;}}(_0x16e434['length']===0x1*0x56d+0xeba+0x2*-0xa13||!_0x47b73d&&this['_time']===-0x23b0+-0x1f96+-0x2*-0x21a3&&this['looping'])&&(_0x315330['_pos']['copy'](_0x16e434[-0x1679+-0x4ab+0x1b24]['position']),_0x315330['_quat']['copy'](_0x16e434[0x1b5*-0x15+0x1*-0x713+0x2aec]['rotation']),_0x315330['_scale']['copy'](_0x16e434[-0x175f+0x1623+0x13c]['scale']),_0x315330['_written']=!(0xb5*0x32+-0xe*-0x12+-0x2456));}}}['blend'](_0x313c3c,_0x1474db,_0x49341f){const _0xa05052=this['_interpola'+'tedKeys']['length'];for(let _0x8d24a1=-0x1*0x23d1+0x56a+0x1e67;_0x8d24a1<_0xa05052;_0x8d24a1++){const _0x54f3c0=_0x313c3c['_interpola'+'tedKeys'][_0x8d24a1],_0x195674=_0x1474db['_interpola'+'tedKeys'][_0x8d24a1],_0x85ef92=this['_interpola'+'tedKeys'][_0x8d24a1];_0x54f3c0['_written']&&_0x195674['_written']?(_0x85ef92['_quat']['slerp'](_0x54f3c0['_quat'],_0x1474db['_interpola'+'tedKeys'][_0x8d24a1]['_quat'],_0x49341f),_0x85ef92['_pos']['lerp'](_0x54f3c0['_pos'],_0x1474db['_interpola'+'tedKeys'][_0x8d24a1]['_pos'],_0x49341f),_0x85ef92['_scale']['lerp'](_0x54f3c0['_scale'],_0x195674['_scale'],_0x49341f),_0x85ef92['_written']=!(-0x112b+-0xbf*0x17+-0x152*-0x1a)):_0x54f3c0['_written']?(_0x85ef92['_quat']['copy'](_0x54f3c0['_quat']),_0x85ef92['_pos']['copy'](_0x54f3c0['_pos']),_0x85ef92['_scale']['copy'](_0x54f3c0['_scale']),_0x85ef92['_written']=!(-0x1*0x18f4+-0x455*-0x1+0x1*0x149f)):_0x195674['_written']&&(_0x85ef92['_quat']['copy'](_0x195674['_quat']),_0x85ef92['_pos']['copy'](_0x195674['_pos']),_0x85ef92['_scale']['copy'](_0x195674['_scale']),_0x85ef92['_written']=!(-0x101*-0xb+-0x18e0*0x1+-0xdd5*-0x1));}}['setGraph'](_0x10f9e4){if(this['graph']=_0x10f9e4,_0x10f9e4)for(let _0x262d15=0x2*0x51b+-0x2582+0xda6*0x2;_0x262d15<this['_interpola'+'tedKeys']['length'];_0x262d15++){const _0xe58b45=this['_interpola'+'tedKeys'][_0x262d15],_0x336ddf=_0x10f9e4['findByName'](_0xe58b45['_name']);this['_interpola'+'tedKeys'][_0x262d15]['setTarget'](_0x336ddf);}else{for(let _0x57c387=-0x19*0x1d+-0x1468+-0x295*-0x9;_0x57c387<this['_interpola'+'tedKeys']['length'];_0x57c387++)this['_interpola'+'tedKeys'][_0x57c387]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x23ff68=0x151d+0x2587+-0x4*0xea9;_0x23ff68<this['_interpola'+'tedKeys']['length'];_0x23ff68++){const _0x1bc86e=this['_interpola'+'tedKeys'][_0x23ff68];if(_0x1bc86e['_written']){const _0xfbd853=_0x1bc86e['getTarget']();_0xfbd853['localPosit'+'ion']['copy'](_0x1bc86e['_pos']),_0xfbd853['localRotat'+'ion']['copy'](_0x1bc86e['_quat']),_0xfbd853['localScale']['copy'](_0x1bc86e['_scale']),_0xfbd853['_dirtyLoca'+'l']||_0xfbd853['_dirtifyLo'+'cal'](),_0x1bc86e['_written']=!(-0x1dac+-0x5*-0x56b+-0x1*-0x296);}}}}const Ds=(-0x5*-0x4b7+0xa79*-0x2+-0x29d)/(0xb3a+-0x22e6+0x17ec),Xs=-0xb09+0x8b*-0x21+0x3*0x9a7-Ds*(-0x3d*0x79+-0x435*0x3+0x2976);class Fm extends la{constructor(_0x481faa,_0x37915d,_0x33dc2c,_0x5d6ed2,_0x40fe6c,_0x340c8c){super();const _0x5c147e=new I(),_0x3d9843=new I(),_0x4d41a6=new I(),_0x58774f=new I(),_0x29b7be=new I(),_0x2d8a7c=new I(),_0xb84c45=[],_0xbc026=[],_0x2f7993=[],_0x595e1f=[],_0x50f05a=[];let _0x5e2ee7;if(_0x33dc2c>0x35*-0x79+-0x1*0x20ab+0x39b8){for(let _0x3063e7=0xc5*-0x2+-0x1434+-0x2*-0xadf;_0x3063e7<=_0x5d6ed2;_0x3063e7++)for(let _0x4b85bc=-0x155b*-0x1+0x2*-0x129a+-0xfd9*-0x1;_0x4b85bc<=_0x40fe6c;_0x4b85bc++){const _0x731da7=_0x4b85bc/_0x40fe6c*(-0x1c6*0x4+0x733+-0x19*0x1)*Math['PI']-Math['PI'],_0x194a6a=Math['sin'](_0x731da7),_0x3aedb2=Math['cos'](_0x731da7);_0x29b7be['set'](_0x194a6a*_0x481faa,-_0x33dc2c/(-0x3*0x92c+0x207*-0xa+0x2fcc),_0x3aedb2*_0x481faa),_0x58774f['set'](_0x194a6a*_0x37915d,_0x33dc2c/(0xcaa+-0x9e8+-0x2c0),_0x3aedb2*_0x37915d),_0x5c147e['lerp'](_0x29b7be,_0x58774f,_0x3063e7/_0x5d6ed2),_0x3d9843['sub2'](_0x58774f,_0x29b7be)['normalize'](),_0x2d8a7c['set'](_0x3aedb2,0x16b5+0x1*-0x24a+-0x146b,-_0x194a6a),_0x4d41a6['cross'](_0x2d8a7c,_0x3d9843)['normalize'](),_0xb84c45['push'](_0x5c147e['x'],_0x5c147e['y'],_0x5c147e['z']),_0xbc026['push'](_0x4d41a6['x'],_0x4d41a6['y'],_0x4d41a6['z']);let _0x5d8399=_0x4b85bc/_0x40fe6c,_0xf4ebc5=_0x3063e7/_0x5d6ed2;_0x2f7993['push'](_0x5d8399,0x3b5+-0xb67*-0x1+-0xf1b-_0xf4ebc5);const _0x1f09ba=_0xf4ebc5;if(_0xf4ebc5=_0x5d8399,_0x5d8399=_0x1f09ba,_0x5d8399=_0x5d8399*Xs+Ds,_0xf4ebc5=_0xf4ebc5*Xs+Ds,_0x5d8399/=0x590*0x2+-0x3c1*0x9+0x16ac,_0x595e1f['push'](_0x5d8399,-0x10a3+-0x1f7*-0x11+0x1*-0x10c3-_0xf4ebc5),_0x3063e7<_0x5d6ed2&&_0x4b85bc<_0x40fe6c){const _0x2f3e22=_0x3063e7*(_0x40fe6c+(0x1b7b+0x1*0x883+0x3*-0xbff))+_0x4b85bc,_0x53c122=_0x3063e7*(_0x40fe6c+(0x22fe+-0x26*-0xf9+-0x47f3*0x1))+(_0x4b85bc+(0x68e+-0x27a*0xa+-0x1*-0x1237)),_0x2c186c=(_0x3063e7+(0x4d+0x1499+0x14e5*-0x1))*(_0x40fe6c+(-0x3dd*0x8+0x2160+-0x277))+_0x4b85bc,_0x4bbb59=(_0x3063e7+(0x1*-0x1451+0x71*-0x13+0x1cb5))*(_0x40fe6c+(-0x27*-0x61+0x1fcd+0x1*-0x2e93))+(_0x4b85bc+(0x1*-0x1080+-0x1c77+0x2cf8));_0x50f05a['push'](_0x2f3e22,_0x53c122,_0x2c186c),_0x50f05a['push'](_0x53c122,_0x4bbb59,_0x2c186c);}}}if(_0x340c8c){const _0x313076=Math['floor'](_0x40fe6c/(0x1*0x11d9+-0x11*-0x145+-0x692*0x6)),_0x95a612=_0x40fe6c,_0x2235c6=_0x33dc2c/(-0x1*-0x23db+-0x1ba8+-0x831);for(let _0x4fe024=-0x4*0xe9+0x268f+-0x22eb;_0x4fe024<=_0x313076;_0x4fe024++){const _0xa94f81=_0x4fe024*Math['PI']*(-0x51*0x1c+-0x5*0x6be+-0x1549*-0x2+0.5)/_0x313076,_0x4ef129=Math['sin'](_0xa94f81),_0x3844bc=Math['cos'](_0xa94f81);for(let _0xdac66f=-0x3b*-0x4f+-0x6*-0x164+0x7*-0x3cb;_0xdac66f<=_0x95a612;_0xdac66f++){const _0x21c184=_0xdac66f*(0x1*-0x109+0x3f1*-0x5+0x14c0)*Math['PI']/_0x95a612-Math['PI']/(0x166b+-0x1a4a+0x3e1),_0x17c0f6=Math['sin'](_0x21c184),_0x44a204=Math['cos'](_0x21c184)*_0x4ef129,_0x46d6f1=_0x3844bc,_0x8b6e5f=_0x17c0f6*_0x4ef129;let _0x16a9d0=-0x2112+0x9ee+-0x19*-0xed-_0xdac66f/_0x95a612,_0x1e338b=-0x24c4+0x68a+0x1e3b-_0x4fe024/_0x313076;_0xb84c45['push'](_0x44a204*_0x37915d,_0x46d6f1*_0x37915d+_0x2235c6,_0x8b6e5f*_0x37915d),_0xbc026['push'](_0x44a204,_0x46d6f1,_0x8b6e5f),_0x2f7993['push'](_0x16a9d0,-0xe8e+-0x1*-0x9a6+0x4e9-_0x1e338b),_0x16a9d0=_0x16a9d0*Xs+Ds,_0x1e338b=_0x1e338b*Xs+Ds,_0x16a9d0/=0x4e5*0x1+0x1cf3*0x1+-0x21d5,_0x1e338b/=-0x1909+0x1013*0x1+0x8f9*0x1,_0x16a9d0+=(0x1*0x1292+0xa81*0x3+0x14*-0x281)/(-0x1*0x1046+-0x3*-0x54d+0x31*0x2),_0x595e1f['push'](_0x16a9d0,-0x1a1e+0x531+0x14ee-_0x1e338b);}}_0x5e2ee7=(_0x5d6ed2+(-0x9f*0x1d+-0x1487+0x268b))*(_0x40fe6c+(-0x1fb3+-0x502+0x7f*0x4a));for(let _0x22475f=0x12fd+0x246d+-0x376a;_0x22475f<_0x313076;++_0x22475f)for(let _0x11e138=0x94f+0x5*0x686+-0x29ed;_0x11e138<_0x95a612;++_0x11e138){const _0x3ff1df=_0x22475f*(_0x95a612+(-0x1784*0x1+-0x1f97+-0x1*-0x371c))+_0x11e138,_0x30f22f=_0x3ff1df+_0x95a612+(-0x4db*-0x1+-0x1a70+0x1596);_0x50f05a['push'](_0x5e2ee7+_0x3ff1df+(-0x114e+-0x12*0x4+0x1*0x1197),_0x5e2ee7+_0x30f22f,_0x5e2ee7+_0x3ff1df),_0x50f05a['push'](_0x5e2ee7+_0x3ff1df+(0x1a11+-0x141a+0x6d*-0xe),_0x5e2ee7+_0x30f22f+(-0x2*-0x9cb+0x38f*-0x4+0x25*-0x25),_0x5e2ee7+_0x30f22f);}for(let _0x248193=-0x5*0x1d5+-0x1b85*-0x1+-0x125c;_0x248193<=_0x313076;_0x248193++){const _0xe2ca74=Math['PI']*(-0x798+-0xb0*-0x12+-0x9*0x88+0.5)+_0x248193*Math['PI']*(-0x75f+0x2*-0x7c+0x857+0.5)/_0x313076,_0x31a765=Math['sin'](_0xe2ca74),_0x205e7c=Math['cos'](_0xe2ca74);for(let _0x1fa13d=0x2*-0x75d+-0x9b3+0x186d;_0x1fa13d<=_0x95a612;_0x1fa13d++){const _0x450796=_0x1fa13d*(-0x26eb+0x1*0x115f+0xb2*0x1f)*Math['PI']/_0x95a612-Math['PI']/(0x12*0x6c+0x1c9*0x13+-0x2981),_0x5b9867=Math['sin'](_0x450796),_0x40d387=Math['cos'](_0x450796)*_0x31a765,_0x51ca84=_0x205e7c,_0x1abc63=_0x5b9867*_0x31a765;let _0x2d5869=0x934+-0x1f02+0x745*0x3-_0x1fa13d/_0x95a612,_0x565675=0x1a3c+0xfb5*0x1+-0x29f0-_0x248193/_0x313076;_0xb84c45['push'](_0x40d387*_0x37915d,_0x51ca84*_0x37915d-_0x2235c6,_0x1abc63*_0x37915d),_0xbc026['push'](_0x40d387,_0x51ca84,_0x1abc63),_0x2f7993['push'](_0x2d5869,0x1*-0x24bb+0x1d2c+0x2c*0x2c-_0x565675),_0x2d5869=_0x2d5869*Xs+Ds,_0x565675=_0x565675*Xs+Ds,_0x2d5869/=0x1d*-0x3e+-0x1*-0x69f+0x6a,_0x565675/=-0x9d3+0x1*-0x1497+0x1*0x1e6d,_0x2d5869+=(-0x1892+0x1a36+-0x1a2)/(-0xb*-0x1c2+0x13d*0x7+-0x1bfe),_0x595e1f['push'](_0x2d5869,0x1d18+-0x1*-0xb65+0x4*-0xa1f-_0x565675);}}_0x5e2ee7=(_0x5d6ed2+(-0x1bcd+-0x1048*-0x2+-0x4c2))*(_0x40fe6c+(0x1fd3*-0x1+0x2502+-0x2*0x297))+(_0x95a612+(-0x1*0x535+0x16ae+-0x1178))*(_0x313076+(-0x16ea+-0x1*-0x1af2+0x407*-0x1));for(let _0x52537c=0x15b2+0x6f3*-0x1+0x19*-0x97;_0x52537c<_0x313076;++_0x52537c)for(let _0x135e53=0x1*0xbf+0x257e*0x1+0xfb*-0x27;_0x135e53<_0x95a612;++_0x135e53){const _0x30c2af=_0x52537c*(_0x95a612+(-0xb6f*0x3+0x11a3+0x11*0xfb))+_0x135e53,_0x3f20de=_0x30c2af+_0x95a612+(-0x1*0x2433+0xb7a*-0x2+-0x9dc*-0x6);_0x50f05a['push'](_0x5e2ee7+_0x30c2af+(-0x1*0x1c9+0x1fb3+-0xd*0x24d),_0x5e2ee7+_0x3f20de,_0x5e2ee7+_0x30c2af),_0x50f05a['push'](_0x5e2ee7+_0x30c2af+(-0x15*-0x6f+0x1fb+0x1*-0xb15),_0x5e2ee7+_0x3f20de+(-0x1bd2*-0x1+-0x1786+0x9d*-0x7),_0x5e2ee7+_0x3f20de);}}else{if(_0x5e2ee7=(_0x5d6ed2+(-0x10*0x182+-0xb56+0x2377))*(_0x40fe6c+(-0x230d*-0x1+-0x492+-0xf3d*0x2)),_0x481faa>-0x1f7*0xb+-0x17*0x194+0x39e9)for(let _0x7743e4=0x10f9+-0x208f+-0x1e*-0x85;_0x7743e4<_0x40fe6c;_0x7743e4++){const _0x22e69e=_0x7743e4/_0x40fe6c*(-0x35f+-0x665*-0x1+0x4*-0xc1)*Math['PI'],_0x4a5b7c=Math['sin'](_0x22e69e),_0x378cc8=-_0x33dc2c/(0x16a*0xb+0xd0a+-0x1c96),_0xab6054=Math['cos'](_0x22e69e);let _0x201f85=-0x1ae5+-0x1065+0x2b4b-(_0x4a5b7c+(0x45d+0xec+-0x548))/(0x4*0x137+0xce*0x29+0x8*-0x4bb),_0x50bbcb=(_0xab6054+(-0x26*-0xdd+-0x6f5*-0x2+-0x2eb7))/(-0x2*-0xf43+-0x1*-0x9fa+0x287e*-0x1);_0xb84c45['push'](_0x4a5b7c*_0x481faa,_0x378cc8,_0xab6054*_0x481faa),_0xbc026['push'](-0x8a7+0x256*0x4+-0x1*0xb1,-(-0x1404+-0x5fe*-0x5+0x9f1*-0x1),0x1d6f+-0x6*-0x195+0x5*-0x7c9),_0x2f7993['push'](_0x201f85,-0x16b7+0x2421+-0x1*0xd69-_0x50bbcb),_0x201f85=_0x201f85*Xs+Ds,_0x50bbcb=_0x50bbcb*Xs+Ds,_0x201f85/=-0xf1a*-0x2+0x89b*0x1+-0x1*0x26cc,_0x50bbcb/=-0x1a73+-0x2035+0x3aab,_0x201f85+=(-0x140b+-0x2*0x441+0x1c8e)/(0x2b*0x13+0xe16+0x8a2*-0x2),_0x595e1f['push'](_0x201f85,0x131*0x11+0x1fa+-0x163a-_0x50bbcb),_0x7743e4>0xaa*0x11+0x2293+-0x2*0x16ee&&_0x50f05a['push'](_0x5e2ee7,_0x5e2ee7+_0x7743e4,_0x5e2ee7+_0x7743e4-(-0xadf+-0x1*0x14f8+0x7f6*0x4));}if(_0x5e2ee7+=_0x40fe6c,_0x37915d>-0xd*0xad+0x3*0x7e2+-0xedd)for(let _0x233406=-0x7f*0x17+0x1684+-0xb1b;_0x233406<_0x40fe6c;_0x233406++){const _0x101589=_0x233406/_0x40fe6c*(0x77f+-0xdef+0x21*0x32)*Math['PI'],_0x46af7a=Math['sin'](_0x101589),_0x28a89f=_0x33dc2c/(0xce*0x2c+-0x92*-0x1+-0x23f8),_0x45e143=Math['cos'](_0x101589);let _0x325075=0x1*0x15f4+0x16b9+-0x3*0xee4-(_0x46af7a+(0x2*-0x71b+-0x2*-0x1df+0x1*0xa79))/(-0x16e5+-0x1*-0x10e7+-0x80*-0xc),_0x45fb50=(_0x45e143+(0x1f94+-0x1*-0x1e99+-0x3e2c))/(-0x22f3+-0x16e*-0xc+-0x7*-0x28b);_0xb84c45['push'](_0x46af7a*_0x37915d,_0x28a89f,_0x45e143*_0x37915d),_0xbc026['push'](-0x1*-0x16f9+0x975+-0x206e,-0x232e+-0x216a+0x409*0x11,-0x4*-0x526+-0x22a6+0xe0e),_0x2f7993['push'](_0x325075,-0x509*0x3+-0xf28+0x1e44-_0x45fb50),_0x325075=_0x325075*Xs+Ds,_0x45fb50=_0x45fb50*Xs+Ds,_0x325075/=-0x1477+0x568*-0x2+0x1f4a,_0x45fb50/=-0x1c84+-0x24db+0x4162,_0x325075+=(0x966*-0x1+0x2*-0x2b1+0x765*0x2)/(0x1693*-0x1+-0x142d+0x2ac3),_0x595e1f['push'](_0x325075,-0xf2f+-0x1ea5+-0xf47*-0x3-_0x45fb50),_0x233406>0x29*0xdf+-0x1*0x235b+-0x1*0x5b&&_0x50f05a['push'](_0x5e2ee7,_0x5e2ee7+_0x233406-(0x9*-0x371+-0x1ae2+0x7*0x844),_0x5e2ee7+_0x233406);}}this['positions']=_0xb84c45,this['normals']=_0xbc026,this['uvs']=_0x2f7993,this['uvs1']=_0x595e1f,this['indices']=_0x50f05a;}}class JA extends Fm{constructor(_0xd3ddcd={}){const _0x45f71f=_0xd3ddcd['radius']??0x18d8+-0x2076+-0x28a*-0x3+0.3,_0x29151c=_0xd3ddcd['height']??-0x3c*-0xa2+0xe3d+0x4*-0xd0d,_0x5257b6=_0xd3ddcd['heightSegm'+'ents']??0x130d*-0x1+-0x7d7*-0x1+0xb37,_0x4dd365=_0xd3ddcd['sides']??0x23ee+-0x40e+-0x1fcc;super(_0x45f71f,_0x45f71f,_0x29151c-(-0x2045+0x1*0x1256+0x1*0xdf1)*_0x45f71f,_0x5257b6,_0x4dd365,!(0x8e*-0x25+0x1*-0x1825+0x2cab)),_0xd3ddcd['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class eb extends Fm{constructor(_0xf69e28={}){const _0x54b88a=_0xf69e28['baseRadius']??-0x1f52+-0x3*0x6a7+-0x1*-0x3347+0.5,_0x18d8cd=_0xf69e28['peakRadius']??0x1ca6+0xe*0x2e+-0x1f2a,_0x2fb71f=_0xf69e28['height']??0x2488+0xd*0x261+-0x2*0x21ba,_0x4d22d2=_0xf69e28['heightSegm'+'ents']??0x22dd+-0x9*0x295+-0xb9b*0x1,_0x2594a0=_0xf69e28['capSegment'+'s']??0x1244+0x3d0+0xb01*-0x2;super(_0x54b88a,_0x18d8cd,_0x2fb71f,_0x4d22d2,_0x2594a0,!(-0x1e02+-0x20bb+-0x6*-0xa75)),_0xf69e28['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class tb extends Fm{constructor(_0x350f7f={}){const _0x4f48bc=_0x350f7f['radius']??0x21e1*-0x1+-0x1f2e+0x1*0x410f+0.5,_0x4569f6=_0x350f7f['height']??-0xd8f+0x1b11+-0xd81,_0x3a01a6=_0x350f7f['heightSegm'+'ents']??0x8*0x4cc+0x2*-0x890+-0x43f*0x5,_0x5d3225=_0x350f7f['capSegment'+'s']??0x3db*0x4+-0x17b1+0x859;super(_0x4f48bc,_0x4f48bc,_0x4569f6,_0x3a01a6,_0x5d3225,!(0xe13*-0x2+-0x2e4+0x1*0x1f0b)),_0x350f7f['calculateT'+'angents']&&(this['tangents']=pr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class sb extends la{constructor(_0x4e373a={}){super();const _0x3c902d=_0x4e373a['halfExtent'+'s']??new J(0x205*0x5+-0x153*-0x1+0x2db*-0x4+0.5,0xb79+-0x698+-0x4e1+0.5),_0x4c49ef=_0x4e373a['widthSegme'+'nts']??-0x69*-0x1+-0x1896+0x26*0xa3,_0x355fd9=_0x4e373a['lengthSegm'+'ents']??-0x223*0xd+0x2b*-0x71+0x5*0x95b,_0x16f60d=[],_0xdb702f=[],_0x743496=[],_0x1f402f=[];let _0x3ec04d=0x131*0x1d+0x13ed+-0x367a;for(let _0x137aca=0x1ebd+-0x1*-0x45+-0x1f02;_0x137aca<=_0x4c49ef;_0x137aca++)for(let _0x455e2f=0x12d4+-0x956+-0x97e;_0x455e2f<=_0x355fd9;_0x455e2f++){const _0x167c90=-_0x3c902d['x']+(-0x2570+0x1*-0x2228+-0x729*-0xa)*_0x3c902d['x']*_0x137aca/_0x4c49ef,_0x242a4d=0xaa+0x67*-0x47+0x1be7*0x1,_0x3875c7=-(-_0x3c902d['y']+(-0x1891+0xa*0x347+0x833*-0x1)*_0x3c902d['y']*_0x455e2f/_0x355fd9),_0x1b7e6a=_0x137aca/_0x4c49ef,_0x4e2f3b=_0x455e2f/_0x355fd9;_0x16f60d['push'](_0x167c90,_0x242a4d,_0x3875c7),_0xdb702f['push'](0x5*-0x127+-0x16e4+-0x1e9*-0xf,-0x14c2*0x1+-0x2239*-0x1+-0xd76,-0x129a+-0xb5+0x1*0x134f),_0x743496['push'](_0x1b7e6a,-0x1*0x1edc+0x2b8+-0xb*-0x28f-_0x4e2f3b),_0x137aca<_0x4c49ef&&_0x455e2f<_0x355fd9&&(_0x1f402f['push'](_0x3ec04d+_0x355fd9+(0x2*0x109c+-0x1ead+-0x28a),_0x3ec04d+(0xd*-0x28f+0x1fe5+0x15f),_0x3ec04d),_0x1f402f['push'](_0x3ec04d+_0x355fd9+(0x308+-0x1675*-0x1+-0x197c),_0x3ec04d+_0x355fd9+(-0x1cea+-0xc1*-0x2+0x1b6a),_0x3ec04d+(0x9ba+-0xcf8+0x33f))),_0x3ec04d++;}this['positions']=_0x16f60d,this['normals']=_0xdb702f,this['uvs']=_0x743496,this['uvs1']=_0x743496,this['indices']=_0x1f402f,_0x4e373a['calculateT'+'angents']&&(this['tangents']=pr(_0x16f60d,_0xdb702f,_0x743496,_0x1f402f));}}class ib extends la{constructor(_0x4ccabe={}){super();const _0x285f98=_0x4ccabe['tubeRadius']??0x1d97+0x33e+0x691*-0x5+0.2,_0x194408=_0x4ccabe['ringRadius']??0x10ab+0xd6*0x4+-0x1403+0.3,_0x4f6cca=(_0x4ccabe['sectorAngl'+'e']??0x32+0xc3c+-0xb06)*Y['DEG_TO_RAD'],_0x2d5e09=_0x4ccabe['segments']??0x1bed+-0x2479+0x8aa,_0x161ed1=_0x4ccabe['sides']??0x144c+-0xc0+0x2*-0x9bc,_0x1ef932=[],_0x4880fc=[],_0x338a11=[],_0x1da0d9=[];for(let _0x21749e=-0x1*-0x3c1+0x1ab0+-0x1*0x1e71;_0x21749e<=_0x161ed1;_0x21749e++)for(let _0x44298c=-0x4*-0x112+-0x37f+-0xc9;_0x44298c<=_0x2d5e09;_0x44298c++){const _0x1df29b=Math['cos'](_0x4f6cca*_0x44298c/_0x2d5e09)*(_0x194408+_0x285f98*Math['cos']((0x1a21+0x1c18+-0x3637)*Math['PI']*_0x21749e/_0x161ed1)),_0x2dfc30=Math['sin']((-0xf6+0x2*-0x52b+-0x5a7*-0x2)*Math['PI']*_0x21749e/_0x161ed1)*_0x285f98,_0x6730d1=Math['sin'](_0x4f6cca*_0x44298c/_0x2d5e09)*(_0x194408+_0x285f98*Math['cos']((-0xd4c*-0x2+0x22c1+0x29*-0x17f)*Math['PI']*_0x21749e/_0x161ed1)),_0xb14aca=Math['cos'](_0x4f6cca*_0x44298c/_0x2d5e09)*Math['cos']((-0x17d+-0x237+0x19*0x26)*Math['PI']*_0x21749e/_0x161ed1),_0x3ff414=Math['sin']((0x235e+0xf*0x1c3+0x1*-0x3dc9)*Math['PI']*_0x21749e/_0x161ed1),_0x103fd9=Math['sin'](_0x4f6cca*_0x44298c/_0x2d5e09)*Math['cos']((0x2046*-0x1+-0x36c+-0x4*-0x8ed)*Math['PI']*_0x21749e/_0x161ed1),_0x4fe6ca=_0x21749e/_0x161ed1,_0x37291f=0x2c7*0xb+0xdfc+-0x2c88-_0x44298c/_0x2d5e09;if(_0x1ef932['push'](_0x1df29b,_0x2dfc30,_0x6730d1),_0x4880fc['push'](_0xb14aca,_0x3ff414,_0x103fd9),_0x338a11['push'](_0x4fe6ca,0x19b+-0x2218+0x2*0x103f-_0x37291f),_0x21749e<_0x161ed1&&_0x44298c<_0x2d5e09){const _0x474c7b=_0x21749e*(_0x2d5e09+(0x115c+-0x1e18+0x1*0xcbd))+_0x44298c,_0x43e93b=(_0x21749e+(-0x9e4+-0x79a*0x5+0x2fe7))*(_0x2d5e09+(0x4be*-0x1+-0x236e+0x282d))+_0x44298c,_0x2764b6=_0x21749e*(_0x2d5e09+(-0xa1f*-0x1+0x1d05+-0x2723))+(_0x44298c+(0xcc8+0x1*-0x248+-0xa7f)),_0x32bf8e=(_0x21749e+(-0x6f1+-0x15cb+-0x41b*-0x7))*(_0x2d5e09+(-0x198e+-0x2f9*-0x3+0x47*0x3c))+(_0x44298c+(-0x1*0x1bca+-0x1072+-0x2c3d*-0x1));_0x1da0d9['push'](_0x474c7b,_0x43e93b,_0x2764b6),_0x1da0d9['push'](_0x43e93b,_0x32bf8e,_0x2764b6);}}this['positions']=_0x1ef932,this['normals']=_0x4880fc,this['uvs']=_0x338a11,this['uvs1']=_0x338a11,this['indices']=_0x1da0d9,_0x4ccabe['calculateT'+'angents']&&(this['tangents']=pr(_0x1ef932,_0x4880fc,_0x338a11,_0x1da0d9));}}class rb{constructor(_0x295813,_0x4effbc){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x295813,this['_isClearin'+'gCache']=!(0x2ab+0x2086+-0x2330),this['_precached']=!(0x2*-0xb1f+0xa8a+0x51*0x25),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new Yh(),this['_defaultSt'+'dMatOption'+'Min']=new Yh());const _0x4e2476=new Cy();_0x4effbc['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x4e2476,_0x4effbc,null,[],fa,null),_0x4effbc['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x4effbc,null,Mm,null),_0x295813['on']('destroy:sh'+'ader',_0x1ee8d9=>{this['removeFrom'+'Cache'](_0x1ee8d9);});}['destroy'](){this['clearCache']();}['register'](_0x1ccb31,_0x41a965){this['_generator'+'s']['has'](_0x1ccb31)||this['_generator'+'s']['set'](_0x1ccb31,_0x41a965);}['unregister'](_0x184750){this['_generator'+'s']['has'](_0x184750)&&this['_generator'+'s']['delete'](_0x184750);}['isRegister'+'ed'](_0x31c565){return this['_generator'+'s']['has'](_0x31c565);}['generateSh'+'aderDefini'+'tion'](_0x29b5c1,_0x3df679,_0x5747b5,_0x2936c7){var _0x5028ae,_0x50fd16;let _0x2f9646=this['definition'+'sCache']['get'](_0x5747b5);if(!_0x2f9646){let _0x53716d;(_0x5028ae=_0x2936c7['litOptions'])!=null&&_0x5028ae['lights']&&(_0x53716d=_0x2936c7['litOptions']['lights'],_0x2936c7['litOptions']['lights']=_0x53716d['map'](_0x30d63c=>{const _0x30b1cf=_0x30d63c['clone']?_0x30d63c['clone']():_0x30d63c;return _0x30b1cf['key']=_0x30d63c['key'],_0x30b1cf;})),this['storeNewPr'+'ogram'](_0x3df679,_0x2936c7),(_0x50fd16=_0x2936c7['litOptions'])!=null&&_0x50fd16['lights']&&(_0x2936c7['litOptions']['lights']=_0x53716d),this['_precached']&&M['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x3df679+'\x20key\x20'+_0x5747b5+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x7baea4=this['_device'];_0x2f9646=_0x29b5c1['createShad'+'erDefiniti'+'on'](_0x7baea4,_0x2936c7),_0x2f9646['name']=_0x2f9646['name']??(_0x2936c7['pass']?_0x3df679+'-pass:'+_0x2936c7['pass']:_0x3df679),this['definition'+'sCache']['set'](_0x5747b5,_0x2f9646);}return _0x2f9646;}['getCachedS'+'hader'](_0xba3450){return this['processedC'+'ache']['get'](_0xba3450);}['setCachedS'+'hader'](_0x4c4de7,_0x24c18d){this['processedC'+'ache']['set'](_0x4c4de7,_0x24c18d);}['getProgram'](_0x3beabf,_0x51f110,_0x258b0d,_0x4538b6){const _0x58a00a=this['_generator'+'s']['get'](_0x3beabf);if(!_0x58a00a)return M['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x3beabf),null;const _0x415215=_0x58a00a['generateKe'+'y'](_0x51f110),_0x368c56=ti(_0x415215),_0xe0df6d=_0x258b0d['generateKe'+'y'](this['_device']),_0x38b183=ti(_0xe0df6d),_0x6a8acc=_0x368c56+'#'+_0x38b183;let _0xbddf04=this['getCachedS'+'hader'](_0x6a8acc);if(!_0xbddf04){const _0x436079=this['generateSh'+'aderDefini'+'tion'](_0x58a00a,_0x3beabf,_0x368c56,_0x51f110);M['assert'](_0x436079);let _0x2e0b64='',_0x4cdda0;_0x51f110['pass']!==void(-0x2*0x920+0x9fd*-0x3+0x3037)&&(_0x4cdda0=hi['get'](this['_device'])['getByIndex'](_0x51f110['pass']),_0x2e0b64='-'+_0x4cdda0['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x4538b6,'shaderPassInfo':_0x4cdda0,'definition':_0x436079});const _0x6e6dfb={'name':''+_0x436079['name']+_0x2e0b64+'-proc','attributes':_0x436079['attributes'],'vshader':_0x436079['vshader'],'vincludes':_0x436079['vincludes'],'fincludes':_0x436079['fincludes'],'fshader':_0x436079['fshader'],'processingOptions':_0x258b0d,'shaderLanguage':_0x436079['shaderLang'+'uage'],'meshUniformBufferFormat':_0x436079['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x436079['meshBindGr'+'oupFormat']};_0xbddf04=new ey(this['_device'],_0x6e6dfb),M['call'](()=>{_0xbddf04['_generatio'+'nKey']=_0x415215,_0xbddf04['_processin'+'gKey']=_0xe0df6d;}),this['setCachedS'+'hader'](_0x6a8acc,_0xbddf04);}return _0xbddf04;}['storeNewPr'+'ogram'](_0x2ef74e,_0x1c958f){let _0x6a7d79={};if(_0x2ef74e==='standard'){const _0xfc1ba1=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x1c958f['pass']);for(const _0x515599 in _0x1c958f)(_0x1c958f['hasOwnProp'+'erty'](_0x515599)&&_0xfc1ba1[_0x515599]!==_0x1c958f[_0x515599]||_0x515599==='pass')&&(_0x6a7d79[_0x515599]=_0x1c958f[_0x515599]);for(const _0x4f24f3 in _0x1c958f['litOptions'])_0x6a7d79[_0x4f24f3]=_0x1c958f['litOptions'][_0x4f24f3];}else _0x6a7d79=_0x1c958f;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x2ef74e,'options':_0x6a7d79}));}['dumpProgra'+'ms'](){let _0x1f17f3='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x1f17f3+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][0x1f57+-0x3c*-0x17+-0x24bb]&&(_0x1f17f3+='\x0a\x09'+this['_programsC'+'ollection'][-0x155+-0x2*0x26e+0x631]);for(let _0x144145=-0x1e*0xb8+0x1*0x1557+0x3a;_0x144145<this['_programsC'+'ollection']['length'];++_0x144145)_0x1f17f3+=',\x0a\x09'+this['_programsC'+'ollection'][_0x144145];_0x1f17f3+='\x0a];\x0a',_0x1f17f3+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x1f17f3+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+ja+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+Qg+'\x22)\x0a',_0x1f17f3+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x271b0c=document['createElem'+'ent']('a');_0x271b0c['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x1f17f3)),_0x271b0c['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x271b0c['style']['display']='none',document['body']['appendChil'+'d'](_0x271b0c),_0x271b0c['click'](),document['body']['removeChil'+'d'](_0x271b0c);}['clearCache'](){this['_isClearin'+'gCache']=!(-0x1*-0xe35+0xb57+-0x198c),this['processedC'+'ache']['forEach'](_0x1c3e64=>{_0x1c3e64['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(-0x1990+-0x50f+0x1ea0);}['removeFrom'+'Cache'](_0x56a7b6){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x42a489,_0x4337e7)=>{_0x56a7b6===_0x42a489&&this['processedC'+'ache']['delete'](_0x4337e7);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0xf05058){const _0x198271=hi['get'](this['_device'])['getByIndex'](_0xf05058);return _0xf05058===Fn||_0xf05058===ll||_0x198271['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x2907b5){if(_0x2907b5){const _0x2e3609=new Array(_0x2907b5['length']);for(let _0xfa0262=-0x204e+-0xaa7*0x1+-0x623*-0x7;_0xfa0262<_0x2907b5['length'];_0xfa0262++){if(_0x2907b5[_0xfa0262]['name']==='standard'){const _0x5141b8=_0x2907b5[_0xfa0262]['options'],_0x352fe0=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x5141b8['pass']);for(const _0x292d54 in _0x352fe0)_0x352fe0['hasOwnProp'+'erty'](_0x292d54)&&_0x5141b8[_0x292d54]===void(-0xbb7+0xeb4+-0x2fd)&&(_0x5141b8[_0x292d54]=_0x352fe0[_0x292d54]);}_0x2e3609[_0xfa0262]=this['getProgram'](_0x2907b5[_0xfa0262]['name'],_0x2907b5[_0xfa0262]['options']);}}this['_precached']=!(-0x1cf3+-0x314+0x2007);}}async function ab(){const _0x3ede1e=new Float32Array(-0xf61*-0x1+-0x2c5*-0xb+-0x2dd7),_0x3314ce=new Int32Array(_0x3ede1e['buffer']);let _0x41d3b3=0x21d5+0xb44+-0x1*0x2d19,_0x54bfa8={};self['onmessage']=async _0x20e182=>{const {data:_0x304e7a}=_0x20e182;switch(_0x304e7a['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x143926(_0x304e7a['properties'],_0x304e7a['timeIndex'],_0x304e7a['timeOption']);break;case'releaseSeq'+'Data':_0x348346(_0x304e7a['index']);break;case'releaseAll'+'SeqData':_0x34741d();break;case'destroyWor'+'ker':_0xec817c();break;}};class _0x58b099{constructor(_0x2cdb73=0x664+-0x41*0x89+0x977*0x3,_0x36d1c4=0x21f3*-0x1+-0x1a64+0x3c57,_0x31c697=-0x514+-0xf7*0xd+0x119f,_0x14de9a=-0x1d68*-0x1+0x115*0xd+-0x2b78){this['x']=_0x2cdb73,this['y']=_0x36d1c4,this['z']=_0x31c697,this['w']=_0x14de9a;}['set'](_0x4a9822,_0x119949,_0x4d87d5,_0xe1a869){return this['x']=_0x4a9822,this['y']=_0x119949,this['z']=_0x4d87d5,this['w']=_0xe1a869,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x50615f=this){let _0x5f750e=_0x50615f['length']();return _0x5f750e===-0x211*0x1+-0x644+0x3*0x2c7?(this['x']=this['y']=this['z']=-0x1*0x22de+-0x1296+0x3574,this['w']=0x1af3+-0x1eb8+0x6*0xa1):(_0x5f750e=(0x2d1*0x1+-0x4a2+-0x2*-0xe9)/_0x5f750e,this['x']=_0x50615f['x']*_0x5f750e,this['y']=_0x50615f['y']*_0x5f750e,this['z']=_0x50615f['z']*_0x5f750e,this['w']=_0x50615f['w']*_0x5f750e),this;}['mulScalar'](_0x217865,_0x3bb102=this){return this['x']=_0x3bb102['x']*_0x217865,this['y']=_0x3bb102['y']*_0x217865,this['z']=_0x3bb102['z']*_0x217865,this['w']=_0x3bb102['w']*_0x217865,this;}}const _0x5abf30=_0x1029ea=>{_0x3ede1e[0x54f*0x4+-0x1a75+-0x1*-0x539]=_0x1029ea;const _0x422fef=_0x3314ce[-0x2113+-0x12f7+0x1a05*0x2];let _0x4d01a4=_0x422fef>>-0x2d8*0x1+-0x19a4+-0x414*-0x7&-0xd4ce*0x1+-0xbf46+0x21414,_0x5e57d5=_0x422fef>>-0x10f*-0x20+0x1196+-0x336a&0x1a2c+-0x3d*0x91+0x1060;const _0x5393f8=_0x422fef>>0x11df+-0xd42+-0x486&-0x1d55+0xd45+0x110f;return _0x5393f8<-0x225a*0x1+0x16*-0x2b+0x2673*0x1?_0x4d01a4:_0x5393f8>0x120b*-0x1+0x24a1+0x241*-0x8?(_0x4d01a4|=0x81b*-0x19+-0xa97a+0xf*0x2113,_0x4d01a4|=(_0x5393f8===0x12*0x19b+-0x1*-0x1a4b+-0x3632?-0x41d+-0x17a3+0x2*0xde0:0xb73+-0x3c8+-0x7aa)&&_0x422fef&0xe8a6*0x35+0x7*-0x1d4de2+0x11cf6cf,_0x4d01a4):_0x5393f8<-0x372+-0x1*-0xd6d+-0xb*0xde?(_0x5e57d5|=-0x56e*0x3+-0xab*-0x22+-0x65*-0x4,_0x4d01a4|=(_0x5e57d5>>0x4*-0x1e8+0x82*-0x3+0x998-_0x5393f8)+(_0x5e57d5>>0x2152+-0x2c6*0xd+0x32d-_0x5393f8&-0x2074+0x8*-0x289+0x24b*0x17),_0x4d01a4):(_0x4d01a4|=_0x5393f8-(0x19bb+0x3*0x467+0x4*-0x9a0)<<-0x2f*0xd+-0x12df+0x154c|_0x5e57d5>>0x16b+-0x1573+0x1409,_0x4d01a4+=_0x5e57d5&0x3*0xae6+0x34*0x7f+-0x3a7d,_0x4d01a4);},_0x37f155=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x41caa9=-0x209f+0x119+-0x2*-0xfc3;_0x41caa9<0x73*0x5+-0x1574+0x9b1*0x2;++_0x41caa9)if(!_0x54bfa8['f_rest_'+_0x41caa9])return _0x41caa9;return 0x730+0x1*-0x2342+0x1c3f*0x1;})())]??0x50e*-0x5+-0xc0*0x13+-0x1*-0x2786),_0x143926=(_0x148a20,_0x5b9c19,_0x9ba95f)=>{const _0xa53d7e=!!_0x148a20['time_index'];_0xa53d7e||(_0x148a20['time_index']=new Float32Array(-0x25*-0x101+0x2c4+-0x27e9)),_0x41d3b3+=_0x148a20['x']['length']??0x15cb+-0x26*0x9d+0x183;const _0x65fcbd=Object['keys'](_0x148a20);for(let _0x597dc2=0x51b*-0x7+0x1d5*0x11+0x4*0x126;_0x597dc2<_0x65fcbd['length'];_0x597dc2++){const _0x5960ee=_0x65fcbd[_0x597dc2],_0x2dbb79=_0x148a20[_0x5960ee],_0x1bdd24=_0x54bfa8[_0x5960ee]??new Float32Array(-0x1446+0x1edd*-0x1+0x13*0x2b1);if(!_0xa53d7e&&_0x5960ee==='time_index'){const _0x2f1abe=new Float32Array(_0x41d3b3);_0x2f1abe['fill'](_0x5b9c19),_0x2f1abe['set'](_0x1bdd24,0x4a3+-0x7*0x67+-0xe9*0x2),_0x54bfa8[_0x5960ee]=_0x2f1abe;}else{if(!_0xa53d7e&&_0x2dbb79&&_0x5960ee==='t'){const _0x44f307=new Float32Array(_0x41d3b3);if(_0x44f307['set'](_0x1bdd24,0xe6*0x17+0x289*-0xd+0xc4b),_0x9ba95f){for(let _0x35ee25=_0x1bdd24['length'];_0x35ee25<_0x41d3b3;_0x35ee25++)_0x2dbb79[_0x35ee25-_0x1bdd24['length']]>-(-0x1*0x23d5+-0x4e7+0x28c1)?_0x44f307[_0x35ee25]=_0x2dbb79[_0x35ee25-_0x1bdd24['length']]+_0x9ba95f[(0x1c12*0x1+-0x1*-0x1f5f+0x3b6f*-0x1)*_0x5b9c19]:_0x44f307[_0x35ee25]=_0x2dbb79[_0x35ee25-_0x1bdd24['length']];}_0x54bfa8[_0x5960ee]=_0x44f307;}else{if(_0x2dbb79){const _0x28a560=new Float32Array(_0x41d3b3);_0x28a560['set'](_0x1bdd24,0x25e4*0x1+-0x132c+-0x12b8*0x1),_0x28a560['set'](_0x2dbb79,_0x1bdd24['length']),_0x54bfa8[_0x5960ee]=_0x28a560;}}}}const _0x4aac49={};Object['keys'](_0x54bfa8)['forEach'](_0x1de964=>{_0x4aac49[_0x1de964]=new Float32Array(_0x54bfa8[_0x1de964]['buffer']['slice']());});const _0x382212=Object['keys'](_0x4aac49)['map'](_0x335426=>_0x4aac49[_0x335426]['buffer']),_0xcf71a4=_0x443786(),_0x334094=Object['keys'](_0xcf71a4)['map'](_0x2592a9=>_0xcf71a4[_0x2592a9]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x4aac49,'transformData':_0xcf71a4},_0x382212['concat'](_0x334094));},_0x443786=()=>{const _0x27edc5=_0x54bfa8['x']['length'],_0x5ca9f2=_0x54bfa8['x'],_0x2c48b4=_0x54bfa8['y'],_0x22d8e9=_0x54bfa8['z'],_0x56cefb=_0x54bfa8['scale_0'],_0x49a5ff=_0x54bfa8['scale_1'],_0x5acb4e=_0x54bfa8['scale_2'],_0x1d594f=_0x54bfa8['rot_1'],_0x3f2e2d=_0x54bfa8['rot_2'],_0x3a09a7=_0x54bfa8['rot_3'],_0x1298c0=_0x54bfa8['rot_0'],_0x4a223a=_0x54bfa8['motion_0'],_0x3ca6b1=_0x54bfa8['motion_1'],_0x4572f1=_0x54bfa8['motion_2'],_0x8016e8=_0x54bfa8['t'],_0xc5c0da=_0x54bfa8['t_scale'],_0x5e7daa=_0x54bfa8['time_index'],_0x11707d=_0x54bfa8['f_dc_0'],_0x8f8a6a=_0x54bfa8['f_dc_1'],_0x5eea64=_0x54bfa8['f_dc_2'],_0x10ba26=_0x54bfa8['opacity'],_0x4aa166=(_0x8016e8==null?void(0x236f+0x179b+-0x3b0a):_0x8016e8['length'])>-0x4*-0x625+0x14f*0xd+-0x2997*0x1,_0x5bcb7b=new Float32Array(_0x27edc5*(-0x2df+0xcad+0x1*-0x9cb)),_0x823e53=new Float32Array(_0x27edc5*(-0x20be+-0x4*0x81+0x22c5)),_0x1602c5=new Uint16Array(_0x27edc5*(-0x91+0x219f+-0x210b*0x1)),_0xa5b94=new Float32Array(_0x27edc5*(0x815*0x1+0x162f+0x60d*-0x5));let _0x1a1bb3=null,_0x52cc2e=null,_0x18da43=null,_0x4f4b1c=null;_0x4aa166&&(_0x1a1bb3=new Float32Array(_0x27edc5*(0x994+-0x2*0xea5+0x63*0x33)),_0x52cc2e=new Float32Array(_0x27edc5*(0x1fc3*-0x1+0xecc+0x10fa)),_0x18da43=new Float32Array(_0x27edc5*(0x7*0x3fd+0x60c*-0x2+-0xfd0)),_0x4f4b1c=new Float32Array(_0x27edc5));const _0x4370c4=new _0x58b099(0x3*0x9b6+-0x3*0x60a+0x1*-0xb04,-0x308*-0x8+-0x1738+-0x108,0x1e84+0x3b3*-0x6+0x2c6*-0x3,0x21ab+-0x2*0x371+0x1ac9*-0x1);let _0x1ddf14=-0x4*0x580+0x7ef+0x1*0xe11,_0x54d4df=0x3e+0x2*-0x90e+0x11de,_0x1d9fe4=0x49*-0x3a+0x2fc+0x2*0x6c7,_0x4e264c=-0x10c3*0x1+0x18d*0x1+0xf36,_0x532870=-0x1*0x4f0+-0xb*0x1e7+0x3*0x89f,_0x5c5449=-0x10c3*-0x1+-0x21f0+0x112d,_0x5aa147=!(0xf9*-0xb+0x9d5+0xde);const _0xf50ba=new Float32Array(-0x127f+-0x3*0xa7b+-0x2a1*-0x13),_0x6ae733=new Float32Array(0x25f1+-0xc1b+-0x19d3),_0x271b77=new Uint16Array(_0x27edc5*(-0x4be*0x7+0x30b*-0x5+0x306d)),_0x3309af=-0x1e0a+-0x1040*-0x2+-0x276+0.28209479177387814;for(let _0x668307=0x2*0x1159+-0x123f+-0x1073;_0x668307<_0x27edc5;++_0x668307){const _0x2362db=_0x11707d[_0x668307]*_0x3309af+(-0x32*-0x97+0xd*-0x1a5+-0x81d*0x1+0.5),_0x36c717=_0x8f8a6a[_0x668307]*_0x3309af+(0x5+0xb26+0x3*-0x3b9+0.5),_0x2e08f6=_0x5eea64[_0x668307]*_0x3309af+(0x66a+0x2510+-0x2b7a+0.5),_0x2941df=_0x10ba26[_0x668307];_0x271b77[_0x668307*(-0x1da6+-0xb1b*-0x2+0x35*0x24)+(-0x1*0x148a+0x191c+-0x492)]=_0x5abf30(_0x2362db),_0x271b77[_0x668307*(-0xb85+0x959*0x2+-0x729)+(-0x1ec4+-0x1681+-0x11c2*-0x3)]=_0x5abf30(_0x36c717),_0x271b77[_0x668307*(-0x1216+-0xe18+0x2032)+(-0x1f*-0xb5+-0x6b2*-0x5+0xb*-0x509)]=_0x5abf30(_0x2e08f6),_0x271b77[_0x668307*(-0x156+-0x31c+0x476)+(0x9*0x239+0x156d+-0x296b)]=_0x5abf30(_0x2941df);const _0x1772aa=_0x5ca9f2[_0x668307],_0x485ac1=_0x2c48b4[_0x668307],_0x3a4aad=_0x22d8e9[_0x668307],_0x1a0ed2=Math['max'](_0x56cefb[_0x668307],_0x49a5ff[_0x668307],_0x5acb4e[_0x668307]);if(isFinite(_0x1772aa)&&isFinite(_0x485ac1)&&isFinite(_0x3a4aad)&&isFinite(_0x1a0ed2)){const _0x274160=(-0x1*-0xfb0+0x2446*-0x1+0x1498)*Math['exp'](_0x1a0ed2);_0x5aa147?(_0x5aa147=!(-0x3*0x8b3+-0x37*0x5d+-0x2e15*-0x1),_0x1ddf14=_0x1772aa-_0x274160,_0x54d4df=_0x485ac1-_0x274160,_0x1d9fe4=_0x3a4aad-_0x274160,_0x4e264c=_0x1772aa+_0x274160,_0x532870=_0x485ac1+_0x274160,_0x5c5449=_0x3a4aad+_0x274160):(_0x1ddf14=Math['min'](_0x1ddf14,_0x1772aa-_0x274160),_0x54d4df=Math['min'](_0x54d4df,_0x485ac1-_0x274160),_0x1d9fe4=Math['min'](_0x1d9fe4,_0x3a4aad-_0x274160),_0x4e264c=Math['max'](_0x4e264c,_0x1772aa+_0x274160),_0x532870=Math['max'](_0x532870,_0x485ac1+_0x274160),_0x5c5449=Math['max'](_0x5c5449,_0x3a4aad+_0x274160));}_0x4370c4['set'](_0x1d594f[_0x668307],_0x3f2e2d[_0x668307],_0x3a09a7[_0x668307],_0x1298c0[_0x668307]),_0x4370c4['normalize'](),_0x4370c4['w']<-0x3ae*-0x8+0x1*-0xe62+-0xf0e&&_0x4370c4['mulScalar'](-(0x2637*-0x1+-0x2*0x132a+0x4c8c)),_0x823e53[_0x668307*(0xae6+-0xae*-0x20+-0x20a3)+(0x121*0x16+-0x1d29+0x453)]=_0x5ca9f2[_0x668307],_0x823e53[_0x668307*(-0xf38+-0x713+0x164e)+(-0x1*-0x6fd+-0xec4+0x7c8)]=_0x2c48b4[_0x668307],_0x823e53[_0x668307*(-0xd*0x183+-0x88a+0x1c34)+(0x3*-0x257+0x42f+0x1c*0x1a)]=_0x22d8e9[_0x668307],_0x5bcb7b[_0x668307*(-0x65e*0x5+0x70a*0x1+0x18cf)+(0x1de1+-0x207b+0x29a)]=_0x5ca9f2[_0x668307],_0x5bcb7b[_0x668307*(0xe37+-0x880+-0x5b4)+(-0x1cbe+-0x21c7+0x3e86)]=_0x2c48b4[_0x668307],_0x5bcb7b[_0x668307*(-0x189b*-0x1+-0x1044+-0xa4*0xd)+(0x5f4+0x84f+-0x1*0xe41)]=_0x22d8e9[_0x668307],_0x1602c5[_0x668307*(0x5d*-0xf+-0x5*-0x420+-0xf2a)+(-0x1ac*-0x13+-0x1*-0x252d+-0x44f1)]=_0x5abf30(Math['exp'](_0x56cefb[_0x668307])),_0x1602c5[_0x668307*(-0x78d*-0x5+0x23df*-0x1+-0x1*0x1df)+(0xd1c+-0x13b5*-0x1+-0xaf*0x30)]=_0x5abf30(Math['exp'](_0x49a5ff[_0x668307])),_0x1602c5[_0x668307*(-0xe60+0x3e6*0x7+-0xce7)+(-0x1*0x17ed+0x4*0x68e+0x27*-0xf)]=_0x5abf30(Math['exp'](_0x5acb4e[_0x668307])),_0xa5b94[_0x668307*(0x1*-0x631+-0xd*-0x1d5+-0x119d)+(-0x1fb5+-0xe0a+0x2dbf)]=_0x4370c4['x'],_0xa5b94[_0x668307*(-0x709*-0x2+-0x2591*0x1+0x1782)+(-0x13*-0x1e2+-0x10a0+-0x1325)]=_0x4370c4['y'],_0xa5b94[_0x668307*(-0x266*0x8+0x2697+-0x1364)+(-0xf52*-0x1+0x1*-0x1d59+0x1*0xe09)]=_0x4370c4['z'],_0x4aa166&&_0x1a1bb3&&_0x52cc2e&&_0x18da43&&_0x4f4b1c&&(_0x1a1bb3[_0x668307*(-0x7d2+0x975+-0x1a0)+(0x56*-0x47+0x1e5f+-0x685*0x1)]=_0x4a223a[_0x668307],_0x1a1bb3[_0x668307*(-0x26fd+-0x2e1*-0x5+-0x189b*-0x1)+(-0x4a7+-0xe22*-0x1+-0x97a)]=_0x3ca6b1[_0x668307],_0x1a1bb3[_0x668307*(-0x918+-0xaea*0x2+0x1eef)+(-0x1d70+-0xd*0x2e7+0x432d)]=_0x4572f1[_0x668307],_0x18da43[_0x668307*(0x46b*-0x7+-0xb*0x12a+-0x2bbe*-0x1)+(0x19b1+-0x3b*-0xa7+-0x402e)]=_0x4a223a[_0x668307],_0x18da43[_0x668307*(0x76*-0x4b+0x1*-0x25b7+-0x52a*-0xe)+(-0x4*-0x872+-0xe95*-0x2+-0x3ef1)]=_0x3ca6b1[_0x668307],_0x18da43[_0x668307*(-0xca0+0xa6*-0x19+0x1cd9)+(0x1*-0x2473+-0x24b5+0x5*0xea2)]=_0x4572f1[_0x668307],_0x4f4b1c[_0x668307]=_0xc5c0da?Math['exp'](_0xc5c0da[_0x668307]):-0x11*0x17f+0x76*0x17+0xed5,_0x52cc2e[_0x668307*(0x2*-0x39+-0x25ec+-0x7ad*-0x5)+(-0x972+-0x2*0x994+0x1c9a*0x1)]=_0x8016e8?_0x8016e8[_0x668307]:-0x17*0x4e+0x7f*-0x31+0x1*0x1f51,_0x52cc2e[_0x668307*(-0x13*0x1cd+-0x135f+0x3599*0x1)+(-0x1089+-0x1*-0x250+-0x2*-0x71d)]=_0x4f4b1c[_0x668307]);}_0x5aa147||(_0xf50ba[0x2177+0x7eb+-0x2962]=(_0x1ddf14+_0x4e264c)*(0x30*-0x10+-0x59e+0x44f*0x2+0.5),_0xf50ba[-0x101*0xe+0x2541+0x1*-0x1732]=(_0x54d4df+_0x532870)*(-0x2*0x372+-0x156e*0x1+0x1c52+0.5),_0xf50ba[-0x1877*0x1+0xf8e*0x2+-0x6a3]=(_0x1d9fe4+_0x5c5449)*(-0xbcf+-0x42*0x10+-0x1*-0xfef+0.5),_0x6ae733[0xfc9+-0xc*0x145+-0x8d*0x1]=(_0x4e264c-_0x1ddf14)*(0x12b3*-0x1+0x1*-0x267e+0x3931+0.5),_0x6ae733[0x18ce+0x120d+-0x156d*0x2]=(_0x532870-_0x54d4df)*(-0x2*-0x21+-0x8*-0x2c2+-0x1652+0.5),_0x6ae733[-0xb0f+0x1bbd+-0x10ac]=(_0x5c5449-_0x1d9fe4)*(-0x24ff+-0x272*0xd+0x44c9+0.5));const _0x5f2ce7=_0xafbc9e();let _0x533991={'dataColor':_0x271b77,'center':_0xf50ba,'halfExtents':_0x6ae733,'dataCenters':_0x5bcb7b,'dataPosition':_0x823e53,'dataScale':_0x1602c5,'dataRotation':_0xa5b94,..._0x5f2ce7};return _0x4aa166&&(_0x533991={..._0x533991,'dataMotion':_0x1a1bb3,'dataTime':_0x52cc2e,'motion':_0x18da43,'tScaleArray':_0x4f4b1c,'muT':new Float32Array(_0x8016e8),'timeIndex':new Float32Array(_0x5e7daa)}),_0x533991;},_0x562393=_0x2dd158=>{const _0xa0cd25=[];for(let _0x3c0fd1=-0x20c6+-0x16d7+-0x1*-0x379d;_0x3c0fd1<_0x2dd158;++_0x3c0fd1)_0xa0cd25['push'](_0x54bfa8['f_rest_'+_0x3c0fd1]);return _0xa0cd25;},_0xafbc9e=()=>{const _0x2f88e6=_0x37f155();if(_0x2f88e6<=-0x6*0x70+0x1*0xa13+-0x773*0x1)return{};const _0x5a173f=_0x54bfa8['x']['length'],_0xf73d3d=new Uint32Array(_0x5a173f*(-0x261a+-0x23f6*0x1+-0x4*-0x1285)),_0x1e5b64=new Uint32Array(_0x5a173f*(0x3*-0xeb+-0x1745+0x65*0x42)),_0x4a0aac=new Uint32Array(_0x5a173f*(0xc54*-0x3+0x73c+0x1*0x1dc4)),_0x2c74bf=new Uint32Array(_0x5a173f*(-0x2166+0x1faf+0x1bb)),_0x3e0d89={0x1:0x3,0x2:0x8,0x3:0xf}[_0x2f88e6],_0x4f86a5=_0x562393(_0x3e0d89*(0x265a+0x1e68*0x1+-0x44bf*0x1)),_0x5bc86e=-0x2104+0x17a0+0x1163*0x1,_0x4b879d=-0x5*0x1ee+-0x21e9+0x2*0x17c7,_0x55998b=new Float32Array(0x24f4+-0x1589*0x1+-0x1*0xf6a),_0x4dafdd=new Uint32Array(_0x55998b['buffer']),_0x184389=new Array(_0x3e0d89*(0x4f3*-0x3+-0x5c*0x3b+0x2410))['fill'](0xf2c+0xb6e+-0x2a9*0xa);for(let _0x154a15=0x1840+0x9*-0xcb+0xd*-0x151;_0x154a15<_0x5a173f;++_0x154a15){for(let _0x3b7eed=-0x15*-0xb1+-0x11*-0x18e+-0x28f3;_0x3b7eed<_0x3e0d89;++_0x3b7eed)_0x184389[_0x3b7eed*(-0x31*0xc6+0x2*-0xead+0x4343*0x1)]=_0x4f86a5[_0x3b7eed][_0x154a15],_0x184389[_0x3b7eed*(-0x1199+0x19d6+-0x83a)+(0xfc6+-0x1*0x121f+0x25a)]=_0x4f86a5[_0x3b7eed+_0x3e0d89][_0x154a15],_0x184389[_0x3b7eed*(0x246*-0x9+0x265b+-0x11e2)+(0x1*-0x201d+-0x5*-0x265+0x1426)]=_0x4f86a5[_0x3b7eed+_0x3e0d89*(-0x1d92+0xf10+0xe84)][_0x154a15];let _0x2c2fea=_0x184389[0x1e01+0x1a85+-0x3886];for(let _0x452ab5=0x9*-0x257+0x35f*-0x6+-0x2f3*-0xe;_0x452ab5<_0x3e0d89*(0x10f1+0x4dc*-0x7+0x1116);++_0x452ab5)_0x2c2fea=Math['max'](_0x2c2fea,Math['abs'](_0x184389[_0x452ab5]));if(_0x2c2fea!==0xf*0x251+-0xfad*-0x1+-0x1cd*0x1c){for(let _0x51e45c=-0x2*-0xdee+-0x4c9+-0x1713;_0x51e45c<_0x3e0d89;++_0x51e45c)_0x184389[_0x51e45c*(-0x1810+0x8d7*-0x2+0x29c1)+(0x9*0x327+-0x1439+-0x826)]=Math['max'](0x10ef+-0x1ce2+0x13*0xa1,Math['min'](_0x5bc86e,Math['floor']((_0x184389[_0x51e45c*(-0x242e+-0x4ff*-0x5+0xb36)+(-0x609+0x1*-0x17b7+-0x1dc*-0x10)]/_0x2c2fea*(0xc79+0xdd3+0x1a4c*-0x1+0.5)+(-0x1b8+0x184e+-0x33a*0x7+0.5))*_0x5bc86e+(-0x256e+0x1e8c+0x6e2+0.5)))),_0x184389[_0x51e45c*(-0xd44+0x9*-0x3f3+0x3*0x1046)+(0x3bc+-0x476*0x4+-0xe1d*-0x1)]=Math['max'](0x15ae*-0x1+0x178d+-0x1df,Math['min'](_0x4b879d,Math['floor']((_0x184389[_0x51e45c*(0x7*-0x4f9+-0x731*-0x1+-0x1ba1*-0x1)+(0x93+0xce8+0x5*-0x2b2)]/_0x2c2fea*(0x1c88*-0x1+-0x1bb0+-0x2*-0x1c1c+0.5)+(-0x588*0x3+-0x202c+0x30c4+0.5))*_0x4b879d+(0x1*0x6ad+0x4ab+0xf2*-0xc+0.5)))),_0x184389[_0x51e45c*(-0x16a0+-0x3*-0x4c5+0x215*0x4)+(0x9d0*-0x1+-0x783+0x1155)]=Math['max'](0xc07*-0x2+-0x1*-0x5cb+0x1243,Math['min'](_0x5bc86e,Math['floor']((_0x184389[_0x51e45c*(-0x1024+0xeda*-0x2+0x2ddb)+(-0x20c4+-0xdfa*0x1+-0x110*-0x2c)]/_0x2c2fea*(-0x6*-0x64f+-0xac1*-0x1+-0x309b+0.5)+(0x1fd+0xbbd*-0x2+0x157d*0x1+0.5))*_0x5bc86e+(-0x1*0x2527+-0x1ceb+0x4212+0.5))));_0x55998b[0x1*-0x1b7f+-0x8e+0x1c0d]=_0x2c2fea,_0xf73d3d[_0x154a15*(0x88c+0x880+-0x1108)+(-0x17c6+-0x11d0+0x2996)]=_0x4dafdd[0x1*0x41+-0x15c8+0x1587],_0xf73d3d[_0x154a15*(-0x2e*-0x83+0x681+0x1e07*-0x1)+(-0xdae+0x3b*-0x3e+-0x155*-0x15)]=_0x184389[-0x2136+-0x79a+0x2*0x1468]<<-0x1*0x1df7+0x1a56+0x3b6|_0x184389[0x21e4+0x1565*0x1+-0x3a*0xf4]<<0x22e1+0x417+0x5*-0x7c9|_0x184389[0x129e+0x175d+-0x29f9],_0xf73d3d[_0x154a15*(-0x1fa3+0x2*0x31+0x1f45)+(-0x1dfd+0x16a1+0x75e)]=_0x184389[-0x11b0+0xf9*-0x9+-0x69d*-0x4]<<-0x91d*0x2+-0x2*0xe41+-0x1*-0x2ed1|_0x184389[-0x4*0x516+-0x1d3c+0x3198]<<-0x2*0x9b7+-0x18e3+0x2c5c|_0x184389[-0x535+0x133f*-0x2+-0x8*-0x577],_0xf73d3d[_0x154a15*(0x16*0x187+0x1*0x489+-0x261f)+(-0x123*-0x13+-0x1*0xb35+0xa61*-0x1)]=_0x184389[0x12*-0xdd+-0x4*-0x4bd+0xd9*-0x4]<<-0x9d3*0x3+0x1bb+0x1*0x1bd3|_0x184389[0x1979+-0x84b+-0x1127*0x1]<<0x32b*-0x7+-0x3fd+0x1a35|_0x184389[-0xbfe+-0x51e+-0x449*-0x4],_0x2f88e6>-0x579*0x4+0x17ae+0x1c9*-0x1&&(_0x1e5b64[_0x154a15*(0x1ff3+-0x1775+-0x87a)+(-0x1413+-0x15e0+0x29f3)]=_0x184389[-0x18ca+-0x1a*-0xa6+-0x1*-0x7f7]<<-0x10d*-0x1e+0x5*0x189+-0x271e|_0x184389[-0x198f+0x1fc6+-0x1*0x62d]<<0x18b0+-0x103d+-0x868|_0x184389[-0x1514+-0x1107+0x1313*0x2],_0x1e5b64[_0x154a15*(-0x6*-0x56+0xe2c+0x4*-0x40b)+(-0x1dc5+0x151f+-0x8a7*-0x1)]=_0x184389[-0x1*-0x1a7b+0x5*-0x251+-0xeda]<<-0x1773*0x1+0x452+0x1336|_0x184389[0x3*-0x8c3+0x1*-0x22a1+-0x1*-0x3cf7]<<-0x892*-0x2+-0x2*0xb4+-0xfb1|_0x184389[-0xe5c+0xad6+-0x1ca*-0x2],_0x1e5b64[_0x154a15*(-0x58d*0x7+0x11*-0x9d+0xa*0x4ee)+(0x123+0x5*-0x241+0xa24)]=_0x184389[0x11f6*-0x1+-0x1dbd+0x2fc2*0x1]<<0x1a*0x53+-0x1367*-0x1+-0x1bc0|_0x184389[-0x3*-0x6f2+-0x1*-0x1d1b+-0x31e1]<<0x1*0x395+0x26e3+-0x2a6d|_0x184389[-0x2388+-0x1d2d+0x40c6],_0x1e5b64[_0x154a15*(-0x7cf+-0xa1+-0x874*-0x1)+(-0x2d*-0x8d+0x1cdc+-0x35a2)]=_0x184389[0xd51+0x92c+-0x166b*0x1]<<-0x6*-0x220+-0x39*0x72+0xcb7|_0x184389[0x2555+0x284+-0x27c6]<<-0x24e6+0x1c34*0x1+-0x8bd*-0x1|_0x184389[0x865+-0x716+0x1*-0x13b],_0x2f88e6>0x3c4*-0x9+-0x10f2+-0x4*-0xcb6?(_0x4a0aac[_0x154a15*(0x1b*-0x73+-0xc1+0xce6)+(0x13d6+0x142*-0x5+0x363*-0x4)]=_0x184389[-0x1*-0x591+-0x1*0x508+-0x74]<<0x126d+0xa*0x3be+-0x37c4|_0x184389[0x6*-0x202+0x1a67+-0xe45]<<-0x4fd+0x142*-0x15+-0xe*-0x23f|_0x184389[0x719*-0x2+-0xed2+0x1d1b],_0x4a0aac[_0x154a15*(0xad*0x16+-0x21ea+0x1310)+(-0x2*-0xd3d+-0x12*0x17d+0x51*0x1)]=_0x184389[0xf51+-0xf4*-0x1+-0x102d]<<-0x6b*-0xb+0x57c*-0x5+0x4*0x5ba|_0x184389[0xf6a*0x1+-0x510+0x36b*-0x3]<<-0x5e*0x43+-0x164a+0xf*0x321|_0x184389[0x1958+0x160c+-0x2f4a],_0x4a0aac[_0x154a15*(0x4*0x393+-0x1163+0x31b)+(0x21d0+0x4f*0x17+-0x28e7)]=_0x184389[-0xbcd+-0xb*-0x2a1+-0x1103*0x1]<<0x1ac+-0x20d5+-0x2b*-0xba|_0x184389[0x3*-0x3df+0x13c6+0x2af*-0x3]<<-0x2686+-0x3fb*-0x7+0xab4|_0x184389[0x1343+-0x255e+0x1238],_0x4a0aac[_0x154a15*(-0x3dc+0xc99+-0x8b9)+(0x26e4+-0x4d+-0x134a*0x2)]=_0x184389[0x1b8*0x7+0x1542*-0x1+0x958]<<0x1*0x1ef2+0x1*0xbb7+-0x2a94|_0x184389[0x439+0x6c1*-0x3+-0x7*-0x24f]<<0xab5*-0x2+0xd*-0x2c9+0x39aa|_0x184389[0x5*-0x17e+-0x4*-0x15a+0x22e],_0x2c74bf[_0x154a15*(-0x108e+-0x6*-0x446+0x81*-0x12)+(-0x1*-0x92b+-0xbe2+0x2b7)]=_0x184389[0x40d*0x5+0x1*0x2087+0x118d*-0x3]<<-0x39*0x5f+-0x1*-0x434+0x1108|_0x184389[0x6ed+0xe20+-0x14eb]<<-0x14fe+-0x5d9*0x1+0x1ae2|_0x184389[0x6d5*0x1+-0x5c*-0x5b+-0x2766],_0x2c74bf[_0x154a15*(0xd0b*-0x1+-0xd9*0x1+0xde8)+(0x256+0xc53+0xea8*-0x1)]=_0x184389[-0x1722+0x2d*0x35+-0x1*-0xdf5]<<-0x13a*-0x17+-0x4*-0x2d7+-0xb*0x397|_0x184389[-0x2101+0x10d*0x6+0x2*0xd6c]<<-0x4e1+-0x244e+0x293a|_0x184389[-0x2297+-0x1269+-0x3526*-0x1],_0x2c74bf[_0x154a15*(0xfbd+0x23a*0x9+-0x23c3)+(0x1104+-0xd*-0x1a+-0x1254)]=_0x184389[0x24ba+0x1*-0x1161+-0x1332]<<0x11da+0x2584+-0x3749|_0x184389[0x257*-0x9+-0xd*0x184+0x28eb]<<0x5b0+-0x127a+-0x291*-0x5|_0x184389[-0x4*0x833+-0x9c0+0x2ab5*0x1],_0x2c74bf[_0x154a15*(0x1738+-0xcb3*0x3+0xee5)+(0x1*-0x25d7+-0x10b7+0x3691)]=_0x184389[0x9be*-0x1+-0x10ed+-0x1ad5*-0x1]<<0x1*0x12fb+0x1*-0x1aa7+0x7c1|_0x184389[-0x1165*0x1+0x1834+0x44*-0x19]<<0x150*-0x4+0x20f1+-0x1*0x1ba6|_0x184389[-0x361+0xa7b*-0x1+0x4*0x382]):_0x4a0aac[_0x154a15]=_0x184389[-0x1429+0x2067+-0xc29]<<0x1*0xd76+0x1caa+0x2f*-0xe5|_0x184389[-0xec3+-0x1f56+0x7*0x699]<<0x20d7+-0x229c+-0x74*-0x4|_0x184389[0x212a+-0x2218+-0x1*-0x105]);}}return{'sh1to3Data':_0xf73d3d,'sh4to7Data':_0x1e5b64,'sh8to11Data':_0x4a0aac,'sh12to15Data':_0x2c74bf};},_0x348346=_0x22139a=>{if(!_0x54bfa8['time_index'])return;const _0x282dab=_0x54bfa8['time_index']['findIndex'](_0x5b6706=>_0x5b6706===_0x22139a);let _0x56d34b=_0x54bfa8['time_index']['findIndex']((_0x24cb61,_0x14e063)=>_0x24cb61!==_0x22139a&&_0x14e063>_0x282dab);if(_0x56d34b===-(-0x5c+-0x277*-0xb+-0x6b*0x40)&&_0x282dab===-(0x1b69*0x1+0x206b+-0x3bd3))return;_0x56d34b===-(-0x2*0x707+0xe1f+-0x10)&&_0x282dab!==-(0xefe+-0x32b*0x7+0x730)&&(_0x56d34b=_0x54bfa8['time_index']['length']),_0x41d3b3-=_0x56d34b-_0x282dab;const _0x486c79=Object['keys'](_0x54bfa8);for(let _0x1592b8=0x212b+0x2*0x8f4+0x20b*-0x19;_0x1592b8<_0x486c79['length'];_0x1592b8++){const _0x4bfebb=_0x486c79[_0x1592b8],_0x378cc9=_0x54bfa8[_0x4bfebb];if(_0x378cc9){const _0x6190f3=new Float32Array(_0x41d3b3);_0x282dab>-0x122e+-0x2085+0x32b3?(_0x6190f3['set'](_0x378cc9['subarray'](0xb*-0x2ff+-0x1523+-0xd86*-0x4,_0x282dab),0x4c9*-0x7+0x1bb4+-0x5cb*-0x1),_0x6190f3['set'](_0x378cc9['subarray'](_0x56d34b),_0x282dab)):_0x6190f3['set'](_0x378cc9['subarray'](_0x56d34b),0x1171+-0x1*-0x14c3+-0x6*0x65e),_0x54bfa8[_0x4bfebb]=_0x6190f3;}}},_0x34741d=()=>{const _0x4655d8=Object['keys'](_0x54bfa8);for(let _0x4b81e7=0x32*0xb0+-0x3bb+-0x1ea5;_0x4b81e7<_0x4655d8['length'];_0x4b81e7++){const _0x3666a9=_0x4655d8[_0x4b81e7];_0x54bfa8[_0x3666a9]&&(_0x54bfa8[_0x3666a9]=[]);}},_0xec817c=()=>{_0x54bfa8={},_0x41d3b3=0x17f*-0x7+0xd5*0x1d+-0xda8;};}class nb extends pe{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+ab['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x3fa197,_0x5d8a37,_0x58306f,_0x3410ed=!(-0x21*-0x3b+-0x1247*0x1+0x38f*0x3)){var _0xadb202,_0x2f3608;const _0x563077={};return _0x3fa197['elements'][-0x79e+-0x1ea9+0x2647]['properties']['forEach'](_0x66182=>{_0x563077[_0x66182['name']]=_0x66182['storage'];}),_0x3410ed?(_0xadb202=this['worker'])==null||_0xadb202['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x563077,'timeIndex':_0x5d8a37,'timeOption':_0x58306f},_0x3fa197['elements'][-0x1*-0x1285+-0x104c+0x1*-0x239]['properties']['map'](_0x302bd2=>_0x302bd2['storage']['buffer'])):(_0x2f3608=this['worker'])==null||_0x2f3608['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x563077,'timeIndex':_0x5d8a37,'timeOption':_0x58306f}),new Promise(_0x424b78=>{this['worker']['onmessage']=_0x3c9a2e=>{if(!this['worker'])return;const {data:_0xe83202}=_0x3c9a2e;_0xe83202['type']==='newAppendD'+'ata'&&_0x424b78(_0xe83202);};});}async['releaseSeq'+'Data'](_0x2efe63){var _0x5bb0d1;(_0x5bb0d1=this['worker'])==null||_0x5bb0d1['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x2efe63});}async['releaseAll'+'SeqData'](){var _0x527c67;(_0x527c67=this['worker'])==null||_0x527c67['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x111356;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x111356=this['worker'])==null||_0x111356['terminate'](),this['worker']=null);}}const Ca=new te(),M_=new le(),Gd=new Ie(),I_=new Ie(),ob=new ie(0xf12+-0x10b8+-0x2f*-0x9,-0x2*-0x43e+0x78f+-0x100a,-0x4a8+-0x1b68*-0x1+-0x16c*0x10,-0x22e2+0xaa6+-0x42*-0x5e+0.4),Hd=0xc6c+-0xe11+-0x1*-0x1a5+0.28209479177387814,Wd=0x17bd7*-0x1+-0x5807b+0xa0992;let lb=class{constructor(_0xe5a39b,_0x3f9f19,_0x586aab,_0x3422e9,_0x53fc1f,_0x10aa7b){const _0x51b8cb=_0xe5a39b['getProp']('x'),_0x2f9800=_0xe5a39b['getProp']('y'),_0x13a2bc=_0xe5a39b['getProp']('z'),_0x200306=_0xe5a39b['getProp']('rot_1'),_0x38140a=_0xe5a39b['getProp']('rot_2'),_0x39f3eb=_0xe5a39b['getProp']('rot_3'),_0x5bef7b=_0xe5a39b['getProp']('rot_0'),_0xe9b00d=_0xe5a39b['getProp']('motion_0'),_0x5f554e=_0xe5a39b['getProp']('motion_1'),_0x1d1a96=_0xe5a39b['getProp']('motion_2'),_0x1b3d22=_0xe5a39b['getProp']('scale_0'),_0x22034a=_0xe5a39b['getProp']('scale_1'),_0x4d6074=_0xe5a39b['getProp']('scale_2'),_0x12fd49=_0xe5a39b['getProp']('f_dc_0'),_0x3d5d63=_0xe5a39b['getProp']('f_dc_1'),_0x226143=_0xe5a39b['getProp']('f_dc_2'),_0x559b92=_0xe5a39b['getProp']('opacity');this['read']=_0x198fa8=>{_0x3f9f19&&(_0x3f9f19['x']=_0x51b8cb[_0x198fa8],_0x3f9f19['y']=_0x2f9800[_0x198fa8],_0x3f9f19['z']=_0x13a2bc[_0x198fa8]),_0x586aab&&_0x586aab['set'](_0x200306[_0x198fa8],_0x38140a[_0x198fa8],_0x39f3eb[_0x198fa8],_0x5bef7b[_0x198fa8]),_0x3422e9&&_0x3422e9['set'](Math['exp'](_0x1b3d22[_0x198fa8]),Math['exp'](_0x22034a[_0x198fa8]),Math['exp'](_0x4d6074[_0x198fa8])),_0x10aa7b&&_0xe9b00d&&_0x10aa7b['set'](_0xe9b00d[_0x198fa8],_0x5f554e[_0x198fa8],_0x1d1a96[_0x198fa8]),_0x53fc1f&&_0x53fc1f['set'](0x1d3*0x1+0x5c5*-0x4+-0x1541*-0x1+0.5+_0x12fd49[_0x198fa8]*Hd,0x1c31+-0x1cb*-0x9+-0xb15*0x4+0.5+_0x3d5d63[_0x198fa8]*Hd,0x3f*-0x3b+-0x15e1+0x2466+0.5+_0x226143[_0x198fa8]*Hd,_0x559b92[_0x198fa8]);};}};const D_=(_0x29c7cb,_0x189bee,_0x16e64a)=>{M_['set'](_0x16e64a['x'],_0x16e64a['y'],_0x16e64a['z'],_0x16e64a['w'])['normalize'](),_0x29c7cb['setTRS'](_0x189bee,M_,I['ONE']);};class Dn{constructor(_0x340151,_0x42f3b5=[]){h(this,'elements'),h(this,'numSplats',0x8d*0x21+0x1*0x599+-0x17c6),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x151e41;(_0x151e41=this['dataWorker'])==null||_0x151e41['destroy'](),this['dataWorker']=null;});var _0x4774f1,_0x63e3b5,_0x51d310;this['elements']=_0x340151,this['numSplats']=((_0x4774f1=this['getElement']('vertex'))==null?void(-0xb1e+-0x597*-0x3+0x1*-0x5a7):_0x4774f1['count'])??0x1ced+-0x19*-0xbc+0x2d*-0x10d,this['comments']=_0x42f3b5,this['is4D']=!!((_0x51d310=(_0x63e3b5=this['getElement']('vertex'))==null?void(0x1561*-0x1+0x8c9*0x3+-0x4fa):_0x63e3b5['properties']['find'](_0x46b7b7=>_0x46b7b7['name']==='t'))!=null&&_0x51d310['storage']);}async['appendGSpl'+'atData'](_0x25b011,_0x50d97b,_0x35f2a5){var _0x1c3ae1;let _0x196720=0x434+0x104d+0x1*-0x1481;for(let _0x4c9a28=-0x5cb+0x536*0x3+-0x9d7;_0x4c9a28<_0x35f2a5['length']&&_0x50d97b>_0x35f2a5[_0x4c9a28];_0x4c9a28+=-0x220b+-0x94b+0x2b58)_0x196720=_0x4c9a28/(-0x2156*-0x1+0x14f2+0x3646*-0x1);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x196720),this['dataWorker']||(this['dataWorker']=new nb(),await this['dataWorker']['appendGSpl'+'atData'](this,-0xcbc+0x1520+-0x864,_0x35f2a5));const _0x1e9dbe=this['getElement']('vertex');_0x1e9dbe&&(_0x1e9dbe['count']=this['numSplats']);const _0x3da241=await this['dataWorker']['appendGSpl'+'atData'](_0x25b011,_0x196720,_0x35f2a5,!(0xf6b+-0xa2d+-0x1*0x53e)),_0x24da82=_0x3da241['properties'],_0x3af397=((_0x1c3ae1=this['getElement']('vertex'))==null?void(0x1*0x7a7+0x2*0xa16+-0x1bd3):_0x1c3ae1['properties'])??[];for(const _0x1398c6 in _0x24da82){const _0x4374f3=_0x3af397['find'](_0x3a629b=>_0x3a629b['name']===_0x1398c6);_0x4374f3?_0x4374f3['storage']=_0x24da82[_0x1398c6]:_0x3af397['push']({'type':'float','name':_0x1398c6,'storage':_0x24da82[_0x1398c6],'byteSize':0x4});}this['transformD'+'ata']=_0x3da241['transformD'+'ata'],this['numSplats']=_0x24da82['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x369d47){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x369d47),this['dataWorker']['releaseSeq'+'Data'](_0x369d47),this;}async['releaseAll'+'SeqData'](){var _0x3ac991;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x3ac991=this['dataWorker'])==null||_0x3ac991['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x33ed60,_0x70b59,_0x3289de,_0x309963){D_(Ca,_0x70b59,_0x3289de),Gd['center']['set'](-0x451+0x481+-0x8*0x6,0x3*0x946+0x2576+-0x4148,0xdfa+0x1d60+-0x2b5a),Gd['halfExtent'+'s']['set'](_0x309963['x']*(0x1*-0x21cb+-0x14a1+0x366e),_0x309963['y']*(0x1064+0x209*-0x1+-0xe59),_0x309963['z']*(0x6bc*0x5+0x1*0xac4+0x2*-0x1637)),_0x33ed60['setFromTra'+'nsformedAa'+'bb'](Gd,Ca);}['getProp'](_0x44213d,_0x1c4ba7='vertex'){var _0x4e1b18,_0x2bc40c;return(_0x2bc40c=(_0x4e1b18=this['getElement'](_0x1c4ba7))==null?void(0x4d+0x1df*-0x4+-0x3*-0x265):_0x4e1b18['properties']['find'](_0x216fd0=>_0x216fd0['name']===_0x44213d))==null?void(0x1c4f+0x6c8+-0x1*0x2317):_0x2bc40c['storage'];}['getElement'](_0x3fe6b5){return this['elements']['find'](_0x2f37ce=>_0x2f37ce['name']===_0x3fe6b5);}['addProp'](_0x2f3f7e,_0xeca8ff){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x2f3f7e,'storage':_0xeca8ff,'byteSize':0x4});}['createIter'](_0x59cdec,_0x118fb6,_0x423365,_0x1212b4,_0x37bfaa){return new lb(this,_0x59cdec,_0x118fb6,_0x423365,_0x1212b4,_0x37bfaa);}async['calcAabbAs'+'ync'](_0x59d324,_0x5c1e53){var _0x27c753,_0x1442ad;if((_0x27c753=this['transformD'+'ata'])!=null&&_0x27c753['center']&&((_0x1442ad=this['transformD'+'ata'])!=null&&_0x1442ad['halfExtent'+'s'])){_0x59d324['center']['set'](this['transformD'+'ata']['center'][-0x21c1+-0x6*0x494+0x3d39],this['transformD'+'ata']['center'][0x13c*-0x8+-0x10d*-0x3+0x29*0x2a],this['transformD'+'ata']['center'][-0x67c+-0x1e98+0x2516]),_0x59d324['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][-0x1738+-0x1bd3+0x330b],this['transformD'+'ata']['halfExtent'+'s'][-0x8f*0x3e+-0x505*0x1+0x27a8],this['transformD'+'ata']['halfExtent'+'s'][0xf33+-0x22c1+0x2*0x9c8]);return;}const _0x2cebb6=this['getProp']('x'),_0x2cad7a=this['getProp']('y'),_0x8139b7=this['getProp']('z'),_0x21101d=this['getProp']('scale_0'),_0x3bf87c=this['getProp']('scale_1'),_0x28d1a0=this['getProp']('scale_2'),_0x5c2366=await(_0x5c1e53==null?void(-0x1*-0xffb+-0x10*0x34+-0x1*0xcbb):_0x5c1e53['calcAabb'](this['numSplats'],_0x2cebb6,_0x2cad7a,_0x8139b7,_0x21101d,_0x3bf87c,_0x28d1a0));_0x59d324['center']['set'](_0x5c2366['center'][0x64*0x12+0x198f+0x9*-0x39f],_0x5c2366['center'][-0x10e9+-0x2593+0x367d],_0x5c2366['center'][0x874+0x3af+-0x40b*0x3]),_0x59d324['halfExtent'+'s']['set'](_0x5c2366['halfExtent'+'s'][0x1950+0x1c*0x8b+-0x2884],_0x5c2366['halfExtent'+'s'][0x1d27+0x1fbd+-0x3ce3],_0x5c2366['halfExtent'+'s'][0x1656+0x26*0x16+-0x1998]);}['calcAabb'](_0x255b67,_0x4dea2c){let _0x3abcb7,_0xbc5c7,_0x590130,_0x1d9db7,_0x51454a,_0x5f9dc8,_0x93ccf8=!(0xd*0x41+0x1da7+-0x25*0xe4);const _0x16fc9d=this['getProp']('x'),_0x2df096=this['getProp']('y'),_0xfbb8a9=this['getProp']('z'),_0x1a3316=this['getProp']('scale_0'),_0x9e6319=this['getProp']('scale_1'),_0x22f048=this['getProp']('scale_2');for(let _0x3ab25c=-0x4a6+-0x50b+0x9b1;_0x3ab25c<this['numSplats'];++_0x3ab25c){if(_0x4dea2c&&!_0x4dea2c(_0x3ab25c))continue;const _0x3566af=_0x16fc9d[_0x3ab25c],_0x275c86=_0x2df096[_0x3ab25c],_0x33a4f7=_0xfbb8a9[_0x3ab25c],_0x1fa902=Math['max'](_0x1a3316[_0x3ab25c],_0x9e6319[_0x3ab25c],_0x22f048[_0x3ab25c]);if(!isFinite(_0x3566af)||!isFinite(_0x275c86)||!isFinite(_0x33a4f7)||!isFinite(_0x1fa902))continue;const _0x554199=(0x9f+0xf*-0x9e+-0x1*-0x8a5)*Math['exp'](_0x1fa902);_0x93ccf8?(_0x93ccf8=!(0x56f*-0x4+0x1*0x1e7a+0x8bd*-0x1),_0x3abcb7=_0x3566af-_0x554199,_0xbc5c7=_0x275c86-_0x554199,_0x590130=_0x33a4f7-_0x554199,_0x1d9db7=_0x3566af+_0x554199,_0x51454a=_0x275c86+_0x554199,_0x5f9dc8=_0x33a4f7+_0x554199):(_0x3abcb7=Math['min'](_0x3abcb7,_0x3566af-_0x554199),_0xbc5c7=Math['min'](_0xbc5c7,_0x275c86-_0x554199),_0x590130=Math['min'](_0x590130,_0x33a4f7-_0x554199),_0x1d9db7=Math['max'](_0x1d9db7,_0x3566af+_0x554199),_0x51454a=Math['max'](_0x51454a,_0x275c86+_0x554199),_0x5f9dc8=Math['max'](_0x5f9dc8,_0x33a4f7+_0x554199));}return _0x93ccf8||(_0x255b67['center']['set']((_0x3abcb7+_0x1d9db7)*(0x2cf*0x1+-0x9*-0xfb+-0x2*0x5d1+0.5),(_0xbc5c7+_0x51454a)*(0x13e9+0xb*0x13d+-0x2188+0.5),(_0x590130+_0x5f9dc8)*(-0x226e+-0x1*0x97d+0x2beb+0.5)),_0x255b67['halfExtent'+'s']['set']((_0x1d9db7-_0x3abcb7)*(-0x1370+-0x2c*-0x12+0x1058+0.5),(_0x51454a-_0xbc5c7)*(-0x1*0xb57+0x26*0x103+-0x1b1b+0.5),(_0x5f9dc8-_0x590130)*(-0x2189+0x11af+-0xfda*-0x1+0.5))),!_0x93ccf8;}['yieldToMai'+'n'](){var _0xd21c80;return(_0xd21c80=globalThis['scheduler'])!=null&&_0xd21c80['yield']?globalThis['scheduler']['yield']():new Promise(_0x5cfae6=>{setTimeout(_0x5cfae6,-0x1b6c+0x1*0x15c4+-0x2d4*-0x2);});}['calcAabbEx'+'act'](_0x414b88,_0x224dab){const _0x4a7ff2=new I(),_0x118f4a=new le(),_0x3f1ed6=new I(),_0x4f7e48=this['createIter'](_0x4a7ff2,_0x118f4a,_0x3f1ed6);let _0x228b5f=!(0xfd4+0x17b+-0x114f);for(let _0x553bb7=-0x39*0x87+0x25db+-0x1*0x7cc;_0x553bb7<this['numSplats'];++_0x553bb7)_0x224dab&&!_0x224dab(_0x553bb7)||(_0x4f7e48['read'](_0x553bb7),_0x228b5f?(_0x228b5f=!(0x12a7+-0xd84+-0x522),Dn['calcSplatA'+'abb'](_0x414b88,_0x4a7ff2,_0x118f4a,_0x3f1ed6)):(Dn['calcSplatA'+'abb'](I_,_0x4a7ff2,_0x118f4a,_0x3f1ed6),_0x414b88['add'](I_)));return!_0x228b5f;}async['getCenters'](_0x1aa2b5){const _0x459ddd=this['getProp']('x'),_0x97672b=this['getProp']('y'),_0x148118=this['getProp']('z');for(let _0x3c4c9b=-0x1c5*-0x15+0x24b3*0x1+0x3a*-0x146;_0x3c4c9b<this['numSplats'];++_0x3c4c9b)_0x1aa2b5[_0x3c4c9b*(-0x197c+-0x22a7*-0x1+0x4*-0x24a)+(-0x12e*0x11+0x1fb2+-0xba4)]=_0x459ddd[_0x3c4c9b],_0x1aa2b5[_0x3c4c9b*(0x7e7+-0x18d9+-0x3*-0x5a7)+(-0x1*-0x2009+-0x25f6+-0x21*-0x2e)]=_0x97672b[_0x3c4c9b],_0x1aa2b5[_0x3c4c9b*(-0x14bd+0xaa+0x1416)+(0x1e65+-0x157d+-0x8e6*0x1)]=_0x148118[_0x3c4c9b],_0x3c4c9b%Wd===0xbfb*0x3+-0x419*-0x5+-0x386e&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x1580be;if((_0x1580be=this['transformD'+'ata'])!=null&&_0x1580be['muT'])return this['transformD'+'ata']['muT'];const _0x19bcb5=this['getProp']('t');return _0x19bcb5?new Float32Array(_0x19bcb5):void(-0x2131*-0x1+0x1c27*0x1+0x1eac*-0x2);}async['getTScale'](){const _0x1e414e=this['getProp']('t_scale');if(!_0x1e414e)return;const _0x306ff6=new Float32Array(this['numSplats']);for(let _0x58e50e=0x15dc+-0xa54+-0xb88;_0x58e50e<this['numSplats'];++_0x58e50e)_0x306ff6[_0x58e50e]=Math['exp'](_0x1e414e[_0x58e50e]),_0x58e50e%Wd===-0x1492+0x8ed+0x10f*0xb&&await this['yieldToMai'+'n']();return _0x306ff6;}async['getMotion'](_0x2bacd6){const _0x347440=this['getProp']('motion_0'),_0x3ed870=this['getProp']('motion_1'),_0xcdae60=this['getProp']('motion_2');if(!(!_0x347440||!_0x3ed870||!_0xcdae60)){for(let _0x4c6c0f=-0x1*0x2aa+0x74b*0x1+-0x4a1;_0x4c6c0f<this['numSplats'];++_0x4c6c0f)_0x2bacd6[_0x4c6c0f*(0x1ea1+0x1d5b+0xd*-0x49d)+(-0xbfb+-0x10*0x14+0xd3b)]=_0x347440[_0x4c6c0f],_0x2bacd6[_0x4c6c0f*(0x2*-0x2f+0x3ad*-0x4+0xf15)+(0x1406+0x798+0x1b9d*-0x1)]=_0x3ed870[_0x4c6c0f],_0x2bacd6[_0x4c6c0f*(0xfa5+-0x7b5*-0x5+-0x362b)+(-0x2570+-0x1c55+0x41c7)]=_0xcdae60[_0x4c6c0f],_0x4c6c0f%Wd===-0x168f+0x12bc+0x59*0xb&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x1bd310;if((_0x1bd310=this['transformD'+'ata'])!=null&&_0x1bd310['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x392867=this['getProp']('time_index');if(_0x392867)return new Float32Array(_0x392867);}['calcFocalP'+'oint'](_0x1376d9,_0x1f4dcc){const _0x4e48dc=this['getProp']('x'),_0x5ee674=this['getProp']('y'),_0xdb9d3c=this['getProp']('z'),_0x3b2673=this['getProp']('scale_0'),_0x2a62c8=this['getProp']('scale_1'),_0x2cb197=this['getProp']('scale_2');_0x1376d9['x']=0x22a+-0x3*-0x251+-0x91d,_0x1376d9['y']=-0x248e+-0x382*-0x1+-0xb4*-0x2f,_0x1376d9['z']=-0x57e+0xa6*-0x9+0xb54;let _0x409c16=-0xd*0x103+0x20c2+-0x689*0x3;for(let _0x1f0222=0x151b+-0x1d71+0x61*0x16;_0x1f0222<this['numSplats'];++_0x1f0222){if(_0x1f4dcc&&!_0x1f4dcc(_0x1f0222))continue;const _0x46d369=_0x4e48dc[_0x1f0222],_0x44e1df=_0x5ee674[_0x1f0222],_0x12d999=_0xdb9d3c[_0x1f0222];if(!isFinite(_0x46d369)||!isFinite(_0x44e1df)||!isFinite(_0x12d999))continue;const _0x23b99d=(0x1ece+0x7*-0x11f+-0x16f4)/(-0x22f9*-0x1+-0x9ad*-0x1+-0x2ca5+Math['exp'](Math['max'](_0x3b2673[_0x1f0222],_0x2a62c8[_0x1f0222],_0x2cb197[_0x1f0222])));_0x1376d9['x']+=_0x46d369*_0x23b99d,_0x1376d9['y']+=_0x44e1df*_0x23b99d,_0x1376d9['z']+=_0x12d999*_0x23b99d,_0x409c16+=_0x23b99d;}_0x1376d9['mulScalar']((0x15+-0x12a3+0x128f)/_0x409c16);}['renderWire'+'frameBound'+'s'](_0x11f7d4,_0x7f9bfb){const _0x1dd2db=new I(),_0x5a7fcc=new le(),_0x1b15f1=new I(),_0x429baa=new I(),_0x1267e5=new I(),_0x15ab59=this['createIter'](_0x1dd2db,_0x5a7fcc,_0x1b15f1);for(let _0x3efe00=0x1682+0x26*0xcf+0x353c*-0x1;_0x3efe00<this['numSplats'];++_0x3efe00)_0x15ab59['read'](_0x3efe00),D_(Ca,_0x1dd2db,_0x5a7fcc),Ca['mul2'](_0x7f9bfb,Ca),_0x429baa['set'](_0x1b15f1['x']*-(0x1056+0x37*-0x2+-0xfe6),_0x1b15f1['y']*-(-0xdf4+0xbc8+0x22e),_0x1b15f1['z']*-(0x6*0x191+-0x2551+0x1bed)),_0x1267e5['set'](_0x1b15f1['x']*(-0x1488+0x449*-0x1+-0x1*-0x18d3),_0x1b15f1['y']*(0xa*0x381+0x2013+-0x431b),_0x1b15f1['z']*(0x1*-0x21d7+0x2517+-0x33e)),_0x11f7d4['immediate']['drawWireAl'+'ignedBox'](_0x429baa,_0x1267e5,ob,!(0x44c*0x3+-0x1c96+0x23e*0x7),_0x11f7d4['defaultDra'+'wLayer'],Ca);}get['isCompress'+'ed'](){return!(-0xd02+0x388*0x1+-0x3*-0x329);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x2a2c33=0x1*-0x16e1+0x14d*0x4+0x11ad;_0x2a2c33<-0x1b2+-0x172*-0x11+-0x16b3;++_0x2a2c33)if(!this['getProp']('f_rest_'+_0x2a2c33))return _0x2a2c33;return 0x2216+0x55d*-0x1+-0x1c8c;})())]??0x8a1*-0x2+0xd67*0x1+-0x15*-0x2f;}['calcMorton'+'Order'](){const _0x3d66e3=_0x18b8dc=>{let _0x354832=_0x18b8dc[-0x1*-0x20b1+-0xae0+-0x15d1],_0x384e31=_0x18b8dc[-0x1314+0x1*0x1d96+-0xa82];for(let _0x309034=0x15*-0x199+-0x15e5*0x1+-0x11*-0x343;_0x309034<_0x18b8dc['length'];_0x309034++)_0x18b8dc[_0x309034]<_0x354832&&(_0x354832=_0x18b8dc[_0x309034]),_0x18b8dc[_0x309034]>_0x384e31&&(_0x384e31=_0x18b8dc[_0x309034]);return{'min':_0x354832,'max':_0x384e31};},_0x48401a=(_0x4f209c,_0x1baab2,_0x5c5965)=>{const _0x2ee774=_0x2cdeed=>(_0x2cdeed&=-0x955*0x1+-0x290+-0x6*-0x2a6,_0x2cdeed=(_0x2cdeed^_0x2cdeed<<-0x377*0x1+0x1*-0x2349+0x26d0)&-0xd068ae59+-0x1*-0x1de890023+-0x18fb91*0x9b,_0x2cdeed=(_0x2cdeed^_0x2cdeed<<0xab+0x1d72*-0x1+0x1ccf)&-0x3a232b0+0x441badf+0xf2a0*0x283,_0x2cdeed=(_0x2cdeed^_0x2cdeed<<-0x3*-0x105+-0x25b5+0x22aa)&0x6b*0x7185b+-0x2bf7*0x21d9+0x4af9*0x1421,_0x2cdeed=(_0x2cdeed^_0x2cdeed<<-0x2*0x4ea+0x1*-0x33d+0xd13)&-0x3caaecd*-0x1+-0x2*0x157ce91+0x809809e,_0x2cdeed);return(_0x2ee774(_0x5c5965)<<0x345+-0x11cb+0xe88)+(_0x2ee774(_0x1baab2)<<0x83*-0x1f+-0x309+0x3*0x64d)+_0x2ee774(_0x4f209c);},_0x522dcb=this['getProp']('x'),_0x49aa7c=this['getProp']('y'),_0x841394=this['getProp']('z'),{min:_0xf8f1d4,max:_0x2810cd}=_0x3d66e3(_0x522dcb),{min:_0x1ddb57,max:_0x3608ca}=_0x3d66e3(_0x49aa7c),{min:_0x1e6ff7,max:_0x39261d}=_0x3d66e3(_0x841394),_0x20e5c6=_0xf8f1d4===_0x2810cd?-0x16d*-0x8+-0x17d+-0x9eb*0x1:(-0x1a9b+-0x111b+0x2fb6)/(_0x2810cd-_0xf8f1d4),_0x3824e1=_0x1ddb57===_0x3608ca?0x49*-0x21+0xad7+0x3*-0x7a:(-0x3*0x4f0+-0x1*-0x113b+0x195)/(_0x3608ca-_0x1ddb57),_0x2b475a=_0x1e6ff7===_0x39261d?-0x4*-0x2ef+0x235*0x5+-0x1d*0xc9:(-0x4be*0x5+-0x29*0xe9+0x4107)/(_0x39261d-_0x1e6ff7),_0x29eabc=new Map();for(let _0x277836=0x8*0x4b1+0x5ae+-0x1*0x2b36;_0x277836<this['numSplats'];_0x277836++){const _0x55a90c=Math['min'](-0x2f6+0x1*0x9d9+0xa*-0x4a,Math['floor']((_0x522dcb[_0x277836]-_0xf8f1d4)*_0x20e5c6)),_0x24006d=Math['min'](-0xb96+-0x1c05+-0x2b9a*-0x1,Math['floor']((_0x49aa7c[_0x277836]-_0x1ddb57)*_0x3824e1)),_0x57e768=Math['min'](0x10c9*0x1+0x3ad+-0x57d*0x3,Math['floor']((_0x841394[_0x277836]-_0x1e6ff7)*_0x2b475a)),_0x1e5e27=_0x48401a(_0x55a90c,_0x24006d,_0x57e768),_0xb3fba6=_0x29eabc['get'](_0x1e5e27);_0xb3fba6?_0xb3fba6['push'](_0x277836):_0x29eabc['set'](_0x1e5e27,[_0x277836]);}const _0x146a74=Array['from'](_0x29eabc['keys']())['sort']((_0x287353,_0x1037a3)=>_0x287353-_0x1037a3),_0x47f74f=new Uint32Array(this['numSplats']);let _0x359abd=0x2*0x8e1+0x697+-0x1859;for(let _0x350906=-0x13a6+0x11*-0x11c+0x2682;_0x350906<_0x146a74['length'];++_0x350906){const _0x56f846=_0x29eabc['get'](_0x146a74[_0x350906]);for(let _0x47ca2d=0x12fe+-0x66e+-0xc90;_0x47ca2d<_0x56f846['length'];++_0x47ca2d)_0x47f74f[_0x359abd++]=_0x56f846[_0x47ca2d];}return _0x47f74f;}['reorder'](_0x2907cd){const _0x44fa34=new Map(),_0x27ebf5=_0x251377=>{if(_0x44fa34['has'](_0x251377)){const _0x4ddf7d=_0x44fa34['get'](_0x251377);return _0x44fa34['delete'](_0x251377),_0x4ddf7d;}return new ArrayBuffer(_0x251377);},_0x4f3c98=_0x72d911=>{_0x44fa34['set'](_0x72d911['byteLength'],_0x72d911);},_0xf79517=_0x58f5a4=>{const _0x57c685=new _0x58f5a4['constructo'+'r'](_0x27ebf5(_0x58f5a4['byteLength']));for(let _0x266dbd=-0x3b*0x4c+-0xe1f+0x1fa3;_0x266dbd<_0x2907cd['length'];_0x266dbd++)_0x57c685[_0x266dbd]=_0x58f5a4[_0x2907cd[_0x266dbd]];return _0x4f3c98(_0x58f5a4['buffer']),_0x57c685;};this['elements']['forEach'](_0x52de35=>{_0x52de35['properties']['forEach'](_0x1d61ae=>{_0x1d61ae['storage']&&(_0x1d61ae['storage']=_0xf79517(_0x1d61ae['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function hb(){const _0x5d717c=new Float32Array(0x352*-0xb+0x687*0x4+0xa6b);new Int32Array(_0x5d717c['buffer']);let _0x27097f=0x1*0x3f6+-0x17c1+0x1*0x13cb,_0x5ca339={};self['onmessage']=async _0x2e53fa=>{const {data:_0x5f18aa}=_0x2e53fa;switch(_0x5f18aa['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x466e91(_0x5f18aa['properties'],_0x5f18aa['timeIndex'],_0x5f18aa['timeOption']);break;case'releaseSeq'+'Data':_0xd6b6de(_0x5f18aa['index']);break;case'releaseAll'+'SeqData':_0x505283();break;case'destroyWor'+'ker':_0x50aae4();break;}};const _0x452471=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x2ee034=0x2029+0x6*0x66a+-0x46a5;_0x2ee034<-0x22d+0x128f+0x3*-0x567;++_0x2ee034)if(!_0x5ca339['f_rest_'+_0x2ee034])return _0x2ee034;return 0x653+-0x680+0x5a*0x1;})())]??-0x1ca*0xe+0x237c+-0xa70),_0x466e91=(_0x3723e4,_0x4b87b0,_0x8a8abc)=>{var _0x934130,_0x224f5b;_0x27097f+=(((_0x934130=_0x3723e4['position'])==null?void(-0x19*-0x49+0x12d*-0x1d+0x1af8):_0x934130['length'])??-0xb*-0xb0+0x10db*0x1+0x149*-0x13)/(-0x25c6+-0x39*0x3f+0x8*0x67a),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x27097f,(((_0x224f5b=_0x3723e4['position'])==null?void(0xc*0x12a+0x8*0x7f+-0x2*0x8f8):_0x224f5b['length'])??0x3*0xa6e+-0x260e+0x6c4)/(0x12f8+-0x1d36+0xa41));const _0x1561d8=Object['keys'](_0x3723e4);for(let _0x5b8248=-0x99*-0x41+0x4a7+-0x2b80;_0x5b8248<_0x1561d8['length'];_0x5b8248++){const _0x2c8bd4=_0x1561d8[_0x5b8248],_0x463cae=_0x3723e4[_0x2c8bd4],_0x500e93=_0x5ca339[_0x2c8bd4]??new Float32Array(-0x115+0x908+-0x7f3);if(_0x463cae){let _0x48ee19=null;switch(_0x2c8bd4){case'position':_0x48ee19=new Float32Array(_0x27097f*(-0x20dc+-0x1dd+-0x156*-0x1a));break;case'color_opac'+'ity':_0x48ee19=new Uint16Array(_0x27097f*(0x2473+0x152d+-0x99a*0x6));break;case'scale':_0x48ee19=new Uint16Array(_0x27097f*(0xe7f+0x178f+-0x260b));break;case'motion':_0x48ee19=new Float32Array(_0x27097f*(-0x257f+0x13a5*-0x1+0x3927*0x1));break;case'rotation':_0x48ee19=new Float32Array(_0x27097f*(0x1ab+-0x214+0x6c));break;default:_0x48ee19=new Float32Array(_0x27097f);break;}_0x48ee19['set'](_0x500e93,0x1f04+-0x4c1+0x51*-0x53),_0x48ee19['set'](_0x463cae,_0x500e93['length']),_0x5ca339[_0x2c8bd4]=_0x48ee19;}}const _0x54e5ba={};Object['keys'](_0x5ca339)['forEach'](_0x34d270=>{_0x34d270==='scale'||_0x34d270==='color_opac'+'ity'?_0x54e5ba[_0x34d270]=new Uint16Array(_0x5ca339[_0x34d270]['buffer']['slice']()):_0x54e5ba[_0x34d270]=new Float32Array(_0x5ca339[_0x34d270]['buffer']['slice']());});const _0x41fa64=Object['keys'](_0x54e5ba)['map'](_0x5bb282=>_0x54e5ba[_0x5bb282]['buffer']),_0x599a31=_0x28d53d(),_0x159d8c=Object['keys'](_0x599a31)['map'](_0x4ae9dd=>_0x599a31[_0x4ae9dd]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x54e5ba,'transformData':_0x599a31},_0x41fa64['concat'](_0x159d8c));},_0x28d53d=()=>{const _0x230c45=_0x5ca339['position']['length']/(0x353*-0x7+-0x20c5+0x380d),_0xcae292=_0x5ca339['position'],_0x4d7a15=_0x5ca339['scale'],_0x14e0bc=_0x5ca339['rotation'],_0x577004=_0x5ca339['motion'],_0x8a24f8=_0x5ca339['t'],_0x476b71=_0x5ca339['t_scale'],_0x2619d0=_0x5ca339['time_index'],_0x3a2878=_0x5ca339['color_opac'+'ity'],_0xfc249d=(_0x8a24f8==null?void(-0x2192+-0xa9+0x45*0x7f):_0x8a24f8['length'])>0x1dc1*-0x1+0x2563*0x1+-0x1*0x7a2;let _0x19fdf5=null,_0x4281e5=null,_0x4e81dd=null,_0x4c50e3=null;_0xfc249d&&(_0x4281e5=new Float32Array(_0x230c45*(0xb7a+-0x501+-0x676)),_0x4c50e3=new Float32Array(_0x230c45),_0x19fdf5=new Float32Array(_0x577004['buffer']['slice']()),_0x4e81dd=new Float32Array(_0x577004['buffer']['slice']()));const _0xf424a4=new Float32Array(_0xcae292['buffer']['slice']()),_0x56094c=new Float32Array(_0xcae292['buffer']['slice']()),_0x1aa4d6=new Uint16Array(_0x3a2878['buffer']['slice']()),_0x5b377a=new Uint16Array(_0x4d7a15['buffer']['slice']()),_0xaa0e8d=new Float32Array(_0x14e0bc['buffer']['slice']());for(let _0x40521f=-0x264c*-0x1+-0x771+-0x1edb;_0x40521f<_0x230c45;++_0x40521f)_0xfc249d&&_0x4281e5&&_0x4c50e3&&(_0x4c50e3[_0x40521f]=_0x476b71?Math['exp'](_0x476b71[_0x40521f]):0x2*0x12d6+-0x193+-0x2419,_0x4281e5[_0x40521f*(-0xf8d+-0xb*-0x31f+-0x12c5)+(-0x8ed+-0x1f71+0x285e)]=_0x8a24f8?_0x8a24f8[_0x40521f]:-0x3*-0xa11+0x1a89*0x1+-0x1c5e*0x2,_0x4281e5[_0x40521f*(0x1*-0xd7+-0xc70+0xd4a)+(0x20d+0x1*-0x13ed+0x11e1)]=_0x4c50e3[_0x40521f]);const _0x1c1f4b=_0x159277();let _0x32595c={'dataColor':_0x1aa4d6,'dataCenters':_0x56094c,'dataPosition':_0xf424a4,'dataScale':_0x5b377a,'dataRotation':_0xaa0e8d,..._0x1c1f4b};return _0xfc249d&&(_0x32595c={..._0x32595c,'dataMotion':_0x19fdf5,'dataTime':_0x4281e5,'motion':_0x4e81dd,'tScaleArray':_0x4c50e3,'muT':new Float32Array(_0x8a24f8),'timeIndex':new Float32Array(_0x2619d0)}),_0x32595c;},_0x991f9=_0x4448c1=>{const _0x97f10a=[];for(let _0x47fd3b=0x2*0x124f+0xa09+-0x2ea7;_0x47fd3b<_0x4448c1;++_0x47fd3b)_0x97f10a['push'](_0x5ca339['f_rest_'+_0x47fd3b]);return _0x97f10a;},_0x159277=()=>{const _0x85dd3c=_0x452471();if(_0x85dd3c<=0xfb5+-0x1*0x13c3+0xad*0x6)return{};const _0x97884a=_0x5ca339['x']['length'],_0x3bb214=new Uint32Array(_0x97884a*(-0x1*0xb0+0x2*0x4fd+-0x946)),_0x8f68ff=new Uint32Array(_0x97884a*(0x13b7*-0x1+0x579*0x4+-0x4f*0x7)),_0x3852cf=new Uint32Array(_0x97884a*(-0xb*-0x9d+-0x20ab+-0xcf8*-0x2)),_0x3db02a=new Uint32Array(_0x97884a*(-0x85d+0x2*-0x11ff+-0x1*-0x2c5f)),_0x579988={0x1:0x3,0x2:0x8,0x3:0xf}[_0x85dd3c],_0xee02c6=_0x991f9(_0x579988*(-0x43*-0x1b+0x1033+-0x1*0x1741)),_0x79acd8=0x1*0x11a9+-0x1cd3+0x1329,_0x40a0ba=0x2*0x5e5+0xcc5+-0x1490,_0x515b23=new Float32Array(-0x1603+-0x5*0x3d9+0x2941),_0x38f3ea=new Uint32Array(_0x515b23['buffer']),_0x4a37b5=new Array(_0x579988*(-0x1*-0x176c+-0x2390*-0x1+-0x3af9*0x1))['fill'](0x20c+0x1*0x149+-0x355);for(let _0x1255b5=0x98f*-0x1+0xfc3+-0x2*0x31a;_0x1255b5<_0x97884a;++_0x1255b5){for(let _0x425cf2=0x14d+0x1*-0xcd7+0x2*0x5c5;_0x425cf2<_0x579988;++_0x425cf2)_0x4a37b5[_0x425cf2*(-0x5*0x16c+0x4*-0x23+-0x97*-0xd)]=_0xee02c6[_0x425cf2][_0x1255b5],_0x4a37b5[_0x425cf2*(-0xcd*-0x1c+0x352+0x1*-0x19bb)+(-0x112+-0x6bd*-0x1+0x1d*-0x32)]=_0xee02c6[_0x425cf2+_0x579988][_0x1255b5],_0x4a37b5[_0x425cf2*(0x3e5*-0x2+-0x5*-0x666+-0x233*0xb)+(0x1b80+0x8*-0x196+-0xece)]=_0xee02c6[_0x425cf2+_0x579988*(-0x205c+-0x4d5*0x1+0x2533)][_0x1255b5];let _0x5d9b18=_0x4a37b5[-0x42*-0x62+-0x25bd+0x1f*0x67];for(let _0x51e485=0x9c2+-0xcd6+-0x3*-0x107;_0x51e485<_0x579988*(0x232a+0x521+-0x2848);++_0x51e485)_0x5d9b18=Math['max'](_0x5d9b18,Math['abs'](_0x4a37b5[_0x51e485]));if(_0x5d9b18!==0x1f34*-0x1+-0x1848+0x377c){for(let _0x384694=-0x12f8+0x25fc+-0x1304*0x1;_0x384694<_0x579988;++_0x384694)_0x4a37b5[_0x384694*(0x1*0x1319+-0x13ea+-0xd4*-0x1)+(-0xd8+0x1*0x506+-0x42e)]=Math['max'](-0x15e5*-0x1+-0x469*-0x1+-0x1a4e,Math['min'](_0x79acd8,Math['floor']((_0x4a37b5[_0x384694*(0x2b*-0x5e+-0x1a21+0x6*0x6fd)+(0x175a+0xf66+-0x26c0)]/_0x5d9b18*(-0x2*-0x12a+-0x7f0*-0x1+-0x6*0x1b6+0.5)+(0xd*-0x14f+0xb58+0x5ab+0.5))*_0x79acd8+(-0xe65+0x929+0x53c+0.5)))),_0x4a37b5[_0x384694*(0x1649+-0x1553+-0xf3)+(0x236a+-0x8*-0x4c7+-0x49a1)]=Math['max'](0x1*-0xb54+0x683+0x4d1,Math['min'](_0x40a0ba,Math['floor']((_0x4a37b5[_0x384694*(0x183d+-0x1645+-0x1f5)+(0x1bad*0x1+0x2b*0x6f+-0x2e51)]/_0x5d9b18*(-0x17*-0xc8+0x10d5*0x1+-0x22cd+0.5)+(0x1aae+-0x808+-0x12a6+0.5))*_0x40a0ba+(0x1858+0x67f+0x1*-0x1ed7+0.5)))),_0x4a37b5[_0x384694*(-0x530+0x71b+-0x1e8)+(0x3*-0x85d+0x8e0+0x1039)]=Math['max'](-0xc11*0x3+0x112*-0x18+-0x1*-0x3de3,Math['min'](_0x79acd8,Math['floor']((_0x4a37b5[_0x384694*(-0x1*-0xe09+-0x14c3+0x1*0x6bd)+(0x2e0*0x5+0x1e51+-0x7b*0x5d)]/_0x5d9b18*(-0x25ed+-0xd21*-0x1+0x18cc+0.5)+(0x3cd*0x5+-0x26*0x35+-0xb23*0x1+0.5))*_0x79acd8+(-0x3a8+0x52f+0x17*-0x11+0.5))));_0x515b23[-0x17ab+-0x5*-0x201+-0x6d3*-0x2]=_0x5d9b18,_0x3bb214[_0x1255b5*(0x2435*0x1+0xda*-0x4+-0x1*0x20c9)+(-0x1451*-0x1+-0x1e47+0x9f6)]=_0x38f3ea[-0x69d*0x3+0x3d*0x3d+0x2a7*0x2],_0x3bb214[_0x1255b5*(0x24a5*-0x1+-0x152a+0x39d3)+(0x2*0x4b0+-0x16e3+-0x14*-0xad)]=_0x4a37b5[-0x4b3+0x2632+-0x217f]<<-0xa*-0xd7+0x1ee5+-0x2736|_0x4a37b5[0xb*-0xa6+-0x1*0x25d1+0x7*0x66c]<<-0xbe0*-0x3+0x4d7*-0x4+0x1*-0x1039|_0x4a37b5[0x1991+-0xa3d+-0x35*0x4a],_0x3bb214[_0x1255b5*(-0x5b*-0x1d+-0x8*0x1f6+0x1*0x565)+(0x5*-0x2f3+-0x1f50+-0x3*-0xf5b)]=_0x4a37b5[0x137*-0x3+-0x6b8+0xa60]<<-0xb4+-0x1fc3*-0x1+-0x1efa|_0x4a37b5[-0xc*-0x1e5+-0x1*0x150d+0x1ab*-0x1]<<-0x1f7*-0x13+0x1*-0x212+-0x2338|_0x4a37b5[0x60a+0x1263+-0x30d*0x8],_0x3bb214[_0x1255b5*(0x10eb+-0xabc+0x62b*-0x1)+(-0xb9e+-0x35*-0xa3+-0x161e)]=_0x4a37b5[-0xd*0xc5+0xe90*-0x2+0xd0d*0x3]<<-0x15a+-0x46c*-0x3+-0xbd5|_0x4a37b5[0xf98+-0x1*-0x15e6+-0x8b*0x45]<<0x1*-0x1874+-0x2*-0x873+0x5*0x185|_0x4a37b5[-0x25de+0x2a7*-0x3+0x2ddb],_0x85dd3c>0x101*-0x23+0xb47+0x29*0x95&&(_0x8f68ff[_0x1255b5*(0x12f*-0x6+-0x1*-0x1ed+0x531)+(0x1*-0xee4+0x283*-0x4+0x18f0)]=_0x4a37b5[-0x22a+0x4*-0x107+0x64f]<<0x1*-0x4eb+0x1a88+-0x1588|_0x4a37b5[-0x213d+0x185*-0x3+0x25d6]<<0x1f9+0xd0*-0x30+0x2512|_0x4a37b5[0x12d6+0x15*-0x13+-0x113c],_0x8f68ff[_0x1255b5*(-0x1*-0xb85+-0x669*-0x3+-0x1ebc)+(0x2663+-0x1b2d+-0x13*0x97)]=_0x4a37b5[-0x17d+0x871*-0x3+0xd6e*0x2]<<-0x751*-0x5+-0x20b4+-0x3cc|_0x4a37b5[-0x6*-0x544+0x39b*0x1+-0x2326]<<-0x2ab*-0x7+-0x19c5+0x723|_0x4a37b5[0x2317*-0x1+-0x2*-0x6d1+-0x1*-0x1583],_0x8f68ff[_0x1255b5*(-0x15*0x5+-0x1*0x100+0x16d)+(-0xc42+-0xd2e*-0x1+-0x2*0x75)]=_0x4a37b5[0x109*0x4+0x6*-0x13b+-0x41*-0xd]<<-0xdf*0xb+0x22fd+-0x1953|_0x4a37b5[0xfb5+-0x1489*-0x1+-0x242e]<<0x1*0x183f+0x7*0x557+-0x3d95|_0x4a37b5[0x1*-0x26e7+-0xd68+0x3460*0x1],_0x8f68ff[_0x1255b5*(0x17eb+0x2466+0x167*-0x2b)+(-0x73*0x25+-0x22*0xe+0x62a*0x3)]=_0x4a37b5[-0x1fba+0x1d6d+0x25f]<<-0x2169+-0x3*0x5bb+0xa23*0x5|_0x4a37b5[-0x214d+-0x32*-0x39+0x163e]<<0xa6f+0x1a92*0x1+-0xa6*0x39|_0x4a37b5[0x18*-0xd3+-0xa0c+0x1de8],_0x85dd3c>0x5*-0x683+-0x191d+-0x99d*-0x6?(_0x3852cf[_0x1255b5*(-0xa*0x1b8+-0x13b8+0x24ec)+(-0x8*-0x89+0x1*-0xb75+-0xb*-0xa7)]=_0x4a37b5[-0x29*0x3b+0xa44+0x2*-0x5e]<<-0x231*0x8+0x1*-0x1b72+-0x3*-0xf05|_0x4a37b5[0x1*-0x130d+0x3*-0xb26+0x3495]<<0x158*0x6+0xcb9*-0x1+0x4b4|_0x4a37b5[-0x220f*-0x1+-0x99c*0x4+0x478],_0x3852cf[_0x1255b5*(-0x1*-0x229+-0x5be+0x399)+(-0xf95+-0x97b*0x1+0x1911)]=_0x4a37b5[0x1a1f+-0x189c+-0x21*0xb]<<-0x37*-0xa6+0x1051+-0x33e6|_0x4a37b5[-0x1e1d+0x1e63+-0x2d]<<-0x1b8*0x14+0x10dd*-0x1+0x3348|_0x4a37b5[0xcee+-0x13*0x20b+0x19fd],_0x3852cf[_0x1255b5*(-0x2191+0x1*0x1c3d+-0x4c*-0x12)+(-0x1507+-0x105d*-0x1+-0x4ac*-0x1)]=_0x4a37b5[0x169*0xe+-0x3fc+-0xfa7]<<0x15be+-0x2040+0xa97|_0x4a37b5[-0x6d*-0x1f+0x813+-0x7*0x306]<<-0x11ed*-0x1+-0xd3*0x23+-0x191*-0x7|_0x4a37b5[-0x1*-0x1c48+0x1*0x4fc+-0x171*0x17],_0x3852cf[_0x1255b5*(-0x22e1+0xb99+0x174c)+(0x6b*0xc+0xc2d+-0x112e)]=_0x4a37b5[-0x1fb8+-0x307*-0x7+0xaa5]<<0x12ef+-0x1c40+-0x3*-0x322|_0x4a37b5[-0x1a67+0x67d*0x1+0x1409]<<0x2*-0x6dc+0xf28+-0x165|_0x4a37b5[-0x591+0x2382+0x1c1*-0x11],_0x3db02a[_0x1255b5*(-0xde1+-0xa7e+-0x1863*-0x1)+(-0x1807*-0x1+0xa*0x395+-0x3*0x13f3)]=_0x4a37b5[0xc8d+0x230d+-0x2f79]<<-0x21cc+-0x6ed*0x1+0x6*0x6cd|_0x4a37b5[-0x8f6*-0x4+-0x13ab+-0x100b]<<-0x1a7a+-0x30*0x8e+0x3525|_0x4a37b5[-0x1b1*-0x15+0x1*-0x8ad+-0x1ab5],_0x3db02a[_0x1255b5*(-0x6*0x67e+0xc1+-0x43f*-0x9)+(0x1eb6+-0x25e4+0x72f)]=_0x4a37b5[0xc4*0x33+-0x1f*0x13d+-0x85]<<0x216*0x7+0x2*-0x5ad+-0x32b*0x1|_0x4a37b5[0x1*0x255c+0x1668+-0x3b9f*0x1]<<-0x1093+-0x8*-0x47+0x26*0x61|_0x4a37b5[-0x19b7+-0x1*-0x1ff6+-0x619],_0x3db02a[_0x1255b5*(0x2092+0x1cba+-0x3d48)+(0x151b+0x2609+0xae*-0x57)]=_0x4a37b5[0x185e+0xa36+-0x226d]<<0x12e*-0x10+0x5ef+0xd06|_0x4a37b5[-0x3*-0x9c+-0x5c2*0x4+0x155c*0x1]<<-0xb3c+0x207d+0x16a*-0xf|_0x4a37b5[-0x35*0xb5+0x24f2*0x1+0x16*0x8],_0x3db02a[_0x1255b5*(-0x1c84+0x4a5*0x4+-0x1c*-0x5b)+(-0x18c5+-0x1fdb+0x38a3)]=_0x4a37b5[0x1*0x25bd+0x15f+-0x26f2]<<0x1746+-0xb0f*-0x1+-0x2240*0x1|_0x4a37b5[0xbab+0x1ebf+-0x69*0x67]<<-0x17e7+0x8a0+-0x2*-0x7a9|_0x4a37b5[-0x1367+0x22fc+-0x5*0x315]):_0x3852cf[_0x1255b5]=_0x4a37b5[-0xe7c+0x8e4+0x5ad]<<-0x48d+-0x1*0x7b5+-0x1*-0xc57|_0x4a37b5[0x6d+0x60*0x20+0x41d*-0x3]<<-0x1e80+0x1c9b+0x10*0x1f|_0x4a37b5[-0x8cb*0x3+-0x1*0xd06+-0xd2a*-0x3]);}}return{'sh1to3Data':_0x3bb214,'sh4to7Data':_0x8f68ff,'sh8to11Data':_0x3852cf,'sh12to15Data':_0x3db02a};},_0xd6b6de=_0x49dda2=>{if(!_0x5ca339['time_index'])return;const _0x2954be=_0x5ca339['time_index']['findIndex'](_0x3c5606=>_0x3c5606===_0x49dda2);let _0x43fc37=_0x5ca339['time_index']['findIndex']((_0x28d1ab,_0x1329e2)=>_0x28d1ab!==_0x49dda2&&_0x1329e2>_0x2954be);if(_0x43fc37===-(0x1c*-0xb6+-0x5d*-0x1e+0x903)&&_0x2954be===-(0x873+-0x1*-0x202d+-0x289f))return;_0x43fc37===-(0x6bc+0xe2b+-0x14e6)&&_0x2954be!==-(-0x26da+-0x1564*0x1+-0x3c3f*-0x1)&&(_0x43fc37=_0x5ca339['time_index']['length']),_0x27097f-=_0x43fc37-_0x2954be,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x27097f,_0x43fc37-_0x2954be);const _0x2c5738=Object['keys'](_0x5ca339);for(let _0x55cbe2=0xddf+-0x2d6+-0xb09;_0x55cbe2<_0x2c5738['length'];_0x55cbe2++){const _0x391a2b=_0x2c5738[_0x55cbe2],_0x144db9=_0x5ca339[_0x391a2b];if(_0x144db9){let _0x278c6d=-0x24bc+0x236f+0x14e;switch(_0x391a2b){case'position':_0x278c6d=0xc4f*-0x1+-0x6cf+0x1321;break;case'color_opac'+'ity':_0x278c6d=0x2145+-0xb15+0xb16*-0x2;break;case'scale':_0x278c6d=-0x11bc*0x1+-0xeef*0x1+0x20ae;break;case'motion':_0x278c6d=-0x52d+-0x1745+0x5b1*0x5;break;case'rotation':_0x278c6d=0x2638+-0x1*0x2535+-0x100;break;default:_0x278c6d=0x19*-0x9f+0x19b2+-0xa2a;break;}const _0x2563c5=new Float32Array(_0x27097f*_0x278c6d);_0x2954be>0x112*-0x17+-0x2*-0x38f+0x1180?(_0x2563c5['set'](_0x144db9['subarray'](0x7*-0x439+0x1819+0x6*0xe9,_0x2954be*_0x278c6d),0xcc6*-0x1+0x12d7+-0x611),_0x2563c5['set'](_0x144db9['subarray'](_0x43fc37*_0x278c6d),_0x2954be*_0x278c6d)):_0x2563c5['set'](_0x144db9['subarray'](_0x43fc37*_0x278c6d),0x15ad+-0xdc4+0x51*-0x19),_0x5ca339[_0x391a2b]=_0x2563c5;}}},_0x505283=()=>{const _0x10dc02=Object['keys'](_0x5ca339);for(let _0x1402a1=0x1*0x14d9+-0xd*-0x175+-0xb*0x39e;_0x1402a1<_0x10dc02['length'];_0x1402a1++){const _0x15ae89=_0x10dc02[_0x1402a1];_0x5ca339[_0x15ae89]&&(_0x5ca339[_0x15ae89]=[]);}},_0x50aae4=()=>{_0x5ca339={},_0x27097f=0x1e97+-0xa74+-0x1423;};}class cb extends pe{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+hb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x29f3d6,_0x3f6fc0,_0x3610ae,_0x2d5ae1=!(-0x2695+0x1c6f+-0x1*-0xa27)){var _0x56a2c5,_0x4fb99d;const _0xbfbbf4={};return _0x29f3d6['elements'][0x1ee*0xf+-0x7c1*0x1+-0x1531]['properties']['forEach'](_0x109b92=>{_0xbfbbf4[_0x109b92['name']]=_0x109b92['storage'];}),_0x2d5ae1?(_0x56a2c5=this['worker'])==null||_0x56a2c5['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xbfbbf4,'timeIndex':_0x3f6fc0,'timeOption':_0x3610ae},_0x29f3d6['elements'][0x2*-0x779+0x515*0x7+-0x14a1]['properties']['map'](_0x25dfa8=>_0x25dfa8['storage']['buffer'])):(_0x4fb99d=this['worker'])==null||_0x4fb99d['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xbfbbf4,'timeIndex':_0x3f6fc0,'timeOption':_0x3610ae}),new Promise(_0x857ef0=>{this['worker']['onmessage']=_0x346d37=>{if(!this['worker'])return;const {data:_0x48c7b0}=_0x346d37;_0x48c7b0['type']==='newAppendD'+'ata'&&_0x857ef0(_0x48c7b0);};});}async['releaseSeq'+'Data'](_0x3c7f1c){var _0x4406cc;(_0x4406cc=this['worker'])==null||_0x4406cc['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x3c7f1c});}async['releaseAll'+'SeqData'](){var _0x9b40b1;(_0x9b40b1=this['worker'])==null||_0x9b40b1['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0xa85e7e;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0xa85e7e=this['worker'])==null||_0xa85e7e['terminate'](),this['worker']=null);}}const Xl=new te(),L_=new le(),db=new ie(0x50b+-0x10f7+0xbed,0x23ff+-0xa7d+-0x1981,-0x995*-0x2+0x2201+-0x352b,0xd6*0x22+0x202f+-0x6b*0x91+0.4),R_=0xdf*-0x13a+0x31a*-0x194+0x3e*0x2539;class fb{constructor(_0x5c8897,_0x5d2ce6,_0x3b1781,_0x3baa90,_0x1f978f,_0x40d1a8){const _0x464a20=_0x5c8897['getProp']('position'),_0x5a90d6=_0x5c8897['getProp']('color_opac'+'ity'),_0x53a5a1=_0x5c8897['getProp']('scale'),_0x2f211d=_0x5c8897['getProp']('motion'),_0x2015f4=_0x5c8897['getProp']('rotation');this['read']=_0x52c680=>{_0x5d2ce6&&_0x5d2ce6['set'](_0x464a20[_0x52c680*(0x661+-0x4da+-0x184)+(0xd82+0x1e9+-0xf6b*0x1)],_0x464a20[_0x52c680*(-0x244b+0x1fa1+0x4ad)+(-0x1eac*0x1+-0x23b8+-0x4265*-0x1)],_0x464a20[_0x52c680*(0x241*0xb+0x171b+-0x2fe3)+(0x20ed*0x1+-0xebc+0x5*-0x3a3)]),_0x3b1781&&_0x3b1781['set'](_0x2015f4[_0x52c680*(0x91e*-0x1+0x179d+-0xe7c)+(0x166d+-0x14b*0xe+-0x453)],_0x2015f4[_0x52c680*(-0x1ccf*-0x1+-0xd*-0x24a+0x1*-0x3a8e)+(0x1*-0x1147+0x1e58+-0x58*0x26)],_0x2015f4[_0x52c680*(-0xb76+-0x1198+0x1d11)+(0x611*-0x1+-0xc01+-0x4*-0x485)]),_0x3baa90&&_0x3baa90['set'](_0x53a5a1[_0x52c680*(0x11*-0x1d2+-0x12*-0x71+0x2b*0x89)+(0x6*0x22a+0x1*0x1eb8+-0x4*0xaed)],_0x53a5a1[_0x52c680*(-0x327*-0x7+-0x232f+-0xd21*-0x1)+(0x1c86+0xaae*0x3+-0x3c8f)],_0x53a5a1[_0x52c680*(0x170d+0x211+-0x191b)+(-0x6*0x227+-0xbe5+0x18d1)]),_0x40d1a8&&_0x2f211d&&_0x40d1a8['set'](_0x2f211d[_0x52c680*(-0x10*0x2b+-0x758+-0xa0b*-0x1)+(0x2414+-0x7e7+-0x1c2d*0x1)],_0x2f211d[_0x52c680*(-0x1*0x14d5+0x38b*-0x1+-0x821*-0x3)+(0x1b07+0x1fdd+-0x3ae3)],_0x2f211d[_0x52c680*(-0x24ff+-0x604*0x3+0x370e)+(0x58*-0x4f+0x1*0x23eb+-0x8c1)]),_0x1f978f&&_0x1f978f['set'](_0x5a90d6[_0x52c680*(-0x1617+-0x3c2+0x19dd)+(0x5*0x6e2+-0x1039+-0x1231)],_0x5a90d6[_0x52c680*(-0x1*0x112f+0x2*-0x559+0x1be5)+(-0x51*0x21+0x1b+0xa57)],_0x5a90d6[_0x52c680*(0x1d55+0x37*-0x4f+-0xc58)+(-0x2182+-0x153d+-0x6b*-0x83)],_0x5a90d6[_0x52c680*(0x11e8+0x1bd0+-0x384*0xd)+(-0xaa3+-0x20aa+0x2b50)]);};}}const ub=(_0x26d5de,_0x54eb1e,_0x1cf6f2)=>{L_['set'](_0x1cf6f2['x'],_0x1cf6f2['y'],_0x1cf6f2['z'],_0x1cf6f2['w'])['normalize'](),_0x26d5de['setTRS'](_0x54eb1e,L_,I['ONE']);};class mb{constructor(_0x5e1113,_0xcc30f6=[],_0x11f817=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',-0x3*0x679+-0x4*0x995+-0x39bf*-0x1),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x26118e;(_0x26118e=this['dataWorker'])==null||_0x26118e['destroy'](),this['dataWorker']=null;});var _0x1368dc,_0x5c6402,_0x54b2c4;this['elements']=_0x5e1113,this['properties']=_0x11f817,this['numSplats']=((_0x1368dc=this['getElement']('vertex'))==null?void(0x1*0x11fa+0x1432+0x574*-0x7):_0x1368dc['count'])??-0x68*0x4f+0xe7d*0x1+0x119b,this['comments']=_0xcc30f6,this['is4D']=!!((_0x54b2c4=(_0x5c6402=this['getElement']('vertex'))==null?void(-0x1*-0x9d2+-0x8aa*-0x3+0x8*-0x47a):_0x5c6402['properties']['find'](_0x172d82=>_0x172d82['name']==='t'))!=null&&_0x54b2c4['storage']);}async['appendGSpl'+'atData'](_0x2c0113,_0x269ed6,_0x31a5c0){var _0x48c722;let _0x288631=-0x5*-0x33b+-0xbf*0x14+-0x13b;for(let _0x4acee0=-0x1*-0x5b5+-0x55e+-0x57;_0x4acee0<_0x31a5c0['length']&&_0x269ed6>_0x31a5c0[_0x4acee0];_0x4acee0+=0x1*-0x18c5+-0x5b3*-0x4+0x1fb)_0x288631=_0x4acee0/(0x13e9*0x1+0xad0*-0x2+-0x3f*-0x7);this['dataWorker']||(this['dataWorker']=new cb(),await this['dataWorker']['appendGSpl'+'atData'](this,-0x16cd+-0x366*-0x7+0x17*-0xb,_0x31a5c0));const _0x333d80=this['getElement']('vertex');_0x333d80&&(_0x333d80['count']=this['numSplats']);const _0x57481e=await this['dataWorker']['appendGSpl'+'atData'](_0x2c0113,_0x288631,_0x31a5c0,!(-0x2315+0x12d9+-0x2*-0x81e)),_0x3c5843=_0x57481e['properties'],_0x30769b=((_0x48c722=this['getElement']('vertex'))==null?void(0x236*-0x8+0x615*-0x2+0x1dda):_0x48c722['properties'])??[];for(const _0x269308 in _0x3c5843){const _0x372ee6=_0x30769b['find'](_0x46b3fd=>_0x46b3fd['name']===_0x269308);_0x372ee6?_0x372ee6['storage']=_0x3c5843[_0x269308]:_0x30769b['push']({'type':'float','name':_0x269308,'storage':_0x3c5843[_0x269308],'byteSize':0x4});}this['transformD'+'ata']=_0x57481e['transformD'+'ata'],this['numSplats']=_0x3c5843['position']['length']/(0xd*-0x165+-0xe18+0x80f*0x4);}async['releaseSeq'+'Data'](_0x96622e){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x96622e),this['dataWorker']['releaseSeq'+'Data'](_0x96622e),this;}async['releaseAll'+'SeqData'](){var _0x6d436;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x6d436=this['dataWorker'])==null||_0x6d436['releaseAll'+'SeqData'](),this;}['getProp'](_0x19123d,_0x112c19='vertex'){var _0x504bb4,_0x89b5fd;return(_0x89b5fd=(_0x504bb4=this['getElement'](_0x112c19))==null?void(-0xb98*-0x3+-0x2177*-0x1+-0x443f):_0x504bb4['properties']['find'](_0x107c3e=>_0x107c3e['name']===_0x19123d))==null?void(0xe51*-0x2+-0x797*0x2+0x2bd0):_0x89b5fd['storage'];}['getElement'](_0x24e12f){return this['elements']['find'](_0x53390f=>_0x53390f['name']===_0x24e12f);}['createIter'](_0x4a1b35,_0x59521a,_0x17bf45,_0x593433,_0x333df7){return new fb(this,_0x4a1b35,_0x59521a,_0x17bf45,_0x593433,_0x333df7);}['calcAabb'](_0x5419e1,_0x4fabc1){let _0x40613a=0x8ad*0x1+-0x2*0x676+0x1*0x43f,_0x525af5=0x15a9+-0x12c5*-0x1+0x45*-0x96,_0x273676=0xe65+0xf8f+-0x77d*0x4,_0x1456bd=-0x2583+-0x645*0x4+0x3e97,_0xfbbea3=-0x1d4+0x1*0x117b+-0xfa7*0x1,_0x57cac5=0x1dd5+0x12b1+-0x3086*0x1,_0x1d2c06=!(0x171e+0x2*-0xe9+-0x553*0x4);const _0x28e4fc=this['getProp']('position'),_0x432f01=this['getProp']('scale');for(let _0xc2200a=0x1ca6+0x2284+0x46*-0xe7;_0xc2200a<this['numSplats'];++_0xc2200a){if(_0x4fabc1&&!_0x4fabc1(_0xc2200a))continue;const _0x2cb8b7=_0x28e4fc[_0xc2200a*(0x1312+-0x4a*0x1f+-0xb*0xeb)+(-0x1a20+-0x1434+0x2e54)],_0x3a394a=_0x28e4fc[_0xc2200a*(0x64f+-0x1*-0xeb9+-0x1*0x1505)+(0x4f*-0x47+-0x150a+0x2af4)],_0x5074fc=_0x28e4fc[_0xc2200a*(0x1826*-0x1+-0xfc8+-0x5*-0x7fd)+(-0x75c+0x2232+0x11*-0x194)],_0x5c79fb=Math['max'](_0x432f01[_0xc2200a*(-0x14a+0x1bf*-0x6+-0x43*-0x2d)+(-0x89*-0x2+0x17cb+-0x1*0x18dd)],_0x432f01[_0xc2200a*(-0x3e*-0x1d+-0x265a+0x1f57)+(0x125d+-0xb77*-0x2+-0x294a)],_0x432f01[_0xc2200a*(0x2691+0x1291+0x391f*-0x1)+(-0x669+0x1d9+0x492)]);if(!isFinite(_0x2cb8b7)||!isFinite(_0x3a394a)||!isFinite(_0x5074fc)||!isFinite(_0x5c79fb))continue;const _0x216593=(0x2213*-0x1+-0x142d+0x3642)*Math['exp'](_0x5c79fb);_0x1d2c06?(_0x1d2c06=!(-0x6*-0x62c+-0x3*0x624+-0x129b),_0x40613a=_0x2cb8b7-_0x216593,_0x525af5=_0x3a394a-_0x216593,_0x273676=_0x5074fc-_0x216593,_0x1456bd=_0x2cb8b7+_0x216593,_0xfbbea3=_0x3a394a+_0x216593,_0x57cac5=_0x5074fc+_0x216593):(_0x40613a=Math['min'](_0x40613a,_0x2cb8b7-_0x216593),_0x525af5=Math['min'](_0x525af5,_0x3a394a-_0x216593),_0x273676=Math['min'](_0x273676,_0x5074fc-_0x216593),_0x1456bd=Math['max'](_0x1456bd,_0x2cb8b7+_0x216593),_0xfbbea3=Math['max'](_0xfbbea3,_0x3a394a+_0x216593),_0x57cac5=Math['max'](_0x57cac5,_0x5074fc+_0x216593));}return _0x1d2c06||(_0x5419e1['center']['set']((_0x40613a+_0x1456bd)*(-0x1215+0x23*-0x69+0x2070+0.5),(_0x525af5+_0xfbbea3)*(0x131c*-0x1+0x350*0x6+-0xe*0xe+0.5),(_0x273676+_0x57cac5)*(0x2386+-0x1408+-0xf7e+0.5)),_0x5419e1['halfExtent'+'s']['set']((_0x1456bd-_0x40613a)*(0x133*-0x8+-0x1822+0x21ba+0.5),(_0xfbbea3-_0x525af5)*(-0xb34*-0x2+0x1*-0x1d06+0x69e*0x1+0.5),(_0x57cac5-_0x273676)*(0x73+0x236d+-0x23e0+0.5))),!_0x1d2c06;}['yieldToMai'+'n'](){var _0x2eb258;return(_0x2eb258=globalThis['scheduler'])!=null&&_0x2eb258['yield']?globalThis['scheduler']['yield']():new Promise(_0x269606=>{setTimeout(_0x269606,0x248f+-0x1bd+-0x22d2);});}async['getCenters'](_0x77cb0d){const _0x1f159e=this['getProp']('x'),_0x5bf0f8=this['getProp']('y'),_0x4b5017=this['getProp']('z');for(let _0x1dff4d=0x15be+0x964+-0xa*0x31d;_0x1dff4d<this['numSplats'];++_0x1dff4d)_0x77cb0d[_0x1dff4d*(0x2*-0x135d+-0x5ae+-0x1*-0x2c6b)+(-0x479*-0x3+0x8d3+-0x163e)]=_0x1f159e[_0x1dff4d],_0x77cb0d[_0x1dff4d*(-0x3*0x98f+-0x2687*0x1+-0x4337*-0x1)+(0x564+-0x551*0x4+0xfe1)]=_0x5bf0f8[_0x1dff4d],_0x77cb0d[_0x1dff4d*(0x1062+0x32+-0x1*0x1091)+(0x202c*-0x1+0x3ed+0x1c41)]=_0x4b5017[_0x1dff4d],_0x1dff4d%R_===0x21a7+-0x1c28+0x57f*-0x1&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x12ca4b;if((_0x12ca4b=this['transformD'+'ata'])!=null&&_0x12ca4b['muT'])return this['transformD'+'ata']['muT'];const _0x2fd300=this['getProp']('t');return _0x2fd300?new Float32Array(_0x2fd300):void(0x1858+-0x223*-0xa+-0x2db6*0x1);}async['getTScale'](){const _0x4baddf=this['getProp']('t_scale');if(!_0x4baddf)return;const _0x36a2b7=new Float32Array(this['numSplats']);for(let _0x2a7526=0x1037+0x392+0x5*-0x3f5;_0x2a7526<this['numSplats'];++_0x2a7526)_0x36a2b7[_0x2a7526]=Math['exp'](_0x4baddf[_0x2a7526]),_0x2a7526%R_===-0x196+0x15*0x185+-0x7*0x455&&await this['yieldToMai'+'n']();return _0x36a2b7;}['getMotion'](_0x4f22c9){const _0x5c1641=this['getProp']('motion');_0x5c1641&&new Float32Array(_0x5c1641['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x124732;if((_0x124732=this['transformD'+'ata'])!=null&&_0x124732['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x591eac=this['getProp']('time_index');if(_0x591eac)return new Float32Array(_0x591eac);}['calcFocalP'+'oint'](_0x5c3be4,_0x35b419){const _0x56e7f4=this['getProp']('position'),_0x3ffd7b=this['getProp']('scale');_0x5c3be4['x']=0x222f+-0x11ef+0x1*-0x1040,_0x5c3be4['y']=-0xdb5*-0x2+-0x26*0x84+0xb6*-0xb,_0x5c3be4['z']=-0x177+-0x131*0x17+-0x1cde*-0x1;let _0x6f9ce=-0x119b+0x10c3*0x1+0xd8;for(let _0x38c45c=0x5*0x651+-0x408+-0x1b8d;_0x38c45c<this['numSplats'];++_0x38c45c){if(_0x35b419&&!_0x35b419(_0x38c45c))continue;const _0x3e2805=_0x56e7f4[_0x38c45c*(0x35*-0x67+-0x4db+0x5*0x53d)+(-0x15e9+-0xf4e+-0x7*-0x551)],_0x20db7c=_0x56e7f4[_0x38c45c*(-0x1f6*-0x12+-0x499+0xf58*-0x2)+(-0x14e8+-0x38*-0x8a+-0x1*0x947)],_0x5d861e=_0x56e7f4[_0x38c45c*(0x781+-0x1*-0x1bf+-0x5*0x1d9)+(0x30e+-0x78b*0x1+-0x47f*-0x1)];if(!isFinite(_0x3e2805)||!isFinite(_0x20db7c)||!isFinite(_0x5d861e))continue;const _0x325e27=(0x14dc+0x23f4+-0x1*0x38cf)/(-0x76f+0x1e34+0x5b1*-0x4+Math['max'](_0x3ffd7b[_0x38c45c*(0x1*0xc2f+-0x2480+0x1854)+(-0x6a8+0x1765+-0x10bd)],_0x3ffd7b[_0x38c45c*(-0x38a*-0x1+0x2a3+-0x62a)+(0x1a0a+-0xfbe+0x20f*-0x5)],_0x3ffd7b[_0x38c45c*(-0x221f*-0x1+-0x919+-0x1903)+(-0x1b7f*-0x1+-0xaf+0x1*-0x1ace)]));_0x5c3be4['x']+=_0x3e2805*_0x325e27,_0x5c3be4['y']+=_0x20db7c*_0x325e27,_0x5c3be4['z']+=_0x5d861e*_0x325e27,_0x6f9ce+=_0x325e27;}_0x5c3be4['mulScalar']((-0x101*-0x20+-0x3b*0x3b+-0x1286)/_0x6f9ce);}['renderWire'+'frameBound'+'s'](_0x2490c6,_0x32d911){const _0x40bd67=new I(),_0x2e2d90=new le(),_0x4548a7=new I(),_0x42c76f=new I(),_0xbdd0eb=new I(),_0xdba7c6=this['createIter'](_0x40bd67,_0x2e2d90,_0x4548a7);for(let _0x63afa8=0x7fa+0x1*-0x1917+0x111d;_0x63afa8<this['numSplats'];++_0x63afa8)_0xdba7c6['read'](_0x63afa8),ub(Xl,_0x40bd67,_0x2e2d90),Xl['mul2'](_0x32d911,Xl),_0x42c76f['set'](_0x4548a7['x']*-(-0x1028+0x1ff9+-0xfcf),_0x4548a7['y']*-(-0xedb+0x1*-0x246d+-0x41*-0xca),_0x4548a7['z']*-(-0x1c7c+0x731+-0x13*-0x11f)),_0xbdd0eb['set'](_0x4548a7['x']*(0x186d+-0x23f+-0x21*0xac),_0x4548a7['y']*(0x696+-0x18*-0x6+-0x724),_0x4548a7['z']*(0x7*-0x16c+0x12bf+0x8c9*-0x1)),_0x2490c6['immediate']['drawWireAl'+'ignedBox'](_0x42c76f,_0xbdd0eb,db,!(-0x205f+0xed9+-0x8c3*-0x2),_0x2490c6['defaultDra'+'wLayer'],Xl);}get['isCompress'+'ed'](){return!(-0xe3*0xf+0x976*0x1+0x29*0x18);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x43c6db=0x2*0xd87+0x2*-0xe+-0x1af2;_0x43c6db<-0x2690*-0x1+-0x29c+-0x23c7*0x1;++_0x43c6db)if(!this['getProp']('f_rest_'+_0x43c6db))return _0x43c6db;return-0x149b+0x56*-0x40+0x2a48;})())]??0x9d1*0x3+0x1*-0xfa1+-0x3a*0x3d;}['calcMorton'+'Order'](){const _0x531366=_0x42eb26=>{let _0x37cd12=_0x42eb26[0x3d3*0x1+0x1e79+-0x224c],_0x411cbb=_0x42eb26[0x1c25+0x4*-0x779+0x95*0x3];for(let _0xb9b32d=-0x6e*0x22+-0x1050+0x3*0xa4f;_0xb9b32d<_0x42eb26['length'];_0xb9b32d++)_0x42eb26[_0xb9b32d]<_0x37cd12&&(_0x37cd12=_0x42eb26[_0xb9b32d]),_0x42eb26[_0xb9b32d]>_0x411cbb&&(_0x411cbb=_0x42eb26[_0xb9b32d]);return{'min':_0x37cd12,'max':_0x411cbb};},_0x14811d=(_0xbd3e7d,_0x1c201b,_0x2feba7)=>{const _0x3ccb98=_0x497774=>(_0x497774&=0x1bcb*-0x1+0x335+0x1c95,_0x497774=(_0x497774^_0x497774<<0x2*0xc1f+0xfc4+-0x27f2)&-0x14580f7f3+-0xd49f132e+0x319200c20,_0x497774=(_0x497774^_0x497774<<0x9*-0x2a8+0x29e*-0xa+0x321c)&-0x3dfc3df+-0x139581b+-0x81a0c09*-0x1,_0x497774=(_0x497774^_0x497774<<0x1cd7+-0x1c31+-0x1*0xa2)&0x34da2fd+-0x4f37968+-0x30f2*-0x188f,_0x497774=(_0x497774^_0x497774<<0x1232+-0xde2*0x1+-0x44e)&0x87c43*0x1a5+-0x777c57+-0x1456d*0x36b,_0x497774);return(_0x3ccb98(_0x2feba7)<<-0x9*-0x2b6+-0x2406+0xba2)+(_0x3ccb98(_0x1c201b)<<0xdc4*0x1+0x2b*-0x2e+-0x609)+_0x3ccb98(_0xbd3e7d);},_0x187073=this['getProp']('x'),_0xc4f99f=this['getProp']('y'),_0x2f65f8=this['getProp']('z'),{min:_0x57d19d,max:_0xddf231}=_0x531366(_0x187073),{min:_0x443c1c,max:_0x42ea98}=_0x531366(_0xc4f99f),{min:_0x171584,max:_0x35b9be}=_0x531366(_0x2f65f8),_0x4d2740=_0x57d19d===_0xddf231?0x1a0+0x11be+-0x135e:(0x853*-0x1+0x1*-0x59f+0x11f2)/(_0xddf231-_0x57d19d),_0x1ed3be=_0x443c1c===_0x42ea98?-0x13ac+0x1b2b+-0x77f*0x1:(0x47b+-0x9*0xed+0x7da)/(_0x42ea98-_0x443c1c),_0xfb6937=_0x171584===_0x35b9be?-0xde0+0x4a5*0x5+-0x1*0x959:(-0x1029+0x120a+0x21f)/(_0x35b9be-_0x171584),_0x2fb64f=new Map();for(let _0x1b6d50=-0x1fdf+0x1*-0x1c8b+0x3c6a*0x1;_0x1b6d50<this['numSplats'];_0x1b6d50++){const _0x25d11d=Math['min'](-0x2*0x369+0x1e0+-0x7*-0x147,Math['floor']((_0x187073[_0x1b6d50]-_0x57d19d)*_0x4d2740)),_0x2056a7=Math['min'](-0x96+0x104b*0x2+-0x1c01,Math['floor']((_0xc4f99f[_0x1b6d50]-_0x443c1c)*_0x1ed3be)),_0x2fc978=Math['min'](0x712*0x3+-0xb*-0x17f+0x4*-0x86b,Math['floor']((_0x2f65f8[_0x1b6d50]-_0x171584)*_0xfb6937)),_0x5b783d=_0x14811d(_0x25d11d,_0x2056a7,_0x2fc978),_0x29632c=_0x2fb64f['get'](_0x5b783d);_0x29632c?_0x29632c['push'](_0x1b6d50):_0x2fb64f['set'](_0x5b783d,[_0x1b6d50]);}const _0x3a98c3=Array['from'](_0x2fb64f['keys']())['sort']((_0x346b75,_0x4f781a)=>_0x346b75-_0x4f781a),_0x5857d5=new Uint32Array(this['numSplats']);let _0x47aa14=0x611*0x1+0x2564+0x1bd*-0x19;for(let _0x474d6b=0x137*0x13+-0x22c*0x4+-0xb*0x14f;_0x474d6b<_0x3a98c3['length'];++_0x474d6b){const _0x4a5107=_0x2fb64f['get'](_0x3a98c3[_0x474d6b]);for(let _0x56c78a=0xcd7+-0x19b8+0xce1;_0x56c78a<_0x4a5107['length'];++_0x56c78a)_0x5857d5[_0x47aa14++]=_0x4a5107[_0x56c78a];}return _0x5857d5;}['reorder'](_0x5dce2b){const _0x1dc31d=new Map(),_0x5141df=_0x34fad0=>{if(_0x1dc31d['has'](_0x34fad0)){const _0x56a92b=_0x1dc31d['get'](_0x34fad0);return _0x1dc31d['delete'](_0x34fad0),_0x56a92b;}return new ArrayBuffer(_0x34fad0);},_0x1f2d36=_0x593556=>{_0x1dc31d['set'](_0x593556['byteLength'],_0x593556);},_0x4ffe52=_0x36c25d=>{const _0x2fd90a=new _0x36c25d['constructo'+'r'](_0x5141df(_0x36c25d['byteLength']));for(let _0x36779c=0x1129+-0x2f4+-0x1*0xe35;_0x36779c<_0x5dce2b['length'];_0x36779c++)_0x2fd90a[_0x36779c]=_0x36c25d[_0x5dce2b[_0x36779c]];return _0x1f2d36(_0x36c25d['buffer']),_0x2fd90a;};this['elements']['forEach'](_0x1ac660=>{_0x1ac660['properties']['forEach'](_0xfe4d6a=>{_0xfe4d6a['storage']&&(_0xfe4d6a['storage']=_0x4ffe52(_0xfe4d6a['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const pb='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',_b='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),gb='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',Sb='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),yb='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),vb='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),xb=(_0x4efe4f,_0x3cab56)=>{for(const _0x59fb4a in _0x3cab56)_0x4efe4f['resolve'](_0x59fb4a)['setValue'](_0x3cab56[_0x59fb4a]);};class Tb extends fs{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x1317a8;(_0x1317a8=this['executeCal'+'lback'])==null||_0x1317a8['call'](this);}}const O_=new te(),Yn=new I();class wb{constructor(_0x1abde0,_0x543a64){h(this,'prevDir',new I()),h(this,'updateMode','enable'),(this['device']=_0x1abde0,this['gsplatInst'+'ance']=_0x543a64);const {resource:_0x2863ff}=_0x543a64,_0x1dac7d=new Map(Ce['get'](_0x1abde0,_0x1abde0['isWebGPU']?'wgsl':'glsl'));this['shader']=Ut['createShad'+'er'](_0x1abde0,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':pb,'fragmentGLSL':_b,'vertexWGSL':gb,'fragmentWGSL':Sb,'vertexIncludes':_0x1dac7d,'fragmentIncludes':_0x1dac7d,'fragmentDefines':new Map([['SH_BANDS',_0x2863ff['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Pe}}),this['texture']=_0x2863ff['createText'+'ure']('centroids',Oe,new J(-0x9f*-0x35+0x2504+0x1*-0x45af,0x4b*0x45+-0x49*-0x63+0x1639*-0x2)),this['renderTarg'+'et']=new vt({'colorBuffer':this['texture'],'depth':!(0x17*0x1ab+0x9*-0xd3+-0x59*0x59)}),this['renderPass']=new Tb(_0x1abde0),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(-0x461*-0x1+0x1*0x15b1+0xd09*-0x2),this['quadRender']=new jh(this['shader']);const {material:_0x1cc9e7}=_0x543a64;_0x1cc9e7['setDefine']('SH_BANDS','0');const {shaderChunks:_0x504b60}=_0x1cc9e7;_0x504b60['glsl']['set']('gsplatSogs'+'ColorVS',yb),_0x504b60['wgsl']['set']('gsplatSogs'+'ColorVS',vb),_0x1cc9e7['update'](),_0x1abde0['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x472ec1}=this,{material:_0xfe8fce}=_0x472ec1;_0xfe8fce['setDefine']('SH_BANDS',_0x472ec1['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x2e4c55}=_0xfe8fce;_0x2e4c55['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x2e4c55['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0xfe8fce['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x4c4544,_0x196c78){const {prevDir:_0x265529,updateMode:_0x9828a3}=this;if(_0x9828a3==='disable'||(O_['invert'](_0x196c78),O_['transformV'+'ector'](_0x4c4544['forward'],Yn),Yn['normalize'](),_0x9828a3==='enable'&&Yn['equalsAppr'+'ox'](_0x265529,0x9a4+-0x22f9+0x1955+0.001)))return;_0x265529['copy'](Yn);const _0xd40b3c=()=>{const {device:_0x316f31}=this,{sh_centroids:_0x11a7e6,meta:_0x2683b6}=this['gsplatInst'+'ance']['resource']['gsplatData'];xb(_0x316f31['scope'],{'dir':Yn['toArray'](),'centroids':_0x11a7e6,'shN_mins':_0x2683b6['shN']['mins'],'shN_maxs':_0x2683b6['shN']['maxs']}),_0x316f31['setCullMod'+'e'](xt),_0x316f31['setDepthSt'+'ate'](Kt['NODEPTH']),_0x316f31['setStencil'+'State'](null,null),_0x316f31['setBlendSt'+'ate'](Ct['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0xd40b3c,this['renderPass']['render']();}}const Eb='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),Ab='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),dn=-0xbd0+-0x2225+-0x389*-0xd+0.28209479177387814,yi=_0xb4150d=>_0xb4150d['read'](0x1fc7+-0x2029+0x62,0xb1*0x2f+-0x75d+-0xc91*0x2,_0xb4150d['width'],_0xb4150d['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(0x112*-0x11+-0x15b8+0x27ea)}),bb=(_0x1b377e,_0x3cbd24)=>{for(const _0x26ee82 in _0x3cbd24)_0x1b377e['resolve'](_0x26ee82)['setValue'](_0x3cbd24[_0x26ee82]);};class Cb{constructor(_0x4cf499,_0x52ec97,_0x36c886,_0x110b07,_0x5d50a7,_0x336ba0){const _0x65cda3=(_0x245978,_0x3fe245,_0x467ffc)=>_0x245978*(0xe6*-0x12+0x12*0x71+0x83b-_0x467ffc)+_0x3fe245*_0x467ffc,{meta:_0x30522b}=_0x4cf499,{means:_0x46d1d7,scales:_0xc68a83,sh0:_0x5da7a5,shN:_0x383106}=_0x30522b,_0x202b79=_0x52ec97&&_0x4cf499['means_l']['_levels'][0x1c90+-0x12f0+-0x268*0x4],_0x42ad25=_0x52ec97&&_0x4cf499['means_u']['_levels'][0x1b20+-0x24e6+-0x12*-0x8b],_0x5ab6f7=_0x36c886&&_0x4cf499['quats']['_levels'][-0xedc*-0x2+-0x2243*-0x1+-0x3ffb],_0x86e98c=_0x110b07&&_0x4cf499['scales']['_levels'][0x2*-0x11bb+0x2446+-0xd0],_0x28573c=_0x5d50a7&&_0x4cf499['sh0']['_levels'][0x21*-0xa9+-0x88c+0x1e55],_0x687613=_0x336ba0&&_0x4cf499['sh_labels']['_levels'][-0x23fe+-0x70d*-0x1+0xef*0x1f],_0x534750=_0x336ba0&&_0x4cf499['sh_centroi'+'ds']['_levels'][-0x1795+0xc39+0xb5c],_0x40cdfa=(0x1*0x5e6+0x2*0xcd4+-0x7e3*0x4)/Math['sqrt'](0x211f*-0x1+0xbfc+0x1525);this['read']=_0x8e8620=>{if(_0x52ec97){const _0x5a9f9b=_0x65cda3(_0x46d1d7['mins'][-0x232b+-0x104*-0x1+0x2227],_0x46d1d7['maxs'][0x493*-0x8+-0x480+0x838*0x5],((_0x42ad25[_0x8e8620*(-0x24bd*0x1+0x1*0x1a9f+-0x1*-0xa22)+(-0x23*-0x6b+-0x389+-0xb18)]<<0xaf*-0x16+-0x1c1e+0x2b30)+_0x202b79[_0x8e8620*(-0x387*-0x4+0x1*0x25f+-0x34b*0x5)+(-0xa4*-0x3c+-0x9e*0x22+-0x1174*0x1)])/(-0x1345f+-0x18abf+0x3bf1d)),_0x50470c=_0x65cda3(_0x46d1d7['mins'][0x1849+-0x61d+-0x122b],_0x46d1d7['maxs'][0x14a4+0x1167*-0x1+0xc*-0x45],((_0x42ad25[_0x8e8620*(0x37*-0x25+0x875+0x7e*-0x1)+(0x5f*0x23+-0x1264+-0x8*-0xad)]<<0x139d+0x1*-0x62d+-0x23c*0x6)+_0x202b79[_0x8e8620*(-0x153d+0x4f9+0x1048)+(0x2*-0x903+0x1701+-0x1a*0x31)])/(0x1180f+0x19d6d+0x1*-0x1b57d)),_0x109379=_0x65cda3(_0x46d1d7['mins'][-0x18e*0x1+0x15fe+-0x146e],_0x46d1d7['maxs'][0x1*-0x1cf1+-0x7*0x125+-0x39*-0xa6],((_0x42ad25[_0x8e8620*(0x4cd+0x1*-0x1bff+0xb9b*0x2)+(-0x261e+-0x93f+0x43*0xb5)]<<0x1077+0x9fa*0x1+-0x1a69)+_0x202b79[_0x8e8620*(0x838+-0x11*0x29+-0x57b)+(-0x1*0x246b+0x6ff*-0x5+0x4768)])/(-0x5f9*0x19+-0x1c471+0x11deb*0x3));_0x52ec97['x']=Math['sign'](_0x5a9f9b)*(Math['exp'](Math['abs'](_0x5a9f9b))-(-0xa46+-0xb*0x329+0x2d0a)),_0x52ec97['y']=Math['sign'](_0x50470c)*(Math['exp'](Math['abs'](_0x50470c))-(-0x18*0x11c+0x162+0x193f*0x1)),_0x52ec97['z']=Math['sign'](_0x109379)*(Math['exp'](Math['abs'](_0x109379))-(0xf*0xa2+-0x4f*0x71+0x1962));}if(_0x36c886){const _0xe07425=(_0x5ab6f7[_0x8e8620*(-0x79*0x2b+0x24b7+-0x1060)+(0x1855+-0x1e49+0x2fa*0x2)]/(-0x62b+-0x617*-0x1+0x113)-(-0x179*0x1+0x1b0a+-0x1991+0.5))*_0x40cdfa,_0x470363=(_0x5ab6f7[_0x8e8620*(-0x214b+-0x91b*0x3+-0xc20*-0x5)+(-0x1c42*0x1+0x83*-0xd+0xda*0x29)]/(-0x14e+0x1a*-0xdd+0x23*0xb5)-(0x3e*0x15+-0x29*0x6b+-0x5*-0x269+0.5))*_0x40cdfa,_0x5160ac=(_0x5ab6f7[_0x8e8620*(-0x1403+0xb6*-0xf+-0x51*-0x61)+(0x33f*0x1+-0x882+-0x47*-0x13)]/(0xf16*0x1+0x983+-0x179a)-(-0xf31+0x4*-0x46c+0x20e1+0.5))*_0x40cdfa,_0x4545b9=Math['sqrt'](Math['max'](0x1*0x565+-0x269a+-0x2135*-0x1,0x14eb+0x16*-0x27+-0x1190-(_0xe07425*_0xe07425+_0x470363*_0x470363+_0x5160ac*_0x5160ac)));switch(_0x5ab6f7[_0x8e8620*(0x1*0x1d+-0x361*0xa+-0x4b*-0x73)+(-0x1*0x329+0x38*0x22+-0x444)]-(0x1807+-0x2*0xb62+0x47*-0x1)){case 0x786+-0x1cb*0x5+-0x7b*-0x3:_0x36c886['set'](_0xe07425,_0x470363,_0x5160ac,_0x4545b9);break;case 0x1d61+0x1319+0x1*-0x3079:_0x36c886['set'](_0x4545b9,_0x470363,_0x5160ac,_0xe07425);break;case 0x4*-0x13c+-0x354+0x846*0x1:_0x36c886['set'](_0x470363,_0x4545b9,_0x5160ac,_0xe07425);break;case 0x53c*0x1+-0x15bc+0x1*0x1083:_0x36c886['set'](_0x470363,_0x5160ac,_0x4545b9,_0xe07425);break;}}if(_0x110b07){const _0x236daa=_0x65cda3(_0xc68a83['mins'][-0x1*-0x1bce+-0x4*-0x36b+-0x14bd*0x2],_0xc68a83['maxs'][-0x8c5*0x3+0x252c+0x39f*-0x3],_0x86e98c[_0x8e8620*(-0x1*-0x1423+0x53f+0x2*-0xcaf)+(0x6b*-0x11+0x7ab*-0x2+0x1671)]/(0x7ab+-0x109d*0x1+-0x5*-0x1fd)),_0x5dd6f7=_0x65cda3(_0xc68a83['mins'][-0x22cd*-0x1+0xc6+-0x2392],_0xc68a83['maxs'][0x1d1b+0x3*0x543+-0x2ce3],_0x86e98c[_0x8e8620*(-0x13a4+0x2593+-0x11eb)+(0x1c*-0x47+0xc*0x1fa+-0xff3)]/(0x1*-0x8dd+-0x695*-0x1+0x347)),_0x4f4031=_0x65cda3(_0xc68a83['mins'][-0xa44+0x10d2+-0x68c],_0xc68a83['maxs'][0x45f*0x3+0x1bf9+-0x2914],_0x86e98c[_0x8e8620*(-0x2c7*-0x7+-0x403*-0x7+-0x2f82)+(0x1*0xdeb+0x1*-0x24d7+0x16ee)]/(0x1788+-0x7*0xc0+-0x1149));_0x110b07['set'](_0x236daa,_0x5dd6f7,_0x4f4031);}if(_0x5d50a7){const _0x36ae67=_0x65cda3(_0x5da7a5['mins'][0x2*-0x1055+0x2*-0xbbd+0x3824],_0x5da7a5['maxs'][0x207c+-0x1b1+-0x1ecb*0x1],_0x28573c[_0x8e8620*(-0x27*0xc7+-0x1*-0x1f10+-0xbb)+(0x61f*0x3+-0x3*-0x46f+-0xa8e*0x3)]/(0x129a*-0x2+-0x2b1+0x28e4)),_0x4a364d=_0x65cda3(_0x5da7a5['mins'][0x1f42+0x1b*0x15e+-0x442b],_0x5da7a5['maxs'][0xae7+0xcdd*-0x2+0xed4],_0x28573c[_0x8e8620*(-0x1*-0x10b1+-0x1948+-0x1*-0x89b)+(-0x1ca0+0x152+0x1b4f*0x1)]/(0xd52+-0x86e+0x1*-0x3e5)),_0x3118da=_0x65cda3(_0x5da7a5['mins'][-0xe68+-0x14f6+-0x8*-0x46c],_0x5da7a5['maxs'][0x1ac4+-0x7ad+-0x1315],_0x28573c[_0x8e8620*(0xce*-0x25+-0xd26+0x2af0)+(0x1*-0xec3+-0x51*-0x36+-0x251)]/(0x89f*0x1+-0x25a4+-0x781*-0x4)),_0x4604ce=_0x65cda3(_0x5da7a5['mins'][-0x16e*0x11+0x3be*0x5+0x59b],_0x5da7a5['maxs'][0xbac*-0x2+-0x1f69+0x36c4],_0x28573c[_0x8e8620*(-0x732+-0x1ff6*0x1+-0x1*-0x272c)+(-0x55*-0x8+-0xe9*0x25+0x3*0xa58)]/(-0x18e0+0x26df+-0xd00));_0x5d50a7['set'](-0xc*-0xc8+-0x24f7*0x1+-0x7*-0x3f1+0.5+_0x36ae67*dn,-0x1820+-0x8*0xd9+-0x2*-0xf74+0.5+_0x4a364d*dn,-0x17f*-0x3+0x1c*-0x10d+0x18ef+0.5+_0x3118da*dn,(-0x2122+0x1b12+0x611)/(0x5c6+0xf31+0x14f6*-0x1+Math['exp'](-_0x4604ce)));}if(_0x336ba0){const _0x131522=_0x687613[_0x8e8620*(-0xaed*-0x3+0x53*0x55+0x3c52*-0x1)+(0x10a9*0x2+-0x4d5+-0x1c7d)]+(_0x687613[_0x8e8620*(-0x185a+0x15b1*0x1+0x89*0x5)+(-0x12*0x8b+-0x18cd+0x8a5*0x4)]<<0x5b9+-0x39*0xd+-0x2cc),_0x193bda=_0x131522%(0x2015*-0x1+0x157*-0x17+0x3f26)*(0x1343+0x1f5a+0x328e*-0x1),_0x342f82=Math['floor'](_0x131522/(0xc9f+0x144f+-0x20ae));for(let _0x213513=-0x4*0x9a+0xc5*-0x25+-0x1d1*-0x11;_0x213513<-0x1*0x16bd+0xa*0x13f+0xa4a;++_0x213513)for(let _0x3d49ee=-0x2600+-0x20bd+0xc7*0x5b;_0x3d49ee<0x66d+-0xc45+0x5e7;++_0x3d49ee)_0x336ba0[_0x213513*(-0xba0+0x9*0x21e+-0x75f)+_0x3d49ee]=_0x65cda3(_0x383106['mins'],_0x383106['maxs'],_0x534750[(_0x193bda+_0x3d49ee)*(0x1cb5*0x1+0xef9+-0x2baa)+_0x213513+_0x342f82*_0x4cf499['sh_centroi'+'ds']['width']*(0xac*-0x39+-0x1607+0x3c57)]/(0x243*0x6+-0x77*0x4a+-0x25*-0x97));}};}}class Pb{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x27c718,_0x21aa39,_0x5523da,_0x47241f,_0x280a5f,_0x2ae9ff,_0x3a320d,_0x22dfb2;(_0x27c718=this['means_l'])==null||_0x27c718['destroy'](),(_0x21aa39=this['means_u'])==null||_0x21aa39['destroy'](),(_0x5523da=this['quats'])==null||_0x5523da['destroy'](),(_0x47241f=this['scales'])==null||_0x47241f['destroy'](),(_0x280a5f=this['sh0'])==null||_0x280a5f['destroy'](),(_0x2ae9ff=this['sh_centroi'+'ds'])==null||_0x2ae9ff['destroy'](),(_0x3a320d=this['sh_labels'])==null||_0x3a320d['destroy'](),(_0x22dfb2=this['packedText'+'ure'])==null||_0x22dfb2['destroy']();}['createIter'](_0x2190dc,_0x57452b,_0x3db9e4,_0x14f00c,_0x1d6cae){return new Cb(this,_0x2190dc,_0x57452b,_0x3db9e4,_0x14f00c,_0x1d6cae);}['calcAabb'](_0x5c923c){const {mins:_0x564826,maxs:_0x14af56}=this['meta']['means'],_0x156d4e=_0x5b3ee1=>Math['sign'](_0x5b3ee1)*(Math['exp'](Math['abs'](_0x5b3ee1))-(0x1*0x1bea+-0x4f*-0x9+-0x7ac*0x4));_0x5c923c['center']['set']((_0x156d4e(_0x564826[0x2394+0x5a1+0x3bf*-0xb])+_0x156d4e(_0x14af56[-0x119*-0x1+0x216e+-0x2287]))*(-0x2172+-0xa1e*0x2+0x35ae+0.5),(_0x156d4e(_0x564826[-0x24b0+-0x44a+0x28fb])+_0x156d4e(_0x14af56[-0xe6d*0x2+-0x5d8*-0x1+0x2b*0x89]))*(0x25db+-0xed2+-0x1709+0.5),(_0x156d4e(_0x564826[-0x5*0x3fb+-0x2*-0x18a+0x10d5])+_0x156d4e(_0x14af56[0x616+-0x7*0x23d+-0x5*-0x1eb]))*(0xda2+-0x3b*0x17+0x4f*-0x1b+0.5)),_0x5c923c['halfExtent'+'s']['set']((_0x156d4e(_0x14af56[0x1819+-0x2f5+0x21*-0xa4])-_0x156d4e(_0x564826[0x16*0xb9+-0xea0+-0x1*0x146]))*(-0x1628+0x83*0x9+0x118d*0x1+0.5),(_0x156d4e(_0x14af56[-0x175*0x16+-0x7c*-0x41+0x15*0x7])-_0x156d4e(_0x564826[-0xf5a+0x1152+0x1*-0x1f7]))*(-0x2c*0xb1+-0xc6+0x79*0x42+0.5),(_0x156d4e(_0x14af56[0x605+0x16f*-0xa+-0x1*-0x853])-_0x156d4e(_0x564826[-0x19*0x11c+0x1b9*-0x3+0x20e9]))*(-0x1*0xd7d+0xb1*0x16+-0x1b9+0.5));}['getCenters'](_0x3b4577){const {meta:_0x175c93,means_l:_0x464d13,means_u:_0x569f35,numSplats:_0x221554}=this,{means:_0x3a4927}=_0x175c93,_0x4b2678=new Uint32Array(_0x569f35['_levels'][0x9fa+0x1*0x8fd+0x3cb*-0x5]['buffer']),_0x3ba767=new Uint32Array(_0x464d13['_levels'][-0xe02*-0x1+-0x75*-0x34+-0x25c6]['buffer']),_0x30bab9=_0x3a4927['mins'][-0x1ce+-0x8f+0x25d]/(0x113c8+0x585f+0xd85*-0x8),_0x1a590d=_0x3a4927['mins'][0xb5*-0x37+-0x1da+-0x413*-0xa]/(0x8d55+0xe*0x487+0x3348),_0x53cd5e=_0x3a4927['mins'][0x11c3*0x1+-0x7db+-0xe*0xb5]/(0xf033*-0x2+0xa31b+0x23d4a),_0x21031c=_0x3a4927['maxs'][-0x1*-0xee7+-0x115b+-0x4*-0x9d]/(0x1cd74+-0x1bfce+0xf259),_0x5cb1e3=_0x3a4927['maxs'][0x2d*0xc9+0x2*-0x35f+-0x1c96]/(0x1bbf4+-0x1*-0xc89+-0xc87e),_0x3b520a=_0x3a4927['maxs'][-0x9bb*-0x1+-0x574+-0x445]/(-0x54b*-0x5e+0x12799*0x1+-0x21924);for(let _0x10bf3=-0x43a+-0x2*0x53a+0xeae;_0x10bf3<_0x221554;_0x10bf3++){const _0xa536bd=_0x10bf3,_0x2e9253=_0x4b2678[_0xa536bd],_0x348816=_0x3ba767[_0xa536bd],_0x4c8275=_0x2e9253<<-0xe*-0x1bf+-0xdaf*-0x2+-0xcf2*0x4&-0xb6e+-0x1*0x26e8+-0xb*-0x1bc2|_0x348816&-0x2f*0x67+-0xd*0x44+0x175c,_0x4f73b1=_0x2e9253&-0x11be7+0x29e9*0x9+-0xb8d*-0xe|_0x348816>>>0x64e+-0x10c6+0xa80&-0x3d6*0x1+-0x145c+0x1931,_0x48900e=_0x2e9253>>>-0x242*-0x1+-0x8bb+0x681&-0x7*0x3baf+-0x1a5f6+0x1*0x446bf|_0x348816>>>0xa0f+0x1d67+0x2*-0x13b3&0x3*-0x66e+-0x17c1+-0x6*-0x757,_0x14ce77=_0x30bab9*(-0x5e69+0x1*-0x200f+0x17e77-_0x4c8275)+_0x21031c*_0x4c8275,_0x19b4f2=_0x1a590d*(0x19908+0x10084+0xd*-0x1f81-_0x4f73b1)+_0x5cb1e3*_0x4f73b1,_0x43f317=_0x53cd5e*(-0x20b+0x1bac0+-0xd5*0xde-_0x48900e)+_0x3b520a*_0x48900e,_0x2ad474=_0x14ce77<-0x1460+-0x1*0x26fa+0x1*0x3b5a?-_0x14ce77:_0x14ce77,_0x3b546d=_0x19b4f2<-0x102d+-0xbc7+0x1bf4?-_0x19b4f2:_0x19b4f2,_0x4222b5=_0x43f317<-0x7ba+-0x104*-0x25+-0x1*0x1dda?-_0x43f317:_0x43f317;_0x3b4577[_0x10bf3*(-0x4d9*0x1+-0x2a5+0x781)]=(_0x14ce77<-0xa15+-0x6*0x52a+0x1*0x2911?-(-0x419*-0x1+0x1778+-0x1b90):-0x1a92+0x1*-0x6e7+0x217a)*(Math['exp'](_0x2ad474)-(-0x1fdd+0x225+0x1db9)),_0x3b4577[_0x10bf3*(0xbe*-0x2f+-0x183+0x4*0x91a)+(-0x2690+0x16d*-0x4+-0x1*-0x2c45)]=(_0x19b4f2<-0x210b+-0x1*-0x6b9+0x1a52?-(0x1*0x17e3+-0x1c77*0x1+-0x1*-0x495):-0x1af4+-0x1*-0x8ff+0x11f6)*(Math['exp'](_0x3b546d)-(-0xb*-0xd4+-0x200c*-0x1+-0x31*0xd7)),_0x3b4577[_0x10bf3*(0x5*-0x63a+-0x7a6*0x5+0x4563)+(-0x1*-0xc92+-0x1*-0x24+-0xcb4)]=(_0x43f317<0x76e+0x1227*-0x1+0x9*0x131?-(0x1d*-0x92+0x10*-0x174+0x27cb):-0x18c2+-0xca0+0x11*0x233)*(Math['exp'](_0x4222b5)-(0x1de1+0x25*0xd5+0x3ca9*-0x1));}}['calcFocalP'+'oint'](_0x4b4e99,_0x5609bf){_0x4b4e99['set'](-0x23b1+-0x1*0x1dcc+0x1df*0x23,-0x18e*0x2+0xbef*-0x2+0x1afa,0x9d7*0x2+-0x1*0x463+-0xf4b);}get['isSogs'](){return!(-0x1*0x7fa+0x2*-0x77a+0x16ee*0x1);}get['shBands'](){var _0x350004;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x350004=this['sh_centroi'+'ds'])==null?void(0x47*0x6b+-0x11d1+-0xbdc):_0x350004['width']]??0x4be+-0x19e2*-0x1+-0x1ea0;}async['decompress'](){const _0x29625c=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x27180e}=this,{means_l:_0x34f0ff,means_u:_0xabbae3,quats:_0x520dfb,scales:_0x2e2bf5,sh0:_0x56242f,sh_labels:_0x5b1c7a,sh_centroids:_0x10d08a}=this;if(_0x34f0ff['_levels'][0x8*-0xe2+0x16d0+-0xfc0]=await yi(_0x34f0ff),_0xabbae3['_levels'][0x6d7+-0x1dc7+0x16f0]=await yi(_0xabbae3),_0x520dfb['_levels'][0x1*-0x12b5+-0x58f*0x4+0x28f1]=await yi(_0x520dfb),_0x2e2bf5['_levels'][-0x55*-0x1+0x4*0x680+0x15*-0x141]=await yi(_0x2e2bf5),_0x56242f['_levels'][-0x5*-0x661+0x7a4*-0x1+0x7*-0x377]=await yi(_0x56242f),_0x27180e>0x17c3+-0x1364+-0x45f){_0x5b1c7a['_levels'][0x6b7+0x1*-0x232f+0x1c78]=await yi(_0x5b1c7a),_0x10d08a['_levels'][-0x4d6+-0x25c3+0x2a99]=await yi(_0x10d08a);const _0x3d7a70=[];for(let _0x307cd1=-0x44*-0x10+0x6*0x22+-0x50c;_0x307cd1<0x1e28+0x26b9+-0x44b4;++_0x307cd1)_0x3d7a70['push']('f_rest_'+_0x307cd1);_0x29625c['splice'](_0x29625c['indexOf']('f_dc_0')+(-0x118c+-0x2705+0x3892*0x1),-0x60*0x1+0x17ec+0x16*-0x112,..._0x3d7a70);}const _0x19f2f9={};_0x29625c['forEach'](_0x409379=>{_0x19f2f9[_0x409379]=new Float32Array(this['numSplats']);});const _0x488f3b=new I(),_0x2c9d08=new le(),_0x5d0079=new I(),_0x8860d8=new ae(),_0x3eca3b=_0x27180e>0x16bc+0x18f4+-0x2fb0?new Float32Array(0x2*0xe3b+0x13ec+-0x3035):null,_0x14d08a=this['createIter'](_0x488f3b,_0x2c9d08,_0x5d0079,_0x8860d8,_0x3eca3b);for(let _0x27c08d=0x15e1+0x7*0x61+-0x311*0x8;_0x27c08d<this['numSplats'];++_0x27c08d)if(_0x14d08a['read'](_0x27c08d),_0x19f2f9['x'][_0x27c08d]=_0x488f3b['x'],_0x19f2f9['y'][_0x27c08d]=_0x488f3b['y'],_0x19f2f9['z'][_0x27c08d]=_0x488f3b['z'],_0x19f2f9['rot_1'][_0x27c08d]=_0x2c9d08['x'],_0x19f2f9['rot_2'][_0x27c08d]=_0x2c9d08['y'],_0x19f2f9['rot_3'][_0x27c08d]=_0x2c9d08['z'],_0x19f2f9['rot_0'][_0x27c08d]=_0x2c9d08['w'],_0x19f2f9['scale_0'][_0x27c08d]=_0x5d0079['x'],_0x19f2f9['scale_1'][_0x27c08d]=_0x5d0079['y'],_0x19f2f9['scale_2'][_0x27c08d]=_0x5d0079['z'],_0x19f2f9['f_dc_0'][_0x27c08d]=(_0x8860d8['x']-(-0xa*0x211+-0x1e14+0x32be+0.5))/dn,_0x19f2f9['f_dc_1'][_0x27c08d]=(_0x8860d8['y']-(-0x7*0x493+0x19d4+0x631+0.5))/dn,_0x19f2f9['f_dc_2'][_0x27c08d]=(_0x8860d8['z']-(0x212f+-0x10f6+-0x1039+0.5))/dn,_0x19f2f9['opacity'][_0x27c08d]=_0x8860d8['w']<=-0x1fa0+0x2162*0x1+0x19*-0x12?-(-0x37*-0x9d+-0x5bf*0x1+-0x1bd4):_0x8860d8['w']>=0x1*-0x1025+0x173*-0x13+0xd3*0x35?-0x18*-0xda+0x81a+-0xe*0x207:-Math['log']((0x488+-0x19cb+0x1544)/_0x8860d8['w']-(-0x1592+-0x1e8d+-0x8b0*-0x6)),_0x3eca3b){for(let _0x265797=0x168a+-0x4e7+-0xf*0x12d;_0x265797<-0x83*0x4b+-0x1*-0xf65+-0x4d*-0x4d;++_0x265797)_0x19f2f9['f_rest_'+_0x265797][_0x27c08d]=_0x3eca3b[_0x265797];}return new Dn([{'name':'vertex','count':this['numSplats'],'properties':_0x29625c['map'](_0x3e7a8b=>({'name':_0x3e7a8b,'type':'float','byteSize':0x4,'storage':_0x19f2f9[_0x3e7a8b]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x509707,means_u:_0x423e6d,quats:_0x2986d3,scales:_0x569db5,sh_labels:_0x5c2c2b,numSplats:_0x1874b5}=this,{device:_0x4669ff}=_0x509707,{scope:_0xb44e97}=_0x4669ff,_0x5aff75=Ut['createShad'+'er'](_0x4669ff,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':Eb,'fragmentWGSL':Ab,'fragmentOutputTypes':['uvec4']}),_0x886cc9=new vt({'colorBuffer':this['packedText'+'ure'],'depth':!(-0x1265+-0x16*0xc4+0x233e),'mipLevel':0x0});_0x4669ff['setCullMod'+'e'](xt),_0x4669ff['setBlendSt'+'ate'](Ct['NOBLEND']),_0x4669ff['setDepthSt'+'ate'](Kt['NODEPTH']),bb(_0xb44e97,{'means_l':_0x509707,'means_u':_0x423e6d,'quats':_0x2986d3,'scales':_0x569db5,'sh_labels':_0x5c2c2b??_0x509707,'numSplats':_0x1874b5}),fr(_0x4669ff,_0x886cc9,_0x5aff75),_0x886cc9['destroy'](),_0x5aff75['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x4c56a0,height:_0x212d1b,width:_0x2720a5}=this['means_l'];this['means_l']['_levels'][0x235*-0xf+0x5*0x503+0x80c]=await yi(this['means_l']),this['means_u']['_levels'][-0xb*0x13f+-0x10bb+0x79c*0x4]=await yi(this['means_u']),this['packedText'+'ure']=new _e(_0x4c56a0,{'name':'sogsPacked'+'Texture','width':_0x2720a5,'height':_0x212d1b,'format':Ne,'mipmaps':!(-0x21ba+-0xe62+0x6d*0x71)}),_0x4c56a0['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function Mb(){let _0x27eb57=null,_0x26a23d=null,_0x1360b2=null,_0x292e82=null,_0x1ef376=null,_0x2d9943=null,_0x50e7d3=null,_0x1c7a4e=null,_0x4f6eca=null,_0x425055=null,_0x3c92c4=null,_0x2c947b=null,_0x5b3a10=null,_0x1d9620=null,_0x319e9b=null,_0x1a72fc=null,_0xdc4ed9=null,_0xd24555=null,_0xbf041e=null,_0x515341=null,_0x4b32b2=null,_0x958ac1=null,_0x13efc9=null,_0x59cf45=null,_0xcdc449=Float32Array['BYTES_PER_'+'ELEMENT'],_0x5db8f5=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x2cfa93=0x26d*-0x1+0x59*-0x39+-0x3*-0x76a,_0x5212b1=!(0xc77*0x1+0x9bd*-0x1+-0x2ba),_0x1677e7,_0x4610ce,_0x2fc746={'x':0x0,'y':0x0,'z':0x0},_0x910514={'x':0x0,'y':0x0,'z':0x0},_0x2d33bb=!(-0x1e67*0x1+0xdd3*-0x1+0x2c3a),_0x53fc6c=!(-0x71b+0x1d2f+0x75c*-0x3),_0x5995b3=!(0x20c6+-0x2283+0x1be),_0x41d0ab=!(-0x2*0x471+-0x2*0x987+0x17*0x137),_0x463109=0x209c+0x1*-0x109+0x3b*-0x89,_0x2d5c38=-0x1*0x231b+0x2634+-0x319,_0x35d4c2=!(0x1833+0x24f3+-0x3d25),_0x30f79b=null,_0x107eca=!(0x12ed+-0x2565+0x1279),_0x4f4f20=-0xe21+0x1c9c+0x151*-0xb,_0x4f2c11=0x15ee+0x1f5d+-0x354b,_0x32591e={'x':0x0,'y':0x0,'z':0x0},_0x565f8a={'x':0x0,'y':0x0,'z':0x0},_0x295685,_0x3f81f4;self['onmessage']=async _0xbb28b=>{const {data:_0xe55d7a}=_0xbb28b;switch(_0xe55d7a['type']){case'initWorker':await _0x108ba9(_0xe55d7a['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x2cfa93=_0xe55d7a['centers']['length']/(-0x1*-0x1ce8+0x1*0x1082+-0x1*0x2d67),_0x2cfa93<=0x2466+0x105b+-0x34c1||!_0x26a23d)return;_0x4f9ffe(),_0x5212b1=_0xe55d7a['is4d'],_0x295685=_0xe55d7a['id'];const _0x5e2f8f=_0x42b6d7(_0x2cfa93);if(_0x50d5cf(_0x5e2f8f),_0x1360b2[0x3a0*0x8+-0x291*0x7+-0xb09]=_0x32591e['x'],_0x1360b2[-0x3f9+-0x251*-0x9+-0x10df]=_0x32591e['y'],_0x1360b2[-0x22f4*-0x1+0xa4b+0x25*-0x139]=_0x32591e['z'],_0x292e82[0x90*-0x9+0x975+0x465*-0x1]=_0x565f8a['x'],_0x292e82[0x22e2+0x273+-0x2554]=_0x565f8a['y'],_0x292e82[0x130f*0x2+0xe7e+-0x349a*0x1]=_0x565f8a['z'],_0x2d9943&&_0xe55d7a['centers']&&_0x2d9943['length']===_0xe55d7a['centers']['length']){const _0x2e9a61=new Float32Array(_0xe55d7a['centers']);_0x2d9943['set'](_0x2e9a61);}if(_0x1c7a4e&&_0xe55d7a['timeIndex']&&_0x1c7a4e['length']===_0xe55d7a['timeIndex']['length']){const _0x1c03f7=new Uint32Array(_0xe55d7a['timeIndex']);_0x1c7a4e['set'](_0x1c03f7);}if(_0x3c92c4&&_0xe55d7a['motion']&&_0x3c92c4['length']===_0xe55d7a['motion']['length']){const _0x3fe5f0=new Float32Array(_0xe55d7a['motion']);_0x3c92c4['set'](_0x3fe5f0);}if(_0x5212b1&&_0x4f6eca&&_0x425055&&_0xe55d7a['muT']&&_0xe55d7a['tScale']&&_0x4f6eca['length']===_0xe55d7a['muT']['length']&&_0x425055['length']===_0xe55d7a['tScale']['length']&&(_0x4f6eca['set'](_0xe55d7a['muT']),_0x425055['set'](_0xe55d7a['tScale'])),_0x50e7d3){for(let _0xffc6e3=0x126f+-0x1ced+0x9e*0x11;_0xffc6e3<_0x50e7d3['length'];++_0xffc6e3)_0x50e7d3[_0xffc6e3]=_0xffc6e3;}_0x1ef376&&_0xe55d7a['timeOption']&&_0x1ef376['set'](_0xe55d7a['timeOption']),_0xed852f(),_0x107eca=!(-0x190e+-0x9e*0x2a+0x91*0x5a),_0x5995b3=!(-0x4*-0x89b+-0x80+0x1a*-0x14e),_0x15b1a3();break;case'setTime':_0x1677e7=_0xe55d7a['time'],_0x15b1a3();break;case'setUseTemp'+'oralSort':_0x2d33bb=_0xe55d7a['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x53fc6c=_0xe55d7a['useDynamic'+'Sort'];break;case'sort':if(!_0x1360b2)return;_0x1360b2[0x26b3+0x7f9+-0x2eac]=_0xe55d7a['cameraPosi'+'tion']['x'],_0x1360b2[0x5*0x9c+-0x63d+0x199*0x2]=_0xe55d7a['cameraPosi'+'tion']['y'],_0x1360b2[0x1b3d+0x1*-0x327+-0x10c*0x17]=_0xe55d7a['cameraPosi'+'tion']['z'],_0x292e82[0x164a+0x1*0x188c+-0x2ed6]=_0xe55d7a['cameraDire'+'ction']['x'],_0x292e82[0x4*-0x785+-0x255+0x206a]=_0xe55d7a['cameraDire'+'ction']['y'],_0x292e82[0x127d+0x60a*0x3+0x2499*-0x1]=_0xe55d7a['cameraDire'+'ction']['z'],_0x32591e['x']=_0xe55d7a['cameraPosi'+'tion']['x'],_0x32591e['y']=_0xe55d7a['cameraPosi'+'tion']['y'],_0x32591e['z']=_0xe55d7a['cameraPosi'+'tion']['z'],_0x565f8a['x']=_0xe55d7a['cameraDire'+'ction']['x'],_0x565f8a['y']=_0xe55d7a['cameraDire'+'ction']['y'],_0x565f8a['z']=_0xe55d7a['cameraDire'+'ction']['z'],_0x15b1a3();break;}};const _0x4f9ffe=()=>{_0x2d5c38=Math['max'](0xc15+0x61*-0x52+0x1307,Math['min'](-0x1492+-0x1*-0x1b43+0x1*-0x69d,Math['round'](Math['log2'](_0x2cfa93/(-0x2453*-0x1+0x1d62+-0x41b1))))),_0x463109=(0x15cb+0x1839+0x38a*-0xd)**_0x2d5c38+(0x1286+-0x1*-0x194b+-0x2bd0);},_0x50d5cf=_0x30e16d=>{_0x2c947b=0x21b4+0x89f*-0x1+-0x1915,_0x5b3a10=_0x2c947b+_0x2cfa93*_0xcdc449*(0x1edb*-0x1+0x11*-0x2+0x1f00*0x1),_0xd24555=_0x5b3a10+(0x371*0x8+0x1*0x2248+-0x3d6c)*_0xcdc449*(-0x90a*0x2+0x3*-0x355+0x1c15),_0xbf041e=_0xd24555+_0x2cfa93*_0x5db8f5,_0x515341=_0xbf041e+(0x1384+-0x5*-0xc1+-0x1746)*_0xcdc449,_0x4b32b2=_0x515341+(-0x205*-0x13+0x2*0x9b1+0x26*-0x185)*_0xcdc449,_0x958ac1=_0x4b32b2+(-0x1f*-0x4+0x13e*0x19+-0x1f87*0x1)*_0xcdc449,_0x13efc9=_0x958ac1+(-0x20f2*-0x1+0xd7d+-0x2e6c)*_0xcdc449,_0x59cf45=_0x13efc9+_0x2cfa93*_0x5db8f5,_0x2d9943=new Float32Array(_0x30e16d,_0x2c947b,_0x2cfa93*(0x106c*-0x2+0x4e*-0x38+0xd*0x3d7)),_0x1ef376=new Float32Array(_0x30e16d,_0x5b3a10,0xaa*0x3+-0x132d*-0x1+-0x1463),_0x50e7d3=new Uint32Array(_0x30e16d,_0xd24555,_0x2cfa93),_0x1360b2=new Float32Array(_0x30e16d,_0xbf041e,0x7*0x443+0x3*-0x9ad+-0xcb),_0x292e82=new Float32Array(_0x30e16d,_0x515341,0x2*-0x11c5+-0xc0*-0x31+-0x133),_0x5212b1&&(_0x1a72fc=_0x59cf45+_0x463109*_0x5db8f5,_0xdc4ed9=_0x1a72fc+_0x2cfa93*_0xcdc449,_0x319e9b=_0xdc4ed9+_0x2cfa93*_0xcdc449,_0x1d9620=_0x319e9b+_0x2cfa93*(-0x669*-0x4+0x1910+-0x32b1)*_0xcdc449,_0x4f6eca=new Float32Array(_0x30e16d,_0x1a72fc,_0x2cfa93),_0x425055=new Float32Array(_0x30e16d,_0xdc4ed9,_0x2cfa93),_0x3c92c4=new Float32Array(_0x30e16d,_0x319e9b,_0x2cfa93*(0x74*0x3a+-0x1dfa+0x3b5)),_0x1c7a4e=new Uint32Array(_0x30e16d,_0x1d9620,_0x2cfa93));},_0x108ba9=async _0x40586a=>{_0x4f4f20=0x1da1+-0x144b+-0x955;const _0x281946={'env':{'memory':new WebAssembly['Memory']({'initial':_0x4f4f20}),'pthread_self':function(){return 0x1*0xb1e+-0x12b0+0x792;},'emscripten_builtin_memalign':function(){return 0x2*0x244+0x1cd0+-0x2158;},'loggerVec3':(_0x585ffa,_0x2769f2,_0x454f83,_0x181174)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x585ffa+']\x200:'+_0x2769f2+'\x201:'+_0x454f83+'\x202:'+_0x181174);},'loggerFloat':(_0x3c3f62,_0x26f8e6)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x3c3f62+']\x20a:'+_0x26f8e6);},'loggerValue':(_0x4839d7,_0x5bb98d,_0x4c29b6,_0x3d0974,_0x36495c)=>{console['log']('C++\x20logger'+'Value\x20['+_0x4839d7+']\x20minDist:'+_0x5bb98d+'\x20maxDist:'+_0x4c29b6+'\x20range:'+_0x3d0974+'\x20divider:'+_0x36495c);},'loggerCamera':(_0x1cf5c2,_0x3cbf63,_0x399286,_0x377844,_0x11542a,_0x514677,_0x20eeb0)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x1cf5c2+']\x20x:'+_0x3cbf63+'\x20y:'+_0x399286+'\x20z:'+_0x377844+'\x20dx:'+_0x11542a+'\x20dy:'+_0x514677+'\x20dz:'+_0x20eeb0);},'loggerBound':(_0x2f53db,_0x275a31,_0x4fb28a,_0x183a4b,_0x3a14c8,_0x17f8e8)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x2f53db+'\x20minY:'+_0x275a31+'\x20minZ:'+_0x4fb28a+'\x20maxX:'+_0x183a4b+'\x20maxY:'+_0x3a14c8+'\x20maxZ:'+_0x17f8e8);},'loggerDebug':_0x1b276f=>{console['log']('C++\x20logger'+'Debug\x20['+_0x1b276f+']');}}};try{const _0xf21924=await(await fetch(_0x40586a))['arrayBuffe'+'r']();return _0x27eb57=(await WebAssembly['instantiat'+'e'](_0xf21924,_0x281946))['instance'],_0x26a23d=_0x281946['env']['memory'],_0x27eb57;}catch(_0x2644ca){throw console['error']('加载WASM模块失败'+':',_0x2644ca),_0x2644ca;}},_0x456c2c=_0x4a2a94=>{if(_0x4a2a94<=0x2404+-0x52*-0x1c+-0x2cfc)return 0xf*-0xf9+0x565*0x7+0x3*-0x7b9;let _0x3ca835=_0x4a2a94*_0xcdc449*(0x2*0x482+-0xa*-0x389+-0x2c5b);_0x3ca835+=_0x4a2a94*_0x5db8f5,_0x3ca835+=(-0x3e1*-0x1+-0xce3*0x1+0x905*0x1)*_0xcdc449,_0x3ca835+=(-0x27e*-0x8+-0x383*-0xb+-0x3a8e)*_0xcdc449,_0x3ca835+=(0x1bb0+-0x16d5+-0x4d8)*_0xcdc449,_0x3ca835+=(-0x5*0x4d6+0x10f5+-0x39e*-0x2)*_0xcdc449,_0x3ca835+=_0x4a2a94*_0xcdc449,_0x3ca835+=_0x463109*_0x5db8f5,_0x3ca835+=(-0x8c*0x12+0x96d*-0x4+0xd*0x3b0)*_0xcdc449*(0x5*-0x279+0x1942+-0xce3),_0x3ca835+=_0x4a2a94*_0x5db8f5,_0x5212b1&&(_0x3ca835+=_0x4a2a94*_0xcdc449,_0x3ca835+=_0x4a2a94*_0xcdc449,_0x3ca835+=_0x4a2a94*_0xcdc449*(0x2bf+0x8a3+0x29*-0x47));const _0x37fd89=(-0x11ca+0x36*0x1a+0xc8e)*(-0x126*0x10+-0x5e7+0x13*0x17d);return Math['ceil'](_0x3ca835/_0x37fd89);},_0x42b6d7=_0x4ef50a=>{const _0x3680a5=_0x456c2c(_0x4ef50a);return _0x3680a5>_0x4f4f20?(_0x26a23d['grow'](_0x3680a5-_0x4f4f20),_0x4f4f20=_0x3680a5):_0x26a23d['grow'](-0x9b9*0x1+0x4ca*0x3+-0x4a5),_0x26a23d['buffer'];},_0xed852f=()=>{if(!_0x27eb57)return;const {calcAABB:_0x16d81e}=_0x27eb57['exports'];_0x16d81e(_0x2c947b,_0x4b32b2,_0x958ac1,_0x2cfa93);},_0x15b1a3=()=>{_0x30f79b&&clearTimeout(_0x30f79b),_0x30f79b=setTimeout(()=>{_0x30f79b=null,_0xc60790();},0x25*-0x6+0x29d*-0x9+0x1*0x1863);},_0xc60790=()=>{if(!_0x27eb57||!_0x107eca||_0x50e7d3['length']!==_0x2cfa93||_0xd24555===null||_0x2c947b===null||_0xbf041e===null||_0x515341===null||_0x4b32b2===null||_0x958ac1===null)return;const _0x2fb049=_0x1360b2[0x4*-0x19+0x73b+-0x6d7],_0x2cabfd=_0x1360b2[-0x3*-0x4c6+0x1859+-0x26aa],_0x18ef96=_0x1360b2[-0x50f+0x160*-0xa+-0x1*-0x12d1],_0x3cf7f5=_0x292e82[0x1f*-0x11d+0x25e4+0x361*-0x1],_0x14d113=_0x292e82[-0x1*-0x1552+0x2*-0xfca+-0xa43*-0x1],_0x2feb15=_0x292e82[0x6c1*0x1+-0x2*0x7e2+0x905],_0x3b88fa=0x1*-0x10b7+-0xa3c+0x1af3+0.001;if(!_0x5995b3&&Math['abs'](_0x2fb049-_0x2fc746['x'])<_0x3b88fa&&Math['abs'](_0x2cabfd-_0x2fc746['y'])<_0x3b88fa&&Math['abs'](_0x18ef96-_0x2fc746['z'])<_0x3b88fa&&Math['abs'](_0x3cf7f5-_0x910514['x'])<_0x3b88fa&&Math['abs'](_0x14d113-_0x910514['y'])<_0x3b88fa&&Math['abs'](_0x2feb15-_0x910514['z'])<_0x3b88fa&&Math['abs'](_0x1677e7-_0x4610ce)<-0xa7b*-0x1+0x3*0x119+-0xdc6+0.01)return;if(_0x41d0ab){_0x35d4c2=!(-0x12b+-0x1bf1+0x5c*0x51);return;}_0x41d0ab=!(0xcbd+-0x19d0+-0xd13*-0x1),_0x5995b3=!(0xdb+0x7*0x493+-0x20df),_0x4610ce=_0x1677e7,_0x2fc746['x']=_0x2fb049,_0x2fc746['y']=_0x2cabfd,_0x2fc746['z']=_0x18ef96,_0x910514['x']=_0x3cf7f5,_0x910514['y']=_0x14d113,_0x910514['z']=_0x2feb15,_0x35d4c2=!(0x28b*0x5+-0x2e*-0x56+-0x7*0x406);const {sortIndexes:_0x504a2d}=_0x27eb57['exports'];try{const _0xccc31d=_0x504a2d(_0xd24555,_0x2c947b,_0x319e9b,_0x1a72fc,_0xdc4ed9,_0xbf041e,_0x515341,_0x4b32b2,_0x958ac1,_0x13efc9,_0x59cf45,_0x1677e7||-0x1*0x694+-0x1596*-0x1+-0xf02,_0x2d33bb,_0x53fc6c,_0x5212b1,_0x2cfa93,_0x463109,_0x2d5c38,_0x5b3a10,_0x1d9620),_0xdad68a=new Uint32Array(_0x50e7d3);if(_0xccc31d===0x1abb+-0x1e7c+0x3c1){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0xccc31d);}const _0x19895d=_0x2cfa93!==_0x4f2c11||_0x3f81f4!==_0x295685;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0xccc31d,'order':_0xdad68a,'isNewOrder':_0x19895d},[_0xdad68a['buffer']]),_0x4f2c11=_0x2cfa93,_0x3f81f4=_0x295685;}catch(_0x4913d6){console['error']('排序操作失败:',_0x4913d6),self['postMessag'+'e']({'type':'error','error':_0x4913d6['message']});}_0x41d0ab=!(0x19*0x121+0x1d2f+-0x3967),_0x35d4c2&&_0x15b1a3();};}class Ib extends pe{constructor(){super(),h(this,'worker',null),h(this,'numSplats',0x551*-0x4+0x1*0x2fb+0x1249),h(this,'is4d',!(-0x1*0xcdd+-0x6b5+0x1392)),h(this,'sortStartT'+'ime',0x9c9*-0x1+0x22a3+-0x1*0x18da),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Mb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x4ee287=>{var _0x736421;if(!this['worker'])return;const {data:_0x54c72c}=_0x4ee287;switch(_0x54c72c['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x54c72c['order']&&(_0x54c72c['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x736421=this['orderTextu'+'re'])==null||_0x736421['write'](0x312*-0xc+0xe*-0xed+0x31ce,-0x2048+0x16d6+-0x3*-0x326,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(-0x263*-0x1+0x19e8+-0x1c4a),_0x54c72c['order']));let _0x2e85d9=0x1*0x1ec2+-0x26e+0x206*-0xe;this['sortStartT'+'ime']!==0x20fa+0x204+-0x6*0x5d5&&(_0x2e85d9=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x4ee287['data']['count'],_0x2e85d9,_0x54c72c['isNewOrder']),this['sortStartT'+'ime']=0x110+-0x2*0xc0c+0x1708;break;case'error':console['error']('Worker错误:',_0x54c72c['error']),this['fire']('error',_0x54c72c['error']);break;}};const _0x3edbf4='https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm?t='+Date['now']();this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':_0x3edbf4});}['initData'](_0x90e352,_0x544f75,_0x82cc04,_0x3566c5,_0x3a51ef,_0x4305d0,_0xefa097,_0x1a8834){var _0x329912;this['is4d']=_0x1a8834,this['numSplats']=_0x544f75['length']/(0x679*0x6+-0x21f*-0x6+-0x338d),(!_0xefa097||_0xefa097['length']===-0xa93*-0x1+0x1391+0x2*-0xf12)&&(_0xefa097=[0x79f*0x1+0x6*-0x1fa+0x43d,0x235*0x9+-0xdd*-0x29+-0x3706]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x90e352),this['backOrderT'+'exture']=_0x90e352;const _0x21bdf7=new Date()['getTime']();(_0x329912=this['worker'])==null||_0x329912['postMessag'+'e']({'type':'initData','centers':_0x544f75,'muT':_0x82cc04,'tScale':_0x3566c5,'motion':_0x3a51ef,'timeIndex':_0x4305d0,'timeOption':_0xefa097,'is4d':_0x1a8834,'id':_0x21bdf7});}['setCamera'](_0x34763c,_0x1352cc){this['worker']&&(!_0x34763c||!_0x1352cc||(this['data']['cameraPosi'+'tion']={'x':_0x34763c['x'],'y':_0x34763c['y'],'z':_0x34763c['z']},this['data']['cameraDire'+'ction']={'x':_0x1352cc['x'],'y':_0x1352cc['y'],'z':_0x1352cc['z']},this['sortStartT'+'ime']===0x21f7+-0xe1a*-0x1+-0x3011&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x34763c['x'],'y':_0x34763c['y'],'z':_0x34763c['z']},'cameraDirection':{'x':_0x1352cc['x'],'y':_0x1352cc['y'],'z':_0x1352cc['z']}})));}['setCurrent'+'Time'](_0x4a7c34){this['worker']&&(this['data']['time']=_0x4a7c34,this['sortStartT'+'ime']===-0x525+0x1664+-0x1*0x113f&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x4a7c34}));}['setUseTemp'+'oralSort'](_0x2320d6){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x2320d6});}['setUseDyna'+'micSort'](_0x21a71c){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x21a71c});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const Db=new te(),Pa=new I(),Ma=new I(),ql=[0x31d+-0x9c5+0x18*0x47,-0x230b+0x21c1*0x1+0x37*0x6];class Lb{constructor(_0x23543b,_0x59291e={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',-0x1320+-0x5*-0x7c1+0x13a5*-0x1),h(this,'lastCamera'+'Position',new I()),h(this,'lastCamera'+'Direction',new I()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x549536,_0x1c5fc2=void(0x1f51+-0x1fc*0x13+0x663))=>{(_0x1c5fc2||_0x1c5fc2===0xc91*0x2+-0x1871+-0xb1)&&(this['material']['setParamet'+'er']('uTime',_0x1c5fc2),this['updateTime'](_0x1c5fc2)),this['sort'](_0x549536);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x23543b['numSplats']),this['resource']=_0x23543b,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Vi,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x59291e['material']?(this['_material']=_0x59291e['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new In({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Pe,'vertex_id_attrib':Fh}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new We(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x10cb*-0x1+0x1152+-0x221d)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=0xe50+-0x4c1+-0x98f,this['sorter']=new Ib(),this['sorter']['on']('initialize'+'d',()=>{var _0x1fb980,_0x2e4294,_0x523719,_0x307159,_0xca023e,_0x1a109a,_0x131034,_0x2b98d8,_0x46745c,_0x3843e8,_0x497980;const _0x960941=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x37419d=new Float32Array(((_0x2e4294=(_0x1fb980=this['resource']['muT'])==null?void(-0xd*-0x151+0x930+-0x1a4d):_0x1fb980['buffer'])==null?void(0x142b+0x10c5*-0x2+-0x1e9*-0x7):_0x2e4294['slice']())??new Float32Array()),_0x19e1e6=new Float32Array(((_0x307159=(_0x523719=this['resource']['tScale'])==null?void(0xf68+-0x133*0x7+-0x703):_0x523719['buffer'])==null?void(0x20e7+0x158c+-0x3673):_0x307159['slice']())??new Float32Array()),_0x79567b=new Float32Array(((_0x1a109a=(_0xca023e=this['resource']['motion'])==null?void(0x16df+0x23f4+-0x3ad3):_0xca023e['buffer'])==null?void(0x1493+0x8c2+-0x1d55):_0x1a109a['slice']())??new Float32Array()),_0x41910f=new Float32Array(((_0x2b98d8=(_0x131034=this['resource']['timeIndex'])==null?void(0x267c+-0x1*0xbd2+-0x1aaa):_0x131034['buffer'])==null?void(0xa6*-0x18+0x1*-0x7c7+-0x4ab*-0x5):_0x2b98d8['slice']())??new Float32Array(0x1b4e+-0x26df+0xb91)),_0x268a2f=new Float32Array(((_0x3843e8=(_0x46745c=this['resource']['timeOption'])==null?void(-0x285+0x2277+-0x8d*0x3a):_0x46745c['buffer'])==null?void(-0x7c4+-0x15c*0x17+-0x2*-0x1384):_0x3843e8['slice']())??new Float32Array());(_0x497980=this['sorter'])==null||_0x497980['initData'](this['orderTextu'+'re'],_0x960941,_0x37419d,_0x19e1e6,_0x79567b,_0x41910f,_0x268a2f,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x2d7931,_0x34f76f,_0x2f95e8)=>{var _0x518bc5;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x2d7931/this['resource']['instanceSi'+'ze']),_0x2f95e8&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x2f95e8&&((_0x518bc5=this['resource'])==null||_0x518bc5['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x2d7931);}),this['setHighQua'+'litySH'](_0x59291e['highQualit'+'ySH']??!(-0x5*0x1b0+-0x2ca*0xb+0x271f)));}async['updateInst'+'anceData'](_0x1622dd){var _0x325d77,_0x194851;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x1622dd['numSplats']),this['resource']=_0x1622dd;const _0x44d9d7=this['resource']['evalTextur'+'eSize'](_0x1622dd['centers']['length']/(0x1208+0xf88+-0x218d));return(_0x325d77=this['backOrderT'+'exture'])==null||_0x325d77['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Vi,_0x44d9d7),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0x13a7+-0x17d1+-0x1a*-0x29)),(_0x194851=this['sorter'])==null||_0x194851['initData'](this['backOrderT'+'exture'],_0x1622dd['centers'],_0x1622dd['muT'],_0x1622dd['tScale'],_0x1622dd['motion'],_0x1622dd['timeIndex'],_0x1622dd['timeOption'],_0x1622dd['is4D']),new Promise(_0x231f00=>{var _0x234489;const _0x1ae9a2=(_0x49933e,_0x8e26e0,_0x3c2890)=>{var _0x1f492a;_0x3c2890&&((_0x1f492a=this['sorter'])==null||_0x1f492a['off']('updated',_0x1ae9a2),_0x231f00(!(0xf*0x53+-0x1d0c+0x182f)));};(_0x234489=this['sorter'])==null||_0x234489['on']('updated',_0x1ae9a2);});}['destroy'](){var _0x55c90f,_0x3c7cbc,_0x3b6ecf,_0x459869,_0x409969,_0x1930ca;(_0x55c90f=this['resolveSH'])==null||_0x55c90f['destroy'](),(_0x3c7cbc=this['material'])==null||_0x3c7cbc['destroy'](),(_0x3b6ecf=this['meshInstan'+'ce'])==null||_0x3b6ecf['destroy'](),(_0x459869=this['sorter'])==null||_0x459869['destroy'](),(_0x409969=this['orderTextu'+'re'])==null||_0x409969['destroy'](),(_0x1930ca=this['backOrderT'+'exture'])==null||_0x1930ca['destroy']();}set['material'](_0x16f1ba){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x16f1ba&&(this['_material']=_0x16f1ba,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x16f1ba));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x175880,_0x2b6ab2={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x175880),_0x175880['setParamet'+'er']('numSplats',0x2564+0x264f+0x1*-0x4bb3),_0x175880['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x175880['setParamet'+'er']('alphaClip',0xe*-0x9e+-0x2275+0x2b19+0.3),_0x175880['setDefine']('DITHER_'+(_0x2b6ab2['dither']?'BLUENOISE':'NONE'),''),_0x175880['cull']=xt,_0x175880['blendType']=_0x2b6ab2['dither']?ys:Gs,_0x175880['depthWrite']=!!_0x2b6ab2['dither'];}['updateView'+'port'](_0x13ea03){var _0x3bbff7;const _0x567235=_0x13ea03==null?void(-0x2b*-0x33+0xad*-0xa+-0x1cf):_0x13ea03['camera'],_0x4f1017=_0x567235==null?void(-0x9c4+-0x6d*0x2+0x3*0x38a):_0x567235['renderTarg'+'et'],{width:_0xbb4f2a,height:_0x54f8d1}=_0x4f1017??this['resource']['device'];ql[-0x120f+-0x174c+-0x1*-0x295b]=_0xbb4f2a,ql[-0x1e43+0x45c+0x4*0x67a]=_0x54f8d1;const _0xc81dc3=(_0x3bbff7=_0x567235==null?void(-0x2396+-0x20be+0x4454):_0x567235['camera'])==null?void(-0x1783+-0x2694+0x5a5*0xb):_0x3bbff7['xr'];_0xc81dc3!=null&&_0xc81dc3['active']&&_0xc81dc3['views']['list']['length']===-0x2ef*0x5+-0x65*0x2b+-0x12*-0x1c2&&(ql[0x1*-0x203+0xee*-0x1b+0x1b1d]*=-0x1*0x227a+0x2*-0x293+0x27a0+0.5),this['material']['setParamet'+'er']('viewport',ql);}['sort'](_0x2d79dd){if(this['sorter']){const _0x2b334d=_0x2d79dd['getWorldTr'+'ansform']();_0x2b334d['getTransla'+'tion'](Pa),_0x2b334d['getZ'](Ma);const _0x3bd11e=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x55e290=Db['invert'](_0x3bd11e);_0x55e290['transformP'+'oint'](Pa,Pa),_0x55e290['transformV'+'ector'](Ma,Ma),(!Pa['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!Ma['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Pa),this['lastCamera'+'Direction']['copy'](Ma),this['sorter']['setCamera'](Pa,Ma)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x2d79dd);}['update'](){var _0x570e91;if(this['cameras']['length']>-0x11*-0x8b+0x1*-0x7d3+-0x168){const _0x5c77fa=this['cameras'][-0x18eb+0x2240+-0x955*0x1];this['sort'](_0x5c77fa['_node']),(_0x570e91=this['resolveSH'])==null||_0x570e91['render'](_0x5c77fa['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=0x38b*-0x8+-0x255*-0xe+-0x44e;}}['setHighQua'+'litySH'](_0x5990af){const {resource:_0x3a6a48}=this,{gsplatData:_0x15e45a}=_0x3a6a48;_0x15e45a instanceof Pb&&_0x15e45a['shBands']>0x2*-0x55a+-0x18*0x1d+0x2*0x6b6&&_0x5990af===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new wb(_0x3a6a48['device'],this));}['updateTime'](_0x150431){this['time']=_0x150431;}}class Vy{constructor(_0x5e94ec,_0x419d49){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x867*0x3+0x1327+0x60e)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x5e94ec,this['gsplatData']=_0x419d49,this['isDestroye'+'d']=!(0x64*0x3+-0x2035+-0x1f0a*-0x1));const _0x22f380=0x8*-0x1c6+0xb*-0x5c+0x12a4,_0x4e19cc=Math['ceil'](_0x419d49['numSplats']/_0x22f380)*_0x22f380/_0x22f380,_0x58bee5=new Uint32Array(_0x4e19cc);for(let _0x3db3f4=0xc5*0x1d+0x22ca+-0x391b;_0x3db3f4<_0x4e19cc;++_0x3db3f4)_0x58bee5[_0x3db3f4]=_0x3db3f4*_0x22f380;const _0x45601e=new zt(_0x5e94ec,[{'semantic':Fh,'components':0x1,'type':Do,'asInt':!(-0x2382+0x18fd+0xa85)}]),_0x9f9f35=new Float32Array((-0x20*0xeb+0x4*-0x4a9+0x3010)*_0x22f380),_0x4955b3=new Uint32Array((0x1b23+0xad5+-0x25f2)*_0x22f380);for(let _0x3dafc3=-0x3*-0x74c+0xa0e+-0x1ff2;_0x3dafc3<_0x22f380;++_0x3dafc3){_0x9f9f35['set']([-(0x243e+-0x1681+-0xdbc),-(0x1311+0x656*0x4+-0x62*0x74),_0x3dafc3,-0x17ff*-0x1+-0x1b5a+-0x4*-0xd7,-(0x20e6+0x708+-0x1*0x27ed),_0x3dafc3,0xce7+-0xdab+0xc5,0x4*0x73c+-0x1ef1+-0x2*-0x101,_0x3dafc3,-(-0x1bda+-0xa55+0x2630),-0x11fa+-0x1*-0x32+-0x1d*-0x9d,_0x3dafc3],_0x3dafc3*(0x246+-0x698+0x56*0xd));const _0x2bfe79=_0x3dafc3*(-0x14c+0x8b+0x1*0xc5);_0x4955b3['set']([-0x23de+-0x1*0xfc7+0x33a5+_0x2bfe79,0x1*-0x2216+0x1033+-0x479*-0x4+_0x2bfe79,0x2000+-0x1*-0x215b+-0x4159+_0x2bfe79,0x1b69+-0x4*-0x424+-0x2bf9*0x1+_0x2bfe79,-0x25f8+-0x8c*-0x2c+0x112*0xd+_0x2bfe79,0x4bf+0x2ae+0x92*-0xd+_0x2bfe79],_0x3dafc3*(-0x20f1+0x1549+-0x2e*-0x41));}this['mesh']=new Ge(_0x5e94ec),this['mesh']['setPositio'+'ns'](_0x9f9f35,-0x4a*-0x25+-0x1*0x24b5+-0xd03*-0x2),this['mesh']['setIndices'](_0x4955b3),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new xs(_0x5e94ec,_0x45601e,_0x4e19cc,{'usage':ls,'data':_0x58bee5['buffer']});}['updateData'](){var _0x2e8b1b;const _0x33b2e6=this['gsplatData'];if(!_0x33b2e6)return;const _0x4030bd=-0x4c7*-0x1+0x7f*0x11+-0x2*0x65b,_0x207afb=Math['ceil'](_0x33b2e6['numSplats']/_0x4030bd)*_0x4030bd/_0x4030bd,_0x5ba2f3=new Uint32Array(_0x207afb);for(let _0x5712a5=0x1*0x2f1+0x9*0x3ad+-0x2406;_0x5712a5<_0x207afb;++_0x5712a5)_0x5ba2f3[_0x5712a5]=_0x5712a5*_0x4030bd;const _0x7818ee=new zt(this['device'],[{'semantic':Fh,'components':0x1,'type':Do,'asInt':!(-0x112b+0x1*-0x22f1+0x341c)}]),_0x2730b7=new Float32Array((-0x8d+0x183d+-0x17a4)*_0x4030bd),_0x2cf3aa=new Uint32Array((0x6*-0x58a+-0x36e*0x4+-0x6b6*-0x7)*_0x4030bd);for(let _0x100d5d=-0x1a89*-0x1+-0x25c2+0xb39;_0x100d5d<_0x4030bd;++_0x100d5d){_0x2730b7['set']([-(0x3b3*-0x4+-0x1e3b+0x2d08),-(-0x19d9+-0x2d0+-0x6*-0x4c7),_0x100d5d,0x1c9*0x5+0xe68+0x2*-0xbaa,-(-0x2*-0x967+0x26a3+-0x3970),_0x100d5d,0x1823+-0x1648+-0xed*0x2,0x13f5+-0x12af+-0x145,_0x100d5d,-(0x94*0x35+-0x164a+-0x859),-0x178*-0xd+-0x177d+0x466,_0x100d5d],_0x100d5d*(-0x1*0x243+-0x1*-0x3ea+-0x19b));const _0x28f1d2=_0x100d5d*(0xee9+-0x1c67+-0xb6*-0x13);_0x2cf3aa['set']([0xa79*-0x1+-0xb2+-0x1*-0xb2b+_0x28f1d2,-0x873+0xfbc+-0x748+_0x28f1d2,-0x193*-0xd+0x1*0xcc8+-0x7f*0x43+_0x28f1d2,0x12cb+0x13*-0x9+-0x488*0x4+_0x28f1d2,0x2b7*0xd+-0x2*0xcfc+0xf*-0x9f+_0x28f1d2,-0x4e9+-0x1*0x1be8+0x20d4*0x1+_0x28f1d2],_0x100d5d*(0x1c9a+0x1d3f*0x1+0x83*-0x71));}this['mesh']['setPositio'+'ns'](_0x2730b7,0x2*-0xf86+-0xf65*0x1+0x3df*0xc),this['mesh']['setIndices'](_0x2cf3aa),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x2e8b1b=this['instanceIn'+'dices'])==null||_0x2e8b1b['destroy'](),this['instanceIn'+'dices']=new xs(this['device'],_0x7818ee,_0x207afb,{'usage':ls,'data':_0x5ba2f3['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x252dc7,_0xdf5a6a,_0x38c446,_0x3b85a7;(_0x252dc7=this['mesh'])==null||_0x252dc7['destroy'](),(_0xdf5a6a=this['instanceIn'+'dices'])==null||_0xdf5a6a['destroy'](),(_0x38c446=this['gsplatData'])==null||_0x38c446['destroy'](),this['gsplatData']=null,(_0x3b85a7=this['gsplatInst'+'ance'])==null||_0x3b85a7['destroy'](),this['gsplatInst'+'ance']=void(0x4bd*0x3+-0x10*0x1ad+-0x5*-0x285),this['isDestroye'+'d']=!(-0x17f0+-0x1ca1+-0x1*-0x3491),this['mesh']=null;}get['instanceSi'+'ze'](){return-0x1f83*-0x1+-0x171+-0x1d92;}get['numSplats'](){var _0x5b32e4;return(_0x5b32e4=this['gsplatData'])==null?void(0xb*-0x166+0x257f+-0x161d):_0x5b32e4['numSplats'];}['setSceneIn'+'fo'](_0x4d5788){}['configureM'+'aterial'](_0x33b2b2){}['evalTextur'+'eSize'](_0x379e3a){return J['ZERO'];}['appendGSpl'+'atResource'](_0x46767b,_0x3eaa03,_0x138810,_0x4cfc4a,_0x4a44e9){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x1b85b5,_0xbdae50,_0x2adfc7,_0x426528){return new _e(this['device'],{'name':_0x1b85b5,'width':_0x2adfc7['x'],'height':_0x2adfc7['y'],'format':_0xbdae50,'cubemap':!(0x2341+-0x1af3+-0x84d),'mipmaps':!(-0x9b7+0x1573*0x1+-0xbbb),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x426528?{'levels':[_0x426528]}:{}});}['instantiat'+'e'](){M['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x497f34,_0x4e5872){return this['gsplatInst'+'ance']=new Lb(_0x497f34,_0x4e5872),this['gsplatInst'+'ance'];}}async function Rb(){const _0x193c01=new Float32Array(0x1*-0x26a6+0x1281+0x1*0x1426),_0x40437d=new Int32Array(_0x193c01['buffer']);let _0x1a89a0=null,_0x1776f8=null,_0x32c854=null,_0x496a4d=null,_0xecf668=null,_0x492530=null,_0x1d5615=null,_0x230aa1=null;self['onmessage']=async _0x185280=>{const {data:_0x422e99}=_0x185280;switch(_0x422e99['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x422ef6(_0x422e99['numSplats'],_0x422e99['shBands'],_0x422e99['SHData']);break;case'updateColo'+'rData':_0x4bef07(_0x422e99['numSplats'],_0x422e99['cr'],_0x422e99['cg'],_0x422e99['cb'],_0x422e99['ca']);break;case'updateTran'+'sformData':_0x9b6da7(_0x422e99['numSplats'],_0x422e99['is4D'],_0x422e99['x'],_0x422e99['y'],_0x422e99['z'],_0x422e99['rx'],_0x422e99['ry'],_0x422e99['rz'],_0x422e99['rw'],_0x422e99['mx'],_0x422e99['my'],_0x422e99['mz'],_0x422e99['sx'],_0x422e99['sy'],_0x422e99['sz'],_0x422e99['muT'],_0x422e99['tScale']);break;case'calcAabb':_0x50186f(_0x422e99['numSplats'],_0x422e99['x'],_0x422e99['y'],_0x422e99['z'],_0x422e99['sx'],_0x422e99['sy'],_0x422e99['sz']);break;case'destroyWor'+'ker':_0x5696a5();break;}};class _0x3c3eb9{constructor(_0x502605=0x56*0x35+-0x131f+-0x1*-0x151,_0x65eaea=-0xbbd+0x19*-0x25+0x106*0xf,_0x3df1dc=0x16*-0x84+0x757+0x5*0xcd,_0x34946b=0x1aa0+-0x3*-0x2b+-0x1b20){this['x']=_0x502605,this['y']=_0x65eaea,this['z']=_0x3df1dc,this['w']=_0x34946b;}['set'](_0x34093c,_0xd2728,_0x38aac8,_0x48d9f9){return this['x']=_0x34093c,this['y']=_0xd2728,this['z']=_0x38aac8,this['w']=_0x48d9f9,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x1068ee=this){let _0x3539b7=_0x1068ee['length']();return _0x3539b7===-0xa99+0x5e2+0x47*0x11?(this['x']=this['y']=this['z']=-0x1b78+0x608*0x2+0xf68,this['w']=0x2695+-0xf6*0x4+-0x22bc):(_0x3539b7=(0x2365*0x1+-0x732+-0x12*0x191)/_0x3539b7,this['x']=_0x1068ee['x']*_0x3539b7,this['y']=_0x1068ee['y']*_0x3539b7,this['z']=_0x1068ee['z']*_0x3539b7,this['w']=_0x1068ee['w']*_0x3539b7),this;}['mulScalar'](_0x3d2509,_0x196dfd=this){return this['x']=_0x196dfd['x']*_0x3d2509,this['y']=_0x196dfd['y']*_0x3d2509,this['z']=_0x196dfd['z']*_0x3d2509,this['w']=_0x196dfd['w']*_0x3d2509,this;}}const _0x39c789=_0x5edd3b=>{_0x193c01[-0x1012+-0x2700*0x1+-0x13*-0x2e6]=_0x5edd3b;const _0x16cb50=_0x40437d[-0x2cb+0x28*0x19+0x1*-0x11d];let _0x5d7bcc=_0x16cb50>>-0x97e+0xbf6*0x1+-0x16*0x1c&0x5*-0x2fa4+-0x1bb8+-0x11*-0x172c,_0x2f7969=_0x16cb50>>0x1dea*-0x1+0x2a5*-0x1+-0x1*-0x209b&-0x2*-0xec1+-0x811+-0xd72;const _0x53b5c7=_0x16cb50>>0x704+0x1c5+-0x8b2&0xd*0xb+-0x232f+-0x1*-0x239f;return _0x53b5c7<-0x17*0x16b+-0x20aa+0x962*0x7?_0x5d7bcc:_0x53b5c7>-0xcbc+0x1535+-0x1*0x7eb?(_0x5d7bcc|=0x1d95*0x3+0x5bf*0x18+-0x66a7,_0x5d7bcc|=(_0x53b5c7===0x8e*-0xe+-0x16d8+0x1f9b?0x7*0x3a1+-0x2*-0x66a+0x1*-0x263b:-0xa65+-0x251c+0x2*0x17c1)&&_0x16cb50&0x47bf52+0x14*0x97215+0x12f391*-0x7,_0x5d7bcc):_0x53b5c7<-0x6+0x49a+0x3*-0x161?(_0x2f7969|=0x1*-0x982+-0x1*0xab2+0x1c34,_0x5d7bcc|=(_0x2f7969>>0x125*-0x2+0x4*-0x2ea+0xe64-_0x53b5c7)+(_0x2f7969>>0x1e74+0xefa+0xb*-0x417-_0x53b5c7&0x18ce+-0x1*0x14c3+-0x40a),_0x5d7bcc):(_0x5d7bcc|=_0x53b5c7-(-0x2d8+0x2386+-0x203e)<<0x229f*0x1+-0x750+-0x1b45|_0x2f7969>>0x1293*0x1+0x1*-0x1e4+-0x356*0x5,_0x5d7bcc+=_0x2f7969&0x7c9*-0x3+0x2*0x135e+-0x8*0x1ec,_0x5d7bcc);},_0x50186f=(_0x374e45,_0x3a6649,_0x304165,_0xe4168c,_0x48032d,_0x4f0fa7,_0x582a31)=>{let _0x22ffa2=-0x1782+-0xe3e*0x1+0x25c0,_0x32eb66=-0x86*-0x17+0x1a6a+-0x2674,_0x240f09=-0xa7*0x12+0x14ec+-0x92e,_0x143b99=0x3bc+-0x1d20+0x1964,_0x339d5=-0xf0b+-0x7b6+-0x5*-0x48d,_0x4e9376=0xbc*-0x11+0xb*-0xa1+0x1367,_0x4eee7a=!(-0xd95+0x2251+-0x1*0x14bc);const _0x1ebde9=new Float32Array(-0x4*-0x861+-0x3d9*-0x3+-0x2d0c),_0x3c2756=new Float32Array(0xa6d*-0x2+0x2372+0xe95*-0x1);for(let _0x233988=0x2*0x5bf+0x264a+-0x6c*0x76;_0x233988<_0x374e45;++_0x233988){const _0x3ded2e=_0x3a6649[_0x233988],_0x4cb787=_0x304165[_0x233988],_0x54cecb=_0xe4168c[_0x233988],_0x12be03=Math['max'](_0x48032d[_0x233988],_0x4f0fa7[_0x233988],_0x582a31[_0x233988]);if(!isFinite(_0x3ded2e)||!isFinite(_0x4cb787)||!isFinite(_0x54cecb)||!isFinite(_0x12be03))continue;const _0x1928a8=(0x25a0+0x3e0+-0x297e)*Math['exp'](_0x12be03);_0x4eee7a?(_0x4eee7a=!(-0x1*0x72+0x223*-0x4+-0x31*-0x2f),_0x22ffa2=_0x3ded2e-_0x1928a8,_0x32eb66=_0x4cb787-_0x1928a8,_0x240f09=_0x54cecb-_0x1928a8,_0x143b99=_0x3ded2e+_0x1928a8,_0x339d5=_0x4cb787+_0x1928a8,_0x4e9376=_0x54cecb+_0x1928a8):(_0x22ffa2=Math['min'](_0x22ffa2,_0x3ded2e-_0x1928a8),_0x32eb66=Math['min'](_0x32eb66,_0x4cb787-_0x1928a8),_0x240f09=Math['min'](_0x240f09,_0x54cecb-_0x1928a8),_0x143b99=Math['max'](_0x143b99,_0x3ded2e+_0x1928a8),_0x339d5=Math['max'](_0x339d5,_0x4cb787+_0x1928a8),_0x4e9376=Math['max'](_0x4e9376,_0x54cecb+_0x1928a8));}_0x4eee7a||(_0x1ebde9[-0x18*0x167+0x1*0x174b+0xa5d*0x1]=(_0x22ffa2+_0x143b99)*(-0x1e26+0x8f8*0x3+0x1*0x33e+0.5),_0x1ebde9[-0x55b*-0x6+-0x80*-0xc+0x2b*-0xe3]=(_0x32eb66+_0x339d5)*(0xfa0*0x2+-0x22a4+-0x1f*-0x1c+0.5),_0x1ebde9[-0xb6*0x1b+-0xaa*-0x18+0xb*0x4c]=(_0x240f09+_0x4e9376)*(-0xd22+0x679*0x4+-0x8e*0x17+0.5),_0x3c2756[0x4d*0x3c+-0x54b*-0x5+-0x2c83]=(_0x143b99-_0x22ffa2)*(0x6dd*-0x1+0x252b*0x1+0x1e4e*-0x1+0.5),_0x3c2756[-0xc59*0x3+-0xe*-0xc7+-0xd15*-0x2]=(_0x339d5-_0x32eb66)*(-0x221f+0x3*0xa4d+-0x2*-0x19c+0.5),_0x3c2756[0x11d0+0x1574*0x1+-0x13a1*0x2]=(_0x4e9376-_0x240f09)*(-0x1991+0x16c7+0x2ca+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x1ebde9,'halfExtents':_0x3c2756});},_0x9b6da7=(_0x396506,_0x57a6e5,_0x223793,_0x4b2948,_0x4e9856,_0x3de959,_0x2e2d3b,_0x2bd46e,_0x4c2aac,_0xe1d57a,_0x3f5647,_0x386f90,_0x3df0ef,_0x107c95,_0x2746d1,_0x2b5b79,_0x25c1c9)=>{_0x5696a5(),_0x1a89a0=new Float32Array(_0x396506*(0x2217+0x21*-0xf1+-0x303)),_0x496a4d=new Float32Array(_0x396506*(0x48d+0x305*-0x5+0xa8f)),_0x492530=new Uint16Array(_0x396506*(-0x12*-0x1f1+-0x46e+-0x89*0x39)),_0x32c854=new Float32Array(_0x396506*(0x791+-0x1*0xf05+0x7*0x111)),_0x57a6e5&&(_0xecf668=new Float32Array(_0x396506*(0x203*-0x1+0xd54+-0x5a7*0x2)),_0x1776f8=new Float32Array(_0x396506*(0x6de+-0x238e+-0x1*-0x1cb3)),_0x1d5615=new Float32Array(_0x396506*(0x1564+-0xf9a*-0x2+-0x3495)),_0x230aa1=new Float32Array(_0x396506));const _0x55e028=new _0x3c3eb9(0x199*0x13+-0x24c9+-0x337*-0x2,0x189c+-0x10a8+-0x7f4,-0x158*-0x10+-0x771+-0xe0f,-0x1e55*0x1+-0x93b+0x2790);for(let _0x1594c9=0x1b*0x63+0x1f79+-0x122*0x25;_0x1594c9<_0x396506;_0x1594c9++)_0x55e028['set'](_0x3de959[_0x1594c9],_0x2e2d3b[_0x1594c9],_0x2bd46e[_0x1594c9],_0x4c2aac[_0x1594c9]),_0x55e028['normalize'](),_0x55e028['w']<0x1ef*0x5+-0xe1c+-0x17b*-0x3&&_0x55e028['mulScalar'](-(0x1*0x1415+-0x3b*0x22+-0xc3e)),_0x496a4d[_0x1594c9*(-0x1*0x190a+0xda9+-0x51*-0x24)+(0x3*0x93b+-0xc2*-0x17+-0x2d1f)]=_0x223793[_0x1594c9],_0x496a4d[_0x1594c9*(0x3*0x2b5+0x2*0xcc5+-0x21a6)+(0x2706+-0xbd0+-0x1b35)]=_0x4b2948[_0x1594c9],_0x496a4d[_0x1594c9*(0x4cc+0x123d+-0xe*0x1a5)+(-0x1*-0xa44+0x65c+-0x109e)]=_0x4e9856[_0x1594c9],_0x1a89a0[_0x1594c9*(0x2551+0xd6*-0x2e+0x126)+(-0x1e5d+-0x1*0x242b+0x4288)]=_0x223793[_0x1594c9],_0x1a89a0[_0x1594c9*(-0x223a+0x8d1+-0x196c*-0x1)+(0x1da9+-0x1c19+-0x18f)]=_0x4b2948[_0x1594c9],_0x1a89a0[_0x1594c9*(0x601+-0x1741+0x1*0x1143)+(0x539+-0x25*0xfd+0x1f5a)]=_0x4e9856[_0x1594c9],_0x492530[_0x1594c9*(0x41*-0x96+-0xc46*-0x2+0x1*0xd8d)+(0x250e+-0x1dfa*0x1+0x4*-0x1c5)]=_0x39c789(Math['exp'](_0x3df0ef[_0x1594c9])),_0x492530[_0x1594c9*(-0x25cd+-0x1*0x18a7+0x3e77)+(0x1e5e+0x101e*0x2+0x1*-0x3e99)]=_0x39c789(Math['exp'](_0x107c95[_0x1594c9])),_0x492530[_0x1594c9*(0xc99+-0x1016+0x380)+(-0x1f55+-0x86c+0x27c3)]=_0x39c789(Math['exp'](_0x2746d1[_0x1594c9])),_0x32c854[_0x1594c9*(-0x16b2+0x2475+-0x8*0x1b8)+(0x1f56+-0x1e1*0x12+0x27c)]=_0x55e028['x'],_0x32c854[_0x1594c9*(-0x1*0x1ed7+-0x10c1*-0x2+0x14*-0x22)+(-0x8*-0x28+-0x111a+0x9*0x1c3)]=_0x55e028['y'],_0x32c854[_0x1594c9*(0xa6*-0x34+0xdeb+0x10*0x13d)+(0x497*-0x4+-0x78f+0x1*0x19ed)]=_0x55e028['z'],_0x57a6e5&&_0xecf668&&_0x1776f8&&(_0xecf668[_0x1594c9*(0x135*0xf+-0x1*-0x654+-0x186c)+(-0x20f6+-0x17*0x108+0x5ab*0xa)]=_0xe1d57a[_0x1594c9],_0xecf668[_0x1594c9*(-0x1c13+0x225e+-0x648)+(0x1*-0x1619+-0x18b9*0x1+0x2ed3)]=_0x3f5647[_0x1594c9],_0xecf668[_0x1594c9*(0xa55+-0x517*-0x6+-0x146e*0x2)+(0x1231*-0x1+0x1*0x22e5+-0x2*0x859)]=_0x386f90[_0x1594c9],_0x1d5615[_0x1594c9*(-0x2*0x178+-0x2618+0x290b)+(0x928+0x333+-0xc5b)]=_0xe1d57a[_0x1594c9],_0x1d5615[_0x1594c9*(-0x53a*0x3+0x1064+-0xb3)+(0x356*0xb+0x1*-0x183e+-0xc73*0x1)]=_0x3f5647[_0x1594c9],_0x1d5615[_0x1594c9*(0xfd6+-0x13c5+-0x5*-0xca)+(0x1ae0+-0x1*-0xf98+-0x5*0x87e)]=_0x386f90[_0x1594c9],_0x230aa1[_0x1594c9]=_0x25c1c9?Math['exp'](_0x25c1c9[_0x1594c9]):0x1*0x9ef+0x2*0xcc9+0x2381*-0x1,_0x1776f8[_0x1594c9*(-0x1*0xb3+0x272*-0x1+0x8*0x65)+(0xf82+0xcf6+-0x1c78)]=_0x2b5b79?_0x2b5b79[_0x1594c9]:0x181f+-0x1553+-0x2cc*0x1,_0x1776f8[_0x1594c9*(-0x2*-0xa07+-0x7c4+-0xc47)+(-0x43f+0x3ab*-0x2+0xb96)]=_0x230aa1[_0x1594c9]);const _0x59e044=[_0x1a89a0['buffer'],_0x496a4d['buffer'],_0x492530['buffer'],_0x32c854['buffer']];_0x57a6e5&&_0x59e044['push'](_0xecf668['buffer'],_0x1776f8['buffer'],_0x1d5615['buffer'],_0x230aa1['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x1a89a0,'dataPosition':_0x496a4d,'dataScale':_0x492530,'dataRotation':_0x32c854,'dataMotion':_0xecf668,'dataTime':_0x1776f8,'motion':_0x1d5615,'tScaleArray':_0x230aa1},_0x59e044);},_0x4bef07=(_0x47fc8d,_0x59d931,_0x46a0fa,_0x80dfa2,_0x2fb7d4)=>{const _0x2077b9=new Uint16Array(_0x47fc8d*(0x1f65+0x1b09+0x1*-0x3a6a)),_0x2775ea=-0x5d*0x3+-0x152b+0x1642+0.28209479177387814;for(let _0x207d17=0x51*0x3+0x2571+-0x2664;_0x207d17<_0x47fc8d;++_0x207d17){const _0x5daa96=_0x59d931[_0x207d17]*_0x2775ea+(0x1d36*-0x1+0x5*-0x2dd+-0x1*-0x2b87+0.5),_0x5153b8=_0x46a0fa[_0x207d17]*_0x2775ea+(0x1c99*0x1+-0x21f6+0x55d*0x1+0.5),_0x5466fb=_0x80dfa2[_0x207d17]*_0x2775ea+(0x1*0xdcc+-0x28*0xb5+0x24*0x67+0.5),_0x462fea=_0x2fb7d4[_0x207d17];_0x2077b9[_0x207d17*(-0x18e*-0xa+0x1171+-0x20f9)+(0x4dd+-0x138d+0x3ac*0x4)]=_0x39c789(_0x5daa96),_0x2077b9[_0x207d17*(-0x68*0xd+0x2239+-0x1ced)+(-0xfe7+0x411*0x5+0x46d*-0x1)]=_0x39c789(_0x5153b8),_0x2077b9[_0x207d17*(0x1*0x13cf+-0x157*-0x6+-0x3*0x947)+(-0x23e3*-0x1+-0x49*-0x2f+-0x3148)]=_0x39c789(_0x5466fb),_0x2077b9[_0x207d17*(-0x118a+0x1a73+0x17*-0x63)+(0x1025*-0x2+0x1f98+-0xb5*-0x1)]=_0x39c789(_0x462fea);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x2077b9});},_0x422ef6=(_0x4d46e3,_0x1ea2f6,_0x3e8a64)=>{const _0x1c3953=new Uint32Array(_0x4d46e3*(-0x267*0x2+0x1da3+-0x18d1)),_0x3a5fbe=new Uint32Array(_0x4d46e3*(0x213d+0xf1*-0x4+-0x1d75)),_0x2e8288=new Uint32Array(_0x4d46e3*(-0x5*-0x74b+-0x16b4+-0x11*0xcf)),_0xf534c5=new Uint32Array(_0x4d46e3*(0x11*0x227+0x175f+0x3bf2*-0x1)),_0x39241e={0x1:0x3,0x2:0x8,0x3:0xf}[_0x1ea2f6],_0x20c610=_0x3e8a64,_0x21b41e=0x129a*0x1+-0x3*-0x775+-0x6*0x57f,_0x26be5d=0x167*0xd+-0x1cc9+0xe8d,_0xcb27fe=new Float32Array(-0x121+0xd2+0x50),_0x571a6b=new Uint32Array(_0xcb27fe['buffer']),_0x5722a2=new Array(_0x39241e*(0x245e+0xbf4+0x95*-0x53))['fill'](0xf71+0x265a*-0x1+-0xff*-0x17);for(let _0x5006db=0x385+0xd*-0x2b4+0x1f9f;_0x5006db<_0x4d46e3;++_0x5006db){for(let _0x245af8=0x4*-0x86b+0x127e+-0x86*-0x1d;_0x245af8<_0x39241e;++_0x245af8)_0x5722a2[_0x245af8*(0x6a8*0x1+0x415*-0x2+0x185*0x1)]=_0x20c610[_0x245af8][_0x5006db],_0x5722a2[_0x245af8*(0x1896+0x214e+-0x39e1)+(-0x19a3*-0x1+0x6*-0x170+-0x26e*0x7)]=_0x20c610[_0x245af8+_0x39241e][_0x5006db],_0x5722a2[_0x245af8*(-0x5b1*-0x2+0x2229+-0x2d88)+(-0x12dd+0x1d*-0xb+-0xa*-0x203)]=_0x20c610[_0x245af8+_0x39241e*(-0xd86+0xb5b+-0x1*-0x22d)][_0x5006db];let _0x35fb47=_0x5722a2[-0x2645+0x151e+0x1127];for(let _0x1957b0=-0x43b+-0x22e1*-0x1+-0x1ea5;_0x1957b0<_0x39241e*(-0xfe5+-0x1049*0x1+0x2031);++_0x1957b0)_0x35fb47=Math['max'](_0x35fb47,Math['abs'](_0x5722a2[_0x1957b0]));if(_0x35fb47!==0x1c*0xa0+-0xdd8+-0x2*0x1d4){for(let _0x3265eb=0x5e*0xf+0x1492+-0x1a14;_0x3265eb<_0x39241e;++_0x3265eb)_0x5722a2[_0x3265eb*(0x1*-0xdfe+-0x7de+0x15df)+(0x2*-0xbe4+0x7db+0x3*0x54f)]=Math['max'](-0x1*0x15d3+0xcca+-0x9*-0x101,Math['min'](_0x21b41e,Math['floor']((_0x5722a2[_0x3265eb*(0x4*-0x239+-0x37f*0x5+0x1a62)+(0xa06+-0xe9b*-0x1+-0x18a1)]/_0x35fb47*(0x1d91+-0x185b+-0x536+0.5)+(0xb26*-0x3+0xe93+0x12df+0.5))*_0x21b41e+(-0xaf+-0x50*0x7b+0x271f+0.5)))),_0x5722a2[_0x3265eb*(-0xd2b*-0x1+0x1d05+-0x2a2d*0x1)+(-0x1e*0xe1+-0x2582+-0x3*-0x154b)]=Math['max'](-0x50a+-0x1c04+0x2*0x1087,Math['min'](_0x26be5d,Math['floor']((_0x5722a2[_0x3265eb*(-0x19f6+-0x221*0x12+-0x97*-0x6d)+(0x294*-0x2+-0x1c9+-0xfe*-0x7)]/_0x35fb47*(-0x1d35*0x1+0x11b9+-0x46*-0x2a+0.5)+(0x1e4c+0x19d4+-0x3820+0.5))*_0x26be5d+(-0x683*-0x1+-0x1598+-0xb*-0x15f+0.5)))),_0x5722a2[_0x3265eb*(-0x185c*-0x1+-0x1*0x1816+-0x43)+(-0x1f0d+-0x2*-0xd41+-0x1*-0x48d)]=Math['max'](-0x24fe+-0x1*-0x21d3+0x32b,Math['min'](_0x21b41e,Math['floor']((_0x5722a2[_0x3265eb*(-0x1ba5+0x1*0x1882+-0x1f*-0x1a)+(0x460+0xd6+-0x9*0x94)]/_0x35fb47*(-0x1*-0x9d+0x17d*-0x17+-0x1*-0x219e+0.5)+(0x1*-0x1241+0x13a7+0xb3*-0x2+0.5))*_0x21b41e+(-0x18f1*0x1+-0xfb8+0x7*0x5cf+0.5))));_0xcb27fe[0x7cd*0x2+-0x19c6+0xc*0xd9]=_0x35fb47,_0x1c3953[_0x5006db*(0x22ca+-0x1c3*0x2+-0x1f40)+(-0x1*-0x141b+0x115*0x9+0xbf*-0x28)]=_0x571a6b[-0x27*-0xbf+0x107a+-0x3*0xf31],_0x1c3953[_0x5006db*(-0x1c2a+0x3*0x402+0x814*0x2)+(-0xcfd+-0x7*0x184+-0x13e*-0x13)]=_0x5722a2[-0x501+0x1c1f+-0x171e]<<0x5*0x6db+-0xd45+0x1*-0x14ed|_0x5722a2[0x6*0x4e8+0x124+-0x1e93]<<-0x2bc*-0x2+-0x25e0+0x2073|_0x5722a2[0x2b3*-0xe+-0x4aa+-0x153b*-0x2],_0x1c3953[_0x5006db*(0x728+-0x209b+-0x7b*-0x35)+(0x5bf*0x5+-0x2299*-0x1+-0x1fa9*0x2)]=_0x5722a2[-0x463+0x876+0x2*-0x208]<<0xa86+-0x2*-0xa54+-0x1f19*0x1|_0x5722a2[0xb2d*0x1+0x9*0x184+-0x18cd]<<-0x1163+0x4fb+-0x1*-0xc73|_0x5722a2[-0x1*0x39+0x1*-0x8e9+0x47*0x21],_0x1c3953[_0x5006db*(-0x24ff+-0x1*-0x71f+0x779*0x4)+(-0xdb5+0x293*-0x5+-0x3*-0x8dd)]=_0x5722a2[-0x25d6+-0x1ee0+-0xa6*-0x6a]<<-0x12d7+0x2114+-0xe28|_0x5722a2[0x1780+-0x96*0x2c+0x24f]<<0x1430+-0x2213+-0x6f7*-0x2|_0x5722a2[-0x1783+-0xd64*0x1+0x24ef],_0x1ea2f6>-0x1*0x1684+-0x1e90+0x3515&&(_0x3a5fbe[_0x5006db*(-0x1*0xfab+-0x2*0xbf1+-0x7*-0x5a7)+(0x1675+0xd44+-0x725*0x5)]=_0x5722a2[-0x1*0x6b6+-0x1c9f+-0x9*-0x3ee]<<0x67a*0x1+0x750+-0xdb5|_0x5722a2[0x15b2*0x1+-0x1a69+0x1*0x4c1]<<0x249*0x11+-0x21*-0x45+-0x2fb3*0x1|_0x5722a2[0x479+-0x1d3c+-0x5*-0x4f6],_0x3a5fbe[_0x5006db*(0x1*-0x155f+-0x85+0x1*0x15e8)+(0xe*-0x134+0x19cd+-0x8f4)]=_0x5722a2[0x54a+0x29*0x4b+0x7*-0x277]<<0x46c+-0x1400+0xfa9*0x1|_0x5722a2[0x600+0x228d+0x1440*-0x2]<<-0xa8d*0x2+0x47*-0x3d+0x2610|_0x5722a2[-0x1a3f+-0x1*0x13ff+0x1726*0x2],_0x3a5fbe[_0x5006db*(-0x1841*-0x1+-0x199*-0x16+-0x3b63)+(-0x1d83+-0x1*-0x1a1b+-0x2*-0x1b5)]=_0x5722a2[-0x1ebd+0x43b+0x1*0x1a91]<<0x1*0x1eef+-0x1*0xbea+-0x12f0|_0x5722a2[-0x1*0x2329+0x1*-0x1dd5+0x410e]<<-0x7*-0x211+0x127*0x7+0x3*-0x77f|_0x5722a2[0x2e*0xa3+0x2419*0x1+0x12*-0x3a1],_0x3a5fbe[_0x5006db*(-0x756*-0x4+-0x23f2+-0xb*-0x9a)+(-0x1*0x2237+0x22f9+-0xbf)]=_0x5722a2[-0xb7+-0x1*-0x6d9+-0x610*0x1]<<0xb9c+-0x2438+0x93*0x2b|_0x5722a2[-0x153e+-0x1ead+0x33fe]<<-0x1d1f+-0xe1a*-0x1+0x10*0xf1|_0x5722a2[-0x1b6*0x7+0x1*-0xaa+-0x65c*-0x2],_0x1ea2f6>-0x279*0xf+-0x2385+0x82*0x8f?(_0x2e8288[_0x5006db*(-0x3*-0x627+-0x5*0xa5+-0x2*0x79c)+(-0x74f+-0x62f+0xd7e)]=_0x5722a2[-0x539*-0x1+-0xefe+0x9da]<<-0x225*0x10+0x210e+-0x157*-0x1|_0x5722a2[-0x20c5+0x16ca*0x1+-0x3*-0x35b]<<0x1*-0x1b4+0x1ae9+-0x192a|_0x5722a2[0xe70+0x71*0x3e+-0x29b7],_0x2e8288[_0x5006db*(-0x1ee4+0x150e+0x9da)+(-0x1*-0x192c+-0x1c30+0x305)]=_0x5722a2[-0x487*0x1+-0x1718+0x1bb7]<<-0x1*-0x1a75+-0x47*0x7+-0x186f|_0x5722a2[0x192e+0x235+-0xda5*0x2]<<-0x11cf+0x18d*0x11+-0x1*0x883|_0x5722a2[0xcc7*-0x1+-0x104d+0x1d2e],_0x2e8288[_0x5006db*(-0x1*0x265b+-0x1*0x2361+0x49c0)+(-0x1f7c+0xd*0x6e+0x19e8)]=_0x5722a2[-0x1754+0x22d*-0x11+0x3c6c]<<-0x1baa+-0x5*-0x319+0xc42|_0x5722a2[-0x15a2+-0x1*-0x4f+0x156f]<<-0x21a6+-0x219f+-0x21a8*-0x2|_0x5722a2[0xbaf+-0x1*-0xc63+0x17f5*-0x1],_0x2e8288[_0x5006db*(0x2cf*-0xb+-0x176f+0x3658)+(-0x1b5d+0xfb*-0x21+-0x3*-0x13e9)]=_0x5722a2[-0xcac*0x3+-0x2*0x96b+-0x38f8*-0x1]<<0x1bb5+-0x1b51+-0x4f|_0x5722a2[0xb61*0x1+-0x106*-0x1a+-0x1*0x25de]<<0x24d*0x1+-0x7*0x4d+-0x27*0x1|_0x5722a2[0x8*-0x447+0x236a+-0x112],_0xf534c5[_0x5006db*(-0x35*0x1f+0xa17+-0x3a8)+(0x4a2+-0x11f7+0xd55)]=_0x5722a2[-0x76f*0x5+-0x7fe+0x2d4a]<<0x80b+-0xf*0x122+0x908|_0x5722a2[0x207d+-0x2a6*0x1+-0x1db5]<<0xe63+-0x1*-0xa91+-0x18e9|_0x5722a2[0x21cc+-0x1*-0x1f0f+-0x1*0x40b8],_0xf534c5[_0x5006db*(0x1f*-0x2c+-0x17c2+0x1d1a)+(-0xf9a+-0x2*-0x728+-0x1*-0x14b)]=_0x5722a2[-0x166f+0x16d8+-0x45]<<-0x2ef*0xd+-0x97+-0x26cf*-0x1|_0x5722a2[-0x11a6+0x1*0x21dc+-0x1011]<<0xa2*-0x8+-0x197a+0x1e95|_0x5722a2[-0x101d+-0x6*0xa6+0x1427],_0xf534c5[_0x5006db*(-0xbde+-0x5*0x72+-0x7*-0x204)+(0x18bb+-0x1574+-0x345)]=_0x5722a2[-0x430+-0x1*-0x31+-0x213*-0x2]<<-0x155+0xc27*0x3+-0x230b|_0x5722a2[-0xe3b*0x1+0x13*-0x115+0x22f2]<<0x209f+0x5ab*-0x1+0x1ae9*-0x1|_0x5722a2[-0x117f+-0x239*0x3+0x1853],_0xf534c5[_0x5006db*(-0x2514+0x66*-0x50+0x113e*0x4)+(0x18dc+-0x46*0xd+0x719*-0x3)]=_0x5722a2[-0x1*-0x525+-0x3*-0x8dd+-0x1f92]<<-0x146d+-0xc51+-0x1*-0x20d3|_0x5722a2[-0x2694+0x1*-0x121a+0x38d9]<<0x12b4+0x509*-0x1+-0x4*0x368|_0x5722a2[-0x21f1*0x1+-0x1aa7*0x1+0x3cc4]):_0x2e8288[_0x5006db]=_0x5722a2[0x5*0x559+-0x13d6*0x1+-0x6d2]<<-0x2462+0x1ad8+-0x335*-0x3|_0x5722a2[0x1*-0xe0f+0x647+0x7de]<<0x10e2+-0x1*0xd45+0x1*-0x392|_0x5722a2[-0x1*-0xaff+0x101*-0x1c+-0x6*-0x2de]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x1c3953,'sh4to7Data':_0x3a5fbe,'sh8to11Data':_0x2e8288,'sh12to15Data':_0xf534c5}},[_0x1c3953['buffer'],_0x3a5fbe['buffer'],_0x2e8288['buffer'],_0xf534c5['buffer']]);},_0x5696a5=()=>{_0x1a89a0=null,_0x1776f8=null,_0x32c854=null,_0x496a4d=null,_0xecf668=null,_0x492530=null,_0x1d5615=null,_0x230aa1=null;};}let Ob=class extends pe{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Rb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0xa25078,_0x8fda72,_0x429287){_0xa25078['onmessage']=_0x43ccd8=>{if(!this['worker'])return;const {data:_0x32f65a}=_0x43ccd8;if(_0x32f65a['type']===_0x8fda72)switch(_0x8fda72){case'updatedSHD'+'ata1':_0x429287(_0x32f65a['data']);break;case'updatedCol'+'orData':_0x429287(_0x32f65a['data']);break;case'updatedTra'+'nsformData':_0x429287(_0x32f65a);break;case'updatedAab'+'bData':_0x429287(_0x32f65a);break;}};}['updateSHDa'+'ta1'](_0x55fb20,_0x57f500,_0x2157b9){var _0x5574d8;return(_0x5574d8=this['worker'])==null||_0x5574d8['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x55fb20,'shBands':_0x57f500,'SHData':_0x2157b9}),new Promise(_0xd87513=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x3a30d3=>{_0xd87513(_0x3a30d3);});});}async['updateColo'+'rData'](_0x54b0c2,_0x4683cd,_0x61ab6a,_0x22c212,_0x63b8d7){var _0x769de9;return(_0x769de9=this['worker'])==null||_0x769de9['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x54b0c2,'cr':_0x4683cd,'cg':_0x61ab6a,'cb':_0x22c212,'ca':_0x63b8d7}),new Promise(_0x168b2a=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x377c95=>{_0x168b2a(_0x377c95);});});}async['calcAabb'](_0x4fafdb,_0x2399dc,_0x30ee7a,_0x10553c,_0x487ebc,_0x3fbc68,_0x1f0292){var _0x5ebf86;const _0xc5ae8b=new Float32Array(_0x2399dc),_0x25e402=new Float32Array(_0x30ee7a),_0xa38192=new Float32Array(_0x10553c),_0x1604e1=new Float32Array(_0x487ebc),_0x40ec11=new Float32Array(_0x3fbc68),_0x486e00=new Float32Array(_0x1f0292);return(_0x5ebf86=this['worker'])==null||_0x5ebf86['postMessag'+'e']({'type':'calcAabb','numSplats':_0x4fafdb,'x':_0xc5ae8b,'y':_0x25e402,'z':_0xa38192,'sx':_0x1604e1,'sy':_0x40ec11,'sz':_0x486e00},[_0xc5ae8b['buffer'],_0x25e402['buffer'],_0xa38192['buffer'],_0x1604e1['buffer'],_0x40ec11['buffer'],_0x486e00['buffer']]),new Promise(_0x572372=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x376edd=>{_0x572372(_0x376edd);});});}async['updateTran'+'sData'](_0x2dca25,_0x11f28d,_0x42b4da,_0x1c5c44,_0x54f8d0,_0x33bc39,_0x20f731,_0x64b4cd,_0x91d5b8,_0x518f4d,_0x45838d,_0x7ef7e1,_0x5464b3,_0x5dc6f3,_0x5d4f5b,_0x2fb129,_0x2b4075){var _0x1ee4b4;return(_0x1ee4b4=this['worker'])==null||_0x1ee4b4['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x2dca25,'is4D':_0x11f28d,'x':_0x42b4da,'y':_0x1c5c44,'z':_0x54f8d0,'rx':_0x33bc39,'ry':_0x20f731,'rz':_0x64b4cd,'rw':_0x91d5b8,'mx':_0x518f4d,'my':_0x45838d,'mz':_0x7ef7e1,'sx':_0x5464b3,'sy':_0x5dc6f3,'sz':_0x5d4f5b,'muT':_0x2fb129,'tScale':_0x2b4075}),new Promise(_0x2dfeca=>{const _0x5dac1d=_0x16e279=>{_0x2dfeca(_0x16e279);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x5dac1d);});}['destroy'](){var _0x214d57;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x214d57=this['worker'])==null||_0x214d57['terminate'](),this['worker']=null);}};const F_=(_0x127dbb,_0x5939ff)=>{const _0x1180d8=[];for(let _0xbdc3cc=0x215*-0x5+-0x1b1a+0x2583;_0xbdc3cc<_0x5939ff;++_0xbdc3cc)_0x1180d8['push'](_0x127dbb['getProp']('f_rest_'+_0xbdc3cc));return _0x1180d8;};class Fb extends Vy{constructor(_0x251adc,_0x2f8974){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x251adc,_0x2f8974),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x2*0x94f+0xbe1*0x3+0x1b2*-0x20)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new Ob(),this['assetsMana'+'gerLoadedT'+'ime']=0x3b*0xa+0x12a8+0x1*-0x14f1);}async['updateData'](){var _0x4eb707,_0x49a6d5,_0x279a91,_0x105e8c,_0x28b5ce,_0x308690,_0x17c981,_0x2e3364,_0x39dffc,_0x40b570,_0x321c72;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x528b7b=this['gsplatData'];if(!_0x528b7b)return;this['is4D']=_0x528b7b['is4D'];const _0x3ebd4a=await this['getTransfo'+'rmDataByWo'+'rker'](_0x528b7b);this['aabb']=new Ie(),await _0x528b7b['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x3ebd4a['centers'],this['motion']=_0x3ebd4a['motion'],this['tScale']=_0x3ebd4a['tScaleArra'+'y'],this['muT']=await _0x528b7b['getMuT'](),this['timeIndex']=await _0x528b7b['getTimeInd'+'ex']();const _0x23150c=this['evalTextur'+'eSize'](_0x528b7b['numSplats']);this['colorTextu'+'re']?((_0x4eb707=this['colorTextu'+'re2'])==null||_0x4eb707['destroy'](),(_0x49a6d5=this['transformA'+'Texture2'])==null||_0x49a6d5['destroy'](),(_0x279a91=this['transformB'+'Texture2'])==null||_0x279a91['destroy'](),(_0x105e8c=this['transformR'+'Texture2'])==null||_0x105e8c['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x23150c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x23150c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x23150c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x23150c),this['is4D']&&((_0x28b5ce=this['transformM'+'otionTextu'+'re2'])==null||_0x28b5ce['destroy'](),(_0x308690=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x308690['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x23150c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x23150c))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',at,_0x23150c),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x23150c),this['transformA'+'Texture']=this['createText'+'ure']('transformA',je,_0x23150c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x23150c),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ri,_0x23150c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x23150c),this['transformR'+'Texture']=this['createText'+'ure']('transformR',je,_0x23150c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x23150c),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',je,_0x23150c),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x23150c),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',je,_0x23150c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x23150c))),await this['updateColo'+'rData'](_0x528b7b),await this['updateTran'+'sformFromD'+'ata'](_0x3ebd4a),this['shBands']=_0x528b7b['shBands'],this['shBands']>0xa7b*-0x2+-0x180b+-0x2d01*-0x1&&(this['sh1to3Text'+'ure']?((_0x17c981=this['sh1to3Text'+'ure2'])==null||_0x17c981['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x23150c),this['shBands']>0x110b+0xb*0x116+-0x1cfc&&((_0x2e3364=this['sh4to7Text'+'ure2'])==null||_0x2e3364['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x23150c),this['shBands']>0x2462+0x3*0xa3f+-0x431d?((_0x39dffc=this['sh8to11Tex'+'ture2'])==null||_0x39dffc['destroy'](),(_0x40b570=this['sh12to15Te'+'xture2'])==null||_0x40b570['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x23150c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x23150c)):((_0x321c72=this['sh8to11Tex'+'ture2'])==null||_0x321c72['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x23150c)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x23150c),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ne,_0x23150c),this['shBands']>-0xb4b+-0x3*-0xa25+0xd5*-0x17&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ne,_0x23150c),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x23150c),this['shBands']>0x3d5*-0x7+0x129f+0x1*0x836?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ne,_0x23150c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x23150c),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ne,_0x23150c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x23150c)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Vi,_0x23150c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Vi,_0x23150c)))),await this['updateSHDa'+'taByWorker'](_0x528b7b));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x3595bc){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x3595bc}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x20091f,_0x30c8b3,_0x584eeb,_0x2321d2,_0x4f2efc){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x20091f,'timeOption':_0x30c8b3,'loadedTime':_0x584eeb,'asset':_0x2321d2,'events':_0x4f2efc}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x933+-0x12d5*0x1+-0x4d1*-0x2);try{for(;this['appendQueu'+'e']['length']>0x1433*-0x1+-0x6f*-0x1c+-0x80f*-0x1;){const _0x18e426=this['appendQueu'+'e']['shift']();_0x18e426['type']==='append'?await this['processApp'+'endTask'](_0x18e426['data']):_0x18e426['type']==='release'&&await this['processRel'+'easeTask'](_0x18e426['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x3*-0x9a+0x2c7*-0x9+-0xb99*-0x2);}}}async['processRel'+'easeTask'](_0x5ba764){const {index:_0x3c1b9f}=_0x5ba764;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x3c1b9f),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x3c1b9f);}async['processApp'+'endTask'](_0x548615){var _0x5d8488;const {gsplatData:_0x26602d,timeOption:_0x4fc3e0,loadedTime:_0x35d1f4,asset:_0x181c4e,events:_0x1b2024}=_0x548615;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x4fc3e0,await this['gsplatData']['appendGSpl'+'atData'](_0x26602d,_0x35d1f4,_0x4fc3e0),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x23b9+-0x1db2+-0x416d*-0x1),_0x26602d['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x26602d['numSplats'])['toFixed'](-0x26a7+-0x19f*-0x1+-0x6d*-0x57)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x17*-0xc5+-0x93a+0x1aef),_0x26602d['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x5d8488=this['gsplatInst'+'ance'])==null||_0x5d8488['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1*0x5d+0x2438+-0x3*0xc31),_0x26602d['numSplats']),this['asset']=_0x181c4e,this['assetsMana'+'gerLoadedT'+'ime']=_0x35d1f4,this['events']=_0x1b2024);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x3a9fe8;const _0x5435e6=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x5435e6),(_0x3a9fe8=this['asset'])==null||_0x3a9fe8['fire']('setAssetsL'+'oaded',_0x5435e6);}['destroy'](){var _0x5bb8b3,_0x25c4c7,_0x3f5344,_0x5e3da6,_0xd63d68,_0x4a1a73,_0x136e78,_0x1c4919,_0x438d7d,_0x37925a,_0x2fa81e,_0x19632e,_0x4eb223,_0x41e7fb,_0x3df714,_0x45ba5b,_0x3a32be,_0x4d434b,_0x25e8f8,_0x192a33,_0x2a0c8f;(_0x5bb8b3=this['updateData'+'Worker'])==null||_0x5bb8b3['destroy'](),this['updateData'+'Worker']=void(0x36c+-0x2531+0x21c5),(_0x25c4c7=this['colorTextu'+'re'])==null||_0x25c4c7['destroy'](),(_0x3f5344=this['transformA'+'Texture'])==null||_0x3f5344['destroy'](),(_0x5e3da6=this['transformB'+'Texture'])==null||_0x5e3da6['destroy'](),(_0xd63d68=this['transformR'+'Texture'])==null||_0xd63d68['destroy'](),(_0x4a1a73=this['transformM'+'otionTextu'+'re'])==null||_0x4a1a73['destroy'](),(_0x136e78=this['transformL'+'ifecycleTe'+'xture'])==null||_0x136e78['destroy'](),(_0x1c4919=this['sh1to3Text'+'ure'])==null||_0x1c4919['destroy'](),(_0x438d7d=this['sh4to7Text'+'ure'])==null||_0x438d7d['destroy'](),(_0x37925a=this['sh8to11Tex'+'ture'])==null||_0x37925a['destroy'](),(_0x2fa81e=this['sh12to15Te'+'xture'])==null||_0x2fa81e['destroy'](),(_0x19632e=this['colorTextu'+'re2'])==null||_0x19632e['destroy'](),(_0x4eb223=this['transformA'+'Texture2'])==null||_0x4eb223['destroy'](),(_0x41e7fb=this['transformB'+'Texture2'])==null||_0x41e7fb['destroy'](),(_0x3df714=this['transformR'+'Texture2'])==null||_0x3df714['destroy'](),(_0x45ba5b=this['transformM'+'otionTextu'+'re2'])==null||_0x45ba5b['destroy'](),(_0x3a32be=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x3a32be['destroy'](),(_0x4d434b=this['sh1to3Text'+'ure2'])==null||_0x4d434b['destroy'](),(_0x25e8f8=this['sh4to7Text'+'ure2'])==null||_0x25e8f8['destroy'](),(_0x192a33=this['sh8to11Tex'+'ture2'])==null||_0x192a33['destroy'](),(_0x2a0c8f=this['sh12to15Te'+'xture2'])==null||_0x2a0c8f['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x59c473){var _0x43d883,_0xb41125,_0x1dd783,_0xb33c50,_0x46d731,_0xa1b41b,_0x467924,_0x4b09f3,_0x2422cd,_0x3219f2,_0x56554d,_0x478c2c,_0x541acf;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x3f27e6=((_0x43d883=_0x59c473['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x1cd+-0x5*0x6bb+0x2374):_0x43d883['data'])??0x5c*0xb+0x1c3a+-0x202e,_0x3b4fca=((_0xb41125=_0x59c473['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x245*0x9+0x11c8*-0x2+0xb*0x517):_0xb41125['data'])??0x6b*-0x20+-0x1*0x12f6+-0x1*-0x2057,_0x94a279=((_0x1dd783=_0x59c473['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x1fdb+-0x3*-0x78a+0x93d):_0x1dd783['data'])??0x18da+-0xe9*0xb+-0xed6,_0xf51d9d=((_0xb33c50=_0x59c473['getParamet'+'er']('uHueOffset'))==null?void(-0x17f6+-0x3*0x353+0x11*0x1ff):_0xb33c50['data'])??0x1c08+0x22b6+-0x3ebe*0x1,_0x7e1420=((_0x46d731=_0x59c473['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x1f73+-0x26*0xb6+-0x46f*0x1):_0x46d731['data'])??-0x2576+0x504+0x2072,_0x2520a9=((_0xa1b41b=_0x59c473['getParamet'+'er']('uOpacity'))==null?void(-0xbf7*0x3+-0x1703+0x68*0x91):_0xa1b41b['data'])??0x1*-0x112+0x6a*0x35+-0x14df,_0x670f8d=((_0x467924=_0x59c473['getParamet'+'er']('clrOffset'))==null?void(0x262*-0x3+0x26cc+-0x1fa6):_0x467924['data'])??[0x3*0x32c+0x14f4*-0x1+0xb70,0x1*0x1f0c+0x3f5+-0x2301,0x122*0x17+-0xebb+-0xd*0xdf,0x28a*-0x5+0x122b*-0x2+0x3109],_0x3eb297=((_0x4b09f3=_0x59c473['getParamet'+'er']('clrScale'))==null?void(-0x1*-0x4cd+-0x1256+0x63*0x23):_0x4b09f3['data'])??[-0x2*0x12a+-0x2156+-0x23ab*-0x1,-0x1*-0x7ac+0x718+-0xec3,-0x107*-0x1d+0x75e+-0xe8*0x29,0xd0*-0x6+0xc58+0xd*-0x93],_0x420929=((_0x2422cd=_0x59c473['getParamet'+'er']('uShapeN'))==null?void(0x282*0xa+-0xa46*-0x2+-0x2da0):_0x2422cd['data'])??-0x21ef+-0x181c+-0x477*-0xd,_0x400755=((_0x3219f2=_0x59c473['getParamet'+'er']('mode'))==null?void(-0x1d01+0x1e0e+-0x10d):_0x3219f2['data'])??0x242e+-0x976+-0x1ab8,_0x1f08af=((_0x56554d=_0x59c473['getParamet'+'er']('ringSize'))==null?void(-0xb89+0x21fa+0x5*-0x47d):_0x56554d['data'])??-0x456+-0x276+-0xc*-0x91,_0x373914=((_0x478c2c=_0x59c473['defines'])==null?void(0x1*-0x1297+-0x1450+-0x17*-0x1b1):_0x478c2c['get']('uOpenAnim'))??'0',_0x46e53b=((_0x541acf=_0x59c473['defines'])==null?void(-0x3*0xd5+0x2521+0x155*-0x1a):_0x541acf['get']('uControlCo'+'lorMode'))??'0';_0x59c473['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x59c473['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x59c473['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x59c473['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x59c473['setParamet'+'er']('uSplatScal'+'e',_0x3b4fca),_0x59c473['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x3f27e6),_0x59c473['setParamet'+'er']('uSaturatio'+'n',_0x94a279),_0x59c473['setParamet'+'er']('uHueOffset',_0xf51d9d),_0x59c473['setParamet'+'er']('uInvertOpa'+'city',_0x7e1420),_0x59c473['setParamet'+'er']('uOpacity',_0x2520a9),_0x59c473['setParamet'+'er']('clrOffset',_0x670f8d),_0x59c473['setParamet'+'er']('clrScale',_0x3eb297),_0x59c473['setParamet'+'er']('uShapeN',_0x420929),_0x59c473['setParamet'+'er']('mode',_0x400755),_0x59c473['setParamet'+'er']('ringSize',_0x1f08af),_0x59c473['setParamet'+'er']('prerenderC'+'Time',-0x22fe+-0x171b+0x3a19),_0x59c473['setParamet'+'er']('renderSpac'+'e',0x8*0x45d+-0x44a+-0x4c*0x67),_0x59c473['setParamet'+'er']('endSpace',0x10a+-0x1fc5+0x1ec5),_0x59c473['setDefine']('uOpenAnim',_0x373914),_0x59c473['setDefine']('uControlCo'+'lorMode',_0x46e53b),this['transformM'+'otionTextu'+'re']&&_0x59c473['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x59c473['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x59c473['setDefine']('SH_BANDS',this['shBands']),_0x59c473['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x59c473['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x59c473['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x59c473['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x59c473['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x1d8131){const _0x1a7abe=Math['ceil'](Math['sqrt'](_0x1d8131)),_0x11c935=Math['ceil'](_0x1d8131/_0x1a7abe);return new J(_0x1a7abe,_0x11c935);}async['updateColo'+'rData'](_0x29a7fa){var _0x49d28c;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x107e8b=this['colorTextu'+'re2'];if(!_0x107e8b||this['isDestroye'+'d'])return;const _0x53255d=_0x29a7fa['getProp']('f_dc_0'),_0x53ad9e=_0x29a7fa['getProp']('f_dc_1'),_0x3730cd=_0x29a7fa['getProp']('f_dc_2'),_0x4932a2=_0x29a7fa['getProp']('opacity');let _0x5b93e8=(_0x49d28c=_0x29a7fa['transformD'+'ata'])==null?void(0x20ba+-0x105e+-0x105c):_0x49d28c['dataColor'];_0x5b93e8||(_0x5b93e8=await this['updateData'+'Worker']['updateColo'+'rData'](_0x29a7fa['numSplats'],_0x53255d,_0x53ad9e,_0x3730cd,_0x4932a2)),await this['idleUpdate'+'TexturePro'+'mise'](_0x107e8b,_0x5b93e8);}async['getTransfo'+'rmDataByWo'+'rker'](_0x2d5977){var _0x110f4b;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x110f4b=_0x2d5977['transformD'+'ata'])!=null&&_0x110f4b['dataCenter'+'s'])return{'centers':_0x2d5977['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x2d5977['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x2d5977['transformD'+'ata']['dataScale'],'dataRotation':_0x2d5977['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x2d5977['transformD'+'ata']['dataMotion'],'dataTime':_0x2d5977['transformD'+'ata']['dataTime'],'motion':_0x2d5977['transformD'+'ata']['motion'],'tScaleArray':_0x2d5977['transformD'+'ata']['tScaleArra'+'y']};const _0x1591da=_0x2d5977['getProp']('x'),_0x58a8b3=_0x2d5977['getProp']('y'),_0x27e8d6=_0x2d5977['getProp']('z'),_0x26020e=_0x2d5977['getProp']('rot_1'),_0x14cf73=_0x2d5977['getProp']('rot_2'),_0x7aac46=_0x2d5977['getProp']('rot_3'),_0x319aeb=_0x2d5977['getProp']('rot_0'),_0x495de2=_0x2d5977['getProp']('motion_0'),_0x4e4d57=_0x2d5977['getProp']('motion_1'),_0x37ba40=_0x2d5977['getProp']('motion_2'),_0x52e5a1=_0x2d5977['getProp']('scale_0'),_0x89d72f=_0x2d5977['getProp']('scale_1'),_0x34a50e=_0x2d5977['getProp']('scale_2'),_0x5ae9c2=_0x2d5977['getProp']('t'),_0x2192e6=_0x2d5977['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x2d5977['numSplats'],this['is4D'],_0x1591da,_0x58a8b3,_0x27e8d6,_0x26020e,_0x14cf73,_0x7aac46,_0x319aeb,_0x495de2,_0x4e4d57,_0x37ba40,_0x52e5a1,_0x89d72f,_0x34a50e,_0x5ae9c2,_0x2192e6);}async['updateTran'+'sformFromD'+'ata'](_0x45c3e9){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x45c3e9['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x45c3e9['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x45c3e9['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x45c3e9['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x45c3e9['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x3e10a5,_0x3936b1){if(!this['isDestroye'+'d'])return new Promise(_0x2e2c41=>{requestIdleCallback(()=>{const _0x4d92fa=_0x3e10a5['lock']();_0x4d92fa==null||_0x4d92fa['set'](_0x3936b1),_0x3e10a5['unlock'](),_0x2e2c41(!(-0x1529+-0x7*0x47b+0x3486));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x1de4c8){var _0x9ce0ea,_0xc24cfc,_0x30f3a8,_0x24ab78;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x2b1b26=mn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x4048b3=this['transformA'+'Texture']['lock'](),_0xac49ce=this['transformR'+'Texture']['lock'](),_0x5f1eea=this['transformB'+'Texture']['lock'](),_0x31dcb2=(_0x9ce0ea=this['transformM'+'otionTextu'+'re'])==null?void(-0x38*0x29+-0x35e+0xc56*0x1):_0x9ce0ea['lock'](),_0x1f5a84=(_0xc24cfc=this['transformL'+'ifecycleTe'+'xture'])==null?void(0x1487+-0x7*-0x269+-0x12b3*0x2):_0xc24cfc['lock'](),_0x2305ce=new I(),_0x457b0b=new le(),_0x461122=new I(),_0xe4e4ad=new I(),_0x489eef=_0x1de4c8['createIter'](_0x2305ce,_0x457b0b,_0x461122,null,_0xe4e4ad),_0x57d6ad=_0x1de4c8['getProp']('t'),_0x532fda=_0x1de4c8['getProp']('t_scale');for(let _0x38da0a=-0x2*-0x656+-0x1dfa+-0xa*-0x1bb;_0x38da0a<_0x1de4c8['numSplats'];_0x38da0a++)_0x489eef['read'](_0x38da0a),_0x457b0b['normalize'](),_0x457b0b['w']<-0x255c*-0x1+0xb18*0x1+-0x3074&&_0x457b0b['mulScalar'](-(-0x63b+-0x3*0x6e6+0x1aee)),_0x4048b3[_0x38da0a*(0x1f16+-0x1*0x1faa+0x1*0x97)+(-0x3*-0xd05+0x14ff+-0x3c0e)]=_0x2305ce['x'],_0x4048b3[_0x38da0a*(-0x2194+0x41d+-0x7*-0x436)+(-0x1b85+-0x835*0x3+-0x3425*-0x1)]=_0x2305ce['y'],_0x4048b3[_0x38da0a*(0x54*-0x34+0x2335+0x2*-0x911)+(-0x10b9*0x2+0x1b*-0x137+0x4241)]=_0x2305ce['z'],_0x5f1eea[_0x38da0a*(0x1*-0x1dff+-0x835*-0x3+-0xc5*-0x7)+(-0x55d+-0x10b9+0x1*0x1616)]=_0x2b1b26(_0x461122['x']),_0x5f1eea[_0x38da0a*(-0x925+0x925*0x1+0x3)+(-0x53a+-0x700+-0xc3b*-0x1)]=_0x2b1b26(_0x461122['y']),_0x5f1eea[_0x38da0a*(0x1564+-0x12ee*-0x2+-0x3b3d)+(0x962+-0x90f+0x3*-0x1b)]=_0x2b1b26(_0x461122['z']),_0xac49ce[_0x38da0a*(-0x1b40+-0x1*-0x1ef5+-0x3b2)+(0x1a46+-0xc24+-0xe22)]=_0x457b0b['x'],_0xac49ce[_0x38da0a*(0x1166+0x21b8+-0x331b)+(-0x196b+0x80*-0x4+-0x6c*-0x41)]=_0x457b0b['y'],_0xac49ce[_0x38da0a*(-0x33b*0x1+-0x3*0x63f+-0x14b*-0x11)+(-0x29*-0x5+0x248e*-0x1+0x23c3)]=_0x457b0b['z'],this['is4D']&&_0x31dcb2&&_0x1f5a84&&(_0x31dcb2[_0x38da0a*(-0x1*0x1eba+0x3*0x5d3+0xd44)+(-0xa1+-0x3*-0xac5+-0x1*0x1fae)]=_0xe4e4ad['x'],_0x31dcb2[_0x38da0a*(-0x96*0x32+0x7ab*0x1+0x15a4)+(0x1*-0x9a7+0x126f+-0x141*0x7)]=_0xe4e4ad['y'],_0x31dcb2[_0x38da0a*(-0x1177+0x175*0x12+0x46*-0x20)+(-0x1423+0x1*0x529+0x3bf*0x4)]=_0xe4e4ad['z'],_0x1f5a84[_0x38da0a*(0xee*0xc+-0x1d61+0x123c)+(-0x1*0x11a+-0x100f+0x1129)]=_0x57d6ad?_0x57d6ad[_0x38da0a]:-0x179*0xe+-0x267b+-0x9*-0x691,_0x1f5a84[_0x38da0a*(-0xf1*-0x18+0x264d+-0x3ce2)+(-0xe01+0x41*0x7c+0x2*-0x8bd)]=_0x532fda?Math['exp'](_0x532fda[_0x38da0a]):-0x8e*-0x17+-0x8*0x29f+0x41b*0x2);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x30f3a8=this['transformM'+'otionTextu'+'re'])==null||_0x30f3a8['unlock'](),(_0x24ab78=this['transformL'+'ifecycleTe'+'xture'])==null||_0x24ab78['unlock']();}async['updateSHDa'+'ta'](_0x2767df){var _0x398e05,_0xb42ab4,_0xdeab73,_0x262dfb,_0x328f05,_0x5b1c3a,_0x58f468,_0x27891f;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x47e86b=(_0x398e05=this['sh1to3Text'+'ure2'])==null?void(-0x11ab*-0x2+-0x1*0xb74+-0x1*0x17e2):_0x398e05['lock'](),_0x968cd5=(_0xb42ab4=this['sh4to7Text'+'ure2'])==null?void(-0x2387+-0x17*-0x76+0x18ed):_0xb42ab4['lock'](),_0x3584af=(_0xdeab73=this['sh8to11Tex'+'ture2'])==null?void(0xf5*-0x16+-0xa*-0x3a+0x12ca):_0xdeab73['lock'](),_0x34dd35=(_0x262dfb=this['sh12to15Te'+'xture2'])==null?void(0xda1+0x72*0x42+-0x2b05):_0x262dfb['lock'](),_0x481b2c={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x2abccc=F_(_0x2767df,_0x481b2c*(0x89*0x41+-0x230e+-0x12*-0x4)),_0x42df24=-0x97*0x5+-0x16d3+0x21c5,_0x52010f=-0x394*0x2+-0x13ce+0x1ef5,_0x1dcb79=new Float32Array(0x50c*-0x5+-0xbb2*-0x1+-0xd8b*-0x1),_0x349a1=new Uint32Array(_0x1dcb79['buffer']),_0x5367a9=new Array(_0x481b2c*(-0x951+0xb3d+-0x1e9))['fill'](0x5*0x539+0x2405*-0x1+-0x13d*-0x8);for(let _0x51c671=0x4f3+0x99+-0x58c;_0x51c671<_0x2767df['numSplats'];++_0x51c671){for(let _0x1f4c98=0x2646+0x386*0x3+-0x30d8;_0x1f4c98<_0x481b2c;++_0x1f4c98)_0x5367a9[_0x1f4c98*(-0x4af+-0x247+0x3*0x253)]=_0x2abccc[_0x1f4c98][_0x51c671],_0x5367a9[_0x1f4c98*(0x114c+0xc4a+0x71*-0x43)+(0x1ad4+-0x542*0x7+0x9fb)]=_0x2abccc[_0x1f4c98+_0x481b2c][_0x51c671],_0x5367a9[_0x1f4c98*(0xd52+0x1352+0x1*-0x20a1)+(0x951+-0x20f0+0x17a1*0x1)]=_0x2abccc[_0x1f4c98+_0x481b2c*(-0x1*0x2f9+-0x95*0x18+0x10f3)][_0x51c671];let _0xab3f20=_0x5367a9[0x83f*-0x4+0x3*0x8ee+-0x319*-0x2];for(let _0x1e6c1c=0x15ec+0xe+-0x15f9;_0x1e6c1c<_0x481b2c*(-0x2478+-0x2098+-0x4513*-0x1);++_0x1e6c1c)_0xab3f20=Math['max'](_0xab3f20,Math['abs'](_0x5367a9[_0x1e6c1c]));if(_0xab3f20!==-0x44c+0x25f6+-0x21aa){for(let _0x3016b1=0x141+-0x1*0x20c5+0x2*0xfc2;_0x3016b1<_0x481b2c;++_0x3016b1)_0x5367a9[_0x3016b1*(-0x1*0x1513+-0xaf9*0x3+0x3601)+(-0x18d3+-0x3b6*0xa+-0xf*-0x421)]=Math['max'](0x17b*-0x19+0x1*-0x242a+0x6a7*0xb,Math['min'](_0x42df24,Math['floor']((_0x5367a9[_0x3016b1*(-0x59f*0x3+0x1d48+-0x634*0x2)+(-0xe3f*-0x1+-0x8*-0x4d4+-0x1*0x34df)]/_0xab3f20*(-0x1a19+0x5c9+0x1450+0.5)+(-0x1987+-0x7*-0x418+-0x321+0.5))*_0x42df24+(-0x435+-0x5e4*-0x4+-0x1*0x135b+0.5)))),_0x5367a9[_0x3016b1*(-0x2*0x530+0xc11*-0x3+0x2e96)+(-0x857+-0x1*-0x9b+-0x1*-0x7bd)]=Math['max'](-0x249d+0x2*0xf59+0x5eb,Math['min'](_0x52010f,Math['floor']((_0x5367a9[_0x3016b1*(0x16d9+-0x2233+0xb5d)+(0x251*-0x9+-0xf7b+0x2455)]/_0xab3f20*(0x24dd*-0x1+0x2307+0x1d6+0.5)+(0x146c+-0x2114*-0x1+-0x3580+0.5))*_0x52010f+(-0x7df+-0xd*0x26+-0x1*-0x9cd+0.5)))),_0x5367a9[_0x3016b1*(-0x16dd*-0x1+0x5*0x7a+-0x1*0x193c)+(-0x3f4+0xf59+-0xb63)]=Math['max'](0xea4+0xacd+-0x1971,Math['min'](_0x42df24,Math['floor']((_0x5367a9[_0x3016b1*(0x247*0xf+-0x1638+-0x5f7*0x2)+(-0x8*-0x4a4+0xa*0x2e5+-0x4210)]/_0xab3f20*(0xb9b+0x2683*-0x1+0x1ae8+0.5)+(0x2614+0x6*-0x326+0x133*-0x10+0.5))*_0x42df24+(-0x1*0x82c+-0x8b4+0x10e0+0.5))));_0x1dcb79[0xb*0x269+-0xc5e+0xe25*-0x1]=_0xab3f20,_0x47e86b[_0x51c671*(-0x24f1+0x2620+-0xd*0x17)+(0x58a*0x7+0x1cbc+-0x21c1*0x2)]=_0x349a1[-0x155*0x11+-0x2c9*0xb+-0x6a9*-0x8],_0x47e86b[_0x51c671*(0x242a*0x1+-0x1549+-0x1*0xedd)+(-0x1*-0x1d54+0x1*0x1df4+0x19*-0x25f)]=_0x5367a9[0x1450+0x1d8+-0x4*0x58a]<<0x184a*-0x1+-0x1*0x1271+0x2ad0|_0x5367a9[0x2*-0xfa4+0x12*-0xd6+0x2e55]<<-0x7*-0x157+-0x13*-0xe+0x8*-0x14c|_0x5367a9[-0x773*-0x4+0x1836+-0x3600],_0x47e86b[_0x51c671*(-0xd7a+0x8aa*0x3+-0xc80)+(0xce*-0x3+0xf52*-0x1+-0x2*-0x8df)]=_0x5367a9[-0x1028+-0x1495+-0x4*-0x930]<<-0x1*-0x1189+0x17b*0x11+-0x2a9f|_0x5367a9[-0x2d2+-0x1e8f+0x2165]<<0x852+0x1*0x1e6f+0x7be*-0x5|_0x5367a9[-0x824+0x156f+0x2*-0x6a3],_0x47e86b[_0x51c671*(-0x2d7*-0xa+-0x367*0x2+-0x1*0x1594)+(-0x1d*0x7e+-0x2396+0x31df)]=_0x5367a9[0x2*0xaf8+0x6e*0x1+0x34*-0x6e]<<-0x1c4c+-0x2609+-0x2135*-0x2|_0x5367a9[0x2498+-0x41*0x6b+-0x966]<<-0x25*-0x5b+0x5ba+-0x12d6|_0x5367a9[-0x1*0x116+-0x32+-0x2a*-0x8],this['shBands']>0x2027+-0x6*-0x1ed+-0x2bb4&&(_0x968cd5[_0x51c671*(-0x148+0x1*0x1733+-0x15e7)+(0x569*-0x1+0xa7*0x15+-0x84a)]=_0x5367a9[-0x1842+-0x1bd*-0x14+0x7*-0x17f]<<-0x40*-0x2+-0x2089*0x1+0x201e|_0x5367a9[0xa14+-0x268d*-0x1+-0x3097]<<0x1*0xf13+-0x13ab+-0x1*-0x4a3|_0x5367a9[-0x1476+0x1e32+-0x9b1],_0x968cd5[_0x51c671*(0x7a6+-0x764+-0x1*0x3e)+(-0x3*-0xb3+-0x2303+-0x35*-0x9f)]=_0x5367a9[0xb23*0x3+-0x87d*-0x4+0x38b*-0x13]<<-0x1*0x2449+0xcd*-0xa+0x238*0x14|_0x5367a9[-0x371+-0x3*-0x796+0x19b*-0xc]<<-0x1b9b+-0x6c6+0x226c|_0x5367a9[0x13*0x1bb+-0x1d53+-0xe0*0x4],_0x968cd5[_0x51c671*(0x7f*0x1+0x3d*0x8b+0x22*-0xfd)+(-0x1*-0xd5e+-0x1adf+-0x3*-0x481)]=_0x5367a9[-0x113f+0x1473+-0x325]<<-0x561*0x3+0x3*-0xbe1+0x33db|_0x5367a9[-0x1e5*0x4+0x22ff+-0x1b5b]<<0xa59*0x3+0x1a5*0x13+-0x3e3f|_0x5367a9[-0x12b*-0x10+0xc*-0x229+0x1*0x74d],_0x968cd5[_0x51c671*(-0x812+0xa3*-0x1+0x8b9)+(-0xb6c+-0x1*-0x1599+0x1*-0xa2a)]=_0x5367a9[-0xa13+0xbd8+-0x1b3]<<-0xb*0x22d+0x18c2+-0x2*0x5f|_0x5367a9[-0x26de+0x53*0x75+0x102]<<0x16f*0xa+-0x1ff9+0x8d7*0x2|_0x5367a9[-0xe1e+0x1*-0x1901+-0x45b*-0x9],this['shBands']>-0x2b*-0xdd+-0x6b9+-0x1e64?(_0x3584af[_0x51c671*(0x2*-0x5aa+-0x52d*-0x3+-0x3*0x165)+(-0x997*0x3+-0x11fb+0x2ec*0x10)]=_0x5367a9[0x31*0x55+-0x175*-0x5+-0x1779]<<-0x1ba6+-0x1b72+0x71*0x7d|_0x5367a9[-0x27*-0xfb+0x3*-0x8c1+0x1*-0xbe4]<<0x1175*-0x2+-0x104e*-0x1+0x12a7|_0x5367a9[-0x2*-0xc1a+0x2*-0x4bb+-0xea7*0x1],_0x3584af[_0x51c671*(0x13e9+0x1*0xa12+-0x1df7)+(-0x238a+0x1fac+-0x3df*-0x1)]=_0x5367a9[-0xb27+0x1574+-0xa35]<<0x1bb*0xd+0xb*-0x71+0x91*-0x1f|_0x5367a9[0xdf5+-0x1*-0x8ec+-0x16c8]<<0x1735+0x12ad+-0x29d7|_0x5367a9[-0x180d+0x26e1+-0xeba],_0x3584af[_0x51c671*(-0x1a7c+-0x239d+0x3e1d*0x1)+(0x1750+-0x1e9+-0x1565)]=_0x5367a9[-0xdaa*-0x1+0x14dd+-0x1136*0x2]<<0x1576+0x40b+-0x196c|_0x5367a9[0x97*0xd+-0x1035+0x8a6]<<0x1*-0x685+0x2479*-0x1+0x2b09|_0x5367a9[0xb8f*-0x1+-0x8b*0x25+-0x1fc3*-0x1],_0x3584af[_0x51c671*(0x1*-0x42a+-0x1181*-0x1+0x3*-0x471)+(-0x1*0x11f3+-0x709*-0x3+-0x325)]=_0x5367a9[-0x2*0xbb9+-0x1999+0x3129]<<0x1505+0x6*0x540+-0x3470|_0x5367a9[-0x826+-0x1*-0x226e+-0x1a29]<<0x4f*0x4e+-0xa9*0x2b+-0x3*-0x174|_0x5367a9[-0xe53+-0x17d*0xe+0x2349],_0x34dd35[_0x51c671*(0x535+0x1493*-0x1+0x7b1*0x2)+(0x1967+-0x1ab1+0x14a)]=_0x5367a9[0x2*0xbf7+-0x11*0xc1+0x1*-0xafc]<<-0xe*-0xa9+-0x17e*-0x1+0x1b*-0x65|_0x5367a9[0x11a4*0x2+-0x11*0x232+-0x1*-0x22c]<<-0x86*-0x1d+0x1373*0x1+0x114b*-0x2|_0x5367a9[-0xbbd*-0x3+-0x255f+0x24b*0x1],_0x34dd35[_0x51c671*(0x696+0x60*-0xc+-0x212)+(0x549+-0x258c+0x2044*0x1)]=_0x5367a9[-0xde2+0x2*-0xb26+-0x1*-0x2452]<<0x2564+0x56*0x4f+-0x3fd9|_0x5367a9[-0x3*-0x4f3+-0x15*0xb7+0x4f]<<0x7db*0x2+-0x261*0x6+-0x165|_0x5367a9[0x2af*-0x3+0x2*0xe2+-0x225*-0x3],_0x34dd35[_0x51c671*(-0x81f+0x4*-0x164+0xdb3)+(-0x2364+0x2674+-0x30e)]=_0x5367a9[0x758+0x1716+-0x1e47]<<0x1341+0x11ff+0x37*-0xad|_0x5367a9[0x2*0xd06+-0x1ad6+0xf2]<<-0x1*0x22fc+-0x16*-0x164+0xe3*0x5|_0x5367a9[0x25*-0x6b+-0x13*-0x14e+-0x495*0x2],_0x34dd35[_0x51c671*(0xd4*0x1+0xb*0x1a9+-0x1313)+(-0x1*-0xddb+0x87*0x29+0x7*-0x511)]=_0x5367a9[0x1db3*-0x1+0x2491+-0x6b4]<<0x17d6+0x1*0x2bd+-0x1a7e|_0x5367a9[0x4e4+0x1*0x22ed+-0x27a6]<<0x260+-0xa*-0x12a+-0xdf9|_0x5367a9[-0x1*-0x1faa+0x31e+-0x229c]):_0x3584af[_0x51c671]=_0x5367a9[0x1c86+0x2*0x6aa+0x275*-0x11]<<0x21cc+0x8e7+0x2*-0x154f|_0x5367a9[0xfe*-0x27+0xee9+-0x9*-0x2a7]<<0x8*0x275+-0x313+-0x108a|_0x5367a9[-0x26d0+0x177b*0x1+0x3db*0x4]);}}(_0x328f05=this['sh1to3Text'+'ure2'])==null||_0x328f05['unlock'](),(_0x5b1c3a=this['sh4to7Text'+'ure2'])==null||_0x5b1c3a['unlock'](),(_0x58f468=this['sh8to11Tex'+'ture2'])==null||_0x58f468['unlock'](),(_0x27891f=this['sh12to15Te'+'xture2'])==null||_0x27891f['unlock']();}async['updateSHDa'+'taByWorker'](_0x19062e){var _0x1d8237,_0x2ea072,_0x42ce74,_0x47fe45,_0x2b3cb2;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x380112={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x50127b,_0x1973c4,_0x44ab79,_0xb39bcd;if((_0x1d8237=_0x19062e['transformD'+'ata'])!=null&&_0x1d8237['sh1to3Data'])_0x50127b=(_0x2ea072=_0x19062e['transformD'+'ata'])==null?void(0x11c4+-0x18d5+0x711):_0x2ea072['sh1to3Data'],_0x1973c4=(_0x42ce74=_0x19062e['transformD'+'ata'])==null?void(0x6f0+0x2a2+0xf5*-0xa):_0x42ce74['sh4to7Data'],_0x44ab79=(_0x47fe45=_0x19062e['transformD'+'ata'])==null?void(-0xf0a*0x1+0x85*-0x29+0x2457):_0x47fe45['sh8to11Dat'+'a'],_0xb39bcd=(_0x2b3cb2=_0x19062e['transformD'+'ata'])==null?void(0x1ba7+-0x22*0x68+-0xdd7):_0x2b3cb2['sh12to15Da'+'ta'];else{const _0x2f2ea9=F_(_0x19062e,_0x380112*(-0x2*-0xbc2+-0x29*-0x96+-0x2f87)),_0x27bde1=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x19062e['numSplats'],this['shBands'],_0x2f2ea9);_0x50127b=_0x27bde1['sh1to3Data'],_0x1973c4=_0x27bde1['sh4to7Data'],_0x44ab79=_0x27bde1['sh8to11Dat'+'a'],_0xb39bcd=_0x27bde1['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x50127b),this['shBands']>-0x106*-0xb+-0xd8*0xe+-0xb*-0xd&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x1973c4),this['shBands']>0x365+0x1b36+-0x15*0x175?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x44ab79),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0xb39bcd)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x44ab79));}}async function Nb(){const _0x392a8b=new Float32Array(0xdd3+-0x45f+-0x973);new Int32Array(_0x392a8b['buffer']);let _0x31593d=null,_0x4eb2be=null,_0x4acdd6=null,_0x511030=null,_0x22e262=null,_0x58d8eb=null,_0x4753be=null,_0x4af793=null;self['onmessage']=async _0x4e7c5a=>{const {data:_0x109491}=_0x4e7c5a;switch(_0x109491['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0xf94906(_0x109491['numSplats'],_0x109491['shBands'],_0x109491['SHData']);break;case'updateTran'+'sformData':_0xaf94fd(_0x109491['numSplats'],_0x109491['is4D'],_0x109491['position'],_0x109491['rotation'],_0x109491['motion'],_0x109491['scale'],_0x109491['muT'],_0x109491['tScale']);break;case'destroyWor'+'ker':_0x2bfd0d();break;}};const _0xaf94fd=(_0x4889c6,_0x59ce44,_0x25076f,_0x52710c,_0x3d4d67,_0x494d24,_0x204ccb,_0x33c64d)=>{_0x2bfd0d(),_0x59ce44&&(_0x4eb2be=new Float32Array(_0x4889c6*(0xd4f*0x2+0x1d2d+-0x37c8)),_0x4af793=new Float32Array(_0x4889c6),_0x22e262=new Float32Array(_0x3d4d67['buffer']['slice']()),_0x4753be=new Float32Array(_0x3d4d67['buffer']['slice']())),_0x511030=new Float32Array(_0x25076f['buffer']['slice']()),_0x31593d=new Float32Array(_0x25076f['buffer']['slice']()),_0x58d8eb=new Uint16Array(_0x494d24['buffer']['slice']()),_0x4acdd6=new Float32Array(_0x52710c['buffer']['slice']());for(let _0x4a8f1a=0x1cfe*-0x1+0xda5+0xf59;_0x4a8f1a<_0x4889c6;_0x4a8f1a++)_0x59ce44&&_0x4eb2be&&(_0x4af793[_0x4a8f1a]=_0x33c64d?Math['exp'](_0x33c64d[_0x4a8f1a]):0x3*-0xac5+-0x1*0x6f5+0x2744,_0x4eb2be[_0x4a8f1a*(-0xd*0x2bd+0x8*0x13a+0x19cc)+(0x1428+-0x480*-0x8+-0x257*0x18)]=_0x204ccb?_0x204ccb[_0x4a8f1a]:0x1*-0xd73+0x1*0xe61+-0xee,_0x4eb2be[_0x4a8f1a*(0xea*-0x1+0x2080+-0x1f93)+(0x1e*-0x92+-0x21b3*0x1+0x32d0)]=_0x4af793[_0x4a8f1a]);const _0x5d215b=[_0x31593d['buffer'],_0x511030['buffer'],_0x58d8eb['buffer'],_0x4acdd6['buffer']];_0x59ce44&&_0x5d215b['push'](_0x22e262['buffer'],_0x4eb2be['buffer'],_0x4753be['buffer'],_0x4af793['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x31593d,'dataPosition':_0x511030,'dataScale':_0x58d8eb,'dataRotation':_0x4acdd6,'dataMotion':_0x22e262,'dataTime':_0x4eb2be,'motion':_0x4753be,'tScaleArray':_0x4af793},_0x5d215b);},_0xf94906=(_0x1e8637,_0x26d9af,_0xc7cdf7)=>{const _0x4cadc8=new Uint32Array(_0x1e8637*(-0x3a*-0x60+0x295*0x9+-0x1*0x2cf9)),_0x48a7a3=new Uint32Array(_0x1e8637*(0x26a8*0x1+-0xab3+-0x1bf1)),_0x3fda5b=new Uint32Array(_0x1e8637*(-0x58f+0x1*0x2666+-0x3*0xaf1)),_0x1009b5=new Uint32Array(_0x1e8637*(0x1*0x6b1+0x216f+-0x1*0x281c)),_0xae68b2={0x1:0x3,0x2:0x8,0x3:0xf}[_0x26d9af],_0x544956=_0xc7cdf7,_0x46425c=-0x544+-0x2*0xb81+0x2445,_0x27a08c=-0x17*0x12d+-0x24eb+0x43f5,_0x4cceaa=new Float32Array(0x2084+0x43b+-0x24be),_0xb2b49f=new Uint32Array(_0x4cceaa['buffer']),_0x19d3d9=new Array(_0xae68b2*(0x25b3+-0x1a3*0xe+-0xec6))['fill'](-0x3cc+0x4*-0x847+0x24e8);for(let _0x2ffefd=-0x425*-0x1+-0x6eb+0x47*0xa;_0x2ffefd<_0x1e8637;++_0x2ffefd){for(let _0xd2e46d=-0x204f*0x1+0x9c*0x5+0x1d43;_0xd2e46d<_0xae68b2;++_0xd2e46d)_0x19d3d9[_0xd2e46d*(0x48b+0x19e9+0x1*-0x1e71)]=_0x544956[_0xd2e46d][_0x2ffefd],_0x19d3d9[_0xd2e46d*(0x1055+-0x2b*0x83+0x5af)+(0xf3a+-0xee5+0x1c*-0x3)]=_0x544956[_0xd2e46d+_0xae68b2][_0x2ffefd],_0x19d3d9[_0xd2e46d*(0x5fd+-0x26cf*-0x1+-0x2cc9)+(0x1edf*0x1+-0x1f7*-0x4+0x26b9*-0x1)]=_0x544956[_0xd2e46d+_0xae68b2*(0x129a+0x11a5+-0x243d)][_0x2ffefd];let _0x2ffdd8=_0x19d3d9[-0x4*0x8cb+-0x1d1+0x24fd*0x1];for(let _0x27ecc7=-0xb2*0x31+0x2221+0x1*-0xe;_0x27ecc7<_0xae68b2*(-0x625*0x5+-0x7b+0x1f37);++_0x27ecc7)_0x2ffdd8=Math['max'](_0x2ffdd8,Math['abs'](_0x19d3d9[_0x27ecc7]));if(_0x2ffdd8!==-0x1*-0xa71+-0x7f*-0x1f+0xce9*-0x2){for(let _0x350b7f=-0x12e*0xd+0x577*-0x3+-0x1fbb*-0x1;_0x350b7f<_0xae68b2;++_0x350b7f)_0x19d3d9[_0x350b7f*(-0x18be+-0xebd+-0x277e*-0x1)+(0x43a+0x76d+-0xba7)]=Math['max'](0x3*0x5c5+-0x101f*-0x1+-0x30a*0xb,Math['min'](_0x46425c,Math['floor']((_0x19d3d9[_0x350b7f*(-0x717+-0x7ed+0xf07)+(0x2209*-0x1+-0x1693*0x1+0x4*0xe27)]/_0x2ffdd8*(0x1f91+0x19*0x107+0x20*-0x1ca+0.5)+(0x188a+-0x1*0x35f+-0x152b*0x1+0.5))*_0x46425c+(-0x1*0xecf+0x2587*0x1+-0x8*0x2d7+0.5)))),_0x19d3d9[_0x350b7f*(-0xb47*-0x1+0x2*0xbbb+-0xfe*0x23)+(0x2e6*0x4+-0x45d*0x1+0x73a*-0x1)]=Math['max'](-0x3*-0x994+-0x30e+0x15a*-0x13,Math['min'](_0x27a08c,Math['floor']((_0x19d3d9[_0x350b7f*(-0x94f*0x4+0x1*-0xaa3+-0xff6*-0x3)+(0x2531*0x1+-0xad1+0x1a5f*-0x1)]/_0x2ffdd8*(0x218f+0x720*-0x4+-0x50f+0.5)+(-0x15*-0x198+0x1e7d+-0x1*0x3ff5+0.5))*_0x27a08c+(-0xd7c+-0xf20*-0x2+-0x10c4+0.5)))),_0x19d3d9[_0x350b7f*(0x1cd1*0x1+-0x2f*-0xb1+-0x3*0x146f)+(-0x1001+-0xb*0x126+0x1ca5)]=Math['max'](0x10f*0xc+-0x1f59+0x81*0x25,Math['min'](_0x46425c,Math['floor']((_0x19d3d9[_0x350b7f*(0xd*-0xaf+0x4f*0x71+-0x6d*0x3d)+(0x2cd*0x5+0x1*0xf31+0x8*-0x3a6)]/_0x2ffdd8*(0x1677+0x1*0xcee+-0x2365+0.5)+(0x2421+-0x144+-0x22dd+0.5))*_0x46425c+(0x2a6*-0x5+-0x134a+0x2088+0.5))));_0x4cceaa[-0x123f+-0x1981+0x2bc0*0x1]=_0x2ffdd8,_0x4cadc8[_0x2ffefd*(0x2*-0xf59+0xa65+0x1451)+(-0x1ccb+-0x1d7b+-0x1d23*-0x2)]=_0xb2b49f[-0x18b2*-0x1+0x1482+-0x2d34],_0x4cadc8[_0x2ffefd*(-0xa58*0x3+0x3e4+0x1b28)+(-0x640+-0x671+0xcb2)]=_0x19d3d9[0x2411*-0x1+0xcce+0x1743]<<0x176d+-0xfe9+-0x76f|_0x19d3d9[0x1490+0xe*0x4+-0x14c7]<<-0x1*-0x1f49+-0xabf+0x6d5*-0x3|_0x19d3d9[-0x1*-0x301+0x729*0x4+-0x1fa3],_0x4cadc8[_0x2ffefd*(-0x253+0x6eb*-0x4+0x1e03)+(-0x9e3*-0x3+-0x19da*0x1+0x7*-0x8b)]=_0x19d3d9[0x1bf6+-0x2587*0x1+-0x4*-0x265]<<0x880+-0x938+0x29*0x5|_0x19d3d9[0xf10*-0x2+0x1dc4+0x60]<<-0x5*-0xd7+-0x1c15+-0xf5*-0x19|_0x19d3d9[0x1b30+0x1*0x2242+0xb9*-0x55],_0x4cadc8[_0x2ffefd*(-0xbe*0x1d+0x260e+0x97*-0x1c)+(0xd0f+0x24d+0x1*-0xf59)]=_0x19d3d9[-0x5*-0x1d1+0x1*0x315+-0xc*0x103]<<-0x1*0x25db+-0x37a+-0x6e7*-0x6|_0x19d3d9[0x53*0x75+-0x1602+0x7f3*-0x2]<<-0x15*-0x1a8+0xcc7+-0x2f84|_0x19d3d9[0x1015+0x6ba+0x77*-0x31],_0x26d9af>-0x96d+0x23a6+-0x1a38&&(_0x48a7a3[_0x2ffefd*(-0x4*0x35b+-0x2*-0x471+0x48e)+(0x1815+0x3fa+-0x1c0f)]=_0x19d3d9[0x3c7+0x2312+-0x4da*0x8]<<0x126b*0x2+-0x2333+-0x18e|_0x19d3d9[-0x773+-0x19c+0x919]<<-0x13d6*0x1+0x23b4+-0xfd3|_0x19d3d9[0x14dd+0xc75+0x4c1*-0x7],_0x48a7a3[_0x2ffefd*(-0xb84*-0x1+-0xbf*0x2f+0x1791)+(0x1e80+-0x3*0xc86+0x713*0x1)]=_0x19d3d9[0x1e56*-0x1+-0x15f8+0x1a2d*0x2]<<0x2572+0x1*-0x2593+0x36*0x1|_0x19d3d9[-0x2616+-0x37b*0x1+0x2*0x14cf]<<-0x1df4+-0x99c+0x1*0x279b|_0x19d3d9[-0x2165*0x1+0x1*-0x87b+0x29ee],_0x48a7a3[_0x2ffefd*(-0x1f3f+-0x10ea+0x302d)+(-0x1*-0x662+0xf2a+-0xac5*0x2)]=_0x19d3d9[0x1*0x235d+0x1*-0xe6e+-0x14e0]<<0x20f1+-0x34f+-0x1d8d|_0x19d3d9[0xb*-0xbb+0x1e7f+-0x1666]<<-0x1*-0x1247+-0x1e66+-0x12*-0xad|_0x19d3d9[-0x588+0x1392+-0xdf9],_0x48a7a3[_0x2ffefd*(0x6f3+-0x61*0x1f+0x4d0)+(-0x245+-0x276+0x2*0x25f)]=_0x19d3d9[0xd4e+0x1379*-0x2+0x19b6*0x1]<<-0x2*0xa1c+0x1*-0x462+-0x1*-0x18af|_0x19d3d9[0x576+-0x1170+0x269*0x5]<<-0x8e1+0x1b*0x86+-0x17*0x3a|_0x19d3d9[-0x13*-0x6e+0x8*-0x3ce+0x165a],_0x26d9af>0x19c4+-0x1*0xf79+-0xa49?(_0x3fda5b[_0x2ffefd*(0xb0d+-0xf2c*-0x1+-0x1a35*0x1)+(0xe27+0x50f+-0x1336*0x1)]=_0x19d3d9[0x132c+-0x9da+-0x93d]<<-0x54*0x3f+0x102b*0x1+0x496|_0x19d3d9[-0x14d9+0x75+0x147a]<<-0x1d27+-0xfa*0xf+0x2bd8|_0x19d3d9[-0x2546+0x202b+0x85*0xa],_0x3fda5b[_0x2ffefd*(0x1a45*0x1+0x7f*0x3a+-0x3707)+(-0x14ec+0x1b*-0x12+0x16d3*0x1)]=_0x19d3d9[-0x5b*0x2e+0x28*-0x69+0x122*0x1d]<<0x88*-0x3e+-0x10d3+0x31d8|_0x19d3d9[0x1b0f+-0xb0d*0x1+-0xfe9*0x1]<<0x18e*0x13+-0x2*-0x1159+-0x4031|_0x19d3d9[-0x30e*-0x4+0xb*0x363+-0x1075*0x3],_0x3fda5b[_0x2ffefd*(-0x1*0x1a67+0x1201*0x1+0x86a)+(0xb*0x1d5+0x2048+-0x346d*0x1)]=_0x19d3d9[-0x22ed*-0x1+-0x69f+-0x1c33]<<-0x1*0x2384+0x29b*-0x7+0x35d6|_0x19d3d9[-0x99*-0x14+-0x349*0xb+0x184b]<<0x1542+-0x1d53*0x1+0x81c|_0x19d3d9[-0x131c+0x41f+-0x78d*-0x2],_0x3fda5b[_0x2ffefd*(-0xd7b+-0x1add+0x285c)+(0xb9c*-0x1+-0x8*-0x1df+0x1*-0x359)]=_0x19d3d9[0x18f8+-0x3*0x833+-0x41]<<-0x1cd+0x1069*0x1+-0xe87|_0x19d3d9[-0xb04*0x1+-0xdc1+0x213*0xc]<<-0x33*0x5+-0x17c8+0x18d2|_0x19d3d9[-0x1f4e+-0x11*-0x3+-0x5*-0x63f],_0x1009b5[_0x2ffefd*(0x2*-0x1f3+-0x1f05+-0x3*-0xba5)+(-0x106a+-0x27*-0x89+-0x1*0x475)]=_0x19d3d9[0x37*-0x63+-0x984+0xa4e*0x3]<<-0x996*-0x1+-0x1*-0x1fc5+-0x2946|_0x19d3d9[-0x1f8*-0x7+-0x1128+-0x1c1*-0x2]<<0xb0e+0x823+-0x1326|_0x19d3d9[-0x2de*-0x1+0xde2+0x1*-0x109d],_0x1009b5[_0x2ffefd*(0x4*-0xdb+0x158*0x19+-0x1e28)+(-0x332*-0x1+-0x92*0x42+0x2273*0x1)]=_0x19d3d9[-0x1e40+-0xd*0x47+-0x1*-0x21ff]<<0x17fe+-0xd*-0x3f+-0x2*0xd8e|_0x19d3d9[-0x1*0x2147+0x2*-0x102d+0x41c6*0x1]<<-0x1ee3*-0x1+-0x1be6+-0x2f2|_0x19d3d9[0xaa5*0x2+-0x1*-0x26f8+-0x3c1c],_0x1009b5[_0x2ffefd*(0x172e+-0x2b4*-0x1+-0xcef*0x2)+(-0x3*-0xad1+-0xeb4*-0x1+0x3*-0xfb7)]=_0x19d3d9[-0x1a6+-0x1d5e+-0x65*-0x4f]<<0x6*-0x16c+-0x1*0x2683+0x68*0x74|_0x19d3d9[-0x16b2+0x2*-0xd59+0x318c]<<-0x1*0xaae+-0x19d0+0xc7*0x2f|_0x19d3d9[0x569+-0x10*0x228+0x1d40],_0x1009b5[_0x2ffefd*(0x2*-0xf57+-0x17dd+0x368f)+(-0x1b6b*-0x1+0x1db6+-0x391e)]=_0x19d3d9[-0xe8f+0x21f5+-0x1*0x133c]<<-0x1491+-0x225b+-0x3701*-0x1|_0x19d3d9[-0xc7*0x13+-0x14f9*-0x1+0x609*-0x1]<<-0xdd*0x11+-0x22*0xdf+0x2c56|_0x19d3d9[0x1374+-0x2642+-0x12fa*-0x1]):_0x3fda5b[_0x2ffefd]=_0x19d3d9[0xb1e+0x6*0x4ca+-0x1*0x27c5]<<0x33e+0x1*0x26ed+-0x2a16|_0x19d3d9[-0x188a+0x6b+0x1835]<<0x10f*-0x7+-0x131c+0x1a90|_0x19d3d9[-0x4*0x897+0x14d9+-0x2*-0x6cd]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x4cadc8,'sh4to7Data':_0x48a7a3,'sh8to11Data':_0x3fda5b,'sh12to15Data':_0x1009b5}},[_0x4cadc8['buffer'],_0x48a7a3['buffer'],_0x3fda5b['buffer'],_0x1009b5['buffer']]);},_0x2bfd0d=()=>{_0x31593d=null,_0x4eb2be=null,_0x4acdd6=null,_0x511030=null,_0x22e262=null,_0x58d8eb=null,_0x4753be=null,_0x4af793=null;};}class kb extends pe{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+Nb['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x22ea34,_0x5d07d5,_0x2d4a37){_0x22ea34['onmessage']=_0x329a02=>{if(!this['worker'])return;const {data:_0x4c846a}=_0x329a02;if(_0x4c846a['type']===_0x5d07d5)switch(_0x5d07d5){case'updatedSHD'+'ata1':_0x2d4a37(_0x4c846a['data']);break;case'updatedCol'+'orData':_0x2d4a37(_0x4c846a['data']);break;case'updatedTra'+'nsformData':_0x2d4a37(_0x4c846a);break;}};}['updateSHDa'+'ta1'](_0xbd3f38,_0x903df9,_0x796fe5){var _0x14fe9d;return(_0x14fe9d=this['worker'])==null||_0x14fe9d['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0xbd3f38,'shBands':_0x903df9,'SHData':_0x796fe5}),new Promise(_0x264c1e=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x20a5a2=>{_0x264c1e(_0x20a5a2);});});}async['updateTran'+'sData'](_0x3e4a83,_0x9efe05,_0x42d92e,_0x13caf7,_0x40e74d,_0x5b76da,_0x14fef1,_0x9c6ccb){var _0xa2b225;return(_0xa2b225=this['worker'])==null||_0xa2b225['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x3e4a83,'is4D':_0x9efe05,'position':_0x42d92e,'rotation':_0x13caf7,'motion':_0x40e74d,'scale':_0x5b76da,'muT':_0x14fef1,'tScale':_0x9c6ccb}),new Promise(_0x3f7920=>{const _0x4bc8e5=_0x281f61=>{_0x3f7920(_0x281f61);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x4bc8e5);});}['destroy'](){var _0x535276;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x535276=this['worker'])==null||_0x535276['terminate'](),this['worker']=null);}}const N_=(_0x11f133,_0x41d450)=>{const _0x5b7868=[];for(let _0x4eb8f3=-0x5d3+-0x7df*0x4+-0x254f*-0x1;_0x4eb8f3<_0x41d450;++_0x4eb8f3)_0x5b7868['push'](_0x11f133['getProp']('f_rest_'+_0x4eb8f3));return _0x5b7868;};class Ub extends Vy{constructor(_0x270723,_0x581a22){super(_0x270723,_0x581a22),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x2001+-0xe5*0x6+-0xe*0x1e7)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new kb(),this['assetsMana'+'gerLoadedT'+'ime']=-0xdf3+-0x13*-0x191+-0xfcb);}['setSceneIn'+'fo'](_0x501190){this['sceneInfo']['duration']=_0x501190['duration'],this['sceneInfo']['fps']=_0x501190['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x501190['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new I(_0x501190['globalBoun'+'dingBox']['min'][-0x67*-0x47+-0x9a+-0x1bf7],_0x501190['globalBoun'+'dingBox']['min'][0x24be+0x1f7c+-0xda5*0x5],_0x501190['globalBoun'+'dingBox']['min'][0x3*0x3a4+0x475+-0xf5f]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new I(_0x501190['globalBoun'+'dingBox']['max'][-0x14fb+-0x1b21+0x301c],_0x501190['globalBoun'+'dingBox']['max'][0xeb8+-0x546+-0x971],_0x501190['globalBoun'+'dingBox']['max'][0x5*-0x144+0x1bef+-0x1*0x1599]);const _0x225b4a=_0x501190['globalBoun'+'dingBox']['min'][-0x101f+-0x1688*-0x1+-0x669],_0x2aff75=_0x501190['globalBoun'+'dingBox']['min'][-0x1*-0x10f1+-0xf4*0x1b+0x466*0x2],_0x14311b=_0x501190['globalBoun'+'dingBox']['min'][-0x73*-0x3+-0x192+0x3b],_0x4812c6=_0x501190['globalBoun'+'dingBox']['max'][0x4de+-0x2*0x106f+0x400*0x7],_0x3ae549=_0x501190['globalBoun'+'dingBox']['max'][-0x3*-0xbca+0xf16+-0x10d1*0x3],_0x4c19b7=_0x501190['globalBoun'+'dingBox']['max'][-0x1*0x57a+-0x1e84+-0x600*-0x6],_0x856d54=new I((_0x225b4a+_0x4812c6)*(-0x8fe+0x1839*-0x1+0x2137+0.5),(_0x2aff75+_0x3ae549)*(0x2*-0xc73+0x2146+0x43*-0x20+0.5),(_0x14311b+_0x4c19b7)*(-0x210d+0xc68*0x3+-0x42b+0.5)),_0x30b66a=new I((_0x4812c6-_0x225b4a)*(0x14*0x6a+-0xf26+-0x1*-0x6de+0.5),(_0x3ae549-_0x2aff75)*(-0x6f3+0xfd*-0x2+0x5*0x1c9+0.5),(_0x4c19b7-_0x14311b)*(0x14*-0x107+-0xbcb+0x2057*0x1+0.5)),_0x43934f=new Ie(_0x856d54,_0x30b66a);this['sceneInfo']['globalBoun'+'dingBox']=_0x43934f,this['aabb']=_0x43934f;}async['updateData'](){var _0x242f8b,_0x45a2a0,_0x56c102,_0x5d1b1b,_0xfee413,_0x138aec,_0x3a1c18,_0x3b04bf,_0xe12d59,_0x53fbcd,_0x6c9834;await super['updateData']();const _0x6430a6=this['gsplatData'];if(!_0x6430a6)return;this['is4D']=_0x6430a6['is4D'];const _0x3af698=await this['getTransfo'+'rmDataByWo'+'rker'](_0x6430a6);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x3af698['centers'],this['motion']=_0x3af698['motion'],this['tScale']=_0x3af698['tScaleArra'+'y'],this['muT']=await _0x6430a6['getMuT'](),this['timeIndex']=await _0x6430a6['getTimeInd'+'ex']();const _0x3a0635=this['evalTextur'+'eSize'](_0x6430a6['numSplats']);this['colorTextu'+'re']?((_0x242f8b=this['colorTextu'+'re2'])==null||_0x242f8b['destroy'](),(_0x45a2a0=this['transformA'+'Texture2'])==null||_0x45a2a0['destroy'](),(_0x56c102=this['transformB'+'Texture2'])==null||_0x56c102['destroy'](),(_0x5d1b1b=this['transformR'+'Texture2'])==null||_0x5d1b1b['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x3a0635),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x3a0635),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x3a0635),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x3a0635),this['is4D']&&((_0xfee413=this['transformM'+'otionTextu'+'re2'])==null||_0xfee413['destroy'](),(_0x138aec=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x138aec['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x3a0635),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x3a0635))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',at,_0x3a0635),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',at,_0x3a0635),this['transformA'+'Texture']=this['createText'+'ure']('transformA',je,_0x3a0635),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',je,_0x3a0635),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ri,_0x3a0635),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ri,_0x3a0635),this['transformR'+'Texture']=this['createText'+'ure']('transformR',je,_0x3a0635),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',je,_0x3a0635),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',je,_0x3a0635),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',je,_0x3a0635),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',je,_0x3a0635),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',je,_0x3a0635))),await this['updateColo'+'rData'](_0x6430a6),await this['updateTran'+'sformFromD'+'ata'](_0x3af698),this['shBands']=_0x6430a6['shBands'],this['shBands']>-0x8a7+0x4*0x52c+-0xc09&&(this['sh1to3Text'+'ure']?((_0x3a1c18=this['sh1to3Text'+'ure2'])==null||_0x3a1c18['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x3a0635),this['shBands']>0x14*0x2+0x1d81+-0x1da8&&((_0x3b04bf=this['sh4to7Text'+'ure2'])==null||_0x3b04bf['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x3a0635),this['shBands']>0x91*0x4+-0x18a9+0x9b*0x25?((_0xe12d59=this['sh8to11Tex'+'ture2'])==null||_0xe12d59['destroy'](),(_0x53fbcd=this['sh12to15Te'+'xture2'])==null||_0x53fbcd['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3a0635),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x3a0635)):((_0x6c9834=this['sh8to11Tex'+'ture2'])==null||_0x6c9834['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3a0635)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ne,_0x3a0635),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ne,_0x3a0635),this['shBands']>0x3*-0x775+-0xaf*0x2+0x17be&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ne,_0x3a0635),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ne,_0x3a0635),this['shBands']>0xb57*0x1+-0x98c*-0x2+-0x1e6d?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ne,_0x3a0635),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ne,_0x3a0635),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ne,_0x3a0635),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ne,_0x3a0635)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Vi,_0x3a0635),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Vi,_0x3a0635)))),await this['updateSHDa'+'taByWorker'](_0x6430a6));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x5bbe98){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x5bbe98}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x327d3f,_0x23e824,_0x474ebe,_0x3ec58c,_0x58fe10,_0x920cf6){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x327d3f,'timeOption':_0x23e824,'loadedTime':_0x474ebe,'asset':_0x3ec58c,'events':_0x58fe10,'seekCB':_0x920cf6}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x1bbb+0x705+0x1e2*0xb);try{for(;this['appendQueu'+'e']['length']>0x24b*-0x11+0x1*0x270e+-0x13*0x1;){const _0x5e09dc=this['appendQueu'+'e']['shift']();_0x5e09dc['type']==='append'?await this['processApp'+'endTask'](_0x5e09dc['data']):_0x5e09dc['type']==='release'&&await this['processRel'+'easeTask'](_0x5e09dc['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x11*0x22a+0x3ec+-0x99*-0x37);}}}async['processRel'+'easeTask'](_0x172fa4){const {index:_0x165f2f}=_0x172fa4;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x165f2f);}async['processApp'+'endTask'](_0x2fc7cb){var _0x22bf9b;const {gsplatData:_0x2844b8,timeOption:_0x2583aa,loadedTime:_0x1079d7,asset:_0x39a199,events:_0x39fb0c,seekCB:_0x585841}=_0x2fc7cb;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x2583aa,this['asset']=_0x39a199,this['assetsMana'+'gerLoadedT'+'ime']=_0x1079d7,this['events']=_0x39fb0c,await this['gsplatData']['appendGSpl'+'atData'](_0x2844b8,_0x1079d7,_0x2583aa),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x249+-0x2b4+-0x1*-0x6d),_0x2844b8['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x2844b8['numSplats'])['toFixed'](-0x5ba*-0x5+-0x1e81+0x1e2)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x2*0x45a+-0x268e+-0x4e*-0x62),_0x2844b8['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x22bf9b=this['gsplatInst'+'ance'])==null?void(0x1df5+-0x25e2+0x7ed):_0x22bf9b['updateInst'+'anceData'](this,_0x1079d7,_0x585841)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0xfcb+-0x1*-0xbef+-0x4*0x6ee),_0x2844b8['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x37c481,_0x47c3a0){var _0x23d123;const _0x43682f=_0x37c481||this['assetsMana'+'gerLoadedT'+'ime'];(_0x23d123=this['asset'])==null||_0x23d123['fire']('setAssetsL'+'oaded',_0x43682f,_0x47c3a0);}['destroy'](){var _0x19c9fb,_0x49d3c8,_0x5ed8a2,_0xf64987,_0x5aef3f,_0xa2dace,_0x425752,_0xe61763,_0x144479,_0x1c3c19,_0xddd2de,_0x21a487,_0x2ddfd5,_0x176c8b,_0x22afbe,_0x2d1f42,_0x4bf962,_0x2b3ea4,_0x39ec36,_0x5a1b1f,_0x570653;(_0x19c9fb=this['updateData'+'Worker'])==null||_0x19c9fb['destroy'](),this['updateData'+'Worker']=void(0x2701*0x1+-0x19ff+-0xd02),(_0x49d3c8=this['colorTextu'+'re'])==null||_0x49d3c8['destroy'](),(_0x5ed8a2=this['transformA'+'Texture'])==null||_0x5ed8a2['destroy'](),(_0xf64987=this['transformB'+'Texture'])==null||_0xf64987['destroy'](),(_0x5aef3f=this['transformR'+'Texture'])==null||_0x5aef3f['destroy'](),(_0xa2dace=this['transformM'+'otionTextu'+'re'])==null||_0xa2dace['destroy'](),(_0x425752=this['transformL'+'ifecycleTe'+'xture'])==null||_0x425752['destroy'](),(_0xe61763=this['sh1to3Text'+'ure'])==null||_0xe61763['destroy'](),(_0x144479=this['sh4to7Text'+'ure'])==null||_0x144479['destroy'](),(_0x1c3c19=this['sh8to11Tex'+'ture'])==null||_0x1c3c19['destroy'](),(_0xddd2de=this['sh12to15Te'+'xture'])==null||_0xddd2de['destroy'](),(_0x21a487=this['colorTextu'+'re2'])==null||_0x21a487['destroy'](),(_0x2ddfd5=this['transformA'+'Texture2'])==null||_0x2ddfd5['destroy'](),(_0x176c8b=this['transformB'+'Texture2'])==null||_0x176c8b['destroy'](),(_0x22afbe=this['transformR'+'Texture2'])==null||_0x22afbe['destroy'](),(_0x2d1f42=this['transformM'+'otionTextu'+'re2'])==null||_0x2d1f42['destroy'](),(_0x4bf962=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x4bf962['destroy'](),(_0x2b3ea4=this['sh1to3Text'+'ure2'])==null||_0x2b3ea4['destroy'](),(_0x39ec36=this['sh4to7Text'+'ure2'])==null||_0x39ec36['destroy'](),(_0x5a1b1f=this['sh8to11Tex'+'ture2'])==null||_0x5a1b1f['destroy'](),(_0x570653=this['sh12to15Te'+'xture2'])==null||_0x570653['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x418e97){var _0x42974f,_0x1285d2,_0x5b1dc6,_0x3d85b9,_0x5357d6,_0x4c3641,_0x5d9592,_0x527cdd,_0x3dad66,_0x41ea2e,_0x52246a,_0x54af24,_0x581a5e;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x28da6a=((_0x42974f=_0x418e97['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0x25*0x25+0x611*-0x1+-0x8*-0x17):_0x42974f['data'])??0x18cf+-0x739+0x1*-0x1196,_0x335e37=((_0x1285d2=_0x418e97['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x1c19+0x3*0x26+-0x1*0x1c8b):_0x1285d2['data'])??-0x3*-0x215+0x98+0x15e*-0x5,_0x3fa21d=((_0x5b1dc6=_0x418e97['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x4f1*-0x4+-0x8f7+0x18b*-0x7):_0x5b1dc6['data'])??0xbf9+-0x22d5+0x16dd,_0x566068=((_0x3d85b9=_0x418e97['getParamet'+'er']('uHueOffset'))==null?void(0x15e2*0x1+0x21f4+0x7fa*-0x7):_0x3d85b9['data'])??-0x1b7*0xe+0x993+0xe6f,_0x1c25b0=((_0x5357d6=_0x418e97['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x107c+0x53+-0x10cf):_0x5357d6['data'])??-0x1baa+0x1c7f+-0xd5,_0x151c23=((_0x4c3641=_0x418e97['getParamet'+'er']('uOpacity'))==null?void(0x1a72+-0x185b+0x1*-0x217):_0x4c3641['data'])??-0x1063*-0x2+-0x1*0x823+-0x18a2,_0x14147f=((_0x5d9592=_0x418e97['getParamet'+'er']('clrOffset'))==null?void(0xd*0x113+-0x1015*0x2+0x1233*0x1):_0x5d9592['data'])??[-0x20bb+0x1d7c+0x33f,0x254f*0x1+0x3*-0x15+-0x2*0x1288,0x21b3+-0x1*0x135a+-0xe59,0x12f8+0x2302+-0x35f9],_0x4c650d=((_0x527cdd=_0x418e97['getParamet'+'er']('clrScale'))==null?void(0x1*0xe64+0x1ead+-0x2d11):_0x527cdd['data'])??[0x451+0x1877*-0x1+-0xb*-0x1d5,0x1263+0x982+-0x1be4,0xcee+-0xaf6*-0x1+-0x17e3,-0x4*-0x6df+0xa*0x2e7+-0x3881],_0x301e06=((_0x3dad66=_0x418e97['getParamet'+'er']('uShapeN'))==null?void(0x234e+0x2*0x677+0xc4*-0x3f):_0x3dad66['data'])??0x10db+0x37*0x7d+-0x1*0x2bb6,_0xe42988=((_0x41ea2e=_0x418e97['getParamet'+'er']('mode'))==null?void(0x4c*-0x7f+-0x2*-0x52f+0x1*0x1b56):_0x41ea2e['data'])??-0x2bb+0x2e3+-0x8*0x5,_0x4cfb1c=((_0x52246a=_0x418e97['getParamet'+'er']('ringSize'))==null?void(0x66e+-0xf55+0x8e7):_0x52246a['data'])??-0xe3*-0x7+-0x158e+0xf59,_0x459cbc=((_0x54af24=_0x418e97['defines'])==null?void(0x254f*-0x1+0x2d7*-0xa+0x10b*0x3f):_0x54af24['get']('uOpenAnim'))??'0',_0x4fa949=((_0x581a5e=_0x418e97['defines'])==null?void(0x214*-0xe+-0x1*0x1ee2+0x355*0x12):_0x581a5e['get']('uControlCo'+'lorMode'))??'0';_0x418e97['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x418e97['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x418e97['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x418e97['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x418e97['setParamet'+'er']('uSplatScal'+'e',_0x335e37),_0x418e97['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x28da6a),_0x418e97['setParamet'+'er']('uSaturatio'+'n',_0x3fa21d),_0x418e97['setParamet'+'er']('uHueOffset',_0x566068),_0x418e97['setParamet'+'er']('uInvertOpa'+'city',_0x1c25b0),_0x418e97['setParamet'+'er']('uOpacity',_0x151c23),_0x418e97['setParamet'+'er']('clrOffset',_0x14147f),_0x418e97['setParamet'+'er']('clrScale',_0x4c650d),_0x418e97['setParamet'+'er']('uShapeN',_0x301e06),_0x418e97['setParamet'+'er']('mode',_0xe42988),_0x418e97['setParamet'+'er']('ringSize',_0x4cfb1c),_0x418e97['setParamet'+'er']('prerenderC'+'Time',0x17f5+0x1*-0x3d7+-0x141e),_0x418e97['setParamet'+'er']('renderSpac'+'e',-0x2279+0xa2e+0x1855),_0x418e97['setParamet'+'er']('endSpace',-0x834+-0x230d+0x2b4b),_0x418e97['setDefine']('uOpenAnim',_0x459cbc),_0x418e97['setDefine']('uControlCo'+'lorMode',_0x4fa949),this['transformM'+'otionTextu'+'re']&&_0x418e97['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x418e97['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x418e97['setDefine']('SH_BANDS',this['shBands']),_0x418e97['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x418e97['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x418e97['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x418e97['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x418e97['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x5860b1){const _0x360a86=Math['ceil'](Math['sqrt'](_0x5860b1)),_0x53962f=Math['ceil'](_0x5860b1/_0x360a86);return new J(_0x360a86,_0x53962f);}async['updateColo'+'rData'](_0x52ecad){var _0x59db40;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x11233f=this['colorTextu'+'re2'];if(!_0x11233f||this['isDestroye'+'d'])return;let _0x121bba=(_0x59db40=_0x52ecad['transformD'+'ata'])==null?void(-0x1b4*0x2+-0xc04+0xf6c):_0x59db40['dataColor'];if(!_0x121bba){const _0xcbb803=_0x52ecad['getProp']('color_opac'+'ity');_0x121bba=new Uint16Array(_0xcbb803['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x11233f,_0x121bba);}async['getTransfo'+'rmDataByWo'+'rker'](_0x266452){var _0x2f4508;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x2f4508=_0x266452['transformD'+'ata'])!=null&&_0x2f4508['dataCenter'+'s'])return{'centers':_0x266452['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x266452['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x266452['transformD'+'ata']['dataScale'],'dataRotation':_0x266452['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x266452['transformD'+'ata']['dataMotion'],'dataTime':_0x266452['transformD'+'ata']['dataTime'],'motion':_0x266452['transformD'+'ata']['motion'],'tScaleArray':_0x266452['transformD'+'ata']['tScaleArra'+'y']};const _0x1ea503=_0x266452['getProp']('position'),_0x2fe9d4=_0x266452['getProp']('motion'),_0x478c22=_0x266452['getProp']('rotation'),_0xf2419=_0x266452['getProp']('scale'),_0x5a6f78=_0x266452['getProp']('t'),_0x4aa351=_0x266452['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x266452['numSplats'],this['is4D'],_0x1ea503,_0x478c22,_0x2fe9d4,_0xf2419,_0x5a6f78,_0x4aa351);}async['updateTran'+'sformFromD'+'ata'](_0x159609){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x159609['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x159609['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x159609['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x159609['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x159609['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x5d15eb,_0x22c143){if(!this['isDestroye'+'d'])return new Promise(_0x2bd2ff=>{requestIdleCallback(()=>{const _0x5dc1f0=_0x5d15eb['lock']();_0x5dc1f0==null||_0x5dc1f0['set'](_0x22c143),_0x5d15eb['unlock'](),_0x2bd2ff(!(0x5b*-0x7+0x13e5+0x1168*-0x1));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x244b38){var _0x544f76,_0x1e2d2d,_0x44a4da,_0x3094c1,_0x34a230,_0x55a95a,_0x7618ed,_0x4a6b20;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x5ba2a2=(_0x544f76=this['sh1to3Text'+'ure2'])==null?void(0x1697+0x10*0x23c+-0x3a57):_0x544f76['lock'](),_0x178ff1=(_0x1e2d2d=this['sh4to7Text'+'ure2'])==null?void(0x1fbe+0x250e+-0x44cc):_0x1e2d2d['lock'](),_0x86f5bb=(_0x44a4da=this['sh8to11Tex'+'ture2'])==null?void(0xa*-0x1cd+0x193a+-0x738):_0x44a4da['lock'](),_0x7f5b64=(_0x3094c1=this['sh12to15Te'+'xture2'])==null?void(-0x3b*0x2b+-0x2515+0x2efe):_0x3094c1['lock'](),_0x4fd0e4={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x559453=N_(_0x244b38,_0x4fd0e4*(-0x1042*-0x1+-0x11*0x27+-0xda8)),_0x5e3d41=0xc1*-0x1a+0x255f+-0x9c6,_0x597d24=0x63*0x11+-0x20d8+0x34*0x95,_0x40cfc3=new Float32Array(0x1f13+-0x1*-0x595+-0x355*0xb),_0x3a6756=new Uint32Array(_0x40cfc3['buffer']),_0x3979b9=new Array(_0x4fd0e4*(-0x1*0x1666+-0xf35*-0x1+0x734))['fill'](-0x16a+0x201c+-0x1eb2);for(let _0x53723e=-0xb8*-0x17+0xc89+0x1*-0x1d11;_0x53723e<_0x244b38['numSplats'];++_0x53723e){for(let _0x45d824=-0x3*0xa9b+0x8fd+0x16d4;_0x45d824<_0x4fd0e4;++_0x45d824)_0x3979b9[_0x45d824*(0x25f4+0xe2*0x7+-0x2c1f)]=_0x559453[_0x45d824][_0x53723e],_0x3979b9[_0x45d824*(0x2*-0xd3a+0x1*0x14e7+0x590)+(0x154a+-0xb28+-0xa21*0x1)]=_0x559453[_0x45d824+_0x4fd0e4][_0x53723e],_0x3979b9[_0x45d824*(-0x8*-0x43c+-0x1441+-0xd9c)+(0x24b7+-0x220a+-0x1*0x2ab)]=_0x559453[_0x45d824+_0x4fd0e4*(-0x5*-0x101+0x2543+0x7*-0x60a)][_0x53723e];let _0x314087=_0x3979b9[0x4*0x553+0x706+-0x1c52];for(let _0x41ccfc=-0x1*0x88a+0x1*-0x23c0+0x2c4b;_0x41ccfc<_0x4fd0e4*(0x81+0x2*-0x923+0x11c8);++_0x41ccfc)_0x314087=Math['max'](_0x314087,Math['abs'](_0x3979b9[_0x41ccfc]));if(_0x314087!==0x296*-0xf+0xe3*0x29+0x7*0x59){for(let _0x13101f=-0x13f+0x116d+-0x102e;_0x13101f<_0x4fd0e4;++_0x13101f)_0x3979b9[_0x13101f*(-0x1*0x13af+0x2138+0x2*-0x6c3)+(0x1*-0x324+-0x9*0x10d+0xc99)]=Math['max'](-0xeec+-0x1*0x1d+0x1*0xf09,Math['min'](_0x5e3d41,Math['floor']((_0x3979b9[_0x13101f*(0x1938+-0x158c+-0x3a9)+(0x6*-0x3e5+0x1b46*0x1+0xa*-0x64)]/_0x314087*(-0xe12+0x13c*0x8+0x432+0.5)+(-0x1*0x1e57+0x134e+0xb09+0.5))*_0x5e3d41+(-0x2561+-0x3*-0x8f6+0xa7f+0.5)))),_0x3979b9[_0x13101f*(-0x46f+-0x24f8+0x26*0x117)+(0x1*-0x99b+0x137*0x1+-0x7*-0x133)]=Math['max'](-0x375+-0x159c+-0x9*-0x2c9,Math['min'](_0x597d24,Math['floor']((_0x3979b9[_0x13101f*(0x68b+0xaa1+-0x1129)+(-0x1*0x1ff6+-0x3a+0x2031)]/_0x314087*(0x239a+-0x5c4+-0x86*0x39+0.5)+(0xa26+0x145c+-0x1*0x1e82+0.5))*_0x597d24+(-0x437*0x2+0x2ff+0x56f+0.5)))),_0x3979b9[_0x13101f*(-0x17*0x5+-0x21fe+0xb7c*0x3)+(0x1*0x9ad+0x1*-0x138e+0x9e3*0x1)]=Math['max'](-0x177a*-0x1+0x24ce*-0x1+0xd54,Math['min'](_0x5e3d41,Math['floor']((_0x3979b9[_0x13101f*(0xfdf+0x274*0x6+0xce*-0x26)+(-0x206a+-0x15b3+0x361f)]/_0x314087*(-0x31d*-0xa+0x1c27+0x1*-0x3b49+0.5)+(-0xe*0xee+0xf7*-0x28+0x19ce*0x2+0.5))*_0x5e3d41+(-0x2072+-0x96e+0x10*0x29e+0.5))));_0x40cfc3[-0x1129*0x1+0x2609+-0x1*0x14e0]=_0x314087,_0x5ba2a2[_0x53723e*(-0x1320+-0x1c01*0x1+0x2f25)+(-0x4ee+-0x13*-0x185+-0x17f1)]=_0x3a6756[0x7*-0x2ed+-0xb*0x367+0x39e8],_0x5ba2a2[_0x53723e*(0x2368+-0x750+-0x1c14)+(0x15e3*0x1+0x1*-0x11eb+-0x3f7)]=_0x3979b9[-0x1a96+0x2b+0x1a6b]<<-0x1e6e+0x2b2+0x1bd1*0x1|_0x3979b9[-0x1*-0x1f04+0x2267+0x15ce*-0x3]<<0xc39+-0x48d+-0x7a1|_0x3979b9[-0x782+-0x1*0x2100+0x2884],_0x5ba2a2[_0x53723e*(0x3f*0x83+-0x2414+0x15*0x2f)+(0x321*0x7+-0x1bec+-0x1*-0x607)]=_0x3979b9[-0xdb2+0x1261+-0x4ac]<<-0x1bd4+-0x13*0xa7+-0x5c2*-0x7|_0x3979b9[0x9be+-0x150d+0xb53]<<0x503+-0x3*0x11+0xb*-0x6f|_0x3979b9[-0x24ce+-0x1cf2+0x41c5],_0x5ba2a2[_0x53723e*(-0x1e60+-0x1*-0x1a13+0x451)+(0x7dc+-0x208d+0x11*0x174)]=_0x3979b9[-0x1*0x1711+-0x1*0x509+-0x5a*-0x50]<<-0x16d7+-0x1168+0x2*0x142a|_0x3979b9[0x2608+-0x709+-0x1ef8]<<0x1024+-0x1*-0x833+-0x184c|_0x3979b9[-0xb35*0x3+-0x1*-0x12ef+0xeb8],this['shBands']>0xc06+-0x13bb*0x1+0x7b6&&(_0x178ff1[_0x53723e*(0xe04+-0x1*0x2522+0x15*0x11a)+(-0x1*0x16d7+-0x1*0x3f5+0x1acc)]=_0x3979b9[-0x6*0x4ab+0x9*0x322+-0x27]<<0x1720+0x26e+-0x1*0x1979|_0x3979b9[-0x216c+0x1f65+0x211]<<0x1b8a+0x399*0x1+-0x1f18|_0x3979b9[0x212b+-0x255d+0x43d*0x1],_0x178ff1[_0x53723e*(0x233+-0x47*0x47+-0x5d6*-0x3)+(0x121*-0x9+-0x13*-0x209+-0x1c81*0x1)]=_0x3979b9[0x1f6f+-0x4b1+0x11*-0x192]<<0x4*0x128+0xa*-0x2+-0x477|_0x3979b9[0x1a2f+0xd98+-0xa*0x3f9]<<0x1aa5+0x11*0x41+-0x1eeb|_0x3979b9[-0xa7*-0x9+-0x7c*-0x37+-0x2075],_0x178ff1[_0x53723e*(0x161e*-0x1+0x26bc+-0x109a)+(0x1*-0x8ba+0x18de+-0xa*0x19d)]=_0x3979b9[0x1ad3+-0x3*0x89b+-0xf3]<<-0x1*0x75c+0x2510+-0x1d9f|_0x3979b9[0x253a+0x3*-0xc7c+0x4a]<<0x485*0x4+-0x1*-0x817+0xd10*-0x2|_0x3979b9[-0x1e57+0xfac+0xebc],_0x178ff1[_0x53723e*(0x3*-0x427+0xf64+-0x53*0x9)+(-0x192+-0xd51+0xee6)]=_0x3979b9[0x1731+0x91*0x1+0x1*-0x17b0]<<0xc6*0x29+0x23d+0x33*-0xaa|_0x3979b9[-0x1d*0x11f+0x237a+-0x2e4]<<-0x937*-0x3+-0x25e5+0x1*0xa4b|_0x3979b9[-0x8df*0x1+-0x31*0x35+0x1*0x1318],this['shBands']>0x1*-0x1eb+-0x1*0xb2d+0xd1a?(_0x86f5bb[_0x53723e*(0xb0d*-0x1+0x16c1+-0xbb0*0x1)+(-0x14b*0x1+-0x831*0x1+0x97c)]=_0x3979b9[-0x3*0xba1+0x1*0x1b4f+0x7a9]<<0xfb7+0x2010+-0x1e*0x197|_0x3979b9[-0x164c*0x1+-0x32a+0x198c]<<-0x976*-0x3+-0x26b*-0x2+-0x212d|_0x3979b9[0x1a43+0xa5b*0x1+0x3*-0xc2d],_0x86f5bb[_0x53723e*(-0x55*-0x6e+-0x1015*-0x1+-0x1*0x3497)+(-0x1*-0x1b4f+-0x303*0x2+-0xe3*0x18)]=_0x3979b9[-0x1d7+-0x33*0x2b+0xa80]<<0x254d+0x1810+0x94*-0x6a|_0x3979b9[0x1*0x2472+0xec7+-0x3320]<<-0x11a*0x17+-0x24df*0x1+0x10*0x3e4|_0x3979b9[0x29*-0x45+-0x1a5e+-0x235*-0x11],_0x86f5bb[_0x53723e*(0x2*0xca+0x22c0*-0x1+-0xec*-0x24)+(-0x491+0xcb5+-0x822)]=_0x3979b9[-0x1ae*0x6+0x49*-0x1b+0x11e2]<<0x194c+-0xb+-0x219*0xc|_0x3979b9[-0x1d0c+-0x43b+-0x25*-0xe7]<<0x1d*-0x25+-0x7*0x11f+0xc15|_0x3979b9[-0x1*-0x17c3+0x25*-0x6e+-0x7c0],_0x86f5bb[_0x53723e*(0xfaa+0x141d*0x1+-0x23c3)+(-0x19ad+0x1bbe+-0x1*0x20e)]=_0x3979b9[-0x8*0x117+0x2499+-0x1bc3]<<-0x1d06+0x26a1+0x35*-0x2e|_0x3979b9[0x16*-0x122+-0x3e*0x1a+0x1f57]<<-0x16a*-0x9+0x1*0x18f+-0x1*0xe3e|_0x3979b9[-0x51d*0x1+-0x33f*-0xc+-0x21b7],_0x7f5b64[_0x53723e*(0x1ca*-0x3+-0x8c5+0xe27)+(-0x147c+-0x88f*0x3+-0xf63*-0x3)]=_0x3979b9[-0x527*0x2+-0x11e+0x1*0xb8d]<<0x2*-0x101c+-0x2b0*0x6+0x306d|_0x3979b9[0x259+-0x1877+0x1640]<<-0x62f*0x1+0x950+0x1*-0x316|_0x3979b9[0x1e67+-0x719*-0x1+0x779*-0x5],_0x7f5b64[_0x53723e*(0x1b85+-0x2*-0x728+-0x1*0x29d1)+(-0x163d*0x1+0xd5*-0x1+0x1713)]=_0x3979b9[-0x1*0x270e+0x1*-0x26a9+0x1*0x4ddb]<<0x204d+0x3e*-0x2e+-0x1514|_0x3979b9[-0x1c2e+0x353*-0xa+-0x3d91*-0x1]<<0xbdc+0xa08+0x31f*-0x7|_0x3979b9[0x1*0x23b8+-0x87b*0x1+0x1*-0x1b17],_0x7f5b64[_0x53723e*(-0x251b+0x11c8+0x1357)+(-0x12ff+-0x79*-0x1+0x1288)]=_0x3979b9[0x20e7+0x1e*-0x141+0x59*0xe]<<-0x1*-0x243d+-0x2207*0x1+-0x221|_0x3979b9[0x24cd+0x1bcf+0x226*-0x1e]<<0x242e*0x1+0x53*0x56+-0x4005|_0x3979b9[0x930+-0xe9+-0x1*0x81e],_0x7f5b64[_0x53723e*(0x2377+0x24cd+0x484*-0x10)+(-0x970+0x1111+-0x28a*0x3)]=_0x3979b9[-0x135c+0x5c6+0x40*0x37]<<-0x23c1+0x1eb1+0x525|_0x3979b9[-0x15be+0x1*-0x1b2b+0x105c*0x3]<<0x26b2+-0x2630+-0x77|_0x3979b9[0x12b2*0x1+0x17d2*0x1+-0x2a58]):_0x86f5bb[_0x53723e]=_0x3979b9[0x4*-0x2+0x91d+-0x30*0x30]<<-0x2058+0x2504+-0x19*0x2f|_0x3979b9[-0x5ac+0x781+-0x1bf]<<-0x1e89+-0x1cb1+0x3b45|_0x3979b9[0x12ff+0x43*-0xb+-0x1007*0x1]);}}(_0x34a230=this['sh1to3Text'+'ure2'])==null||_0x34a230['unlock'](),(_0x55a95a=this['sh4to7Text'+'ure2'])==null||_0x55a95a['unlock'](),(_0x7618ed=this['sh8to11Tex'+'ture2'])==null||_0x7618ed['unlock'](),(_0x4a6b20=this['sh12to15Te'+'xture2'])==null||_0x4a6b20['unlock']();}async['updateSHDa'+'taByWorker'](_0x2be6f5){var _0x1626a3,_0x5e9568,_0xf11d0b,_0x3c0621,_0x46ac96;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x2ff145={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0xa9ede,_0x360401,_0x244c1e,_0x5383a6;if((_0x1626a3=_0x2be6f5['transformD'+'ata'])!=null&&_0x1626a3['sh1to3Data'])_0xa9ede=(_0x5e9568=_0x2be6f5['transformD'+'ata'])==null?void(-0xf9d+-0x114c+0x20e9):_0x5e9568['sh1to3Data'],_0x360401=(_0xf11d0b=_0x2be6f5['transformD'+'ata'])==null?void(0x5f1+0xf77*-0x1+0x986):_0xf11d0b['sh4to7Data'],_0x244c1e=(_0x3c0621=_0x2be6f5['transformD'+'ata'])==null?void(-0x24f+-0x233b+0x258a):_0x3c0621['sh8to11Dat'+'a'],_0x5383a6=(_0x46ac96=_0x2be6f5['transformD'+'ata'])==null?void(-0x1*-0x25c+-0x21dc+0x1f80):_0x46ac96['sh12to15Da'+'ta'];else{const _0x7d284d=N_(_0x2be6f5,_0x2ff145*(-0x148e*0x1+-0x6*-0x471+-0x615)),_0x246081=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x2be6f5['numSplats'],this['shBands'],_0x7d284d);_0xa9ede=_0x246081['sh1to3Data'],_0x360401=_0x246081['sh4to7Data'],_0x244c1e=_0x246081['sh8to11Dat'+'a'],_0x5383a6=_0x246081['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0xa9ede),this['shBands']>-0xe54+-0x1*0x222b+0x3080&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x360401),this['shBands']>-0x1*0x1f38+-0x1767+0x36a1?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x244c1e),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x5383a6)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x244c1e));}}const Bb='FILL_WINDO'+'W',k_='KEEP_ASPEC'+'T',U_='AUTO',zb='FIXED';let Gy;function Zr(){return Gy;}function Nf(_0x3bb52c){Gy=_0x3bb52c;}class Vb{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x3757a9){M['assert'](_0x3757a9),_0x3757a9['frameUpdat'+'e']();const _0x458584=_0x3757a9['beforePass'+'es'];for(let _0x31ecf2=0x5*-0x315+0x1a14+-0x1*0xaab;_0x31ecf2<_0x458584['length'];_0x31ecf2++){const _0x11d8f4=_0x458584[_0x31ecf2];_0x11d8f4['enabled']&&this['addRenderP'+'ass'](_0x11d8f4);}_0x3757a9['enabled']&&this['renderPass'+'es']['push'](_0x3757a9);const _0x191084=_0x3757a9['afterPasse'+'s'];for(let _0x4e3440=-0x1007+-0x20e0+0xd*0x3c3;_0x4e3440<_0x191084['length'];_0x4e3440++){const _0x44720a=_0x191084[_0x4e3440];_0x44720a['enabled']&&this['addRenderP'+'ass'](_0x44720a);}}['reset'](){this['renderPass'+'es']['length']=0x4a1+-0x2dd*0x5+-0x26c*-0x4;}['compile'](){const _0x3944cf=this['renderTarg'+'etMap'],_0x1f34ee=this['renderPass'+'es'];for(let _0x27389b=-0x1*0x440+0x7*-0x73+0x765;_0x27389b<_0x1f34ee['length'];_0x27389b++){const _0xf14926=_0x1f34ee[_0x27389b],_0x25a8a7=_0xf14926['renderTarg'+'et'];if(_0x25a8a7!==void(0x17a5+0xd*0x1dd+-0x17ef*0x2)){const _0x33394f=_0x3944cf['get'](_0x25a8a7);if(_0x33394f){const _0x51f8e8=_0xf14926['colorArray'+'Ops']['length'];for(let _0x3692fd=0x1df0+0x2164+0x1*-0x3f54;_0x3692fd<_0x51f8e8;_0x3692fd++)_0xf14926['colorArray'+'Ops'][_0x3692fd]['clear']||(_0x33394f['colorArray'+'Ops'][_0x3692fd]['store']=!(0x1c21+0xc3d+-0x285e));_0xf14926['depthStenc'+'ilOps']['clearDepth']||(_0x33394f['depthStenc'+'ilOps']['storeDepth']=!(0x1*-0xb7b+0x2401+-0xc43*0x2)),_0xf14926['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x33394f['depthStenc'+'ilOps']['storeStenc'+'il']=!(0xacc+0x1825+-0x6fd*0x5));}_0x3944cf['set'](_0x25a8a7,_0xf14926);}}for(let _0x538581=0x26e1+-0x4af+-0x2232;_0x538581<_0x1f34ee['length']-(-0x1e1e+0x15a2+0x87d);_0x538581++){const _0x476624=_0x1f34ee[_0x538581],_0x3c35e9=_0x476624['renderTarg'+'et'],_0x1647b3=_0x1f34ee[_0x538581+(0x25*-0x56+0x125f*-0x1+-0x1ece*-0x1)],_0x3ed9b3=_0x1647b3['renderTarg'+'et'];_0x3c35e9!==_0x3ed9b3||_0x3c35e9===void(-0x12a0+0x12ae+-0xe)||_0x1647b3['depthStenc'+'ilOps']['clearDepth']||_0x1647b3['depthStenc'+'ilOps']['clearStenc'+'il']||_0x1647b3['colorArray'+'Ops']['some'](_0x4cfe46=>_0x4cfe46['clear'])||_0x476624['afterPasse'+'s']['length']>-0x23d1+0x25*-0x6a+0x2b1*0x13||_0x1647b3['beforePass'+'es']['length']>-0x168c+-0x1140+0x27cc||(_0x476624['_skipEnd']=!(-0x1b76+0x24d*0x9+0x7*0xf7),_0x1647b3['_skipStart']=!(0x17cd+-0x25*-0x7b+0x1*-0x2994));}let _0x3a71cf=null,_0x494709=null;for(let _0x1e421f=0x313+0x18f9+0x2*-0xe06;_0x1e421f<_0x1f34ee['length'];_0x1e421f++){const _0x4cd3cc=_0x1f34ee[_0x1e421f],_0x4d034e=_0x4cd3cc['renderTarg'+'et'],_0x3c011c=_0x4d034e==null?void(0x47a*-0x7+-0x58+0x1*0x1fae):_0x4d034e['colorBuffe'+'r'];if(_0x3c011c!=null&&_0x3c011c['cubemap']){if(_0x3a71cf===_0x3c011c){const _0x2cb724=_0x494709['colorArray'+'Ops']['length'];for(let _0x240e89=0x266f+0x7e9*0x3+-0x49*0xda;_0x240e89<_0x2cb724;_0x240e89++)_0x494709['colorArray'+'Ops'][_0x240e89]['mipmaps']=!(-0x1*-0x26dd+0x1*-0x1e01+-0x8db);}_0x3a71cf=_0x4d034e['colorBuffe'+'r'],_0x494709=_0x4cd3cc;}else _0x4cd3cc['requiresCu'+'bemaps']&&(_0x3a71cf=null,_0x494709=null);}_0x3944cf['clear']();}['render'](_0x451156){this['compile']();const _0x26e2b1=this['renderPass'+'es'];for(let _0x203d45=-0x13*-0x10a+0x1718+-0x2ad6;_0x203d45<_0x26e2b1['length'];_0x203d45++)_0x26e2b1[_0x203d45]['render']();}}class Gb{constructor(_0x2d12a5,_0x5e1040){this['texture0']=_0x2d12a5,this['texture1']=_0x5e1040;}['destroy'](){var _0x4fb6b3,_0x25c9c7;(_0x4fb6b3=this['texture0'])==null||_0x4fb6b3['destroy'](),(_0x25c9c7=this['texture1'])==null||_0x25c9c7['destroy']();}}const B_=new Ht();class Vr{static['createText'+'ure'](_0x26f1f8,_0x3e52e8,_0x18a9c3,_0x5cc7ff=''){return new _e(_0x26f1f8,{'name':'AreaLightL'+'UT'+_0x5cc7ff,'width':_0x18a9c3,'height':_0x18a9c3,'format':_0x3e52e8,'addressU':ue,'addressV':ue,'type':di,'magFilter':_t,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0xa89+0xa64*-0x1+-0x1*-0x14ee)});}static['applyTextu'+'res'](_0x3fdbd4,_0x5b8346,_0x471804){B_['remove'](_0x3fdbd4),B_['get'](_0x3fdbd4,()=>new Gb(_0x5b8346,_0x5b8346===_0x471804?null:_0x471804)),_0x3fdbd4['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x5b8346),_0x3fdbd4['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x471804);}static['createPlac'+'eholder'](_0x430676){const _0x429916=Vr['createText'+'ure'](_0x430676,at,0x1155+0x22d+-0x1380,'placeholde'+'r');_0x429916['lock']()['fill'](0x94b+-0x19*-0xcc+-0x1d37),_0x429916['unlock'](),Vr['applyTextu'+'res'](_0x430676,_0x429916,_0x429916);}static['set'](_0x484edf,_0x5e225e,_0x5a41e7){function _0x4e5acf(_0x2eda24,_0x29bcba,_0x24712f){const _0xcb6fbd=Vr['createText'+'ure'](_0x2eda24,_0x24712f,0xb3*-0x27+0x1a26+0x15f);return _0xcb6fbd['lock']()['set'](_0x29bcba),_0xcb6fbd['unlock'](),_0xcb6fbd;}function _0x256e3c(_0x4c9caf){const _0x1c0dbc=_0x4c9caf['length'],_0x466d55=new Uint16Array(_0x1c0dbc),_0x2f5fa7=mn['float2Half'];for(let _0x4b03cb=0x2468+0x1*0x26e1+-0x4b49*0x1;_0x4b03cb<_0x1c0dbc;_0x4b03cb++)_0x466d55[_0x4b03cb]=_0x2f5fa7(_0x4c9caf[_0x4b03cb]);return _0x466d55;}const _0x581ba0=_0x5e225e,_0x3eea95=_0x5a41e7,_0x3045c7=_0x256e3c(_0x581ba0),_0x4b2103=_0x256e3c(_0x3eea95),_0x1f7833=_0x4e5acf(_0x484edf,_0x3045c7,at),_0x107fae=_0x4e5acf(_0x484edf,_0x4b2103,at);Vr['applyTextu'+'res'](_0x484edf,_0x1f7833,_0x107fae);}}const Qh='en-US',Jh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},Nm={};function _r(_0x28fd7f,_0x20eb35){for(let _0x155b88=0x1dc1+0x13*-0x17f+-0x154,_0x8ad619=_0x28fd7f['length'];_0x155b88<_0x8ad619;_0x155b88++)Nm[_0x28fd7f[_0x155b88]]=_0x20eb35;}function bi(_0x25a811){const _0x1210c1=_0x25a811['indexOf']('-');return _0x1210c1!==-(-0xfaa+-0x1*-0x29+0xf82)?_0x25a811['substring'](-0x3*0x82d+-0x1*-0x12ef+0x598,_0x1210c1):_0x25a811;}function Hb(_0x4ae32,_0x2f2f7a){const _0x16f50e=_0x4ae32['indexOf']('-');return _0x16f50e!==-(0x15c+-0x152e+-0x1d*-0xaf)?_0x2f2f7a+_0x4ae32['substring'](_0x16f50e):_0x2f2f7a;}function Hy(_0x20b1dc,_0x3ed2a8){if(_0x3ed2a8[_0x20b1dc])return _0x20b1dc;let _0xa6c42c=Jh[_0x20b1dc];if(_0xa6c42c&&_0x3ed2a8[_0xa6c42c])return _0xa6c42c;const _0x432bcf=bi(_0x20b1dc);return _0xa6c42c=Jh[_0x432bcf],_0x3ed2a8[_0xa6c42c]?_0xa6c42c:_0x3ed2a8[_0x432bcf]?_0x432bcf:Qh;}_r(['ja','ko','th','vi','zh','id'],_0x2273b1=>0xb5d+-0x851*0x1+-0x30c),_r(['fa','hi'],_0x4c2722=>_0x4c2722>=0x359*-0x7+-0xf6*0x18+0x2e7f*0x1&&_0x4c2722<=-0x10c6+-0x14a9+0x2570*0x1?-0x154c+-0xad0+-0x55a*-0x6:0x316+-0x8b*-0x1a+-0x1133),_r(['fr','pt'],_0x4bbc58=>_0x4bbc58>=-0xb2a+0x11*-0xb3+0x3*0x7af&&_0x4bbc58<0x897+-0x16e9+0xe54?0x17bc*-0x1+-0x21*-0x71+0x92b*0x1:-0x1609*-0x1+0x63*-0x1+-0x15a5),_r(['da'],_0x17ce34=>_0x17ce34===0xce5+0x22e+-0xf12||!Number['isInteger'](_0x17ce34)&&_0x17ce34>=-0xd4b+-0x330+0x107b*0x1&&_0x17ce34<=-0x2053*0x1+-0xc*0x265+0x3d10?0x1*0x414+-0xcfb*-0x2+-0xf05*0x2:0x2081+0x3cf*0x5+-0x338b),_r(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x56aec6=>_0x56aec6===0x1867*0x1+0x19*0x95+-0x1*0x26f3?0x8bf*-0x1+0x4*0x1e3+0x133:-0x1fdc*0x1+-0x5*-0xb9+0x1c40),_r(['ru','uk'],_0x4ad96f=>{if(Number['isInteger'](_0x4ad96f)){const _0x1b41ca=_0x4ad96f%(-0x1*0x1889+0x1*-0x50b+-0xecf*-0x2),_0xff8a18=_0x4ad96f%(0x186f+-0x1459+-0x3b2);if(_0x1b41ca===0x234c+0x1d*-0x106+-0x59d&&_0xff8a18!==-0x147*-0x2+-0x1b48+0x18c5)return-0x1972+-0x2b*-0xce+-0x928;if(_0x1b41ca>=-0x3d*-0x3+0x26b1+-0x13b3*0x2&&_0x1b41ca<=-0x18f2+-0x18c3+-0x3*-0x1093&&(_0xff8a18<0x1*0x1f97+-0x1*0x2c5+-0x2*0xe63||_0xff8a18>0x10ff+-0x1b0+0x37*-0x47))return-0x1465*0x1+0xa39*-0x2+0x28d8;if(_0x1b41ca===-0x204b+-0x283*0x5+0x2cda||_0x1b41ca>=0x1*0xb14+-0xab1+0x1*-0x5e&&_0x1b41ca<=0xacd+0x13db+-0xd*0x25b||_0xff8a18>=0x1*-0x2663+0x13ee+0x25*0x80&&_0xff8a18<=0x422*0x1+-0x1cd3+0x18bf)return-0x226a+0x12ea+0xf82;}return 0x2*0x7db+0x2384+-0x7*0x751;}),_r(['pl'],_0x5a821a=>{if(Number['isInteger'](_0x5a821a)){if(_0x5a821a===0x105+-0x211+-0x10d*-0x1)return-0x1fc0+-0x13ea+0x33aa;const _0x5ed834=_0x5a821a%(0x3cb+-0x5*-0x9e+-0x6d7),_0x4abf10=_0x5a821a%(0x2*0xc0a+0x88d*0x1+-0x203d);if(_0x5ed834>=0x2d8*0x3+-0x76d+0x119*-0x1&&_0x5ed834<=0x935*0x2+-0x1044+-0x222&&(_0x4abf10<0x20a9+-0x2219+0x17c||_0x4abf10>0x12*-0x1c3+-0x19da*0x1+0x76*0x7d))return 0x1*-0x208d+-0x137*0x13+0x37a3;if(_0x5ed834>=0x316+-0x1f24+0x1c0e&&_0x5ed834<=-0x230c*0x1+0x2162+-0x1ab*-0x1||_0x5ed834>=-0x1*-0x2375+-0x379*0x7+-0xb21&&_0x5ed834<=0x64d*-0x6+-0x2196+-0x5*-0xe49||_0x4abf10>=-0x264*0x3+0x19*0x26+0x382&&_0x4abf10<=0x1*0x723+-0x13fd+0xce8)return-0x1fc2+-0x223*0x5+0x2a73;}return-0x1*-0x1bbc+-0x5*-0x1c5+-0x2492;}),_r(['ar'],_0x203a6a=>{if(_0x203a6a===-0x1567*0x1+-0x5b0+0x1b17)return-0x16d6+0x23e3*-0x1+0x1393*0x3;if(_0x203a6a===0x23*0xbf+0x15a*-0x2+-0x1768)return 0x15c0+-0x27*0x7f+-0x266;if(_0x203a6a===-0xfef+-0x1a*-0xe+0xe85)return-0x2*0x874+0x1*0x4c7+0xd*0xef;if(Number['isInteger'](_0x203a6a)){const _0x4468db=_0x203a6a%(-0x1e60+0x8*0x2d3+0x20b*0x4);if(_0x4468db>=-0x1771+0x1e74+-0xe0*0x8&&_0x4468db<=0x2c*-0x53+0x2*-0xe05+0x2a58)return 0x103b+0xeb1*0x2+-0x2d9a;if(_0x4468db>=0x739*0x2+-0x1e21+0xb*0x16e&&_0x4468db<=-0x14b3+-0x192b+0x2e41)return-0x2375+0xc0e+0x176b;}return 0xf06+-0x1d4c+-0xe4b*-0x1;});const Wb=Nm[bi(Qh)];function $d(_0x1deab4){return Nm[_0x1deab4]||Wb;}const Ln=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class $b{constructor(_0x13f260='',_0xa92432='',_0x5d0878=null,_0x4657e4=null,_0x49661d=null,_0x106149=null){this['url']=_0x13f260,this['filename']=_0xa92432,this['hash']=_0x5d0878,this['size']=_0x4657e4,this['opt']=_0x49661d,this['contents']=_0x106149;}['equals'](_0x2786fa){return this['url']===_0x2786fa['url']&&this['filename']===_0x2786fa['filename']&&this['hash']===_0x2786fa['hash']&&this['size']===_0x2786fa['size']&&this['opt']===_0x2786fa['opt']&&this['contents']===_0x2786fa['contents'];}}let Xb=-(-0x1415*-0x1+0x2255+-0x3669);const qb={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},z_=['pvr','dxt','etc2','etc1','basis'];class me extends pe{constructor(_0x5216da,_0x51694a,_0x240338,_0x4b88b0={},_0x5e2ed3={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x6c4+0xac6+-0x1189)),h(this,'_resources',[]),h(this,'id',Xb--),h(this,'loaded',!(0x1e64+-0x2*0xf9a+0xd1)),h(this,'loading',!(-0x1*0xe27+0x484*-0x1+0x12ac)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new uo(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x5216da||'',this['type']=_0x51694a,this['_data']=_0x4b88b0||{},this['options']=_0x5e2ed3||{},_0x240338&&(this['file']=_0x240338));}set['name'](_0x30fbaa){if(this['_name']===_0x30fbaa)return;const _0x52f1e0=this['_name'];this['_name']=_0x30fbaa,this['fire']('name',this,this['_name'],_0x52f1e0);}get['name'](){return this['_name'];}set['file'](_0x4870c3){var _0x472e42,_0x2cd65a;if(_0x4870c3&&_0x4870c3['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(-0x119d+0x7ad+-0x9f1*-0x1)){const _0x3379a9=((_0x2cd65a=(_0x472e42=this['registry'])==null?void(-0x1c*0xd0+0x38d*0x9+0x935*-0x1):_0x472e42['_loader'])==null?void(-0x118b+0x6*0x4f9+-0xc4b):_0x2cd65a['_app'])||Zr(),_0x9e9a17=_0x3379a9==null?void(-0x69a*-0x5+-0x59*0x1d+0x16ed*-0x1):_0x3379a9['graphicsDe'+'vice'];if(_0x9e9a17)for(let _0x36422f=-0x29e*0x4+-0x132d+-0x1*-0x1da5,_0x4a78b7=z_['length'];_0x36422f<_0x4a78b7;_0x36422f++){const _0x486f8b=z_[_0x36422f];if(_0x4870c3['variants'][_0x486f8b]&&_0x9e9a17[qb[_0x486f8b]]){_0x4870c3=_0x4870c3['variants'][_0x486f8b];break;}if(_0x3379a9['enableBund'+'les']){const _0x388d4b=_0x3379a9['bundles']['listBundle'+'sForAsset'](this);if(_0x388d4b&&_0x388d4b['find'](_0xf725cc=>{var _0xd17e8;return(_0xd17e8=_0xf725cc==null?void(-0x3*0x9+0x1*0x6fb+-0x8*0xdc):_0xf725cc['file'])==null?void(-0xbb*-0x1+0x3*0x8a8+-0x1ab3):_0xd17e8['variants'][_0x486f8b];}))break;}}}const _0x487098=this['_file'],_0x30dc56=_0x4870c3?new $b(_0x4870c3['url'],_0x4870c3['filename'],_0x4870c3['hash'],_0x4870c3['size'],_0x4870c3['opt'],_0x4870c3['contents']):null;(!!_0x30dc56!=!!_0x487098||_0x30dc56&&!_0x30dc56['equals'](_0x487098))&&(this['_file']=_0x30dc56,this['fire']('change',this,'file',_0x30dc56,_0x487098),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x2d8c6f){const _0xed3ba6=this['_data'];this['_data']=_0x2d8c6f,_0x2d8c6f!==_0xed3ba6&&(this['fire']('change',this,'data',_0x2d8c6f,_0xed3ba6),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x43ebf4){const _0x14168c=this['_resources'][-0x1dfc+-0x16e8+0x34e4];this['_resources'][-0x49a+-0x70*-0x43+-0x2*0xc5b]=_0x43ebf4,this['fire']('change',this,'resource',_0x43ebf4,_0x14168c);}get['resource'](){return this['_resources'][0x52a*0x1+-0xa*-0x179+0x13*-0x10c];}set['resources'](_0x262483){const _0x411474=this['_resources'];this['_resources']=_0x262483,this['fire']('change',this,'resources',_0x262483,_0x411474);}get['resources'](){return this['_resources'];}set['preload'](_0x3ab43a){_0x3ab43a=!!_0x3ab43a,this['_preload']!==_0x3ab43a&&(this['_preload']=_0x3ab43a,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x1e693e){_0x1e693e=!!_0x1e693e,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x1e693e!==this['_loadFaces'])&&(this['_loadFaces']=_0x1e693e,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x219b86=this['file'];if(!_0x219b86||!_0x219b86['url'])return null;let _0x55c3ee=_0x219b86['url'];if(this['registry']&&this['registry']['prefix']&&!Ln['test'](_0x55c3ee)&&(_0x55c3ee=this['registry']['prefix']+_0x55c3ee),this['type']!=='script'&&_0x219b86['hash']){const _0xea0b44=_0x55c3ee['indexOf']('?')!==-(-0xf92+0x3eb+0xba8)?'&':'?';_0x55c3ee+=_0xea0b44+'t='+_0x219b86['hash'];}return _0x55c3ee;}['getAbsolut'+'eUrl'](_0x5431ed){if(_0x5431ed['startsWith']('blob:')||_0x5431ed['startsWith']('data:'))return _0x5431ed;const _0x194e44=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x194e44,_0x5431ed);}['getLocaliz'+'edAssetId'](_0xb2de70){return _0xb2de70=Hy(_0xb2de70,this['_i18n']),this['_i18n'][_0xb2de70]||null;}['addLocaliz'+'edAssetId'](_0x92a5f7,_0xa3d8eb){this['_i18n'][_0x92a5f7]=_0xa3d8eb,this['fire']('add:locali'+'zed',_0x92a5f7,_0xa3d8eb);}['removeLoca'+'lizedAsset'+'Id'](_0x5097dd){const _0x9c365c=this['_i18n'][_0x5097dd];_0x9c365c&&(delete this['_i18n'][_0x5097dd],this['fire']('remove:loc'+'alized',_0x5097dd,_0x9c365c));}['ready'](_0x1356ae,_0x46ee97){_0x46ee97=_0x46ee97||this,this['loaded']?_0x1356ae['call'](_0x46ee97,this):this['once']('load',_0x3bd8e3=>{_0x1356ae['call'](_0x46ee97,_0x3bd8e3);});}['reload'](){this['loaded']&&(this['loaded']=!(0xe30+-0x37*-0x35+0x443*-0x6),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===-0x240+-0x25b1+0x27f1)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x3f00e6=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(-0xc1*-0x1+0x86d+-0x92d),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x32b334=0x2610+0x204e+-0x232f*0x2;_0x32b334<_0x3f00e6['length'];++_0x32b334){const _0x58471a=_0x3f00e6[_0x32b334];_0x58471a&&_0x58471a['destroy']&&_0x58471a['destroy']();}}static['fetchArray'+'Buffer'](_0x31a981,_0x92f8b0,_0x1ca368,_0x52e0ce=0x1f*-0x95+0x116+0x5a7*0x3){var _0x262bd1;(_0x262bd1=_0x1ca368==null?void(-0xc5*-0x1+0xb7c+-0xc41):_0x1ca368['file'])!=null&&_0x262bd1['contents']?setTimeout(()=>{_0x92f8b0(null,_0x1ca368['file']['contents']);}):nt['get'](_0x31a981,{'cache':!(-0x1a49*-0x1+0x1203+-0x2c4c),'responseType':'arraybuffe'+'r','retry':_0x52e0ce>-0x3c6*-0x5+-0xf9a*-0x2+-0xd*0x3da,'maxRetries':_0x52e0ce},_0x92f8b0);}}h(me,'EVENT_LOAD','load'),h(me,'EVENT_UNLO'+'AD','unload'),h(me,'EVENT_REMO'+'VE','remove'),h(me,'EVENT_ERRO'+'R','error'),h(me,'EVENT_CHAN'+'GE','change'),h(me,'EVENT_PROG'+'RESS','progress'),h(me,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(me,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class jb{constructor(_0xbcf13e=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0xbcf13e;}['addItem'](_0x433c1f){const _0x417219=_0x433c1f['tags']['_list'];for(const _0xa59eaf of _0x417219)this['add'](_0xa59eaf,_0x433c1f);}['removeItem'](_0x568544){const _0x538dbf=_0x568544['tags']['_list'];for(const _0x244e6b of _0x538dbf)this['remove'](_0x244e6b,_0x568544);}['add'](_0x1c99e8,_0x429fac){this['_index'][_0x1c99e8]&&this['_index'][_0x1c99e8]['list']['indexOf'](_0x429fac)!==-(-0x11cf+-0xf8*-0x1d+-0xa48)||(this['_index'][_0x1c99e8]||(this['_index'][_0x1c99e8]={'list':[]},this['_key']&&(this['_index'][_0x1c99e8]['keys']={})),this['_index'][_0x1c99e8]['list']['push'](_0x429fac),this['_key']&&(this['_index'][_0x1c99e8]['keys'][_0x429fac[this['_key']]]=_0x429fac));}['remove'](_0x41d353,_0x3eb958){if(!this['_index'][_0x41d353]||this['_key']&&!this['_index'][_0x41d353]['keys'][_0x3eb958[this['_key']]])return;const _0x33cfc4=this['_index'][_0x41d353]['list']['indexOf'](_0x3eb958);_0x33cfc4!==-(-0xe*0x1e5+0xf96+-0x1*-0xaf1)&&(this['_index'][_0x41d353]['list']['splice'](_0x33cfc4,0x42d+-0x16ae+0x1282),this['_key']&&delete this['_index'][_0x41d353]['keys'][_0x3eb958[this['_key']]],this['_index'][_0x41d353]['list']['length']===-0x5dd*0x3+0x1*0x215b+-0xfc4&&delete this['_index'][_0x41d353]);}['find'](_0x491a6f){const _0x35a569={},_0x49d5c5=[];let _0x35fc93,_0x583f33,_0x4de7ae,_0x22d0a1,_0x574bd7;const _0x41d139=(_0x13eaf1,_0x3fc3f7)=>this['_index'][_0x13eaf1]['list']['length']-this['_index'][_0x3fc3f7]['list']['length'];for(let _0x111fbc=-0x1ae*0xc+-0x4*-0x29e+0x9b0;_0x111fbc<_0x491a6f['length'];_0x111fbc++){if(_0x583f33=_0x491a6f[_0x111fbc],_0x583f33 instanceof Array){if(_0x583f33['length']===0x1*0x1555+-0x1c8a*0x1+0x735)continue;if(_0x583f33['length']===-0x1dc7+-0xc46+0x1507*0x2)_0x583f33=_0x583f33[0x24d4+-0x1*0x199+-0x233b];else{_0x574bd7=!(-0x1*-0xc02+0xf4f*-0x1+0x34e);for(let _0x4dea9c=0x6a*0x44+-0x76*-0x30+-0x649*0x8;_0x4dea9c<_0x583f33['length'];_0x4dea9c++)if(!this['_index'][_0x583f33[_0x4dea9c]]){_0x574bd7=!(-0x1*0x25c5+-0x14fc+0x3ac1);break;}if(_0x574bd7)continue;_0x4de7ae=_0x583f33['slice'](-0xb6f*-0x3+0x2*0xb02+-0x3851)['sort'](_0x41d139),_0x22d0a1=_0x4de7ae['slice'](0x124a+-0x1*0x1349+0x100),_0x22d0a1['length']===0x156e*-0x1+-0x14d8+-0x4f*-0x89&&(_0x22d0a1=_0x22d0a1[0x2177+-0x1*-0x2227+-0x439e]);for(let _0x4542cf=0xec4+0x232e+-0x31f2;_0x4542cf<this['_index'][_0x4de7ae[-0x8dd*0x1+0x1b99+0x16*-0xda]]['list']['length'];_0x4542cf++)_0x35fc93=this['_index'][_0x4de7ae[0x23a9+-0x2*0x11f9+0x49]]['list'][_0x4542cf],(this['_key']?!_0x35a569[_0x35fc93[this['_key']]]:_0x49d5c5['indexOf'](_0x35fc93)===-(-0x551*0x5+0x2649+-0xbb3*0x1))&&_0x35fc93['tags']['has'](_0x22d0a1)&&(this['_key']&&(_0x35a569[_0x35fc93[this['_key']]]=!(-0xfe*-0x4+-0x1*-0x1e6b+0x2263*-0x1)),_0x49d5c5['push'](_0x35fc93));continue;}}if(_0x583f33&&typeof _0x583f33=='string'&&this['_index'][_0x583f33]){for(let _0x4dc457=-0x216+-0xcf7+0xf0d;_0x4dc457<this['_index'][_0x583f33]['list']['length'];_0x4dc457++)_0x35fc93=this['_index'][_0x583f33]['list'][_0x4dc457],this['_key']?_0x35a569[_0x35fc93[this['_key']]]||(_0x35a569[_0x35fc93[this['_key']]]=!(0x764+-0x4*0x71+-0x5a0),_0x49d5c5['push'](_0x35fc93)):_0x49d5c5['indexOf'](_0x35fc93)===-(0x101*-0x15+-0x1*-0x237b+0x43*-0x37)&&_0x49d5c5['push'](_0x35fc93);}}return _0x49d5c5;}}class ao extends pe{constructor(_0x38f7df){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new jb('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x38f7df;}['list'](_0x15a7f={}){const _0x534ebf=Array['from'](this['_assets']);return _0x15a7f['preload']!==void(0x91c*0x1+-0x67a*-0x1+-0xf96)?_0x534ebf['filter'](_0x13452c=>_0x13452c['preload']===_0x15a7f['preload']):_0x534ebf;}['add'](_0x1d0e95){var _0x7f63f6,_0x19dd5e;this['_assets']['has'](_0x1d0e95)||(this['_assets']['add'](_0x1d0e95),this['_idToAsset']['set'](_0x1d0e95['id'],_0x1d0e95),(_0x7f63f6=_0x1d0e95['file'])!=null&&_0x7f63f6['url']&&this['_urlToAsse'+'t']['set'](_0x1d0e95['file']['url'],_0x1d0e95),this['_nameToAss'+'et']['has'](_0x1d0e95['name'])||this['_nameToAss'+'et']['set'](_0x1d0e95['name'],new Set()),this['_nameToAss'+'et']['get'](_0x1d0e95['name'])['add'](_0x1d0e95),_0x1d0e95['on']('name',this['_onNameCha'+'nge'],this),_0x1d0e95['registry']=this,this['_tags']['addItem'](_0x1d0e95),_0x1d0e95['tags']['on']('add',this['_onTagAdd'],this),_0x1d0e95['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x1d0e95),this['fire']('add:'+_0x1d0e95['id'],_0x1d0e95),(_0x19dd5e=_0x1d0e95['file'])!=null&&_0x19dd5e['url']&&this['fire']('add:url:'+_0x1d0e95['file']['url'],_0x1d0e95),_0x1d0e95['preload']&&this['load'](_0x1d0e95));}['remove'](_0x241cc4){var _0x512881,_0x6f07b7;if(!this['_assets']['has'](_0x241cc4))return!(-0x156b+-0x1e20+-0x338c*-0x1);if(this['_assets']['delete'](_0x241cc4),this['_idToAsset']['delete'](_0x241cc4['id']),(_0x512881=_0x241cc4['file'])!=null&&_0x512881['url']&&this['_urlToAsse'+'t']['delete'](_0x241cc4['file']['url']),_0x241cc4['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x241cc4['name'])){const _0x136fbe=this['_nameToAss'+'et']['get'](_0x241cc4['name']);_0x136fbe['delete'](_0x241cc4),_0x136fbe['size']===0x1bbd+-0x1645*0x1+-0x578&&this['_nameToAss'+'et']['delete'](_0x241cc4['name']);}return this['_tags']['removeItem'](_0x241cc4),_0x241cc4['tags']['off']('add',this['_onTagAdd'],this),_0x241cc4['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x241cc4['fire']('remove',_0x241cc4),this['fire']('remove',_0x241cc4),this['fire']('remove:'+_0x241cc4['id'],_0x241cc4),(_0x6f07b7=_0x241cc4['file'])!=null&&_0x6f07b7['url']&&this['fire']('remove:url'+':'+_0x241cc4['file']['url'],_0x241cc4),!(-0x1a2*-0xd+-0x19a+0x8*-0x274);}['get'](_0x5d38cd){return this['_idToAsset']['get'](Number(_0x5d38cd));}['getByUrl'](_0x21939a){return this['_urlToAsse'+'t']['get'](_0x21939a);}['load'](_0x1610ad,_0x2b765b){if((_0x1610ad['loading']||_0x1610ad['loaded'])&&!(_0x2b765b!=null&&_0x2b765b['force']))return;const _0x2e96ad=_0x1610ad['file'],_0x4d9c4d=()=>{this['fire']('load',_0x1610ad),this['fire']('load:'+_0x1610ad['id'],_0x1610ad),_0x2e96ad&&_0x2e96ad['url']&&this['fire']('load:url:'+_0x2e96ad['url'],_0x1610ad),_0x1610ad['fire']('load',_0x1610ad);},_0x1284bc=_0x439fdc=>{if(_0x439fdc instanceof Array?_0x1610ad['resources']=_0x439fdc:_0x1610ad['resource']=_0x439fdc,this['_loader']['patch'](_0x1610ad,this),_0x1610ad['type']==='bundle'){const _0x117840=_0x1610ad['data']['assets'];for(let _0x2f729d=0xf*-0x1eb+-0x1*-0x138b+0x93a;_0x2f729d<_0x117840['length'];_0x2f729d++){const _0x4cdc3=this['_idToAsset']['get'](_0x117840[_0x2f729d]);_0x4cdc3&&!_0x4cdc3['loaded']&&this['load'](_0x4cdc3,{'force':!(-0x1f00*0x1+0x5*-0x69d+-0x5d3*-0xb)});}_0x1610ad['resource']['loaded']?_0x4d9c4d():(this['fire']('load:start',_0x1610ad),this['fire']('load:start'+':'+_0x1610ad['id'],_0x1610ad),_0x2e96ad&&_0x2e96ad['url']&&this['fire']('load:start'+':url:'+_0x2e96ad['url'],_0x1610ad),_0x1610ad['fire']('load:start',_0x1610ad),_0x1610ad['resource']['on']('load',_0x4d9c4d));}else _0x4d9c4d();},_0x1881c1=(_0x2a75aa,_0x2b98d4,_0x25cb6f)=>{if(_0x1610ad['loaded']=!(-0xaa9+0x7*0x3c4+-0xfb3),_0x1610ad['loading']=!(0x1da+-0xa05+-0x1*-0x82c),_0x2a75aa)this['fire']('error',_0x2a75aa,_0x1610ad),this['fire']('error:'+_0x1610ad['id'],_0x2a75aa,_0x1610ad),_0x1610ad['fire']('error',_0x2a75aa,_0x1610ad);else{if(_0x1610ad['type']==='script'){const _0x8a11e3=this['_loader']['getHandler']('script');_0x8a11e3['_cache'][_0x1610ad['id']]&&_0x8a11e3['_cache'][_0x1610ad['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x8a11e3['_cache'][_0x1610ad['id']]),_0x8a11e3['_cache'][_0x1610ad['id']]=_0x25cb6f;}_0x1284bc(_0x2b98d4);}};if(_0x2e96ad||_0x1610ad['type']==='cubemap'){this['fire']('load:start',_0x1610ad),this['fire']('load:'+_0x1610ad['id']+':start',_0x1610ad),_0x1610ad['loading']=!(0x1d76+0x179b+-0x3511);const _0x369b1d=_0x1610ad['getFileUrl']();if(_0x1610ad['type']==='bundle'){const _0x4751d9=_0x1610ad['data']['assets'];for(let _0xb2a06c=0x121+-0x88d+-0x32*-0x26;_0xb2a06c<_0x4751d9['length'];_0xb2a06c++){const _0x627249=this['_idToAsset']['get'](_0x4751d9[_0xb2a06c]);_0x627249&&(_0x627249['loaded']||_0x627249['resource']||_0x627249['loading']||(_0x627249['loading']=!(0x1cf8+0x12d*-0x1f+0x77b)));}}this['_loader']['load'](_0x369b1d,_0x1610ad['type'],_0x1881c1,_0x1610ad,_0x2b765b);}else{const _0x403130=this['_loader']['open'](_0x1610ad['type'],_0x1610ad['data']);_0x1610ad['loaded']=!(0x1bfd+0xbf7+-0x1*0x27f4),_0x1284bc(_0x403130);}}['reloadInde'+'x'](_0x4dd86e,_0x186271,_0x336118){const _0x487ab4=(_0x3c4383,_0x3d11b6,_0x3e5ea2)=>{_0x186271['loaded']=!(-0x2477+-0x73f+0x2bb6),_0x186271['loading']=!(0x1a66+0x491*0x8+-0x59*0xb5);};return this['_loader']['load'](_0x4dd86e,_0x186271['type'],_0x487ab4,_0x186271,_0x336118),_0x186271;}['loadFromUr'+'l'](_0x2ab920,_0x34e13e,_0x465818){this['loadFromUr'+'lAndFilena'+'me'](_0x2ab920,null,_0x34e13e,_0x465818);}['loadFromUr'+'lAndFilena'+'me'](_0x24a24a,_0x30069b,_0x315190,_0x420186){const _0x1ed4c9=xe['getBasenam'+'e'](_0x30069b||_0x24a24a),_0x206c0c={'filename':_0x30069b||_0x1ed4c9,'url':_0x24a24a};let _0x3d2dec=this['getByUrl'](_0x24a24a);if(!_0x3d2dec)_0x3d2dec=new me(_0x1ed4c9,_0x315190,_0x206c0c),this['add'](_0x3d2dec);else{if(_0x3d2dec['loaded']){_0x420186(_0x3d2dec['loadFromUr'+'lError']||null,_0x3d2dec);return;}}const _0x5bb072=_0x45535e=>{_0x45535e['once']('load',_0xd56930=>{_0x315190==='material'?this['_loadTextu'+'res'](_0xd56930,(_0x351155,_0xf8873b)=>{_0x420186(_0x351155,_0xd56930);}):_0x420186(null,_0xd56930);}),_0x45535e['once']('error',_0x4630ce=>{_0x4630ce&&(this['loadFromUr'+'lError']=_0x4630ce),_0x420186(_0x4630ce,_0x45535e);}),this['load'](_0x45535e);};_0x3d2dec['resource']?_0x420186(null,_0x3d2dec):_0x315190==='model'?this['_loadModel'](_0x3d2dec,_0x5bb072):_0x5bb072(_0x3d2dec);}['_loadModel'](_0x1c12dc,_0x3cca88){const _0x59e532=_0x1c12dc['getFileUrl'](),_0x35b811=xe['getExtensi'+'on'](_0x59e532);if(_0x35b811==='.json'||_0x35b811==='.glb'){const _0x40304a=xe['getDirecto'+'ry'](_0x59e532),_0x301020=xe['getBasenam'+'e'](_0x59e532),_0x1f975f=xe['join'](_0x40304a,_0x301020['replace'](_0x35b811,'.mapping.j'+'son'));this['_loader']['load'](_0x1f975f,'json',(_0x3bddd0,_0x456fe0)=>{_0x3bddd0?(_0x1c12dc['data']={'mapping':[]},_0x3cca88(_0x1c12dc)):this['_loadMater'+'ials'](_0x1c12dc,_0x456fe0,(_0x3a7bb1,_0x519c83)=>{_0x1c12dc['data']=_0x456fe0,_0x3cca88(_0x1c12dc);});});}else _0x3cca88(_0x1c12dc);}['_loadMater'+'ials'](_0x1d9541,_0x2aa828,_0x19d959){const _0x531f32=[];let _0x39e429=0x13d*-0x3+-0xd8*-0x4+0x57;const _0x47ceef=(_0x110258,_0x59c769)=>{this['_loadTextu'+'res'](_0x59c769,(_0x4f16e0,_0x28daa1)=>{_0x531f32['push'](_0x59c769),_0x531f32['length']===_0x39e429&&_0x19d959(null,_0x531f32);});};for(let _0x292e85=-0x266*0x2+-0x6e+0x1be*0x3;_0x292e85<_0x2aa828['mapping']['length'];_0x292e85++){const _0x1a9fea=_0x2aa828['mapping'][_0x292e85]['path'];if(_0x1a9fea){_0x39e429++;const _0x57ba90=_0x1d9541['getAbsolut'+'eUrl'](_0x1a9fea);this['loadFromUr'+'l'](_0x57ba90,'material',_0x47ceef);}}_0x39e429===0x11ba+-0x944*-0x3+-0x2d86&&_0x19d959(null,_0x531f32);}['_loadTextu'+'res'](_0x43e305,_0x3d7427){const _0x2405f3=[];let _0x581e7c=0xe0e+0x1e73*-0x1+0x1065*0x1;const _0x5d59e7=_0x43e305['data'];if(_0x5d59e7['mappingFor'+'mat']!=='path'){M['warn']('Skipping:\x20'+_0x43e305['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x3d7427(null,_0x2405f3);return;}const _0x48b161=(_0x3fbe38,_0x343b2c)=>{_0x3fbe38&&console['error'](_0x3fbe38),_0x2405f3['push'](_0x343b2c),_0x2405f3['length']===_0x581e7c&&_0x3d7427(null,_0x2405f3);},_0x5ed843=Qc;for(let _0x253804=0x2f*0xc5+-0x1ac0+0x1*-0x96b;_0x253804<_0x5ed843['length'];_0x253804++){const _0x1b2141=_0x5d59e7[_0x5ed843[_0x253804]];if(_0x1b2141&&typeof _0x1b2141=='string'){_0x581e7c++;const _0x25fbf2=_0x43e305['getAbsolut'+'eUrl'](_0x1b2141);this['loadFromUr'+'l'](_0x25fbf2,'texture',_0x48b161);}}_0x581e7c===-0x41*0x41+0x1*-0x260a+-0x368b*-0x1&&_0x3d7427(null,_0x2405f3);}['_onTagAdd'](_0x1ddba1,_0x396ed6){this['_tags']['add'](_0x1ddba1,_0x396ed6);}['_onTagRemo'+'ve'](_0x4ed3b4,_0x537c75){this['_tags']['remove'](_0x4ed3b4,_0x537c75);}['_onNameCha'+'nge'](_0x2d97d5,_0x566d4b,_0x299fc7){if(this['_nameToAss'+'et']['has'](_0x299fc7)){const _0x100472=this['_nameToAss'+'et']['get'](_0x299fc7);_0x100472['delete'](_0x2d97d5),_0x100472['size']===0xf45+0xcd*-0x8+-0x8dd&&this['_nameToAss'+'et']['delete'](_0x299fc7);}this['_nameToAss'+'et']['has'](_0x2d97d5['name'])||this['_nameToAss'+'et']['set'](_0x2d97d5['name'],new Set()),this['_nameToAss'+'et']['get'](_0x2d97d5['name'])['add'](_0x2d97d5);}['findByTag'](..._0x39be65){return this['_tags']['find'](_0x39be65);}['filter'](_0x360f91){return Array['from'](this['_assets'])['filter'](_0x4485c4=>_0x360f91(_0x4485c4));}['find'](_0x28e2b0,_0x7f38cb){const _0x18bbee=this['_nameToAss'+'et']['get'](_0x28e2b0);if(!_0x18bbee)return null;for(const _0x3a0849 of _0x18bbee)if(!_0x7f38cb||_0x3a0849['type']===_0x7f38cb)return _0x3a0849;return null;}['findAll'](_0x2bc4a8,_0x1b266c){const _0x51070d=this['_nameToAss'+'et']['get'](_0x2bc4a8);if(!_0x51070d)return[];const _0x295b20=Array['from'](_0x51070d);return _0x1b266c?_0x295b20['filter'](_0x1f0422=>_0x1f0422['type']===_0x1b266c):_0x295b20;}}h(ao,'EVENT_LOAD','load'),h(ao,'EVENT_ADD','add'),h(ao,'EVENT_REMO'+'VE','remove'),h(ao,'EVENT_ERRO'+'R','error');class Yb{constructor(_0x4f5805){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x4f5805,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x297e67){if(_0x297e67['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x297e67['id'],_0x297e67),this['_assets']['on']('load:start'+':'+_0x297e67['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x297e67['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x297e67['id'],this['_onBundleE'+'rror'],this);const _0x3ed69b=_0x297e67['data']['assets'];for(let _0x4e73f3=0x23*-0x3b+-0x1efc+0x301*0xd;_0x4e73f3<_0x3ed69b['length'];_0x4e73f3++)this['_indexAsse'+'tInBundle'](_0x3ed69b[_0x4e73f3],_0x297e67);}else this['_assetToBu'+'ndles']['has'](_0x297e67['id'])&&this['_indexAsse'+'tFileUrls'](_0x297e67);}['_unbindAss'+'etEvents'](_0x443667){this['_assets']['off']('load:start'+':'+_0x443667,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x443667,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x443667,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x33b42e,_0x2d626f){let _0x59d84e=this['_assetToBu'+'ndles']['get'](_0x33b42e);_0x59d84e||(_0x59d84e=new Set(),this['_assetToBu'+'ndles']['set'](_0x33b42e,_0x59d84e)),_0x59d84e['add'](_0x2d626f);const _0x395b55=this['_assets']['get'](_0x33b42e);_0x395b55&&this['_indexAsse'+'tFileUrls'](_0x395b55);}['_indexAsse'+'tFileUrls'](_0x3c19b8){const _0x4543de=this['_getAssetF'+'ileUrls'](_0x3c19b8);if(_0x4543de)for(let _0x340579=-0x1*0xdbb+-0x685+0x20*0xa2;_0x340579<_0x4543de['length'];_0x340579++){const _0x1d1fc6=this['_assetToBu'+'ndles']['get'](_0x3c19b8['id']);_0x1d1fc6&&this['_urlsToBun'+'dles']['set'](_0x4543de[_0x340579],_0x1d1fc6);}}['_getAssetF'+'ileUrls'](_0x22a41e){let _0x506d19=_0x22a41e['getFileUrl']();if(!_0x506d19)return null;_0x506d19=_0x506d19['split']('?')[0x1*0xf73+0x9fd*0x1+-0x1970];const _0x535a09=[_0x506d19];if(_0x22a41e['type']==='font'){const _0x5ba319=_0x22a41e['data']['info']['maps']['length'];for(let _0x5c7b04=0xff0+-0x2*-0x116d+0x1*-0x32c9;_0x5c7b04<_0x5ba319;_0x5c7b04++)_0x535a09['push'](_0x506d19['replace']('.png',_0x5c7b04+'.png'));}return _0x535a09;}['_onAssetRe'+'move'](_0x5891f8){if(_0x5891f8['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x5891f8['id']),this['_unbindAss'+'etEvents'](_0x5891f8['id']);const _0xdcd053=_0x5891f8['data']['assets'];for(let _0x2b9572=-0x1c45+-0x2093+0x3cd8;_0x2b9572<_0xdcd053['length'];_0x2b9572++){const _0x56d124=this['_assetToBu'+'ndles']['get'](_0xdcd053[_0x2b9572]);if(_0x56d124&&(_0x56d124['delete'](_0x5891f8),_0x56d124['size']===0x2f*0xa1+0x1cc+-0x15d*0x17)){this['_assetToBu'+'ndles']['delete'](_0xdcd053[_0x2b9572]);for(const [_0x3bf422,_0x268220]of this['_urlsToBun'+'dles'])_0x268220===_0x56d124&&this['_urlsToBun'+'dles']['delete'](_0x3bf422);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x5891f8['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x5891f8['id']))return;this['_assetToBu'+'ndles']['delete'](_0x5891f8['id']);const _0x242336=this['_getAssetF'+'ileUrls'](_0x5891f8);if(!_0x242336)return;for(let _0x4a14ec=0x63*0x3d+0x1*-0x18ad+0x116;_0x4a14ec<_0x242336['length'];_0x4a14ec++)this['_urlsToBun'+'dles']['delete'](_0x242336[_0x4a14ec]);}}['_onBundleL'+'oadStart'](_0x55a2db){_0x55a2db['resource']['on']('add',(_0xd8cbf4,_0x3d554b)=>{const _0x47a10d=this['_fileReque'+'sts']['get'](_0xd8cbf4);if(_0x47a10d){for(let _0x29c561=0x9e+-0x2*0x145+-0x1ec*-0x1;_0x29c561<_0x47a10d['length'];_0x29c561++)_0x47a10d[_0x29c561](null,_0x3d554b);this['_fileReque'+'sts']['delete'](_0xd8cbf4);}});}['_onBundleL'+'oad'](_0xfcf60a){if(!_0xfcf60a['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0xfcf60a['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x6dfa42,_0x2fdc7d]of this['_fileReque'+'sts']){const _0x249387=this['_urlsToBun'+'dles']['get'](_0x6dfa42);if(!_0x249387||!_0x249387['has'](_0xfcf60a))continue;const _0xa4eaad=decodeURIComponent(_0x6dfa42);let _0x20b894,_0x56ca97;if(_0xfcf60a['resource']['has'](_0xa4eaad))_0x56ca97=_0xfcf60a['resource']['get'](_0xa4eaad);else{if(_0xfcf60a['resource']['loaded'])_0x20b894='Bundle\x20'+_0xfcf60a['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x6dfa42;else continue;}for(let _0x4d8173=0x1a10+0x2d*-0x22+-0x2*0xa0b;_0x4d8173<_0x2fdc7d['length'];_0x4d8173++)_0x2fdc7d[_0x4d8173](_0x20b894,_0x20b894||_0x56ca97);this['_fileReque'+'sts']['delete'](_0x6dfa42);}}['_onBundleE'+'rror'](_0x2cde10){for(const [_0x55f980,_0x355ca2]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x55f980)){for(let _0x551815=-0x2*-0x163+-0x171c+-0x1456*-0x1;_0x551815<_0x355ca2['length'];_0x551815++)_0x355ca2[_0x551815](_0x2cde10);this['_fileReque'+'sts']['delete'](_0x55f980);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x54e379){const _0x35e886=this['_urlsToBun'+'dles']['get'](_0x54e379);if(!_0x35e886)return null;let _0x5c1050=null;for(const _0x10daff of _0x35e886){if(_0x10daff['loaded']&&_0x10daff['resource'])return _0x10daff;_0x10daff['loading']&&(_0x5c1050=_0x10daff);}return _0x5c1050;}['listBundle'+'sForAsset'](_0x354192){const _0x10d1f7=this['_assetToBu'+'ndles']['get'](_0x354192['id']);return _0x10d1f7?Array['from'](_0x10d1f7):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x5b1fe3){return this['_urlsToBun'+'dles']['has'](_0x5b1fe3);}['urlIsLoade'+'dOrLoading'](_0x455364){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x455364);}['loadUrl'](_0x39609b,_0x4af616){const _0x39b4fc=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x39609b);if(!_0x39b4fc){_0x4af616('URL\x20'+_0x39609b+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x39b4fc['loaded']){const _0x5ee2c3=decodeURIComponent(_0x39609b);if(_0x39b4fc['resource']['has'](_0x5ee2c3)){_0x4af616(null,_0x39b4fc['resource']['get'](_0x5ee2c3));return;}else{if(_0x39b4fc['resource']['loaded']){_0x4af616('Bundle\x20'+_0x39b4fc['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x39609b);return;}}}let _0x302e85=this['_fileReque'+'sts']['get'](_0x39609b);_0x302e85||(_0x302e85=[],this['_fileReque'+'sts']['set'](_0x39609b,_0x302e85)),_0x302e85['push'](_0x4af616);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x2ec374 of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x2ec374);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class Kb extends pe{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x1841a8){const _0x34718e=_0x1841a8['id'];if(this[_0x34718e])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x34718e+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x34718e]=_0x1841a8,this['list']['push'](_0x1841a8);}['remove'](_0x1b4289){const _0x1e5a93=_0x1b4289['id'];if(!this[_0x1e5a93])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x1e5a93+('\x27\x20register'+'ed'));delete this[_0x1e5a93];const _0x2292dc=this['list']['indexOf'](this[_0x1e5a93]);_0x2292dc!==-(0x3*-0x182+0x1170+0x295*-0x5)&&this['list']['splice'](_0x2292dc,0x172+0x1b62+-0x1cd3);}['destroy'](){this['off']();for(let _0x44c341=-0x566*0x1+-0x19b0+0x1f16;_0x44c341<this['list']['length'];_0x44c341++)this['list'][_0x44c341]['destroy']();}}class kf extends pe{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x23c3*0x1+0x1*0x24f7+0x1*-0x133));}['addFile'](_0x522ce1,_0x1acbd9){this['_index']['has'](_0x522ce1)||(this['_index']['set'](_0x522ce1,_0x1acbd9),this['fire']('add',_0x522ce1,_0x1acbd9));}['has'](_0x3ba5a9){return this['_index']['has'](_0x3ba5a9);}['get'](_0x3290b7){return this['_index']['get'](_0x3290b7)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x4d6ae8){!_0x4d6ae8||this['_loaded']||(this['_loaded']=!(-0x14*-0x1bc+-0x2276+-0x3a),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h(kf,'EVENT_ADD','add'),h(kf,'EVENT_LOAD','load');class Zb extends pe{constructor(_0x26b26e,_0x3790f3=''){super(),h(this,'headerSize',-0x12d9+0xa4a+0xa8f),h(this,'paddingSiz'+'e',0xf70+0x10*-0x23d+0x1660),h(this,'bytesRead',0x7*0xbf+-0x9e5+0x4ac),h(this,'bytesRecei'+'ved',-0x9eb+-0x1ce8+0x26d3),h(this,'headerRead',!(0x21*0x6c+-0x6*-0x45d+-0x2819)),h(this,'reader',null),h(this,'data',new Uint8Array(-0x16fb+0x858+0xea3)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0x5*0x6ad+0x46b+0x1cf6),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x3790f3||'',this['reader']=_0x26b26e['body']['getReader'](),this['reader']['read']()['then'](_0x2bc541=>{this['pump'](_0x2bc541['done'],_0x2bc541['value']);})['catch'](_0x2442c5=>{this['fire']('error',_0x2442c5);}));}['pump'](_0x2677a0,_0x244687){if(_0x2677a0)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x244687['byteLength'];const _0x1acefc=new Uint8Array(this['data']['length']+_0x244687['length']);for(_0x1acefc['set'](this['data']),_0x1acefc['set'](_0x244687,this['data']['length']),this['data']=_0x1acefc;this['readFile'](););return this['reader']['read']()['then'](_0x34fe4f=>{this['pump'](_0x34fe4f['done'],_0x34fe4f['value']);})['catch'](_0x305aa7=>{this['fire']('error',_0x305aa7);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x1*-0xbbf+0x14ec+0x3*-0x30f);const _0x592c46=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x54ecc4=this['decoder']['decode'](_0x592c46);if(this['fileName']=_0x54ecc4['substring'](-0x53*-0x67+0xc0f+-0x2d74,-0x1*-0x183+-0x127d*0x1+0x1a*0xab)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x54ecc4['substring'](0x1716+-0x1*0x1b77+-0x4dd*-0x1,0x6d0+0x1a58+-0x74*0x48),0x1*-0xf11+-0x1ae2+0x3d1*0xb),this['fileType']=_0x54ecc4['substring'](0xb9b+-0x1d9e+0x129f,0x1f5a+0x23d8+0x5*-0xd51),this['ustarForma'+'t']=_0x54ecc4['substring'](0x12d2+0x11b7+-0x6*0x5ec,0x81b*0x3+-0x26cf*0x1+0x1*0xf85),this['ustarForma'+'t']['indexOf']('ustar')!==-(0xb38+0x952+-0x1489)){const _0x4a6a61=_0x54ecc4['substring'](-0x54*0x48+-0x1549*-0x1+-0xec*-0x4,-0x5d*0x6b+0x154d+0x1386)['replace'](/\0/g,'');_0x4a6a61['length']>-0x1923+-0x575+0x3d3*0x8&&(this['fileName']=_0x4a6a61['trim']()+this['fileName']['trim']());}this['bytesRead']+=-0x17a4+0x24db+-0xb37;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x1d91+0x4b3*0x6+0x2*-0x1ce1);if(this['fileType']===''||this['fileType']==='0'){const _0x3b80e8=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x319f96={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x3b80e8};this['fire']('file',_0x319f96);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(0x462+0x8f6+-0xd57);const _0x11bbbe=this['bytesRead']%this['paddingSiz'+'e'];return _0x11bbbe!==-0x1*0xe09+0x21+0xde8&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x11bbbe),!(-0x20*-0x11d+0x2563+-0x4903*0x1);}return!(-0x1*0x973+-0x8*-0x30+-0x1fd*-0x4);}}class Ze{constructor(_0x341b11,_0x8807f2){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x1605*0x1+0x1929+0x7dd*-0x6),(this['_app']=_0x341b11,this['handlerTyp'+'e']=_0x8807f2);}set['maxRetries'](_0x18e028){this['_maxRetrie'+'s']=_0x18e028;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x52ec43,_0x34aedb,_0x469b4d){}['open'](_0x2d96ec,_0x1ee330,_0xbd05d5){return _0x1ee330;}['patch'](_0x844e1a,_0x72fefe){}}class Qb extends Ze{constructor(_0x4677e3){super(_0x4677e3,'bundle'),this['_assets']=_0x4677e3['assets'];}['_fetchRetr'+'ies'](_0x219c92,_0x389231,_0xdc853d=-0xf2*-0x23+-0x1de6+-0x330){return new Promise((_0x41f6d7,_0x451915)=>{const _0x4f34ad=()=>{fetch(_0x219c92,_0x389231)['then'](_0x41f6d7)['catch'](_0x4dc838=>{_0xdc853d++,_0xdc853d<this['maxRetries']?(M['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0xdc853d),_0x4f34ad()):_0x451915(_0x4dc838);});};_0x4f34ad();});}['load'](_0x471ee8,_0x5da42f){typeof _0x471ee8=='string'&&(_0x471ee8={'load':_0x471ee8,'original':_0x471ee8}),this['_fetchRetr'+'ies'](_0x471ee8['load'],{'mode':'cors'},this['maxRetries'])['then'](_0xfb7ee0=>{const _0x3ea2b0=new kf();_0x5da42f(null,_0x3ea2b0);const _0xa9e782=new Zb(_0xfb7ee0,this['_assets']['prefix']);_0xa9e782['on']('file',_0x2d18af=>{_0x3ea2b0['addFile'](_0x2d18af['name'],_0x2d18af['data']);}),_0xa9e782['on']('done',()=>{_0x3ea2b0['loaded']=!(-0xc58*-0x1+-0x1f*-0x5e+0x17ba*-0x1);}),_0xa9e782['on']('error',_0x34f79d=>{M['error'](_0x34f79d),_0x5da42f(_0x34f79d);});})['catch'](_0x32f9dd=>{M['error'](_0x32f9dd),_0x5da42f(_0x32f9dd);});}['open'](_0x3150bf,_0x46ab6e){return _0x46ab6e;}}class fn{constructor(_0x4383ac){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x4383ac;}['addHandler'](_0x258904,_0x5db285){this['_handlers'][_0x258904]=_0x5db285,_0x5db285['_loader']=this;}['removeHand'+'ler'](_0x1652a4){delete this['_handlers'][_0x1652a4];}['getHandler'](_0x54bbd1){return this['_handlers'][_0x54bbd1];}static['makeKey'](_0x2d2305,_0x33ff5){return _0x2d2305+'-'+_0x33ff5;}['load'](_0x3b94c0,_0x38adca,_0x2990d3,_0x86f2ca,_0x23b73e){var _0xac83f9;const _0x59e239=this['_handlers'][_0x38adca];if(!_0x59e239){const _0x39e673='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x38adca+('\x27\x20when\x20loa'+'ding\x20[')+_0x3b94c0+']';M['errorOnce'](_0x39e673),_0x2990d3(_0x39e673);return;}if(!_0x3b94c0){this['_loadNull'](_0x59e239,_0x2990d3,_0x86f2ca);return;}const _0x22cf83=fn['makeKey'](_0x3b94c0,_0x38adca);if(this['_requests'][_0x22cf83])this['_requests'][_0x22cf83]['push'](_0x2990d3);else{this['_requests'][_0x22cf83]=[_0x2990d3];const _0x556db5=this,_0x467149=function(_0x127ca3,_0x376b3f){if(_0x127ca3){_0x556db5['_onFailure'](_0x22cf83,_0x127ca3);return;}if(_0x376b3f['load']instanceof DataView){if(_0x59e239['openBinary']){if(!_0x556db5['_requests'][_0x22cf83])return;try{const _0x4d6004=_0x59e239['openBinary'](_0x376b3f['load']);_0x556db5['_onSuccess'](_0x22cf83,_0x4d6004);}catch(_0x202aa0){_0x556db5['_onFailure'](_0x22cf83,_0x202aa0);}return;}_0x376b3f['load']=URL['createObje'+'ctURL'](new Blob([_0x376b3f['load']])),_0x86f2ca&&(_0x86f2ca['urlObject']&&URL['revokeObje'+'ctURL'](_0x86f2ca['urlObject']),_0x86f2ca['urlObject']=_0x376b3f['load']);}_0x59e239['load'](_0x376b3f,(_0x2edc56,_0x78d419,_0x3206f2)=>{if(_0x556db5['_requests'][_0x22cf83]){if(_0x2edc56){_0x556db5['_onFailure'](_0x22cf83,_0x2edc56);return;}try{_0x556db5['_onSuccess'](_0x22cf83,_0x59e239['open'](_0x376b3f['original'],_0x78d419,_0x86f2ca),_0x3206f2);}catch(_0xbd1d26){_0x556db5['_onFailure'](_0x22cf83,_0xbd1d26);}}},_0x86f2ca);},_0x53a939=_0x3b94c0['split']('?')[0xa7*-0x6+-0xada+0xec4];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x53a939)&&!(_0x23b73e&&_0x23b73e['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x53a939)){const _0x2ed5e4=this['_app']['bundles']['listBundle'+'sForAsset'](_0x86f2ca);let _0x2357ab;_0x23b73e&&_0x23b73e['bundlesFil'+'ter']&&(_0x2357ab=_0x23b73e['bundlesFil'+'ter'](_0x2ed5e4)),_0x2357ab||(_0x2ed5e4==null||_0x2ed5e4['sort']((_0x212ca5,_0x244dcb)=>_0x212ca5['file']['size']-_0x244dcb['file']['size']),_0x2357ab=_0x2ed5e4==null?void(0x81*0x4b+-0x25cb+0x0):_0x2ed5e4[0xea*0x1d+-0x3*-0x71e+-0x3*0xff4]),_0x2357ab&&((_0xac83f9=this['_app']['assets'])==null||_0xac83f9['load'](_0x2357ab));}this['_app']['bundles']['loadUrl'](_0x53a939,(_0x364529,_0x426c47)=>{_0x467149(_0x364529,{'load':_0x426c47,'original':_0x53a939});});}else _0x467149(null,{'load':_0x3b94c0,'original':_0x86f2ca&&_0x86f2ca['file']['filename']||_0x3b94c0});}}['_loadNull'](_0xd74f22,_0x2ba835,_0x5ad361){const _0x14181d=function(_0x4af926,_0x140c06,_0x3d1eed){if(_0x4af926)_0x2ba835(_0x4af926);else try{_0x2ba835(null,_0xd74f22['open'](null,_0x140c06,_0x5ad361),_0x3d1eed);}catch(_0x43b9d7){_0x2ba835(_0x43b9d7);}};_0xd74f22['load'](null,_0x14181d,_0x5ad361);}['_onSuccess'](_0x4b89fc,_0x1be47c,_0xf5c20d){for(let _0x4dd360=0x3*0xca7+0x1*0x506+-0x2afb;_0x4dd360<this['_requests'][_0x4b89fc]['length'];_0x4dd360++)this['_requests'][_0x4b89fc][_0x4dd360](null,_0x1be47c,_0xf5c20d);delete this['_requests'][_0x4b89fc];}['_onFailure'](_0x497dcc,_0x9b7fa8){if(console['error'](_0x9b7fa8),this['_requests'][_0x497dcc]){for(let _0x1df9e5=-0x1a2*0x3+-0x7*-0x2d5+-0xeed;_0x1df9e5<this['_requests'][_0x497dcc]['length'];_0x1df9e5++)this['_requests'][_0x497dcc][_0x1df9e5](_0x9b7fa8);delete this['_requests'][_0x497dcc];}}['open'](_0x8b05b0,_0x13aca9){const _0xa9d3ce=this['_handlers'][_0x8b05b0];return _0xa9d3ce?_0xa9d3ce['open'](null,_0x13aca9):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x8b05b0),_0x13aca9);}['patch'](_0x3b9c28,_0x2e34a0){const _0xc0c6e5=this['_handlers'][_0x3b9c28['type']];if(!_0xc0c6e5){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x3b9c28['type']);return;}_0xc0c6e5['patch']&&_0xc0c6e5['patch'](_0x3b9c28,_0x2e34a0);}['clearCache'](_0x4e0696,_0x2d9a53){const _0x28fedf=fn['makeKey'](_0x4e0696,_0x2d9a53);delete this['_cache'][_0x28fedf];}['getFromCac'+'he'](_0x5d083c,_0x3514ca){const _0x58ad48=fn['makeKey'](_0x5d083c,_0x3514ca);if(this['_cache'][_0x58ad48])return this['_cache'][_0x58ad48];}['enableRetr'+'y'](_0x5a2516=0x2b5*-0x2+0x1ee4*-0x1+-0x11*-0x223){_0x5a2516=Math['max'](0x19f*-0xa+-0x1510+0x2546,_0x5a2516)||0x94a*0x4+0x22f9+-0x4821;for(const _0x178c5f in this['_handlers'])this['_handlers'][_0x178c5f]['maxRetries']=_0x5a2516;}['disableRet'+'ry'](){for(const _0x3640a7 in this['_handlers'])this['_handlers'][_0x3640a7]['maxRetries']=0x249+-0x1588+0x133f;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class Jb{['_validate'](_0x48c0ec){if(!_0x48c0ec['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x48c0ec['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x48c0ec['header']['version']!==0x2163+-0x1*-0x48e+0x4*-0x97c)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x48c0ec['data']){if(!Array['isArray'](_0x48c0ec['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x41f73e=-0x1*-0xe8c+-0x1ae3+0x27*0x51,_0x2a7612=_0x48c0ec['data']['length'];_0x41f73e<_0x2a7612;_0x41f73e++){const _0x4be5f7=_0x48c0ec['data'][_0x41f73e];if(!_0x4be5f7['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x41f73e+('].info\x22\x20fi'+'eld'));if(!_0x4be5f7['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x41f73e+('].info.loc'+'ale\x22\x20field'));if(typeof _0x4be5f7['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x41f73e+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x4be5f7['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x41f73e+('].messages'+'\x22\x20field'));}}['parse'](_0x1bb978){return this['_validate'](_0x1bb978),_0x1bb978['data'];}}const uc=class uc extends pe{constructor(_0x327c87){super(),this['locale']=Qh,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x327c87,this['_assets']=[],this['_parser']=new Jb();}set['assets'](_0x197985){const _0x541f50={};for(let _0x32da0b=-0x1c9+0x15fd*-0x1+0x17c6*0x1,_0xb65bf0=_0x197985['length'];_0x32da0b<_0xb65bf0;_0x32da0b++){const _0x120286=_0x197985[_0x32da0b]instanceof me?_0x197985[_0x32da0b]['id']:_0x197985[_0x32da0b];_0x541f50[_0x120286]=!(0x2152+-0x11e3+-0x1*0xf6f);}let _0x24d61b=this['_assets']['length'];for(;_0x24d61b--;){const _0x5def99=this['_assets'][_0x24d61b];if(!_0x541f50[_0x5def99]){this['_app']['assets']['off']('add:'+_0x5def99,this['_onAssetAd'+'d'],this);const _0x14b722=this['_app']['assets']['get'](_0x5def99);_0x14b722&&this['_onAssetRe'+'move'](_0x14b722),this['_assets']['splice'](_0x24d61b,0x129b+0x61*-0x2f+-0xcb);}}for(const _0x3e86cb in _0x541f50){const _0x1b4659=parseInt(_0x3e86cb,0x1d92+0x2474*0x1+-0x41fc);if(this['_assets']['indexOf'](_0x1b4659)!==-(0xe*-0x2e+-0x8*-0x242+0xad*-0x17))continue;this['_assets']['push'](_0x1b4659);const _0x12ad44=this['_app']['assets']['get'](_0x1b4659);_0x12ad44?this['_onAssetAd'+'d'](_0x12ad44):this['_app']['assets']['once']('add:'+_0x1b4659,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x9ef3de){if(this['_locale']===_0x9ef3de)return;let _0x615627=bi(_0x9ef3de);if(_0x615627==='in'&&(_0x615627='id',_0x9ef3de=Hb(_0x9ef3de,_0x615627),this['_locale']===_0x9ef3de))return;const _0x19d838=this['_locale'];this['_locale']=_0x9ef3de,this['_lang']=_0x615627,this['_pluralFn']=$d(this['_lang']),this['fire'](uc['EVENT_CHAN'+'GE'],_0x9ef3de,_0x19d838);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x1c216c,_0x578022){return Hy(_0x1c216c,_0x578022);}['findAvaila'+'bleLocale'](_0x1d3ecc){if(this['_translati'+'ons'][_0x1d3ecc])return _0x1d3ecc;const _0x2847e1=bi(_0x1d3ecc);return this['_findFallb'+'ackLocale'](_0x1d3ecc,_0x2847e1);}['getText'](_0x23aa36,_0x146365){let _0x4b792e=_0x23aa36,_0x1bf2db;_0x146365||(_0x146365=this['_locale'],_0x1bf2db=this['_lang']);let _0x1fe502=this['_translati'+'ons'][_0x146365];return _0x1fe502||(_0x1bf2db||(_0x1bf2db=bi(_0x146365)),_0x146365=this['_findFallb'+'ackLocale'](_0x146365,_0x1bf2db),_0x1fe502=this['_translati'+'ons'][_0x146365]),_0x1fe502&&_0x1fe502['hasOwnProp'+'erty'](_0x23aa36)&&(_0x4b792e=_0x1fe502[_0x23aa36],Array['isArray'](_0x4b792e)&&(_0x4b792e=_0x4b792e[-0x14*0x121+-0x157d+0x2c11]),_0x4b792e==null&&(_0x4b792e=_0x23aa36)),_0x4b792e;}['getPluralT'+'ext'](_0x5c361f,_0x18d2b3,_0x586816){let _0xb16a67=_0x5c361f,_0x1d732f,_0x2a788c;_0x586816?(_0x1d732f=bi(_0x586816),_0x2a788c=$d(_0x1d732f)):(_0x586816=this['_locale'],_0x1d732f=this['_lang'],_0x2a788c=this['_pluralFn']);let _0xfdd1c8=this['_translati'+'ons'][_0x586816];if(_0xfdd1c8||(_0x586816=this['_findFallb'+'ackLocale'](_0x586816,_0x1d732f),_0x1d732f=bi(_0x586816),_0x2a788c=$d(_0x1d732f),_0xfdd1c8=this['_translati'+'ons'][_0x586816]),_0xfdd1c8&&_0xfdd1c8[_0x5c361f]&&_0x2a788c){const _0x3116c5=_0x2a788c(_0x18d2b3);_0xb16a67=_0xfdd1c8[_0x5c361f][_0x3116c5],_0xb16a67==null&&(_0xb16a67=_0x5c361f);}return _0xb16a67;}['addData'](_0x3d2885){let _0x46aa46;try{_0x46aa46=this['_parser']['parse'](_0x3d2885);}catch(_0x3742be){console['error'](_0x3742be);return;}for(let _0x40312d=-0x13b8+0x17b4+-0x33*0x14,_0x4a4003=_0x46aa46['length'];_0x40312d<_0x4a4003;_0x40312d++){const _0x748de0=_0x46aa46[_0x40312d],_0x288718=_0x748de0['info']['locale'],_0x284381=_0x748de0['messages'];if(!this['_translati'+'ons'][_0x288718]){this['_translati'+'ons'][_0x288718]={};const _0x2d71cb=bi(_0x288718);this['_available'+'Langs'][_0x2d71cb]||(this['_available'+'Langs'][_0x2d71cb]=_0x288718);}Object['assign'](this['_translati'+'ons'][_0x288718],_0x284381),this['fire']('data:add',_0x288718,_0x284381);}}['removeData'](_0xc9975e){let _0x146565;try{_0x146565=this['_parser']['parse'](_0xc9975e);}catch(_0x5a3eff){console['error'](_0x5a3eff);return;}for(let _0x441663=0x2241+-0x20a*0x13+0x47d,_0x55aaeb=_0x146565['length'];_0x441663<_0x55aaeb;_0x441663++){const _0x36ae93=_0x146565[_0x441663],_0x5c9366=_0x36ae93['info']['locale'],_0x55ecd5=this['_translati'+'ons'][_0x5c9366];if(!_0x55ecd5)continue;const _0x11b572=_0x36ae93['messages'];for(const _0x5bf03f in _0x11b572)delete _0x55ecd5[_0x5bf03f];Object['keys'](_0x55ecd5)['length']===0x1*-0x18cf+-0x56*-0x49+0x49&&(delete this['_translati'+'ons'][_0x5c9366],delete this['_available'+'Langs'][bi(_0x5c9366)]),this['fire']('data:remov'+'e',_0x5c9366,_0x11b572);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x5816e1,_0x4e7d2a){let _0x167e2f=Jh[_0x5816e1];return _0x167e2f&&this['_translati'+'ons'][_0x167e2f]||(_0x167e2f=Jh[_0x4e7d2a],_0x167e2f&&this['_translati'+'ons'][_0x167e2f])||(_0x167e2f=this['_available'+'Langs'][_0x4e7d2a],_0x167e2f&&this['_translati'+'ons'][_0x167e2f])?_0x167e2f:Qh;}['_onAssetAd'+'d'](_0x551339){_0x551339['on']('load',this['_onAssetLo'+'ad'],this),_0x551339['on']('change',this['_onAssetCh'+'ange'],this),_0x551339['on']('remove',this['_onAssetRe'+'move'],this),_0x551339['on']('unload',this['_onAssetUn'+'load'],this),_0x551339['resource']&&this['_onAssetLo'+'ad'](_0x551339);}['_onAssetLo'+'ad'](_0x3dc152){this['addData'](_0x3dc152['resource']);}['_onAssetCh'+'ange'](_0x67e958){_0x67e958['resource']&&this['addData'](_0x67e958['resource']);}['_onAssetRe'+'move'](_0x22b7e1){_0x22b7e1['off']('load',this['_onAssetLo'+'ad'],this),_0x22b7e1['off']('change',this['_onAssetCh'+'ange'],this),_0x22b7e1['off']('remove',this['_onAssetRe'+'move'],this),_0x22b7e1['off']('unload',this['_onAssetUn'+'load'],this),_0x22b7e1['resource']&&this['removeData'](_0x22b7e1['resource']),this['_app']['assets']['once']('add:'+_0x22b7e1['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0x387287){_0x387287['resource']&&this['removeData'](_0x387287['resource']);}};h(uc,'EVENT_CHAN'+'GE','change');let ha=uc;class eC extends pe{constructor(_0x51128d){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x51128d;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x4d8194,_0x25704c){_0x25704c&&this['_scriptSch'+'emas']['set'](_0x4d8194,_0x25704c);}['getSchema'](_0xe31ed8){return this['_scriptSch'+'emas']['get'](_0xe31ed8);}['add'](_0x4c4158){const _0xcc9877=_0x4c4158['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0xcc9877)?(setTimeout(()=>{if(_0x4c4158['prototype']['swap']){const _0x1967ba=this['_scripts'][_0xcc9877],_0xc37db8=this['_list']['indexOf'](_0x1967ba);this['_list'][_0xc37db8]=_0x4c4158,this['_scripts'][_0xcc9877]=_0x4c4158,this['fire']('swap',_0xcc9877,_0x4c4158),this['fire']('swap:'+_0xcc9877,_0x4c4158);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0xcc9877+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(-0x1322+-0x1*-0x214a+0x1*-0xe27)):(this['_scripts'][_0xcc9877]=_0x4c4158,this['_list']['push'](_0x4c4158),this['fire']('add',_0xcc9877,_0x4c4158),this['fire']('add:'+_0xcc9877,_0x4c4158),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0xcc9877)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x36dd7f=this['app']['systems']['script']['_component'+'s'];let _0x36db1e;const _0x337c85=[],_0x10dff3=[];for(_0x36dd7f['loopIndex']=-0x1*-0xf85+0xdb2*-0x2+0xbdf;_0x36dd7f['loopIndex']<_0x36dd7f['length'];_0x36dd7f['loopIndex']++){const _0xf565f3=_0x36dd7f['items'][_0x36dd7f['loopIndex']];if(_0xf565f3['_scriptsIn'+'dex'][_0xcc9877]&&_0xf565f3['_scriptsIn'+'dex'][_0xcc9877]['awaiting']){_0xf565f3['_scriptsDa'+'ta']&&_0xf565f3['_scriptsDa'+'ta'][_0xcc9877]&&(_0x36db1e=_0xf565f3['_scriptsDa'+'ta'][_0xcc9877]['attributes']);const _0x165b27=_0xf565f3['create'](_0xcc9877,{'preloading':!(0x57c+0x763*-0x5+0x53*0x61),'ind':_0xf565f3['_scriptsIn'+'dex'][_0xcc9877]['ind'],'attributes':_0x36db1e});_0x165b27&&_0x337c85['push'](_0x165b27);for(const _0x16719d of _0xf565f3['scripts'])_0xf565f3['initialize'+'Attributes'](_0x16719d);}}for(let _0x294a28=0x287*0x9+0x1d5b+-0x341a;_0x294a28<_0x337c85['length'];_0x294a28++)_0x337c85[_0x294a28]['enabled']&&(_0x337c85[_0x294a28]['_initializ'+'ed']=!(-0x2ef*0xd+-0x5f*-0x31+0x13f4),_0x10dff3['push'](_0x337c85[_0x294a28]),_0x337c85[_0x294a28]['initialize']&&_0x337c85[_0x294a28]['initialize']());for(let _0x970e37=0x1a8b+-0xb5*-0xa+-0x219d;_0x970e37<_0x10dff3['length'];_0x970e37++)!_0x10dff3[_0x970e37]['enabled']||_0x10dff3[_0x970e37]['_postIniti'+'alized']||(_0x10dff3[_0x970e37]['_postIniti'+'alized']=!(-0xec3+0x2517+-0x1654),_0x10dff3[_0x970e37]['postInitia'+'lize']&&_0x10dff3[_0x970e37]['postInitia'+'lize']());}),!(0x17*0x174+0x1*0x43a+-0x3d*0x9e));}['remove'](_0x1abd6f){let _0x77fc2=_0x1abd6f,_0x4ff243=_0x1abd6f;if(typeof _0x4ff243!='string'?_0x4ff243=_0x77fc2['__name']:_0x77fc2=this['get'](_0x4ff243),this['get'](_0x4ff243)!==_0x77fc2)return!(-0x1*-0x310+0xda*0x3+-0x59d);delete this['_scripts'][_0x4ff243];const _0x1358c7=this['_list']['indexOf'](_0x77fc2);return this['_list']['splice'](_0x1358c7,-0x963+0xb*-0x255+-0x1*-0x230b),this['fire']('remove',_0x4ff243,_0x77fc2),this['fire']('remove:'+_0x4ff243,_0x77fc2),!(0xe8b+-0x2316+0x148b);}['get'](_0xb5b817){return this['_scripts'][_0xb5b817]||null;}['has'](_0xb38130){if(typeof _0xb38130=='string')return this['_scripts']['hasOwnProp'+'erty'](_0xb38130);if(!_0xb38130)return!(0x1*0x1bf5+-0xfb*0xd+-0xf35);const _0x4c71c3=_0xb38130['__name'];return this['_scripts'][_0x4c71c3]===_0xb38130;}['list'](){return this['_list'];}}const tC=(_0xe6e184,_0x1928c3)=>_0xe6e184['constructo'+'r']['order']-_0x1928c3['constructo'+'r']['order'],sC=_0x12ca8b=>_0x12ca8b['sort'](tC),Kn=[],Wy=[],iC=()=>Wy['pop']()??[],V_=_0x953c92=>{_0x953c92['length']=-0xb0e+0x15d7+-0x1*0xac9,Wy['push'](_0x953c92);},mc=class mc extends He{constructor(_0xb469b,_0x383a9c=Zr()){super(_0xb469b),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(-0x1*-0x1de7+0x4*-0x301+0x1*-0x11e2)),h(this,'_guid',null),h(this,'_template',!(0xb0f+-0x5d*-0x14+-0x7*0x29e)),(M['assert'](_0x383a9c,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x383a9c);}['addCompone'+'nt'](_0x20f989,_0x3f11d0){const _0x1a0575=this['_app']['systems'][_0x20f989];return _0x1a0575?this['c'][_0x20f989]?(M['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x20f989+('\x27\x20componen'+'t')),null):_0x1a0575['addCompone'+'nt'](this,_0x3f11d0):(M['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x20f989+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0xfd034){const _0x3cdc9e=this['_app']['systems'][_0xfd034];if(!_0x3cdc9e){M['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0xfd034+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0xfd034]){M['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0xfd034+('\x27\x20componen'+'t'));return;}_0x3cdc9e['removeComp'+'onent'](this);}['findCompon'+'ent'](_0xb68c7a){const _0x213e7a=this['findOne'](_0x428c0c=>{var _0x417000;return(_0x417000=_0x428c0c['c'])==null?void(0x12*-0xa9+0x996*0x2+-0x2*0x3a5):_0x417000[_0xb68c7a];});return _0x213e7a&&_0x213e7a['c'][_0xb68c7a];}['findCompon'+'ents'](_0x2c31b0){return this['find'](_0x5ce331=>{var _0x359882;return(_0x359882=_0x5ce331['c'])==null?void(0x1b30+-0x1280+-0x8b0):_0x359882[_0x2c31b0];})['map'](_0x42e497=>_0x42e497['c'][_0x2c31b0]);}['findScript'](_0x12fd13){const _0x3a0d6d=this['findOne'](_0x20788e=>{var _0x35f368,_0x5cd05b;return(_0x5cd05b=(_0x35f368=_0x20788e['c'])==null?void(-0x103f*0x1+0x1cec+-0xcad):_0x35f368['script'])==null?void(-0x1961*-0x1+0x12*0x1+0x1*-0x1973):_0x5cd05b['has'](_0x12fd13);});return _0x3a0d6d==null?void(0x4*0x4db+-0x2062+0xcf6*0x1):_0x3a0d6d['c']['script']['get'](_0x12fd13);}['findScript'+'s'](_0x418a6e){return this['find'](_0x5d0678=>{var _0x395bd3,_0x438308;return(_0x438308=(_0x395bd3=_0x5d0678['c'])==null?void(0x1f99+-0x2b*-0x8+-0x3a9*0x9):_0x395bd3['script'])==null?void(0xb06+0x9c3+-0x1*0x14c9):_0x438308['has'](_0x418a6e);})['map'](_0x5504ab=>_0x5504ab['c']['script']['get'](_0x418a6e));}['getGuid'](){return this['_guid']||this['setGuid'](l0['create']()),this['_guid'];}['setGuid'](_0x1685a9){const _0xadcc0c=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0xadcc0c[this['_guid']],this['_guid']=_0x1685a9,_0xadcc0c[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x24b0f9,_0x3bbd1c){let _0x137ea9=!(-0x2b*-0xab+-0x1aa4+-0x214);_0x24b0f9===this&&Kn['length']===-0x1451+-0x7ed*-0x1+0xc64&&(_0x137ea9=!(-0xba*0x14+0x140b+0x583*-0x1)),_0x24b0f9['_beingEnab'+'led']=!(0x1f79+0xc7a+-0x2bf3),_0x24b0f9['_onHierarc'+'hyStateCha'+'nged'](_0x3bbd1c),_0x24b0f9['_onHierarc'+'hyStatePos'+'tChanged']&&Kn['push'](_0x24b0f9);const _0x1c3220=_0x24b0f9['_children'];for(let _0x106971=-0x2b6*0x7+-0x2*0xcb5+0x1632*0x2,_0x1baa71=_0x1c3220['length'];_0x106971<_0x1baa71;_0x106971++)_0x1c3220[_0x106971]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x1c3220[_0x106971],_0x3bbd1c);if(_0x24b0f9['_beingEnab'+'led']=!(-0x9*-0xed+-0xc24+0x3d0),_0x137ea9){for(let _0x11138d=-0x24f8+0x3d3+0x2125;_0x11138d<Kn['length'];_0x11138d++)Kn[_0x11138d]['_onHierarc'+'hyStatePos'+'tChanged']();Kn['length']=-0xaf7+-0xbd3+0x16ca;}}['_onHierarc'+'hyStateCha'+'nged'](_0x3e13b2){super['_onHierarc'+'hyStateCha'+'nged'](_0x3e13b2);const _0xafb3b2=this['_getSorted'+'Components']();for(let _0x23a666=0x101+0x26*-0xb8+-0x543*-0x5;_0x23a666<_0xafb3b2['length'];_0x23a666++){const _0x554795=_0xafb3b2[_0x23a666];_0x554795['enabled']&&(_0x3e13b2?_0x554795['onEnable']():_0x554795['onDisable']());}V_(_0xafb3b2);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x3cbd50=this['_getSorted'+'Components']();for(let _0x36d878=0x7e7+0x49c*0x1+-0x1*0xc83;_0x36d878<_0x3cbd50['length'];_0x36d878++)_0x3cbd50[_0x36d878]['onPostStat'+'eChange']();V_(_0x3cbd50);}['findByGuid'](_0x3408a1){if(this['_guid']===_0x3408a1)return this;const _0x4c14c2=this['_app']['_entityInd'+'ex'][_0x3408a1];return _0x4c14c2&&(_0x4c14c2===this||_0x4c14c2['isDescenda'+'ntOf'](this))?_0x4c14c2:null;}['destroy'](){this['_destroyin'+'g']=!(0xfda+-0x1cfa+0xa8*0x14);for(const _0x165dbd in this['c'])this['c'][_0x165dbd]['enabled']=!(0x1*0xbfc+-0x1ceb*-0x1+-0x28e6);for(const _0x263f58 in this['c'])this['c'][_0x263f58]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(-0x12de+-0x4d1*0x6+0x2fc5);}['clone'](){const _0x57b55a={},_0x2f7b3b=this['_cloneRecu'+'rsively'](_0x57b55a);return _0x57b55a[this['getGuid']()]=_0x2f7b3b,$y(this,this,_0x2f7b3b,_0x57b55a),_0x2f7b3b;}['_getSorted'+'Components'](){const _0x31992c=this['c'],_0xf813d7=iC();let _0x575f23=0x15c0+-0x691+-0xf2f;for(const _0x495ada in _0x31992c)if(_0x31992c['hasOwnProp'+'erty'](_0x495ada)){const _0x8be1a=_0x31992c[_0x495ada];_0x575f23|=_0x8be1a['constructo'+'r']['order']!==0x17c7*-0x1+-0xd*0xb1+0x20c4,_0xf813d7['push'](_0x8be1a);}return _0x575f23&&_0xf813d7['length']>0x267b+0xd0a+-0x3384&&sC(_0xf813d7),_0xf813d7;}['_cloneRecu'+'rsively'](_0x412be5){const _0x3264f2=new this['constructo'+'r'](void(-0x15e5*-0x1+0x7*0x539+-0x3a74),this['_app']);super['_cloneInte'+'rnal'](_0x3264f2);for(const _0x40afbd in this['c'])this['c'][_0x40afbd]['system']['cloneCompo'+'nent'](this,_0x3264f2);for(let _0x2724c4=0x10ab+0x33*-0xa+-0xead;_0x2724c4<this['_children']['length'];_0x2724c4++){const _0x3b8b84=this['_children'][_0x2724c4];if(_0x3b8b84 instanceof mc){const _0x27623d=_0x3b8b84['_cloneRecu'+'rsively'](_0x412be5);_0x3264f2['addChild'](_0x27623d),_0x412be5[_0x3b8b84['getGuid']()]=_0x27623d;}}return _0x3264f2;}};h(mc,'EVENT_DEST'+'ROY','destroy');let ot=mc;function $y(_0x207d3a,_0x59db9e,_0x5e36f1,_0x52ef47){if(_0x59db9e instanceof ot){const _0x3ffd9d=_0x59db9e['c'];for(const _0x4cf4d4 in _0x3ffd9d){const _0x1f89aa=_0x3ffd9d[_0x4cf4d4],_0x54141e=_0x1f89aa['system']['getPropert'+'iesOfType']('entity');for(let _0x42fcc6=-0x5ab+-0x54+0x133*0x5,_0x1f8bfb=_0x54141e['length'];_0x42fcc6<_0x1f8bfb;_0x42fcc6++){const _0x2b8e48=_0x54141e[_0x42fcc6]['name'],_0x1e1afa=_0x1f89aa[_0x2b8e48];if(!!_0x207d3a['findByGuid'](_0x1e1afa)){const _0x321625=_0x52ef47[_0x1e1afa]['getGuid']();_0x321625?_0x5e36f1['c'][_0x4cf4d4][_0x2b8e48]=_0x321625:M['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x3ffd9d['script']&&_0x5e36f1['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['script'],_0x52ef47),_0x3ffd9d['render']&&_0x5e36f1['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['render'],_0x52ef47),_0x3ffd9d['button']&&_0x5e36f1['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['button'],_0x52ef47),_0x3ffd9d['scrollview']&&_0x5e36f1['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['scrollview'],_0x52ef47),_0x3ffd9d['scrollbar']&&_0x5e36f1['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['scrollbar'],_0x52ef47),_0x3ffd9d['anim']&&_0x5e36f1['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3ffd9d['anim'],_0x52ef47);const _0x559882=_0x59db9e['children']['filter'](_0x1ac5f9=>_0x1ac5f9 instanceof ot),_0x5aac1d=_0x5e36f1['children']['filter'](_0x21befa=>_0x21befa instanceof ot);for(let _0x1522fc=-0x2313+-0x1bd9*0x1+-0xfbb*-0x4,_0x291c77=_0x559882['length'];_0x1522fc<_0x291c77;_0x1522fc++)$y(_0x207d3a,_0x559882[_0x1522fc],_0x5aac1d[_0x1522fc],_0x52ef47);}}class G_{constructor(_0x40ffba,_0x4e3880){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(-0x3*-0x548+-0x605+-0x2*0x4e9)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x40ffba,this['url']=_0x4e3880);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class rC{constructor(_0x548f91){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x548f91;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x5c8773,_0xf4e19a){if(this['_index']['hasOwnProp'+'erty'](_0x5c8773))return M['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x5c8773),!(-0x81b+0x986*0x4+0x1*-0x1dfc);const _0x22dbea=new G_(_0x5c8773,_0xf4e19a),_0x7d3b30=this['_list']['push'](_0x22dbea);return this['_index'][_0x22dbea['name']]=_0x7d3b30-(0x10f0+0xa05+-0x1af4),this['_urlIndex'][_0x22dbea['url']]=_0x7d3b30-(0x12ce+0x1a2b+0x2*-0x167c),!(-0xab8*-0x2+-0x6df+-0xe91);}['find'](_0x32c133){return this['_index']['hasOwnProp'+'erty'](_0x32c133)?this['_list'][this['_index'][_0x32c133]]:null;}['findByUrl'](_0x338359){return this['_urlIndex']['hasOwnProp'+'erty'](_0x338359)?this['_list'][this['_urlIndex'][_0x338359]]:null;}['remove'](_0x3f6180){if(this['_index']['hasOwnProp'+'erty'](_0x3f6180)){const _0x528505=this['_index'][_0x3f6180];let _0x1b8e64=this['_list'][_0x528505];delete this['_urlIndex'][_0x1b8e64['url']],delete this['_index'][_0x3f6180],this['_list']['splice'](_0x528505,-0xe1e+0x11e1*-0x1+-0x4*-0x800);for(let _0x368a09=0xcf2*0x2+0x879+-0x225d*0x1;_0x368a09<this['_list']['length'];_0x368a09++)_0x1b8e64=this['_list'][_0x368a09],this['_index'][_0x1b8e64['name']]=_0x368a09,this['_urlIndex'][_0x1b8e64['url']]=_0x368a09;}}['_loadScene'+'Data'](_0x40d2d5,_0x5bcd8c,_0x4ffa35){const _0x9d0cc3=this['_app'];let _0x44246b=_0x40d2d5;if(typeof _0x40d2d5=='string'&&(_0x40d2d5=this['findByUrl'](_0x44246b)||this['find'](_0x44246b)||new G_('Untitled',_0x44246b)),_0x44246b=_0x40d2d5['url'],!_0x44246b){_0x4ffa35('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x40d2d5['loaded']){_0x4ffa35(null,_0x40d2d5);return;}_0x9d0cc3['assets']&&_0x9d0cc3['assets']['prefix']&&!Ln['test'](_0x44246b)&&(_0x44246b=xe['join'](_0x9d0cc3['assets']['prefix'],_0x44246b)),_0x40d2d5['_onLoadedC'+'allbacks']['push'](_0x4ffa35),_0x40d2d5['_loading']||_0x9d0cc3['loader']['getHandler']('hierarchy')['load'](_0x44246b,(_0x23cd45,_0x3c00b9)=>{_0x40d2d5['data']=_0x3c00b9,_0x40d2d5['_loading']=!(-0x11f1+-0x111c+0x281*0xe);for(let _0x2721fd=0xa*-0xa8+0x73c+-0xac;_0x2721fd<_0x40d2d5['_onLoadedC'+'allbacks']['length'];_0x2721fd++)_0x40d2d5['_onLoadedC'+'allbacks'][_0x2721fd](_0x23cd45,_0x40d2d5);_0x5bcd8c||(_0x40d2d5['data']=null),_0x40d2d5['_onLoadedC'+'allbacks']['length']=-0x113d+0x1*-0x2419+0x3556;}),_0x40d2d5['_loading']=!(0x40*0x37+0x12*0xb5+-0x1a7a*0x1);}['loadSceneD'+'ata'](_0xaf2057,_0x450ac0){this['_loadScene'+'Data'](_0xaf2057,!(-0x2419*0x1+0x9c6+0x1a53),_0x450ac0);}['unloadScen'+'eData'](_0x298fb0){typeof _0x298fb0=='string'&&(_0x298fb0=this['findByUrl'](_0x298fb0)),_0x298fb0&&(_0x298fb0['data']=null);}['_loadScene'+'Hierarchy'](_0x516cca,_0x3d9a9c,_0x1e23b8){this['_loadScene'+'Data'](_0x516cca,!(-0x3*-0x9b+0x1eb2+0x39*-0x92),(_0x171d49,_0x570dd9)=>{if(_0x171d49){_0x1e23b8&&_0x1e23b8(_0x171d49);return;}_0x3d9a9c&&_0x3d9a9c(_0x570dd9);const _0x55ab78=this['_app'],_0x379620=()=>{const _0x5f36cc=_0x55ab78['loader']['getHandler']('hierarchy');_0x55ab78['systems']['script']['preloading']=!(-0x211c+-0x7fb*-0x1+0x1921);const _0x1b63af=_0x5f36cc['open'](_0x570dd9['url'],_0x570dd9['data']);_0x55ab78['systems']['script']['preloading']=!(0xc91*0x1+-0x123+0x3*-0x3cf),_0x55ab78['loader']['clearCache'](_0x570dd9['url'],'hierarchy'),_0x55ab78['root']['addChild'](_0x1b63af),_0x55ab78['systems']['fire']('initialize',_0x1b63af),_0x55ab78['systems']['fire']('postInitia'+'lize',_0x1b63af),_0x55ab78['systems']['fire']('postPostIn'+'itialize',_0x1b63af),_0x1e23b8&&_0x1e23b8(null,_0x1b63af);};_0x55ab78['_preloadSc'+'ripts'](_0x570dd9['data'],_0x379620);});}['loadSceneH'+'ierarchy'](_0x331ad6,_0x436f9c){this['_loadScene'+'Hierarchy'](_0x331ad6,null,_0x436f9c);}['loadSceneS'+'ettings'](_0x34ecd9,_0x30b93b){this['_loadScene'+'Data'](_0x34ecd9,!(-0x13d1+-0x25b3*-0x1+0xc7*-0x17),(_0x4428be,_0x30db05)=>{_0x4428be?_0x30b93b&&_0x30b93b(_0x4428be):(this['_app']['applyScene'+'Settings'](_0x30db05['data']['settings']),_0x30b93b&&_0x30b93b(null));});}['changeScen'+'e'](_0x3e01ed,_0x1ef969){const _0x1e7294=this['_app'],_0x5896d4=_0x9da272=>{const {children:_0x1355e2}=_0x1e7294['root'];for(;_0x1355e2['length'];)_0x1355e2[-0x1c7*0x5+0x1386+-0xaa3]['destroy']();_0x1e7294['applyScene'+'Settings'](_0x9da272['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x3e01ed,_0x5896d4,_0x1ef969);}['loadScene'](_0x4069ff,_0x2941cd){const _0x12befd=this['_app'],_0x51dd0b=_0x12befd['loader']['getHandler']('scene');_0x12befd['assets']&&_0x12befd['assets']['prefix']&&!Ln['test'](_0x4069ff)&&(_0x4069ff=xe['join'](_0x12befd['assets']['prefix'],_0x4069ff)),_0x51dd0b['load'](_0x4069ff,(_0x2805de,_0x4a0e0f)=>{if(_0x2805de)_0x2941cd&&_0x2941cd(_0x2805de);else{const _0x48cdcb=()=>{_0x12befd['systems']['script']['preloading']=!(-0xb2b+-0x153+0xc7e);const _0x1bf163=_0x51dd0b['open'](_0x4069ff,_0x4a0e0f),_0xeff75=this['findByUrl'](_0x4069ff);_0xeff75&&!_0xeff75['loaded']&&(_0xeff75['data']=_0x4a0e0f),_0x12befd['systems']['script']['preloading']=!(-0x9db+-0xf59*-0x2+-0x14d6),_0x12befd['loader']['clearCache'](_0x4069ff,'scene'),_0x12befd['loader']['patch']({'resource':_0x1bf163,'type':'scene'},_0x12befd['assets']),_0x12befd['root']['addChild'](_0x1bf163['root']),_0x12befd['systems']['rigidbody']&&typeof Ammo<'u'&&_0x12befd['systems']['rigidbody']['gravity']['set'](_0x1bf163['_gravity']['x'],_0x1bf163['_gravity']['y'],_0x1bf163['_gravity']['z']),_0x2941cd&&_0x2941cd(null,_0x1bf163);};_0x12befd['_preloadSc'+'ripts'](_0x4a0e0f,_0x48cdcb);}});}}class aC{constructor(_0x123b1f){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x123b1f['_shaderSta'+'ts'],this['vram']=_0x123b1f['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Zr()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x409153;return(_0x409153=Zr()['lightmappe'+'r'])==null?void(0x133b*-0x2+0x5ec+0x208a):_0x409153['stats'];}get['batcher'](){const _0x5ac8bc=Zr()['_batcher'];return _0x5ac8bc?_0x5ac8bc['_stats']:null;}}const nC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',oC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),lC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',hC='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',cC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',dC='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),fC='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',uC='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',mC='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',pC='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',_C='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',gC='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',SC='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',yC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',vC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',xC='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',TC='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),wC='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),EC='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),AC='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),bC='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',CC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',PC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',MC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',IC='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),DC='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',LC='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',RC='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',OC='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',FC='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',NC='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',kC='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',UC='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',BC='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),zC='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',VC='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',GC='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',HC='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',WC='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',$C='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',XC='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',qC='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',jC='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',YC='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',KC='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',ZC='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',QC='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20返回值:\x200'+'.0\x20~\x201.0\x20之'+'间的透明度因子\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20存活时长（秒）'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20线性衰'+'减：基于\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20指数衰减'+'：基于\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20当前'+'存在的时间长度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),JC='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),e1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),t1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),s1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),i1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',r1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',a1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),n1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',o1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x201.'+'2){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),l1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),h1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',c1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20≈'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20判断'+'点\x20p\x20是否在正\x20N'+'\x20边形内\x0a//\x20p:'+'\x20点坐标\x20(UV\x20空'+'间或局部空间)\x0a//'+'\x20N:\x20边数\x0a//\x20'+'r:\x20半径（归一化到'+('1时就是单位圆）\x0a/'+'/\x20center:\x20'+'中心偏移\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20平移坐'+'标，确保中心对齐\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20当前'+'角度\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20当前半径'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20映射到\x200\x20~'+'\x20anglePerS'+'ide\x20区间\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20到边界的最大'+'半径（极坐标下的正\x20'+'N\x20边形公式）\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20距离场方式的'+'正N边形\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20每个扇'+'区角度\x0a\x20\x20\x20\x20//'+'\x20将角度归一化到\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20多边形边界'+'在该方向的最大半径\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20距离\x20=\x20点到'+'边界的差值\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20用\x20smoot')+('hstep\x20实现软边'+'缘\x20(edgeSof'+'tness\x20控制边缘'+'模糊宽度)\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20距离度量：矩形'+'边界\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20如'+'果中心不在原点，传入'+'偏移\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20透明\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//裁剪'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),d1='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),f1='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',u1='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'0，1.0\x20为原始饱'+'和度\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20色相偏移，单位'+'：度（360度环绕）'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20高精度\x20H'+'SV/RGB\x20转换\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x20避免除0\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20转到\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20开关控制\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20开关控制\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20转\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20调整饱和度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20调整'+'色相\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20转回\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),m1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',p1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',_1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',g1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),S1='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',y1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',v1='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',x1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),T1='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',w1='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',E1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',A1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),b1='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),C1='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),P1='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),M1='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',I1='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),D1='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',L1='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',R1='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',O1='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),F1='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),N1='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),k1='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),U1='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',B1='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',z1='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),V1='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',G1='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),H1='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',W1='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),$1='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),X1='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',q1='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),j1='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',Y1='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',K1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',Z1='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',Q1='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',J1='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),eP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),tP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',sP='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),iP='\x0a',rP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',aP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',nP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',oP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',lP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',hP='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',cP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',dP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',fP='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',uP='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',mP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',pP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),_P='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',gP='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',SP='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',yP='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),vP='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),xP='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',TP='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),wP='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),EP='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),AP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',bP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),CP='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),PP='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20Φ\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),MP='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),IP='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',DP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),LP='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),RP='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),OP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',FP='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',NP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',kP='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',UP='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',BP='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',zP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),VP='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),GP='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',HP='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',WP='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',$P='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',XP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',qP='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',jP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',YP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',KP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',ZP='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',QP='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),JP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),e2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',t2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',s2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',i2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',r2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',a2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',n2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',o2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',l2={'alphaTestPS':nC,'ambientPS':oC,'anisotropyPS':lC,'aoPS':hC,'aoDiffuseOccPS':cC,'aoSpecOccPS':dC,'bakeDirLmEndPS':fC,'bakeLmEndPS':uC,'basePS':mC,'baseNineSlicedPS':pC,'baseNineSlicedTiledPS':_C,'bayerPS':gC,'blurVSMPS':SC,'clearCoatPS':yC,'clearCoatGlossPS':vC,'clearCoatNormalPS':xC,'clusteredLightCookiesPS':wC,'clusteredLightShadowsPS':EC,'clusteredLightUtilsPS':TC,'clusteredLightPS':AC,'combinePS':bC,'cookieBlit2DPS':CC,'cookieBlitCubePS':PC,'cookieBlitVS':MC,'cookiePS':IC,'cubeMapProjectPS':DC,'cubeMapRotatePS':LC,'debugOutputPS':RC,'debugProcessFrontendPS':OC,'detailModesPS':NC,'diffusePS':kC,'decodePS':FC,'emissivePS':UC,'encodePS':BC,'endPS':zC,'envAtlasPS':VC,'envProcPS':GC,'falloffInvSquaredPS':HC,'falloffLinearPS':WC,'floatAsUintPS':$C,'fogPS':XC,'fresnelSchlickPS':qC,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':jC,'gammaPS':YC,'gles3PS':jS,'gles3VS':YS,'glossPS':KC,'gsplatCenterVS':ZC,'gsplatCornerVS':o1,'gsplatColorVS':QC,'gsplatCommonVS':JC,'gsplatCompressedDataVS':e1,'gsplatCompressedSHVS':t1,'gsplatEvalSHVS':s1,'gsplatQuatToMat3VS':i1,'gsplatSogsColorVS':r1,'gsplatSogsDataVS':a1,'gsplatSogsSHVS':n1,'gsplatDataVS':l1,'gsplatOutputVS':h1,'gsplatPS':c1,'gsplatSHVS':d1,'gsplatSourceVS':f1,'gsplatVS':u1,'quadVS':m1,'immediateLinePS':p1,'immediateLineVS':_1,'iridescenceDiffractionPS':g1,'iridescencePS':S1,'iridescenceThicknessPS':y1,'iorPS':v1,'lightDeclarationPS':x1,'lightDiffuseLambertPS':T1,'lightDirPointPS':w1,'lightEvaluationPS':E1,'lightFunctionLightPS':A1,'lightFunctionShadowPS':b1,'lightingPS':C1,'lightmapAddPS':P1,'lightmapPS':M1,'lightSpecularAnisoGGXPS':I1,'lightSpecularBlinnPS':D1,'lightSheenPS':L1,'linearizeDepthPS':R1,'litForwardBackendPS':O1,'litForwardDeclarationPS':F1,'litForwardMainPS':N1,'litForwardPostCodePS':k1,'litForwardPreCodePS':U1,'litMainPS':B1,'litMainVS':z1,'litOtherMainPS':V1,'litShaderArgsPS':G1,'litShaderCorePS':H1,'litShadowMainPS':W1,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':$1,'metalnessPS':X1,'metalnessModulatePS':j1,'morphPS':Y1,'morphVS':K1,'msdfPS':q1,'msdfVS':Z1,'normalVS':Q1,'normalCoreVS':J1,'normalMapPS':eP,'opacityPS':tP,'opacityDitherPS':sP,'outputPS':iP,'outputAlphaPS':rP,'outputTex2DPS':aP,'sheenPS':nP,'sheenGlossPS':oP,'parallaxPS':lP,'pickPS':hP,'reflDirPS':cP,'reflDirAnisoPS':dP,'reflectionCCPS':fP,'reflectionCubePS':uP,'reflectionEnvHQPS':mP,'reflectionEnvPS':pP,'reflectionSpherePS':_P,'reflectionSheenPS':gP,'refractionCubePS':SP,'refractionDynamicPS':yP,'reprojectPS':vP,'reprojectVS':xP,'screenDepthPS':TP,'shadowCascadesPS':wP,'shadowEVSMPS':EP,'shadowPCF1PS':AP,'shadowPCF3PS':bP,'shadowPCF5PS':CP,'shadowPCSSPS':PP,'shadowSoftPS':MP,'skinBatchVS':IP,'skinVS':DP,'skyboxPS':LP,'skyboxVS':RP,'specularPS':OP,'sphericalPS':FP,'specularityFactorPS':NP,'spotPS':kP,'startNineSlicedPS':UP,'startNineSlicedTiledPS':BP,'stdDeclarationPS':zP,'stdFrontEndPS':VP,'TBNPS':GP,'thicknessPS':HP,'tonemappingPS':WP,'tonemappingAcesPS':$P,'tonemappingAces2PS':XP,'tonemappingFilmicPS':qP,'tonemappingHejlPS':jP,'tonemappingLinearPS':YP,'tonemappingNeutralPS':KP,'tonemappingNonePS':ZP,'transformVS':QP,'transformCoreVS':JP,'transformInstancingVS':e2,'transmissionPS':t2,'twoSidedLightingPS':s2,'uv0VS':i2,'uv1VS':r2,'uvTransformVS':a2,'uvTransformUniformsPS':n2,'viewDirPS':o2,'webgpuPS':KS,'webgpuVS':ZS},h2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',c2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),d2='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',f2='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',u2='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',m2='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),p2='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',_2='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),g2='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',S2='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',y2='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',v2='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',x2='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',T2='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',w2='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',E2='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',A2='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),b2='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),C2='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),P2='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),M2='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),I2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',D2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',L2='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',R2='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',O2='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',F2='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',N2='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',k2='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',U2='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',B2='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),z2='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',V2='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),G2='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',H2='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',W2='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',$2='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',X2='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',q2='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',j2='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',Y2='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',K2='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',Z2='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',Q2='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',J2='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',eM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',tM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),sM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),iM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),rM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),aM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',nM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',oM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',lM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',hM='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),cM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),dM='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',fM='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20≈\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),uM='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),mM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),pM='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),_M='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',gM='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',SM='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',yM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',vM='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),xM='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',TM='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',wM='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',EM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),AM='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',bM='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',CM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',PM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),MM='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),IM='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),DM='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),LM='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',RM='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),OM='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',FM='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',NM='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',kM='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),UM='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),BM='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),zM='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),VM='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',GM='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',HM='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),WM='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',$M='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),XM='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',qM='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),jM='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),YM='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',KM='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),ZM='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',QM='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',JM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',eI='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),tI='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',sI='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),iI='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),rI='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',aI='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),nI='\x0a',oI='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',lI='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',hI='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',cI='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',dI='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',fI='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',uI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',mI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',pI='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',_I='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',gI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),SI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),yI='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',vI='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',xI='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',TI='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),wI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),EI='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',AI='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),bI='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),CI='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),PI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',MI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),II='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),DI='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',LI='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',RI='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),OI='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),FI='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),NI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',kI='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',UI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',BI='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',zI='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',VI='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',GI='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),HI='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),WI='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),$I='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',XI='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',qI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',jI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',YI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',KI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',ZI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',QI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',JI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',eD='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),tD='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),sD='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',iD='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',rD='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',aD='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',nD='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',oD='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',lD='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',hD='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',cD={'alphaTestPS':h2,'ambientPS':c2,'anisotropyPS':d2,'aoPS':f2,'aoDiffuseOccPS':u2,'aoSpecOccPS':m2,'bakeDirLmEndPS':p2,'bakeLmEndPS':_2,'basePS':g2,'baseNineSlicedPS':S2,'baseNineSlicedTiledPS':y2,'bayerPS':v2,'blurVSMPS':x2,'clearCoatPS':T2,'clearCoatGlossPS':w2,'clearCoatNormalPS':E2,'clusteredLightCookiesPS':b2,'clusteredLightShadowsPS':C2,'clusteredLightUtilsPS':A2,'clusteredLightPS':P2,'combinePS':M2,'cookieBlit2DPS':I2,'cookieBlitCubePS':D2,'cookieBlitVS':L2,'cubeMapProjectPS':R2,'cubeMapRotatePS':O2,'debugOutputPS':F2,'debugProcessFrontendPS':N2,'detailModesPS':U2,'diffusePS':B2,'decodePS':k2,'emissivePS':z2,'encodePS':V2,'endPS':G2,'envAtlasPS':H2,'envProcPS':W2,'falloffInvSquaredPS':$2,'falloffLinearPS':X2,'floatAsUintPS':q2,'fogPS':j2,'fresnelSchlickPS':Y2,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':K2,'gammaPS':Z2,'glossPS':Q2,'gsplatCenterVS':J2,'gsplatCornerVS':hM,'gsplatColorVS':eM,'gsplatCommonVS':tM,'gsplatCompressedDataVS':sM,'gsplatCompressedSHVS':iM,'gsplatEvalSHVS':rM,'gsplatQuatToMat3VS':aM,'gsplatSogsColorVS':nM,'gsplatSogsDataVS':oM,'gsplatSogsSHVS':lM,'gsplatDataVS':cM,'gsplatOutputVS':dM,'gsplatPS':fM,'gsplatSHVS':uM,'gsplatSourceVS':mM,'gsplatVS':pM,'quadVS':_M,'indirectCoreCS':gM,'immediateLinePS':SM,'immediateLineVS':yM,'iridescenceDiffractionPS':vM,'iridescencePS':xM,'iridescenceThicknessPS':TM,'iorPS':wM,'lightDeclarationPS':EM,'lightDiffuseLambertPS':AM,'lightDirPointPS':bM,'lightEvaluationPS':CM,'lightFunctionLightPS':PM,'lightFunctionShadowPS':MM,'lightingPS':IM,'lightmapAddPS':DM,'lightmapPS':LM,'lightSpecularAnisoGGXPS':RM,'lightSpecularBlinnPS':OM,'lightSheenPS':FM,'linearizeDepthPS':NM,'litForwardBackendPS':kM,'litForwardDeclarationPS':UM,'litForwardMainPS':BM,'litForwardPostCodePS':zM,'litForwardPreCodePS':VM,'litMainPS':GM,'litMainVS':HM,'litOtherMainPS':WM,'litShaderArgsPS':$M,'litShaderCorePS':XM,'litShadowMainPS':qM,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':jM,'metalnessPS':YM,'metalnessModulatePS':ZM,'morphPS':QM,'morphVS':JM,'msdfPS':KM,'msdfVS':eI,'normalVS':tI,'normalCoreVS':sI,'normalMapPS':iI,'opacityPS':rI,'opacityDitherPS':aI,'outputPS':nI,'outputAlphaPS':oI,'outputTex2DPS':lI,'sheenPS':hI,'sheenGlossPS':cI,'parallaxPS':dI,'pickPS':fI,'reflDirPS':uI,'reflDirAnisoPS':mI,'reflectionCCPS':pI,'reflectionCubePS':_I,'reflectionEnvHQPS':gI,'reflectionEnvPS':SI,'reflectionSpherePS':yI,'reflectionSheenPS':vI,'refractionCubePS':xI,'refractionDynamicPS':TI,'reprojectPS':wI,'reprojectVS':EI,'screenDepthPS':AI,'shadowCascadesPS':bI,'shadowEVSMPS':CI,'shadowPCF1PS':PI,'shadowPCF3PS':MI,'shadowPCF5PS':II,'shadowSoftPS':DI,'skinBatchVS':LI,'skinVS':RI,'skyboxPS':OI,'skyboxVS':FI,'specularPS':NI,'sphericalPS':kI,'specularityFactorPS':UI,'spotPS':BI,'startNineSlicedPS':zI,'startNineSlicedTiledPS':VI,'stdDeclarationPS':GI,'stdFrontEndPS':HI,'TBNPS':WI,'thicknessPS':$I,'tonemappingPS':XI,'tonemappingAcesPS':qI,'tonemappingAces2PS':jI,'tonemappingFilmicPS':YI,'tonemappingHejlPS':KI,'tonemappingLinearPS':ZI,'tonemappingNeutralPS':QI,'tonemappingNonePS':JI,'transformVS':eD,'transformCoreVS':tD,'transformInstancingVS':sD,'transmissionPS':iD,'twoSidedLightingPS':rD,'uv0VS':aD,'uv1VS':nD,'uvTransformVS':oD,'uvTransformUniformsPS':lD,'viewDirPS':hD,'webgpuPS':QS,'webgpuVS':JS},zr=class zr extends pe{constructor(_0x5cebd5){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(0x19e7+0x1388+-0x1*0x2d6e)),h(this,'_inFrameUp'+'date',!(-0xaef+-0x1608+0x8*0x41f)),h(this,'_libraries'+'Loaded',!(0xdd2+0x4*-0xc3+-0xac5*0x1)),h(this,'_fillMode',k_),h(this,'_resolutio'+'nMode',zb),h(this,'_allowResi'+'ze',!(0x1*0x1b59+0x1031+-0x2b8a)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0x5f*-0x43+-0x5*0x1c0+-0x101c)),h(this,'_scriptPre'+'fix',''),h(this,'_time',0x828+-0x19d3+-0x11ab*-0x1),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0xe01+0x2569+-0x1767),h(this,'maxDeltaTi'+'me',-0x2*-0x126a+0xd*0x2b+-0x2703*0x1+0.1),h(this,'frame',-0x3*0x591+-0x313+0x9e3*0x2),h(this,'frameGraph',new Vb()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0x9*-0x423+-0x2*-0x244+-0x29c3*0x1)),h(this,'renderNext'+'Frame',!(0x658+-0x1*-0xe9b+-0x14f2)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new fn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new rC(this)),h(this,'scripts',new eC(this)),h(this,'systems',new Kb()),h(this,'i18n',new ha(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((ja==null?void(-0x1f3e+-0x244d*-0x1+-0x50f):ja['indexOf']('$'))<-0xc86+0x1*-0x21e+0x4*0x3a9&&M['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+ja+'\x20'+Qg),zr['_applicati'+'ons'][_0x5cebd5['id']]=this,Nf(this),this['root']=new ot(),this['root']['_enabledIn'+'Hierarchy']=!(-0x1d6d+-0x237a+0x5*0xcfb));}['init'](_0x7c37d3){const {assetPrefix:_0x250994,batchManager:_0x23a7d9,componentSystems:_0x2479f8,elementInput:_0x36f0ee,gamepads:_0x328955,graphicsDevice:_0x55dd82,keyboard:_0x3840be,lightmapper:_0x3a8a3c,mouse:_0x1fdb99,resourceHandlers:_0x45ab8e,scriptsOrder:_0x23174b,scriptPrefix:_0x3b801e,soundManager:_0x1bbb32,touch:_0x15d0f1,xr:_0x39d8e0}=_0x7c37d3;M['assert'](_0x55dd82,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x55dd82,Ce['get'](_0x55dd82,ze)['add'](l2),Ce['get'](_0x55dd82,st)['add'](cD),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new aC(_0x55dd82),this['_soundMana'+'ger']=_0x1bbb32,this['scene']=new wi(_0x55dd82),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new ao(this['loader']),_0x250994&&(this['assets']['prefix']=_0x250994),this['bundles']=new Yb(this['assets']),this['scriptsOrd'+'er']=_0x23174b||[],this['defaultLay'+'erWorld']=new Dr({'name':'World','id':Wi}),this['defaultLay'+'erDepth']=new Dr({'name':'Depth','id':os,'enabled':!(-0x170f+0x17e1*0x1+-0xd1),'opaqueSortMode':_h}),this['defaultLay'+'erSkybox']=new Dr({'name':'Skybox','id':_m,'opaqueSortMode':_h}),this['defaultLay'+'erUi']=new Dr({'name':'UI','id':nl,'transparentSortMode':rw}),this['defaultLay'+'erImmediat'+'e']=new Dr({'name':'Immediate','id':gm,'opaqueSortMode':_h});const _0x58073d=new d_('default');_0x58073d['pushOpaque'](this['defaultLay'+'erWorld']),_0x58073d['pushOpaque'](this['defaultLay'+'erDepth']),_0x58073d['pushOpaque'](this['defaultLay'+'erSkybox']),_0x58073d['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x58073d['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x58073d['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x58073d['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x58073d,Vr['createPlac'+'eholder'](_0x55dd82),this['renderer']=new Kh(_0x55dd82),this['renderer']['scene']=this['scene'],_0x3a8a3c&&(this['lightmappe'+'r']=new _0x3a8a3c(_0x55dd82,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x23a7d9&&(this['_batcher']=new _0x23a7d9(_0x55dd82,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x3840be||null,this['mouse']=_0x1fdb99||null,this['touch']=_0x15d0f1||null,this['gamepads']=_0x328955||null,_0x36f0ee&&(this['elementInp'+'ut']=_0x36f0ee,this['elementInp'+'ut']['app']=this),this['xr']=_0x39d8e0?new _0x39d8e0(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x3b801e||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new Qb(this)),_0x45ab8e['forEach'](_0x310ec2=>{const _0x3c8862=new _0x310ec2(this);this['loader']['addHandler'](_0x3c8862['handlerTyp'+'e'],_0x3c8862);}),_0x2479f8['forEach'](_0x215cf5=>{this['systems']['add'](new _0x215cf5(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(-0x1*-0xb1b+-0x7ef+-0x32c)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x635+0x133f+-0xd09))):document['mozHidden']!==void(0x238f+-0x132+-0x225d)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1*-0xf33+0x7b2+-0x16e4))):document['msHidden']!==void(0x55b*0x1+-0x10dd+0xb82)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x347*-0x1+0x1b2c+0x12*-0x1b1))):document['webkitHidd'+'en']!==void(-0x55*-0x57+-0x2f1+0x171*-0x12)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*0x5f+-0x1f34+0xf6b*0x2)))),this['tick']=dD(this);}static['getApplica'+'tion'](_0x4d7eda){return _0x4d7eda?zr['_applicati'+'ons'][_0x4d7eda]:Zr();}['_initDefau'+'ltMaterial'](){const _0x2e3cc4=new ws();_0x2e3cc4['name']='Default\x20Ma'+'terial',Dw(this['graphicsDe'+'vice'],_0x2e3cc4);}['_initProgr'+'amLibrary'](){const _0x12932a=new rb(this['graphicsDe'+'vice'],new ws());yw(this['graphicsDe'+'vice'],_0x12932a);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return M['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0xf46c2c,_0x461c18){nt['get'](_0xf46c2c,(_0x481ffb,_0x461cb0)=>{if(_0x481ffb){_0x461c18(_0x481ffb);return;}const _0x572cae=_0x461cb0['applicatio'+'n_properti'+'es'],_0x4ee50c=_0x461cb0['scenes'],_0x3ace13=_0x461cb0['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x572cae,_0x1fac34=>{this['_parseScen'+'es'](_0x4ee50c),this['_parseAsse'+'ts'](_0x3ace13),_0x461c18(_0x1fac34||null);});});}['preload'](_0x4c9c09){this['fire']('preload:st'+'art');const _0x5de901=this['assets']['list']({'preload':!(0x1220+0xec2*0x1+0x57b*-0x6)});if(_0x5de901['length']===0x181d+-0xb*-0xd2+-0x2123){this['fire']('preload:en'+'d'),_0x4c9c09();return;}let _0x4e302a=0x1c58+0x11b*0x11+-0x1*0x2f23;const _0x5c75cd=()=>{_0x4e302a++,this['fire']('preload:pr'+'ogress',_0x4e302a/_0x5de901['length']),_0x4e302a===_0x5de901['length']&&(this['fire']('preload:en'+'d'),_0x4c9c09());};_0x5de901['forEach'](_0x463a55=>{_0x463a55['loaded']?_0x5c75cd():(_0x463a55['once']('load',_0x5c75cd),_0x463a55['once']('error',_0x5c75cd),this['assets']['load'](_0x463a55));});}['_preloadSc'+'ripts'](_0x1efe50,_0x45c4ec){_0x45c4ec();}['_parseAppl'+'icationPro'+'perties'](_0x2afe2e,_0x2c7784){if(typeof _0x2afe2e['maxAssetRe'+'tries']=='number'&&_0x2afe2e['maxAssetRe'+'tries']>-0x1*-0x11e5+0x21c2+0x33a7*-0x1&&this['loader']['enableRetr'+'y'](_0x2afe2e['maxAssetRe'+'tries']),_0x2afe2e['useDeviceP'+'ixelRatio']||(_0x2afe2e['useDeviceP'+'ixelRatio']=_0x2afe2e['use_device'+'_pixel_rat'+'io']),_0x2afe2e['resolution'+'Mode']||(_0x2afe2e['resolution'+'Mode']=_0x2afe2e['resolution'+'_mode']),_0x2afe2e['fillMode']||(_0x2afe2e['fillMode']=_0x2afe2e['fill_mode']),this['_width']=_0x2afe2e['width'],this['_height']=_0x2afe2e['height'],_0x2afe2e['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x2afe2e['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x2afe2e['fillMode'],this['_width'],this['_height']),_0x2afe2e['layers']&&_0x2afe2e['layerOrder']){const _0x3a9f19=new d_('applicatio'+'n'),_0x4a6cc6={};for(const _0x36bd13 in _0x2afe2e['layers']){const _0x158894=_0x2afe2e['layers'][_0x36bd13];_0x158894['id']=parseInt(_0x36bd13,-0x3c0+0x5*0x388+-0xdde),_0x158894['enabled']=_0x158894['id']!==os,_0x4a6cc6[_0x36bd13]=new Dr(_0x158894);}for(let _0x42443a=-0x1ab1+0x1baa+-0xf9,_0x22820f=_0x2afe2e['layerOrder']['length'];_0x42443a<_0x22820f;_0x42443a++){const _0x223d5c=_0x2afe2e['layerOrder'][_0x42443a],_0x2536c2=_0x4a6cc6[_0x223d5c['layer']];_0x2536c2&&(_0x223d5c['transparen'+'t']?_0x3a9f19['pushTransp'+'arent'](_0x2536c2):_0x3a9f19['pushOpaque'](_0x2536c2),_0x3a9f19['subLayerEn'+'abled'][_0x42443a]=_0x223d5c['enabled']);}this['scene']['layers']=_0x3a9f19;}if(_0x2afe2e['batchGroup'+'s']){const _0x6050ec=this['batcher'];if(_0x6050ec)for(let _0x45c62a=-0x7d9+-0x2f*-0x53+-0x764*0x1,_0x633cbb=_0x2afe2e['batchGroup'+'s']['length'];_0x45c62a<_0x633cbb;_0x45c62a++){const _0x89e0a=_0x2afe2e['batchGroup'+'s'][_0x45c62a];_0x6050ec['addGroup'](_0x89e0a['name'],_0x89e0a['dynamic'],_0x89e0a['maxAabbSiz'+'e'],_0x89e0a['id'],_0x89e0a['layers']);}}_0x2afe2e['i18nAssets']&&(this['i18n']['assets']=_0x2afe2e['i18nAssets']),this['_loadLibra'+'ries'](_0x2afe2e['libraries'],_0x2c7784);}['_loadLibra'+'ries'](_0x3a29bb,_0x3261b1){const _0x373647=_0x3a29bb['length'];let _0x2a864c=_0x373647;const _0x5dbb37=/^https?:\/\//;if(_0x373647){const _0x63391d=(_0x2f6843,_0x434a06)=>{_0x2a864c--,_0x2f6843?_0x3261b1(_0x2f6843):_0x2a864c===0x21a6+0x19f*0xd+-0x36b9*0x1&&(this['onLibrarie'+'sLoaded'](),_0x3261b1(null));};for(let _0x59c3cd=0x2666+-0xfa7+-0x16bf*0x1;_0x59c3cd<_0x373647;++_0x59c3cd){let _0x341042=_0x3a29bb[_0x59c3cd];!_0x5dbb37['test'](_0x341042['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x341042=xe['join'](this['_scriptPre'+'fix'],_0x341042)),this['loader']['load'](_0x341042,'script',_0x63391d);}}else this['onLibrarie'+'sLoaded'](),_0x3261b1(null);}['_parseScen'+'es'](_0x24c020){if(_0x24c020){for(let _0x5e47f8=0xb77*0x1+-0x1d73*0x1+-0x4*-0x47f;_0x5e47f8<_0x24c020['length'];_0x5e47f8++)this['scenes']['add'](_0x24c020[_0x5e47f8]['name'],_0x24c020[_0x5e47f8]['url']);}}['_parseAsse'+'ts'](_0x663edd){const _0x40cc72=[],_0x4cc652={},_0x5c4a98={};for(let _0x2e9c0a=-0x1e15*-0x1+-0x1b59+-0x2bc;_0x2e9c0a<this['scriptsOrd'+'er']['length'];_0x2e9c0a++){const _0x18ca11=this['scriptsOrd'+'er'][_0x2e9c0a];_0x663edd[_0x18ca11]&&(_0x4cc652[_0x18ca11]=!(-0xbc1+-0xb*0x127+-0x35*-0x76),_0x40cc72['push'](_0x663edd[_0x18ca11]));}if(this['enableBund'+'les']){for(const _0x333db4 in _0x663edd)_0x663edd[_0x333db4]['type']==='bundle'&&(_0x5c4a98[_0x333db4]=!(0x925+-0x15*-0x1a5+-0x2bae*0x1),_0x40cc72['push'](_0x663edd[_0x333db4]));}for(const _0x3cdf5d in _0x663edd)_0x4cc652[_0x3cdf5d]||_0x5c4a98[_0x3cdf5d]||_0x40cc72['push'](_0x663edd[_0x3cdf5d]);for(let _0x47ab9a=-0x1b*-0x81+0x2*-0x2fe+-0x79f;_0x47ab9a<_0x40cc72['length'];_0x47ab9a++){const _0x490ae2=_0x40cc72[_0x47ab9a],_0x79b21b=new me(_0x490ae2['name'],_0x490ae2['type'],_0x490ae2['file'],_0x490ae2['data']);if(_0x79b21b['id']=parseInt(_0x490ae2['id'],-0x734+0x1114*0x2+-0x1aea),_0x79b21b['preload']=_0x490ae2['preload']?_0x490ae2['preload']:!(-0x1d61+-0x3*0x59f+0x2e3f),_0x79b21b['loaded']=_0x490ae2['type']==='script'&&_0x490ae2['data']&&_0x490ae2['data']['loadingTyp'+'e']>-0x1*0x481+0x6d6+0x3*-0xc7,_0x79b21b['tags']['add'](_0x490ae2['tags']),_0x490ae2['i18n']){for(const _0x379989 in _0x490ae2['i18n'])_0x79b21b['addLocaliz'+'edAssetId'](_0x379989,_0x490ae2['i18n'][_0x379989]);}this['assets']['add'](_0x79b21b);}}['start'](){M['call'](()=>{M['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(0x3*-0x5c2+0x1*0x1cd7+-0xb91);}),this['frame']=0x218*-0xc+-0x4*-0x871+-0x8a4,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x34f996){this['controller']&&this['controller']['update'](_0x34f996),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x5306dd){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x5306dd),this['systems']['fire']('animationU'+'pdate',_0x5306dd),this['systems']['fire']('postUpdate',_0x5306dd),this['fire']('update',_0x5306dd),this['inputUpdat'+'e'](_0x5306dd),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),Kh['_skipRende'+'rCounter']=0x3*0x86+-0x1d20+0x1*0x1b8e,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x2d048b){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x2d048b),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x2d048b),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x3831db,_0x1074b0,_0x4bc133){const _0x42119d=this['stats']['frame'];_0x42119d['dt']=_0x1074b0,_0x42119d['ms']=_0x4bc133,_0x3831db>_0x42119d['_timeToCou'+'ntFrames']?(_0x42119d['fps']=_0x42119d['_fpsAccum'],_0x42119d['_fpsAccum']=0x23b5+-0x1f39+-0x52*0xe,_0x42119d['_timeToCou'+'ntFrames']=_0x3831db+(-0x1e6e+-0x10ab+0x3301)):_0x42119d['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=0x1*0x21b+-0x135b*0x1+-0x2*-0x8a0;}['_fillFrame'+'Stats'](){let _0x1780fa=this['stats']['frame'];_0x1780fa['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x1780fa['materials']=this['renderer']['_materialS'+'witches'],_0x1780fa['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x1780fa['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x1780fa['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x1780fa['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x1780fa['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x3e0243=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x1780fa['triangles']=_0x3e0243[zs]/(0x166+0x2*0xc53+-0x1a09)+Math['max'](_0x3e0243[cr]-(0x1d5f+0xc5*0x23+0x1*-0x384c),-0xaf9+-0xe51+0x194a)+Math['max'](_0x3e0243[$r]-(-0x1*0x17e9+-0x17d+-0x4*-0x65a),-0x1455+0x1*0x1361+0x2*0x7a),_0x1780fa['cullTime']=this['renderer']['_cullTime'],_0x1780fa['sortTime']=this['renderer']['_sortTime'],_0x1780fa['skinTime']=this['renderer']['_skinTime'],_0x1780fa['morphTime']=this['renderer']['_morphTime'],_0x1780fa['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x1780fa['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x1780fa['otherPrimi'+'tives']=-0x5*0x263+0xf79+0x12e*-0x3;for(let _0x550e71=-0x3e5+0xf51*0x2+-0x1abd;_0x550e71<_0x3e0243['length'];_0x550e71++)_0x550e71<zs&&(_0x1780fa['otherPrimi'+'tives']+=_0x3e0243[_0x550e71]),_0x3e0243[_0x550e71]=-0x4d4+0x161*0x7+-0xf7*0x5;this['renderer']['_camerasRe'+'ndered']=-0x11*-0x14f+0xecf+-0x250e,this['renderer']['_materialS'+'witches']=-0x229f+-0x19*-0x95+0xe*0x16f,this['renderer']['_shadowMap'+'Updates']=-0x24a9+-0x3*0xceb+0x4b6a,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=0x3*-0x1ef+-0x2291+0x285e,this['renderer']['_cullTime']=0x1974+-0x5ef+-0x1385*0x1,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=0x8*-0x312+0x69+0x1827,this['renderer']['_lightClus'+'tersTime']=0x130*-0x2+0x1*-0x4f+0xe5*0x3,this['renderer']['_sortTime']=-0x13+0x18cd+-0x41f*0x6,this['renderer']['_skinTime']=0x1*-0x868+0xa81+-0x219*0x1,this['renderer']['_morphTime']=-0x2*-0x1055+0x142f*0x1+-0x34d9,this['renderer']['_shadowMap'+'Time']=-0x570+0x38*0x86+-0x1*0x17e0,this['renderer']['_depthMapT'+'ime']=-0x16ff+0x281*0xd+-0x98e,this['renderer']['_forwardTi'+'me']=0x4ae*0x4+-0xe0b+-0x9*0x85,_0x1780fa=this['stats']['drawCalls'],_0x1780fa['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x1780fa['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x1780fa['depth']=-0x1535+0x14e0+0x55,_0x1780fa['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x1780fa['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x1780fa['immediate']=-0x94*0x2c+-0x1e8*-0xa+0x660,_0x1780fa['instanced']=-0x13c3+0xab2+0x911,_0x1780fa['removedByI'+'nstancing']=-0x32c+0x3fa*-0x5+-0x1a*-0xe3,_0x1780fa['misc']=_0x1780fa['total']-(_0x1780fa['forward']+_0x1780fa['shadow']),this['renderer']['_depthDraw'+'Calls']=0x1abc+0x1d08+-0xac*0x53,this['renderer']['_shadowDra'+'wCalls']=0x424+0x26ef+-0x2b13,this['renderer']['_forwardDr'+'awCalls']=0x1d6+0x253a+0x5*-0x7d0,this['renderer']['_numDrawCa'+'llsCulled']=-0x20d2+0x7bd*0x1+0x1915*0x1,this['renderer']['_skinDrawC'+'alls']=-0xc69+-0x1*-0xa12+0x257,this['renderer']['_immediate'+'Rendered']=-0x146e+-0x3*0x2+0x1474,this['renderer']['_instanced'+'DrawCalls']=0x72b*0x1+0x1d5*-0x3+-0x4*0x6b,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x1780fa=this['stats']['particles'],_0x1780fa['updatesPer'+'Frame']=_0x1780fa['_updatesPe'+'rFrame'],_0x1780fa['frameTime']=_0x1780fa['_frameTime'],_0x1780fa['_updatesPe'+'rFrame']=0x1b51+0xf25+-0x2a76,_0x1780fa['_frameTime']=0x1d*-0x36+0x1*-0x24c6+-0x44a*-0xa;}['setCanvasF'+'illMode'](_0x315e29,_0xfdb4d0,_0x2ac3d7){this['_fillMode']=_0x315e29,this['resizeCanv'+'as'](_0xfdb4d0,_0x2ac3d7);}['setCanvasR'+'esolution'](_0x5d474c,_0x5bb9e1,_0x314957){this['_resolutio'+'nMode']=_0x5d474c,_0x5d474c===U_&&_0x5bb9e1===void(0x1*0x1317+0xd30+-0x2047)&&(_0x5bb9e1=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x314957=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x5bb9e1,_0x314957);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x176ddf,_0x213291){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x2b1f41=window['innerWidth'],_0x28e68b=window['innerHeigh'+'t'];if(this['_fillMode']===k_){const _0x323831=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x484876=_0x2b1f41/_0x28e68b;_0x323831>_0x484876?(_0x176ddf=_0x2b1f41,_0x213291=_0x176ddf/_0x323831):(_0x213291=_0x28e68b,_0x176ddf=_0x213291*_0x323831);}else this['_fillMode']===Bb&&(_0x176ddf=_0x2b1f41,_0x213291=_0x28e68b);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x176ddf+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x213291+'px',this['updateCanv'+'asSize'](),{'width':_0x176ddf,'height':_0x213291};}['updateCanv'+'asSize'](){var _0x370222;if(!(!this['_allowResi'+'ze']||(_0x370222=this['xr'])!=null&&_0x370222['active'])&&this['_resolutio'+'nMode']===U_){const _0x1ba177=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x1ba177['clientWidt'+'h'],_0x1ba177['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(0x68*0x5b+-0x2*0xbcf+0xd5a*-0x1),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x284fd1){let _0x68289b;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x57785c,_0x5b8c74,_0x33444c]=_0x284fd1['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x57785c,_0x5b8c74,_0x33444c);}this['scene']['applySetti'+'ngs'](_0x284fd1),_0x284fd1['render']['hasOwnProp'+'erty']('skybox')&&(_0x284fd1['render']['skybox']?(_0x68289b=this['assets']['get'](_0x284fd1['render']['skybox']),_0x68289b?this['setSkybox'](_0x68289b):this['assets']['once']('add:'+_0x284fd1['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x52fa1b,_0x5a4d80){_0x52fa1b&&_0x5a4d80?Vr['set'](this['graphicsDe'+'vice'],_0x52fa1b,_0x5a4d80):M['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0xe81a3d){if(_0xe81a3d!==this['_skyboxAss'+'et']){const _0x12792=()=>{this['setSkybox'](null);},_0x3ee97c=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x3ee97c,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x12792,this),this['_skyboxAss'+'et']['off']('change',_0x3ee97c,this)),this['_skyboxAss'+'et']=_0xe81a3d,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x3ee97c,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x12792,this),this['_skyboxAss'+'et']['on']('change',_0x3ee97c,this),this['scene']['skyboxMip']===-0x15d2+-0x22a8+-0x2*-0x1c3d&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(-0x1db9*0x1+0x11ab+0x2*0x607)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x3ee97c();}}['_firstBake'](){var _0x4eca4f;(_0x4eca4f=this['lightmappe'+'r'])==null||_0x4eca4f['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0xc5482d;(_0xc5482d=this['batcher'])==null||_0xc5482d['generate']();}['_processTi'+'mestamp'](_0x15b8ac){return _0x15b8ac;}['drawLine'](_0xd2db77,_0x3b3d9c,_0x37e7d9,_0x2eb7ae,_0x443f37){this['scene']['drawLine'](_0xd2db77,_0x3b3d9c,_0x37e7d9,_0x2eb7ae,_0x443f37);}['drawLines'](_0x3c2895,_0x308a53,_0x4155aa=!(-0x1*0x274+-0x3*-0xbb4+-0x20a8),_0x86b150=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x3c2895,_0x308a53,_0x4155aa,_0x86b150);}['drawLineAr'+'rays'](_0x4408ce,_0x144ff0,_0x2fc096=!(-0x4*-0x8db+0x9e0+-0x1be*0x1a),_0x4e7815=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x4408ce,_0x144ff0,_0x2fc096,_0x4e7815);}['drawWireSp'+'here'](_0x5120a5,_0xebff65,_0x3d685d=ie['WHITE'],_0x4fa62d=0x7c*0x1+-0x21ee+-0x2*-0x10c3,_0x477560=!(0x1f54+-0xfdb+-0xf79),_0xa6402c=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x5120a5,_0xebff65,_0x3d685d,_0x4fa62d,_0x477560,_0xa6402c);}['drawWireAl'+'ignedBox'](_0x5d6167,_0x3910c8,_0x2185f1=ie['WHITE'],_0x440a02=!(-0x1240+0x17b*-0x14+0x2fdc),_0x38bcb5=this['scene']['defaultDra'+'wLayer'],_0x240198){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x5d6167,_0x3910c8,_0x2185f1,_0x440a02,_0x38bcb5,_0x240198);}['drawMeshIn'+'stance'](_0x100ed0,_0x1fb2d6=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x100ed0,_0x1fb2d6);}['drawMesh'](_0x2e5b8a,_0xe22b00,_0x553377,_0x422185=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0xe22b00,_0x553377,_0x2e5b8a,null,_0x422185);}['drawQuad'](_0x18ff57,_0x3e56f7,_0x2afc93=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x3e56f7,_0x18ff57,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x2afc93);}['drawTextur'+'e'](_0x50cad0,_0x143746,_0x219686,_0x217860,_0x57fc06,_0x28224d,_0x1f5014=this['scene']['defaultDra'+'wLayer'],_0x5c76b4=!(-0x1*0x1dfd+-0x76a+-0x1*-0x2567)){if(_0x5c76b4===!(-0xdea+0x1a80+-0xc95)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x36c670=new te();_0x36c670['setTRS'](new I(_0x50cad0,_0x143746,-0x1731+0x24c0+-0xd8f),le['IDENTITY'],new I(_0x219686,-_0x217860,0x1870+0x4*0x502+-0x2c78)),_0x28224d||(_0x28224d=new In(),_0x28224d['cull']=xt,_0x28224d['setParamet'+'er']('colorMap',_0x57fc06),_0x28224d['shaderDesc']=_0x5c76b4?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x57fc06['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x28224d['update']()),this['drawQuad'](_0x36c670,_0x28224d,_0x1f5014);}['drawDepthT'+'exture'](_0x4966e6,_0x4b085e,_0x1669b6,_0x18cb54,_0x403a8a=this['scene']['defaultDra'+'wLayer']){const _0x1e9c78=new In();_0x1e9c78['cull']=xt,_0x1e9c78['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x1e9c78['update'](),this['drawTextur'+'e'](_0x4966e6,_0x4b085e,_0x1669b6,_0x18cb54,null,_0x1e9c78,_0x403a8a);}['destroy'](){var _0x5ebf09,_0x13a85e,_0x5bb549,_0x145b20;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(-0xb*0x32a+0x1*-0x3b1+0x267f);return;}const _0x98b040=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0xb83+0x112*0x18+0xc66*-0x3)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x2*0xddb+0x187*0x17+-0x76a)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0xdf9+0xf95*-0x1+-0x7*-0x3b)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0x1f9e+-0x2a5+-0x67*0x48))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x9e8ae5=this['assets']['list']();for(let _0x55e3b8=-0x253f+0x1d1*0x14+0xeb;_0x55e3b8<_0x9e8ae5['length'];_0x55e3b8++)_0x9e8ae5[_0x55e3b8]['unload'](),_0x9e8ae5[_0x55e3b8]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x4d0920=this['loader']['getHandler']('script');_0x4d0920==null||_0x4d0920['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x5ebf09=this['lightmappe'+'r'])==null||_0x5ebf09['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x13a85e=this['xr'])==null||_0x13a85e['end'](),(_0x5bb549=this['xr'])==null||_0x5bb549['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x145b20=this['_soundMana'+'ger'])==null||_0x145b20['destroy'](),this['_soundMana'+'ger']=null,zr['_applicati'+'ons'][_0x98b040]=null,Zr()===this&&Nf(null),zr['cancelTick'](this);}static['cancelTick'](_0x3271c6){_0x3271c6['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x3271c6['frameReque'+'stId']),_0x3271c6['frameReque'+'stId']=void(0x232*-0xd+-0x1c56+0x38e0));}['getEntityF'+'romIndex'](_0x516769){return this['_entityInd'+'ex'][_0x516769];}['_registerS'+'ceneImmedi'+'ate'](_0x138818){this['on']('postrender',_0x138818['immediate']['onPostRend'+'er'],_0x138818['immediate']);}};h(zr,'_applicati'+'ons',{});let ec=zr;const dD=function(_0x3e13e){const _0x3ecb9d=_0x3e13e;return function(_0x54b440,_0x32ae11){var _0x583775,_0x2edaf3,_0x6d76a9,_0x9881ac;if(!_0x3ecb9d['graphicsDe'+'vice'])return;_0x3ecb9d['frameReque'+'stId']&&((_0x2edaf3=(_0x583775=_0x3ecb9d['xr'])==null?void(-0x921+0x1401+-0xae0):_0x583775['session'])==null||_0x2edaf3['cancelAnim'+'ationFrame'](_0x3ecb9d['frameReque'+'stId']),cancelAnimationFrame(_0x3ecb9d['frameReque'+'stId']),_0x3ecb9d['frameReque'+'stId']=null),_0x3ecb9d['_inFrameUp'+'date']=!(-0x85*0x33+-0x1b89+0x98*0x5b),Nf(_0x3ecb9d);const _0x5afa83=_0x3ecb9d['_processTi'+'mestamp'](_0x54b440)||de(),_0x223ffc=_0x5afa83-(_0x3ecb9d['_time']||_0x5afa83);let _0x433687=_0x223ffc/(-0xa4*0x33+-0x1*0x1c1f+0x40b3*0x1);if(_0x433687=Y['clamp'](_0x433687,-0x4*0x78a+0x20e5+0x2bd*-0x1,_0x3ecb9d['maxDeltaTi'+'me']),_0x433687*=_0x3ecb9d['timeScale'],_0x3ecb9d['_time']=_0x5afa83,(_0x6d76a9=_0x3ecb9d['xr'])!=null&&_0x6d76a9['session']?_0x3ecb9d['frameReque'+'stId']=_0x3ecb9d['xr']['session']['requestAni'+'mationFram'+'e'](_0x3ecb9d['tick']):_0x3ecb9d['frameReque'+'stId']=Me['browser']||Me['worker']?requestAnimationFrame(_0x3ecb9d['tick']):null,_0x3ecb9d['graphicsDe'+'vice']['contextLos'+'t'])return;_0x3ecb9d['_fillFrame'+'StatsBasic'](_0x5afa83,_0x433687,_0x223ffc),_0x3ecb9d['_fillFrame'+'Stats'](),_0x3ecb9d['fire']('frameupdat'+'e',_0x223ffc);let _0x4332a9=!(-0xb*0x7f+-0x146b*-0x1+-0xef5);_0x32ae11?(_0x4332a9=!((_0x9881ac=_0x3ecb9d['xr'])!=null&&_0x9881ac['update'](_0x32ae11)),_0x3ecb9d['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x32ae11['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x3ecb9d['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x4332a9&&!_0x3ecb9d['stopSort']&&(M['trace'](e0,'----\x20Frame'+'\x20'+_0x3ecb9d['frame']),M['trace'](sd,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](0x78d*0x1+0x33+-0x7be)+'ms'),_0x3ecb9d['update'](_0x433687),_0x3ecb9d['fire']('framerende'+'r'),(_0x3ecb9d['autoRender']||_0x3ecb9d['renderNext'+'Frame'])&&(M['trace'](sd,'--\x20RenderS'+'tart\x20'+de()['toFixed'](0x3*0x911+0x63d*-0x2+0xeb7*-0x1)+'ms'),_0x3ecb9d['render'](),_0x3ecb9d['renderNext'+'Frame']=!(-0x20bf+-0x160f+0x36cf),M['trace'](sd,'--\x20RenderE'+'nd\x20'+de()['toFixed'](0x7*-0x10f+-0x1fd6+0x1*0x2741)+'ms')),_0x3ecb9d['fire']('frameend')),_0x3ecb9d['_inFrameUp'+'date']=!(-0x169a*0x1+-0x2*0x9b0+0x29fb),_0x3ecb9d['_destroyRe'+'quested']&&_0x3ecb9d['destroy']();};};class fD{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const Zn=new xu();class Xy{constructor(_0x3658ba,_0x239f39,_0x1d58eb){this['scene']=_0x3658ba,this['light']=_0x239f39,this['store'](),_0x239f39['numCascade'+'s']=0x427*0x5+0x112*-0x17+-0x2*-0x1ee,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x1d58eb['shadowsEna'+'bled']&&(_0x239f39['castShadow'+'s']=!(-0x265a*-0x1+-0xe*0xe3+-0x19ef)),_0x239f39['type']!==ve&&(_0x239f39['_node']['getWorldTr'+'ansform'](),_0x239f39['getBoundin'+'gSphere'](Zn),this['lightBound'+'s']=new Ie(),this['lightBound'+'s']['center']['copy'](Zn['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](Zn['radius'],Zn['radius'],Zn['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x4ce66d=this['light'];_0x4ce66d['mask']=this['mask'],_0x4ce66d['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x4ce66d['enabled']=this['enabled'],_0x4ce66d['intensity']=this['intensity'],_0x4ce66d['_node']['setLocalRo'+'tation'](this['rotation']),_0x4ce66d['numCascade'+'s']=this['numCascade'+'s'],_0x4ce66d['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0x1945*-0x1+0x12de+0x667),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x2e7d30){const _0x258f6c=this['light'];_0x258f6c['enabled']=!(0x96f+-0x1607*0x1+-0x3*-0x433),_0x258f6c['shadowMap']&&(_0x258f6c['shadowMap']['cached']&&_0x2e7d30['add'](_0x258f6c,_0x258f6c['shadowMap']),_0x258f6c['shadowMap']=null);}}const jl=new J();class uD extends Xy{constructor(_0x3e2a47,_0x42e639){super(_0x3e2a47['scene'],_0x42e639,_0x3e2a47['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:0x1960+-0x17*0xd+-0x4*0x60d;}['prepareVir'+'tualLight'](_0x46cc85,_0x461179){const _0x31f76a=this['light'];if(_0x31f76a['_node']['setLocalRo'+'tation'](this['rotation']),_0x46cc85>-0x2dd*-0xa+0x1b5a+-0x2*0x1bfe){const _0x2f51ad=_0x31f76a['bakeArea'];fl['circlePoin'+'tDetermini'+'stic'](jl,_0x46cc85,_0x461179),jl['mulScalar'](_0x2f51ad*(-0x21*-0x6d+-0x1*0x231f+0x1512+0.5)),_0x31f76a['_node']['rotateLoca'+'l'](jl['x'],-0xc48+0x1e0a*-0x1+-0x2*-0x1529,jl['y']);}_0x31f76a['_node']['getWorldTr'+'ansform']();const _0x320e2b=-0x83*0xf+0x27b*-0x5+0x1416+0.20000000000000018,_0x115deb=Math['pow'](this['intensity'],_0x320e2b);_0x31f76a['intensity']=Math['pow'](_0x115deb/_0x461179,(-0x2129+-0xb91+-0x1*-0x2cbb)/_0x320e2b);}}const H_=new I();class W_ extends Xy{constructor(_0x371d21){const _0x5dcddb=_0x371d21['scene'],_0x52e2eb=new ot('AmbientLig'+'ht');_0x52e2eb['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(0x17e1+0xb36+-0xd*0x2b3),'affectLightmapped':!(0x166+0x161*0x13+0x373*-0x8),'bake':!(-0xec+0x336+0x24a*-0x1),'bakeNumSamples':_0x5dcddb['ambientBak'+'eNumSample'+'s'],'castShadows':!(0x115+-0x3*0x3f4+0x1f*0x59),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':ks,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(-0x257f+-0x1*-0xceb+0x1895)}),super(_0x5dcddb,_0x52e2eb['light']['light'],_0x371d21['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0xedbf57,_0x2b2c57){fl['spherePoin'+'tDetermini'+'stic'](H_,_0xedbf57,_0x2b2c57,-0xacb*0x1+-0x2*0x581+0x15cd,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](H_['mulScalar'](-(0x15e*-0x13+0x2a2+-0x2b*-0x8b))),this['light']['_node']['rotateLoca'+'l'](0x8*-0x335+0xc22*-0x1+0x2624,-0x1f4b*0x1+0x1cb3+0x298,0x52f*0x7+-0x1a9c+-0x9ad*0x1);const _0x4e77ad=0x1aca+0x15af+-0x3077+0.20000000000000018,_0x5c1675=(-0x13e0+-0xac2+-0x25*-0xd4)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0xc1782c=Math['pow'](_0x5c1675,_0x4e77ad);this['light']['intensity']=Math['pow'](_0xc1782c/_0x2b2c57,(-0x1*-0x1d4b+-0x1a53+0x17*-0x21)/_0x4e77ad);}}class Yl{constructor(_0x48d9e5,_0x39bd66=null){this['node']=_0x48d9e5,this['component']=_0x48d9e5['render']||_0x48d9e5['model'],_0x39bd66=_0x39bd66||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x39bd66,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const mD='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),pD='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',_D='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),gD='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),$_=-0x1333+-0x37*0x9d+0x34fd,SD={'glslBilateralDeNoisePS':mD,'glslDilatePS':pD},yD={'wgslBilateralDeNoisePS':_D,'wgslDilatePS':gD};class vD{constructor(_0x34f2e2){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x34f2e2,Ce['get'](this['device'],ze)['add'](SD),Ce['get'](this['device'],st)['add'](yD),this['constantTe'+'xSource']=_0x34f2e2['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x34f2e2['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(-0x9df+-0x22f7*-0x1+-0x1916*0x1),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x54d6b7){this['constantTe'+'xSource']['setValue'](_0x54d6b7);}['prepare'](_0x469f20,_0x54566a){this['pixelOffse'+'t'][-0x240b+0xf2+0x2319]=(0x504*0x7+0x1bab+-0x3ec6)/_0x469f20,this['pixelOffse'+'t'][-0x1*0x22f+-0x1068+0xa*0x1dc]=(-0x250c+0x45e*0x4+-0x9*-0x22d)/_0x54566a,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x4f5ffa,_0x151d50,_0x1fa371){const _0x4964e5=_0x1fa371?-0xa*0x2b6+-0x771*-0x1+0x35*0x5f:0x919+-0x2*-0x620+-0x2ab*0x8;if(!this['shaderDeno'+'ise'][_0x4964e5]){const _0x3aece3=new Map();_0x3aece3['set']('{MSIZE}',-0x6*-0x35+0x3*-0x948+0x1aa9),_0x1fa371&&_0x3aece3['set']('HDR',''),this['shaderDeno'+'ise'][_0x4964e5]=Ut['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x1fa371?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],ze)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Ce['get'](this['device'],ze)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Ce['get'](this['device'],st)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x3aece3}),this['sigmas']=new Float32Array(0x1c69+0x1d29+-0x3990),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][-0x53*-0x3f+0x26ea+-0xb*0x565]=_0x4f5ffa,this['sigmas'][0x506*0x1+0x1*0x59e+-0xaa3]=_0x151d50,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x4f5ffa,_0x151d50);}['getDenoise'](_0x24afb3){const _0x32df24=_0x24afb3?-0x1*0x692+-0x1ffb*-0x1+-0x1969:-0x24b0*-0x1+0x1f9f+-0x9c2*0x7;return this['shaderDeno'+'ise'][_0x32df24];}['getDilate'](_0x5e3b35,_0x3f11ac){const _0x27ae32=_0x3f11ac?0x112a*-0x2+0x1*0x2405+0x1b1*-0x1:0x16bf+0x1f7*0xf+-0x3437;if(!this['shaderDila'+'te'][_0x27ae32]){const _0x1f6831=_0x3f11ac?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x27ae32]=Ut['createShad'+'er'](_0x5e3b35,{'uniqueName':'lmDilate-'+(_0x3f11ac?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],ze)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],st)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x1f6831+Ce['get'](this['device'],ze)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x1f6831+Ce['get'](this['device'],st)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x27ae32];}['evaluateDe'+'noiseUnifo'+'rms'](_0x5b95ec,_0x468ddb){function _0x17ae6f(_0x388cc4,_0x5cc990){return(0xa74*-0x2+0x1*0x7cf+0xd19+0.39894)*Math['exp'](-(0x1ca4+-0x13*-0x17f+-0x7*0x827+0.5)*_0x388cc4*_0x388cc4/(_0x5cc990*_0x5cc990))/_0x5cc990;}this['kernel']=this['kernel']||new Float32Array($_);const _0x354870=this['kernel'],_0x418da7=Math['floor'](($_-(0x1cc8+0x225d+-0x3f24))/(-0x1aed*0x1+-0x1*0x23e5+-0x4*-0xfb5));for(let _0x2f368d=-0x781+-0x1e*-0x3a+0xb5;_0x2f368d<=_0x418da7;++_0x2f368d){const _0x1bf9c4=_0x17ae6f(_0x2f368d,_0x5b95ec);_0x354870[_0x418da7+_0x2f368d]=_0x1bf9c4,_0x354870[_0x418da7-_0x2f368d]=_0x1bf9c4;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x1af921=(0x1*0x3f5+-0x4a*0x25+-0x1*-0x6be)/_0x17ae6f(-0x3d6+-0x1b4a+0x1f20,_0x468ddb);this['bZnorm']['setValue'](_0x1af921);}}class xD extends fs{constructor(_0x115ff2,_0x5f017d,_0x506075,_0x21b540,_0x4d7037,_0x4be39f){super(_0x115ff2),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x5f017d,this['camera']=_0x506075,this['worldClust'+'ers']=_0x21b540,this['receivers']=_0x4d7037,this['lightArray']=_0x4be39f);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x52f371=>{_0x52f371['defaultUni'+'formBuffer']['destroy'](),_0x52f371['destroy']();}),this['viewBindGr'+'oups']['length']=0x1d6b*0x1+0x4*-0x67e+-0x373;}['execute'](){const _0x1e5b07=this['device'];Q['pushGpuMar'+'ker'](_0x1e5b07,'Lightmappe'+'r');const {renderer:_0x4fc027,camera:_0x39da21,receivers:_0x2746f6,renderTarget:_0x53106d,worldClusters:_0x4576ac,lightArray:_0x27327c}=this;_0x4fc027['renderForw'+'ardLayer'](_0x39da21,_0x53106d,null,void(-0x14d8+0x14d+0x138b),fa,this['viewBindGr'+'oups'],{'meshInstances':_0x2746f6,'splitLights':_0x27327c,'lightClusters':_0x4576ac}),Q['popGpuMark'+'er'](_0x1e5b07);}}const TD=-0xb5*-0x5+0x2c*0xa3+-0x178d,wD=0xb*-0x1f5+-0xf96+0x251d,ED=0x61*0x56+0xd69*0x1+-0x16ff*0x2,Kl=new I();class AD{constructor(_0x31c1ca,_0x2a8f43,_0x4ad4a3,_0x5116ed,_0x5e1eea){this['device']=_0x31c1ca,this['root']=_0x2a8f43,this['scene']=_0x4ad4a3,this['renderer']=_0x5116ed,this['assets']=_0x5e1eea,this['shadowMapC'+'ache']=_0x5116ed['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(0x349*0x1+0x2626+-0x2*0x14b7),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x4af87d;Li['decRef'](this['blackTex']),this['blackTex']=null,Li['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x4af87d=this['camera'])==null||_0x4af87d['destroy'](),this['camera']=null;}['initBake'](_0x6d67a7){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Oe,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(-0x232d*0x1+-0x1779*0x1+0x3aa6),this['lightmapFi'+'lters']=new vD(_0x6d67a7),this['constantBa'+'keDir']=_0x6d67a7['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Oe,'type':ta,'name':'lightmapBl'+'ack'}),Li['incRef'](this['blackTex']);const _0x1eb2ff=new dl();_0x1eb2ff['clearColor']['set'](-0xe08*0x2+-0x23e4+0x3ff4,-0x1892+-0x1fc*0x10+-0x9*-0x642,-0x2335*0x1+-0x22c6+0x45fb*0x1,0x1*0x180e+0x5*0x326+-0x27cc),_0x1eb2ff['clearColor'+'Buffer']=!(-0x2c0+-0x1*0x1c03+-0x19*-0x13b),_0x1eb2ff['clearDepth'+'Buffer']=!(0xdcc+0x2501*0x1+-0x32cc),_0x1eb2ff['clearStenc'+'ilBuffer']=!(-0x22cc+0x3f1*-0x3+0x2ea0),_0x1eb2ff['frustumCul'+'ling']=!(0xc45*0x3+0x1c82*-0x1+-0x84c),_0x1eb2ff['projection']=hn,_0x1eb2ff['aspectRati'+'o']=-0x671*-0x1+0x2*-0x146+-0xf9*0x4,_0x1eb2ff['node']=new He(),this['camera']=_0x1eb2ff,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=ol,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=Tm;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x51ce10=new Fy(_0x6d67a7['supportsAr'+'eaLights'],_0x6d67a7['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x51ce10;const _0x235cef=this['scene']['lighting'];_0x51ce10['shadowsEna'+'bled']=_0x235cef['shadowsEna'+'bled'],_0x51ce10['shadowAtla'+'sResolutio'+'n']=_0x235cef['shadowAtla'+'sResolutio'+'n'],_0x51ce10['cookiesEna'+'bled']=_0x235cef['cookiesEna'+'bled'],_0x51ce10['cookieAtla'+'sResolutio'+'n']=_0x235cef['cookieAtla'+'sResolutio'+'n'],_0x51ce10['areaLights'+'Enabled']=_0x235cef['areaLights'+'Enabled'],_0x51ce10['cells']=new I(-0x7*0x53b+-0x3d*-0x3+0x13d*0x1d,0x9*0x373+0xf9*-0x1+0x2d*-0xab,0x1*-0x11cd+0x17af+-0x5df),_0x51ce10['maxLightsP'+'erCell']=0x4c6+0x1a68+-0x1f2a,this['worldClust'+'ers']=new If(_0x6d67a7),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x2ae3cb){this['materials']=[];function _0x37e689(_0x27292c){Li['decRef'](_0x27292c['colorBuffe'+'r']),_0x27292c['destroy']();}this['renderTarg'+'ets']['forEach'](_0x2cc680=>{_0x37e689(_0x2cc680);}),this['renderTarg'+'ets']['clear'](),_0x2ae3cb['forEach'](_0x26db52=>{_0x26db52['renderTarg'+'ets']['forEach'](_0x35ec9f=>{_0x37e689(_0x35ec9f);}),_0x26db52['renderTarg'+'ets']['length']=-0x213d*0x1+-0xea5+-0x3*-0xff6;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x4b7036,_0x3130c5,_0x3a2d1a){const _0x13fab8=new ws();return _0x13fab8['name']='lmMaterial'+'-pass:'+_0x3130c5+'-ambient:'+_0x3a2d1a,_0x13fab8['setDefine']('UV1LAYOUT',''),_0x13fab8['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x3130c5===wD?(_0x13fab8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x3a2d1a?_0x13fab8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x13fab8['ambient']=new ie(-0x4c5*-0x6+0x1d9e+0x1d1e*-0x2,0x164b*0x1+-0x460+-0x11eb,-0x61*0x62+0x1fbe+0x3*0x1cc),this['bakeHDR']||_0x13fab8['setDefine']('LIGHTMAP_R'+'GBM',''),_0x13fab8['lightMap']=this['blackTex']):(_0x13fab8['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x13fab8['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x13fab8['cull']=xt,_0x13fab8['forceUv1']=!(0x1*0xf05+-0x4ee*-0x7+-0x3187),_0x13fab8['update'](),_0x13fab8;}['createMate'+'rials'](_0x397ed5,_0x1fda0c,_0x42a49c){for(let _0x400706=0x66c+0xcf4+-0x1360;_0x400706<_0x42a49c;_0x400706++)this['passMateri'+'als'][_0x400706]||(this['passMateri'+'als'][_0x400706]=this['createMate'+'rialForPas'+'s'](_0x1fda0c,_0x400706,!(0x5*-0x26f+0x11*-0x1d+0xe19)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x1fda0c,-0x86f+0x675+-0xb*-0x2e,!(-0x153*-0x17+0x1*0x15ef+-0x3be*0xe)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x143cae){return _0x143cae['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1*-0x19e+-0x48b+0x7*0x6b),_0x143cae['litOptions']['separateAm'+'bient']=!(0x13be+-0x58c+0x2e*-0x4f),_0x143cae;});}['createText'+'ure'](_0x43a2b2,_0x4beea9){return new _e(this['device'],{'profilerHint':CS,'width':_0x43a2b2,'height':_0x43a2b2,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(0x17f*-0x17+0x2*0x460+0x19aa),'type':this['bakeHDR']?di:ta,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x4beea9});}['collectMod'+'els'](_0x46f730,_0x4278f1,_0xd4f962){var _0x4b3e13,_0x22295d,_0x20b852;if(!_0x46f730['enabled'])return;let _0x10ff02;if((_0x4b3e13=_0x46f730['model'])!=null&&_0x4b3e13['model']&&((_0x22295d=_0x46f730['model'])!=null&&_0x22295d['enabled'])&&(_0xd4f962&&_0xd4f962['push'](new Yl(_0x46f730)),_0x46f730['model']['lightmappe'+'d']&&_0x4278f1&&(_0x10ff02=_0x46f730['model']['model']['meshInstan'+'ces'])),(_0x20b852=_0x46f730['render'])!=null&&_0x20b852['enabled']&&(_0xd4f962&&_0xd4f962['push'](new Yl(_0x46f730)),_0x46f730['render']['lightmappe'+'d']&&_0x4278f1&&(_0x10ff02=_0x46f730['render']['meshInstan'+'ces'])),_0x10ff02){let _0x285769=!(0x7*-0x364+0x1f20+-0x56*0x16);for(let _0x179bac=-0x6*0x477+0xc42+-0x3c*-0x3e;_0x179bac<_0x10ff02['length'];_0x179bac++)if(!_0x10ff02[_0x179bac]['mesh']['vertexBuff'+'er']['format']['hasUv1']){M['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x46f730['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x285769=!(-0x1621+-0xe*-0x169+0x99*0x4);break;}if(_0x285769){const _0x313b90=[];for(let _0x1f40b0=0x168f+-0x1*-0xb5+-0x1744;_0x1f40b0<_0x10ff02['length'];_0x1f40b0++){const _0xb39950=_0x10ff02[_0x1f40b0]['mesh'];this['_tempSet']['has'](_0xb39950)?_0x4278f1['push'](new Yl(_0x46f730,[_0x10ff02[_0x1f40b0]])):_0x313b90['push'](_0x10ff02[_0x1f40b0]),this['_tempSet']['add'](_0xb39950);}this['_tempSet']['clear'](),_0x313b90['length']>0x1893*0x1+-0x1a*0x4f+-0x108d&&_0x4278f1['push'](new Yl(_0x46f730,_0x313b90));}}for(let _0x21dc28=-0x625+0x12de+-0xcb9*0x1;_0x21dc28<_0x46f730['_children']['length'];_0x21dc28++)this['collectMod'+'els'](_0x46f730['_children'][_0x21dc28],_0x4278f1,_0xd4f962);}['prepareSha'+'dowCasters'](_0x5efc80){const _0x59152f=[];for(let _0x1536b9=-0x66*-0x32+0x62*-0xe+-0x4*0x3a4;_0x1536b9<_0x5efc80['length'];_0x1536b9++){const _0x497fb2=_0x5efc80[_0x1536b9]['component'];if(_0x497fb2['castShadow'+'s']=_0x497fb2['castShadow'+'sLightmap'],_0x497fb2['castShadow'+'sLightmap']){const _0x103b14=_0x5efc80[_0x1536b9]['meshInstan'+'ces'];for(let _0x5a4c32=-0x2b1+-0x1ced+0x1f9e;_0x5a4c32<_0x103b14['length'];_0x5a4c32++)_0x103b14[_0x5a4c32]['visibleThi'+'sFrame']=!(-0x1c3b+0xc*0xdb+0x11f7),_0x59152f['push'](_0x103b14[_0x5a4c32]);}}return _0x59152f;}['updateTran'+'sforms'](_0x4f5a66){for(let _0x4c1552=0x1e20*-0x1+-0x210c+0xd*0x4dc;_0x4c1552<_0x4f5a66['length'];_0x4c1552++){const _0x510af1=_0x4f5a66[_0x4c1552]['meshInstan'+'ces'];for(let _0x4c2bdb=0x293*-0x2+0xc7*0x1f+0x1b9*-0xb;_0x4c2bdb<_0x510af1['length'];_0x4c2bdb++)_0x510af1[_0x4c2bdb]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x43013b){let _0x3c6555;const _0x1ffbdb=this['scene']['lightmapSi'+'zeMultipli'+'er']||-0x4a*0x62+-0xeac+0x2b10,_0x1b713a=Kl;let _0x1b0c74,_0x1045b5;_0x43013b['model']?(_0x1045b5=_0x43013b['model']['lightmapSi'+'zeMultipli'+'er'],_0x43013b['model']['asset']?(_0x3c6555=this['assets']['get'](_0x43013b['model']['asset'])['data'],_0x3c6555['area']&&(_0x1b0c74=_0x3c6555['area'])):_0x43013b['model']['_area']&&(_0x3c6555=_0x43013b['model'],_0x3c6555['_area']&&(_0x1b0c74=_0x3c6555['_area']))):_0x43013b['render']&&(_0x1045b5=_0x43013b['render']['lightmapSi'+'zeMultipli'+'er'],_0x43013b['render']['type']!=='asset'&&_0x43013b['render']['_area']&&(_0x3c6555=_0x43013b['render'],_0x3c6555['_area']&&(_0x1b0c74=_0x3c6555['_area'])));const _0x14d1d9={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x1b0c74&&(_0x14d1d9['x']=_0x1b0c74['x'],_0x14d1d9['y']=_0x1b0c74['y'],_0x14d1d9['z']=_0x1b0c74['z'],_0x14d1d9['uv']=_0x1b0c74['uv']);const _0x1b99fb=_0x1045b5||0x1b2b+0x1bf9+-0x3723;_0x14d1d9['x']*=_0x1b99fb,_0x14d1d9['y']*=_0x1b99fb,_0x14d1d9['z']*=_0x1b99fb;const _0x432d8e=_0x43013b['render']||_0x43013b['model'],_0xe3fe14=this['computeNod'+'eBounds'](_0x432d8e['meshInstan'+'ces']);_0x1b713a['copy'](_0xe3fe14['halfExtent'+'s']);let _0x4bbeb4=_0x14d1d9['x']*_0x1b713a['y']*_0x1b713a['z']+_0x14d1d9['y']*_0x1b713a['x']*_0x1b713a['z']+_0x14d1d9['z']*_0x1b713a['x']*_0x1b713a['y'];return _0x4bbeb4/=_0x14d1d9['uv'],_0x4bbeb4=Math['sqrt'](_0x4bbeb4),Math['min'](Y['nextPowerO'+'fTwo'](_0x4bbeb4*_0x1ffbdb),this['scene']['lightmapMa'+'xResolutio'+'n']||TD);}['setLightma'+'pping'](_0x20366f,_0x1e7115,_0x215dba,_0x4f7f41){for(let _0x32f1ef=0xba7+-0x161b*0x1+0x4*0x29d;_0x32f1ef<_0x20366f['length'];_0x32f1ef++){const _0x2ee4d5=_0x20366f[_0x32f1ef],_0x3e61b1=_0x2ee4d5['meshInstan'+'ces'];for(let _0x2ae3ab=0x1233+0xfe*-0x26+-0x1381*-0x1;_0x2ae3ab<_0x3e61b1['length'];_0x2ae3ab++){const _0x53649f=_0x3e61b1[_0x2ae3ab];if(_0x53649f['setLightma'+'pped'](_0x1e7115),_0x1e7115){_0x4f7f41&&(_0x53649f['_shaderDef'+'s']|=_0x4f7f41),_0x53649f['mask']=si;for(let _0x43dc71=0x3*0x8f+0x16fb+-0x18a8;_0x43dc71<_0x215dba;_0x43dc71++){const _0x1beceb=_0x2ee4d5['renderTarg'+'ets'][_0x43dc71]['colorBuffe'+'r'];_0x1beceb['minFilter']=_t,_0x1beceb['magFilter']=_t,_0x53649f['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][_0x43dc71],_0x1beceb);}}}}}['bake'](_0x1289df,_0x3e2b8c=ph){const _0x3da030=this['device'],_0x6a5d2f=de();this['scene']['_updateSky'+'Mesh'](),_0x3da030['fire']('lightmappe'+'r:start',{'timestamp':_0x6a5d2f,'target':this}),this['stats']['renderPass'+'es']=0x186c+-0x1702+-0x16a,this['stats']['shadowMapT'+'ime']=-0x7f8+0xbda+0x8e*-0x7,this['stats']['forwardTim'+'e']=0x207+0x12d6+-0x6d*0x31;const _0x1e8858=_0x3da030['_shaderSta'+'ts']['linked'],_0xa48d61=_0x3da030['_renderTar'+'getCreatio'+'nTime'],_0x409f65=_0x3da030['_shaderSta'+'ts']['compileTim'+'e'],_0x52c010=[],_0x5ed057=[];if(_0x1289df){for(let _0x460216=0x1227+-0xfbd+-0x26a*0x1;_0x460216<_0x1289df['length'];_0x460216++)this['collectMod'+'els'](_0x1289df[_0x460216],_0x52c010,null);this['collectMod'+'els'](this['root'],null,_0x5ed057);}else this['collectMod'+'els'](this['root'],_0x52c010,_0x5ed057);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x52c010['length']>-0xb3d+-0x3*-0x61c+0x5*-0x16b){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x293ceb=_0x3e2b8c===ph?-0x19c9*-0x1+0xa2d*0x2+-0x2e21:0xe*0x1b8+-0x71*-0x50+-0x3b5f*0x1;this['setLightma'+'pping'](_0x52c010,!(-0x1bf7*0x1+0x21f8+-0x600),_0x293ceb),this['initBake'](_0x3da030),this['bakeIntern'+'al'](_0x293ceb,_0x52c010,_0x5ed057);let _0x12eeb7=Pf;_0x3e2b8c===ph&&(_0x12eeb7|=vy),this['scene']['ambientBak'+'e']&&(_0x12eeb7|=xy),this['setLightma'+'pping'](_0x52c010,!(0x14c*0x1b+0xdf4+-0x30f8),_0x293ceb,_0x12eeb7),this['finishBake'](_0x52c010);}Q['popGpuMark'+'er'](this['device']);const _0x486f61=de();this['stats']['totalRende'+'rTime']=_0x486f61-_0x6a5d2f,this['stats']['shadersLin'+'ked']=_0x3da030['_shaderSta'+'ts']['linked']-_0x1e8858,this['stats']['compileTim'+'e']=_0x3da030['_shaderSta'+'ts']['compileTim'+'e']-_0x409f65,this['stats']['fboTime']=_0x3da030['_renderTar'+'getCreatio'+'nTime']-_0xa48d61,this['stats']['lightmapCo'+'unt']=_0x52c010['length'],_0x3da030['fire']('lightmappe'+'r:end',{'timestamp':_0x486f61,'target':this});}['allocateTe'+'xtures'](_0x313acd,_0x10024c){for(let _0x3e0533=0xcb9*-0x2+0x187*-0xb+-0x67*-0x69;_0x3e0533<_0x313acd['length'];_0x3e0533++){const _0x423e57=_0x313acd[_0x3e0533],_0x23433d=this['calculateL'+'ightmapSiz'+'e'](_0x423e57['node']);for(let _0x30c49a=0x95*-0x26+-0xe*-0x4f+-0x2*-0x8e6;_0x30c49a<_0x10024c;_0x30c49a++){const _0x2dee5a=this['createText'+'ure'](_0x23433d,'lightmappe'+'r_lightmap'+'_'+_0x3e0533);Li['incRef'](_0x2dee5a),_0x423e57['renderTarg'+'ets'][_0x30c49a]=new vt({'colorBuffer':_0x2dee5a,'depth':!(-0x24b8+-0x5f5*-0x1+0x1ec4)});}if(!this['renderTarg'+'ets']['has'](_0x23433d)){const _0x35da4a=this['createText'+'ure'](_0x23433d,'lightmappe'+'r_temp_lig'+'htmap_'+_0x23433d);Li['incRef'](_0x35da4a),this['renderTarg'+'ets']['set'](_0x23433d,new vt({'colorBuffer':_0x35da4a,'depth':!(-0x4a*0x35+-0x281*-0xe+-0x13bb)}));}}}['prepareLig'+'htsToBake'](_0x1efe21,_0x434d31){if(this['scene']['ambientBak'+'e']){const _0x4fd950=new W_(this);_0x434d31['push'](_0x4fd950);}const _0x5d79aa=this['renderer']['lights'];for(let _0x26e7ae=0x27*-0x2f+0x2a9*0xc+0x841*-0x3;_0x26e7ae<_0x5d79aa['length'];_0x26e7ae++){const _0x574096=_0x5d79aa[_0x26e7ae],_0x166962=new uD(this,_0x574096);_0x1efe21['push'](_0x166962),_0x574096['enabled']&&(_0x574096['mask']&ii)!==0x1e1*0x3+-0x5af+0xc&&(_0x574096['mask']=ii|si|ds,_0x574096['shadowUpda'+'teMode']=_0x574096['type']===ve?Pm:or,_0x434d31['push'](_0x166962));}_0x434d31['sort']();}['restoreLig'+'hts'](_0x15466e){for(let _0x433f85=0x1*-0x12c3+0x25c2+-0x12ff;_0x433f85<_0x15466e['length'];_0x433f85++)_0x15466e[_0x433f85]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](-0xe8a*0x1+-0x63f+0x11*0x139,0x1*0xc61+-0x104e+0x3ed,-0x20ed*0x1+-0xf21+0x300e),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x4bf56d){const _0x55aaaf=new Ie();if(_0x4bf56d['length']>-0x9af+-0x7b*-0x1+0x934){_0x55aaaf['copy'](_0x4bf56d[0xbce*-0x3+-0x45*-0x9+-0x20fd*-0x1]['aabb']);for(let _0x3b04fc=0x8*0x3d+0x493*-0x8+0x22b1;_0x3b04fc<_0x4bf56d['length'];_0x3b04fc++)_0x55aaaf['add'](_0x4bf56d[_0x3b04fc]['aabb']);}return _0x55aaaf;}['computeNod'+'esBounds'](_0x5ef8de){for(let _0x4a025c=0x5*-0x21f+-0x15fd+-0x104c*-0x2;_0x4a025c<_0x5ef8de['length'];_0x4a025c++){const _0x265611=_0x5ef8de[_0x4a025c]['meshInstan'+'ces'];_0x5ef8de[_0x4a025c]['bounds']=this['computeNod'+'eBounds'](_0x265611);}}['computeBou'+'nds'](_0x3821e3){const _0x5dc483=new Ie();for(let _0x537429=0x71d+-0xb*0x137+-0x14*-0x50;_0x537429<_0x3821e3['length'];_0x537429++){_0x5dc483['copy'](_0x3821e3[-0x1699+0x7dc*-0x3+0x2e2d]['aabb']);for(let _0x48f1fb=0x1cdb+0x55*0x1d+-0x267b;_0x48f1fb<_0x3821e3['length'];_0x48f1fb++)_0x5dc483['add'](_0x3821e3[_0x48f1fb]['aabb']);}return _0x5dc483;}['backupMate'+'rials'](_0x199b4e){for(let _0x33e05a=-0x208f+-0x5f2+0x2681;_0x33e05a<_0x199b4e['length'];_0x33e05a++)this['materials'][_0x33e05a]=_0x199b4e[_0x33e05a]['material'];}['restoreMat'+'erials'](_0x398c18){for(let _0x4f51a9=0x2513+-0x2*-0xffd+-0x450d;_0x4f51a9<_0x398c18['length'];_0x4f51a9++)_0x398c18[_0x4f51a9]['material']=this['materials'][_0x4f51a9];}['lightCamer'+'aPrepare'](_0x50d796,_0x2671cf){const _0x4b47cb=_0x2671cf['light'];let _0x3820d4;return _0x4b47cb['type']===Ke&&(_0x3820d4=_0x4b47cb['getRenderD'+'ata'](null,-0xd92+0x2306+-0x1574)['shadowCame'+'ra'],_0x3820d4['_node']['setPositio'+'n'](_0x4b47cb['_node']['getPositio'+'n']()),_0x3820d4['_node']['setRotatio'+'n'](_0x4b47cb['_node']['getRotatio'+'n']()),_0x3820d4['_node']['rotateLoca'+'l'](-(0x2*0x655+0xac1+0x1711*-0x1),0xd72*-0x1+0x1*0x2396+-0x1624,-0x8fa+-0x1f6+0xaf0),_0x3820d4['projection']=Ks,_0x3820d4['nearClip']=_0x4b47cb['attenuatio'+'nEnd']/(0x1290+0x57*-0x55+0xe3b),_0x3820d4['farClip']=_0x4b47cb['attenuatio'+'nEnd'],_0x3820d4['aspectRati'+'o']=0x1*-0x12b+-0x1417+0x1543,_0x3820d4['fov']=_0x4b47cb['_outerCone'+'Angle']*(-0x745*0x5+-0x3*0x30f+0x2d88),this['renderer']['updateCame'+'raFrustum'](_0x3820d4)),_0x3820d4;}['lightCamer'+'aPrepareAn'+'dCull'](_0x2f0f38,_0x31f3d2,_0x3147f5,_0xb7d23c){const _0x59599b=_0x2f0f38['light'];let _0x2e95dc=!(0x1*0x97d+0x15a6+-0x1f23*0x1);if(_0x59599b['type']===ve){Kl['copy'](_0xb7d23c['center']),Kl['y']+=_0xb7d23c['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](Kl),this['camera']['node']['setEulerAn'+'gles'](-(0x52e+0x201e*-0x1+0x1b4a),0xc40+-0x5e*-0x1e+0x2*-0xba2,0x9d7+0x76e+-0x1145),this['camera']['nearClip']=0x232f+0x1f3d+-0x1b4*0x27,this['camera']['farClip']=_0xb7d23c['halfExtent'+'s']['y']*(-0x1657+-0xccd+-0x332*-0xb);const _0x579eb5=Math['max'](_0xb7d23c['halfExtent'+'s']['x'],_0xb7d23c['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x579eb5;}else _0x2f0f38['lightBound'+'s']['intersects'](_0x31f3d2['bounds'])||(_0x2e95dc=!(-0x1099+-0x187+0xd*0x165));if(_0x59599b['type']===Ke){let _0x1c3fb3=!(-0x1e54+0xdb*-0x27+-0x2*-0x1fd9);const _0x1670f4=_0x31f3d2['meshInstan'+'ces'];for(let _0x2e8964=0x2*-0xbe9+-0xb57*-0x1+0xc7b;_0x2e8964<_0x1670f4['length'];_0x2e8964++)if(_0x1670f4[_0x2e8964]['_isVisible'](_0x3147f5)){_0x1c3fb3=!(0xe3*0x3+-0x77*-0x23+-0x12ee);break;}_0x1c3fb3||(_0x2e95dc=!(0x661*-0x3+-0x2cd+0x1*0x15f1));}return _0x2e95dc;}['setupLight'+'Array'](_0x2ee95b,_0x29d24a){_0x2ee95b[ve]['length']=0x23a4+0x1*-0x1e0a+-0x59a,_0x2ee95b[Ye]['length']=-0x1*-0x2075+-0x10e3+0xf92*-0x1,_0x2ee95b[Ke]['length']=-0x1*0x223+0x902+-0x6df,_0x2ee95b[_0x29d24a['type']][-0x133+-0xbc5*0x2+0x18bd]=_0x29d24a,_0x29d24a['visibleThi'+'sFrame']=!(0x1086+-0xad6+0x10*-0x5b);}['renderShad'+'owMap'](_0x3aab5f,_0x5aa256,_0x32571c,_0x195857){const _0x296c4c=_0x195857['light'],_0x4c2f10=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x9a0d45=_0x296c4c['castShadow'+'s']&&(!_0x4c2f10||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x5aa256&&_0x9a0d45){if(!_0x296c4c['shadowMap']&&!_0x4c2f10&&(_0x296c4c['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x296c4c)),_0x296c4c['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x296c4c,_0x3aab5f,this['camera'],_0x32571c);const _0x285a59=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x296c4c,this['camera']);_0x285a59==null||_0x285a59['render']();}else{if(this['device']['isWebGPU'])return M['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(-0x120d+-0x11a0+-0x23ad*-0x1);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x296c4c,_0x3aab5f,_0x32571c),this['renderer']['shadowRend'+'erer']['render'](_0x296c4c,this['camera'],!(-0xc76+0x1*-0x19a9+0x131*0x20));}}return!(-0x47*0x29+0x1417+-0x8b8);}['postproces'+'sTextures'](_0xa38049,_0x4f0c83,_0x13ea59){const _0x81bc40=this['lightmapFi'+'lters']['getDilate'](_0xa38049,this['bakeHDR']);let _0x3b333c;const _0x17074b=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x17074b&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x3b333c=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0xa38049['setBlendSt'+'ate'](Ct['NOBLEND']),_0xa38049['setDepthSt'+'ate'](Kt['NODEPTH']),_0xa38049['setStencil'+'State'](null,null);for(let _0x1d5741=0x15*-0x112+-0x1106+0x2780;_0x1d5741<_0x4f0c83['length'];_0x1d5741++){const _0x2b11d5=_0x4f0c83[_0x1d5741];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x1d5741);for(let _0x1d8397=0x5*0x4f7+0x14*-0xef+0x3*-0x20d;_0x1d8397<_0x13ea59;_0x1d8397++){const _0xe3481b=_0x2b11d5['renderTarg'+'ets'][_0x1d8397],_0x5f87b4=_0xe3481b['colorBuffe'+'r'],_0x5852e3=this['renderTarg'+'ets']['get'](_0x5f87b4['width']),_0x5cce3d=_0x5852e3['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x5f87b4['width'],_0x5f87b4['height']);for(let _0x563330=0x111b+0x11c*-0x10+-0xf*-0xb;_0x563330<-0x12df+0x18f2+-0x612;_0x563330++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x5f87b4),fr(_0xa38049,_0x5852e3,_0x17074b&&_0x1d8397===-0x1*0x1cfd+-0xa11+0x270e&&_0x563330===0x204c+0x1*-0xbcb+-0x1481?_0x3b333c:_0x81bc40),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x5cce3d),fr(_0xa38049,_0xe3481b,_0x81bc40);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x478983,_0x4269a5,_0x28e839){const _0x588c84=this['scene'],_0x38c2ed=_0x588c84['layers'],_0x27fcd5=this['device'],_0x1ac088=_0x588c84['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x27fcd5,_0x588c84,_0x478983),this['setupScene'](),_0x38c2ed['_update'](),this['computeNod'+'esBounds'](_0x4269a5),this['allocateTe'+'xtures'](_0x4269a5,_0x478983),this['renderer']['collectLig'+'hts'](_0x38c2ed);const _0xc4bd6e=[],_0x5d38bb=[];this['prepareLig'+'htsToBake'](_0xc4bd6e,_0x5d38bb),this['updateTran'+'sforms'](_0x28e839);const _0x40e31f=this['prepareSha'+'dowCasters'](_0x28e839);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x40e31f),this['renderer']['gpuUpdate'](_0x40e31f);const _0x1a8e53=this['computeBou'+'nds'](_0x40e31f);let _0x2c46b8,_0x2d13a9,_0x5a6d42,_0x3fc83b;for(_0x2c46b8=0x4*-0xa+-0xb*0x27f+0x1b9d;_0x2c46b8<_0x4269a5['length'];_0x2c46b8++)for(_0x5a6d42=_0x4269a5[_0x2c46b8]['meshInstan'+'ces'],_0x2d13a9=-0x15a3*-0x1+-0x74e+-0xe55;_0x2d13a9<_0x5a6d42['length'];_0x2d13a9++)_0x3fc83b=_0x5a6d42[_0x2d13a9],_0x3fc83b['setLightma'+'pped'](!(0x84c*0x1+0x23fa+-0x2c45)),_0x3fc83b['mask']=ii,_0x3fc83b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][-0x1ead+-0x10f3+0x2fa0],this['blackTex']),_0x3fc83b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][-0xf13+0x6b*0x3d+0x379*-0x3],this['blackTex']);for(_0x2d13a9=-0x265b+-0x19d+0x27f8;_0x2d13a9<_0x5d38bb['length'];_0x2d13a9++)_0x5d38bb[_0x2d13a9]['light']['enabled']=!(-0x1*0x13de+0x1d68+-0x1*0x989);const _0x1f84eb=[[],[],[]];let _0x1193ef,_0x20abfc,_0x1a0b23=!(0x3*-0xbf+-0xc00+0xe3e);for(_0x2c46b8=0x1e57+-0x74+-0x1de3;_0x2c46b8<_0x5d38bb['length'];_0x2c46b8++){const _0x177fb5=_0x5d38bb[_0x2c46b8],_0x4067b3=_0x177fb5 instanceof W_,_0x2433f1=_0x177fb5['light']['type']===ve;let _0x1b59e6=_0x177fb5['numVirtual'+'Lights'];_0x478983>0x119*-0x2+-0x16bc+0x1eb*0xd&&_0x1b59e6>-0x141a+0x1ef9+-0xade&&_0x177fb5['light']['bakeDir']&&(_0x1b59e6=0x203*0x3+-0xb77+0x56f,M['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x1ce43a=0x17a3+0x11*0x18c+-0x31ef;_0x1ce43a<_0x1b59e6;_0x1ce43a++){Q['pushGpuMar'+'ker'](_0x27fcd5,'Light:'+_0x177fb5['light']['_node']['name']+':'+_0x1ce43a),_0x1b59e6>-0x2087+0x75f*-0x1+0x27e7&&_0x177fb5['prepareVir'+'tualLight'](_0x1ce43a,_0x1b59e6),_0x177fb5['startBake']();let _0x29cebc=!(-0x1741*0x1+0xb*0x5+0x170b);const _0x754e85=this['lightCamer'+'aPrepare'](_0x27fcd5,_0x177fb5);for(_0x20abfc=-0x107a+0x224+0xe56;_0x20abfc<_0x4269a5['length'];_0x20abfc++){const _0x3eb6cc=_0x4269a5[_0x20abfc];if(_0x5a6d42=_0x3eb6cc['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x177fb5,_0x3eb6cc,_0x754e85,_0x1a8e53))continue;this['setupLight'+'Array'](_0x1f84eb,_0x177fb5['light']);const _0x3ebd60=_0x2433f1?[]:[_0x177fb5['light']];for(_0x1ac088&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x3ebd60,this['lightingPa'+'rams']),_0x29cebc=this['renderShad'+'owMap'](_0x38c2ed,_0x29cebc,_0x40e31f,_0x177fb5),_0x1ac088&&this['worldClust'+'ers']['update'](_0x3ebd60,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x5a6d42),_0x1193ef=0x32f*-0x7+0x176f+-0x2a*0x7;_0x1193ef<_0x478983&&!(_0x1193ef>0x33*0x26+0x228*-0xe+0x169e&&_0x1ce43a>-0x58*-0x55+0x1d8e+0x1*-0x3ac6||_0x4067b3&&_0x1193ef>-0xa94+0x202*0xd+-0xf86*0x1);_0x1193ef++){Q['pushGpuMar'+'ker'](_0x27fcd5,'LMPass:'+_0x1193ef);const _0x16af9c=_0x3eb6cc['renderTarg'+'ets'][_0x1193ef],_0x1c1108=_0x3eb6cc['renderTarg'+'ets'][_0x1193ef]['colorBuffe'+'r']['width'],_0x1fcceb=this['renderTarg'+'ets']['get'](_0x1c1108),_0x522ead=_0x1fcceb['colorBuffe'+'r'];_0x1193ef===0xe30+0xd84+-0x1bb4?_0x1a0b23=_0x588c84['updateShad'+'ers']:_0x1a0b23&&(_0x588c84['updateShad'+'ers']=!(0x515+-0x60c+-0xd*-0x13));let _0x47abd0=this['passMateri'+'als'][_0x1193ef];for(_0x4067b3&&_0x1ce43a+(-0x12cc+0x13b4+-0xe7)===_0x1b59e6&&_0x1193ef===0x208c+0x1e*-0xaf+-0xc0a&&(_0x47abd0=this['ambientAOM'+'aterial']),_0x2d13a9=0x18d4+0x1aac+0x2*-0x19c0;_0x2d13a9<_0x5a6d42['length'];_0x2d13a9++)_0x5a6d42[_0x2d13a9]['material']=_0x47abd0;if(this['renderer']['updateShad'+'ers'](_0x5a6d42),_0x1193ef===ED&&this['constantBa'+'keDir']['setValue'](_0x177fb5['light']['bakeDir']?-0x13*-0x205+-0x55*0x45+-0xf75*0x1:0x1855+-0x801*0x3+0x52*-0x1),_0x27fcd5['isWebGPU']){const _0x23b729=new xD(_0x27fcd5,this['renderer'],this['camera'],_0x1ac088?this['worldClust'+'ers']:null,_0x5a6d42,_0x1f84eb);_0x23b729['init'](_0x1fcceb),_0x23b729['render'](),_0x23b729['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x1fcceb,!(-0x3*-0x283+-0x234d*0x1+0x4*0x6f1)),_0x1ac088&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=-0x1*-0xeed+-0x82f+-0x35f*0x2,this['renderer']['_shadowMap'+'Time']=-0x95b+0x27b+-0x6e0*-0x1,this['renderer']['renderForw'+'ard'](this['camera'],_0x1fcceb,_0x5a6d42,_0x1f84eb,fa),_0x27fcd5['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x3eb6cc['renderTarg'+'ets'][_0x1193ef]=_0x1fcceb,this['renderTarg'+'ets']['set'](_0x1c1108,_0x16af9c),_0x2d13a9=-0x1*0x2252+0xa5d*-0x2+0x370c;_0x2d13a9<_0x5a6d42['length'];_0x2d13a9++)_0x3fc83b=_0x5a6d42[_0x2d13a9],_0x3fc83b['setRealtim'+'eLightmap'](We['lightmapPa'+'ramNames'][_0x1193ef],_0x522ead),_0x3fc83b['_shaderDef'+'s']|=Pf;Q['popGpuMark'+'er'](_0x27fcd5);}this['restoreMat'+'erials'](_0x5a6d42);}_0x177fb5['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x27fcd5);}}for(this['postproces'+'sTextures'](_0x27fcd5,_0x4269a5,_0x478983),_0x20abfc=-0x1342+-0x8*-0xdc+-0x631*-0x2;_0x20abfc<_0x28e839['length'];_0x20abfc++)_0x28e839[_0x20abfc]['restore']();this['restoreLig'+'hts'](_0xc4bd6e),this['restoreSce'+'ne'](),_0x1ac088||this['shadowMapC'+'ache']['clear']();}}const pc=class pc extends pe{constructor(_0xecccd2,_0x4e586d){super(),h(this,'system'),h(this,'entity'),(this['system']=_0xecccd2,this['entity']=_0x4e586d,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x2f8d76,_0x2eea65,_0x474b9d){this['fire']('set_'+_0x2f8d76,_0x2f8d76,_0x2eea65,_0x474b9d);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x514a0f,_0x5482fa){_0x5482fa['forEach'](_0x3dab01=>{const _0x2fcb9a=typeof _0x3dab01=='object'?_0x3dab01['name']:_0x3dab01;Object['defineProp'+'erty'](_0x514a0f,_0x2fcb9a,{'get':function(){return this['data'][_0x2fcb9a];},'set':function(_0x2bfb9e){const _0x1b1712=this['data'],_0x13dde4=_0x1b1712[_0x2fcb9a];_0x1b1712[_0x2fcb9a]=_0x2bfb9e,this['fire']('set',_0x2fcb9a,_0x13dde4,_0x2bfb9e);},'configurable':!(0x821+0x8*-0x85+-0x9*0x71)});}),_0x514a0f['_accessors'+'Built']=!(0xac5*-0x1+0xf2a+0x465*-0x1);}['buildAcces'+'sors'](_0x4f6d4a){pc['_buildAcce'+'ssors'](this,_0x4f6d4a);}['onSetEnabl'+'ed'](_0x1904ed,_0x489c0c,_0x2fbda7){_0x489c0c!==_0x2fbda7&&this['entity']['enabled']&&(_0x2fbda7?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x16c3c4=this['system']['store'][this['entity']['getGuid']()];return _0x16c3c4?_0x16c3c4['data']:null;}set['enabled'](_0x3c5b64){}get['enabled'](){return!(0x1*0x3cb+0xa49*0x2+-0x185d);}};h(pc,'order',0xc3+-0x1*-0x157+-0x21a);let we=pc;class lt extends pe{constructor(_0x586a40){super(),this['app']=_0x586a40,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x3ee59d,_0x728cff={}){const _0x57ed9a=new this['ComponentT'+'ype'](this,_0x3ee59d),_0x387956=new this['DataType']();return this['store'][_0x3ee59d['getGuid']()]={'entity':_0x3ee59d,'data':_0x387956},_0x3ee59d[this['id']]=_0x57ed9a,_0x3ee59d['c'][this['id']]=_0x57ed9a,this['initialize'+'ComponentD'+'ata'](_0x57ed9a,_0x728cff,[]),this['fire']('add',_0x3ee59d,_0x57ed9a),_0x57ed9a;}['removeComp'+'onent'](_0x470a00){const _0x192a93=this['id'],_0x4cdad0=this['store'][_0x470a00['getGuid']()],_0x15b1dc=_0x470a00['c'][_0x192a93];_0x15b1dc['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x470a00,_0x15b1dc),delete this['store'][_0x470a00['getGuid']()],_0x470a00[_0x192a93]=void(-0x1*-0x4eb+-0x285+-0x266),delete _0x470a00['c'][_0x192a93],this['fire']('remove',_0x470a00,_0x4cdad0['data']);}['cloneCompo'+'nent'](_0x21dd4f,_0x2b1caf){const _0x5c7886=this['store'][_0x21dd4f['getGuid']()];return this['addCompone'+'nt'](_0x2b1caf,_0x5c7886['data']);}['initialize'+'ComponentD'+'ata'](_0x163764,_0x39f490={},_0x256c5e){for(let _0x5034e5=-0x1be4+0x2*-0x41+0x1c66,_0x944388=_0x256c5e['length'];_0x5034e5<_0x944388;_0x5034e5++){const _0x589dca=_0x256c5e[_0x5034e5];let _0x7e6a6b,_0x5bb379;typeof _0x589dca=='object'?(_0x7e6a6b=_0x589dca['name'],_0x5bb379=_0x589dca['type']):(_0x7e6a6b=_0x589dca,_0x5bb379=void(0xdd5*-0x1+-0x22c4+0x3099));let _0x2f0e14=_0x39f490[_0x7e6a6b];_0x2f0e14!==void(-0x3*-0x16e+0x1d32+-0x217c)?(_0x5bb379!==void(-0x3f*-0x7+0x121f*0x2+-0x25f7*0x1)&&(_0x2f0e14=bD(_0x2f0e14,_0x5bb379)),_0x163764[_0x7e6a6b]=_0x2f0e14):_0x163764[_0x7e6a6b]=_0x163764['data'][_0x7e6a6b];}_0x163764['enabled']&&_0x163764['entity']['enabled']&&_0x163764['onEnable']();}['getPropert'+'iesOfType'](_0x55959c){const _0x22c2da=[];return(this['schema']||[])['forEach'](_0x382a60=>{_0x382a60&&typeof _0x382a60=='object'&&_0x382a60['type']===_0x55959c&&_0x22c2da['push'](_0x382a60);}),_0x22c2da;}['destroy'](){this['off']();}}function bD(_0x5a3a0f,_0xb17f32){if(!_0x5a3a0f)return _0x5a3a0f;switch(_0xb17f32){case'rgb':return _0x5a3a0f instanceof ie?_0x5a3a0f['clone']():new ie(_0x5a3a0f[-0x2fa+0x10ef+-0xdf5],_0x5a3a0f[0x1207+-0x8*0xb1+-0xc7e],_0x5a3a0f[0x1*-0x56d+0x1fde+-0x1a6f]);case'rgba':return _0x5a3a0f instanceof ie?_0x5a3a0f['clone']():new ie(_0x5a3a0f[0x213a*-0x1+-0x1020+0x315a],_0x5a3a0f[-0x2*0x111b+-0x117d*0x2+0x4531],_0x5a3a0f[-0x1*-0x1154+-0x1ef1+0xd9f],_0x5a3a0f[0x6f5*0x1+-0x2*0x50+-0x2*0x329]);case'vec2':return _0x5a3a0f instanceof J?_0x5a3a0f['clone']():new J(_0x5a3a0f[-0x4bd*-0x1+-0x14e7+-0x102a*-0x1],_0x5a3a0f[0x25c5+-0x1192+-0x2*0xa19]);case'vec3':return _0x5a3a0f instanceof I?_0x5a3a0f['clone']():new I(_0x5a3a0f[-0x19c6*-0x1+0x1abf*-0x1+-0x1*-0xf9],_0x5a3a0f[-0x16f4*-0x1+-0x208f*0x1+-0xa*-0xf6],_0x5a3a0f[0x18b9+-0x1450+-0x467]);case'vec4':return _0x5a3a0f instanceof ae?_0x5a3a0f['clone']():new ae(_0x5a3a0f[-0x22d6+0x3*-0x2bd+-0x2b0d*-0x1],_0x5a3a0f[-0x9*0x38b+0x574*-0x7+-0x1d8*-0x26],_0x5a3a0f[-0x9f2+-0x1fc4+0x29b8],_0x5a3a0f[0x303*0x4+-0xeeb+0x171*0x2]);case'boolean':case'number':case'string':return _0x5a3a0f;case'entity':return _0x5a3a0f;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0xb17f32);}}const qy=0x1e89+0x1*-0x1e9+-0x1ca0,Uf=0x3f*0x5b+-0x326*-0x1+-0x198a,Bf=-0x52*0x35+-0x13a4+-0x1250*-0x2;class CD{constructor(){this['_left']=(-0x142b+-0x6*-0x40c+0x4*-0x107)/(-0x1196+-0xcb0+0x1e46),this['_right']=-(0x2450+0x1110+-0x1*0x355f)/(-0x1844*-0x1+0x23f7+-0x3c3b),this['_len']=0x1*0x1c45+0x731*-0x1+0x1514*-0x1,this['_recip']=-0x565*0x1+0x194+-0x1*-0x3d1,this['_p0']=-0x2*0x9fe+-0x255d*0x1+0x3959,this['_p1']=0x20b*0x1+-0x4c0+0x2b5,this['_t']=0x26c+-0x6ef+0x483,this['_hermite']={'valid':!(0x183b+-0xd06*-0x1+0x20*-0x12a),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x1648ab,_0x2db14e){if(_0x1648ab<this['_left']||_0x1648ab>=this['_right']){const _0x4effda=_0x2db14e['length'];if(!_0x4effda)this['_left']=-(0xade*0x2+-0x14de+-0xdd)/(-0x908+-0x31c*-0x5+-0x684),this['_right']=(0x18*0x174+0x308*-0x2+-0x127*0x19)/(0xd27*-0x2+-0x1c9*0x10+-0x2*-0x1b6f),this['_len']=0x906+0x5ff*-0x2+-0x17c*-0x2,this['_recip']=-0x253a+0x1*0x2215+-0x23*-0x17,this['_p0']=this['_p1']=0x170b+0x119*-0x3+-0x13c0;else{if(_0x1648ab<_0x2db14e[-0x182c+0x1fdc*-0x1+-0x3808*-0x1])this['_left']=-(0xab4+0x1*0x117b+0xe17*-0x2)/(-0xca*0x1d+0x22ef+-0xc0d*0x1),this['_right']=_0x2db14e[0x1*0xbda+0x1*0x1a9b+-0x7b1*0x5],this['_len']=0xdf1+-0x8db+-0x3e*0x15,this['_recip']=-0x154d+-0x1971+0x2ebe,this['_p0']=this['_p1']=-0x211c+0x44d+0x1ccf;else{if(_0x1648ab>=_0x2db14e[_0x4effda-(-0x6b*-0xd+0x6*0x37e+-0x1a62)])this['_left']=_0x2db14e[_0x4effda-(-0x1dba+-0x5*-0x7c9+-0xb*0xd6)],this['_right']=(0x2145+0x1*0x132b+-0x346f)/(-0x1fde*-0x1+-0x8ae*-0x1+-0x288c),this['_len']=-0x5ca+0xe82+-0xf8*0x9,this['_recip']=0xdc4+-0x262f+0x186b,this['_p0']=this['_p1']=_0x4effda-(0xc1c+-0x7f1*0x3+0xbb8);else{const _0x44f03f=this['_findKey'](_0x1648ab,_0x2db14e);this['_left']=_0x2db14e[_0x44f03f],this['_right']=_0x2db14e[_0x44f03f+(-0x966+-0x10ae+-0x1*-0x1a15)],this['_len']=this['_right']-this['_left'];const _0x4c33ca=(-0x2325+0x1*-0x4d5+-0x5*-0x7ff)/this['_len'];this['_recip']=isFinite(_0x4c33ca)?_0x4c33ca:0x18d*-0xa+0x20*-0x9d+-0x2322*-0x1,this['_p0']=_0x44f03f,this['_p1']=_0x44f03f+(-0x172a+0x1b7+0x1574);}}}}this['_t']=this['_recip']===0x140f+-0xdf6+0xdf*-0x7?0x1901+0x342+-0x1c43:(_0x1648ab-this['_left'])*this['_recip'],this['_hermite']['valid']=!(-0x20*-0x16+-0x1*0x1b9d+0x6*0x425);}['_findKey'](_0x51cd4b,_0x82cc19){let _0x3dc8a2=-0x150+-0x3*-0x6db+-0x1341;for(;_0x51cd4b>=_0x82cc19[_0x3dc8a2+(-0xca5+0x3*-0xad7+-0x2d2b*-0x1)];)_0x3dc8a2++;return _0x3dc8a2;}['eval'](_0x6335c9,_0x143f0f,_0x58ad8f){const _0x20f5a0=_0x58ad8f['_data'],_0x4ff601=_0x58ad8f['_component'+'s'],_0x321880=this['_p0']*_0x4ff601;if(_0x143f0f===qy){for(let _0x2e0fbc=0x142f+0x1495+-0x28c4;_0x2e0fbc<_0x4ff601;++_0x2e0fbc)_0x6335c9[_0x2e0fbc]=_0x20f5a0[_0x321880+_0x2e0fbc];}else{const _0x363802=this['_t'],_0x20a60b=this['_p1']*_0x4ff601;switch(_0x143f0f){case Uf:for(let _0x354af6=0x15d6+0x4bd*0x5+-0x2d87;_0x354af6<_0x4ff601;++_0x354af6)_0x6335c9[_0x354af6]=Y['lerp'](_0x20f5a0[_0x321880+_0x354af6],_0x20f5a0[_0x20a60b+_0x354af6],_0x363802);break;case Bf:{const _0x293091=this['_hermite'];if(!_0x293091['valid']){const _0x25809d=_0x363802*_0x363802,_0x1e511f=_0x363802+_0x363802,_0x2a6c31=-0x202a+0x113f+-0x5*-0x2fc-_0x363802,_0x4f4027=_0x2a6c31*_0x2a6c31;_0x293091['valid']=!(-0x4c*-0x74+0x1*0x3b+-0x22ab),_0x293091['p0']=(0x1*0x1646+0x25*0xb7+-0x1*0x30b8+_0x1e511f)*_0x4f4027,_0x293091['m0']=_0x363802*_0x4f4027,_0x293091['p1']=_0x25809d*(0x423+-0xadf*-0x3+-0x24bd-_0x1e511f),_0x293091['m1']=_0x25809d*(_0x363802-(0x1ea2+-0x973+-0x152e));}const _0x20eb0b=(this['_p0']*(0x875+0xc4c*-0x2+0x1026)+(0x3a4+0x2019+-0x23bc))*_0x4ff601,_0x4b7869=(this['_p0']*(-0x597*-0x3+-0x1fd1+0xf0f)+(0xa46+-0x991+-0xb3))*_0x4ff601,_0x53a24f=(this['_p1']*(-0x1462+0xa47+0xa1e)+(-0x589+0x0+-0x2c5*-0x2))*_0x4ff601,_0xe31aa8=(this['_p1']*(-0x338*-0x8+-0x2a1*-0x3+0x10d0*-0x2)+(-0xac9+0x1412+-0x949*0x1))*_0x4ff601;for(let _0x3c23c0=-0x2252+-0x2012*0x1+0x25f*0x1c;_0x3c23c0<_0x4ff601;++_0x3c23c0)_0x6335c9[_0x3c23c0]=_0x293091['p0']*_0x20f5a0[_0x20eb0b+_0x3c23c0]+_0x293091['m0']*_0x20f5a0[_0x4b7869+_0x3c23c0]*this['_len']+_0x293091['p1']*_0x20f5a0[_0x53a24f+_0x3c23c0]+_0x293091['m1']*_0x20f5a0[_0xe31aa8+_0x3c23c0]*this['_len'];break;}}}}}class X_{constructor(_0x2744d8){this['_name']=_0x2744d8['name']+'Snapshot',this['_time']=-(-0x637+-0x25b+0x893),this['_cache']=[],this['_results']=[];for(let _0x52e730=0x117*-0x16+-0x8ea+-0x4*-0x839;_0x52e730<_0x2744d8['_inputs']['length'];++_0x52e730)this['_cache'][_0x52e730]=new CD();const _0x596bd9=_0x2744d8['_curves'],_0x5aa084=_0x2744d8['_outputs'];for(let _0x1a347f=0x1794+0x1*0x118d+-0x1*0x2921;_0x1a347f<_0x596bd9['length'];++_0x1a347f){const _0x38e91f=_0x596bd9[_0x1a347f],_0x1e8825=_0x5aa084[_0x38e91f['_output']],_0x4ed587=[];for(let _0x545ab6=-0x1835+-0x24ab+0xf38*0x4;_0x545ab6<_0x1e8825['_component'+'s'];++_0x545ab6)_0x4ed587[_0x545ab6]=0x402+0x1*0x10d+-0x50f;this['_results'][_0x1a347f]=_0x4ed587;}}}const Ao=class Ao{constructor(_0x447011,_0x595215,_0x3bf436,_0x3ff1dd,_0xdbb30b,_0x4ea56f){this['_name']=_0x447011['name'],this['_track']=_0x447011,this['_snapshot']=new X_(_0x447011),this['_playing']=_0x3ff1dd,this['_time']=_0x595215,this['_speed']=_0x3bf436,this['_loop']=_0xdbb30b,this['_blendWeig'+'ht']=0x18a2+0x3*-0x92f+0x2ec,this['_blendOrde'+'r']=0x206d+-0x2496+0x1*0x429,this['_eventHand'+'ler']=_0x4ea56f,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x3119f0){this['_name']=_0x3119f0;}get['name'](){return this['_name'];}set['track'](_0x3fe524){this['_track']=_0x3fe524,this['_snapshot']=new X_(_0x3fe524);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x49178f){this['_time']=_0x49178f,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x1e003d){const _0xf56542=Math['sign'](_0x1e003d)!==Math['sign'](this['_speed']);this['_speed']=_0x1e003d,_0xf56542&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x3a2a55){this['_loop']=_0x3a2a55;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x47553d){this['_blendWeig'+'ht']=_0x47553d;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x4ade90){this['_blendOrde'+'r']=_0x4ade90;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x3afb62){this['_eventCurs'+'or']=_0x3afb62;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0xe*0x26+0xf9c+-0xd88:this['_track']['events']['length']-(0x7*0x567+-0xcf4+-0x18dc);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0x65d+-0x1fd*0xd+-0x4*-0x4df;}['nextEventA'+'headOfTime'](_0x15be37){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x15be37:this['nextEvent']['time']>=_0x15be37:!(0x1*0x1389+0x1*0x1729+-0x3*0xe3b);}['nextEventB'+'ehindTime'](_0x117630){return this['nextEvent']?_0x117630===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x117630:this['nextEvent']['time']<=_0x117630:this['isReverse']?this['nextEvent']['time']>_0x117630:this['nextEvent']['time']<_0x117630:!(-0x467*-0x2+0x8*-0x315+0x549*0x3);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0xca8+-0x1*-0x983+-0xd*-0x3e):0xfa*-0x5+0x1b*0x1a+0x2*0x112;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(-0x14ee*-0x1+-0x16bb+0x1ce):0x235a+0x30a*0x8+-0x3ba9,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=0x21f6+0x20ee+-0x42e4:this['_eventCurs'+'or']<0xa42+-0x1*-0x1e89+-0x28cb&&(this['_eventCurs'+'or']=this['track']['events']['length']-(0x1*0x106+0xb3f+0x13a*-0xa));}['clipFrameT'+'ime'](_0x534ea7){const _0x10e27f=Ao['eventFrame'];_0x10e27f['start']=0x175*0xb+-0x1bbe+-0x1*-0xbb7,_0x10e27f['end']=_0x534ea7,_0x10e27f['residual']=0x2660+0x23ec+-0x1*0x4a4c,this['isReverse']?_0x534ea7<-0x22f8*-0x1+-0x1a48*-0x1+0x8*-0x7a8&&(_0x10e27f['start']=this['track']['duration'],_0x10e27f['end']=0x16*0x35+0x3d3+-0x861,_0x10e27f['residual']=_0x534ea7+this['track']['duration']):_0x534ea7>this['track']['duration']&&(_0x10e27f['start']=0xf6e+-0x1b86+0xc18,_0x10e27f['end']=this['track']['duration'],_0x10e27f['residual']=_0x534ea7-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x21e8ca,_0x3e8d22){return this['nextEventA'+'headOfTime'](_0x21e8ca)&&this['nextEventB'+'ehindTime'](_0x3e8d22)?(this['fireNextEv'+'ent'](),!(0x18e3+-0x1*0x1704+-0x1df)):!(0xe0f+-0xbd8+-0x236);}['activeEven'+'tsForFrame'](_0x3497ab,_0x491b97){const _0x5a1dd6=Ao['eventFrame'];this['clipFrameT'+'ime'](_0x491b97);const _0x2fe077=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x3497ab,_0x5a1dd6['end'])&&_0x2fe077!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x5a1dd6['residual'])>0x3*-0xb5c+0x67*0x25+0x1331&&this['activeEven'+'tsForFrame'](_0x5a1dd6['start'],_0x5a1dd6['residual']);}['progressFo'+'rTime'](_0x278287){return _0x278287*this['_speed']/this['_track']['duration'];}['_update'](_0x2a7d16){if(this['_playing']){let _0x176d50=this['_time'];const _0xb526a=this['_track']['duration'],_0x4ae6b2=this['_speed'],_0x3cc4c9=this['_loop'];this['_track']['events']['length']>0x89d*-0x3+0x4*0x49b+0x3*0x279&&_0xb526a>0x228a+0x95a+-0x4*0xaf9&&this['activeEven'+'tsForFrame'](_0x176d50,_0x176d50+_0x4ae6b2*_0x2a7d16),_0x176d50+=_0x4ae6b2*_0x2a7d16,_0x4ae6b2>=0x2666+0x16e9+0x2b*-0x16d?_0x176d50>_0xb526a&&(_0x3cc4c9?_0x176d50=_0x176d50%_0xb526a||0x179f+0x528+-0x1cc7:(_0x176d50=this['_track']['duration'],this['pause']())):_0x176d50<0x1bd3+-0x1*-0x673+-0x2246&&(_0x3cc4c9?_0x176d50=_0xb526a+(_0x176d50%_0xb526a||0x1*-0x1462+0x28e+-0x28c*-0x7):(_0x176d50=-0x1668+-0x34*-0x93+-0x774,this['pause']())),this['_time']=_0x176d50;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(-0xca*-0x19+0x1be7+0x59*-0x89),this['_time']=-0x1d31+-0x14*-0x1d5+-0x773;}['stop'](){this['_playing']=!(0x23e3+-0x14ea*0x1+0x1*-0xef8),this['_time']=0x1*0x1c4b+0x1d1a+-0x3965*0x1;}['pause'](){this['_playing']=!(-0x23*0x3f+-0x7c5*0x3+-0x2e7*-0xb);}['resume'](){this['_playing']=!(-0x1cae+0x2053+-0x3a5);}['reset'](){this['_time']=-0x1*-0x1f8f+0x140*-0xf+-0xccf;}};h(Ao,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let tc=Ao;const jy='NONE',PD='PREV_STATE',MD='NEXT_STATE',ID='PREV_STATE'+'_NEXT_STAT'+'E',DD='NEXT_STATE'+'_PREV_STAT'+'E',LD='GREATER_TH'+'AN',RD='LESS_THAN',OD='GREATER_TH'+'AN_EQUAL_T'+'O',FD='LESS_THAN_'+'EQUAL_TO',ND='EQUAL_TO',kD='NOT_EQUAL_'+'TO',q_='INTEGER',j_='FLOAT',Y_='BOOLEAN',yh='TRIGGER',UD='1D',BD='2D_DIRECTI'+'ONAL',zD='2D_CARTESI'+'AN',VD='DIRECT',no='START',zf='END',Rr='ANY',sc=[no,zf,Rr],Yy='OVERWRITE',GD='ADDITIVE';class Nt{static['dot'](_0x57fe55,_0x49ae1d){const _0x953486=_0x57fe55['length'];let _0x37576a=-0x14d6+0x2af*0x1+0x1*0x1227;for(let _0x39b1da=-0xfa*-0x28+-0xb22+-0x1bee;_0x39b1da<_0x953486;++_0x39b1da)_0x37576a+=_0x57fe55[_0x39b1da]*_0x49ae1d[_0x39b1da];return _0x37576a;}static['normalize'](_0x13dc8d){let _0x59935d=Nt['dot'](_0x13dc8d,_0x13dc8d);if(_0x59935d>-0x1f1*0xd+-0x2c5*-0xb+-0x1*0x53a){_0x59935d=(-0x152+-0x1357+0x14aa)/Math['sqrt'](_0x59935d);const _0x31a321=_0x13dc8d['length'];for(let _0x220863=-0x9f0+-0x255d+0x2f4d;_0x220863<_0x31a321;++_0x220863)_0x13dc8d[_0x220863]*=_0x59935d;}}static['set'](_0x3571f9,_0x5a1285,_0x51af80){const _0xe723cc=_0x3571f9['length'];if(_0x51af80==='quaternion'){let _0xbfe706=Nt['dot'](_0x5a1285,_0x5a1285);_0xbfe706>-0x11*0xbf+-0x1e5*-0x2+-0x63*-0x17&&(_0xbfe706=(-0x1*-0x1971+-0x194d+-0x23)/Math['sqrt'](_0xbfe706));for(let _0x1367c3=0x89b*-0x2+0x1f0+-0x1*-0xf46;_0x1367c3<_0xe723cc;++_0x1367c3)_0x3571f9[_0x1367c3]=_0x5a1285[_0x1367c3]*_0xbfe706;}else{for(let _0x2c8702=-0x1*-0x191f+-0x75a*0x1+-0x11c5;_0x2c8702<_0xe723cc;++_0x2c8702)_0x3571f9[_0x2c8702]=_0x5a1285[_0x2c8702];}}static['blendVec'](_0x346e95,_0xbe47ae,_0x5068a4,_0x5542b7){const _0x2893ba=_0x5542b7?0x1ba4+0xa*0x248+0x267*-0x15:0x74*-0x2+-0x107*0x1e+0x1*0x1fbb-_0x5068a4,_0x492eba=_0x346e95['length'];for(let _0x8b0176=-0x2456+0x1*-0x18e6+0x3d3c;_0x8b0176<_0x492eba;++_0x8b0176)_0x346e95[_0x8b0176]=_0x346e95[_0x8b0176]*_0x2893ba+_0xbe47ae[_0x8b0176]*_0x5068a4;}static['blendQuat'](_0x478841,_0x263750,_0x5377bb,_0xa73d58){const _0x778a29=_0x478841['length'],_0x28a426=_0xa73d58?0x3b3+0x1b88+0x476*-0x7:0x1f85+-0x1302+-0xc82-_0x5377bb;Nt['dot'](_0x478841,_0x263750)<-0x172e+-0x5*0x79f+0x3d49&&(_0x5377bb=-_0x5377bb);for(let _0x8b1ad8=-0x285+-0x2450+-0x1*-0x26d5;_0x8b1ad8<_0x778a29;++_0x8b1ad8)_0x478841[_0x8b1ad8]=_0x478841[_0x8b1ad8]*_0x28a426+_0x263750[_0x8b1ad8]*_0x5377bb;_0xa73d58||Nt['normalize'](_0x478841);}static['blend'](_0x4fe49a,_0x4ae3dd,_0x355ffe,_0x203ad8,_0x316615){_0x203ad8==='quaternion'?Nt['blendQuat'](_0x4fe49a,_0x4ae3dd,_0x355ffe,_0x316615):Nt['blendVec'](_0x4fe49a,_0x4ae3dd,_0x355ffe,_0x316615);}static['stableSort'](_0x1f390a,_0x1bf53d){const _0x679c9c=_0x1f390a['length'];for(let _0x95880=0x2ba*-0xd+0x11d5+-0x5df*-0x3;_0x95880<_0x679c9c-(-0x3*0xcdd+0x5*0x5b0+0x68*0x19);++_0x95880)for(let _0x4d0214=_0x95880+(0xd*0xbb+0x2*0x28d+0x4*-0x3a6);_0x4d0214<_0x679c9c;++_0x4d0214)if(_0x1bf53d(_0x1f390a[_0x4d0214],_0x1f390a[_0x95880])){const _0x56bac7=_0x1f390a[_0x95880];_0x1f390a[_0x95880]=_0x1f390a[_0x4d0214],_0x1f390a[_0x4d0214]=_0x56bac7;}}}const tt=class tt{constructor(_0x3351dd,_0x17a83c){this['_component']=_0x3351dd,this['mask']=new Int8Array(_0x3351dd['layers']['length']),this['weights']=new Float32Array(_0x3351dd['layers']['length']),this['totalWeigh'+'t']=0x1c9b+-0x219b*0x1+0x500,this['counter']=0x5a1*-0x1+-0x1*-0x144e+-0xead,this['layerCount'+'er']=0x19ae+0x22cd+-0x1429*0x3,this['valueType']=_0x17a83c,this['dirty']=!(0x143d+0xe2e+-0x3*0xb79),this['value']=_0x17a83c===tt['TYPE_QUAT']?[-0x3d3*-0x5+0x3d3*0x5+-0xb2*0x37,-0xa*0x1f3+0x23db+0x105d*-0x1,-0x109*-0x19+-0x757+-0x62e*0x3,-0x141d+-0x15ec+0x1505*0x2]:[-0x17fa+-0x163*-0x1b+-0xd77,0xba9+-0x16f8+-0x3c5*-0x3,-0x12ac*0x2+-0x174f+0x3ca7],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x1e6b66){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===0x5b*-0x5a+0x96*-0x6+-0x2382*-0x1||!this['mask'][_0x1e6b66]?0x3df*-0x5+-0x1*0x5d5+0x1930:this['_normalize'+'Weights']?this['weights'][_0x1e6b66]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x1e6b66],-0x364+0x1ef8+-0x1b94,0x1*0xd62+-0xc7d+-0xe4);}['_layerBlen'+'dType'](_0x22bd46){return this['_component']['layers'][_0x22bd46]['blendType'];}['setMask'](_0x307132,_0x4fa40c){this['mask'][_0x307132]=_0x4fa40c,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x307132]['blendType']===Yy&&(this['mask']=this['mask']['fill'](-0x31*-0x20+-0x1513+-0x59*-0x2b,0x2133*-0x1+-0x4ee*-0x1+-0x1*-0x1c45,_0x307132)),this['dirty']=!(-0x542+0x10f8+-0xbb6));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=0x184b+-0x1*0x206b+0x68*0x14;for(let _0x4d20da=0x23ef+-0x16a1+-0xd4e;_0x4d20da<this['weights']['length'];_0x4d20da++)this['weights'][_0x4d20da]=this['_component']['layers'][_0x4d20da]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x4d20da]*this['weights'][_0x4d20da];this['dirty']=!(-0x6c*-0x1d+-0x973+-0x2c8);}['updateValu'+'e'](_0x28dcf0,_0x3bec98){if(this['counter']===-0x1e13+-0x4*0x904+0x4223&&(Nt['set'](this['value'],tt['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Nt['blend'](this['value'],this['baseValue'],0x424+-0xe*-0x2a1+-0x28f1,this['valueType'])),!(!this['mask'][_0x28dcf0]||this['getWeight'](_0x28dcf0)===0x7*0x2eb+-0x61+-0x140c)){if(this['_layerBlen'+'dType'](_0x28dcf0)===GD&&!this['_normalize'+'Weights']){if(this['valueType']===tt['TYPE_QUAT']){const _0xee0dda=tt['q1']['set'](this['value'][-0xff1+-0x13b1+0x23a2],this['value'][-0x5e2+0x23ce+-0x6f*0x45],this['value'][0x7f*0x32+0x15fb+-0x2ec7],this['value'][0x6*-0x65f+-0x249e+0x4adb*0x1]),_0x404a46=tt['q2']['set'](this['baseValue'][0x3*0x7bb+-0x1ac0+-0x38f*-0x1],this['baseValue'][-0x109d+-0x1c71+0x2d0f],this['baseValue'][-0x1b40+-0x97a+0x24bc],this['baseValue'][0x1*0x1f2+-0x2596+-0x1*-0x23a7]),_0x229429=tt['q3']['set'](_0x3bec98[-0x1e22*0x1+-0x4*-0x466+0xc8a],_0x3bec98[0x1faf*-0x1+-0x79*-0xd+0x198b*0x1],_0x3bec98[0x252a+0x10*-0x267+0x2*0xa4],_0x3bec98[-0xe77+0x151f+-0x6a5]),_0x399c79=_0x404a46['invert']()['mul'](_0x229429);_0x399c79['slerp'](le['IDENTITY'],_0x399c79,this['getWeight'](_0x28dcf0)),_0xee0dda['mul'](_0x399c79),tt['quatArr'][0x20e8+0x184f+-0x3937]=_0xee0dda['x'],tt['quatArr'][0x322*0x1+-0x2*-0x8f2+-0x1505*0x1]=_0xee0dda['y'],tt['quatArr'][-0x2197+0x4*-0x203+0x29a5]=_0xee0dda['z'],tt['quatArr'][-0x1608+-0x2497+-0x316*-0x13]=_0xee0dda['w'],Nt['set'](this['value'],tt['quatArr'],this['valueType']);}else tt['vecArr'][0x2539+0xa*0x26b+-0x3d67]=_0x3bec98[-0x97*0x1c+0x1029*0x1+0x5b]-this['baseValue'][0x2592+0x2*-0x952+-0x12ee],tt['vecArr'][0x2*0x77b+-0xb*-0x200+0x24f5*-0x1]=_0x3bec98[0x39*-0x3c+-0xd1c+0x1b*0xfb]-this['baseValue'][0x186f+-0xb44+-0xa*0x151],tt['vecArr'][0x8cc*0x4+-0x51b*0x5+-0x9a7*0x1]=_0x3bec98[-0x23cc+0x1*-0x907+-0x1f3*-0x17]-this['baseValue'][-0x2*-0xa21+0x9b0+0xef8*-0x2],Nt['blend'](this['value'],tt['vecArr'],this['getWeight'](_0x28dcf0),this['valueType'],!(0x1ee0+0x16fe+0xe*-0x3d9));}else Nt['blend'](this['value'],_0x3bec98,this['getWeight'](_0x28dcf0),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(tt,'TYPE_QUAT','quaternion'),h(tt,'TYPE_VEC3','vector3'),h(tt,'q1',new le()),h(tt,'q2',new le()),h(tt,'q3',new le()),h(tt,'quatArr',[-0x356+-0x1b57*-0x1+-0x1801,0x5*0x1c6+-0x1*-0x59+-0x937,0x3df+0x7*0x40f+-0x2048,-0x2207+-0x2167*-0x1+0xa1]),h(tt,'vecArr',[-0x6*0x125+0x8fd+-0x1*0x21f,0x1774+0x4f8+0x71b*-0x4,-0x164a+-0x1*0x2325+-0x57*-0xa9]),h(tt,'IDENTITY_Q'+'UAT_ARR',[0x1f*-0x1f+0x341+0x80,-0x101*-0x7+0x399+-0xaa0,0x961+-0x2*0xb51+-0x9*-0x179,-0x133*-0x13+0x1d3c+0x4*-0xd01]);let vo=tt;class Ky{constructor(_0xd9cd70){this['_binder']=_0xd9cd70,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x5d2fcf){const _0x17abed=this['_targets'],_0x101025=this['_binder'],_0x2ebe1b=_0x5d2fcf['track']['curves'],_0x4051ff=_0x5d2fcf['snapshot'],_0x2937eb=[],_0x44e292=[];for(let _0x5b30ba=-0x2b*0xd3+-0x195e+0x3ccf;_0x5b30ba<_0x2ebe1b['length'];++_0x5b30ba){const _0x18eb31=_0x2ebe1b[_0x5b30ba]['paths'];for(let _0x183502=0x4*-0x10a+-0x1*-0x590+-0x168;_0x183502<_0x18eb31['length'];++_0x183502){const _0x5daa7a=_0x18eb31[_0x183502],_0x2f609b=_0x101025['resolve'](_0x5daa7a);let _0x530b07=_0x17abed[_0x2f609b&&_0x2f609b['targetPath']||null];if(!_0x530b07&&_0x2f609b){_0x530b07={'target':_0x2f609b,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x33d9c1=-0x427*0x5+0x2*-0x92f+0x2721;_0x33d9c1<_0x530b07['target']['components'];++_0x33d9c1)_0x530b07['value']['push'](0xb*0x56+0x555+-0x907*0x1);if(_0x17abed[_0x2f609b['targetPath']]=_0x530b07,_0x101025['animCompon'+'ent']){if(!_0x101025['animCompon'+'ent']['targets'][_0x2f609b['targetPath']]){let _0x29af8;_0x2f609b['targetPath']['substring'](_0x2f609b['targetPath']['length']-(-0x234d+-0x16f0+0x3a4a))==='localRotat'+'ion'?_0x29af8=vo['TYPE_QUAT']:_0x29af8=vo['TYPE_VEC3'],_0x101025['animCompon'+'ent']['targets'][_0x2f609b['targetPath']]=new vo(_0x101025['animCompon'+'ent'],_0x29af8);}_0x101025['animCompon'+'ent']['targets'][_0x2f609b['targetPath']]['layerCount'+'er']++,_0x101025['animCompon'+'ent']['targets'][_0x2f609b['targetPath']]['setMask'](_0x101025['layerIndex'],0x268d+-0x6*0x158+-0x1e7c);}}_0x530b07&&(_0x530b07['curves']++,_0x2937eb['push'](_0x4051ff['_results'][_0x5b30ba]),_0x44e292['push'](_0x530b07));}}this['_clips']['push'](_0x5d2fcf),this['_inputs']['push'](_0x2937eb),this['_outputs']['push'](_0x44e292);}['removeClip'](_0x23dd12){const _0x14d2dd=this['_targets'],_0xf878d8=this['_binder'],_0x3355c9=this['_clips'],_0x9c34d=_0x3355c9[_0x23dd12]['track']['curves'];for(let _0x1f92b6=-0x1*-0x2001+-0x1*0x543+0x3*-0x8ea;_0x1f92b6<_0x9c34d['length'];++_0x1f92b6){const _0xdfad2c=_0x9c34d[_0x1f92b6]['paths'];for(let _0x3bfb58=-0x2a7*-0x1+0x1133+-0x13da;_0x3bfb58<_0xdfad2c['length'];++_0x3bfb58){const _0x5dcf77=_0xdfad2c[_0x3bfb58],_0x43cd93=this['_binder']['resolve'](_0x5dcf77);_0x43cd93&&(_0x43cd93['curves']--,_0x43cd93['curves']===-0x1062+-0xfde+-0x10*-0x204&&(_0xf878d8['unresolve'](_0x5dcf77),delete _0x14d2dd[_0x43cd93['targetPath']],_0xf878d8['animCompon'+'ent']&&_0xf878d8['animCompon'+'ent']['targets'][_0x43cd93['targetPath']]['layerCount'+'er']--));}}_0x3355c9['splice'](_0x23dd12,0xbdd*-0x1+0x1b27+-0xf49*0x1),this['_inputs']['splice'](_0x23dd12,-0x16b2+-0x1545+0x8*0x57f),this['_outputs']['splice'](_0x23dd12,-0x18e3+-0xa10+-0x4*-0x8bd);}['removeClip'+'s'](){for(;this['_clips']['length']>-0xe*-0x2c1+0xe2d*-0x2+-0xa34;)this['removeClip'](0x1c46+-0x1b1f+-0x1*0x127);}['updateClip'+'Track'](_0x4c716b,_0x434669){this['_clips']['forEach'](_0x7eb04=>{_0x7eb04['name']['includes'](_0x4c716b)&&(_0x7eb04['track']=_0x434669);}),this['rebind']();}['findClip'](_0x39d2f3){const _0x2f0ab2=this['_clips'];for(let _0x13e8bc=-0x3*0x5bd+0x7b9+0x97e;_0x13e8bc<_0x2f0ab2['length'];++_0x13e8bc){const _0x2628a4=_0x2f0ab2[_0x13e8bc];if(_0x2628a4['name']===_0x39d2f3)return _0x2628a4;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x347fd8=[...this['clips']];this['removeClip'+'s'](),_0x347fd8['forEach'](_0x3a0b47=>{this['addClip'](_0x3a0b47);});}['assignMask'](_0x302d58){return this['_binder']['assignMask'](_0x302d58);}['update'](_0x999c2e,_0x445eba=!(0x3*0x977+-0xd6*0x19+-0x77f)){const _0x44a510=this['_clips'],_0x5b14e5=_0x44a510['map']((_0xb2454e,_0x5023fb)=>_0x5023fb);Nt['stableSort'](_0x5b14e5,(_0x17b4c9,_0x18926a)=>_0x44a510[_0x17b4c9]['blendOrder']<_0x44a510[_0x18926a]['blendOrder']);for(let _0x2e586d=-0x2d0+-0x21*-0x109+-0x1f59;_0x2e586d<_0x5b14e5['length'];++_0x2e586d){const _0x478c8d=_0x5b14e5[_0x2e586d],_0x28ea04=_0x44a510[_0x478c8d],_0xdf38da=this['_inputs'][_0x478c8d],_0x1324dd=this['_outputs'][_0x478c8d],_0x317dc0=_0x28ea04['blendWeigh'+'t'];if(_0x317dc0>0x1b*0x2b+0x9be*-0x4+0x2b*0xcd&&_0x28ea04['_update'](_0x999c2e),!_0x445eba)break;let _0x45afb3,_0x3bcf66,_0x45d752;if(_0x317dc0>=-0x11b8+-0x14da+0x2693){for(let _0x2c37d2=0x6b*-0x1d+0x91*-0x40+-0x7*-0x6e9;_0x2c37d2<_0xdf38da['length'];++_0x2c37d2)_0x45afb3=_0xdf38da[_0x2c37d2],_0x3bcf66=_0x1324dd[_0x2c37d2],_0x45d752=_0x3bcf66['value'],Nt['set'](_0x45d752,_0x45afb3,_0x3bcf66['target']['type']),_0x3bcf66['blendCount'+'er']++;}else{if(_0x317dc0>-0xffc+0x1ca3*-0x1+0x1*0x2c9f){for(let _0x2c9380=0x1469+0x1c94+-0x1*0x30fd;_0x2c9380<_0xdf38da['length'];++_0x2c9380)_0x45afb3=_0xdf38da[_0x2c9380],_0x3bcf66=_0x1324dd[_0x2c9380],_0x45d752=_0x3bcf66['value'],_0x3bcf66['blendCount'+'er']===0x1b0f+-0x622+-0x14ed?Nt['set'](_0x45d752,_0x45afb3,_0x3bcf66['target']['type']):Nt['blend'](_0x45d752,_0x45afb3,_0x317dc0,_0x3bcf66['target']['type']),_0x3bcf66['blendCount'+'er']++;}}}const _0x3e3e7c=this['_targets'],_0x3a7194=this['_binder'];for(const _0x40b81c in _0x3e3e7c)if(_0x3e3e7c['hasOwnProp'+'erty'](_0x40b81c)){const _0x3ad3cc=_0x3e3e7c[_0x40b81c];if(_0x3a7194['animCompon'+'ent']&&_0x3ad3cc['target']['isTransfor'+'m']){const _0x4fe9f1=_0x3a7194['animCompon'+'ent']['targets'][_0x40b81c];_0x4fe9f1['counter']===_0x4fe9f1['layerCount'+'er']&&(_0x4fe9f1['counter']=-0x138*-0x17+-0xf87+-0x42b*0x3),_0x4fe9f1['path']||(_0x4fe9f1['path']=_0x40b81c,_0x4fe9f1['baseValue']=_0x3ad3cc['target']['get'](),_0x4fe9f1['setter']=_0x3ad3cc['target']['set']),_0x4fe9f1['updateValu'+'e'](_0x3a7194['layerIndex'],_0x3ad3cc['value']),_0x4fe9f1['counter']++;}else _0x3ad3cc['target']['set'](_0x3ad3cc['value']);_0x3ad3cc['blendCount'+'er']=0x49*-0x71+0x134f*-0x1+0x3388;}this['_binder']['update'](_0x999c2e);}}class Zy{constructor(_0x84d60a){this['_events']=[..._0x84d60a],this['_events']['sort']((_0x4bd4ee,_0x138da0)=>_0x4bd4ee['time']-_0x138da0['time']);}get['events'](){return this['_events'];}}const _c=class _c{constructor(_0x20d864,_0x5bbb6f,_0x5a2649,_0x32ca9b,_0x58193a,_0x279b5e=new Zy([])){this['_name']=_0x20d864,this['_duration']=_0x5bbb6f,this['_inputs']=_0x5a2649,this['_outputs']=_0x32ca9b,this['_curves']=_0x58193a,this['_animEvent'+'s']=_0x279b5e;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x2c7081){this['_animEvent'+'s']=_0x2c7081;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x2eb7f6,_0x2994df){_0x2994df['_time']=_0x2eb7f6;const _0x243317=this['_inputs'],_0x4001b5=this['_outputs'],_0x51bca5=this['_curves'],_0x5b448f=_0x2994df['_cache'],_0x4b92e4=_0x2994df['_results'];for(let _0x605db6=0xce9+-0x871*0x1+-0x478;_0x605db6<_0x243317['length'];++_0x605db6)_0x5b448f[_0x605db6]['update'](_0x2eb7f6,_0x243317[_0x605db6]['_data']);for(let _0x4f0a36=0x1f3d+-0xf0a+0x1033*-0x1;_0x4f0a36<_0x51bca5['length'];++_0x4f0a36){const _0x35ecf6=_0x51bca5[_0x4f0a36],_0x267f4c=_0x4001b5[_0x35ecf6['_output']],_0x297b53=_0x4b92e4[_0x4f0a36];_0x5b448f[_0x35ecf6['_input']]['eval'](_0x297b53,_0x35ecf6['_interpola'+'tion'],_0x267f4c);}}};h(_c,'EMPTY',Object['freeze'](new _c('empty',Number['MAX_VALUE'],[],[],[])));let Gi=_c;class Gr{static['joinPath'](_0x436ff8,_0x1d65b7){_0x1d65b7=_0x1d65b7||'.';const _0x54226d=function(_0x35a6d3){return _0x35a6d3['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x1d65b7,'g'),'\x5c'+_0x1d65b7);};return _0x436ff8['map'](_0x54226d)['join'](_0x1d65b7);}static['splitPath'](_0x9c13d6,_0x3b1ea8){_0x3b1ea8=_0x3b1ea8||'.';const _0x384322=[];let _0x3bfe3d='',_0x3ec27=-0x39c+0x379*0x6+-0x113a;for(;_0x3ec27<_0x9c13d6['length'];){let _0x490128=_0x9c13d6[_0x3ec27++];_0x490128==='\x5c'&&_0x3ec27<_0x9c13d6['length']?(_0x490128=_0x9c13d6[_0x3ec27++],_0x490128==='\x5c'||_0x490128===_0x3b1ea8?_0x3bfe3d+=_0x490128:_0x3bfe3d+='\x5c'+_0x490128):_0x490128===_0x3b1ea8?(_0x384322['push'](_0x3bfe3d),_0x3bfe3d=''):_0x3bfe3d+=_0x490128;}return _0x3bfe3d['length']>0x1*-0x7de+0x1*-0x70f+0x1*0xeed&&_0x384322['push'](_0x3bfe3d),_0x384322;}static['encode'](_0x1fa0da,_0x1b0f23,_0xd4ba7d){return(Array['isArray'](_0x1fa0da)?_0x1fa0da['join']('/'):_0x1fa0da)+'/'+_0x1b0f23+'/'+(Array['isArray'](_0xd4ba7d)?_0xd4ba7d['join']('/'):_0xd4ba7d);}['resolve'](_0x125e68){return null;}['unresolve'](_0x5221c9){}['update'](_0x468e2a){}}class Vf{constructor(_0x1e262d,_0x5767ba,_0x50e983,_0xfd0433){_0x1e262d['set']?(this['_set']=_0x1e262d['set'],this['_get']=_0x1e262d['get']):this['_set']=_0x1e262d,this['_type']=_0x5767ba,this['_component'+'s']=_0x50e983,this['_targetPat'+'h']=_0xfd0433,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0xaa5*0x1+0x237c+0x26*-0xa7))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0xf27+-0x45+-0xed5))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x1*0xa63+-0x1*0x1549+0xaf0))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class rr{constructor(_0x5db86a){h(this,'_isPathInM'+'ask',(_0x17803d,_0x53e5d4)=>{const _0x39a58a=this['_mask'][_0x17803d];if(_0x39a58a){if(_0x39a58a['children']||_0x53e5d4&&_0x39a58a['value']!==!(0x1405+0x2265+-0x3669))return!(-0x19*-0x17b+0xf6*-0x6+-0x13*0x1a5);}else return!(0x119+-0x3*0x202+0x4ee);return!(0xcc5+-0xef8+0x234);});if(this['graph']=_0x5db86a,!_0x5db86a)return;this['_mask']=null;const _0x8f4a49={},_0x1e7346=function(_0x2e6707){_0x8f4a49[_0x2e6707['name']]=_0x2e6707;for(let _0x38fa60=0x149e+-0x112a+-0x374;_0x38fa60<_0x2e6707['children']['length'];++_0x38fa60)_0x1e7346(_0x2e6707['children'][_0x38fa60]);};_0x1e7346(_0x5db86a),this['nodes']=_0x8f4a49,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x336922=function(_0x36f28e){let _0x535647=_0x36f28e;for(;_0x535647&&!(_0x535647 instanceof ot);)_0x535647=_0x535647['parent'];let _0x4d8a42;return _0x535647&&(_0x535647['render']?_0x4d8a42=_0x535647['render']['meshInstan'+'ces']:_0x535647['model']&&(_0x4d8a42=_0x535647['model']['meshInstan'+'ces'])),_0x4d8a42;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x581058){const _0x234cd3=_0x581058['localPosit'+'ion'],_0x385e76=function(_0xe67913){_0x234cd3['set'](..._0xe67913);};return rr['createAnim'+'Target'](_0x385e76,'vector',-0x521*0x4+-0x421*-0x6+-0x43f,_0x581058,'localPosit'+'ion');},'localRotation':function(_0x45ba12){const _0x34b0dd=_0x45ba12['localRotat'+'ion'],_0x210843=function(_0x559807){_0x34b0dd['set'](..._0x559807);};return rr['createAnim'+'Target'](_0x210843,'quaternion',-0x2f*0x25+0x535+0x5*0x52,_0x45ba12,'localRotat'+'ion');},'localScale':function(_0x423755){const _0x3045d7=_0x423755['localScale'],_0x10161f=function(_0x49e6f6){_0x3045d7['set'](..._0x49e6f6);};return rr['createAnim'+'Target'](_0x10161f,'vector',-0x575+0x1d95+0x1*-0x181d,_0x423755,'localScale');},'weight':function(_0x2b4b68,_0x29e3ce){_0x29e3ce['indexOf']('name.')===-0x7d4+0x1062+-0x92*0xf?_0x29e3ce=_0x29e3ce['replace']('name.',''):_0x29e3ce=Number(_0x29e3ce);const _0x40f21b=_0x336922(_0x2b4b68);let _0x250914;if(_0x40f21b){for(let _0x4a1159=0x9b1*0x1+0x11b*0x19+-0x2554;_0x4a1159<_0x40f21b['length'];++_0x4a1159)if(_0x40f21b[_0x4a1159]['node']['name']===_0x2b4b68['name']&&_0x40f21b[_0x4a1159]['morphInsta'+'nce']){const _0x4a11ab=_0x40f21b[_0x4a1159]['morphInsta'+'nce'],_0x4aecd6=_0x3d921e=>{_0x4a11ab['setWeight'](_0x29e3ce,_0x3d921e[0x21ec+-0x20ee+-0xfe]);};_0x250914||(_0x250914=[]),_0x250914['push'](_0x4aecd6);}}if(_0x250914){const _0xabe14d=_0x644072=>{for(let _0x52b100=-0x1*-0x17d5+-0x275*0xb+0x332*0x1;_0x52b100<_0x250914['length'];++_0x52b100)_0x250914[_0x52b100](_0x644072);};return rr['createAnim'+'Target'](_0xabe14d,'number',-0x1*-0x235f+-0x12*-0xe6+-0x338a,_0x2b4b68,'weight.'+_0x29e3ce);}return null;},'materialTexture':(_0x38d4a6,_0x2a9d74)=>{const _0x10fed7=_0x336922(_0x38d4a6);if(_0x10fed7){let _0x534214;for(let _0x3d2430=0x11a2+0x37*0x11+-0x1549;_0x3d2430<_0x10fed7['length'];++_0x3d2430)if(_0x10fed7[_0x3d2430]['node']['name']===_0x38d4a6['name']){_0x534214=_0x10fed7[_0x3d2430];break;}if(_0x534214){const _0xffab0b=_0x52d58a=>{const _0xddf69e=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x52d58a[-0x94*0x37+-0xa7c*-0x2+0xad4]);_0xddf69e&&_0xddf69e['resource']&&_0xddf69e['type']==='texture'&&(_0x534214['material'][_0x2a9d74]=_0xddf69e['resource'],_0x534214['material']['update']());};return rr['createAnim'+'Target'](_0xffab0b,'vector',-0x679+0x1*-0x24fb+-0x7d*-0x59,_0x38d4a6,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x2d0f0b){if(!this['_mask'])return!(-0x1fa3+-0x1ee8+0x3e8b);const _0x47f7d3=[_0x2d0f0b['entityPath'][-0x122*0x13+0x125*-0x7+0x1d89],this['graph']['name']];for(let _0x773b79=-0x1f*0x11b+-0xb83+0x2dc8;_0x773b79<_0x47f7d3['length'];++_0x773b79){let _0x3bd0c2=_0x47f7d3[_0x773b79];if(this['_isPathInM'+'ask'](_0x3bd0c2,_0x2d0f0b['entityPath']['length']===0x1049+0x63d*-0x6+0x1526*0x1))return!(0x556*-0x2+0x1256+-0x1*0x7aa);for(let _0x40667e=0x20*-0x8e+-0x11f9+-0x2*-0x11dd;_0x40667e<_0x2d0f0b['entityPath']['length'];_0x40667e++)if(_0x3bd0c2+='/'+_0x2d0f0b['entityPath'][_0x40667e],this['_isPathInM'+'ask'](_0x3bd0c2,_0x40667e===_0x2d0f0b['entityPath']['length']-(-0x50e+-0x1275+-0xa*-0x25a)))return!(0x97c+-0x16a+-0x409*0x2);}return!(-0x237d+0xa+0x2374);}['findNode'](_0x3afb20){if(!this['_isPathAct'+'ive'](_0x3afb20))return null;let _0x39b2d9;if(this['graph']&&(_0x39b2d9=this['graph']['findByPath'](_0x3afb20['entityPath']),_0x39b2d9||(_0x39b2d9=this['graph']['findByPath'](_0x3afb20['entityPath']['slice'](-0x35e*-0x1+-0xaa*-0x16+-0x11f9)))),!_0x39b2d9){_0x39b2d9=this['nodes'][_0x3afb20['entityPath'][_0x3afb20['entityPath']['length']-(0x22a3+-0xb*-0x20+0x16*-0x1a3)]||''];const _0x372e0c=Gr['encode'](_0x3afb20['entityPath'][_0x3afb20['entityPath']['length']-(-0x1bad+-0x7be+0x236c)]||'','graph',_0x3afb20['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x372e0c]===-0x1b5*-0x15+0x12f7+0x3*-0x1245&&M['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x372e0c+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x372e0c])?this['visitedFal'+'lbackGraph'+'Paths'][_0x372e0c]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x372e0c]=0x79*0x28+0x4*0x5e+0x1*-0x1460;}return _0x39b2d9;}static['createAnim'+'Target'](_0x46b670,_0x4734ea,_0x3412c5,_0x4055df,_0x55c101,_0x5b3bdf){const _0x5680bd=Gr['encode'](_0x4055df['path'],_0x5b3bdf||'entity',_0x55c101);return new Vf(_0x46b670,_0x4734ea,_0x3412c5,_0x5680bd);}['resolve'](_0x212252){const _0x55bba4=Gr['encode'](_0x212252['entityPath'],_0x212252['component'],_0x212252['propertyPa'+'th']);let _0x235101=this['targetCach'+'e'][_0x55bba4];if(_0x235101)return _0x235101;const _0x10ccf9=this['findNode'](_0x212252);if(!_0x10ccf9)return null;const _0xbe935c=this['handlers'][_0x212252['propertyPa'+'th']];return!_0xbe935c||(_0x235101=_0xbe935c(_0x10ccf9),!_0x235101)?null:(this['targetCach'+'e'][_0x55bba4]=_0x235101,this['nodeCounts'][_0x10ccf9['path']]?this['nodeCounts'][_0x10ccf9['path']]++:(this['activeNode'+'s']['push'](_0x10ccf9),this['nodeCounts'][_0x10ccf9['path']]=-0x52d+0x1d32+0x601*-0x4),_0x235101);}['unresolve'](_0xbe1b85){if(_0xbe1b85['component']!=='graph')return;const _0x357cbd=this['nodes'][_0xbe1b85['entityPath'][_0xbe1b85['entityPath']['length']-(0x10*-0x1d+-0x80*0x33+0x1b51)]||''];if(this['nodeCounts'][_0x357cbd['path']]--,this['nodeCounts'][_0x357cbd['path']]===-0xf28+0xafa+0x42e){const _0xa02ece=this['activeNode'+'s'],_0x28b594=_0xa02ece['indexOf'](_0x357cbd['node']),_0x45bc19=_0xa02ece['length'];_0x28b594<_0x45bc19-(0x220e+-0x2368+0x15b)&&(_0xa02ece[_0x28b594]=_0xa02ece[_0x45bc19-(0x1d43+0xa61*0x1+0x1*-0x27a3)]),_0xa02ece['pop']();}}['update'](_0x391247){const _0x26faa8=this['activeNode'+'s'];for(let _0x9d13d=-0x1ca0+0x17e2+-0x2*-0x25f;_0x9d13d<_0x26faa8['length'];++_0x9d13d)_0x26faa8[_0x9d13d]['_dirtifyLo'+'cal']();}['assignMask'](_0x4c5d95){return _0x4c5d95!==this['_mask']?(this['_mask']=_0x4c5d95,!(0x178c+-0x2272*0x1+0xae6)):!(-0x36*0x73+0x503*-0x1+0x1d46);}}class Qy extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(0x1*0x23f2+0x109a+0x2*-0x1a46)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',0x167*-0x5+-0x559+0xc5c),h(this,'blending',!(-0x10*-0x1d9+-0xa2*0x2f+0x2f)),h(this,'blendSpeed',-0x16e8+-0x1a59+-0x106b*-0x3),h(this,'activate',!(0x2232+-0x690+-0x1ba2)),h(this,'speed',0x177d+-0x14e9+0x1*-0x293);}set['animations'](_0x1ce4a3){this['_animation'+'s']=_0x1ce4a3,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x58df99){const _0x3a348a=this['_assets'];if(_0x3a348a&&_0x3a348a['length']){for(let _0x56a11f=-0xdd*0x1+-0x1801+0x1*0x18de;_0x56a11f<_0x3a348a['length'];_0x56a11f++)if(_0x3a348a[_0x56a11f]){const _0x424508=this['system']['app']['assets']['get'](_0x3a348a[_0x56a11f]);if(_0x424508){_0x424508['off']('change',this['onAssetCha'+'nged'],this),_0x424508['off']('remove',this['onAssetRem'+'oved'],this);const _0x1507ab=this['animations'+'Index'][_0x424508['id']];this['currAnim']===_0x1507ab&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x1507ab],delete this['animations'+'Index'][_0x424508['id']];}}}this['_assets']=_0x58df99;const _0x568376=_0x58df99['map'](_0x54dd09=>_0x54dd09 instanceof me?_0x54dd09['id']:_0x54dd09);this['loadAnimat'+'ionAssets'](_0x568376);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x5915d4){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x5915d4,this['skeleton']['addTime'](-0x816+-0x1f5c+0x99*0x42),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x248f8d=this['animEvalua'+'tor']['clips'];for(let _0x326bb6=-0x20b7+-0x1*-0x801+0x18b6;_0x326bb6<_0x248f8d['length'];++_0x326bb6)_0x248f8d[_0x326bb6]['time']=_0x5915d4;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x476063=this['animEvalua'+'tor']['clips'];if(_0x476063['length']>0x2*0xc72+0x1602+-0x2*0x1773)return _0x476063[_0x476063['length']-(0xd37+-0x30d+0x33*-0x33)]['time'];}return 0x1bc6+-0x5ab*0x2+-0x1070;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(M['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),0xdbd+-0x1606+0x849);}set['loop'](_0x4515ef){if(this['_loop']=_0x4515ef,this['skeleton']&&(this['skeleton']['looping']=_0x4515ef),this['animEvalua'+'tor']){for(let _0x4825e7=-0x5*0x265+-0x1*0x637+0x610*0x3;_0x4825e7<this['animEvalua'+'tor']['clips']['length'];++_0x4825e7)this['animEvalua'+'tor']['clips'][_0x4825e7]['loop']=_0x4515ef;}}get['loop'](){return this['_loop'];}['play'](_0x19bf8b,_0x3d0bbe=0x21*0x47+0x1323+-0x1c4a){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x19bf8b]){M['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x19bf8b+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x19bf8b,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x1a1311=this['animations'][this['prevAnim']],_0x5f4554=this['animations'][this['currAnim']];if(this['blending']=_0x3d0bbe>0x17d6+0x6d2+-0x1ea8&&!!this['prevAnim'],this['blending']&&(this['blend']=0x12fa+0x18f2+-0x1*0x2bec,this['blendSpeed']=(0x176b+-0x24bf*0x1+0x1*0xd55)/_0x3d0bbe),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x1a1311,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x5f4554):this['skeleton']['animation']=_0x5f4554),this['animEvalua'+'tor']){const _0xf6ddb9=this['animEvalua'+'tor'];if(this['blending']){for(;_0xf6ddb9['clips']['length']>0x17d7+-0xa3*0xb+-0x10d5;)_0xf6ddb9['removeClip'](0x1*-0x635+-0x379+0x9ae);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x199116=new tc(this['animations'][this['currAnim']],-0x1*-0x3dc+0x5*0x327+-0x139f,-0x3eb+0x381*-0x1+0x1*0x76d,!(0x3*-0x841+0xe*0x1f9+-0x2db),this['loop']);_0x199116['name']=this['currAnim'],_0x199116['blendWeigh'+'t']=this['blending']?0x1f1a+0x897+-0x27b1:-0x1*0x124+-0x268a*-0x1+-0x2565,_0x199116['reset'](),this['animEvalua'+'tor']['addClip'](_0x199116);}}this['playing']=!(0x162b+-0x17*-0xdb+-0x67*0x68);}}['getAnimati'+'on'](_0x5a52e6){return this['animations'][_0x5a52e6];}['setModel'](_0x35699e){_0x35699e!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0x35699e,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x7adc47=this['entity']['model'];if(_0x7adc47){const _0x1eff71=_0x7adc47['model'];_0x1eff71&&_0x1eff71!==this['model']&&this['setModel'](_0x1eff71);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x3962e7=Object['keys'](this['_animation'+'s']);_0x3962e7['length']>0x1*-0xab6+-0x6b*0x43+0xb*0x385&&this['play'](_0x3962e7[-0x218a+0x107e+0x2*0x886]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x53df87=this['model'],_0x16a0b0=this['animations'];let _0x13296f=!(0x2*-0x51a+-0x43*0x95+0x189a*0x2),_0x5a8c18=!(0x271+0x217*0x2+-0x69e);for(const _0xeb222d in _0x16a0b0)_0x16a0b0['hasOwnProp'+'erty'](_0xeb222d)&&(_0x16a0b0[_0xeb222d]['constructo'+'r']===Gi?_0x5a8c18=!(-0x5f*-0x43+-0x3*-0x537+-0x2882):_0x13296f=!(-0x12d0+-0x1dd1+0x30a1));const _0x40f48f=_0x53df87['getGraph']();_0x13296f?(this['fromSkel']=new Vd(_0x40f48f),this['toSkel']=new Vd(_0x40f48f),this['skeleton']=new Vd(_0x40f48f),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x40f48f)):_0x5a8c18&&(this['animEvalua'+'tor']=new Ky(new rr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x37520c){if(!_0x37520c||!_0x37520c['length'])return;const _0x1d2c8f=this['system']['app']['assets'],_0x10b674=_0x18df61=>{if(_0x18df61['resources']['length']>0xbdf+0x406*0x2+-0x13ea){for(let _0x4a75f3=-0x25a*0x9+-0x1*0x13c6+0x28f0;_0x4a75f3<_0x18df61['resources']['length'];_0x4a75f3++)this['animations'][_0x18df61['resources'][_0x4a75f3]['name']]=_0x18df61['resources'][_0x4a75f3],this['animations'+'Index'][_0x18df61['id']]=_0x18df61['resources'][_0x4a75f3]['name'];}else this['animations'][_0x18df61['name']]=_0x18df61['resource'],this['animations'+'Index'][_0x18df61['id']]=_0x18df61['name'];this['animations']=this['animations'];},_0x58e610=_0x5149a1=>{_0x5149a1['off']('change',this['onAssetCha'+'nged'],this),_0x5149a1['on']('change',this['onAssetCha'+'nged'],this),_0x5149a1['off']('remove',this['onAssetRem'+'oved'],this),_0x5149a1['on']('remove',this['onAssetRem'+'oved'],this),_0x5149a1['resource']?_0x10b674(_0x5149a1):(_0x5149a1['once']('load',_0x10b674,this),this['enabled']&&this['entity']['enabled']&&_0x1d2c8f['load'](_0x5149a1));};for(let _0x3b0605=-0x33c*0x2+0x1393+0x29f*-0x5,_0x145aad=_0x37520c['length'];_0x3b0605<_0x145aad;_0x3b0605++){const _0x3a5a75=_0x1d2c8f['get'](_0x37520c[_0x3b0605]);_0x3a5a75?_0x58e610(_0x3a5a75):_0x1d2c8f['on']('add:'+_0x37520c[_0x3b0605],_0x58e610);}}['onAssetCha'+'nged'](_0x5d2bdc,_0x36b33f,_0x2710b7,_0x45ea57){if(_0x36b33f==='resource'||_0x36b33f==='resources'){if(_0x36b33f==='resources'&&_0x2710b7&&_0x2710b7['length']===-0x1d58+-0xfee+0x2d46&&(_0x2710b7=null),_0x2710b7){let _0x22f1e4=!(-0x3df*0x7+-0x7e1+-0x3e3*-0x9);if(_0x2710b7['length']>-0x109*-0x1f+-0x1d1f+0xfd*-0x3){if(_0x45ea57&&_0x45ea57['length']>0xc19+-0x2b0+-0x968){for(let _0x45b5c2=0x1ccb+-0x798+-0x1533;_0x45b5c2<_0x45ea57['length'];_0x45b5c2++)delete this['animations'][_0x45ea57[_0x45b5c2]['name']];}else delete this['animations'][_0x5d2bdc['name']];_0x22f1e4=!(-0x3fd*-0x1+0x1f64+0x2*-0x11b0);for(let _0x4966fc=-0x2220+-0x138f+0x35af;_0x4966fc<_0x2710b7['length'];_0x4966fc++)this['animations'][_0x2710b7[_0x4966fc]['name']]=_0x2710b7[_0x4966fc],!_0x22f1e4&&this['currAnim']===_0x2710b7[_0x4966fc]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x22f1e4=!(0x3*-0x907+0x1293+0x2d6*0x3),this['play'](_0x2710b7[_0x4966fc]['name']));_0x22f1e4||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x45ea57&&_0x45ea57['length']>-0x1704+-0x8*-0x64+0x13e5){for(let _0x4d9600=0xce7+-0x152a+0x2f*0x2d;_0x4d9600<_0x45ea57['length'];_0x4d9600++)delete this['animations'][_0x45ea57[_0x4d9600]['name']];}this['animations'][_0x5d2bdc['name']]=_0x2710b7[-0xa*0x2ae+0x111*-0x1+-0x1bdd*-0x1]||_0x2710b7,_0x22f1e4=!(-0xfe8+0x6*-0x53c+0x2f51),this['currAnim']===_0x5d2bdc['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x22f1e4=!(-0x1ced+0xfe+0x1*0x1bef),this['play'](_0x5d2bdc['name'])),_0x22f1e4||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x5d2bdc['id']]=_0x5d2bdc['name'];}else{if(_0x45ea57['length']>0x4*-0x2a5+-0x254d+0x2fe2){for(let _0x58706d=0xb1*-0x32+-0x259a+0x1*0x482c;_0x58706d<_0x45ea57['length'];_0x58706d++)delete this['animations'][_0x45ea57[_0x58706d]['name']],this['currAnim']===_0x45ea57[_0x58706d]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x5d2bdc['name']],this['currAnim']===_0x5d2bdc['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x5d2bdc['id']];}}}['onAssetRem'+'oved'](_0x5f43d3){if(_0x5f43d3['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x5f43d3['resources']['length']>-0x1b85+-0x29*-0xa3+0x79*0x3){for(let _0x4c5480=0x1d44+0xe5d*-0x1+-0xee7;_0x4c5480<_0x5f43d3['resources']['length'];_0x4c5480++)delete this['animations'][_0x5f43d3['resources'][_0x4c5480]['name']],this['currAnim']===_0x5f43d3['resources'][_0x4c5480]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x5f43d3['name']],this['currAnim']===_0x5f43d3['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x5f43d3['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(0x1*-0x1ae1+-0x1208+0x1*0x2cea),this['skeleton']&&(this['skeleton']['currentTim'+'e']=0x1589+-0x2523+0xf9a*0x1,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x253696=-0x200d*0x1+0x136d*-0x1+0x337a;_0x253696<this['animEvalua'+'tor']['clips']['length'];++_0x253696)this['animEvalua'+'tor']['clips'][_0x253696]['stop']();this['animEvalua'+'tor']['update'](0x1*-0xa1f+-0x9c5*0x1+0x13e4),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x4eaff4=this['assets'],_0x1929ba=this['system']['app']['assets'];if(_0x4eaff4)for(let _0x4435ea=-0x2264+0xf*-0x117+0x1a3*0x1f,_0x31286d=_0x4eaff4['length'];_0x4435ea<_0x31286d;_0x4435ea++){let _0x4dd8e7=_0x4eaff4[_0x4435ea];_0x4dd8e7 instanceof me||(_0x4dd8e7=_0x1929ba['get'](_0x4dd8e7)),_0x4dd8e7&&!_0x4dd8e7['resource']&&_0x1929ba['load'](_0x4dd8e7);}if(this['activate']&&!this['currAnim']){const _0x36bffd=Object['keys'](this['animations']);_0x36bffd['length']>0x22d3+-0x1*0x1f1c+-0x3b7&&this['play'](_0x36bffd[0x53*0x61+0x281+-0x1*0x21f4]);}}['onBeforeRe'+'move'](){for(let _0x4ad83f=-0x1*-0x1c33+0xc*0xac+-0x2443;_0x4ad83f<this['assets']['length'];_0x4ad83f++){let _0x2379d1=this['assets'][_0x4ad83f];typeof _0x2379d1=='number'&&(_0x2379d1=this['system']['app']['assets']['get'](_0x2379d1)),_0x2379d1&&(_0x2379d1['off']('change',this['onAssetCha'+'nged'],this),_0x2379d1['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x3b6343){if(this['blending']&&(this['blend']+=_0x3b6343*this['blendSpeed'],this['blend']>=0x9cb+-0x224e+0x1884&&(this['blend']=-0x1449+-0x1eaa+0x32f4)),this['playing']){const _0x67107=this['skeleton'];if(_0x67107!==null&&this['model']!==null){if(this['blending'])_0x67107['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x5ca0a9=_0x3b6343*this['speed'];_0x67107['addTime'](_0x5ca0a9),this['speed']>0x220+-0x1a07+0xd3*0x1d&&_0x67107['_time']===_0x67107['animation']['duration']&&!this['loop']?this['playing']=!(-0x1795+0xa*0x17b+0x8c8):this['speed']<0x166*-0x2+-0x4ae+0x77a&&_0x67107['_time']===-0x2*-0xa9a+0x1ab7+0x2f*-0x105&&!this['loop']&&(this['playing']=!(-0x1*-0x7c3+0x3a0*0x3+-0x12a2));}this['blending']&&this['blend']===0x576+-0x3*0x212+0xc1&&(_0x67107['animation']=this['toSkel']['animation']),_0x67107['updateGrap'+'h']();}}const _0xa16e86=this['animEvalua'+'tor'];if(_0xa16e86){for(let _0x3fef1e=0x2*0x38f+-0xc*0x1b7+0xd76;_0x3fef1e<_0xa16e86['clips']['length'];++_0x3fef1e){const _0x218aeb=_0xa16e86['clips'][_0x3fef1e];_0x218aeb['speed']=this['speed'],this['playing']?_0x218aeb['resume']():_0x218aeb['pause']();}this['blending']&&_0xa16e86['clips']['length']>0x101*0x26+-0x2512+-0x113*0x1&&(_0xa16e86['clips'][0x211d+-0x1*-0x22b4+-0x43d0]['blendWeigh'+'t']=this['blend']),_0xa16e86['update'](_0x3b6343);}this['blending']&&this['blend']===0x1f*0x9+0xe14+-0xf2a&&(this['blending']=!(0x313*-0x9+-0x1da5+0x3951));}}class HD{constructor(){this['enabled']=!(0x1*0x1291+-0x12af+0xf*0x2);}}const Gf=['enabled'];class WD extends lt{constructor(_0x9342df){super(_0x9342df),this['id']='animation',this['ComponentT'+'ype']=Qy,this['DataType']=HD,this['schema']=Gf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x4261c9,_0x4745bf,_0x4d82e8){_0x4d82e8=['activate','enabled','loop','speed','assets'];for(const _0x21a0ce of _0x4d82e8)_0x4745bf['hasOwnProp'+'erty'](_0x21a0ce)&&(_0x4261c9[_0x21a0ce]=_0x4745bf[_0x21a0ce]);super['initialize'+'ComponentD'+'ata'](_0x4261c9,_0x4745bf,Gf);}['cloneCompo'+'nent'](_0x4aeea4,_0x363539){this['addCompone'+'nt'](_0x363539,{}),_0x363539['animation']['assets']=_0x4aeea4['animation']['assets']['slice'](),_0x363539['animation']['speed']=_0x4aeea4['animation']['speed'],_0x363539['animation']['loop']=_0x4aeea4['animation']['loop'],_0x363539['animation']['activate']=_0x4aeea4['animation']['activate'],_0x363539['animation']['enabled']=_0x4aeea4['animation']['enabled'];const _0x10f3b2={},_0x5e27cc=_0x4aeea4['animation']['animations'];for(const _0x109e62 in _0x5e27cc)_0x5e27cc['hasOwnProp'+'erty'](_0x109e62)&&(_0x10f3b2[_0x109e62]=_0x5e27cc[_0x109e62]);_0x363539['animation']['animations']=_0x10f3b2;const _0x1dbbbe={},_0x57eceb=_0x4aeea4['animation']['animations'+'Index'];for(const _0x21e24d in _0x57eceb)_0x57eceb['hasOwnProp'+'erty'](_0x21e24d)&&(_0x1dbbbe[_0x21e24d]=_0x57eceb[_0x21e24d]);return _0x363539['animation']['animations'+'Index']=_0x1dbbbe,_0x363539['animation'];}['onBeforeRe'+'move'](_0xb52527,_0x4759a7){_0x4759a7['onBeforeRe'+'move']();}['onUpdate'](_0x3ac3ae){const _0x2baa17=this['store'];for(const _0x1b7c09 in _0x2baa17)if(_0x2baa17['hasOwnProp'+'erty'](_0x1b7c09)){const _0x29f345=_0x2baa17[_0x1b7c09];_0x29f345['data']['enabled']&&_0x29f345['entity']['enabled']&&_0x29f345['entity']['animation']['update'](_0x3ac3ae);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Qy['prototype'],Gf);class Wo{constructor(_0xfcfdb,_0x55a19f,_0x1a6e70,_0x77b525,_0x31a732=-0x1*-0x1e7f+0xebb+-0x2d39){this['_state']=_0xfcfdb,this['_parent']=_0x55a19f,this['_name']=_0x1a6e70,Array['isArray'](_0x77b525)?(this['_point']=new J(_0x77b525[-0x2146*-0x1+-0x34c+0x4ff*-0x6],_0x77b525[0x21ae+-0x1bb0+-0x7*0xdb]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x77b525,this['_pointLeng'+'th']=_0x77b525),this['_speed']=_0x31a732,this['_weightedS'+'peed']=-0x4fe+0x119c+-0x1*0xc9d,this['_weight']=-0x2452+0x1356+0x10fd,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x54a762){this['_weight']=_0x54a762;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x5d1641=this['_state']['totalWeigh'+'t'];return _0x5d1641===0x1de7+-0xb07+0x8*-0x25c?-0x644+0x41*0x4a+0x643*-0x2:this['weight']/_0x5d1641;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x4ad997){this['_weightedS'+'peed']=_0x4ad997;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x5e6035){this['_animTrack']=_0x5e6035;}get['animTrack'](){return this['_animTrack'];}}class Nn extends Wo{constructor(_0x5057c0,_0x335843,_0x2944e1,_0xb22b35,_0x2cd95f,_0x3e8d35,_0x1e5efb,_0x3fe701,_0x391a2f){super(_0x5057c0,_0x335843,_0x2944e1,_0xb22b35),this['_parameter'+'s']=_0x2cd95f,this['_parameter'+'Values']=new Array(_0x2cd95f['length']),this['_children']=[],this['_findParam'+'eter']=_0x391a2f,this['_syncAnima'+'tions']=_0x1e5efb!==!(-0x3*0xb71+-0x70c+0x2960),this['_pointCach'+'e']={};for(let _0x199a0c=0x1*0x1d7b+-0x2067+0x4*0xbb;_0x199a0c<_0x3e8d35['length'];_0x199a0c++){const _0x1e0787=_0x3e8d35[_0x199a0c];_0x1e0787['children']?this['_children']['push'](_0x3fe701(_0x1e0787['type'],_0x5057c0,this,_0x1e0787['name'],-0xe0+0x592*0x1+0x4b1*-0x1,_0x1e0787['parameter']?[_0x1e0787['parameter']]:_0x1e0787['parameters'],_0x1e0787['children'],_0x1e0787['syncAnimat'+'ions'],_0x3fe701,_0x391a2f)):this['_children']['push'](new Wo(_0x5057c0,this,_0x1e0787['name'],_0x1e0787['point'],_0x1e0787['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x36213b){for(let _0x2c64a4=-0xfaa+-0x1*0x15c2+-0x5*-0x77c;_0x2c64a4<this['_children']['length'];_0x2c64a4++)if(this['_children'][_0x2c64a4]['name']===_0x36213b)return this['_children'][_0x2c64a4];return null;}['updatePara'+'meterValue'+'s'](){let _0x237c1d=!(-0x1*-0x617+-0x2*-0x164+-0x8df);for(let _0x39f88b=-0x179*0x1+-0x1e70+-0xaa3*-0x3;_0x39f88b<this['_parameter'+'Values']['length'];_0x39f88b++){const _0x51bd4e=this['_findParam'+'eter'](this['_parameter'+'s'][_0x39f88b])['value'];this['_parameter'+'Values'][_0x39f88b]!==_0x51bd4e&&(this['_parameter'+'Values'][_0x39f88b]=_0x51bd4e,_0x237c1d=!(0x25b2+-0x22fa+-0x2b7));}return _0x237c1d;}['getNodeWei'+'ghtedDurat'+'ion'](_0x1acced){return this['_children'][_0x1acced]['animTrack']['duration']/this['_children'][_0x1acced]['speedMulti'+'plier']*this['_children'][_0x1acced]['weight'];}['getNodeCou'+'nt'](){let _0x4d767c=0x2174*0x1+-0x208d+-0xe7*0x1;for(let _0x408c98=-0x17*0x167+0x31f*-0x1+0x2360;_0x408c98<this['_children']['length'];_0x408c98++)this['_children'][_0x408c98]['constructo'+'r']===Nn?_0x4d767c+=this['_children'][_0x408c98]['getNodeCou'+'nt']():_0x4d767c++;return _0x4d767c;}}class $D extends Nn{constructor(_0x2640f7,_0x3fd6fa,_0x67f0b3,_0x58b0fa,_0x1bcbaa,_0x3e31d4,_0x1b4a69,_0x11df0a,_0x19a452){_0x3e31d4['sort']((_0x4ab38d,_0x5d4dd3)=>_0x4ab38d['point']-_0x5d4dd3['point']),super(_0x2640f7,_0x3fd6fa,_0x67f0b3,_0x58b0fa,_0x1bcbaa,_0x3e31d4,_0x1b4a69,_0x11df0a,_0x19a452);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x9fac53=0x13*0x1fc+0x1836+-0x2*0x1ef5;this['_children'][-0xa*0x386+-0x1*-0x1442+-0x12*-0xd5]['weight']=0x985*-0x1+0x1*-0x1f39+0x7*0x5d2;for(let _0xf37d94=0x2476+-0xb1b+0x195b*-0x1;_0xf37d94<this['_children']['length'];_0xf37d94++){const _0x4f0bde=this['_children'][_0xf37d94];if(_0xf37d94!==this['_children']['length']-(0x17fc+0x1d3*-0x13+0xaae)){const _0x572b5a=this['_children'][_0xf37d94+(0x1152+0x1e9e+-0x2fef)];if(_0x4f0bde['point']===_0x572b5a['point'])_0x4f0bde['weight']=0x26*-0x1+-0xc5a+0xc80+0.5,_0x572b5a['weight']=-0xbb7*-0x2+0x161b*0x1+0x1*-0x2d89+0.5;else{if(Y['between'](this['_parameter'+'Values'][0x773*-0x4+0xa23+0x13a9],_0x4f0bde['point'],_0x572b5a['point'],!(0x24e2+-0xc53+-0x188f))){const _0x4a73b2=Math['abs'](_0x4f0bde['point']-_0x572b5a['point']),_0x42ed36=Math['abs'](_0x4f0bde['point']-this['_parameter'+'Values'][-0x1aa0+0x1*0x224e+0x7ae*-0x1]),_0x59568a=(_0x4a73b2-_0x42ed36)/_0x4a73b2;_0x4f0bde['weight']=_0x59568a,_0x572b5a['weight']=-0x1*-0x101f+0xc45+0x2b*-0xa9-_0x59568a;}else _0x572b5a['weight']=0x858+-0x7*-0x3d2+0x5d9*-0x6;}}this['_syncAnima'+'tions']&&(_0x9fac53+=_0x4f0bde['animTrack']['duration']/_0x4f0bde['absoluteSp'+'eed']*_0x4f0bde['weight']);}if(this['_syncAnima'+'tions'])for(let _0x597f15=-0x24c+0xd*0x289+0x1*-0x1ea9;_0x597f15<this['_children']['length'];_0x597f15++){const _0x535e2e=this['_children'][_0x597f15];_0x535e2e['weightedSp'+'eed']=_0x535e2e['animTrack']['duration']/_0x535e2e['absoluteSp'+'eed']/_0x9fac53;}}}const Mi=class Mi extends Nn{['pointDista'+'nceCache'](_0x586606,_0xf96e85){const _0x4a3417=''+_0x586606+_0xf96e85;return this['_pointCach'+'e'][_0x4a3417]||(this['_pointCach'+'e'][_0x4a3417]=this['_children'][_0xf96e85]['point']['clone']()['sub'](this['_children'][_0x586606]['point'])),this['_pointCach'+'e'][_0x4a3417];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x475c04,_0x2c1f7f;Mi['_p']['set'](...this['_parameter'+'Values']),_0x475c04=0x585+-0x1788+0x1203,_0x2c1f7f=0x26e4+-0x229b+-0x449;for(let _0x298357=0x553+0x2b4*-0x2+0x15;_0x298357<this['_children']['length'];_0x298357++){const _0x43da9c=this['_children'][_0x298357],_0x22552d=_0x43da9c['point'];Mi['_pip']['set'](Mi['_p']['x'],Mi['_p']['y'])['sub'](_0x22552d);let _0x160512=Number['MAX_VALUE'];for(let _0x16b43b=0x1e2*-0x3+0x116d+-0x1*0xbc7;_0x16b43b<this['_children']['length'];_0x16b43b++){if(_0x298357===_0x16b43b)continue;const _0x3ed41c=this['pointDista'+'nceCache'](_0x298357,_0x16b43b),_0x5e822b=Y['clamp'](0x97+0x2*-0x72d+0x4*0x371-Mi['_pip']['dot'](_0x3ed41c)/_0x3ed41c['lengthSq'](),0x7*-0x427+-0x72*0x8+-0x1*-0x20a1,0xc3+-0x26a+-0x4*-0x6a);_0x5e822b<_0x160512&&(_0x160512=_0x5e822b);}_0x43da9c['weight']=_0x160512,_0x475c04+=_0x160512,this['_syncAnima'+'tions']&&(_0x2c1f7f+=_0x43da9c['animTrack']['duration']/_0x43da9c['absoluteSp'+'eed']*_0x43da9c['weight']);}for(let _0x5d8b49=0x4b8+-0xc8a+0x7d2;_0x5d8b49<this['_children']['length'];_0x5d8b49++){const _0x5e6802=this['_children'][_0x5d8b49];_0x5e6802['weight']=_0x5e6802['_weight']/_0x475c04,this['_syncAnima'+'tions']&&(_0x5e6802['weightedSp'+'eed']=_0x5e6802['animTrack']['duration']/_0x5e6802['absoluteSp'+'eed']/_0x2c1f7f);}}};h(Mi,'_p',new J()),h(Mi,'_pip',new J());let Hf=Mi;const Ii=class Ii extends Nn{['pointCache'](_0x100bf9,_0x2ebd8c){const _0x59e0dd=''+_0x100bf9+_0x2ebd8c;return this['_pointCach'+'e'][_0x59e0dd]||(this['_pointCach'+'e'][_0x59e0dd]=new J((this['_children'][_0x2ebd8c]['pointLengt'+'h']-this['_children'][_0x100bf9]['pointLengt'+'h'])/((this['_children'][_0x2ebd8c]['pointLengt'+'h']+this['_children'][_0x100bf9]['pointLengt'+'h'])/(0x1a16+0x1a9b+0x34af*-0x1)),J['angleRad'](this['_children'][_0x100bf9]['point'],this['_children'][_0x2ebd8c]['point'])*(0x1*-0x16d7+-0xf26+0x25ff))),this['_pointCach'+'e'][_0x59e0dd];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x3d00fe,_0xf25441;Ii['_p']['set'](...this['_parameter'+'Values']);const _0x156308=Ii['_p']['length']();_0x3d00fe=-0x149*-0x4+0x2072+-0x2596,_0xf25441=-0x1bbf+0x1*0x24c5+-0x906;for(let _0xcdcd63=-0x8*0x3b9+-0x2*-0xe55+-0xb*-0x1a;_0xcdcd63<this['_children']['length'];_0xcdcd63++){const _0x348736=this['_children'][_0xcdcd63],_0x545519=_0x348736['point'],_0x2e6586=_0x348736['pointLengt'+'h'];let _0x207f53=Number['MAX_VALUE'];for(let _0x390b4d=-0x185b+-0x3*0xf7+0x4*0x6d0;_0x390b4d<this['_children']['length'];_0x390b4d++){if(_0xcdcd63===_0x390b4d)continue;const _0x1d5c91=this['pointCache'](_0xcdcd63,_0x390b4d),_0x5281c6=this['_children'][_0x390b4d]['pointLengt'+'h'];Ii['_pip']['set']((_0x156308-_0x2e6586)/((_0x5281c6+_0x2e6586)/(0x2470+0x3a4+-0x2812)),J['angleRad'](_0x545519,Ii['_p'])*(0x1*-0x165f+0x63a*-0x1+0x1c9b));const _0x3c21a7=Y['clamp'](0x1551+-0x8a9+-0xca7-Math['abs'](Ii['_pip']['dot'](_0x1d5c91)/_0x1d5c91['lengthSq']()),-0x1f5b+0x47*0x27+0x148a,0x7c+-0x54b*0x6+0x3*0xa6d);_0x3c21a7<_0x207f53&&(_0x207f53=_0x3c21a7);}_0x348736['weight']=_0x207f53,_0x3d00fe+=_0x207f53,this['_syncAnima'+'tions']&&(_0xf25441+=_0x348736['animTrack']['duration']/_0x348736['absoluteSp'+'eed']*_0x348736['weight']);}for(let _0x3aab4f=-0x12f7+-0x1d9+0x14d0;_0x3aab4f<this['_children']['length'];_0x3aab4f++){const _0x45a073=this['_children'][_0x3aab4f];if(_0x45a073['weight']=_0x45a073['_weight']/_0x3d00fe,this['_syncAnima'+'tions']){const _0x8bbe35=_0x45a073['animTrack']['duration']/_0xf25441*_0x3d00fe;_0x45a073['weightedSp'+'eed']=_0x45a073['absoluteSp'+'eed']*_0x8bbe35;}}}};h(Ii,'_p',new J()),h(Ii,'_pip',new J());let Wf=Ii;class XD extends Nn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x52eb22=-0xb16+0x213a+-0xda*0x1a,_0x306080=0x1c7e+-0x1b1d+-0x161*0x1;for(let _0x17fd80=0x1e53*0x1+-0x782*0x2+-0xf4f;_0x17fd80<this['_children']['length'];_0x17fd80++)if(_0x52eb22+=Math['max'](this['_parameter'+'Values'][_0x17fd80],0x196a+-0x227a+-0x8*-0x122),this['_syncAnima'+'tions']){const _0x59d0de=this['_children'][_0x17fd80];_0x306080+=_0x59d0de['animTrack']['duration']/_0x59d0de['absoluteSp'+'eed']*_0x59d0de['weight'];}for(let _0x174928=-0x24e0+-0xc1c+-0x21*-0x17c;_0x174928<this['_children']['length'];_0x174928++){const _0xa9d343=this['_children'][_0x174928],_0xf9b97d=Math['max'](this['_parameter'+'Values'][_0x174928],-0x1*-0x1bbe+0x3c6+-0x1f84);_0x52eb22?(_0xa9d343['weight']=_0xf9b97d/_0x52eb22,this['_syncAnima'+'tions']&&(_0xa9d343['weightedSp'+'eed']=_0xa9d343['animTrack']['duration']/_0xa9d343['absoluteSp'+'eed']/_0x306080)):(_0xa9d343['weight']=-0x12*0x8b+-0x20*-0xda+0x8bd*-0x2,this['_syncAnima'+'tions']&&(_0xa9d343['weightedSp'+'eed']=0xb3*0x12+0x1700+-0x2396));}}}class K_{constructor(_0x4ca7b5,_0x644cb2,_0x1e2dd3=-0x205e+-0x136d+-0xaa*-0x4e,_0x3297c2=!(0x1d99+-0x1*0xb74+-0x1225),_0x25c8e7){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x4ca7b5,this['_name']=_0x644cb2,this['_speed']=_0x1e2dd3,this['_loop']=_0x3297c2,this['_hasAnimat'+'ions']=!(-0x5d8+-0x15e*0x17+0x254b),_0x25c8e7?this['_blendTree']=this['_createTre'+'e'](_0x25c8e7['type'],this,null,_0x644cb2,-0x4b3+-0x1*-0x15ad+-0x10f9,_0x25c8e7['parameter']?[_0x25c8e7['parameter']]:_0x25c8e7['parameters'],_0x25c8e7['children'],_0x25c8e7['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new Wo(this,null,_0x644cb2,0x54*0x7+-0x116d+-0x2*-0x791,_0x1e2dd3));}['_createTre'+'e'](_0x15fe8f,_0x1c43c4,_0x3f7cd6,_0x45e365,_0x2b3d9b,_0x6f3914,_0x3a5d1b,_0x18bb77,_0x898cb2,_0x55a8e3){switch(_0x15fe8f){case UD:return new $D(_0x1c43c4,_0x3f7cd6,_0x45e365,_0x2b3d9b,_0x6f3914,_0x3a5d1b,_0x18bb77,_0x898cb2,_0x55a8e3);case zD:return new Hf(_0x1c43c4,_0x3f7cd6,_0x45e365,_0x2b3d9b,_0x6f3914,_0x3a5d1b,_0x18bb77,_0x898cb2,_0x55a8e3);case BD:return new Wf(_0x1c43c4,_0x3f7cd6,_0x45e365,_0x2b3d9b,_0x6f3914,_0x3a5d1b,_0x18bb77,_0x898cb2,_0x55a8e3);case VD:return new XD(_0x1c43c4,_0x3f7cd6,_0x45e365,_0x2b3d9b,_0x6f3914,_0x3a5d1b,_0x18bb77,_0x898cb2,_0x55a8e3);}M['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x15fe8f);}['_getNodeFr'+'omPath'](_0x46041b){let _0x1dacdd=this['_blendTree'];for(let _0x5784d1=-0x1*-0x1d2f+-0x16d5+-0x1*0x659;_0x5784d1<_0x46041b['length'];_0x5784d1++)_0x1dacdd=_0x1dacdd['getChild'](_0x46041b[_0x5784d1]);return _0x1dacdd;}['addAnimati'+'on'](_0x5b8a59,_0x18a611){const _0x1ea5a1=_0x5b8a59['join']('.'),_0x370e19=this['_animation'+'List']['findIndex'](_0x3fae87=>_0x3fae87['path']===_0x1ea5a1);if(_0x370e19>=-0x1*-0x1a5d+0x35*0x79+-0x2*0x19b5)this['_animation'+'List'][_0x370e19]['animTrack']=_0x18a611;else{const _0x37356b=this['_getNodeFr'+'omPath'](_0x5b8a59);_0x37356b['animTrack']=_0x18a611,this['_animation'+'List']['push'](_0x37356b);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>0x25a0+0xb6a+0x2*-0x1885&&this['_animation'+'List']['every'](_0x3d0227=>_0x3d0227['animTrack']&&_0x3d0227['animTrack']!==Gi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x272495){this['_animation'+'List']=_0x272495,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x1ef02e){this['_speed']=_0x1ef02e;}get['speed'](){return this['_speed'];}set['loop'](_0x33ea8a){this['_loop']=_0x33ea8a;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===Wo?0xd19+-0x891+-0x487:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return sc['indexOf'](this['name'])!==-(0x24f9+0x1879+-0x3d71)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>0xc8+0x1f2c+-0x1ff4){const _0x137f31=this['name']+'.'+this['animations'][0x4b*-0x6d+-0x1c2a+0x3c19]['animTrack']['name'],_0x7aba6c=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x137f31);if(_0x7aba6c)return _0x7aba6c['loop'];}return!(0x5*0x182+0x17d8+-0x1d*0x115);}get['totalWeigh'+'t'](){let _0x1a6fa1=-0x56*0xd+0x14ac+-0x104e*0x1;for(let _0x3261df=0x21ba+-0x11d*-0xd+-0x3033;_0x3261df<this['animations']['length'];_0x3261df++)_0x1a6fa1+=this['animations'][_0x3261df]['weight'];return _0x1a6fa1;}get['timelineDu'+'ration'](){let _0x41d42b=-0x16*0x187+-0x1349*-0x1+0xe51;for(let _0x1ca3f4=-0xa10+0x6*0x1ac+-0x2*-0x4;_0x1ca3f4<this['animations']['length'];_0x1ca3f4++){const _0x12dad5=this['animations'][_0x1ca3f4];_0x12dad5['animTrack']['duration']>_0x41d42b&&(_0x41d42b=_0x12dad5['animTrack']['duration']);}return _0x41d42b;}}class ic{constructor({from:_0x3da8be,to:_0x2b0c76,time:_0x2b1f60=0xa61+0x2344+0x2da5*-0x1,priority:_0x543729=-0x2*-0xc09+-0x129e+-0x574,conditions:_0x5a4fb6=[],exitTime:_0x703091=null,transitionOffset:_0x5ce697=null,interruptionSource:_0x3c471b=jy}){this['_from']=_0x3da8be,this['_to']=_0x2b0c76,this['_time']=_0x2b1f60,this['_priority']=_0x543729,this['_condition'+'s']=_0x5a4fb6,this['_exitTime']=_0x703091,this['_transitio'+'nOffset']=_0x5ce697,this['_interrupt'+'ionSource']=_0x3c471b;}get['from'](){return this['_from'];}set['to'](_0x158fb0){this['_to']=_0x158fb0;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class qD{constructor(_0x269d9b,_0x3f2b30,_0xaca5f3,_0x5ce889,_0xe8036c,_0x359ba8,_0x1f94e5){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',no),h(this,'_activeSta'+'teDuration',-0x11c7*0x1+-0x1eb1+0x3078),h(this,'_activeSta'+'teDuration'+'Dirty',!(-0x247f+0x1295+0x11ea)),h(this,'_playing',!(-0x1946+0x1960+-0x19)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',-0x79a*0x1+0x131b*-0x1+0x1a*0x107),h(this,'_totalTran'+'sitionTime',0xe13*-0x2+-0xbe3+0x280a),h(this,'_isTransit'+'ioning',!(0x13*-0x31+0x2*0x4d2+0xc*-0x80)),h(this,'_transitio'+'nInterrupt'+'ionSource',jy),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',0x4fd*0x6+0x63*0x1+-0x1e51),h(this,'_timeInSta'+'teBefore',0xe3+0x1a*0x29+-0x1*0x50d),h(this,'findParame'+'ter',_0x2edf44=>this['_findParam'+'eter'](_0x2edf44)),(this['_animEvalu'+'ator']=_0x269d9b,this['_eventHand'+'ler']=_0xe8036c,this['_findParam'+'eter']=_0x359ba8,this['_consumeTr'+'igger']=_0x1f94e5);for(let _0x26d6b4=0x60c+-0x2479+0x1e6d;_0x26d6b4<_0x3f2b30['length'];_0x26d6b4++)this['_states'][_0x3f2b30[_0x26d6b4]['name']]=new K_(this,_0x3f2b30[_0x26d6b4]['name'],_0x3f2b30[_0x26d6b4]['speed'],_0x3f2b30[_0x26d6b4]['loop'],_0x3f2b30[_0x26d6b4]['blendTree']),this['_stateName'+'s']['push'](_0x3f2b30[_0x26d6b4]['name']);this['_transitio'+'ns']=_0xaca5f3['map'](_0x57930f=>new ic({..._0x57930f})),this['_activate']=_0x5ce889;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x9c2251){this['_activeSta'+'teName']=_0x9c2251;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x457717){this['_previousS'+'tateName']=_0x457717;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x597ae0=!(0x200b+0x1*0x685+0x4d2*-0x8);for(let _0x234c69=0x2671+-0x1f*0x1f+-0x128*0x1e;_0x234c69<this['_stateName'+'s']['length'];_0x234c69++)this['_states'][this['_stateName'+'s'][_0x234c69]]['playable']||(_0x597ae0=!(-0x1558+-0x1d*0x6+-0x1*-0x1607));return _0x597ae0;}set['playing'](_0x271a6b){this['_playing']=_0x271a6b;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x5a446f=0x137d*-0x2+-0x1*0xe3f+0x3539;for(let _0xddecf7=0xe0a*-0x2+-0x1c21+0x3835;_0xddecf7<this['activeStat'+'eAnimation'+'s']['length'];_0xddecf7++){const _0x47260a=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0xddecf7]['name']);_0x47260a&&(_0x5a446f=Math['max'](_0x5a446f,_0x47260a['track']['duration']));}this['_activeSta'+'teDuration']=_0x5a446f,this['_activeSta'+'teDuration'+'Dirty']=!(0x4d6+0x1*0x16a3+0x494*-0x6);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x136c22){this['_timeInSta'+'teBefore']=_0x136c22,this['_timeInSta'+'te']=_0x136c22;for(let _0x17e95e=-0xb47*-0x3+-0x2033*0x1+-0x1a2;_0x17e95e<this['activeStat'+'eAnimation'+'s']['length'];_0x17e95e++){const _0x556eed=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x17e95e]['name']);_0x556eed&&(_0x556eed['time']=_0x136c22);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x369984){return this['_animEvalu'+'ator']['assignMask'](_0x369984);}['_findState'](_0x15489c){return this['_states'][_0x15489c];}['_getActive'+'StateProgr'+'essForTime'](_0x98673a){if(this['activeStat'+'eName']===no||this['activeStat'+'eName']===zf||this['activeStat'+'eName']===Rr)return-0x1e1+-0x12de+0x14c0;const _0x3033e2=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][-0x21d4+-0x5*0x4f+-0x235f*-0x1]['name']);return _0x3033e2?_0x3033e2['progressFo'+'rTime'](_0x98673a):null;}['_findTrans'+'itionsFrom'+'State'](_0x5151d8){let _0x1dd9d4=this['_findTrans'+'itionsFrom'+'StateCache'][_0x5151d8];return _0x1dd9d4||(_0x1dd9d4=this['_transitio'+'ns']['filter'](_0x1e25b5=>_0x1e25b5['from']===_0x5151d8),Go(_0x1dd9d4),this['_findTrans'+'itionsFrom'+'StateCache'][_0x5151d8]=_0x1dd9d4),_0x1dd9d4;}['_findTrans'+'itionsBetw'+'eenStates'](_0x53ec4f,_0x5ef863){let _0x46435b=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x53ec4f+'->'+_0x5ef863];return _0x46435b||(_0x46435b=this['_transitio'+'ns']['filter'](_0x988efb=>_0x988efb['from']===_0x53ec4f&&_0x988efb['to']===_0x5ef863),Go(_0x46435b),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x53ec4f+'->'+_0x5ef863]=_0x46435b),_0x46435b;}['_transitio'+'nHasCondit'+'ionsMet'](_0x578097){const _0x121e8a=_0x578097['conditions'];for(let _0x754f76=0x2140+0x21a7+0x1*-0x42e7;_0x754f76<_0x121e8a['length'];_0x754f76++){const _0x1078dc=_0x121e8a[_0x754f76],_0x34766a=this['_findParam'+'eter'](_0x1078dc['parameterN'+'ame']);switch(_0x1078dc['predicate']){case LD:if(!(_0x34766a['value']>_0x1078dc['value']))return!(0x1f40+0x13bc+-0x32fb);break;case RD:if(!(_0x34766a['value']<_0x1078dc['value']))return!(0x1e6*0xb+-0x191e+0x5*0xd9);break;case OD:if(!(_0x34766a['value']>=_0x1078dc['value']))return!(-0x1*0x563+0x155f+-0xffb);break;case FD:if(!(_0x34766a['value']<=_0x1078dc['value']))return!(0x10ae*-0x1+-0x166f+-0xd0a*-0x3);break;case ND:if(_0x34766a['value']!==_0x1078dc['value'])return!(0x1*0x228e+-0x222f+-0x5e);break;case kD:if(_0x34766a['value']===_0x1078dc['value'])return!(-0x47a+0x163f+0x8e2*-0x2);break;}}return!(0x8d6+0xfe1+-0x18b7);}['_findTrans'+'ition'](_0x10b3f1,_0x271cb7){let _0x14bd56=[];if(_0x10b3f1&&_0x271cb7)_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x10b3f1,_0x271cb7));else{if(!this['_isTransit'+'ioning'])_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case PD:_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case MD:_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case ID:_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;case DD:_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x14bd56=_0x14bd56['concat'](this['_findTrans'+'itionsFrom'+'State'](Rr));break;}}if(_0x14bd56=_0x14bd56['filter'](_0x259f51=>{if(_0x259f51['to']===this['activeStat'+'eName'])return!(-0x2d7*-0x5+-0x6e6*-0x1+-0x18*0xe1);if(_0x259f51['hasExitTim'+'e']){let _0x120631=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x53bec4=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x259f51['exitTime']<-0x1425+0x2*0xd10+-0x5fa&&this['activeStat'+'e']['loop']&&(_0x120631-=Math['floor'](_0x120631),_0x53bec4-=Math['floor'](_0x53bec4)),_0x53bec4===_0x120631){if(_0x53bec4!==_0x259f51['exitTime'])return null;}else{if(!(_0x259f51['exitTime']>_0x120631&&_0x259f51['exitTime']<=_0x53bec4))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x259f51);}),_0x14bd56['length']>-0x7f6*-0x3+0x104+-0x18e6){const _0x18d69b=_0x14bd56[0x13d+-0x1a5c+0x191f];if(_0x18d69b['to']===zf){const _0x219788=this['_findTrans'+'itionsFrom'+'State'](no)[0xe*0xfc+-0x195d+0xb95];_0x18d69b['to']=_0x219788['to'];}return _0x18d69b;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x2afc1e){let _0x12beaf,_0x2c785c,_0x4b1598;this['previousSt'+'ate']=_0x2afc1e['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x2afc1e['to'],this['_activeSta'+'teDuration'+'Dirty']=!(-0x19f0+0x6*-0x2c7+0x30b*0xe);for(let _0x5dc606=-0x3*0x97c+0x3*0x69f+0x2dd*0x3;_0x5dc606<_0x2afc1e['conditions']['length'];_0x5dc606++){const _0x8ae393=_0x2afc1e['conditions'][_0x5dc606];this['_findParam'+'eter'](_0x8ae393['parameterN'+'ame'])['type']===yh&&this['_consumeTr'+'igger'](_0x8ae393['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x574f66=Math['min'](this['_totalTran'+'sitionTime']!==0x5a5*-0x5+0x5e2+0x13*0x12d?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x1f*-0x125+0x2674+-0x49ee,0x14e*0x1+-0x104*-0x9+-0x9*0x129);for(let _0xd6a0cb=-0x2454+0xfa1+0x14b3;_0xd6a0cb<this['_transitio'+'nPreviousS'+'tates']['length'];_0xd6a0cb++){this['_isTransit'+'ioning']?_0xd6a0cb!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x12ba+0x1*-0x92b+-0x4c7*0x2)?this['_transitio'+'nPreviousS'+'tates'][_0xd6a0cb]['weight']*=0xe5e+0x18b+-0xfe8-_0x574f66:this['_transitio'+'nPreviousS'+'tates'][_0xd6a0cb]['weight']=_0x574f66:this['_transitio'+'nPreviousS'+'tates'][_0xd6a0cb]['weight']=-0x5ce+-0x2694+0xb*0x409,_0x12beaf=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0xd6a0cb]['name']);for(let _0x213804=0x1*-0x7c9+-0x1*-0x2373+-0x1baa;_0x213804<_0x12beaf['animations']['length'];_0x213804++)_0x2c785c=_0x12beaf['animations'][_0x213804],_0x4b1598=this['_animEvalu'+'ator']['findClip'](_0x2c785c['name']+'.previous.'+_0xd6a0cb),_0x4b1598||(_0x4b1598=this['_animEvalu'+'ator']['findClip'](_0x2c785c['name']),_0x4b1598['name']=_0x2c785c['name']+'.previous.'+_0xd6a0cb),_0xd6a0cb!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x23c6+-0x2370+-0x55)&&_0x4b1598['pause']();}}this['_isTransit'+'ioning']=!(0xc1d+0x1*-0x2629+-0x1*-0x1a0c),this['_totalTran'+'sitionTime']=_0x2afc1e['time'],this['_currTrans'+'itionTime']=0x1*-0x26b9+-0x1*0x2433+-0x4*-0x12bb,this['_transitio'+'nInterrupt'+'ionSource']=_0x2afc1e['interrupti'+'onSource'];const _0x43564c=this['activeStat'+'e'],_0x2303e4=_0x2afc1e['transition'+'Offset']&&_0x2afc1e['transition'+'Offset']>0x1*0x2231+0xc1*-0x28+-0x409&&_0x2afc1e['transition'+'Offset']<0x268+0x1cab*-0x1+0x1a44*0x1;let _0x5a1c5a=0x3b*-0x59+-0x7e*0x3c+0x320b,_0x5d2917=0x19*-0x87+-0x2*-0x623+0xe9;if(_0x2303e4){const _0x1f97ab=_0x43564c['timelineDu'+'ration']*_0x2afc1e['transition'+'Offset'];_0x5a1c5a=_0x1f97ab,_0x5d2917=_0x1f97ab;}this['_timeInSta'+'te']=_0x5a1c5a,this['_timeInSta'+'teBefore']=_0x5d2917;for(let _0xdb70e6=-0x150d+-0x7cf*-0x1+0xd3e;_0xdb70e6<_0x43564c['animations']['length'];_0xdb70e6++){if(_0x4b1598=this['_animEvalu'+'ator']['findClip'](_0x43564c['animations'][_0xdb70e6]['name']),_0x4b1598)_0x4b1598['reset']();else{const _0x223995=Number['isFinite'](_0x43564c['animations'][_0xdb70e6]['speed'])?_0x43564c['animations'][_0xdb70e6]['speed']:_0x43564c['speed'];_0x4b1598=new tc(_0x43564c['animations'][_0xdb70e6]['animTrack'],this['_timeInSta'+'te'],_0x223995,!(0x22a5+0xb*0xd7+-0x2be2),_0x43564c['loop'],this['_eventHand'+'ler']),_0x4b1598['name']=_0x43564c['animations'][_0xdb70e6]['name'],this['_animEvalu'+'ator']['addClip'](_0x4b1598);}if(_0x2afc1e['time']>0xb80+-0x5*-0x4ca+0x11b9*-0x2?_0x4b1598['blendWeigh'+'t']=-0x8*-0x4a5+0x5*0x501+-0x3e2d:_0x4b1598['blendWeigh'+'t']=_0x43564c['animations'][_0xdb70e6]['normalized'+'Weight'],_0x4b1598['play'](),_0x2303e4)_0x4b1598['time']=_0x43564c['timelineDu'+'ration']*_0x2afc1e['transition'+'Offset'];else{const _0x181a1a=_0x43564c['speed']>=0x2e1*-0x2+0x9*-0xb3+0x5*0x269?-0xa85*-0x1+-0x58*0x10+-0x505:this['activeStat'+'eDuration'];_0x4b1598['time']=_0x181a1a;}}}['_transitio'+'nToState'](_0x56127f){if(!this['_findState'](_0x56127f))return;let _0x1c122d=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x56127f);_0x1c122d||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x1c122d=new ic({'from':null,'to':_0x56127f})),this['updateStat'+'eFromTrans'+'ition'](_0x1c122d);}['assignAnim'+'ation'](_0x8ddb6e,_0x539c4a,_0x124ca5,_0x351998){const _0x14c341=_0x8ddb6e['split']('.');let _0x4fcdb6=this['_findState'](_0x14c341[0x13b1+0x48d*-0x1+-0xf24]);_0x4fcdb6||(_0x4fcdb6=new K_(this,_0x14c341[-0x1237+-0x13*-0x1f3+-0x12d2],_0x124ca5),this['_states'][_0x14c341[0x13ba*0x1+-0x1*-0x11d2+-0x258c]]=_0x4fcdb6,this['_stateName'+'s']['push'](_0x14c341[-0x1dd*-0xf+0x2196+0x3*-0x1483])),_0x4fcdb6['addAnimati'+'on'](_0x14c341,_0x539c4a),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x4fcdb6['name'],_0x539c4a),_0x124ca5!==void(0x3d*-0x5d+0x1fbe+-0x995)&&(_0x4fcdb6['speed']=_0x124ca5),_0x351998!==void(0x172c+0x957*-0x1+-0xdd5*0x1)&&(_0x4fcdb6['loop']=_0x351998),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(-0x1318+0x32*0x32+0x954);}['removeNode'+'Animations'](_0x24b02a){if(sc['indexOf'](_0x24b02a)!==-(0x1*0x81+0x14b+-0x1cb))return!(0x121c+-0x6*0x25b+0x3*-0x153);const _0x2bcb68=this['_findState'](_0x24b02a);return _0x2bcb68?(_0x2bcb68['animations']=[],!(0x3d*-0x53+0x2*-0x72f+0x2225)):(M['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x24b02a),!(-0x81c+0x25b0+-0x1d93));}['play'](_0x5b3ea6){_0x5b3ea6&&this['_transitio'+'nToState'](_0x5b3ea6),this['_playing']=!(-0xec*0x24+0x4d6*0x4+0xdd8*0x1);}['pause'](){this['_playing']=!(0x584+0xb*-0x1e1+0xf28);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=no,this['_playing']=!(-0x10a3*0x1+0x8cc+-0x1*-0x7d8),this['_currTrans'+'itionTime']=0x421+-0x12*-0x101+0x766*-0x3,this['_totalTran'+'sitionTime']=0x2*0x1005+0x1de+-0x21e7*0x1,this['_isTransit'+'ioning']=!(-0x11d2+0x256d+-0x139a*0x1),this['_timeInSta'+'te']=0xd97+0xe5a+-0x1bf1,this['_timeInSta'+'teBefore']=-0x2cf*-0x3+-0x2b9+-0x5b4,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x2f5785){if(!this['_playing'])return;let _0x5b21a7,_0x31b3d4,_0x27f36b;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x2f5785*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x2f5785=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x5635dc=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x5635dc&&this['updateStat'+'eFromTrans'+'ition'](_0x5635dc),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x2f5785,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x586788=this['_totalTran'+'sitionTime']!==0x596+0x232a+-0x28c0?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x851*0x4+-0xd91+0x95e*0x5;for(let _0x1196e6=0x8*-0x14a+-0x1ce1+0x2731;_0x1196e6<this['_transitio'+'nPreviousS'+'tates']['length'];_0x1196e6++){_0x5b21a7=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x1196e6]['name']);const _0x5225f7=this['_transitio'+'nPreviousS'+'tates'][_0x1196e6]['weight'];for(let _0x1b2f1e=0x1a66+0x216f+-0x121*0x35;_0x1b2f1e<_0x5b21a7['animations']['length'];_0x1b2f1e++)_0x31b3d4=_0x5b21a7['animations'][_0x1b2f1e],_0x27f36b=this['_animEvalu'+'ator']['findClip'](_0x31b3d4['name']+'.previous.'+_0x1196e6),_0x27f36b&&(_0x27f36b['blendWeigh'+'t']=(0x703+0x12a3+-0x19a5-_0x586788)*_0x31b3d4['normalized'+'Weight']*_0x5225f7);}_0x5b21a7=this['activeStat'+'e'];for(let _0x38508c=-0xaf+-0x743*0x5+-0x3b3*-0xa;_0x38508c<_0x5b21a7['animations']['length'];_0x38508c++)_0x31b3d4=_0x5b21a7['animations'][_0x38508c],this['_animEvalu'+'ator']['findClip'](_0x31b3d4['name'])['blendWeigh'+'t']=_0x586788*_0x31b3d4['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(0x1f03+-0x1*0x236+-0x733*0x4);const _0x147033=this['activeStat'+'eAnimation'+'s']['length'],_0x1518b3=this['_animEvalu'+'ator']['clips']['length'];for(let _0xa1d43e=0xc3+-0x4e*0x65+-0x27*-0xc5;_0xa1d43e<_0x1518b3-_0x147033;_0xa1d43e++)this['_animEvalu'+'ator']['removeClip'](0x3d4*-0x1+0x16e4+0xa*-0x1e8);this['_transitio'+'nPreviousS'+'tates']=[],_0x5b21a7=this['activeStat'+'e'];for(let _0x3dd756=0x2221+-0x392*-0x3+-0x2cd7;_0x3dd756<_0x5b21a7['animations']['length'];_0x3dd756++)_0x31b3d4=_0x5b21a7['animations'][_0x3dd756],_0x27f36b=this['_animEvalu'+'ator']['findClip'](_0x31b3d4['name']),_0x27f36b&&(_0x27f36b['blendWeigh'+'t']=_0x31b3d4['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==Wo){_0x5b21a7=this['activeStat'+'e'];for(let _0x2535cf=-0x1*0x1f37+-0xc70*0x3+-0x1*-0x4487;_0x2535cf<_0x5b21a7['animations']['length'];_0x2535cf++)_0x31b3d4=_0x5b21a7['animations'][_0x2535cf],_0x27f36b=this['_animEvalu'+'ator']['findClip'](_0x31b3d4['name']),_0x27f36b&&(_0x27f36b['blendWeigh'+'t']=_0x31b3d4['normalized'+'Weight'],_0x31b3d4['parent']['syncAnimat'+'ions']&&(_0x27f36b['speed']=_0x31b3d4['speed']));}}this['_animEvalu'+'ator']['update'](_0x2f5785,this['activeStat'+'e']['hasAnimati'+'ons']);}}const Xd=new J(),Zl=new I(),Qn=new ae(),Jn=new ie(),eo=new le();class Ci extends rr{constructor(_0x3fc057,_0x569e7a,_0x6b8294,_0x4195b6,_0x4d9861){super(_0x569e7a),this['animCompon'+'ent']=_0x3fc057,this['_mask']=_0x4195b6,this['layerName']=_0x6b8294,this['layerIndex']=_0x4d9861;}static['_packFloat'](_0x17ecc1){return _0x17ecc1[-0x219*-0x11+0x2606+-0x49af];}static['_packBoole'+'an'](_0x5b02d7){return!!_0x5b02d7[-0x883+-0x6d6+-0xf59*-0x1];}static['_packVec2'](_0x45d456){return Xd['x']=_0x45d456[-0x11f*0x1c+-0x24f0+0x4454],Xd['y']=_0x45d456[-0x12fe+-0xb93+0x1e92],Xd;}static['_packVec3'](_0x3ffd0f){return Zl['x']=_0x3ffd0f[-0x568+0x1ee5+-0x197d],Zl['y']=_0x3ffd0f[-0x135a+-0x10b5*-0x1+-0x6*-0x71],Zl['z']=_0x3ffd0f[0x6c3*-0x2+-0xf6*0xd+0xd03*0x2],Zl;}static['_packVec4'](_0x3bbf6d){return Qn['x']=_0x3bbf6d[-0x4e4+-0xe2+-0x2e3*-0x2],Qn['y']=_0x3bbf6d[0xa04+-0x7d*-0x16+-0x45*0x4d],Qn['z']=_0x3bbf6d[0x2505+0x1c8d*-0x1+-0x876],Qn['w']=_0x3bbf6d[0x2be+-0x1*-0x1aab+-0x1d66],Qn;}static['_packColor'](_0x346c86){return Jn['r']=_0x346c86[-0x1022+0x1d5*-0x10+-0x15*-0x22a],Jn['g']=_0x346c86[-0x3*-0xaf6+0xdda+-0x2ebb],Jn['b']=_0x346c86[-0x3f9*0x1+-0xf9a*0x1+-0x1*-0x1395],Jn['a']=_0x346c86[0x251*-0x1+0xf44+-0xcf0],Jn;}static['_packQuat'](_0x42a52e){return eo['x']=_0x42a52e[-0x58d+0x250b+0x8b*-0x3a],eo['y']=_0x42a52e[-0x2429*-0x1+-0x1afb*0x1+-0x92d*0x1],eo['z']=_0x42a52e[-0x2044+-0xa52+0x2a98],eo['w']=_0x42a52e[-0x22e+-0x17e1+-0x1*-0x1a12],eo;}['resolve'](_0x5c987e){const _0x6de812=Gr['encode'](_0x5c987e['entityPath'],_0x5c987e['component'],_0x5c987e['propertyPa'+'th']);let _0x32b238=this['targetCach'+'e'][_0x6de812];if(_0x32b238)return _0x32b238;let _0x28f0c8,_0x5111b7,_0x300b09;switch(_0x5c987e['component']){case'entity':_0x28f0c8=this['_getEntity'+'FromHierar'+'chy'](_0x5c987e['entityPath']),_0x300b09=Gr['encode'](_0x28f0c8['path'],'entity',_0x5c987e['propertyPa'+'th']),_0x5111b7=_0x28f0c8;break;case'graph':if(_0x5111b7=this['findNode'](_0x5c987e),!_0x5111b7)return null;_0x300b09=Gr['encode'](_0x5111b7['path'],'graph',_0x5c987e['propertyPa'+'th']);break;default:if(_0x28f0c8=this['_getEntity'+'FromHierar'+'chy'](_0x5c987e['entityPath']),_0x5111b7=_0x28f0c8['findCompon'+'ent'](_0x5c987e['component']),!_0x5111b7)return null;_0x300b09=Gr['encode'](_0x28f0c8['path'],_0x5c987e['component'],_0x5c987e['propertyPa'+'th']);break;}return _0x32b238=this['_createAni'+'mTargetFor'+'Property'](_0x5111b7,_0x5c987e['propertyPa'+'th'],_0x300b09),this['targetCach'+'e'][_0x6de812]=_0x32b238,_0x32b238;}['update'](_0x492fac){const _0x403fa0=this['activeNode'+'s'];if(_0x403fa0){for(let _0x3a8d66=-0x1bfe+0x1e4d*0x1+-0x24f;_0x3a8d66<_0x403fa0['length'];_0x3a8d66++)_0x403fa0[_0x3a8d66]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x1f326b){if(!this['animCompon'+'ent']['entity']['name']===_0x1f326b[-0x14b0*0x1+0x162b+-0x17b])return null;const _0x451506=this['animCompon'+'ent']['entity'];return _0x1f326b['length']===0x1a67+-0x1b*-0xce+-0x3020?_0x451506:_0x451506['_parent']['findByPath'](_0x1f326b);}['_resolvePa'+'th'](_0x69679d,_0x3808aa,_0x26c3a7){const _0x517036=_0x3808aa['length']-(_0x26c3a7?-0x14e7+-0xb94*0x2+0x2c0f:-0x1ed9*0x1+-0x1272+-0x314c*-0x1);for(let _0x2146f6=-0x26b8+-0x151a+0x2*0x1de9;_0x2146f6<_0x517036;_0x2146f6++)_0x69679d=_0x69679d[_0x3808aa[_0x2146f6]];return _0x69679d;}['_setter'](_0x5fec85,_0x503e95,_0x32d58f){const _0x2a91cf=this['_resolvePa'+'th'](_0x5fec85,_0x503e95),_0x49166d=_0x503e95[_0x503e95['length']-(0x1ea9*-0x1+-0x4d3+-0x17*-0x18b)],_0x4ae12c='set'+_0x49166d['substring'](-0xb*0x1+0x15cf+-0x15c4,-0x421+-0x2465+0x2887)['toUpperCas'+'e']()+_0x49166d['substring'](0x9de+-0x1*0x121+0x8bc*-0x1);if(_0x2a91cf[_0x4ae12c]){let _0x4eaa13=_0x2a91cf['get'+_0x49166d['substring'](0x68b*-0x1+-0xfd1+0x165c,-0x852+0x2*0x6f+0x775)['toUpperCas'+'e']()+_0x49166d['substring'](0x1*-0x1990+0x1*-0x506+0x1e97)]['bind'](_0x2a91cf)();_0x4eaa13=[_0x4eaa13['x'],_0x4eaa13['y'],_0x4eaa13['z'],_0x4eaa13['w']];const _0x465108=_0x2a91cf[_0x4ae12c]['bind'](_0x2a91cf);return{'set':_0x7f3cb7=>{_0x465108(_0x32d58f(_0x7f3cb7));},'get':()=>_0x4eaa13};}const _0x3ad078=_0x2a91cf[_0x49166d];if(typeof _0x3ad078=='object'&&_0x3ad078['hasOwnProp'+'erty']('copy'))return function(_0x56232d){_0x3ad078['copy'](_0x32d58f(_0x56232d));};if([J,I,ae,ie,le]['indexOf'](_0x2a91cf['constructo'+'r'])!==-(-0x7*-0x587+0x5e*0x29+-0x35be)&&_0x503e95['length']>0x7*0x35c+0x42e*0x2+-0x1fdf){const _0x11f0c2=_0x503e95['length']>-0x200+-0x52*0x35+-0x1e6*-0xa?this['_resolvePa'+'th'](_0x5fec85,_0x503e95['slice'](-0x1591*0x1+-0xc90+0x2221*0x1,-(0x36f*-0x2+-0x7ce+0xead))):_0x5fec85,_0x478147=_0x503e95[_0x503e95['length']-(0xb76+-0x33b*-0xc+-0x3238)];return function(_0x1ed14b){_0x2a91cf[_0x49166d]=_0x32d58f(_0x1ed14b),_0x11f0c2[_0x478147]=_0x2a91cf;};}return function(_0x32ac64){_0x2a91cf[_0x49166d]=_0x32d58f(_0x32ac64);};}['_createAni'+'mTargetFor'+'Property'](_0x11408d,_0x5f393b,_0x5d1239){if(this['handlers']&&_0x5f393b[-0x1477+-0xe9*-0xe+0x7b9]['startsWith']('weight.'))return this['handlers']['weight'](_0x11408d,_0x5f393b[-0x5*-0xf3+-0x1b2e*0x1+0x166f]['replace']('weight.',''));if(this['handlers']&&_0x5f393b[-0x4b3*-0x5+0x228d+-0x3a0c]==='material'&&_0x5f393b['length']===-0x23f3+0x2*0xfa7+0x4a7){const _0x209b67=_0x5f393b[0x3bb*0x7+-0x54f*0x1+-0x6ef*0x3];if(_0x209b67['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x11408d,_0x209b67);}const _0x235960=this['_resolvePa'+'th'](_0x11408d,_0x5f393b,!(-0x9f8+-0x63*-0x25+0x457*-0x1));if(typeof _0x235960>'u')return null;let _0x4cb8ad,_0x184bf7,_0x55d3c9;if(typeof _0x235960=='number')_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packFloat']),_0x184bf7='vector',_0x55d3c9=-0x1b6c+0x173f+0x2*0x217;else{if(typeof _0x235960=='boolean')_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packBoole'+'an']),_0x184bf7='vector',_0x55d3c9=0xf4f*-0x1+-0x5e5+0x1535;else{if(typeof _0x235960=='object')switch(_0x235960['constructo'+'r']){case J:_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packVec2']),_0x184bf7='vector',_0x55d3c9=-0x1*-0x883+-0x1d94+0x1513;break;case I:_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packVec3']),_0x184bf7='vector',_0x55d3c9=-0x159c+0xfdf+0x4*0x170;break;case ae:_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packVec4']),_0x184bf7='vector',_0x55d3c9=0x1*0x2615+-0x38a+-0x2287;break;case ie:_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packColor']),_0x184bf7='vector',_0x55d3c9=0x21f4+-0x1*0x1263+0x1*-0xf8d;break;case le:_0x4cb8ad=this['_setter'](_0x11408d,_0x5f393b,Ci['_packQuat']),_0x184bf7='quaternion',_0x55d3c9=-0xc43*-0x3+-0xec3+-0x272*0x9;break;default:return null;}}}return _0x5f393b['indexOf']('material')!==-(0x471*0x1+-0x64a+-0x6*-0x4f)?new Vf(_0x4ed263=>{_0x4cb8ad(_0x4ed263),_0x11408d['material']['update']();},_0x184bf7,_0x55d3c9,_0x5d1239):new Vf(_0x4cb8ad,_0x184bf7,_0x55d3c9,_0x5d1239);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x37ac0d={},_0x55867a=function(_0x3b9b10){_0x37ac0d[_0x3b9b10['name']]=_0x3b9b10;for(let _0x5b48f2=0x869+-0xc5f*0x2+0x1055;_0x5b48f2<_0x3b9b10['children']['length'];++_0x5b48f2)_0x55867a(_0x3b9b10['children'][_0x5b48f2]);};_0x55867a(this['graph']),this['nodes']=_0x37ac0d;}}class jD{constructor(_0x34b529,_0x424fc4,_0x450ebf,_0x20ec47=-0x1adb+0x2*-0xe87+0x37ea,_0x669191=Yy){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0xa4d+0x126a+-0x81d),h(this,'_blendTime'+'Elapsed',0x25e5+-0x11c4+-0x1421),h(this,'_startingW'+'eight',0x15eb+-0x71f+0x3b3*-0x4),h(this,'_targetWei'+'ght',-0x1*0x23b+-0xde7*0x1+0x1022),(this['_name']=_0x34b529,this['_controlle'+'r']=_0x424fc4,this['_component']=_0x450ebf,this['_weight']=_0x20ec47,this['_blendType']=_0x669191);}get['name'](){return this['_name'];}set['playing'](_0x3124f4){this['_controlle'+'r']['playing']=_0x3124f4;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x29d3a4){const _0x546913=this['_controlle'+'r'],_0x234289=_0x546913['playing'];_0x546913['playing']=!(0x5*-0x427+0x1968+-0x4a5),_0x546913['activeStat'+'eCurrentTi'+'me']=_0x29d3a4,_0x234289||_0x546913['update'](-0x189*0x2+-0x1*-0x2209+0x1ef7*-0x1),_0x546913['playing']=_0x234289;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x45851a){this['_weight']=_0x45851a,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x565ec8){_0x565ec8!==this['_blendType']&&(this['_blendType']=_0x565ec8,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x54eaa6){this['_controlle'+'r']['assignMask'](_0x54eaa6)&&this['_component']['rebind'](),this['_mask']=_0x54eaa6;}get['mask'](){return this['_mask'];}['play'](_0x2174f4){this['_controlle'+'r']['play'](_0x2174f4);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x440b02){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x440b02):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=-0x1ad3+0x1450+-0x1*-0x683,this['_blendTime'+'Elapsed']=0x2*0x123b+0x1*0xe76+-0x32ec,this['_startingW'+'eight']=-0x35*-0xb0+-0x1645+0x4b9*-0x3,this['_targetWei'+'ght']=0x2563+-0x3*-0x2a1+-0x2d46)),this['_controlle'+'r']['update'](_0x440b02);}['blendToWei'+'ght'](_0x1bfc54,_0x5bbcbd){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x1bfc54,this['_blendTime']=Math['max'](0x1bd4+0xac1*-0x2+-0x652,_0x5bbcbd),this['_blendTime'+'Elapsed']=0x3*-0xb37+-0x53*-0x1b+0x18e4;}['assignAnim'+'ation'](_0x68829c,_0x37b24b,_0x3e3603,_0x555c1d){if(!(_0x37b24b instanceof Gi)){M['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x68829c,_0x37b24b,_0x3e3603,_0x555c1d),this['_controlle'+'r']['_transitio'+'ns']['length']===0x19e2+0x121d+-0x2bff&&this['_controlle'+'r']['_transitio'+'ns']['push'](new ic({'from':'START','to':_0x68829c})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(0xeb1*-0x1+0x2*0xf6b+-0x1025));}['removeNode'+'Animations'](_0x5bf1f6){this['_controlle'+'r']['removeNode'+'Animations'](_0x5bf1f6)&&(this['_component']['playing']=!(0xd3a*0x2+-0xdfd*-0x2+-0x366d));}['getAnimati'+'onAsset'](_0x4773d1){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x4773d1];}['transition'](_0x434f3b,_0x4b529b=0x821+0x953+-0x1174,_0x42637b=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new ic({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x434f3b,'time':_0x4b529b,'transitionOffset':_0x42637b}));}}class vh{constructor(_0x48e048){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x48e048['layers']))this['_layers']=_0x48e048['layers'];else for(const _0x111d2d in _0x48e048['layers']){const _0x289e0f=_0x48e048['layers'][_0x111d2d],_0x36996c={'name':_0x289e0f['name'],'blendType':_0x289e0f['blendType'],'weight':_0x289e0f['weight'],'states':[],'transitions':[]};for(let _0x40fe00=-0x35*-0xf+-0x1529*-0x1+0x1844*-0x1;_0x40fe00<_0x289e0f['states']['length'];_0x40fe00++)_0x36996c['states']['push'](_0x48e048['states'][_0x289e0f['states'][_0x40fe00]]);for(let _0x1f22c8=0x1*-0x1fd2+-0x18*-0x15d+0x2e*-0x5;_0x1f22c8<_0x289e0f['transition'+'s']['length'];_0x1f22c8++){const _0x5f09de=_0x48e048['transition'+'s'][_0x289e0f['transition'+'s'][_0x1f22c8]];if(_0x5f09de['conditions']&&!Array['isArray'](_0x5f09de['conditions'])){const _0x2abcc7=Object['keys'](_0x5f09de['conditions']),_0x3770ab=[];for(let _0x76f0e3=0xb*-0x18e+0x2b*-0x3+0x119b;_0x76f0e3<_0x2abcc7['length'];_0x76f0e3++){const _0x51c95d=_0x5f09de['conditions'][_0x2abcc7[_0x76f0e3]];_0x51c95d['parameterN'+'ame']&&_0x3770ab['push'](_0x51c95d);}_0x5f09de['conditions']=_0x3770ab;}Number['isInteger'](_0x5f09de['from'])&&(_0x5f09de['from']=_0x48e048['states'][_0x5f09de['from']]['name']),Number['isInteger'](_0x5f09de['to'])&&(_0x5f09de['to']=_0x48e048['states'][_0x5f09de['to']]['name']),_0x36996c['transition'+'s']['push'](_0x5f09de);}this['_layers']['push'](_0x36996c);}for(const _0x97af7c in _0x48e048['parameters']){const _0x162063=_0x48e048['parameters'][_0x97af7c];this['_parameter'+'s'][_0x162063['name']]={'type':_0x162063['type'],'value':_0x162063['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class Jy extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0xede+0x2623*0x1+0x35*-0x100),h(this,'_activate',!(0xc25*-0x1+-0x26e6+0x330b*0x1)),h(this,'_playing',!(0xa7a+-0x1851+0xdd8)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0x116*-0x14+0x1983+-0x3ca)),h(this,'findParame'+'ter',_0x26a3ae=>this['_parameter'+'s'][_0x26a3ae]),h(this,'consumeTri'+'gger',_0x200035=>{this['_consumedT'+'riggers']['add'](_0x200035);});}set['stateGraph'+'Asset'](_0xe05b35){if(_0xe05b35===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x55010a,_0x23f2cc;_0xe05b35 instanceof me?(_0x55010a=_0xe05b35['id'],_0x23f2cc=this['system']['app']['assets']['get'](_0x55010a),_0x23f2cc||(this['system']['app']['assets']['add'](_0xe05b35),_0x23f2cc=this['system']['app']['assets']['get'](_0x55010a))):(_0x55010a=_0xe05b35,_0x23f2cc=this['system']['app']['assets']['get'](_0x55010a)),!(!_0x23f2cc||this['_stateGrap'+'hAsset']===_0x55010a)&&(_0x23f2cc['resource']?(this['_stateGrap'+'h']=_0x23f2cc['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x23f2cc['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x23f2cc['once']('load',_0x275723=>{this['_stateGrap'+'h']=_0x275723['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x23f2cc['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x23f2cc)),this['_stateGrap'+'hAsset']=_0x55010a);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x53452e){this['_normalize'+'Weights']=_0x53452e,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x51c87e){this['_animation'+'Assets']=_0x51c87e,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0xc66d26){this['_speed']=_0xc66d26;}get['speed'](){return this['_speed'];}set['activate'](_0x372f7d){this['_activate']=_0x372f7d;}get['activate'](){return this['_activate'];}set['playing'](_0x3708fc){this['_playing']=_0x3708fc;}get['playing'](){return this['_playing'];}set['rootBone'](_0x5ce5a1){if(typeof _0x5ce5a1=='string'){const _0x3060be=this['entity']['root']['findByGuid'](_0x5ce5a1);M['assert'](_0x3060be,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x5ce5a1+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x3060be;}else _0x5ce5a1 instanceof ot?this['_rootBone']=_0x5ce5a1:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x507f89){this['_stateGrap'+'h']=_0x507f89;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x59a07f){this['_layerIndi'+'ces']=_0x59a07f;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0xf88a3d){this['_parameter'+'s']=_0xf88a3d;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x42f299){this['_targets']=_0x42f299;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0xa04ae1=-0x2251*-0x1+0x22bc+-0xb*0x647;_0xa04ae1<this['_layers']['length'];_0xa04ae1++)if(!this['_layers'][_0xa04ae1]['playable'])return!(-0x233a+0xb*0x1d7+0xefe);return!(0x374+-0x15ee+-0x3b2*-0x5);}get['baseLayer'](){return this['_layers']['length']>-0x1*0xa3+0x36c+-0x2c9?this['_layers'][-0x6aa*-0x4+-0x518+0x564*-0x4]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x5acc38){const _0x5364d7=this['animationA'+'ssets'],_0x3dc528=this['layers']['map'](_0x24bc42=>_0x24bc42['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new vh(_0x5acc38['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x5364d7,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x249aa5,_0x3700ec)=>{_0x249aa5['mask']=_0x3dc528[_0x3700ec];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x29068a=Object['values'](this['_targets']);for(let _0x1debff=0x22a+0x1682+-0x18ac;_0x1debff<_0x29068a['length'];_0x1debff++)_0x29068a[_0x1debff]['dirty']=!(0x9eb+0x5*0x3bc+-0x1c97);}['_addLayer']({name:_0x446504,states:_0x62c682,transitions:_0x380438,weight:_0x49312e,mask:_0x309d8c,blendType:_0x4985d4}){let _0x3955eb;this['rootBone']?_0x3955eb=this['rootBone']:_0x3955eb=this['entity'];const _0xf70a79=this['_layers']['length'],_0x35744c=new Ci(this,_0x3955eb,_0x446504,_0x309d8c,_0xf70a79),_0x3cc5bf=new Ky(_0x35744c),_0x589e38=new qD(_0x3cc5bf,_0x62c682,_0x380438,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new jD(_0x446504,_0x589e38,this,_0x49312e,_0x4985d4)),this['_layerIndi'+'ces'][_0x446504]=_0xf70a79,this['_layers'][_0xf70a79];}['addLayer'](_0x1ad188,_0xeac158,_0x36d317,_0x411282){const _0x1f6713=this['findAnimat'+'ionLayer'](_0x1ad188);if(_0x1f6713)return _0x1f6713;const _0x5d658d=[{'name':'START','speed':0x1}],_0x57ffbb=[];return this['_addLayer']({'name':_0x1ad188,'states':_0x5d658d,'transitions':_0x57ffbb,'weight':_0xeac158,'mask':_0x36d317,'blendType':_0x411282});}['_assignPar'+'ameters'](_0x596b8b){this['_parameter'+'s']={};const _0xcd3d36=Object['keys'](_0x596b8b['parameters']);for(let _0x436ba0=0x5dd+-0xb*-0x1d3+0x19ee*-0x1;_0x436ba0<_0xcd3d36['length'];_0x436ba0++){const _0x5cb21d=_0xcd3d36[_0x436ba0];this['_parameter'+'s'][_0x5cb21d]={'type':_0x596b8b['parameters'][_0x5cb21d]['type'],'value':_0x596b8b['parameters'][_0x5cb21d]['value']};}}['loadStateG'+'raph'](_0x1830ad){this['_stateGrap'+'h']=_0x1830ad,this['_assignPar'+'ameters'](_0x1830ad),this['_layers']=[];let _0x3969f6=!(-0x3*-0x2+0x76d+0x2*-0x3b9);for(let _0x23138f=-0x1d39+0xce6+0x3*0x571;_0x23138f<_0x1830ad['layers']['length'];_0x23138f++){const _0xd22872=_0x1830ad['layers'][_0x23138f];this['_addLayer']({..._0xd22872}),_0xd22872['states']['some'](_0xf303b3=>_0xf303b3['blendTree'])&&(_0x3969f6=!(0x10*0x266+0x146*0x2+-0x28ec));}_0x3969f6||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x3ffd11=0x5*0x6c7+0xa1e+-0x2c01;_0x3ffd11<this['_layers']['length'];_0x3ffd11++){const _0x48de8a=this['_layers'][_0x3ffd11],_0x26d943=_0x48de8a['name'];for(let _0x3bd319=-0x7fd+0x141d*-0x1+0x1c1a;_0x3bd319<_0x48de8a['states']['length'];_0x3bd319++){const _0x3f7df8=_0x48de8a['states'][_0x3bd319];if(sc['indexOf'](_0x3f7df8)===-(0x2*-0x7c5+-0x949*-0x1+0x6*0x10b)){const _0x4f0ca7=_0x26d943+':'+_0x3f7df8;this['_animation'+'Assets'][_0x4f0ca7]||(this['_animation'+'Assets'][_0x4f0ca7]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0xf9afcc=0x2e8*0x3+0x1*-0x22c6+0x17*0x122;_0xf9afcc<this['_layers']['length'];_0xf9afcc++){const _0x5a9ef1=this['_layers'][_0xf9afcc];for(let _0x488622=0x1775+-0x1693+-0x2*0x71;_0x488622<_0x5a9ef1['states']['length'];_0x488622++){const _0xa1cbd2=_0x5a9ef1['states'][_0x488622];if(sc['indexOf'](_0xa1cbd2)!==-(-0x15e1+-0x15e7+0x2bc9))continue;const _0x2eac4b=this['_animation'+'Assets'][_0x5a9ef1['name']+':'+_0xa1cbd2];if(!_0x2eac4b||!_0x2eac4b['asset']){this['findAnimat'+'ionLayer'](_0x5a9ef1['name'])['assignAnim'+'ation'](_0xa1cbd2,Gi['EMPTY']);continue;}const _0xa5e38c=_0x2eac4b['asset'],_0x5ccca4=this['system']['app']['assets']['get'](_0xa5e38c);_0x5ccca4&&(_0x5ccca4['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x5a9ef1['name'],_0xa1cbd2,_0x5ccca4):(_0x5ccca4['once']('load',function(_0x5d3059,_0x1aaba9){return function(_0x43fbdb){this['onAnimatio'+'nAssetLoad'+'ed'](_0x5d3059,_0x1aaba9,_0x43fbdb);}['bind'](this);}['bind'](this)(_0x5a9ef1['name'],_0xa1cbd2)),this['system']['app']['assets']['load'](_0x5ccca4)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x29f4fd,_0x54faa9,_0x15fb79){this['findAnimat'+'ionLayer'](_0x29f4fd)['assignAnim'+'ation'](_0x54faa9,_0x15fb79['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(-0x1eb8+-0x113d+0x7*0x6da),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x240f62=0x32*-0x31+0xec*0xa+-0x6*-0xf;_0x240f62<this['_layers']['length'];_0x240f62++){const _0x1bf54c=this['_layers'][_0x240f62]['playing'];this['_layers'][_0x240f62]['reset'](),this['_layers'][_0x240f62]['playing']=_0x1bf54c;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x4e6977=>{this['_targets'][_0x4e6977]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x4a5d81=-0x10ff*-0x1+0x1e19+-0x2c*0x112;_0x4a5d81<this['_layers']['length'];_0x4a5d81++)this['_layers'][_0x4a5d81]['rebind']();}['findAnimat'+'ionLayer'](_0x493854){const _0x22909b=this['_layerIndi'+'ces'][_0x493854];return this['_layers'][_0x22909b]||null;}['addAnimati'+'onState'](_0x28029a,_0x14377d,_0x37f5dd=-0x3*0xc77+0x10*-0x233+0x4896,_0x1a2e84=!(0xf43*-0x1+-0x15d6+0x2519),_0x12e5d0='Base'){var _0x3681c5;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new vh({'layers':[{'name':_0x12e5d0,'states':[{'name':'START','speed':0x1},{'name':_0x28029a,'speed':_0x37f5dd,'loop':_0x1a2e84,'defaultState':!(0x1*0x22e4+-0x26e5*-0x1+-0x49c9)}],'transitions':[{'from':'START','to':_0x28029a}]}],'parameters':{}}));const _0x2f6e77=this['findAnimat'+'ionLayer'](_0x12e5d0);_0x2f6e77?_0x2f6e77['assignAnim'+'ation'](_0x28029a,_0x14377d,_0x37f5dd,_0x1a2e84):(_0x3681c5=this['addLayer'](_0x12e5d0))==null||_0x3681c5['assignAnim'+'ation'](_0x28029a,_0x14377d,_0x37f5dd,_0x1a2e84);}['assignAnim'+'ation'](_0x409fe8,_0x346f7e,_0x4ac147,_0x4a3a0f=-0xbb5+-0xa3*0x3a+0x2*0x1852,_0x168d61=!(-0x8cd+0x1e38+-0x156b*0x1)){if(!this['_stateGrap'+'h']&&_0x409fe8['indexOf']('.')===-(-0x2471+-0x12dc+0x374e)){this['loadStateG'+'raph'](new vh({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x409fe8,'speed':_0x4a3a0f,'loop':_0x168d61,'defaultState':!(0x2*0x539+0x4*0x1da+-0x11da)}],'transitions':[{'from':'START','to':_0x409fe8}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x409fe8,_0x346f7e);return;}const _0x2943f9=_0x4ac147?this['findAnimat'+'ionLayer'](_0x4ac147):this['baseLayer'];if(!_0x2943f9){M['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x2943f9['assignAnim'+'ation'](_0x409fe8,_0x346f7e,_0x4a3a0f,_0x168d61);}['removeNode'+'Animations'](_0x279237,_0x2d55c7){const _0x5da342=_0x2d55c7?this['findAnimat'+'ionLayer'](_0x2d55c7):this['baseLayer'];if(!_0x5da342){M['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x5da342['removeNode'+'Animations'](_0x279237);}['getParamet'+'erValue'](_0x25991b,_0x168dcc){const _0x3bf462=this['_parameter'+'s'][_0x25991b];if(_0x3bf462&&_0x3bf462['type']===_0x168dcc)return _0x3bf462['value'];M['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x25991b+('\x22\x20of\x20type\x20'+'\x22')+_0x168dcc+'\x22');}['setParamet'+'erValue'](_0xa90724,_0x42f071,_0x5dca90){const _0x3df7be=this['_parameter'+'s'][_0xa90724];if(_0x3df7be&&_0x3df7be['type']===_0x42f071){_0x3df7be['value']=_0x5dca90;return;}M['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0xa90724+('\x22\x20of\x20type\x20'+'\x22')+_0x42f071+'\x22');}['getFloat'](_0x4bedfc){return this['getParamet'+'erValue'](_0x4bedfc,j_);}['setFloat'](_0xaadad3,_0x10aa78){this['setParamet'+'erValue'](_0xaadad3,j_,_0x10aa78);}['getInteger'](_0xfc3158){return this['getParamet'+'erValue'](_0xfc3158,q_);}['setInteger'](_0x3a8a9e,_0x52dc88){typeof _0x52dc88=='number'&&_0x52dc88%(-0x104d+0xd1+0x41*0x3d)===-0x1101*0x1+0x1f5+0xf0c?this['setParamet'+'erValue'](_0x3a8a9e,q_,_0x52dc88):M['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x3a8a9e,_0x52dc88);}['getBoolean'](_0x4bb1bb){return this['getParamet'+'erValue'](_0x4bb1bb,Y_);}['setBoolean'](_0x309ee9,_0x17c471){this['setParamet'+'erValue'](_0x309ee9,Y_,!!_0x17c471);}['getTrigger'](_0x42590c){return this['getParamet'+'erValue'](_0x42590c,yh);}['setTrigger'](_0x494688,_0xfe43ce=!(-0x976+0x1b57+-0x11e0)){this['setParamet'+'erValue'](_0x494688,yh,!(-0xa*0x158+-0xfd*-0x16+-0x84e)),_0xfe43ce&&this['_consumedT'+'riggers']['add'](_0x494688);}['resetTrigg'+'er'](_0x25e047){this['setParamet'+'erValue'](_0x25e047,yh,!(0x1fa9+0x344+-0x22ec));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x302d67){for(let _0x3f24d2=0x186*0x19+0x166b+0x3*-0x142b;_0x3f24d2<this['layers']['length'];_0x3f24d2++)this['layers'][_0x3f24d2]['update'](_0x302d67*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x15363f=>{this['parameters'][_0x15363f]['value']=!(-0x1a40+-0xc1f*0x1+0x2660);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x591c1e,_0x4883fa){_0x591c1e['rootBone']&&_0x4883fa[_0x591c1e['rootBone']['getGuid']()]?this['rootBone']=_0x4883fa[_0x591c1e['rootBone']['getGuid']()]:this['rebind']();}}class YD{constructor(){this['enabled']=!(-0x223b+0xa9+0x2192);}}const $f=['enabled'];class KD extends lt{constructor(_0x1fd528){super(_0x1fd528),this['id']='anim',this['ComponentT'+'ype']=Jy,this['DataType']=YD,this['schema']=$f,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x47886f,_0x5caaef,_0xa135e1){super['initialize'+'ComponentD'+'ata'](_0x47886f,_0x5caaef,$f);const _0x456cdc=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x5caaef)['forEach'](_0xdcd9e6=>{_0x456cdc['includes'](_0xdcd9e6)||(_0x47886f[_0xdcd9e6]=_0x5caaef[_0xdcd9e6]);}),_0x5caaef['stateGraph']&&(_0x47886f['stateGraph']=_0x5caaef['stateGraph'],_0x47886f['loadStateG'+'raph'](_0x47886f['stateGraph'])),_0x5caaef['layers']&&_0x5caaef['layers']['forEach']((_0x34b6bd,_0x519e93)=>{_0x34b6bd['_controlle'+'r']['states']['forEach'](_0x4ae57f=>{_0x34b6bd['_controlle'+'r']['_states'][_0x4ae57f]['_animation'+'List']['forEach'](_0x189e97=>{if(!_0x189e97['animTrack']||_0x189e97['animTrack']===Gi['EMPTY']){const _0x2d3c9a=this['app']['assets']['get'](_0x34b6bd['_component']['_animation'+'Assets'][_0x34b6bd['name']+':'+_0x189e97['name']]['asset']);_0x2d3c9a&&!_0x2d3c9a['loaded']&&_0x2d3c9a['once']('load',()=>{_0x47886f['layers'][_0x519e93]['assignAnim'+'ation'](_0x189e97['name'],_0x2d3c9a['resource']);});}else _0x47886f['layers'][_0x519e93]['assignAnim'+'ation'](_0x189e97['name'],_0x189e97['animTrack']);});});}),_0x5caaef['animationA'+'ssets']&&(_0x47886f['animationA'+'ssets']=Object['assign'](_0x47886f['animationA'+'ssets'],_0x5caaef['animationA'+'ssets'])),_0x5caaef['masks']&&Object['keys'](_0x5caaef['masks'])['forEach'](_0x2e731b=>{if(_0x47886f['layers'][_0x2e731b]){const _0x56e7c9=_0x5caaef['masks'][_0x2e731b]['mask'],_0x1a6ddd={};Object['keys'](_0x56e7c9)['forEach'](_0x46d6d4=>{_0x1a6ddd[decodeURI(_0x46d6d4)]=_0x56e7c9[_0x46d6d4];}),_0x47886f['layers'][_0x2e731b]['mask']=_0x1a6ddd;}});}['onAnimatio'+'nUpdate'](_0x1a3df2){const _0x482188=this['store'];for(const _0x3855ee in _0x482188)if(_0x482188['hasOwnProp'+'erty'](_0x3855ee)){const _0x80c93b=_0x482188[_0x3855ee]['entity']['anim'];_0x80c93b['data']['enabled']&&_0x80c93b['entity']['enabled']&&_0x80c93b['playing']&&_0x80c93b['update'](_0x1a3df2);}}['cloneCompo'+'nent'](_0x4d4b2d,_0x205d31){let _0x4c537e;(!_0x4d4b2d['anim']['rootBone']||_0x4d4b2d['anim']['rootBone']===_0x4d4b2d)&&(_0x4c537e={},_0x4d4b2d['anim']['layers']['forEach']((_0x2ea306,_0x3358ea)=>{if(_0x2ea306['mask']){const _0x7fe46b={};Object['keys'](_0x2ea306['mask'])['forEach'](_0x6b0910=>{const _0x419c9e=_0x6b0910['split']('/');_0x419c9e['shift']();const _0x3dbbf4=[_0x205d31['name'],..._0x419c9e]['join']('/');_0x7fe46b[_0x3dbbf4]=_0x2ea306['mask'][_0x6b0910];}),_0x4c537e[_0x3358ea]={'mask':_0x7fe46b};}}));const _0x1d9530={'enabled':_0x4d4b2d['anim']['enabled'],'stateGraphAsset':_0x4d4b2d['anim']['stateGraph'+'Asset'],'animationAssets':_0x4d4b2d['anim']['animationA'+'ssets'],'speed':_0x4d4b2d['anim']['speed'],'activate':_0x4d4b2d['anim']['activate'],'playing':_0x4d4b2d['anim']['playing'],'rootBone':_0x4d4b2d['anim']['rootBone'],'stateGraph':_0x4d4b2d['anim']['stateGraph'],'layers':_0x4d4b2d['anim']['layers'],'layerIndices':_0x4d4b2d['anim']['layerIndic'+'es'],'parameters':_0x4d4b2d['anim']['parameters'],'normalizeWeights':_0x4d4b2d['anim']['normalizeW'+'eights'],'masks':_0x4c537e};return this['addCompone'+'nt'](_0x205d31,_0x1d9530);}['onBeforeRe'+'move'](_0x59b8b7,_0x2a8af4){_0x2a8af4['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors'](Jy['prototype'],$f);class ev extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x460375=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x460375);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class ZD{constructor(){this['enabled']=!(0x2*0xd94+0x1*-0x61+-0x1ac7);}}const tv=['enabled'];class QD extends lt{constructor(_0x5c04a5){super(_0x5c04a5),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=ev,this['DataType']=ZD,this['schema']=tv,this['manager']=_0x5c04a5['soundManag'+'er'],M['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5bbe99,_0x2ef83b,_0x2898cd){_0x2898cd=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x5bbe99,_0x2ef83b,_0x2898cd);}['onUpdate'](_0x89a35f){if(this['current']){const _0x4af5f0=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x4af5f0);const _0x4c4e53=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x4c4e53);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](ev['prototype'],tv);const Xf=0x1291*0x1+0x5*0x29+-0x135e,Z_=0x4b*0x7d+-0xed9*-0x2+-0x84a*0x8,xh='group',qf='image',sv='text',Th='stretch',JD='contain',eL='cover',dt={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},ul={};ul[dt['DEFAULT']]='_defaultTi'+'nt',ul[dt['HOVER']]='hoverTint',ul[dt['PRESSED']]='pressedTin'+'t',ul[dt['INACTIVE']]='inactiveTi'+'nt';const ml={};ml[dt['DEFAULT']]='_defaultSp'+'riteAsset',ml[dt['HOVER']]='hoverSprit'+'eAsset',ml[dt['PRESSED']]='pressedSpr'+'iteAsset',ml[dt['INACTIVE']]='inactiveSp'+'riteAsset';const pl={};pl[dt['DEFAULT']]='_defaultSp'+'riteFrame',pl[dt['HOVER']]='hoverSprit'+'eFrame',pl[dt['PRESSED']]='pressedSpr'+'iteFrame',pl[dt['INACTIVE']]='inactiveSp'+'riteFrame';class Pt extends we{constructor(_0x5c0901,_0x1b61b3){super(_0x5c0901,_0x1b61b3),h(this,'_visualSta'+'te',dt['DEFAULT']),h(this,'_isHoverin'+'g',!(-0x9*0x1f+-0x648+0x4*0x1d8)),h(this,'_hoveringC'+'ounter',-0x1*-0x1d69+-0xdcd*0x1+-0xf9c),h(this,'_isPressed',!(0x1*-0x373+0x2*-0x4c6+0xd0*0x10)),h(this,'_defaultTi'+'nt',new ie(-0x2*-0xa88+0xb1c+-0x202b,-0x3be*0x9+0x1fac*0x1+-0x67*-0x5,0x1099+-0x3e2+-0xcb6,-0x1*-0x1801+0x1*0xd84+-0x2584)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x147c+0x24a9+-0x3925),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=dt['DEFAULT'],this['_isHoverin'+'g']=!(0x3cd*-0x1+-0x4ad+0x87b),this['_hoveringC'+'ounter']=-0x1*-0x1652+-0x1e0c+0x17*0x56,this['_isPressed']=!(0x2f*-0x59+-0x3*0xaad+0x305f),this['_defaultTi'+'nt']=new ie(-0x7c8+-0x1925+-0x1077*-0x2,-0x1*-0x2363+-0x83*-0x7+0x39*-0xaf,0x2580+-0x236b+-0x214,0x199*0x4+-0x18d*-0x11+-0x20c0),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=0x7*0x2ef+0x1a9b+0x35e*-0xe,this['_toggleLif'+'ecycleList'+'eners']('on',_0x5c0901));}get['data'](){const _0x27f93e=this['system']['store'][this['entity']['getGuid']()];return _0x27f93e?_0x27f93e['data']:null;}set['enabled'](_0x42e522){this['_setValue']('enabled',_0x42e522);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x5deeed){this['_setValue']('active',_0x5deeed);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x379080){if(this['_imageEnti'+'ty']!==_0x379080){const _0x499258=typeof _0x379080=='string';if(this['_imageEnti'+'ty']&&_0x499258&&this['_imageEnti'+'ty']['getGuid']()===_0x379080)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x379080 instanceof He?this['_imageEnti'+'ty']=_0x379080:_0x499258?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x379080)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x499258&&_0x379080&&(this['data']['imageEntit'+'y']=_0x379080);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x32be47){this['_setValue']('hitPadding',_0x32be47);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x64ef60){this['_setValue']('transition'+'Mode',_0x64ef60);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x5d0168){this['_setValue']('hoverTint',_0x5d0168);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x2a78fb){this['_setValue']('pressedTin'+'t',_0x2a78fb);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x14a7f3){this['_setValue']('inactiveTi'+'nt',_0x14a7f3);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x256d5b){this['_setValue']('fadeDurati'+'on',_0x256d5b);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x1b90cf){this['_setValue']('hoverSprit'+'eAsset',_0x1b90cf);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x46abb9){this['_setValue']('hoverSprit'+'eFrame',_0x46abb9);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0xb6fa80){this['_setValue']('pressedSpr'+'iteAsset',_0xb6fa80);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x218dbf){this['_setValue']('pressedSpr'+'iteFrame',_0x218dbf);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x13e917){this['_setValue']('inactiveSp'+'riteAsset',_0x13e917);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x5f5454){this['_setValue']('inactiveSp'+'riteFrame',_0x5f5454);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x2e69d2,_0x379be6){const _0x28b8f1=this['data'],_0x1c26bb=_0x28b8f1[_0x2e69d2];_0x28b8f1[_0x2e69d2]=_0x379be6,this['fire']('set',_0x2e69d2,_0x1c26bb,_0x379be6);}['_toggleLif'+'ecycleList'+'eners'](_0x420f02,_0x5f42da){var _0x4dd913;this[_0x420f02]('set_active',this['_onSetActi'+'ve'],this),this[_0x420f02]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x420f02]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x420f02]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x420f02==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x4dd913=this['_evtElemen'+'tAdd'])==null||_0x4dd913['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0xe02176,_0x4526ae,_0x4d35ad){_0x4526ae!==_0x4d35ad&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x422d20,_0x1df73f,_0x26ae96){_0x1df73f!==_0x26ae96&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x1df73f),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x1ce01d,_0x153bc6,_0x3fd595){_0x153bc6!==_0x3fd595&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x211139,_0xeee34b;(_0x211139=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x211139['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0xeee34b=this['_imageEnti'+'ty'])!=null&&_0xeee34b['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x164226=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x164226['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x164226['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x164226['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x164226['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x164226['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x4d37ff,_0x891793,_0x536a7a,_0x163832,_0x5168ff;(_0x4d37ff=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x4d37ff['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x891793=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x891793['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x536a7a=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x536a7a['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x163832=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x163832['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x5168ff=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x5168ff['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x478b2a){if(this['entity']['element']){const _0xbbc72f=_0x478b2a==='on';if(_0xbbc72f&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x478b2a]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x478b2a]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x478b2a]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x478b2a]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x478b2a]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x478b2a]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x478b2a]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x478b2a]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x478b2a]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x478b2a]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x478b2a]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x478b2a]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x478b2a]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x478b2a]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0xbbc72f;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x52a1d5;const _0xd88f67=(_0x52a1d5=this['_imageEnti'+'ty'])==null?void(-0x1c1f+-0xb*0x36f+0x41e4):_0x52a1d5['element'];!_0xd88f67||_0xd88f67['type']===xh||(this['_storeDefa'+'ultColor'](_0xd88f67['color']),this['_storeDefa'+'ultOpacity'](_0xd88f67['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0xd88f67['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0xd88f67['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x28f4fe){this['_defaultTi'+'nt']['r']=_0x28f4fe['r'],this['_defaultTi'+'nt']['g']=_0x28f4fe['g'],this['_defaultTi'+'nt']['b']=_0x28f4fe['b'];}['_storeDefa'+'ultOpacity'](_0x41d65f){this['_defaultTi'+'nt']['a']=_0x41d65f;}['_storeDefa'+'ultSpriteA'+'sset'](_0x3a297a){this['_defaultSp'+'riteAsset']=_0x3a297a;}['_storeDefa'+'ultSpriteF'+'rame'](_0x48b3d5){this['_defaultSp'+'riteFrame']=_0x48b3d5;}['_onSetColo'+'r'](_0x4f5320){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x4f5320),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x1f1851){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x1f1851),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x242bf3){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x242bf3),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0xa6c344){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0xa6c344),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x3f82fc){this['_isHoverin'+'g']=!(0x1*0x1387+-0x12e3+-0xa4),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x3f82fc);}['_onMouseLe'+'ave'](_0x398d9a){this['_isHoverin'+'g']=!(0x21*0x95+-0x4*0x555+0x220),this['_isPressed']=!(0x10bf+0xc5f+-0x1d1d),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x398d9a);}['_onMouseDo'+'wn'](_0x139ecd){this['_isPressed']=!(0x33*-0xad+-0x1297*-0x1+0x7f0*0x2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x139ecd);}['_onMouseUp'](_0xae0a18){this['_isPressed']=!(-0x2281*-0x1+0x221b*0x1+0x449b*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0xae0a18);}['_onTouchSt'+'art'](_0x3af0a8){this['_isPressed']=!(-0xfd4+-0x7*-0x15d+0x1*0x649),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x3af0a8);}['_onTouchEn'+'d'](_0x4c4766){_0x4c4766['event']['preventDef'+'ault'](),this['_isPressed']=!(0xe80+-0x1*-0x59f+-0x406*0x5),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x4c4766);}['_onTouchLe'+'ave'](_0x3dd4fe){this['_isPressed']=!(0x2371+-0x7a*0x3f+-0x56a),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x3dd4fe);}['_onTouchCa'+'ncel'](_0x4591fe){this['_isPressed']=!(0x1f7b+0x1*0xc89+-0x2c03),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x4591fe);}['_onSelectS'+'tart'](_0x39920a){this['_isPressed']=!(0x25d5+-0x1021*-0x1+-0x2*0x1afb),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x39920a);}['_onSelectE'+'nd'](_0x3d71a6){this['_isPressed']=!(-0x22db+0x5*-0x29d+0x1*0x2fed),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x3d71a6);}['_onSelectE'+'nter'](_0x431bbb){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===0xde5+0x6c*-0x15+-0x8*0xa1&&(this['_isHoverin'+'g']=!(0x1647+0x1672*-0x1+0x2b),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x431bbb);}['_onSelectL'+'eave'](_0x387dfd){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===0x1*-0xfd9+0x2*0x1f9+-0x1*-0xbe7&&(this['_isHoverin'+'g']=!(-0x3*-0xfd+-0x1*0x1a0d+0x1717*0x1),this['_isPressed']=!(0x23cb+0x146b*-0x1+-0xf5f),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x387dfd);}['_onClick'](_0x117514){this['_fireIfAct'+'ive']('click',_0x117514);}['_fireIfAct'+'ive'](_0x3097f2,_0x28fd61){this['data']['active']&&this['fire'](_0x3097f2,_0x28fd61);}['_updateVis'+'ualState'](_0x2f3330){const _0x40fcdb=this['_visualSta'+'te'],_0x534137=this['_determine'+'VisualStat'+'e']();if((_0x40fcdb!==_0x534137||_0x2f3330)&&this['enabled'])switch(this['_visualSta'+'te']=_0x534137,_0x40fcdb===dt['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x40fcdb===dt['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x534137===dt['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x534137===dt['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case Xf:{const _0x5ddf9e=ul[this['_visualSta'+'te']],_0x2b966d=this[_0x5ddf9e];this['_applyTint'](_0x2b966d);break;}case Z_:{const _0x1be090=ml[this['_visualSta'+'te']],_0x3219cd=pl[this['_visualSta'+'te']],_0x153b31=this[_0x1be090],_0x14e617=this[_0x3219cd];this['_applySpri'+'te'](_0x153b31,_0x14e617);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(0x2192+0xdca+-0x2f5c));}['_resetToDe'+'faultVisua'+'lState'](_0x26ea00){var _0x48f22d;if((_0x48f22d=this['_imageEnti'+'ty'])!=null&&_0x48f22d['element'])switch(_0x26ea00){case Xf:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case Z_:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return dt['PRESSED'];if(this['_isHoverin'+'g'])return dt['HOVER'];}else return dt['INACTIVE'];return dt['DEFAULT'];}['_applySpri'+'te'](_0x865f3a,_0x1f5785){var _0x266fc0;const _0x416583=(_0x266fc0=this['_imageEnti'+'ty'])==null?void(0x1cd0+0x17e2+-0x34b2):_0x266fc0['element'];_0x416583&&(_0x1f5785=_0x1f5785||0x6c8+0x6*-0x266+-0x79c*-0x1,this['_isApplyin'+'gSprite']=!(-0xe*0x59+-0x807+0x1*0xce5),_0x416583['spriteAsse'+'t']!==_0x865f3a&&(_0x416583['spriteAsse'+'t']=_0x865f3a),_0x416583['spriteFram'+'e']!==_0x1f5785&&(_0x416583['spriteFram'+'e']=_0x1f5785),this['_isApplyin'+'gSprite']=!(-0x34*0x5d+-0x367*0x1+0x164c));}['_applyTint'](_0x865fea){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===0x31f+-0x53*0x67+0x1e46?this['_applyTint'+'Immediatel'+'y'](_0x865fea):this['_applyTint'+'WithTween'](_0x865fea);}['_applyTint'+'Immediatel'+'y'](_0x297aba){var _0xcd1584;const _0x7d12a7=(_0xcd1584=this['_imageEnti'+'ty'])==null?void(-0x7cc*0x5+-0xc75*0x2+0x1*0x3fe6):_0xcd1584['element'];if(!_0x297aba||!_0x7d12a7||_0x7d12a7['type']===xh)return;const _0x3bda80=Q_(_0x297aba);this['_isApplyin'+'gTint']=!(-0x1e37+0xa36*-0x2+0x32a3),_0x3bda80['equals'](_0x7d12a7['color'])||(_0x7d12a7['color']=_0x3bda80),_0x7d12a7['opacity']!==_0x297aba['a']&&(_0x7d12a7['opacity']=_0x297aba['a']),this['_isApplyin'+'gTint']=!(-0x11*-0xc2+0xc18+-0x18f9);}['_applyTint'+'WithTween'](_0x14de28){var _0xe66dae;const _0x38e41b=(_0xe66dae=this['_imageEnti'+'ty'])==null?void(0x600+0x263e+0x161f*-0x2):_0xe66dae['element'];if(!_0x14de28||!_0x38e41b||_0x38e41b['type']===xh)return;const _0x496773=Q_(_0x14de28),_0x54569e=_0x38e41b['color'],_0x1e2140=_0x38e41b['opacity'];_0x496773['equals'](_0x54569e)&&_0x14de28['a']===_0x1e2140||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x54569e['r'],_0x54569e['g'],_0x54569e['b'],_0x1e2140),'to':_0x14de28['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0xcd8eb9=de()-this['_tweenInfo']['startTime'];let _0x2d7d29=this['fadeDurati'+'on']===0x2e7*0x7+0xf08+-0x1*0x2359?0x191b+-0x212f+-0x815*-0x1:_0xcd8eb9/this['fadeDurati'+'on'];if(_0x2d7d29=Y['clamp'](_0x2d7d29,-0x20b*0xb+0x1caa+0x1*-0x631,0x13bf+-0x2*0x2c3+-0xe38),Math['abs'](_0x2d7d29-(-0x4*0x6b7+0xed3+0xc0a))>0x3b+-0x2297+0x225c+0.00001){const _0x459ea9=this['_tweenInfo']['lerpColor'];_0x459ea9['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x2d7d29),this['_applyTint'+'Immediatel'+'y'](new ie(_0x459ea9['r'],_0x459ea9['g'],_0x459ea9['b'],_0x459ea9['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x49*-0x1c+-0x5b6+0xdb3),this['_hoveringC'+'ounter']=-0x880*0x2+-0x1fce+0x30ce,this['_isPressed']=!(-0x3*0x272+-0x227+0x51*0x1e),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x53b599,_0x4c6b7d){_0x53b599['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x4c6b7d[_0x53b599['imageEntit'+'y']['getGuid']()]);}}h(Pt,'EVENT_MOUS'+'EDOWN','mousedown'),h(Pt,'EVENT_MOUS'+'EUP','mouseup'),h(Pt,'EVENT_MOUS'+'EENTER','mouseenter'),h(Pt,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(Pt,'EVENT_CLIC'+'K','click'),h(Pt,'EVENT_TOUC'+'HSTART','touchstart'),h(Pt,'EVENT_TOUC'+'HEND','touchend'),h(Pt,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(Pt,'EVENT_TOUC'+'HLEAVE','touchleave'),h(Pt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Pt,'EVENT_SELE'+'CTEND','selectend'),h(Pt,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(Pt,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(Pt,'EVENT_HOVE'+'RSTART','hoverstart'),h(Pt,'EVENT_HOVE'+'REND','hoverend'),h(Pt,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(Pt,'EVENT_PRES'+'SEDEND','pressedend');function Q_(_0x148140){return new ie(_0x148140['r'],_0x148140['g'],_0x148140['b']);}class tL{constructor(){this['enabled']=!(-0x404+0x1fa+0x20a),this['active']=!(-0x315+-0x494+0x7a9),this['imageEntit'+'y']=null,this['hitPadding']=new ae(),this['transition'+'Mode']=Xf,this['hoverTint']=new ie(-0xb75+-0x9a7*0x1+0x151c+0.75,-0x956*0x1+0x1833+-0xedd+0.75,-0x3b*0x3d+-0x377*0x1+0x1186+0.75),this['pressedTin'+'t']=new ie(0x1c57+-0x2b5+0xc1*-0x22+0.5,-0xf*0x2+0x1ce1+-0x1*0x1cc3+0.5,-0xd39+-0x424+0x115d+0.5),this['inactiveTi'+'nt']=new ie(-0xa88*0x3+0x7a*0x2+-0x35*-0x94+0.25,0x181b+-0x155+-0x16c6+0.25,0x12f6+0xeb*-0x2a+0x1398+0.25),this['fadeDurati'+'on']=-0x563+-0x524+-0xa87*-0x1,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x1f9*0x3+0x28a*-0xb+-0x1*-0x1603,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=0x1*-0xeb7+-0x1*-0x204d+-0x1196,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=-0x16*0xb8+-0x5ab+0x157b;}}const J_=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class sL extends lt{constructor(_0x138bb6){super(_0x138bb6),this['id']='button',this['ComponentT'+'ype']=Pt,this['DataType']=tL,this['schema']=J_,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x269841,_0x15177b,_0x189665){_0x269841['imageEntit'+'y']=_0x15177b['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x269841,_0x15177b,J_);}['onUpdate'](_0x395534){const _0x44c8ad=this['store'];for(const _0x59cd94 in _0x44c8ad){const _0x827e07=_0x44c8ad[_0x59cd94]['entity'],_0x53aa39=_0x827e07['button'];_0x53aa39['enabled']&&_0x827e07['enabled']&&_0x53aa39['onUpdate']();}}['_onRemoveC'+'omponent'](_0x3a476e,_0x55eaa2){_0x55eaa2['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const eg=new I(),tg=new le();class Ga extends we{constructor(_0x1cb8e0,_0x1aad6e){super(_0x1cb8e0,_0x1aad6e),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(0x1a22+-0x4ad+-0x1574)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x4ca07b=this['system']['store'][this['entity']['getGuid']()];return _0x4ca07b?_0x4ca07b['data']:null;}set['enabled'](_0x296d27){this['_setValue']('enabled',_0x296d27);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x442bea){this['_setValue']('type',_0x442bea);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x6483f1){this['_setValue']('halfExtent'+'s',_0x6483f1);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x49c2a7){this['_setValue']('linearOffs'+'et',_0x49c2a7);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x30dc27){this['_setValue']('angularOff'+'set',_0x30dc27);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x149277){this['_setValue']('radius',_0x149277);}get['radius'](){return this['data']['radius'];}set['axis'](_0x3c7c2e){this['_setValue']('axis',_0x3c7c2e);}get['axis'](){return this['data']['axis'];}set['height'](_0x4de9ab){this['_setValue']('height',_0x4de9ab);}get['height'](){return this['data']['height'];}set['asset'](_0x118a4d){this['_setValue']('asset',_0x118a4d);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x17bf8e){this['_setValue']('renderAsse'+'t',_0x17bf8e);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x2f1de5){this['_setValue']('convexHull',_0x2f1de5);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x34aacb){this['_setValue']('shape',_0x34aacb);}get['shape'](){return this['data']['shape'];}set['model'](_0x1b5598){this['_setValue']('model',_0x1b5598);}get['model'](){return this['data']['model'];}set['render'](_0xc17370){this['_setValue']('render',_0xc17370);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x29a2b1){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x29a2b1);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x49f328,_0x2ba7af){const _0x5edbee=this['data'],_0x441b06=_0x5edbee[_0x49f328];_0x5edbee[_0x49f328]=_0x2ba7af,this['fire']('set',_0x49f328,_0x441b06,_0x2ba7af);}['onSetType'](_0x2f7416,_0x1de9de,_0x518854){_0x1de9de!==_0x518854&&this['system']['changeType'](this,_0x1de9de,_0x518854);}['onSetHalfE'+'xtents'](_0x409038,_0x5c986b,_0x453d8a){const _0x3a00e6=this['data']['type'];this['data']['initialize'+'d']&&_0x3a00e6==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x3eb6bf,_0x5bd9d1,_0x5267dc){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](I['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x5737bd,_0x5ed93c,_0x409fe7){const _0x45ec28=this['data']['type'];this['data']['initialize'+'d']&&(_0x45ec28==='sphere'||_0x45ec28==='capsule'||_0x45ec28==='cylinder'||_0x45ec28==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x51acbd,_0x3c7f4b,_0x1d4a2b){const _0x2f680a=this['data']['type'];this['data']['initialize'+'d']&&(_0x2f680a==='capsule'||_0x2f680a==='cylinder'||_0x2f680a==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0xf50a96,_0x5a9850,_0x56168f){const _0x3bdfc6=this['data']['type'];this['data']['initialize'+'d']&&(_0x3bdfc6==='capsule'||_0x3bdfc6==='cylinder'||_0x3bdfc6==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x4ff90a,_0x58bdaf,_0x113cdb){const _0x2d5b68=this['system']['app']['assets'];if(_0x58bdaf){const _0x127ee8=_0x2d5b68['get'](_0x58bdaf);_0x127ee8&&_0x127ee8['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x113cdb){_0x113cdb instanceof me&&(this['data']['asset']=_0x113cdb['id']);const _0x54aec7=_0x2d5b68['get'](this['data']['asset']);_0x54aec7&&(_0x54aec7['off']('remove',this['onAssetRem'+'oved'],this),_0x54aec7['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x113cdb||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x166c1,_0x22dbe1,_0x68864e){const _0x6c41ba=this['system']['app']['assets'];if(_0x22dbe1){const _0x216323=_0x6c41ba['get'](_0x22dbe1);_0x216323&&_0x216323['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x68864e){_0x68864e instanceof me&&(this['data']['renderAsse'+'t']=_0x68864e['id']);const _0x390a1b=_0x6c41ba['get'](this['data']['renderAsse'+'t']);_0x390a1b&&(_0x390a1b['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x390a1b['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x68864e||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x58263a,_0x18373d,_0x229827){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x4a6522,_0x1682e5,_0x53c5de){this['onSetModel'](_0x4a6522,_0x1682e5,_0x53c5de);}['onAssetRem'+'oved'](_0x143985){_0x143985['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x143985['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x204894){_0x204894['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x204894['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x416815){const _0x2f7e74=this['data']['shape'],_0x225370=_0x2f7e74['getNumChil'+'dShapes']();for(let _0x17df80=0x515+-0x1dcd+0x18b8;_0x17df80<_0x225370;_0x17df80++){const _0x1a1d69=_0x2f7e74['getChildSh'+'ape'](_0x17df80);if(Ammo['getPointer'](_0x1a1d69)===Ammo['getPointer'](_0x416815))return _0x17df80;}return null;}['_onInsert'](_0x3dddc8){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x3c7636=this['entity']['parent'];for(;_0x3c7636;){if(_0x3c7636['collision']&&_0x3c7636['collision']['type']==='compound'){_0x3c7636['collision']['shape']['getNumChil'+'dShapes']()===0x18c3+-0xab3*-0x2+-0x2e29?this['system']['recreatePh'+'ysicalShap'+'es'](_0x3c7636['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x3c7636=_0x3c7636['parent'];}}}}}['_updateCom'+'pound'](){const _0x420164=this['entity'];if(_0x420164['_dirtyWorl'+'d']){let _0xf1e352=_0x420164['_dirtyLoca'+'l'],_0x4b63b8=_0x420164;for(;_0x4b63b8&&!_0xf1e352&&!(_0x4b63b8['collision']&&_0x4b63b8['collision']===this['_compoundP'+'arent']);)_0x4b63b8['_dirtyLoca'+'l']&&(_0xf1e352=!(0x1518+-0x1731+0x219)),_0x4b63b8=_0x4b63b8['parent'];if(_0xf1e352){_0x420164['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x420164);const _0x12b6b3=this['_compoundP'+'arent']['entity']['rigidbody'];_0x12b6b3&&_0x12b6b3['activate']();}}}['getShapePo'+'sition'](){const _0x3b0282=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0xa5beff=this['entity']['getRotatio'+'n'](),_0x5a04de=this['data']['linearOffs'+'et'];return tg['copy'](_0xa5beff)['transformV'+'ector'](_0x5a04de,eg),eg['add'](_0x3b0282);}return _0x3b0282;}['getShapeRo'+'tation'](){const _0x12d39d=this['entity']['getRotatio'+'n']();return this['_hasOffset']?tg['copy'](_0x12d39d)['mul'](this['data']['angularOff'+'set']):_0x12d39d;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x1c82da=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x1c82da&&(!_0x1c82da['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x1*-0x1e05+0x3*-0x4c+-0x1d21*0x1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x36709b=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x36709b,this['data']['shape']),Ammo['destroy'](_0x36709b),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(Ga,'EVENT_CONT'+'ACT','contact'),h(Ga,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Ga,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Ga,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Ga,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class iL{constructor(){this['enabled']=!(-0x712*-0x5+0x427*-0x3+-0x16e5),this['type']='box',this['halfExtent'+'s']=new I(-0x16f*0x2+-0x176a+-0x1a48*-0x1+0.5,0x10dc+0x7a5*0x2+-0x2026+0.5,0x892+0x1*-0x13a7+0xb15+0.5),this['linearOffs'+'et']=new I(),this['angularOff'+'set']=new le(),this['radius']=0x25*0x8b+-0x5*0x135+-0x707*0x2+0.5,this['axis']=-0x1*-0x17fc+-0xe50+-0x9ab,this['height']=0x1*-0x1ced+-0x23e7+0x2*0x206b,this['convexHull']=!(-0x1b*-0x8b+-0x912+0x41*-0x16),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(0x1633*0x1+-0x2501+0xece),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(-0x153b+-0x1799+0x2cd5);}}const to='static',Ps='dynamic',Ia='kinematic',rL=0x7db*0x1+-0x2699+0x1ec0,oo=0x61b+-0x9e*-0x1e+-0x189b,jf=0x1a16+0x33d*-0x8+-0x3*0xf,sg=0x2*0x1317+0xd2b*0x2+-0x4080,iv=-0x12a8+-0x1da*0x2+0x1661,aL=0x1e3*-0xf+0x1b9c+0xb2,ig=-0x4a*0x2e+-0x670+0x2d2*0x7,nL=0x16c+0x402*-0x3+-0x12e*-0x9,rg=-0xc54+0x13d+0xb27,ag=-0x1867f+-0x1*-0x4420+-0x6*-0x6065,Yf=0x53*0x461+-0x1*-0x38fd+-0x36d1*0x3;let Ms,Ar,Da;class rv{constructor(_0xa6a973,_0x19e549,_0x404062){this['entity']=_0x19e549['entity'],this['component']=_0x19e549,this['app']=_0xa6a973,typeof Ammo<'u'&&!Ms&&(Ms=new Ammo['btVector3'](),Ar=new Ammo['btQuaterni'+'on'](),Da=new Ammo['btTransfor'+'m']()),this['initialize'](_0x404062);}['initialize'](_0x564573){const _0x4d9904=this['entity'],_0x12f5ae=_0x564573['shape'];if(_0x12f5ae&&typeof Ammo<'u'){_0x4d9904['trigger']&&_0x4d9904['trigger']['destroy']();const _0x4ae0da=0x12fc+-0x156*0x14+0x7bd,_0x4e0387=this['component'];if(_0x4e0387){const _0x4d45d8=_0x4e0387['getShapePo'+'sition'](),_0x181132=_0x4e0387['getShapeRo'+'tation']();Ms['setValue'](_0x4d45d8['x'],_0x4d45d8['y'],_0x4d45d8['z']),Ar['setValue'](_0x181132['x'],_0x181132['y'],_0x181132['z'],_0x181132['w']);}else{const _0x3b1dbf=_0x4d9904['getPositio'+'n'](),_0x399697=_0x4d9904['getRotatio'+'n']();Ms['setValue'](_0x3b1dbf['x'],_0x3b1dbf['y'],_0x3b1dbf['z']),Ar['setValue'](_0x399697['x'],_0x399697['y'],_0x399697['z'],_0x399697['w']);}Da['setOrigin'](Ms),Da['setRotatio'+'n'](Ar);const _0x299a61=this['app']['systems']['rigidbody']['createBody'](_0x4ae0da,_0x12f5ae,Da);_0x299a61['setRestitu'+'tion'](-0xa3*0x14+0x1*0x1d96+0x10da*-0x1),_0x299a61['setFrictio'+'n'](0x5fe+-0x1003*-0x1+-0x1601),_0x299a61['setDamping'](-0x1*-0x26a3+-0x1*-0x1609+-0x3cac,0x217c+-0x49*0x61+-0x3*0x1f1),Ms['setValue'](0x9*-0x56+-0x6f6+0x9fc,-0x1da5*0x1+0x1ebc+0x117*-0x1,0x15c6+-0x267a+0x10b4),_0x299a61['setLinearF'+'actor'](Ms),_0x299a61['setAngular'+'Factor'](Ms),_0x299a61['setCollisi'+'onFlags'](_0x299a61['getCollisi'+'onFlags']()|oo),_0x299a61['entity']=_0x4d9904,this['body']=_0x299a61,this['component']['enabled']&&_0x4d9904['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x4d921f){const _0x49cff4=this['component'];if(_0x49cff4){const _0x24c396=_0x49cff4['getShapePo'+'sition'](),_0x52e1c8=_0x49cff4['getShapeRo'+'tation']();Ms['setValue'](_0x24c396['x'],_0x24c396['y'],_0x24c396['z']),Ar['setValue'](_0x52e1c8['x'],_0x52e1c8['y'],_0x52e1c8['z'],_0x52e1c8['w']);}else{const _0x237116=this['entity']['getPositio'+'n'](),_0x229579=this['entity']['getRotatio'+'n']();Ms['setValue'](_0x237116['x'],_0x237116['y'],_0x237116['z']),Ar['setValue'](_0x229579['x'],_0x229579['y'],_0x229579['z'],_0x229579['w']);}_0x4d921f['setOrigin'](Ms),_0x4d921f['setRotatio'+'n'](Ar);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Da);const _0x249bd7=this['body'];_0x249bd7['setWorldTr'+'ansform'](Da),_0x249bd7['activate']();}['enable'](){const _0x2d5363=this['body'];if(!_0x2d5363)return;const _0x4bf809=this['app']['systems']['rigidbody'];_0x4bf809['_triggers']['indexOf'](this)<-0x45d*-0x3+-0x4*-0x923+-0x1*0x31a3&&(_0x4bf809['addBody'](_0x2d5363,rg,Yf^rg),_0x4bf809['_triggers']['push'](this)),_0x2d5363['forceActiv'+'ationState'](jf),this['updateTran'+'sform']();}['disable'](){const _0x318cf3=this['body'];if(!_0x318cf3)return;const _0x114b2e=this['app']['systems']['rigidbody'],_0x13df6b=_0x114b2e['_triggers']['indexOf'](this);_0x13df6b>-(-0x103*-0x23+-0x8*0x16c+-0x1*0x1808)&&(_0x114b2e['removeBody'](_0x318cf3),_0x114b2e['_triggers']['splice'](_0x13df6b,0xfda+-0x9a9*0x2+0x379)),_0x318cf3['forceActiv'+'ationState'](iv);}}const Ql=new te(),oL=new I(),lL=new I(),br=new le(),ng=new He(),hL=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class ma{constructor(_0x33d0aa){this['system']=_0x33d0aa;}['beforeInit'+'ialize'](_0x156473,_0x119e99){_0x119e99['shape']=null,_0x119e99['model']=new $i(),_0x119e99['model']['graph']=new He();}['afterIniti'+'alize'](_0x2a0ae5,_0x5b08c8){this['recreatePh'+'ysicalShap'+'es'](_0x2a0ae5),_0x2a0ae5['data']['initialize'+'d']=!(0x2*-0x1142+-0x43*-0x5d+-0x209*-0x5);}['reset'](_0x5d503f,_0x8dd653){this['beforeInit'+'ialize'](_0x5d503f,_0x8dd653),this['afterIniti'+'alize'](_0x5d503f,_0x8dd653);}['recreatePh'+'ysicalShap'+'es'](_0x120de3){const _0x3f44e9=_0x120de3['entity'],_0x19ee93=_0x120de3['data'];if(typeof Ammo<'u'){_0x3f44e9['trigger']&&(_0x3f44e9['trigger']['destroy'](),delete _0x3f44e9['trigger']),_0x19ee93['shape']&&(_0x120de3['_compoundP'+'arent']&&(_0x120de3!==_0x120de3['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x120de3['_compoundP'+'arent'],_0x19ee93['shape']),_0x120de3['_compoundP'+'arent']['entity']['rigidbody']&&_0x120de3['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x19ee93)),_0x19ee93['shape']=this['createPhys'+'icalShape'](_0x120de3['entity'],_0x19ee93);const _0x2e96e4=!_0x120de3['_compoundP'+'arent'];if(_0x19ee93['type']==='compound'&&(!_0x120de3['_compoundP'+'arent']||_0x120de3===_0x120de3['_compoundP'+'arent']))_0x120de3['_compoundP'+'arent']=_0x120de3,_0x3f44e9['forEach'](this['_addEachDe'+'scendant'],_0x120de3);else{if(_0x19ee93['type']!=='compound'&&!_0x120de3['rigidbody']){_0x120de3['_compoundP'+'arent']=null;let _0x175e36=_0x3f44e9['parent'];for(;_0x175e36;){if(_0x175e36['collision']&&_0x175e36['collision']['type']==='compound'){_0x120de3['_compoundP'+'arent']=_0x175e36['collision'];break;}_0x175e36=_0x175e36['parent'];}}}_0x120de3['_compoundP'+'arent']&&_0x120de3!==_0x120de3['_compoundP'+'arent']&&(_0x2e96e4&&_0x120de3['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x4c*0x14+-0xaa+-0x546?this['system']['recreatePh'+'ysicalShap'+'es'](_0x120de3['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x3f44e9,!(0x7*-0x376+0x240c+-0xbd2)),_0x120de3['_compoundP'+'arent']['entity']['rigidbody']&&_0x120de3['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x3f44e9['rigidbody']?(_0x3f44e9['rigidbody']['disableSim'+'ulation'](),_0x3f44e9['rigidbody']['createBody'](),_0x3f44e9['enabled']&&_0x3f44e9['rigidbody']['enabled']&&_0x3f44e9['rigidbody']['enableSimu'+'lation']()):_0x120de3['_compoundP'+'arent']||(_0x3f44e9['trigger']?_0x3f44e9['trigger']['initialize'](_0x19ee93):_0x3f44e9['trigger']=new rv(this['system']['app'],_0x120de3,_0x19ee93));}}['createPhys'+'icalShape'](_0x1d918c,_0xff1595){}['updateTran'+'sform'](_0xa735,_0xdf8785,_0x4d7792,_0x4d7968){_0xa735['entity']['trigger']&&_0xa735['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x3c4731){_0x3c4731['shape']&&(Ammo['destroy'](_0x3c4731['shape']),_0x3c4731['shape']=null);}['beforeRemo'+'ve'](_0x28ffee,_0xfacd83){_0xfacd83['data']['shape']&&(_0xfacd83['_compoundP'+'arent']&&!_0xfacd83['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0xfacd83['_compoundP'+'arent'],_0xfacd83['data']['shape']),_0xfacd83['_compoundP'+'arent']['entity']['rigidbody']&&_0xfacd83['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0xfacd83['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0xfacd83['data']));}['remove'](_0x3da082,_0x1c403b){_0x3da082['rigidbody']&&_0x3da082['rigidbody']['body']&&_0x3da082['rigidbody']['disableSim'+'ulation'](),_0x3da082['trigger']&&(_0x3da082['trigger']['destroy'](),delete _0x3da082['trigger']);}['clone'](_0x220d42,_0x2403e1){const _0x2435b2=this['system']['store'][_0x220d42['getGuid']()],_0x56b54f={'enabled':_0x2435b2['data']['enabled'],'type':_0x2435b2['data']['type'],'halfExtents':[_0x2435b2['data']['halfExtent'+'s']['x'],_0x2435b2['data']['halfExtent'+'s']['y'],_0x2435b2['data']['halfExtent'+'s']['z']],'linearOffset':[_0x2435b2['data']['linearOffs'+'et']['x'],_0x2435b2['data']['linearOffs'+'et']['y'],_0x2435b2['data']['linearOffs'+'et']['z']],'angularOffset':[_0x2435b2['data']['angularOff'+'set']['x'],_0x2435b2['data']['angularOff'+'set']['y'],_0x2435b2['data']['angularOff'+'set']['z'],_0x2435b2['data']['angularOff'+'set']['w']],'radius':_0x2435b2['data']['radius'],'axis':_0x2435b2['data']['axis'],'height':_0x2435b2['data']['height'],'convexHull':_0x2435b2['data']['convexHull'],'asset':_0x2435b2['data']['asset'],'renderAsset':_0x2435b2['data']['renderAsse'+'t'],'model':_0x2435b2['data']['model'],'render':_0x2435b2['data']['render'],'checkVertexDuplicates':_0x2435b2['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x2403e1,_0x56b54f);}}class cL extends ma{['createPhys'+'icalShape'](_0x4ccc78,_0xce620c){if(typeof Ammo<'u'){const _0x226b98=_0xce620c['halfExtent'+'s'],_0x346a7f=new Ammo['btVector3'](_0x226b98?_0x226b98['x']:-0xb*0x135+-0x1e63*-0x1+-0x111c+0.5,_0x226b98?_0x226b98['y']:0x19fb+0x13e1+-0x2ddc+0.5,_0x226b98?_0x226b98['z']:0x4f*-0x3+-0x1a9*-0xe+-0x1651+0.5),_0x187d6f=new Ammo['btBoxShape'](_0x346a7f);return Ammo['destroy'](_0x346a7f),_0x187d6f;}}}class dL extends ma{['createPhys'+'icalShape'](_0x19166f,_0xf0be2c){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0xf0be2c['radius']);}}class fL extends ma{['createPhys'+'icalShape'](_0x4d0b89,_0x15cd80){const _0x42ed54=_0x15cd80['axis']??0x1fc9+0x4bb+-0x2483,_0x28c86a=_0x15cd80['radius']??-0x5ab+-0x2539+0x2ae4+0.5,_0x537c80=Math['max']((_0x15cd80['height']??0x19bc+0xc4a+0xcac*-0x3)-(0xc0e+0x799*0x2+-0x1b3e*0x1)*_0x28c86a,-0x26*0xa7+0x666+0xb*0x1ac);let _0xc48a0d=null;if(typeof Ammo<'u')switch(_0x42ed54){case-0x2*0x1375+-0xfa3+-0x93*-0x5f:_0xc48a0d=new Ammo['btCapsuleS'+'hapeX'](_0x28c86a,_0x537c80);break;case-0x1*-0x1e8a+0x1863+-0x172*0x26:_0xc48a0d=new Ammo['btCapsuleS'+'hape'](_0x28c86a,_0x537c80);break;case 0xc1*0x11+0xb*0x205+-0x2306:_0xc48a0d=new Ammo['btCapsuleS'+'hapeZ'](_0x28c86a,_0x537c80);break;}return _0xc48a0d;}}class uL extends ma{['createPhys'+'icalShape'](_0x18a640,_0x506770){const _0x460284=_0x506770['axis']??-0xa8+0x1f6d+-0x1ec4,_0x2b6aad=_0x506770['radius']??-0x1*-0x1655+0x288+0x4f9*-0x5+0.5,_0x3fcdcb=_0x506770['height']??-0x41b*0x9+-0xc2*0x3+0x273a;let _0x23594f=null,_0x37e279=null;if(typeof Ammo<'u')switch(_0x460284){case-0x254b+0x5d*-0x3d+0x3b74:_0x23594f=new Ammo['btVector3'](_0x3fcdcb*(-0x463+-0x171*0x1+-0x1*-0x5d4+0.5),_0x2b6aad,_0x2b6aad),_0x37e279=new Ammo['btCylinder'+'ShapeX'](_0x23594f);break;case 0x1497+0x220d+-0x36a3:_0x23594f=new Ammo['btVector3'](_0x2b6aad,_0x3fcdcb*(0x235+0xc*0x141+-0x1141+0.5),_0x2b6aad),_0x37e279=new Ammo['btCylinder'+'Shape'](_0x23594f);break;case 0xca4+-0xe12+0x8*0x2e:_0x23594f=new Ammo['btVector3'](_0x2b6aad,_0x2b6aad,_0x3fcdcb*(0x1*-0x20dc+0x896+0x1a*0xef+0.5)),_0x37e279=new Ammo['btCylinder'+'ShapeZ'](_0x23594f);break;}return _0x23594f&&Ammo['destroy'](_0x23594f),_0x37e279;}}class mL extends ma{['createPhys'+'icalShape'](_0x3685d6,_0x4cc1d4){const _0x893496=_0x4cc1d4['axis']??-0x1*-0x56+-0xbb9*-0x2+-0x1*0x17c7,_0x67c96a=_0x4cc1d4['radius']??0x10a8+-0xd07+-0x1*0x3a1+0.5,_0x88c95d=_0x4cc1d4['height']??-0x7*0x429+-0x1006+-0x2*-0x1693;let _0x599de1=null;if(typeof Ammo<'u')switch(_0x893496){case 0x199+-0xec*0x20+0x1be7:_0x599de1=new Ammo['btConeShap'+'eX'](_0x67c96a,_0x88c95d);break;case-0x20ac+0xc0d*0x2+0x5*0x1b7:_0x599de1=new Ammo['btConeShap'+'e'](_0x67c96a,_0x88c95d);break;case 0x655+-0x2524+0x1ed1*0x1:_0x599de1=new Ammo['btConeShap'+'eZ'](_0x67c96a,_0x88c95d);break;}return _0x599de1;}}class pL extends ma{['beforeInit'+'ialize'](_0xb80faf,_0x4efd26){}['createAmmo'+'Hull'](_0x1c8907,_0x36eef0,_0x246654,_0x56e9fc){const _0x45d384=new Ammo['btConvexHu'+'llShape'](),_0xd5139a=new Ammo['btVector3'](),_0x44144e=[];_0x1c8907['getPositio'+'ns'](_0x44144e);for(let _0x4e3e37=-0xd3+0x1e9*0xa+0x1247*-0x1;_0x4e3e37<_0x44144e['length'];_0x4e3e37+=-0x1bb8*0x1+-0xcb1+0x1*0x286c)_0xd5139a['setValue'](_0x44144e[_0x4e3e37]*_0x56e9fc['x'],_0x44144e[_0x4e3e37+(0x3*-0x277+-0x6d3*0x5+0x2985)]*_0x56e9fc['y'],_0x44144e[_0x4e3e37+(-0x232e+0x1bd2+-0x17*-0x52)]*_0x56e9fc['z']),_0x45d384['addPoint'](_0xd5139a,!(0x6d*0x1e+-0x1d42+0x107d));Ammo['destroy'](_0xd5139a),_0x45d384['recalcLoca'+'lAabb'](),_0x45d384['setMargin'](0x24c4+-0x242f+-0x1*0x95+0.01);const _0x5b400b=this['system']['_getNodeTr'+'ansform'](_0x36eef0);_0x246654['addChildSh'+'ape'](_0x5b400b,_0x45d384),Ammo['destroy'](_0x5b400b);}['createAmmo'+'Mesh'](_0xeb81a0,_0x102925,_0x3d0461,_0x5c3184,_0x241ce5=!(-0x1306+-0x1b6f+0x2e75)){const _0x306ed2=this['system'];let _0x5646e0;if(_0x306ed2['_triMeshCa'+'che'][_0xeb81a0['id']])_0x5646e0=_0x306ed2['_triMeshCa'+'che'][_0xeb81a0['id']];else{const _0x30cf22=_0xeb81a0['vertexBuff'+'er'],_0x1cdd50=_0x30cf22['getFormat']();let _0x14ec51,_0x405674;for(let _0x4f7932=-0x40d*-0x1+0xaf9*0x1+-0xf06;_0x4f7932<_0x1cdd50['elements']['length'];_0x4f7932++){const _0x2d3bfa=_0x1cdd50['elements'][_0x4f7932];if(_0x2d3bfa['name']===Pe){_0x405674=new Float32Array(_0x30cf22['lock'](),_0x2d3bfa['offset']),_0x14ec51=_0x2d3bfa['stride']/(-0x5bb+-0x10+0x5cf);break;}}const _0x52ef14=[];_0xeb81a0['getIndices'](_0x52ef14);const _0x3b6d8a=_0xeb81a0['primitive'][0x5c*0x3+0x1*-0x31+0x1*-0xe3]['count']/(0xbf9+0x1*0x111f+-0x5d1*0x5),_0x466bf3=new Ammo['btVector3']();let _0x38a555,_0x60c36,_0x2fad08;const _0x1e1ab8=_0xeb81a0['primitive'][-0x454+-0x19d4+0x1e28]['base'];_0x5646e0=new Ammo['btTriangle'+'Mesh'](),_0x306ed2['_triMeshCa'+'che'][_0xeb81a0['id']]=_0x5646e0;const _0x3255ed=new Map();M['assert'](typeof _0x5646e0['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0xfd6fef=_0x5646e0['getIndexed'+'MeshArray']();_0xfd6fef['at'](-0xa7*0x3b+0x23+0x265a)['m_numTrian'+'gles']=_0x3b6d8a;const _0x71b6ce=_0x5c3184?_0x5c3184['x']:-0x1c0+0x223e+-0x207d*0x1,_0x223e52=_0x5c3184?_0x5c3184['y']:-0x10d+-0x618+0x726,_0x3dec13=_0x5c3184?_0x5c3184['z']:-0x23c5*0x1+0xa3*-0x2b+0x11*0x3b7,_0xab43a7=_0x26d761=>{const _0x4846d6=_0x405674[_0x26d761*_0x14ec51]*_0x71b6ce,_0x32f4d3=_0x405674[_0x26d761*_0x14ec51+(-0x2057*-0x1+0x1495+-0x34eb)]*_0x223e52,_0x377286=_0x405674[_0x26d761*_0x14ec51+(-0x119*0x4+0x270f+-0x13*0x1d3)]*_0x3dec13;let _0x4127a6;if(_0x241ce5){const _0x3445e8=_0x4846d6+':'+_0x32f4d3+':'+_0x377286;if(_0x4127a6=_0x3255ed['get'](_0x3445e8),_0x4127a6!==void(0x50d+-0x640+0x133))return _0x4127a6;_0x466bf3['setValue'](_0x4846d6,_0x32f4d3,_0x377286),_0x4127a6=_0x5646e0['findOrAddV'+'ertex'](_0x466bf3,!(-0x2292+-0x1a9f+0x3d32)),_0x3255ed['set'](_0x3445e8,_0x4127a6);}else _0x466bf3['setValue'](_0x4846d6,_0x32f4d3,_0x377286),_0x4127a6=_0x5646e0['findOrAddV'+'ertex'](_0x466bf3,!(0xc71+0x22df+-0x2f4f*0x1));return _0x4127a6;};for(let _0x3fe3fd=0x1c2+0x4ab*0x2+-0x47*0x28;_0x3fe3fd<_0x3b6d8a;_0x3fe3fd++)_0x38a555=_0xab43a7(_0x52ef14[_0x1e1ab8+_0x3fe3fd*(0x88f+-0xb8*0x1+-0x7d4)]),_0x60c36=_0xab43a7(_0x52ef14[_0x1e1ab8+_0x3fe3fd*(0x8*-0x311+-0xd2a+0x25b5)+(-0x1faf+-0x107*0x7+0x26e1)]),_0x2fad08=_0xab43a7(_0x52ef14[_0x1e1ab8+_0x3fe3fd*(-0x1*-0x1317+-0x1b7f*0x1+-0x5*-0x1af)+(0x1c10+0x9e7+-0x25f5)]),_0x5646e0['addIndex'](_0x38a555),_0x5646e0['addIndex'](_0x60c36),_0x5646e0['addIndex'](_0x2fad08);Ammo['destroy'](_0x466bf3);}const _0x212f94=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x5646e0,!(0xcdb+0x174b+-0x2426));if(!_0x5c3184){const _0x375e14=_0x306ed2['_getNodeSc'+'aling'](_0x102925);_0x212f94['setLocalSc'+'aling'](_0x375e14),Ammo['destroy'](_0x375e14);}const _0x3a133b=_0x306ed2['_getNodeTr'+'ansform'](_0x102925);_0x3d0461['addChildSh'+'ape'](_0x3a133b,_0x212f94),Ammo['destroy'](_0x3a133b);}['createPhys'+'icalShape'](_0x5257f6,_0x403732){if(!(typeof Ammo>'u')&&(_0x403732['model']||_0x403732['render'])){const _0x5842d1=new Ammo['btCompound'+'Shape'](),_0xab2759=_0x5257f6['getWorldTr'+'ansform']()['getScale']();if(_0x403732['render']){const _0x59ffda=_0x403732['render']['meshes'];for(let _0x3aed81=0x10d*0x20+0x109b+-0xb*0x491;_0x3aed81<_0x59ffda['length'];_0x3aed81++)_0x403732['convexHull']?this['createAmmo'+'Hull'](_0x59ffda[_0x3aed81],ng,_0x5842d1,_0xab2759):this['createAmmo'+'Mesh'](_0x59ffda[_0x3aed81],ng,_0x5842d1,_0xab2759,_0x403732['checkVerte'+'xDuplicate'+'s']);}else{if(_0x403732['model']){const _0x527610=_0x403732['model']['meshInstan'+'ces'];for(let _0x25ddd7=0x2603*-0x1+-0x235d+-0x496*-0x10;_0x25ddd7<_0x527610['length'];_0x25ddd7++)this['createAmmo'+'Mesh'](_0x527610[_0x25ddd7]['mesh'],_0x527610[_0x25ddd7]['node'],_0x5842d1,null,_0x403732['checkVerte'+'xDuplicate'+'s']);const _0x250ae6=new Ammo['btVector3'](_0xab2759['x'],_0xab2759['y'],_0xab2759['z']);_0x5842d1['setLocalSc'+'aling'](_0x250ae6),Ammo['destroy'](_0x250ae6);}}return _0x5842d1;}}['recreatePh'+'ysicalShap'+'es'](_0x1e2f44){const _0x13a767=_0x1e2f44['data'];if((_0x13a767['renderAsse'+'t']||_0x13a767['asset'])&&_0x1e2f44['enabled']&&_0x1e2f44['entity']['enabled']){this['loadAsset'](_0x1e2f44,_0x13a767['renderAsse'+'t']||_0x13a767['asset'],_0x13a767['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x1e2f44);}['loadAsset'](_0x2e4acb,_0x444843,_0x9d83ff){const _0x589a0d=_0x2e4acb['data'],_0x307bad=this['system']['app']['assets'],_0x5a0f9e=_0x589a0d[_0x9d83ff],_0x546cbc=_0x4d3d46=>{_0x589a0d[_0x9d83ff]===_0x5a0f9e&&(_0x589a0d[_0x9d83ff]=_0x4d3d46['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x2e4acb));},_0x45225b=_0xa44eb7=>{_0xa44eb7['ready'](_0x1592cf=>{if(_0x1592cf['data']['containerA'+'sset']){const _0x22ed9b=_0x307bad['get'](_0x1592cf['data']['containerA'+'sset']);_0x22ed9b['loaded']?_0x546cbc(_0x1592cf):(_0x22ed9b['ready'](()=>{_0x546cbc(_0x1592cf);}),_0x307bad['load'](_0x22ed9b));}else _0x546cbc(_0x1592cf);}),_0x307bad['load'](_0xa44eb7);},_0x111793=_0x307bad['get'](_0x444843);_0x111793?_0x45225b(_0x111793):_0x307bad['once']('add:'+_0x444843,_0x45225b);}['doRecreate'+'PhysicalSh'+'ape'](_0x264920){const _0x2b5524=_0x264920['entity'],_0x20ea46=_0x264920['data'];_0x20ea46['model']||_0x20ea46['render']?(this['destroySha'+'pe'](_0x20ea46),_0x20ea46['shape']=this['createPhys'+'icalShape'](_0x2b5524,_0x20ea46),_0x2b5524['rigidbody']?(_0x2b5524['rigidbody']['disableSim'+'ulation'](),_0x2b5524['rigidbody']['createBody'](),_0x2b5524['enabled']&&_0x2b5524['rigidbody']['enabled']&&_0x2b5524['rigidbody']['enableSimu'+'lation']()):_0x2b5524['trigger']?_0x2b5524['trigger']['initialize'](_0x20ea46):_0x2b5524['trigger']=new rv(this['system']['app'],_0x264920,_0x20ea46)):(this['beforeRemo'+'ve'](_0x2b5524,_0x264920),this['remove'](_0x2b5524,_0x20ea46));}['updateTran'+'sform'](_0x217633,_0x4b1162,_0x204321,_0x548f5a){if(_0x217633['shape']){const _0x32fbd1=_0x217633['entity']['getWorldTr'+'ansform']()['getScale'](),_0x566e98=_0x217633['shape']['getLocalSc'+'aling']();(_0x32fbd1['x']!==_0x566e98['x']()||_0x32fbd1['y']!==_0x566e98['y']()||_0x32fbd1['z']!==_0x566e98['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x217633);}super['updateTran'+'sform'](_0x217633,_0x4b1162,_0x204321,_0x548f5a);}['destroySha'+'pe'](_0x468767){if(!_0x468767['shape'])return;const _0x461663=_0x468767['shape']['getNumChil'+'dShapes']();for(let _0x4482f0=0x8c5+0xd09*0x1+-0x1*0x15ce;_0x4482f0<_0x461663;_0x4482f0++){const _0x551dc2=_0x468767['shape']['getChildSh'+'ape'](_0x4482f0);Ammo['destroy'](_0x551dc2);}Ammo['destroy'](_0x468767['shape']),_0x468767['shape']=null;}}class _L extends ma{['createPhys'+'icalShape'](_0x95b920,_0x2a4852){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x5b17f1){!_0x5b17f1['collision']||_0x5b17f1['rigidbody']||(_0x5b17f1['collision']['_compoundP'+'arent']=this,_0x5b17f1!==this['entity']&&_0x5b17f1['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x5b17f1['collision']));}['_updateEac'+'hDescendan'+'t'](_0x529278){_0x529278['collision']&&_0x529278['collision']['_compoundP'+'arent']===this&&(_0x529278['collision']['_compoundP'+'arent']=null,_0x529278!==this['entity']&&!_0x529278['rigidbody']&&_0x529278['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x529278['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x13c8a9){!_0x13c8a9['collision']||_0x13c8a9['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x13c8a9,!(0x184d*-0x1+0x1b38+-0x2ea));}}class gL extends lt{constructor(_0x3348f1){super(_0x3348f1),this['id']='collision',this['ComponentT'+'ype']=Ga,this['DataType']=iL,this['schema']=hL,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x6ef06a,_0x39cd96,_0x553129){_0x553129=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x2d309f={};for(let _0x13dd1a=0x18dd+-0x11fa+-0x1*0x6e3,_0x4e17cd=_0x553129['length'];_0x13dd1a<_0x4e17cd;_0x13dd1a++){const _0x3e9224=_0x553129[_0x13dd1a];_0x2d309f[_0x3e9224]=_0x39cd96[_0x3e9224];}let _0x1ddc94;if(_0x39cd96['hasOwnProp'+'erty']('asset')?(_0x1ddc94=_0x553129['indexOf']('model'),_0x1ddc94!==-(-0x2d*-0x31+-0xc73+0x3d7*0x1)&&_0x553129['splice'](_0x1ddc94,0xa2c+0x1*-0x17ee+0xdc3),_0x1ddc94=_0x553129['indexOf']('render'),_0x1ddc94!==-(0x12b+-0xea1*-0x1+-0xfcb)&&_0x553129['splice'](_0x1ddc94,-0x1c*0x5f+-0x220*0x2+0xea5)):_0x39cd96['hasOwnProp'+'erty']('model')&&(_0x1ddc94=_0x553129['indexOf']('asset'),_0x1ddc94!==-(0x5*0x180+-0x1fe1*-0x1+-0x2760)&&_0x553129['splice'](_0x1ddc94,0x2*0xcd3+-0x8e1+0x25*-0x74)),_0x2d309f['type']||(_0x2d309f['type']=_0x6ef06a['data']['type']),_0x6ef06a['data']['type']=_0x2d309f['type'],Array['isArray'](_0x2d309f['halfExtent'+'s'])&&(_0x2d309f['halfExtent'+'s']=new I(_0x2d309f['halfExtent'+'s'])),Array['isArray'](_0x2d309f['linearOffs'+'et'])&&(_0x2d309f['linearOffs'+'et']=new I(_0x2d309f['linearOffs'+'et'])),Array['isArray'](_0x2d309f['angularOff'+'set'])){const _0x56334d=_0x2d309f['angularOff'+'set'];_0x56334d['length']===0x11f*0x15+-0x50f+-0x1279?_0x2d309f['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x56334d[-0x249c+-0x360+0x27fc],_0x56334d[0x1139+0x2523*0x1+-0x365b],_0x56334d[0xda1*0x1+-0x2*-0xbbc+-0x2517]):_0x2d309f['angularOff'+'set']=new le(_0x2d309f['angularOff'+'set']);}const _0x17abd3=this['_createImp'+'lementatio'+'n'](_0x2d309f['type']);_0x17abd3['beforeInit'+'ialize'](_0x6ef06a,_0x2d309f),super['initialize'+'ComponentD'+'ata'](_0x6ef06a,_0x2d309f,_0x553129),_0x17abd3['afterIniti'+'alize'](_0x6ef06a,_0x2d309f);}['_createImp'+'lementatio'+'n'](_0x5cca12){if(this['implementa'+'tions'][_0x5cca12]===void(0x2*-0x42e+0xce0+-0x22*0x22)){let _0x193ea2;switch(_0x5cca12){case'box':_0x193ea2=new cL(this);break;case'sphere':_0x193ea2=new dL(this);break;case'capsule':_0x193ea2=new fL(this);break;case'cylinder':_0x193ea2=new uL(this);break;case'cone':_0x193ea2=new mL(this);break;case'mesh':_0x193ea2=new pL(this);break;case'compound':_0x193ea2=new _L(this);break;default:M['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x5cca12);}this['implementa'+'tions'][_0x5cca12]=_0x193ea2;}return this['implementa'+'tions'][_0x5cca12];}['_getImplem'+'entation'](_0x249e93){return this['implementa'+'tions'][_0x249e93['collision']['data']['type']];}['cloneCompo'+'nent'](_0xd4180,_0x5364f1){return this['_getImplem'+'entation'](_0xd4180)['clone'](_0xd4180,_0x5364f1);}['onBeforeRe'+'move'](_0x12a174,_0x5f2c94){this['implementa'+'tions'][_0x5f2c94['data']['type']]['beforeRemo'+'ve'](_0x12a174,_0x5f2c94),_0x5f2c94['onBeforeRe'+'move']();}['onRemove'](_0x3c7be0,_0x17dd0e){this['implementa'+'tions'][_0x17dd0e['type']]['remove'](_0x3c7be0,_0x17dd0e);}['updateComp'+'oundChildT'+'ransform'](_0x53d7d5,_0x506243){const _0x266434=_0x53d7d5['collision']['_compoundP'+'arent'];if(_0x266434!==_0x53d7d5['collision']&&_0x53d7d5['enabled']&&_0x53d7d5['collision']['enabled']&&(_0x53d7d5['_dirtyLoca'+'l']||_0x506243)){const _0x1bb8da=this['_getNodeTr'+'ansform'](_0x53d7d5,_0x266434['entity']),_0x211b86=_0x266434['getCompoun'+'dChildShap'+'eIndex'](_0x53d7d5['collision']['shape']);_0x211b86===null?_0x266434['shape']['addChildSh'+'ape'](_0x1bb8da,_0x53d7d5['collision']['data']['shape']):_0x266434['shape']['updateChil'+'dTransform'](_0x211b86,_0x1bb8da,!(0x25c4+0x1*-0x9ad+0x2f*-0x99)),Ammo['destroy'](_0x1bb8da);}}['_removeCom'+'poundChild'](_0x381527,_0x3bd742){if(_0x381527['shape']['getNumChil'+'dShapes']()!==0x3*0xc3f+-0xa12+-0x1aab){if(_0x381527['shape']['removeChil'+'dShape'])_0x381527['shape']['removeChil'+'dShape'](_0x3bd742);else{const _0x326356=_0x381527['getCompoun'+'dChildShap'+'eIndex'](_0x3bd742);_0x326356!==null&&_0x381527['shape']['removeChil'+'dShapeByIn'+'dex'](_0x326356);}}}['onTransfor'+'mChanged'](_0x599db4,_0x378df4,_0x1a0c93,_0x160638){this['implementa'+'tions'][_0x599db4['data']['type']]['updateTran'+'sform'](_0x599db4,_0x378df4,_0x1a0c93,_0x160638);}['changeType'](_0x5a3143,_0x2c57fe,_0x490341){this['implementa'+'tions'][_0x2c57fe]['beforeRemo'+'ve'](_0x5a3143['entity'],_0x5a3143),this['implementa'+'tions'][_0x2c57fe]['remove'](_0x5a3143['entity'],_0x5a3143['data']),this['_createImp'+'lementatio'+'n'](_0x490341)['reset'](_0x5a3143,_0x5a3143['data']);}['recreatePh'+'ysicalShap'+'es'](_0x3e7979){this['implementa'+'tions'][_0x3e7979['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x3e7979);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x4b342a,_0x57b2df){if(_0x4b342a===_0x57b2df){const _0x3c744a=_0x4b342a['getWorldTr'+'ansform']()['getScale']();Ql['setScale'](_0x3c744a['x'],_0x3c744a['y'],_0x3c744a['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x4b342a['parent'],_0x57b2df),Ql['mul'](_0x4b342a['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x5ba135){const _0x8eaeca=_0x5ba135['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x8eaeca['x'],_0x8eaeca['y'],_0x8eaeca['z']);}['_getNodeTr'+'ansform'](_0x38b8a3,_0x412677){let _0xc7694b,_0x47d776;_0x412677?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x38b8a3,_0x412677),_0xc7694b=oL,_0x47d776=br,Ql['getTransla'+'tion'](_0xc7694b),_0x47d776['setFromMat'+'4'](Ql)):(_0xc7694b=_0x38b8a3['getPositio'+'n'](),_0x47d776=_0x38b8a3['getRotatio'+'n']());const _0x15148e=new Ammo['btQuaterni'+'on'](),_0xc3f3df=new Ammo['btTransfor'+'m']();_0xc3f3df['setIdentit'+'y']();const _0x400bcb=_0xc3f3df['getOrigin'](),_0x1d9cd8=_0x38b8a3['collision'];if(_0x1d9cd8&&_0x1d9cd8['_hasOffset']){const _0x1e8cd6=_0x1d9cd8['data']['linearOffs'+'et'],_0x2c1e9d=_0x1d9cd8['data']['angularOff'+'set'],_0x45448e=lL;br['copy'](_0x47d776)['transformV'+'ector'](_0x1e8cd6,_0x45448e),_0x45448e['add'](_0xc7694b),br['copy'](_0x47d776)['mul'](_0x2c1e9d),_0x400bcb['setValue'](_0x45448e['x'],_0x45448e['y'],_0x45448e['z']),_0x15148e['setValue'](br['x'],br['y'],br['z'],br['w']);}else _0x400bcb['setValue'](_0xc7694b['x'],_0xc7694b['y'],_0xc7694b['z']),_0x15148e['setValue'](_0x47d776['x'],_0x47d776['y'],_0x47d776['z'],_0x47d776['w']);return _0xc3f3df['setRotatio'+'n'](_0x15148e),Ammo['destroy'](_0x15148e),_0xc3f3df;}['destroy'](){for(const _0x4889d9 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x4889d9]);this['_triMeshCa'+'che']=null,super['destroy']();}}const Jl=new ie(),SL=new Ht();class yL{constructor(_0x359fa2,_0x28dd4a,_0x39153c){this['_entity']=_0x359fa2,this['_element']=_0x359fa2['element'],this['model']=new $i(),this['node']=new He(),this['model']['graph']=this['node'],this['mesh']=_0x28dd4a,this['meshInstan'+'ce']=new We(this['mesh'],_0x39153c,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x359fa2['name'],this['meshInstan'+'ce']['castShadow']=!(0x163*0x7+0x176*0x16+-0x29d8),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x7ad+-0x79*-0x25+0x863*-0x3),this['_meshDirty']=!(0x6e9+-0xc91*0x2+0x123a),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0xe9a032,_0x2b9545;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0xe9a032=this['meshInstan'+'ce'])==null||_0xe9a032['destroy'](),this['meshInstan'+'ce']=null,(_0x2b9545=this['unmaskMesh'+'Instance'])==null||_0x2b9545['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x4dcf14){this['meshInstan'+'ce']&&(this['mesh']=_0x4dcf14,this['meshInstan'+'ce']['mesh']=_0x4dcf14,this['meshInstan'+'ce']['visible']=!!_0x4dcf14,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x4dcf14),this['forceUpdat'+'eAabb']());}['setMask'](_0x1b2bc5){var _0x3f8445;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x1b2bc5){this['unmaskMesh'+'Instance']=new We(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0x154f*0x1+-0x1c80+0x31d0),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(0x1973+-0xf71+0xc5*-0xd),this['unmaskMesh'+'Instance']['pick']=!(0x1052+0xab9+-0x1b0a),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x32ea44 in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x32ea44,this['meshInstan'+'ce']['parameters'][_0x32ea44]['data']);}else{const _0x2d2fad=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x2d2fad>=0x208e+0x5*-0x748+0x3da&&this['model']['meshInstan'+'ces']['splice'](_0x2d2fad,-0x1c2f+-0x226f+-0x17*-0x2b9);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x1b2bc5||((_0x3f8445=this['unmaskMesh'+'Instance'])==null||_0x3f8445['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x27179c){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x27179c,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x27179c));}['setParamet'+'er'](_0xc9008d,_0xcb363d){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0xc9008d,_0xcb363d),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0xc9008d,_0xcb363d));}['deletePara'+'meter'](_0x3832e6){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x3832e6),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x3832e6));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x2051df=function(_0x1cdbbe){let _0x360f80;const _0x3f681d=_0x1cdbbe['children'],_0x325c64=_0x3f681d['length'];if(_0x325c64){for(let _0x4575c3=-0x49*0x25+-0x2060+0x14d*0x21;_0x4575c3<_0x325c64;_0x4575c3++)_0x3f681d[_0x4575c3]['element']&&(_0x360f80=_0x3f681d[_0x4575c3]);if(!_0x360f80)return null;const _0x345387=_0x2051df(_0x360f80);return _0x345387||_0x360f80;}return null;};if(this['unmaskMesh'+'Instance']){const _0x12aa55=_0x2051df(this['_entity']);_0x12aa55&&_0x12aa55['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x12aa55['element']['drawOrder']+_0x12aa55['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),M['trace'](Rs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x24dbf6){this['meshInstan'+'ce']&&(M['trace'](Rs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x24dbf6),this['meshInstan'+'ce']['drawOrder']=_0x24dbf6);}['setCull'](_0x2ae47e){if(!this['meshInstan'+'ce'])return;const _0x239744=this['_element'];let _0x22cb91=null;_0x2ae47e&&_0x239744['_isScreenS'+'pace']()&&(_0x22cb91=function(_0x2af39b){return _0x239744['isVisibleF'+'orCamera'](_0x2af39b);}),this['meshInstan'+'ce']['cull']=_0x2ae47e,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x22cb91,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x2ae47e,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x22cb91);}['setScreenS'+'pace'](_0x530ca4){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x530ca4,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x530ca4));}['setLayer'](_0x1eaf7b){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x1eaf7b,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x1eaf7b));}['forceUpdat'+'eAabb'](_0x3c8453){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(0x25f7+-0xfb4+-0x1642),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0xb*-0x1be+-0x11a4+0x1b*0x15d)));}['setAabbFun'+'c'](_0x51c4e7){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x51c4e7,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x51c4e7));}}class vL{constructor(_0x45db81){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x45db81,this['_entity']=_0x45db81['entity'],this['_system']=_0x45db81['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0x6c4+-0x1*0xad+0x771,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(-0x131*0x19+-0x14b9+0x3283),this['_rect']=new ae(0x20c+-0x92*0x16+0xa80,-0x2295*-0x1+-0x2b7+-0x1fde,-0x117e+-0x1ea9*-0x1+-0xd2a,0x3*0x633+0x176f+0x601*-0x7),this['_mask']=!(0x2389*-0x1+-0x26d3+0x4a5d),this['_maskRef']=0xd42+-0x13*0xfd+0x585,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(-0x2213+0x60*0xe+0x1cd5),this['_innerOffs'+'et']=new ae(),this['_innerOffs'+'etUniform']=new Float32Array(-0x3b9*-0x8+0x1e47+-0x3c0b),this['_atlasRect']=new ae(),this['_atlasRect'+'Uniform']=new Float32Array(0x1a1*0x12+-0x1*-0x26c9+0x4417*-0x1),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new yL(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(-0xcaf*-0x1+-0x2*0x81a+0x52*0xb,-0xaa4+-0x1ebe+0x2963,-0x5f2+-0x8*0x86+0xa23,-0x75a+-0x1a4c+-0x21a7*-0x1),this['_colorUnif'+'orm']=new Float32Array([0x266b+0x57*0x70+-0xcbf*0x6,-0x634+-0xf*-0x3+0x608,0xc78+-0x1108+-0x1*-0x491]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',-0x2205+0x497+-0x1*-0x1d6f),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x4f7a3e){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x420357){this['_updateMat'+'erial'](_0x420357);}['_onScreenC'+'hange'](_0x1ec362,_0x8d04db){_0x1ec362?this['_updateMat'+'erial'](_0x1ec362['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(0x611+0x2515+0x2f*-0xeb));}['_onDrawOrd'+'erChange'](_0x267b1a){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x267b1a),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(-0x1c98+-0x6d4+0x236d);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At);}['_updateMat'+'erial'](_0x499c63){const _0x9c32d=!!this['_mask'],_0xba6365=!!(this['sprite']&&this['sprite']['renderMode']===Et),_0x684ab7=!!(this['sprite']&&this['sprite']['renderMode']===At);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x499c63,_0x9c32d,_0xba6365,_0x684ab7)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x499c63),this['_renderabl'+'e']['setLayer'](_0x499c63?WT:iy));}['_createMes'+'h'](){const _0x38c558=this['_element'],_0x516550=_0x38c558['calculated'+'Width'],_0x11bebb=_0x38c558['calculated'+'Height'],_0x548d0b=this['_rect'],_0x4351cb=this['_system']['app']['graphicsDe'+'vice'],_0x2ca22e=new Float32Array([_0x516550,-0x1a24+0x67*0x25+0xb41,-0x3f1*-0x3+0x1*0x14a9+-0x81f*0x4,0xaf5*0x3+0x794+-0x2873,-0x33e+0xb3a*-0x1+-0x73c*-0x2,-0x65*-0x3d+0xb03+-0x2313,_0x548d0b['x']+_0x548d0b['z'],-0x9*-0x3fb+-0x1f81+-0x451-_0x548d0b['y'],_0x516550,_0x11bebb,0x2237+-0x1618+-0x1d*0x6b,-0x16*-0x29+-0x44a*-0x3+0x4*-0x419,-0x21b8+-0x8cc+0xc*0x38b,-0x1b4c+0x33*0x52+-0x1*-0xaf7,_0x548d0b['x']+_0x548d0b['z'],-0x1*-0xf1c+0x16a0+-0x1*0x25bb-(_0x548d0b['y']+_0x548d0b['w']),0x1*-0x1245+-0x22cc+0x3511,-0x255*-0xf+-0x3*-0xc87+0x306*-0x18,0x1853+-0x16a0+-0x1b3,-0x2*0x1367+0x1*0x1d5d+-0x971*-0x1,-0x15dc+0x13*-0x12d+0x2c33,0x2289+0x6*0x336+0xd73*-0x4,_0x548d0b['x'],0x1153+0x1*0x160f+0x251*-0x11-_0x548d0b['y'],0x1eb9+-0x167e*0x1+-0x83b,_0x11bebb,0xd2c+0xb4b*-0x1+0x1*-0x1e1,-0x50a+-0xf52+0x145c,0x169d+0x1*-0xa5b+-0x416*0x3,-0x7f0+0x1585+0x13c*-0xb,_0x548d0b['x'],0x1*-0x1d21+-0x2357+0x4079*0x1-(_0x548d0b['y']+_0x548d0b['w'])]),_0x28447c=SL['get'](_0x4351cb,()=>new zt(_0x4351cb,[{'semantic':Pe,'components':0x3,'type':Be},{'semantic':cs,'components':0x3,'type':Be},{'semantic':Yt,'components':0x2,'type':Be}])),_0x2bf8f1=new xs(_0x4351cb,_0x28447c,-0x23a6+0xd7*0x29+0x15*0xf,{'data':_0x2ca22e['buffer']}),_0x57bc63=new Ge(_0x4351cb);return _0x57bc63['vertexBuff'+'er']=_0x2bf8f1,_0x57bc63['primitive'][-0xcc0+-0x24a7*-0x1+-0x1d*0xd3]['type']=cr,_0x57bc63['primitive'][0x1af2+0x118b+-0x2c7d]['base']=-0x216+0x1668+-0x1452,_0x57bc63['primitive'][-0xa2a*-0x3+-0xda*-0x1+-0x2*0xfac]['count']=0x1a*-0x2f+0x20b1+-0x1be7,_0x57bc63['primitive'][-0x767+0x128a+0x1*-0xb23]['indexed']=!(0x12c7+0x2203+-0x34c9),_0x57bc63['aabb']['setMinMax'](I['ZERO'],new I(_0x516550,_0x11bebb,0x1ae1+-0x2d8*0xd+0xa17)),this['_updateMes'+'h'](_0x57bc63),_0x57bc63;}['_updateMes'+'h'](_0x89ae7f){const _0x55b54b=this['_element'];let _0x26d662=_0x55b54b['calculated'+'Width'],_0x185d40=_0x55b54b['calculated'+'Height'];if(_0x55b54b['fitMode']!==Th&&this['_targetAsp'+'ectRatio']>-0xbf+-0x1*0x2451+0x4a2*0x8){const _0xce5cb3=_0x55b54b['calculated'+'Width']/_0x55b54b['calculated'+'Height'];_0x55b54b['fitMode']===JD&&_0xce5cb3>this['_targetAsp'+'ectRatio']||_0x55b54b['fitMode']===eL&&_0xce5cb3<this['_targetAsp'+'ectRatio']?_0x26d662=_0x55b54b['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x185d40=_0x55b54b['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x3a012a=_0x55b54b['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x3a012a),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){const _0x1adf95=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x5ddf7f=(0x1379+-0x164*0x6+-0xb1f)/_0x1adf95['rect']['z'],_0x5ecb8b=(-0x10b8+-0x19ac+0x86*0x51)/_0x1adf95['rect']['w'];this['_innerOffs'+'et']['set'](_0x1adf95['border']['x']*_0x5ddf7f,_0x1adf95['border']['y']*_0x5ecb8b,_0x1adf95['border']['z']*_0x5ddf7f,_0x1adf95['border']['w']*_0x5ecb8b);const _0x508734=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x1adf95['rect']['x']/_0x508734['width'],_0x1adf95['rect']['y']/_0x508734['height'],_0x1adf95['rect']['z']/_0x508734['width'],_0x1adf95['rect']['w']/_0x508734['height']);const _0x3071d5=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0xd41213=_0x1adf95['rect']['z']/_0x3071d5,_0x2870df=_0x1adf95['rect']['w']/_0x3071d5;this['_outerScal'+'e']['set'](Math['max'](_0x26d662,this['_innerOffs'+'et']['x']*_0xd41213),Math['max'](_0x185d40,this['_innerOffs'+'et']['y']*_0x2870df));let _0x3e9207=_0xd41213,_0x4c09a9=_0x2870df;this['_outerScal'+'e']['x']/=_0xd41213,this['_outerScal'+'e']['y']/=_0x2870df,_0x3e9207*=Y['clamp'](_0x26d662/(this['_innerOffs'+'et']['x']*_0xd41213),0x2575+0x2204*0x1+0x7f1*-0x9+0.0001,-0x104f+-0x16ef+0x273f),_0x4c09a9*=Y['clamp'](_0x185d40/(this['_innerOffs'+'et']['y']*_0x2870df),0x7c*0x2e+0x1*-0x23bd+-0x1*-0xd75+0.0001,-0x186d+0x1*-0x1e93+0x3701*0x1),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][0x1*-0x125a+0x21e5+-0x17*0xad]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x1*-0x833+-0xce3*0x2+0x1194]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x5d4+-0x1*0xbb6+0x2*0x8c6]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0x222e+-0x2a5*-0x3+0x2*0xd21]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x5ca+0x26cc+-0x2c96]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x3d*0x5+0x10*-0x1e8+-0x1d50*-0x1]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x1*0x1625+-0xc7*0x1+0x16ee]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x223*-0x3+-0x2003+0x266f]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][-0x71d*-0x2+0x1b1*-0x12+0x8*0x207]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x1*-0x1217+-0x1281*0x1+0x2499]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x3e9207,_0x4c09a9,-0xf27+-0x4*-0x3c1+0x2*0x12),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((0x203e*0x1+-0x320+-0x2*0xe8f+0.5-_0x55b54b['pivot']['x'])*_0x26d662,(-0x30f*0x7+0x1736+-0x1cd*0x1+0.5-_0x55b54b['pivot']['y'])*_0x185d40,-0x3*-0x3b7+0x1*0x1517+-0x203c));}else{const _0x592be7=_0x89ae7f['vertexBuff'+'er'],_0xfd14bb=new Float32Array(_0x592be7['lock']()),_0x2f8988=_0x55b54b['pivot']['x'],_0x1ef496=_0x55b54b['pivot']['y'];_0xfd14bb[-0x7c*-0x46+0xffc+-0x67*0x7c]=_0x26d662-_0x2f8988*_0x26d662,_0xfd14bb[0xcb4+-0x1229+0x576]=0x2513+-0x3*-0x679+-0x387e-_0x1ef496*_0x185d40,_0xfd14bb[0x117c+0x1*0x5aa+-0x171e]=_0x26d662-_0x2f8988*_0x26d662,_0xfd14bb[-0x259e+0x10fd*0x1+-0x5*-0x422]=_0x185d40-_0x1ef496*_0x185d40,_0xfd14bb[-0x252f+0x20bf+-0xc0*-0x6]=-0x478*-0x1+0x14bf+-0x1*0x1937-_0x2f8988*_0x26d662,_0xfd14bb[0x162c+0x17d5+0x93*-0x50]=0x86d+-0x84e+-0x1f-_0x1ef496*_0x185d40,_0xfd14bb[0x47a+-0x1da5+0x1d*0xdf]=-0xfe9+-0x1a2c+0x2a15-_0x2f8988*_0x26d662,_0xfd14bb[0xe8*0x18+-0x798*0x1+-0xe0f]=_0x185d40-_0x1ef496*_0x185d40;let _0x152320=0x565*0x1+-0x150f+-0xfab*-0x1,_0x2bc314=0x1*-0x1a3b+0x1*0x122f+0x3*0x2af,_0x2f1b61=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x47f1a0=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x47f1a0&&(_0x2f1b61=_0x47f1a0['rect'],_0x152320=this['_sprite']['atlas']['texture']['width'],_0x2bc314=this['_sprite']['atlas']['texture']['height']);}_0xfd14bb[-0x27*-0xb+0x12ba+-0x1461]=(_0x2f1b61['x']+_0x2f1b61['z'])/_0x152320,_0xfd14bb[0x89c*-0x2+-0x147*0x4+0x165b]=0x1*-0x21e9+0x1d*-0x4b+0x2a69-_0x2f1b61['y']/_0x2bc314,_0xfd14bb[-0x4*-0x667+0xb*-0x309+0x7d5]=(_0x2f1b61['x']+_0x2f1b61['z'])/_0x152320,_0xfd14bb[-0x1bd3+0x17ea*-0x1+0x27*0x154]=0xbb2+0x4c7*-0x6+0x5*0x365-(_0x2f1b61['y']+_0x2f1b61['w'])/_0x2bc314,_0xfd14bb[0x5*-0x43+0x173d+-0xe9*0x18]=_0x2f1b61['x']/_0x152320,_0xfd14bb[0xbe7+0x1*0x71b+0x1d*-0xa7]=0x147f+-0xdcd+-0x6b1-_0x2f1b61['y']/_0x2bc314,_0xfd14bb[0x45*0x74+0x1*-0x1d1e+0x1*-0x208]=_0x2f1b61['x']/_0x152320,_0xfd14bb[-0x2d+-0x371*-0x1+-0x325]=-0x1f18+0x29*0x7a+0xb8f-(_0x2f1b61['y']+_0x2f1b61['w'])/_0x2bc314,_0x592be7['unlock']();const _0x1e82f8=new I(-0x85*0x7+0x61e+-0x27b-_0x2f8988*_0x26d662,0x1*0xab0+0x13f*-0x17+0x11f9-_0x1ef496*_0x185d40,0x4*-0x153+-0xc11*0x1+0x115d*0x1),_0x6febad=new I(_0x26d662-_0x2f8988*_0x26d662,_0x185d40-_0x1ef496*_0x185d40,0x41*0x7a+0x114a+-0x3044);_0x89ae7f['aabb']['setMinMax'](_0x1e82f8,_0x6febad),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x1*0x2167+-0x1876*0x1+0x1a*-0x58,0x140*-0x1+-0x23f2+0x6b*0x59,-0x44*0x56+-0x1*0x1174+-0x1*-0x284d),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](0x665+-0x13d0+0x1*0xd6b,-0x10*-0x15d+0x26b1+0x6b9*-0x9,-0x2d7*0x9+0xd5a+0xc35),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(-0x16b6+-0x175b+0x2e12);}['_updateSpr'+'ite'](){let _0x3fa56c=!(-0x12b7+-0x1797+0x2a4f),_0x5835a7=null;if(this['_targetAsp'+'ectRatio']=-(-0x62f+-0x9f3+0x1023),this['_sprite']&&this['_sprite']['atlas']){_0x5835a7=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x3fa56c=this['_sprite']['renderMode']===Et||this['_sprite']['renderMode']===At;const _0x4157c5=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x4157c5==null?void(-0xa13*0x1+0x9c5+-0xd*-0x6):_0x4157c5['rect']['w'])>0xe94+-0x20a4+0x1210&&(this['_targetAsp'+'ectRatio']=_0x4157c5['rect']['z']/_0x4157c5['rect']['w']);}this['mesh']=_0x3fa56c?_0x5835a7:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x2070+-0x2185*-0x1+0x1*-0x41f5):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x3847c4){return _0x3847c4['center']['set'](-0x9e*0x2e+0xeb5+0xdaf,0x19c8+-0x2b*0x3d+-0x1*0xf89,0x158+-0xa80+0x928),_0x3847c4['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x22ed+-0x529*0x1+-0x2dd*-0xe+0.5),this['_outerScal'+'e']['y']*(-0x1903*-0x1+-0x264e+0xd4b*0x1+0.5),0xa7*0x9+0x1ae1+-0x20c0+0.001),_0x3847c4['setFromTra'+'nsformedAa'+'bb'](_0x3847c4,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x3847c4;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x38f62b=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x38f62b),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x3b6e69){this['material']=_0x3b6e69['resource'];}['_onMateria'+'lAdded'](_0x29a7fc){this['_system']['app']['assets']['off']('add:'+_0x29a7fc['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x29a7fc['id']&&this['_bindMater'+'ialAsset'](_0x29a7fc);}['_bindMater'+'ialAsset'](_0x20fca8){this['_entity']['enabled']&&(_0x20fca8['on']('load',this['_onMateria'+'lLoad'],this),_0x20fca8['on']('change',this['_onMateria'+'lChange'],this),_0x20fca8['on']('remove',this['_onMateria'+'lRemove'],this),_0x20fca8['resource']?this['_onMateria'+'lLoad'](_0x20fca8):this['_system']['app']['assets']['load'](_0x20fca8));}['_unbindMat'+'erialAsset'](_0x35e424){_0x35e424['off']('load',this['_onMateria'+'lLoad'],this),_0x35e424['off']('change',this['_onMateria'+'lChange'],this),_0x35e424['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x2b7251){this['_system']['app']['assets']['off']('add:'+_0x2b7251['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x2b7251['id']&&this['_bindTextu'+'reAsset'](_0x2b7251);}['_bindTextu'+'reAsset'](_0x31dee8){this['_entity']['enabled']&&(_0x31dee8['on']('load',this['_onTexture'+'Load'],this),_0x31dee8['on']('change',this['_onTexture'+'Change'],this),_0x31dee8['on']('remove',this['_onTexture'+'Remove'],this),_0x31dee8['resource']?this['_onTexture'+'Load'](_0x31dee8):this['_system']['app']['assets']['load'](_0x31dee8));}['_unbindTex'+'tureAsset'](_0x4b51e1){_0x4b51e1['off']('load',this['_onTexture'+'Load'],this),_0x4b51e1['off']('change',this['_onTexture'+'Change'],this),_0x4b51e1['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x367780){this['texture']=_0x367780['resource'];}['_onTexture'+'Change'](_0x115ab7){}['_onTexture'+'Remove'](_0x36f586){}['_onSpriteA'+'ssetAdded'](_0x843dae){this['_system']['app']['assets']['off']('add:'+_0x843dae['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x843dae['id']&&this['_bindSprit'+'eAsset'](_0x843dae);}['_bindSprit'+'eAsset'](_0x450bd1){this['_entity']['enabled']&&(_0x450bd1['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x450bd1['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x450bd1['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x450bd1['resource']?this['_onSpriteA'+'ssetLoad'](_0x450bd1):this['_system']['app']['assets']['load'](_0x450bd1));}['_unbindSpr'+'iteAsset'](_0x248f1f){_0x248f1f['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x248f1f['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x248f1f['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x248f1f['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x248f1f['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x1a1ea){if(!_0x1a1ea||!_0x1a1ea['resource'])this['sprite']=null;else{if(_0x1a1ea['resource']['atlas'])this['sprite']=_0x1a1ea['resource'];else{const _0x444e0f=_0x1a1ea['data']['textureAtl'+'asAsset'];if(_0x444e0f){const _0x3b7d0c=this['_system']['app']['assets'];_0x3b7d0c['off']('load:'+_0x444e0f,this['_onTexture'+'AtlasLoad'],this),_0x3b7d0c['once']('load:'+_0x444e0f,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x1e5209){this['_onSpriteA'+'ssetLoad'](_0x1e5209);}['_onSpriteA'+'ssetRemove'](_0x1a4465){}['_bindSprit'+'e'](_0x2d1875){this['_evtSetMes'+'hes']=_0x2d1875['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x2d1875['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x2d1875['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x2d1875['atlas']&&_0x2d1875['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x3028fd){var _0x47d103;(_0x47d103=this['_evtSetMes'+'hes'])==null||_0x47d103['off'](),this['_evtSetMes'+'hes']=null,_0x3028fd['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x3028fd['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x3028fd['atlas']&&_0x3028fd['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x93a+-0x67*-0xa+-0x1a8*0x8,this['_sprite']['frameKeys']['length']-(-0x824+0x4*-0x5d1+0x1f69))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ei&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x2e0212){const _0x144b10=this['_spriteAss'+'et'];_0x144b10 instanceof me?this['_onSpriteA'+'ssetLoad'](_0x144b10):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x144b10));}['onEnable'](){if(this['_materialA'+'sset']){const _0x24b7c3=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x24b7c3&&_0x24b7c3['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x24b7c3);}if(this['_textureAs'+'set']){const _0x49f2eb=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x49f2eb&&_0x49f2eb['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x49f2eb);}if(this['_spriteAss'+'et']){const _0x1a9970=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x1a9970&&_0x1a9970['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x1a9970);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x545ab2){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x545ab2,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x545ab2;let _0x315069=-0x8d6+0x224a+-0x1974;if(this['_element']['maskedBy']&&(_0x315069=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x542319=new ai({'ref':_0x315069+(0xb*-0x13+-0x134b+0x141d*0x1),'func':Lh,'zpass':Y0});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x542319,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x542319;}}['_updateRen'+'derableEmi'+'ssive'](){Jl['linear'](this['_color']),this['_colorUnif'+'orm'][0x40*-0x85+0xb*-0x103+0x1*0x2c61]=Jl['r'],this['_colorUnif'+'orm'][0x1bb*-0xd+-0x1db5+0x3435]=Jl['g'],this['_colorUnif'+'orm'][0x1ea9*-0x1+-0x1800+-0x3*-0x1239]=Jl['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x1a6ef2){this['_color']===_0x1a6ef2&&M['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x37a9be,g:_0x38b957,b:_0x329089}=_0x1a6ef2;(this['_color']['r']!==_0x37a9be||this['_color']['g']!==_0x38b957||this['_color']['b']!==_0x329089)&&(this['_color']['r']=_0x37a9be,this['_color']['g']=_0x38b957,this['_color']['b']=_0x329089,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x265989){_0x265989!==this['_color']['a']&&(this['_color']['a']=_0x265989,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x265989)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x265989);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x16e359){this['_rect']===_0x16e359&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x56c790,_0x59c9ec,_0x2b8fae,_0x5c64c9;_0x16e359 instanceof ae?(_0x56c790=_0x16e359['x'],_0x59c9ec=_0x16e359['y'],_0x2b8fae=_0x16e359['z'],_0x5c64c9=_0x16e359['w']):(_0x56c790=_0x16e359[-0x4*0x883+0x175f+0xaad],_0x59c9ec=_0x16e359[0x85d+0x1783+-0x1fdf],_0x2b8fae=_0x16e359[-0x165*0xd+-0x11a*0xd+0x2075],_0x5c64c9=_0x16e359[0x1646+0x26*-0xfb+-0x15d*-0xb]),!(_0x56c790===this['_rect']['x']&&_0x59c9ec===this['_rect']['y']&&_0x2b8fae===this['_rect']['z']&&_0x5c64c9===this['_rect']['w'])&&(this['_rect']['set'](_0x56c790,_0x59c9ec,_0x2b8fae,_0x5c64c9),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x24a6*0x1+-0x241d+-0x89*0x1):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x4fe269=this['_system']['app']['assets'];_0x4fe269['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x37300c=_0x4fe269['get'](this['_materialA'+'sset']);_0x37300c&&(_0x37300c['off']('load',this['_onMateria'+'lLoad'],this),_0x37300c['off']('change',this['_onMateria'+'lChange'],this),_0x37300c['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x6aba7a){if(this['_material']!==_0x6aba7a){if(!_0x6aba7a){const _0x3614ac=this['_element']['_isScreenS'+'pace']();this['mask']?_0x6aba7a=_0x3614ac?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x6aba7a=_0x3614ac?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x6aba7a,this['_materialA'+'sset']){const _0x3dcbd6=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x3dcbd6||_0x3dcbd6['resource']!==_0x6aba7a)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x6aba7a&&(this['_renderabl'+'e']['setMateria'+'l'](_0x6aba7a),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x2c10c8){const _0x298409=this['_system']['app']['assets'];let _0x49210d=_0x2c10c8;if(_0x2c10c8 instanceof me&&(_0x49210d=_0x2c10c8['id']),this['_materialA'+'sset']!==_0x49210d){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x49210d,this['_materialA'+'sset']){const _0x3e6633=_0x298409['get'](this['_materialA'+'sset']);_0x3e6633?this['_bindMater'+'ialAsset'](_0x3e6633):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x49210d,_0x298409['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x49210d;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x21c4c9){if(this['_texture']!==_0x21c4c9){if(this['_textureAs'+'set']){const _0x40058d=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x40058d&&_0x40058d['resource']!==_0x21c4c9&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x21c4c9,_0x21c4c9){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x1b7859=this['_texture']['width']/this['_texture']['height'];_0x1b7859!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x1b7859,this['_element']['fitMode']!==Th&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(-0x1bf8*-0x1+-0x202f+0x438),this['_element']['fitMode']!==Th&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x33e663){const _0x310b65=this['_system']['app']['assets'];let _0x54a3fa=_0x33e663;if(_0x33e663 instanceof me&&(_0x54a3fa=_0x33e663['id']),this['_textureAs'+'set']!==_0x54a3fa){if(this['_textureAs'+'set']){_0x310b65['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x12bd3c=_0x310b65['get'](this['_textureAs'+'set']);_0x12bd3c&&(_0x12bd3c['off']('load',this['_onTexture'+'Load'],this),_0x12bd3c['off']('change',this['_onTexture'+'Change'],this),_0x12bd3c['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x54a3fa,this['_textureAs'+'set']){const _0x33d8f7=_0x310b65['get'](this['_textureAs'+'set']);_0x33d8f7?this['_bindTextu'+'reAsset'](_0x33d8f7):(this['texture']=null,_0x310b65['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x1c36b8){const _0x22cad4=this['_system']['app']['assets'];let _0x472edc=_0x1c36b8;if(_0x1c36b8 instanceof me&&(_0x472edc=_0x1c36b8['id']),this['_spriteAss'+'et']!==_0x472edc){if(this['_spriteAss'+'et']){_0x22cad4['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x202495=_0x22cad4['get'](this['_spriteAss'+'et']);_0x202495&&this['_unbindSpr'+'iteAsset'](_0x202495);}if(this['_spriteAss'+'et']=_0x472edc,this['_spriteAss'+'et']){const _0x4c135a=_0x22cad4['get'](this['_spriteAss'+'et']);_0x4c135a?this['_bindSprit'+'eAsset'](_0x4c135a):(this['sprite']=null,_0x22cad4['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x472edc);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x5ea95e){if(this['_sprite']!==_0x5ea95e){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x18018b=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x18018b&&_0x18018b['resource']!==_0x5ea95e&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x5ea95e,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x25*0x4f+0x2220+-0x1*0x16b5,this['_sprite']['frameKeys']['length']-(-0x12e9*-0x2+-0x24ab+0x7*-0x2a))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x4fd147){const _0x21ff08=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x4fd147,0xd*0x2ed+-0x16*-0x2+0x1*-0x2635,this['_sprite']['frameKeys']['length']-(-0x22de+-0x1d79+0x4*0x1016)):this['_spriteFra'+'me']=_0x4fd147,this['_spriteFra'+'me']!==_0x21ff08&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x4fd147);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x3379b2){this['_renderabl'+'e']['setMesh'](_0x3379b2),this['_defaultMe'+'sh']===_0x3379b2?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x2dc06d){this['_mask']!==_0x2dc06d&&(this['_mask']=_0x2dc06d,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x215381){this['_pixelsPer'+'Unit']!==_0x215381&&(this['_pixelsPer'+'Unit']=_0x215381,this['_sprite']&&(this['_sprite']['renderMode']===Et||this['_sprite']['renderMode']===At)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class xL extends pe{constructor(_0x4ba736){super(),this['_app']=_0x4ba736,_0x4ba736['i18n']['on'](ha['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0xd6*-0x27+-0x1b1f*-0x1+-0x3bb8),this['_disableLo'+'calization']=!(-0x16*-0x89+-0x1ae3+0xf1e),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x30fed5){const _0x23c7b0=_0x30fed5 instanceof me?_0x30fed5['id']:_0x30fed5;this['_defaultAs'+'set']!==_0x23c7b0&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x23c7b0,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x5c5bbf){const _0x429493=_0x5c5bbf instanceof me?_0x5c5bbf['id']:_0x5c5bbf;this['_localized'+'Asset']!==_0x429493&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x429493,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0xff3fa1){this['_autoLoad']!==_0xff3fa1&&(this['_autoLoad']=_0xff3fa1,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x13f07b){this['_disableLo'+'calization']!==_0x13f07b&&(this['_disableLo'+'calization']=_0x13f07b,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x3080ff=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x3080ff?this['_onDefault'+'AssetAdd'](_0x3080ff):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x1a8a44=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x1a8a44&&(_0x1a8a44['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x1a8a44['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x1a8a44['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x4512c8){this['_defaultAs'+'set']===_0x4512c8['id']&&(_0x4512c8['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x4512c8['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x4512c8['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x54960b){this['_defaultAs'+'set']===_0x54960b['id']&&(_0x54960b['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x54960b['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x46c238=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x46c238&&(_0x46c238['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x46c238['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x46c238['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x46c238['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x46c238):this['_app']['assets']['load'](_0x46c238));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x4ade71=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x4ade71&&(_0x4ade71['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x4ade71['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x4ade71['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x35deba){this['_localized'+'Asset']===_0x35deba['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x59ffc6){this['fire']('load',_0x59ffc6);}['_onLocaliz'+'edAssetCha'+'nge'](_0x819b8e,_0x397345,_0x1b44af,_0x56d1ce){this['fire']('change',_0x819b8e,_0x397345,_0x1b44af,_0x56d1ce);}['_onLocaliz'+'edAssetRem'+'ove'](_0x139a53){this['_localized'+'Asset']===_0x139a53['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x139a53);}['_onLocaleA'+'dd'](_0x278be4,_0x47be87){this['_app']['i18n']['locale']===_0x278be4&&this['_onSetLoca'+'le'](_0x278be4);}['_onLocaleR'+'emove'](_0x2d29cf,_0x35488e){this['_app']['i18n']['locale']===_0x2d29cf&&this['_onSetLoca'+'le'](_0x2d29cf);}['_onSetLoca'+'le'](_0x34acc0){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x45a5c7=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x45a5c7||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x4d90e8=_0x45a5c7['getLocaliz'+'edAssetId'](_0x34acc0);if(!_0x4d90e8){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x4d90e8;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](ha['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const rc='msdf',TL='bitmap',lo=0x1182+-0x1a3e+0x8bc,Ha=-0x559+-0x43*-0x3e+0x20*-0x57,Kf=-0x840+-0x8e7+0x17*0xbf,av=-0x1cba+-0x575+0xb66*0x3,Zf=-0x1803+0x2*-0x411+0x2029,Qf=-0x841+-0x1280+0xd63*0x2,Jf=0x211c+-0x24b1+-0x47*-0xd,eu=-0xcab+0xb*-0x1de+-0x2*-0x109e,og=0x5*-0x6bb+-0xe6*-0x2b+-0x4f3,wL='\x20\x09\x0a\x0d\x0b\x0c',EL=/[\w|/]/;class AL{constructor(_0x536de6){this['_symbols']=_0x536de6,this['_index']=-0x81f+0x22c1+-0x1aa2,this['_last']=0x557*-0x7+-0xbb6*0x3+0x3d1*0x13,this['_cur']=this['_symbols']['length']>-0x539*-0x7+0x229f+-0x2*0x2397?this['_symbols'][0x5e*0x22+0x3e1*0x4+-0x1c00]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x48ab32=this['_read']();for(;_0x48ab32===og;)_0x48ab32=this['_read']();return _0x48ab32!==lo&&_0x48ab32!==Ha&&(this['_last']=this['_index']),_0x48ab32;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x1e3438=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x257da9=this['read'](),_0x33fb97='';for(;_0x33fb97+=(_0x33fb97['length']>-0x2*-0x6c+-0x255a+-0x2*-0x1241?'\x0a':'')+_0x1e3438[_0x257da9]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x257da9===lo||_0x257da9===Ha);)_0x257da9=this['read']();return _0x33fb97;}['_read'](){return this['_buf']=[],this['_eof']()?lo:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>0x1*-0x220f+-0xb*0x24a+0x3b3d?Kf:lo;case'[':return this['_mode']='tag',this['_buf']['length']>-0x6*0x68+0x713+-0x1*0x4a3?Kf:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',Ha;case'[':return this['_store'](),av;case']':return this['_store'](),this['_mode']='text',Zf;case'=':return this['_store'](),Qf;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',Ha);}}['_whitespac'+'e'](){for(this['_store']();wL['indexOf'](this['_cur'])!==-(-0x25ef+-0x379+-0x1*-0x2969);)this['_store']();return og;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',Ha;case'\x22':return this['_next'](),Jf;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return eu;}['_isIdentif'+'ierSymbol'](_0x2e15c5){return _0x2e15c5['length']===0x6fc*0x2+-0x1325+0x52e&&_0x2e15c5['match'](EL)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x1c3cb9){this['_buf']['push'](_0x1c3cb9);}}class bL{constructor(_0xcc2e80){this['_scanner']=new AL(_0xcc2e80),this['_error']=null;}['parse'](_0x2998fc,_0x37f874){for(;;)switch(this['_scanner']['read']()){case lo:return!(-0x9*-0x42c+0x1a3b+-0x3fc7);case Ha:return!(0x24ea+-0x2469+0x2*-0x40);case Kf:Array['prototype']['push']['apply'](_0x2998fc,this['_scanner']['buf']());break;case av:if(!this['_parseTag'](_0x2998fc,_0x37f874))return!(0x1*-0x193f+0x28d+0x16b3);break;default:return!(-0x222b*-0x1+-0x1ff0+-0x23a);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x1f0392,_0x179c73){let _0x437e31=this['_scanner']['read']();if(_0x437e31!==eu)return this['_error']='expected\x20i'+'dentifier',!(-0x824+-0x2483*-0x1+0x1*-0x1c5e);const _0x4996bb=this['_scanner']['buf']()['join']('');if(_0x4996bb[-0x3*0x9cd+0x259a+-0x1*0x833]==='/'){for(let _0x1931c8=_0x179c73['length']-(0x2384*-0x1+0x231c+0x69);_0x1931c8>=0x1827+0x18a4+-0x1*0x30cb;--_0x1931c8)if(_0x4996bb==='/'+_0x179c73[_0x1931c8]['name']&&_0x179c73[_0x1931c8]['end']===null)return _0x179c73[_0x1931c8]['end']=_0x1f0392['length'],_0x437e31=this['_scanner']['read'](),_0x437e31!==Zf?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(-0x8e6+0x2175+-0x188e*0x1)):!(0x16cd+-0x1f*-0x89+0x4*-0x9d9);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x22*0x9d+0xb75*0x3+-0x3738);}const _0x3fe010={'name':_0x4996bb,'value':null,'attributes':{},'start':_0x1f0392['length'],'end':null};if(_0x437e31=this['_scanner']['read'](),_0x437e31===Qf){if(_0x437e31=this['_scanner']['read'](),_0x437e31!==Jf)return this['_error']='expected\x20s'+'tring',!(-0x1476+-0x15e7+0x2a5e);_0x3fe010['value']=this['_scanner']['buf']()['join'](''),_0x437e31=this['_scanner']['read']();}for(;;){switch(_0x437e31){case Zf:return _0x179c73['push'](_0x3fe010),!(0x26a3+0x3d*0x4a+0xd7*-0x43);case eu:{const _0xcd26fc=this['_scanner']['buf']()['join']('');if(_0x437e31=this['_scanner']['read'](),_0x437e31!==Qf)return this['_error']='expected\x20e'+'quals',!(0x11*-0x1ed+0x142*0x2+-0x2*-0xf1d);if(_0x437e31=this['_scanner']['read'](),_0x437e31!==Jf)return this['_error']='expected\x20s'+'tring',!(-0x101*0x9+-0x23f*0x5+-0x1*-0x1445);const _0x544cc6=this['_scanner']['buf']()['join']('');_0x3fe010['attributes'][_0xcd26fc]=_0x544cc6;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(-0x1349+0xd83+0x5c7);}_0x437e31=this['_scanner']['read']();}}}function nv(_0x3997d0,_0x25b7ea){for(const _0xe429e7 in _0x25b7ea){if(!_0x25b7ea['hasOwnProp'+'erty'](_0xe429e7))continue;const _0x5e6f3d=_0x25b7ea[_0xe429e7];_0x5e6f3d instanceof Object?(_0x3997d0['hasOwnProp'+'erty'](_0xe429e7)||(_0x3997d0[_0xe429e7]={}),nv(_0x3997d0[_0xe429e7],_0x25b7ea[_0xe429e7])):_0x3997d0[_0xe429e7]=_0x5e6f3d;}}function CL(_0xf4db4){if(_0xf4db4['length']===-0x4d6*-0x6+0x1*-0x2656+0x4a9*0x2)return null;const _0x112832={};for(let _0x411067=0x788*-0x2+0x1322*-0x2+-0xd55*-0x4;_0x411067<_0xf4db4['length'];++_0x411067){const _0x396fff=_0xf4db4[_0x411067],_0x3b088a={};_0x3b088a[_0x396fff['name']]={'value':_0x396fff['value'],'attributes':_0x396fff['attributes']},nv(_0x112832,_0x3b088a);}return _0x112832;}function PL(_0x366565,_0x442e44){if(_0x366565['length']===0x2*0xf6a+0x149b+-0x4d*0xab)return null;const _0xa59336={};for(let _0x36e7bb=-0x2*0xbc3+0x948+0xe3e;_0x36e7bb<_0x366565['length'];++_0x36e7bb){const _0x237401=_0x366565[_0x36e7bb];_0xa59336['hasOwnProp'+'erty'](_0x237401['start'])?_0xa59336[_0x237401['start']]['open']===null?_0xa59336[_0x237401['start']]['open']=[_0x237401]:_0xa59336[_0x237401['start']]['open']['push'](_0x237401):_0xa59336[_0x237401['start']]={'open':[_0x237401],'close':null},_0xa59336['hasOwnProp'+'erty'](_0x237401['end'])?_0xa59336[_0x237401['end']]['close']===null?_0xa59336[_0x237401['end']]['close']=[_0x237401]:_0xa59336[_0x237401['end']]['close']['push'](_0x237401):_0xa59336[_0x237401['end']]={'open':null,'close':[_0x237401]};}let _0x19c2ee=[];function _0x24b6ce(_0x1f2316){_0x19c2ee=_0x19c2ee['filter'](_0x5439f4=>_0x1f2316['find'](_0x3012a4=>_0x3012a4===_0x5439f4)===void(0x1*0xef0+0x139a+-0x228a*0x1));}function _0x5dc45a(_0x2637a9){for(let _0xbd9693=-0x16*0x101+0x61f+0xff7;_0xbd9693<_0x2637a9['length'];++_0xbd9693)_0x19c2ee['push'](_0x2637a9[_0xbd9693]);}const _0x3d6c54=Object['keys'](_0xa59336)['sort']((_0x4283d6,_0x241f01)=>_0x4283d6-_0x241f01),_0x35ef3e=[];for(let _0x152b28=-0x1284+0x489+0xdfb;_0x152b28<_0x3d6c54['length'];++_0x152b28){const _0x16df7b=_0xa59336[_0x3d6c54[_0x152b28]];_0x16df7b['close']!==null&&_0x24b6ce(_0x16df7b['close']),_0x16df7b['open']!==null&&_0x5dc45a(_0x16df7b['open']),_0x35ef3e['push']({'start':_0x3d6c54[_0x152b28],'tags':CL(_0x19c2ee)});}const _0x24bb3a=[];let _0x1abfe1=null;for(let _0x99e0de=-0x7fa*0x1+-0x494*-0x4+-0x17a*0x7;_0x99e0de<_0x35ef3e['length'];++_0x99e0de){const _0xbf3b19=_0x35ef3e[_0x99e0de];for(;_0x24bb3a['length']<_0xbf3b19['start'];)_0x24bb3a['push'](_0x1abfe1?_0x1abfe1['tags']:null);_0x1abfe1=_0xbf3b19;}for(;_0x24bb3a['length']<_0x442e44;)_0x24bb3a['push'](null);return _0x24bb3a;}function ML(_0x29b85b){const _0xee1c5a=new bL(_0x29b85b),_0x5d723a=[],_0xc37561=[];if(!_0xee1c5a['parse'](_0x5d723a,_0xc37561))return console['warn'](_0xee1c5a['error']()),{'symbols':_0x29b85b,'tags':null};const _0x367175=_0xc37561['find'](_0x2fa170=>_0x2fa170['end']===null);if(_0x367175)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x367175['name']+'\x27'),{'symbols':_0x29b85b,'tags':null};const _0x39cc56=PL(_0xc37561,_0x5d723a['length']);return{'symbols':_0x5d723a,'tags':_0x39cc56};}class IL{static['evaluate'](_0x2c6a48){return ML(_0x2c6a48);}}class DL{constructor(){this['count']=0x10b6+-0x10cc*-0x2+-0x324e,this['quad']=-0x343*-0x1+0xcdf+-0x1022,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function LL(_0x1968ef,_0x4b514a){const _0x15f3ff=new Ge(_0x1968ef);return _0x15f3ff['setPositio'+'ns'](_0x4b514a['positions']),_0x15f3ff['setNormals'](_0x4b514a['normals']),_0x15f3ff['setColors3'+'2'](_0x4b514a['colors']),_0x15f3ff['setUvs'](-0x401+-0xa*0x323+-0x713*-0x5,_0x4b514a['uvs']),_0x15f3ff['setIndices'](_0x4b514a['indices']),_0x15f3ff['setVertexS'+'tream'](Po,_0x4b514a['outlines'],-0x1*0xc16+-0x4*-0x6fa+-0xfcf,void(0x10c*0x9+-0x22a0+0x1934),Be,!(0xee*0x3+-0x2142+-0x10d*-0x1d)),_0x15f3ff['setVertexS'+'tream'](Mo,_0x4b514a['shadows'],0x1c*-0x7f+0x11*0x6d+0x6aa,void(0x2*-0x84b+-0x47+-0x59f*-0x3),Be,!(-0x2210+-0x871+0x2a82)),_0x15f3ff['update'](),_0x15f3ff;}const lg=/^[\r\n]$/,RL=/^[ \t]$/,hg=/^[ \t\-]|\u200b$/,OL=/^[a-z0-9]$/i,cg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,FL=/^[〕〉》」』】〙〗〟ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻]$/,NL=['​','؜','‎','‏','‪','‫','‬','‭','‮','⁦','⁧','⁨','⁩'],kL={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},dg=new ie(),UL=new J(),Ve=new ie();class BL{constructor(_0x16dbd4){this['_element']=_0x16dbd4,this['_system']=_0x16dbd4['system'],this['_entity']=_0x16dbd4['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new xL(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x1c34+-0x1*0x871+0x13c3*-0x1),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(0x16f*-0x17+-0x1*-0x23ef+-0x1*0x2f5,0x6a*-0xc+-0x1009+0x1502,-0x13d*-0x2+0x41*0x3d+-0x1*0x11f6,-0xd92+0x20ec*-0x1+0x2e7f),this['_colorUnif'+'orm']=new Float32Array(0x169b+-0x25c4+0xf2c),this['_spacing']=-0x776+-0xa15*-0x1+0x14f*-0x2,this['_fontSize']=0x7ca+0x4*-0x361+0x5da,this['_fontMinY']=-0x177+0x1ecc+-0x9c7*0x3,this['_fontMaxY']=0x4ea*-0x7+0x2514+0xe*-0x31,this['_originalF'+'ontSize']=0x65c+0x12c4+-0x1900,this['_maxFontSi'+'ze']=0x13f8+0x3ea*0x2+-0x1bac,this['_minFontSi'+'ze']=0x1cf7+-0x1f8c+0xdf*0x3,this['_autoFitWi'+'dth']=!(-0x15*-0x4+-0x2098+0x2045),this['_autoFitHe'+'ight']=!(-0x879*-0x3+0x1ae1+-0x344b*0x1),this['_maxLines']=-(-0x2527*0x1+0x2213*0x1+0x1*0x315),this['_lineHeigh'+'t']=-0x2c*-0x6+0x65*-0x30+0x1208,this['_scaledLin'+'eHeight']=-0x1bc0+-0x1e3e+0x3a1e,this['_wrapLines']=!(-0x17*-0x119+0x20ed*-0x1+0x119*0x7),this['_drawOrder']=-0x3*0xce0+-0x757*-0x5+0x1ed*0x1,this['_alignment']=new J(0x299*-0x1+0xbd0+-0x937+0.5,-0x1363*0x2+0x1b5a+-0x2*-0x5b6+0.5),this['_autoWidth']=!(0xd34+-0xd*-0x9d+-0x152d),this['_autoHeigh'+'t']=!(0x1*-0x182d+0x2*-0x10d6+0x1*0x39d9),this['width']=0x1*0x1cea+-0x1c89+-0x61,this['height']=-0x2429+0x1*-0x98f+0x26*0x134,this['_node']=new He(),this['_model']=new $i(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(0x21c0+0xa4*0x1+-0x8e*0x3e),this['_aabb']=new Ie(),this['_noResize']=!(-0x1cd3+0x13e9+0x8eb),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(0x3e8*0xa+-0xe86+-0x1889),this['_unicodeCo'+'nverter']=!(0x96f+0x741+-0x10af*0x1),this['_rtl']=!(0x1*-0xec0+-0x3*-0x41e+0xcd*0x3),this['_outlineCo'+'lor']=new ie(0x10ef+-0x2558+-0x37*-0x5f,0xfa0+-0x28a+-0x43*0x32,-0x1a*0x47+0x1*-0x529+0xc5f,0x17*-0xf6+0x21*0x2f+-0x4f*-0x34),this['_outlineCo'+'lorUniform']=new Float32Array(0x5*-0x355+0x27*-0x5c+0x1eb1),this['_outlineTh'+'icknessSca'+'le']=0x1283+-0x32e+-0x9d*0x19+0.2,this['_outlineTh'+'ickness']=0x3e*0x83+0x1347+-0x3301,this['_shadowCol'+'or']=new ie(0x29e+0x3*0x138+0x16*-0x49,-0x1*-0xef7+-0xc4c*0x1+0x2ab*-0x1,-0x1*0xddc+-0x143f+-0x221b*-0x1,-0x1a18+0x1*-0x2524+-0x3f3d*-0x1),this['_shadowCol'+'orUniform']=new Float32Array(0x1e*0xdf+0x1*-0x16d9+0x9*-0x5d),this['_shadowOff'+'setScale']=-0x15b*0xf+-0x274+0x16c9*0x1+0.005,this['_shadowOff'+'set']=new J(0x259d+0xc2*-0x2b+-0x75*0xb,-0xe4*0xc+0xd82+0x2d2*-0x1),this['_shadowOff'+'setUniform']=new Float32Array(-0x47*-0x82+-0x20ab*0x1+-0xad*0x5),this['_enableMar'+'kup']=!(0x1f6*-0xd+-0x19a4+0x1*0x3323),this['_onScreenC'+'hange'](this['_element']['screen']),_0x16dbd4['on']('resize',this['_onParentR'+'esize'],this),_0x16dbd4['on']('set:screen',this['_onScreenC'+'hange'],this),_0x16dbd4['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x16dbd4['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x16dbd4['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](ha['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=-0x167*-0x2+-0x7fe+0x53*0x10,this['_rangeEnd']=-0x9ec+-0xc17*-0x2+-0xe42;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](ha['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x5e7fea,_0x33757f){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x464b90){_0x464b90?this['_updateMat'+'erial'](_0x464b90['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x1942+0x16cf+0x274));}['_onScreenS'+'paceChange'](_0x4d094e){this['_updateMat'+'erial'](_0x4d094e);}['_onDrawOrd'+'erChange'](_0x57f205){if(this['_drawOrder']=_0x57f205,this['_model']){for(let _0x4fa3da=-0xa3*0x31+-0x2*-0x6f0+0x1153,_0x1b51a9=this['_model']['meshInstan'+'ces']['length'];_0x4fa3da<_0x1b51a9;_0x4fa3da++)this['_model']['meshInstan'+'ces'][_0x4fa3da]['drawOrder']=_0x57f205;}}['_onPivotCh'+'ange'](_0x18ea0e){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x457a06){if(this['_i18nKey']){if(this['fontAsset']){const _0x2113ef=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x2113ef||!_0x2113ef['resource']||_0x2113ef['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x1c4b4e,_0x20b4ca){this['_i18nKey']&&_0x20b4ca[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x42ddf8){if(this['unicodeCon'+'verter']){const _0x3f7b15=this['_system']['getUnicode'+'Converter']();_0x3f7b15?_0x42ddf8=_0x3f7b15(_0x42ddf8):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x42ddf8&&(this['_font']&&this['_updateTex'+'t'](_0x42ddf8),this['_text']=_0x42ddf8);}['_updateTex'+'t'](_0x21fee6){let _0x57c22b;if(_0x21fee6===void(0x248c+-0x1e03+-0x1*0x689)&&(_0x21fee6=this['_text']),this['_symbols']=dh['getSymbols'](_0x21fee6['normalize']?_0x21fee6['normalize']('NFC'):_0x21fee6),this['_symbols']['length']===0x497+-0x1ea5+0x1a0e&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x57bc33=IL['evaluate'](this['_symbols']);this['_symbols']=_0x57bc33['symbols'],_0x57c22b=_0x57bc33['tags']||[];}if(this['_rtlReorde'+'r']){const _0xf73f8c=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0xf73f8c){const _0x1b14f5=_0xf73f8c(this['_symbols']);this['_rtl']=_0x1b14f5['rtl'],this['_symbols']=_0x1b14f5['mapping']['map'](function(_0x328cc1){return this['_symbols'][_0x328cc1];},this),_0x57c22b&&(_0x57c22b=_0x1b14f5['mapping']['map'](_0xc9879f=>_0x57c22b[_0xc9879f]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(0x1ca+0xf5*-0x7+-0x4ea*-0x1);const _0x450057=(_0x3b7cb9,_0x1fa26f)=>_0x3b7cb9['toString'](!(-0xbf6+-0x437+0x102d))['toLowerCas'+'e']()+':'+_0x1fa26f['toFixed'](0x196*0xe+0x1885*-0x1+0x253),_0x1bd6a9=(_0x2a0c41,_0x3c392e)=>_0x2a0c41['toString'](!(0x2317+-0x1aa*0x2+-0x1fc3))['toLowerCas'+'e']()+':'+_0x3c392e['x']['toFixed'](-0xb7a+0x2*0x1fa+0xf1*0x8)+':'+_0x3c392e['y']['toFixed'](-0x76d+0x242c+-0x1cbd);if(_0x57c22b){const _0x11f687={},_0xbad83d={},_0x4888d5={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0xbc8+-0x2242+0x2f09)),Math['round'](this['_color']['g']*(0x1f44+0x164b+-0x8*0x692)),Math['round'](this['_color']['b']*(-0x1f70+-0x25d1+0x4640))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(-0x1945+0x375*0x5+0x1*0x8fb)),Math['round'](this['_outlineCo'+'lor']['g']*(0x1e8f+-0x4*0x20f+-0x186*0xe)),Math['round'](this['_outlineCo'+'lor']['b']*(0xa07*0x1+-0x1c50+0x269*0x8)),Math['round'](this['_outlineCo'+'lor']['a']*(0x5*0x59+-0x1d65+0x32f*0x9)),Math['round'](this['_outlineTh'+'ickness']*(-0x1f55+0x1458+0x76*0x1a))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(-0xd9*0x2c+-0x22bd+0x4908)),Math['round'](this['_shadowCol'+'or']['g']*(-0x1503+0x28a*0xb+-0x2f6*0x2)),Math['round'](this['_shadowCol'+'or']['b']*(-0xf57+0x1ae2+-0xa8c)),Math['round'](this['_shadowCol'+'or']['a']*(-0x314*0x8+0x1f40+-0x5a1)),Math['round'](this['_shadowOff'+'set']['x']*(-0x1597+-0x612+0x44*0x6a)),Math['round'](this['_shadowOff'+'set']['y']*(0xe75+-0xd86+-0x70))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x11f687[this['_color']['toString'](!(0x1a7d+-0x847+0x3b*-0x4f))['toLowerCas'+'e']()]=-0xed*0x13+-0x5*-0x4c7+-0x64c,_0xbad83d[_0x450057(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=0x1c*-0x54+-0x463*0x1+0x1*0xd93,_0x4888d5[_0x1bd6a9(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=-0x1*-0x225d+-0x89c+0x1*-0x19c1;for(let _0x13ede1=-0x23*0xb+0x14af+-0x132e,_0x34712b=this['_symbols']['length'];_0x13ede1<_0x34712b;++_0x13ede1){const _0x521923=_0x57c22b[_0x13ede1];let _0x3e1023=-0x4*0x118+-0x2f+0x48f;if(_0x521923&&_0x521923['color']&&_0x521923['color']['value']){const _0x36446e=_0x521923['color']['value'];if(_0x36446e['length']===-0x17c*-0xf+-0x676+-0xfc7&&_0x36446e[0x1bb1+0x1*0x2406+-0x3fb7]==='#'){const _0x176de0=_0x36446e['substring'](-0xe*-0x240+0x59e*0x4+-0x399*0xf)['toLowerCas'+'e']();_0x11f687['hasOwnProp'+'erty'](_0x176de0)?_0x3e1023=_0x11f687[_0x176de0]:/^[0-9a-f]{6}$/['test'](_0x176de0)&&(_0x3e1023=this['_colorPale'+'tte']['length']/(0x17ad+0x1*-0xc68+-0xb42),_0x11f687[_0x176de0]=_0x3e1023,this['_colorPale'+'tte']['push'](parseInt(_0x176de0['substring'](-0x1047+0x1fe7+-0x7d*0x20,0x12*-0x123+-0x2131+0x35a9),0x2ca+-0xe19*0x1+-0x47*-0x29)),this['_colorPale'+'tte']['push'](parseInt(_0x176de0['substring'](0x1c13+-0xce3*-0x2+-0x35d7,0x17f*0x11+0x1*-0x727+-0x1244),0x1ff1+0xfc5*0x2+0xcaf*-0x5)),this['_colorPale'+'tte']['push'](parseInt(_0x176de0['substring'](0x7*0x35b+-0x1ca6+0x52d*0x1,0xcd1+-0x88a*-0x2+-0x1ddf),0x19b0*-0x1+0x3*0x3a9+0xec5)));}}this['_symbolCol'+'ors']['push'](_0x3e1023);let _0x467f4a=-0x25fc+-0x2c*0xad+0x43b8;if(_0x521923&&_0x521923['outline']&&(_0x521923['outline']['attributes']['color']||_0x521923['outline']['attributes']['thickness'])){let _0x5c5eae=_0x521923['outline']['attributes']['color']?dg['fromString'](_0x521923['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0xe0704f=Number(_0x521923['outline']['attributes']['thickness']);(Number['isNaN'](_0x5c5eae['r'])||Number['isNaN'](_0x5c5eae['g'])||Number['isNaN'](_0x5c5eae['b'])||Number['isNaN'](_0x5c5eae['a']))&&(_0x5c5eae=this['_outlineCo'+'lor']),Number['isNaN'](_0xe0704f)&&(_0xe0704f=this['_outlineTh'+'ickness']);const _0x242a42=_0x450057(_0x5c5eae,_0xe0704f);_0xbad83d['hasOwnProp'+'erty'](_0x242a42)?_0x467f4a=_0xbad83d[_0x242a42]:(_0x467f4a=this['_outlinePa'+'lette']['length']/(-0x77c+0x1699*0x1+0x8*-0x1e3),_0xbad83d[_0x242a42]=_0x467f4a,this['_outlinePa'+'lette']['push'](Math['round'](_0x5c5eae['r']*(0x9f1+-0x6d*-0xe+0x8*-0x1dd)),Math['round'](_0x5c5eae['g']*(-0x8ae+-0x67*0x2+0xa7b)),Math['round'](_0x5c5eae['b']*(-0x14*0x1bb+0x551*0x7+0x2*-0xce)),Math['round'](_0x5c5eae['a']*(0x7*0x3c8+-0x1*-0x8ef+0x6*-0x5bc)),Math['round'](_0xe0704f*(-0x356+-0x216c+0x25c1))));}this['_symbolOut'+'lineParams']['push'](_0x467f4a);let _0x378367=0x8b*-0x21+0x1dc+0x100f*0x1;if(_0x521923&&_0x521923['shadow']&&(_0x521923['shadow']['attributes']['color']||_0x521923['shadow']['attributes']['offset']||_0x521923['shadow']['attributes']['offsetX']||_0x521923['shadow']['attributes']['offsetY'])){let _0x1217a8=_0x521923['shadow']['attributes']['color']?dg['fromString'](_0x521923['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x2dfc89=Number(_0x521923['shadow']['attributes']['offset']),_0x5a7ade=Number(_0x521923['shadow']['attributes']['offsetX']),_0x5f51ed=Number(_0x521923['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x1217a8['r'])||Number['isNaN'](_0x1217a8['g'])||Number['isNaN'](_0x1217a8['b'])||Number['isNaN'](_0x1217a8['a']))&&(_0x1217a8=this['_shadowCol'+'or']);const _0x333cea=UL['set'](Number['isNaN'](_0x5a7ade)?Number['isNaN'](_0x2dfc89)?this['_shadowOff'+'set']['x']:_0x2dfc89:_0x5a7ade,Number['isNaN'](_0x5f51ed)?Number['isNaN'](_0x2dfc89)?this['_shadowOff'+'set']['y']:_0x2dfc89:_0x5f51ed),_0x5188e5=_0x1bd6a9(_0x1217a8,_0x333cea);_0x4888d5['hasOwnProp'+'erty'](_0x5188e5)?_0x378367=_0x4888d5[_0x5188e5]:(_0x378367=this['_shadowPal'+'ette']['length']/(0x1*0x14c+0x191a+0x8*-0x34c),_0x4888d5[_0x5188e5]=_0x378367,this['_shadowPal'+'ette']['push'](Math['round'](_0x1217a8['r']*(-0xb1b+0x2*0xb8a+-0xafa)),Math['round'](_0x1217a8['g']*(0xb*0x152+-0x1*-0x1fb4+-0x2d3b*0x1)),Math['round'](_0x1217a8['b']*(0x2c8*-0x1+-0x3*0x823+0x1c30)),Math['round'](_0x1217a8['a']*(-0xa7e*-0x2+-0x13c1+-0x3*0x14)),Math['round'](_0x333cea['x']*(-0xc9b*-0x1+-0x44d+-0x7cf)),Math['round'](_0x333cea['y']*(0x1f34+0xad5+-0x298a))));}this['_symbolSha'+'dowParams']['push'](_0x378367);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x2f8c16=this['_calculate'+'CharsPerTe'+'xture']();let _0x170611=!(0x3a0+-0x16*-0x15b+-0x2171*0x1);const _0x4ce835=this['_element'],_0x78f213=_0x4ce835['_isScreenS'+'pace'](),_0x58929f=_0x4ce835['_isScreenC'+'ulled'](),_0x52c882=function(_0xc387d3){return _0x4ce835['isVisibleF'+'orCamera'](_0xc387d3);};for(let _0x31ba18=-0x39e*0x8+-0xaf*-0x2f+0x2b*-0x13,_0x31bc46=this['_meshInfo']['length'];_0x31ba18<_0x31bc46;_0x31ba18++){const _0x4692f3=_0x2f8c16[_0x31ba18]||-0x1*-0x1ca+0x1464+-0x162e,_0x2ad7b0=this['_meshInfo'][_0x31ba18];if(_0x2ad7b0['count']!==_0x4692f3){if(_0x170611||(_0x4ce835['removeMode'+'lFromLayer'+'s'](this['_model']),_0x170611=!(-0x49f*-0x2+-0x17b7+0xd*0x11d)),_0x2ad7b0['count']=_0x4692f3,_0x2ad7b0['positions']['length']=_0x2ad7b0['normals']['length']=_0x4692f3*(0x1b7e+0x955*-0x4+0x9d9)*(0x1ad2*-0x1+-0x1d5f+0x3835),_0x2ad7b0['indices']['length']=_0x4692f3*(0x1976*-0x1+-0x2af+0x4*0x70a)*(0xa05+-0x157b+0xb78*0x1),_0x2ad7b0['uvs']['length']=_0x4692f3*(0xa93*0x1+0x2378+-0x2e09)*(0x104a+0x2481+-0x34c7),_0x2ad7b0['colors']['length']=_0x4692f3*(-0x26d7+0x1*-0x16dd+-0x13c*-0x32)*(-0xacd+-0x1179+-0x66*-0x47),_0x2ad7b0['outlines']['length']=_0x4692f3*(0x3*-0x8bb+-0x4*0x28d+0x2469)*(-0x2223+0x351+-0x3*-0xa47),_0x2ad7b0['shadows']['length']=_0x4692f3*(0x1*-0x11ab+0x1d*-0x14f+0x1bd1*0x2)*(-0x218d+-0x3e*-0x7f+0x2ce*0x1),_0x2ad7b0['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x2ad7b0['meshInstan'+'ce']),_0x4692f3===-0x2*0x368+0x72+0x65e){_0x2ad7b0['meshInstan'+'ce']=null;continue;}for(let _0x3ed70e=-0x8e3+-0x4d*0x4d+0x200c*0x1;_0x3ed70e<_0x4692f3;_0x3ed70e++)_0x2ad7b0['indices'][_0x3ed70e*(-0x34*0x93+-0x1*0x21bd+-0x1*-0x3f9c)*(0x4*-0x169+0x1*0x1e8c+-0x18e6)+(-0x12f6*-0x2+0x67*0xc+-0x2ac0)]=_0x3ed70e*(-0x1fa4+0x3*-0xb8+0x21d0),_0x2ad7b0['indices'][_0x3ed70e*(-0x1*-0x155d+-0x3fb+-0x115f*0x1)*(-0x13f4+-0x7a*-0x1c+0xb*0x9a)+(0x3*-0x852+0x7a4+0x1153)]=_0x3ed70e*(-0x3e*-0x3d+-0x9*0x95+-0x985*0x1)+(-0x6b*-0x9+-0x2*-0x356+-0xa6e),_0x2ad7b0['indices'][_0x3ed70e*(-0x7*0xda+0xd5c+0x763*-0x1)*(-0x9b0+0x3d2*-0x3+0x1528)+(-0x1*0x217c+-0x1*0xea2+0x3020)]=_0x3ed70e*(0x2290+0x823+-0x2aaf)+(-0x1*0x1055+0x79+0xfdf),_0x2ad7b0['indices'][_0x3ed70e*(-0x256f+-0xc4d+0x31bf*0x1)*(-0x8*-0x56+-0x16c7+0x1419)+(-0xb4f*-0x3+-0x2*-0x941+-0x346c)]=_0x3ed70e*(0x114c+-0x964+0x2*-0x3f2)+(0x1541*-0x1+0x750*-0x2+0x1*0x23e3),_0x2ad7b0['indices'][_0x3ed70e*(-0x1e23*-0x1+0x56e+0x52*-0x6f)*(0x56*0x27+0xb81+-0x1899)+(0x1802+-0x1a6b+-0x3*-0xcf)]=_0x3ed70e*(0x9ee+0x2645+0x9a3*-0x5)+(-0x7aa+-0x1*0x230f+0x2abc),_0x2ad7b0['indices'][_0x3ed70e*(-0x781+0x113c+0x8*-0x137)*(0x1f2f+-0x1b38+-0x3f5)+(0x2*-0x12ec+0x1*0x85b+-0x9d6*-0x3)]=_0x3ed70e*(0x10f*0x5+-0x166a+0x1123)+(-0x248c+-0x1*0x5ab+0x2a38),_0x2ad7b0['normals'][_0x3ed70e*(-0x1de2+0x1*-0x24f+0x55*0x61)*(-0x235+-0x7*-0x7+0x207*0x1)+(0x31*-0x13+0x1*0x1449+-0x10a6)]=-0x25*0xba+0x162e+-0x2*-0x25a,_0x2ad7b0['normals'][_0x3ed70e*(-0x19e7*0x1+0x1cf*0xb+0x606)*(-0x581+0x1307+-0x1*0xd83)+(-0x14d+0x80*-0x39+-0x5f6*-0x5)]=0x2*-0x8ad+0xfb7+-0x1a3*-0x1,_0x2ad7b0['normals'][_0x3ed70e*(0x4d*-0x52+-0x3d5+-0x1c83*-0x1)*(0x27*-0x8b+0x3b4*0x8+-0x2d0*0x3)+(-0x54f*0x3+0x1ab3+0x1*-0xac4)]=-(-0x17e*0x5+-0xfa2+0x49*0x51),_0x2ad7b0['normals'][_0x3ed70e*(0x173d*-0x1+-0x1*-0x26cb+0x22*-0x75)*(-0x4*0x76d+-0x1c55+-0x1*-0x3a0c)+(0x4*-0x818+-0x111*0x1a+0x3c1d)]=0x7*-0x3e4+-0x1*0xd47+0x2883,_0x2ad7b0['normals'][_0x3ed70e*(0xbe9+-0x73e+-0x18d*0x3)*(-0x192c+-0xe06+0x2735)+(-0x1576+0x17fd+-0x283)]=0x1900+0x1*0x15a5+-0x2ea5,_0x2ad7b0['normals'][_0x3ed70e*(0x24eb+0x3*0xc6f+0x128d*-0x4)*(-0x210b+-0x13a*0x14+-0xbd*-0x4e)+(0x1e0*0x10+-0x17e1+-0x61a)]=-(-0xa4c+-0x35*-0x7b+-0x1*0xf2a),_0x2ad7b0['normals'][_0x3ed70e*(-0x436+-0x59*-0x7+-0x1*-0x1cb)*(0x337+-0x11*-0xd3+0x5bd*-0x3)+(-0x141+0x24d5*0x1+-0x238e)]=-0x9ce+-0x1e7a+0x2848,_0x2ad7b0['normals'][_0x3ed70e*(-0x190f+0xd3e+0xe9*0xd)*(0x1973+-0xd32*0x2+0xf4)+(-0x233*0xb+-0xf24+0x275c)]=-0x33e+-0x508*0x4+0x175e,_0x2ad7b0['normals'][_0x3ed70e*(-0x3*-0x3ca+-0x132+-0xa28)*(-0x1b0*-0xc+0x6d0+-0x1b0d)+(0x20e4+-0xb*0x127+-0x142f)]=-(0x1e70+-0x270f+0xb8*0xc),_0x2ad7b0['normals'][_0x3ed70e*(-0x1*0x2588+0x24f1+0x9b)*(-0x1*-0x1d89+-0x135b+-0x1*0xa2b)+(-0xe8d*0x1+-0x555+0x1*0x13eb)]=-0xca9+-0x1610+0x22b9,_0x2ad7b0['normals'][_0x3ed70e*(-0xa4+-0x1264+0x130c)*(-0x2213+-0x1*0xdd5+0x2f*0x105)+(0x1f5+0x425+-0x4*0x184)]=0x12*0x9e+0x1*-0x12b8+0x79c,_0x2ad7b0['normals'][_0x3ed70e*(-0x1*-0xb45+-0x1*-0x1a0+-0xce1)*(0x1*0x3da+0x4e1+-0x8b8)+(0x252d+0x812+0xb4d*-0x4)]=-(0x61a*-0x6+0x2c*0x6a+0x1265);const _0x74464e=LL(this['_system']['app']['graphicsDe'+'vice'],_0x2ad7b0),_0x2e47c4=new We(_0x74464e,this['_material'],this['_node']);if(_0x2e47c4['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x2e47c4['castShadow']=!(0x1*0x1c+0x4*0x15d+-0x58f),_0x2e47c4['receiveSha'+'dow']=!(0xbe5+-0x1ac0+0xedc),_0x2e47c4['cull']=!_0x78f213,_0x2e47c4['screenSpac'+'e']=_0x78f213,_0x2e47c4['drawOrder']=this['_drawOrder'],_0x58929f&&(_0x2e47c4['cull']=!(-0x207*0x3+-0x134a+0x195f),_0x2e47c4['isVisibleF'+'unc']=_0x52c882),this['_setTextur'+'eParams'](_0x2e47c4,this['_font']['textures'][_0x31ba18]),_0x2e47c4['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x2e47c4['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x2e47c4['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x2e47c4['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x2e47c4['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x31ba18]['width']),_0x2e47c4['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x2e47c4['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x2e47c4['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][0x7df+-0x1c42+-0x1463*-0x1]=-0x182f+0x2*0x836+0x7c3,this['_shadowOff'+'setUniform'][0xf7*-0x25+-0x1*0xf0b+0x32bf]=-0x16*-0x3+0x8b3+-0x1*0x8f5;else{const _0x1a1030=-this['_font']['data']['info']['maps'][_0x31ba18]['width']/this['_font']['data']['info']['maps'][_0x31ba18]['height'];this['_shadowOff'+'setUniform'][0x7*-0xbf+-0x14a7*0x1+0x19e0]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x175f*-0x1+0x24f3+-0x141b*0x3]=_0x1a1030*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x2e47c4['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x2ad7b0['meshInstan'+'ce']=_0x2e47c4,this['_model']['meshInstan'+'ces']['push'](_0x2e47c4);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x170611&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x3*0x518+-0x1a*0x1f+0x126e,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x599184){_0x599184['destroy']();const _0x472515=this['_model']['meshInstan'+'ces']['indexOf'](_0x599184);_0x472515!==-(-0x24d7+-0x19bd+0x3e95)&&this['_model']['meshInstan'+'ces']['splice'](_0x472515,-0x1016+0x11b1*-0x2+-0x1*-0x3379);}['_setMateri'+'al'](_0x1ca1e0){if(this['_material']=_0x1ca1e0,this['_model'])for(let _0x2985aa=0x5d5*0x5+-0x77*0x40+-0x1*-0x97,_0x241cb3=this['_model']['meshInstan'+'ces']['length'];_0x2985aa<_0x241cb3;_0x2985aa++){const _0x33388d=this['_model']['meshInstan'+'ces'][_0x2985aa];_0x33388d['material']=_0x1ca1e0;}}['_updateMat'+'erial'](_0x18e61e){const _0x454d1b=this['_element'],_0x825cc7=_0x454d1b['_isScreenC'+'ulled'](),_0x553c67=function(_0x467f2a){return _0x454d1b['isVisibleF'+'orCamera'](_0x467f2a);},_0x2716d7=this['_font']&&this['_font']['type']===rc;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x18e61e,_0x2716d7,this['_enableMar'+'kup']),this['_model'])for(let _0x50e09e=0x7b*-0x15+0x5de*-0x1+-0x1*-0xff5,_0x174e85=this['_model']['meshInstan'+'ces']['length'];_0x50e09e<_0x174e85;_0x50e09e++){const _0x15eeec=this['_model']['meshInstan'+'ces'][_0x50e09e];_0x15eeec['cull']=!_0x18e61e,_0x15eeec['material']=this['_material'],_0x15eeec['screenSpac'+'e']=_0x18e61e,_0x825cc7?(_0x15eeec['cull']=!(-0x29*0xca+-0x4*0x136+0x1*0x2532),_0x15eeec['isVisibleF'+'unc']=_0x553c67):_0x15eeec['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0xc66+0x5e7+0x5*-0x3a9]=0x102a*0x1+0x37*-0xd+-0xd5e,this['_colorUnif'+'orm'][0x13f8+-0x1*-0x1625+-0x2a1c]=-0x4*-0x6c9+-0x1*-0x1c8b+0x1*-0x37ae,this['_colorUnif'+'orm'][-0x1*0x1407+-0x2071+0x347a]=0x8*-0x20a+-0x2649+0x369a):(Ve['linear'](this['_color']),this['_colorUnif'+'orm'][-0x1e80+-0x1326+0x31a6]=Ve['r'],this['_colorUnif'+'orm'][0x25ee+0x2*-0xefd+-0x7f3]=Ve['g'],this['_colorUnif'+'orm'][0xb9b+-0x17d0+-0xc37*-0x1]=Ve['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][0x5bd*-0x1+0x1*-0x4a3+0xa60]=0x2162+-0xc6b+0x3*-0x6fd,this['_outlineCo'+'lorUniform'][-0x25f*-0xf+-0x1268+-0x1128]=0x6d8+0x1731+-0x1e09,this['_outlineCo'+'lorUniform'][-0xfa3*0x1+-0x1a*-0x49+0x83b]=0x1474+-0x1ac2+0x64e,this['_outlineCo'+'lorUniform'][0x2*0x31c+-0x13b3+0xb*0x13a]=-0x266d+0xb4a+0x1b24*0x1):(Ve['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x2395+0x869+-0x2bfe]=Ve['r'],this['_outlineCo'+'lorUniform'][-0x3*0x6b5+0x5*-0x1db+0x243*0xd]=Ve['g'],this['_outlineCo'+'lorUniform'][-0xcd7+0x5a+0xc7f]=Ve['b'],this['_outlineCo'+'lorUniform'][0x7*-0x1d5+-0x2243+0x2f19]=Ve['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][-0x1*-0x1e58+-0x1*-0x4e8+-0x2340]=0x1ecf+-0x2479*0x1+0x5aa,this['_shadowCol'+'orUniform'][0x1*-0x61d+-0x2173+0x2791]=0x3b*-0xd+-0x687+0x17*0x6a,this['_shadowCol'+'orUniform'][0x22f5*-0x1+0xb7b*-0x3+0x4568]=-0x993+0x2416+-0x1a83*0x1,this['_shadowCol'+'orUniform'][0x214b+0x62*0x59+-0x435a]=-0x2*-0x1079+-0x222b+-0x1*-0x139):(Ve['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x3*-0x4c9+0x26b5*0x1+-0x3510]=Ve['r'],this['_shadowCol'+'orUniform'][-0x992+0x26f+-0x4*-0x1c9]=Ve['g'],this['_shadowCol'+'orUniform'][-0x22e*0x6+0x3*-0x660+-0x1b2*-0x13]=Ve['b'],this['_shadowCol'+'orUniform'][0x1a79+-0x16cf+-0x3a7]=Ve['a']);}['_isWordBou'+'ndary'](_0x2013bf){return hg['test'](_0x2013bf);}['_isValidNe'+'xtChar'](_0x17a2fd){return _0x17a2fd!==null&&!FL['test'](_0x17a2fd);}['_isNextCJK'+'Boundary'](_0x170b62,_0x29c4b7){return cg['test'](_0x170b62)&&(hg['test'](_0x29c4b7)||OL['test'](_0x29c4b7));}['_isNextCJK'+'WholeWord'](_0x2d2775){return cg['test'](_0x2d2775);}['_updateMes'+'hes'](){const _0x3147a7=this['_font']['data'],_0x4e7e20=this,_0x1f7e2d=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x133379=this['_maxFontSi'+'ze'],_0x52cbbf=this['_shouldAut'+'oFit']();_0x52cbbf&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x3726d6=-0x32d+0xa21+-0x26*0x2e,_0x283167=this['_symbols']['length'];let _0x1d705d=0x1b22+0x3ce*0x3+-0x268c,_0x54996a=-0x1*-0x30f+-0x1acf+0x5f0*0x4,_0x51f5ec=0x17b9+0x7bb*0x4+-0x36a5,_0x32851d=0x1066+0x13d2+-0x2438,_0x493d02=0xd*0x17d+-0x1a86+0x397*0x2,_0x361c7f=-0x5*-0x1b+0xf40+-0xfc7*0x1,_0x324597=0x5*0x773+0x1*-0x23d5+-0x1*0x16a,_0x2bf4c=-0x21a*-0x1+0x1498+-0x5*0x48a,_0x28d0d9=0x17*-0x34+-0x11a8*-0x2+-0x1ea4,_0x1e46d3=0xaf2*-0x1+-0xc4e+-0x40*-0x5d,_0xbdcdd4=-0xb1b*0x2+-0x142c+0x15e*0x1f;const _0x31c77c=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=-0x955+-0xb5b+0x14b0+0.0001;let _0x437756=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x31c77c||!this['_wrapLines'])&&(_0x437756=Number['POSITIVE_I'+'NFINITY']);let _0x1632a5=0x20*0xe3+-0xe6c+0x26*-0x5e,_0x46eb89=-0x686*0x5+0x96a*0x4+-0x50a,_0x230c2d,_0x32e540,_0x3787ed,_0x2e10d8;function _0x47c410(_0xb4635b,_0xb6b996,_0xd35625){_0x4e7e20['_lineWidth'+'s']['push'](Math['abs'](_0xd35625));const _0x98efe2=_0x2bf4c>_0xb6b996?_0xb6b996+(-0x1*-0xeb+0x7a*-0x4c+0x234e):_0x2bf4c,_0x2a5545=_0x2bf4c>_0xb6b996?_0x2bf4c+(0x36a+0x2d7*-0xb+0x1*0x1bd4):_0xb6b996,_0x199ee2=_0xb4635b['slice'](_0x98efe2,_0x2a5545);if(_0xbdcdd4){let _0x26611e=_0x199ee2['length'];for(;_0x26611e--&&_0xbdcdd4>0x33d+-0x3*-0x1+-0x340;)lg['test'](_0x199ee2[_0x26611e])&&(_0x199ee2['splice'](_0x26611e,-0x19f3+-0x228b+0x1*0x3c7f),_0xbdcdd4--);}_0x4e7e20['_lineConte'+'nts']['push'](_0x199ee2['join']('')),_0x1d705d=0x1428+-0x356+-0x10d2,_0x54996a-=_0x4e7e20['_scaledLin'+'eHeight'],_0x493d02++,_0x28d0d9=0x429+-0x7*0xf1+0x26e,_0x1e46d3=0x1fd*0xf+0x2e7*-0xa+0x1*-0xcd,_0xbdcdd4=0xa72*0x2+0x1ce3+-0x31c7*0x1,_0x361c7f=0x16ff*-0x1+0x25ac+-0xead,_0x2bf4c=_0xb6b996;}let _0x14661a=!(-0x870+-0xc2*0x2b+0x2906*0x1);for(;_0x14661a;){_0x14661a=!(-0x961*0x1+-0x96b*0x4+0x2f0e),_0x52cbbf?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||0x2f1*0x5+0x1*0x1a74+-0x2929+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=-0x11a8+-0xeef+0x2097,this['height']=0x5*0x535+-0x382+-0x1687,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x1d705d=-0x33e*0x8+-0x26c9+0x40b9,_0x54996a=0x9a7+0x9e3+-0x3d*0x52,_0x51f5ec=0x1*0x3a5+0x8b+-0x218*0x2,_0x32851d=0x1*0x149f+0x2435*-0x1+0xf96,_0x493d02=0xad2+-0x20ea+0x1619,_0x361c7f=0xfcb+-0x160b+0x640,_0x324597=-0x2025+-0x1442+-0xa7b*-0x5,_0x2bf4c=0x1*0xc77+-0x69*-0x5f+-0x336e,_0x28d0d9=0x25ed+-0x746*-0x1+-0x2d33,_0x1e46d3=0x18a6+0x7e1+0xb*-0x2f5,_0xbdcdd4=0x1*0x166d+-0x1d44*0x1+0x6d7*0x1;const _0x2f6392=this['_fontSize']/_0x3726d6;_0x1632a5=this['_fontMinY']*_0x2f6392,_0x46eb89=this['_fontMaxY']*_0x2f6392;for(let _0xacbcb2=-0xcaa+-0x1*0x1883+0x252d;_0xacbcb2<this['_meshInfo']['length'];_0xacbcb2++)this['_meshInfo'][_0xacbcb2]['quad']=0x220e+-0x82f+0xb3*-0x25,this['_meshInfo'][_0xacbcb2]['lines']={};let _0x261d52=0x13*0x199+0x16e4+-0xd1*0x40,_0x35d06d=-0x230a+-0x1*0x2597+0x49a0,_0x509d0b=0x246a+-0x1c3+0x21a8*-0x1,_0x4cfb7e=0xb6e+0x1*0x6a1+-0x1110+(-0x1a4a*0x1+0x1*0x18e6+0x263)*(0x1900+0x196f+-0x316f*0x1),_0x12f07a=-0x10d0+0x1c33+-0xa64+(-0x2179+0x1d21+0x557)*(-0x226e+0x1bc4*-0x1+0x3f32),_0x14eb6d=-0x178d*-0x1+-0x477+0x1316*-0x1,_0x5aafcb=0x1*-0x13c3+-0x16a9*0x1+0x2b6b+(0x9a7*0x3+-0x2268+-0xb*-0x96)*(0x257*-0x5+0x993+0x320),_0x3655b1=-0x122e+-0x2643+0x3970+(-0x69*0x35+-0x19f9+0x1*0x30b5)*(-0x19e0+-0x1372+0x2e52),_0x3107c9=-0x1*-0x19a3+0x218d+-0x5*0xbbd+(0xe4d+0x28a*-0x8+0xee*0x7)*(-0xd7*-0x26+0x7f5+-0x26df*0x1);for(let _0x2ca329=-0x1*0x11ae+-0x1e0d*0x1+0x2fbb;_0x2ca329<_0x283167;_0x2ca329++){if(_0x230c2d=this['_symbols'][_0x2ca329],_0x2e10d8=_0x2ca329+(-0x11*0xbf+-0xbd2+0x1882)>=_0x283167?null:this['_symbols'][_0x2ca329+(-0x1688+0xbb*0x1+0x15ce)],lg['test'](_0x230c2d)){_0xbdcdd4++,(!this['_wrapLines']||this['_maxLines']<0x1519*-0x1+-0x202a+0x3543||_0x493d02<this['_maxLines'])&&(_0x47c410(this['_symbols'],_0x2ca329,_0x32851d),_0x324597=_0x2ca329+(-0x2b7+0x1364+-0x10ac),_0x2bf4c=_0x2ca329+(0x27a*-0x1+0x17fd*0x1+-0x1582));continue;}let _0x5c0a0b=0xbb7+0xe*0x256+-0x2c6b,_0x1c4ef3=0xb*-0x385+-0x1b7e+0x4235,_0x176c0d=-0x1856+0xfa8+-0xb*-0xca,_0x1f993b=0x1*0x228f+0x9d3+-0x2c61,_0x25633e,_0x1549cc;if(_0x32e540=_0x3147a7['chars'][_0x230c2d],!_0x32e540){if(NL['indexOf'](_0x230c2d)!==-(0x4*-0x2b1+-0x291+-0x6*-0x239))_0x32e540=kL;else{if(_0x3147a7['chars']['\x20'])_0x32e540=_0x3147a7['chars']['\x20'];else for(const _0x1868a3 in _0x3147a7['chars']){_0x32e540=_0x3147a7['chars'][_0x1868a3];break;}_0x3147a7['missingCha'+'rs']||(_0x3147a7['missingCha'+'rs']=new Set()),_0x3147a7['missingCha'+'rs']['has'](_0x230c2d)||(console['warn']('Character\x20'+'\x27'+_0x230c2d+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0x3147a7['info']['face']),_0x3147a7['missingCha'+'rs']['add'](_0x230c2d));}}if(_0x32e540){let _0x51ff0d=0x232+-0x1606*-0x1+-0x1838;if(_0x1e46d3>0x22d4+0x1902+-0x3bd6){const _0x33a0df=this['_font']['data']['kerning'];if(_0x33a0df){const _0x14ef70=_0x33a0df[dh['getCodePoi'+'nt'](this['_symbols'][_0x2ca329-(-0xba*0x2f+0x1b25+0x702)])||-0x7*-0xb2+-0xa1*0x2+-0x39c];_0x14ef70&&(_0x51ff0d=_0x14ef70[dh['getCodePoi'+'nt'](this['_symbols'][_0x2ca329])||-0xb8f+-0xe*-0x1+0xb81]||0x1*-0x93a+0x9e4*0x1+-0xaa);}}_0x25633e=_0x32e540['scale']||0xe5*0x2b+-0x2669*0x1+-0xd,_0x1549cc=(_0x32e540['width']+_0x32e540['height'])/(0x1a59*-0x1+0x1*0x1b4d+0x1*-0xf2),_0x1f993b=_0x2f6392*_0x1549cc/_0x25633e,_0x176c0d=(_0x32e540['xadvance']+_0x51ff0d)*_0x2f6392,_0x5c0a0b=(_0x32e540['xoffset']-_0x51ff0d)*_0x2f6392,_0x1c4ef3=_0x32e540['yoffset']*_0x2f6392;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x230c2d+'\x27');const _0x4172c9=RL['test'](_0x230c2d),_0xcd6928=_0x32e540&&_0x32e540['map']||0x1*-0x56d+0x260c+-0x209f,_0x5a94a6=-this['_font']['data']['info']['maps'][_0xcd6928]['width']/this['_font']['data']['info']['maps'][_0xcd6928]['height'],_0x1f976d=this['_meshInfo'][_0xcd6928],_0x382e2d=_0x1d705d+this['_spacing']*_0x176c0d;if(_0x382e2d>_0x437756&&_0x1e46d3>-0x2*0x10c+-0x3b*-0x5f+-0x89*0x25&&!_0x4172c9&&(this['_maxLines']<0x189+-0x131f+0x1196||_0x493d02<this['_maxLines'])){if(_0x28d0d9===-0x1b21+-0x1*0x1876+0x3397)_0x324597=_0x2ca329,_0x47c410(this['_symbols'],_0x2ca329,_0x32851d);else{const _0x4e6115=Math['max'](_0x2ca329-_0x324597,-0x845*-0x4+0x1*-0x1457+-0xcbd);if(this['_meshInfo']['length']<=0x1e67+-0x14b*0x2+-0x6f4*0x4)_0x1f976d['lines'][_0x493d02-(0x36d*0x5+0x1*0xba6+-0x1cc6)]-=_0x4e6115,_0x1f976d['quad']-=_0x4e6115;else{const _0x1f04ad=_0x324597,_0x3332a7=_0x2ca329;for(let _0x268dce=_0x1f04ad;_0x268dce<_0x3332a7;_0x268dce++){const _0x2a3b64=this['_symbols'][_0x268dce],_0x3a4320=_0x3147a7['chars'][_0x2a3b64],_0x2e872c=this['_meshInfo'][_0x3a4320&&_0x3a4320['map']||-0x1*0x1af3+0x666*-0x5+0xbf*0x4f];_0x2e872c['lines'][_0x493d02-(-0x6e6+0x1473+-0xd8c)]-=0xe5*0x2a+0x1*-0xfd3+-0x15be,_0x2e872c['quad']-=0x1861+0xdc0+-0x3d0*0xa;}}_0x2ca329-=_0x4e6115+(0x411*0x7+-0x190*0x13+-0x9d*-0x2),_0x47c410(this['_symbols'],_0x324597,_0x361c7f);continue;}}_0x3787ed=_0x1f976d['quad'],_0x1f976d['lines'][_0x493d02-(0xd*-0x171+-0x361*0x7+0x2a65)]=_0x3787ed;let _0x3ffc4a=_0x1d705d-_0x5c0a0b,_0x55758d=_0x3ffc4a+_0x1f993b;const _0x158b96=_0x54996a-_0x1c4ef3,_0x4760a4=_0x158b96+_0x1f993b;if(this['_rtl']){const _0x1de85c=_0x1f993b-_0x5c0a0b-this['_spacing']*_0x176c0d-_0x5c0a0b;_0x3ffc4a-=_0x1de85c,_0x55758d-=_0x1de85c;}_0x1f976d['positions'][_0x3787ed*(0xc1f*-0x3+-0x1*0x1ef9+0x435a)*(-0x1ba*-0xf+0x1*-0x7a5+0x1*-0x123e)+(0x1*-0x1a75+0x73*0x2b+-0x392*-0x2)]=_0x3ffc4a,_0x1f976d['positions'][_0x3787ed*(-0x1b50+0xe5*0x11+0xc1f)*(-0x1*0x45f+0xb*0x2ce+-0x1a78)+(-0x1*-0x1795+0x1eef+-0x3683*0x1)]=_0x158b96,_0x1f976d['positions'][_0x3787ed*(0x1209+-0x1a72*-0x1+-0x1*0x2c77)*(0xd7e+0x2*0x86c+-0x1e53)+(0x10fb+0xf47+-0x2040)]=_0x51f5ec,_0x1f976d['positions'][_0x3787ed*(-0x11*0x21+0x3b4+-0x17f)*(-0x1*0x1da2+-0x20a3+0x3e48)+(0x1f7d+0x7d*-0x43+-0x13d*-0x1)]=_0x55758d,_0x1f976d['positions'][_0x3787ed*(0x2601+0x1b74+-0x1*0x4171)*(-0x4c*-0x5e+-0x1ebe+0x2d9)+(-0x1f*-0x9f+0x1ce*0x15+0x1*-0x3923)]=_0x158b96,_0x1f976d['positions'][_0x3787ed*(0x2034+-0x8c*0x7+-0x2d6*0xa)*(-0x1*0x1ca5+-0x15d*-0x2+-0x2*-0xcf7)+(0x10bf*0x1+0x6a2+-0x175c)]=_0x51f5ec,_0x1f976d['positions'][_0x3787ed*(-0x1e2*0x9+-0x4c8+0x15be)*(0x2*-0x5e5+0x17a*0x1+0xa53)+(-0x107b+0x2*0xdba+0xaf3*-0x1)]=_0x55758d,_0x1f976d['positions'][_0x3787ed*(0x1ef8+-0x1b*0xbd+-0xd*0xd9)*(-0x2499+0x193*-0x5+0x2c7b*0x1)+(0xd67*-0x1+0x1ae4+0xd76*-0x1)]=_0x4760a4,_0x1f976d['positions'][_0x3787ed*(0xf0+-0x2009+-0x1f1d*-0x1)*(0x708+0xae7*0x2+0x9d*-0x2f)+(-0x10d2*-0x2+-0xc8f+0x11*-0x13d)]=_0x51f5ec,_0x1f976d['positions'][_0x3787ed*(0x8b0+-0x164c+0xda0)*(0xca3*-0x3+0x67*-0x1+-0x1*-0x2653)+(-0x1*-0x16d3+0xfb8+0x13e*-0x1f)]=_0x3ffc4a,_0x1f976d['positions'][_0x3787ed*(-0x9*-0x1da+-0x1cbd+0xc17)*(-0x1448+-0x1d28+0x3173)+(-0x7*-0x5f+-0x177a+0x14eb)]=_0x4760a4,_0x1f976d['positions'][_0x3787ed*(-0xcb2*-0x1+0x905+-0x15b3)*(-0x48a+0xb*0x2d2+-0x1a79)+(0x1bc7*0x1+0x4cd+-0x2089)]=_0x51f5ec,this['width']=Math['max'](this['width'],_0x382e2d);let _0x4fb05a;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x4fb05a=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||0x6d*-0x1d+0x45a+0x7ff+0.0001)),_0x4fb05a=Y['clamp'](_0x4fb05a,_0x1f7e2d,_0x133379),_0x4fb05a!==this['_element']['fontSize'])){this['_fontSize']=_0x4fb05a,_0x14661a=!(0x2563+0x1*0x44f+-0x4a2*0x9);break;}if(this['height']=Math['max'](this['height'],_0x46eb89-(_0x54996a+_0x1632a5)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x4fb05a=Y['clamp'](this['_fontSize']-(-0xc08+0x16*-0x1b1+0x313f),_0x1f7e2d,_0x133379),_0x4fb05a!==this['_element']['fontSize'])){this['_fontSize']=_0x4fb05a,_0x14661a=!(0x905*0x4+0x3*-0xc56+0xee);break;}_0x1d705d+=this['_spacing']*_0x176c0d,_0x4172c9||(_0x32851d=_0x1d705d),(this['_isWordBou'+'ndary'](_0x230c2d)||this['_isValidNe'+'xtChar'](_0x2e10d8)&&(this['_isNextCJK'+'Boundary'](_0x230c2d,_0x2e10d8)||this['_isNextCJK'+'WholeWord'](_0x2e10d8)))&&(_0x28d0d9++,_0x361c7f=_0x32851d,_0x324597=_0x2ca329+(0x1*-0x727+-0x98d+-0x7*-0x263)),_0x1e46d3++;const _0x448bae=this['_getUv'](_0x230c2d);if(_0x1f976d['uvs'][_0x3787ed*(0x3d1+-0x1*0xcdd+-0x91*-0x10)*(-0x1b*0x16d+0x2182*-0x1+-0x4803*-0x1)+(0x5*-0x38f+-0x171b+0x28e6*0x1)]=_0x448bae[-0x51b+-0x1188+-0x5f*-0x3d],_0x1f976d['uvs'][_0x3787ed*(-0x2*0x45d+0x2*-0x1145+-0x2*-0x15a4)*(-0x1864+-0x18d*0x9+0x3*0xcc9)+(0x43*0x39+-0x7*-0xa3+-0x3*0x675)]=0xc*0x1f5+-0x839+-0xf42-_0x448bae[-0x1*-0x526+-0x10d6+-0xbb1*-0x1],_0x1f976d['uvs'][_0x3787ed*(-0x998+-0xb*-0x2ab+0xa3*-0x1f)*(-0x232c+0x10bf+0x79*0x27)+(0x1f30+0x1845+-0x3773)]=_0x448bae[-0x2484+-0x68*-0x4e+0x4d6],_0x1f976d['uvs'][_0x3787ed*(-0x1*-0x1a76+-0x4*-0x92+-0x1cba)*(-0x6b9+0xa1*-0x37+0xdc6*0x3)+(0x1185+0x1*0x2c0+-0x1442)]=0x32b+-0x220c+0x1ee2-_0x448bae[0x595+-0x1d78+0x17e4],_0x1f976d['uvs'][_0x3787ed*(-0x295*-0xa+-0x1*-0xc07+-0x791*0x5)*(0x1*0x11e+-0x1*-0x345+0x13*-0x3b)+(0x1a6+0x20a9*0x1+-0x224b*0x1)]=_0x448bae[0x3*-0x25+-0x1*-0x245b+-0x23ea],_0x1f976d['uvs'][_0x3787ed*(-0x13c6*0x1+-0xd*0x8b+0x1ad9)*(-0x19c3*-0x1+-0x1573+-0x44e)+(-0x214a+0xdf3+-0x33a*-0x6)]=-0xe4d*-0x2+-0x8*0x47b+0x73f-_0x448bae[0xc62+-0x8b9+-0x1d3*0x2],_0x1f976d['uvs'][_0x3787ed*(0xf29+-0x4+0x3*-0x50b)*(-0xa*-0x2ff+0x222c*0x1+-0x201*0x20)+(-0x1*0x1f7b+0x4b*-0x81+0x454c)]=_0x448bae[0x2522+0x25*0xac+-0x3dfe],_0x1f976d['uvs'][_0x3787ed*(-0x1228+-0x25*-0x23+0xd1d)*(-0x954+-0x1d85*-0x1+-0x142f)+(0xe9*-0x2+0x11a8+-0xfcf)]=-0x161f+0xcc+0x1554-_0x448bae[-0x15*0x86+0x1*-0x845+0x9a3*0x2],this['_symbolCol'+'ors']){const _0x2db656=this['_symbolCol'+'ors'][_0x2ca329]*(-0xd45+-0x83*0x4a+-0x2*-0x1993);_0x261d52=this['_colorPale'+'tte'][_0x2db656],_0x35d06d=this['_colorPale'+'tte'][_0x2db656+(-0xdc*0x1e+-0xf33+-0xac*-0x3d)],_0x509d0b=this['_colorPale'+'tte'][_0x2db656+(-0x25c4*0x1+0x1744+0x6*0x26b)];}if(_0x1f976d['colors'][_0x3787ed*(-0x16c9+-0x10a7+0x2774)*(0x2*0x56d+0x7*0x258+0x1b3e*-0x1)+(-0x1299+-0x19cb+-0xb19*-0x4)]=_0x261d52,_0x1f976d['colors'][_0x3787ed*(0xb5*-0x26+0x1*-0x1b0e+0x35f0)*(0x39*-0x8b+-0x8f*-0x16+0x12ad)+(0x5*0x24b+0x4*0x82+-0xd7e)]=_0x35d06d,_0x1f976d['colors'][_0x3787ed*(-0x1*0x14e7+-0xff4+-0x1*-0x24df)*(0xe7b+-0xf75*-0x2+-0x2d61)+(0x127d*0x1+-0x12*-0x12+0x3f3*-0x5)]=_0x509d0b,_0x1f976d['colors'][_0x3787ed*(0x1*-0x1d03+0x5a9+0x175e)*(-0x254b+0x13d4+0x117b)+(0x1*-0x89e+0x2593+-0x72*0x41)]=0x2223+-0x38d*0x8+-0x4bc,_0x1f976d['colors'][_0x3787ed*(-0x38d+0x22a+0x1*0x167)*(-0x417*0x5+-0x79c*-0x2+0x53f*0x1)+(0xe15+0xe*0x29c+-0x3299)]=_0x261d52,_0x1f976d['colors'][_0x3787ed*(0x1677+0x1*-0x3+0x1670*-0x1)*(-0x1*0x1de+0x1dca+-0x1be8)+(0x1*-0x1693+-0x97*-0x1+0x1601)]=_0x35d06d,_0x1f976d['colors'][_0x3787ed*(0x1391*0x1+-0x1b53*0x1+-0xa*-0xc7)*(-0x7f3+0x2421*-0x1+-0x53*-0x88)+(-0x26a3+0x4f1*0x2+0x1cc7)]=_0x509d0b,_0x1f976d['colors'][_0x3787ed*(-0x16*0x146+0x2c4+-0x21b*-0xc)*(0x1932+-0x19e6+-0x1*-0xb8)+(0x71b*0x3+0x1b*0x8b+0x1*-0x23f3)]=-0x6ad*-0x5+-0x61*0x65+-0x89*-0xb,_0x1f976d['colors'][_0x3787ed*(0x4e+-0x5a1*0x4+-0xb1d*-0x2)*(0x1*-0x2357+-0x1aa4+0x3dff)+(-0x134e+0x168f+-0x339)]=_0x261d52,_0x1f976d['colors'][_0x3787ed*(0x1353+0x8ba*0x1+-0x1c09)*(-0x4*0x808+-0x10bc+-0x1*-0x30e0)+(0x8*0xc9+-0x2*0xeaa+-0x137*-0x13)]=_0x35d06d,_0x1f976d['colors'][_0x3787ed*(0x1b95+-0x1*-0xc84+-0x2815)*(-0x10*0x233+-0x151b+-0xf*-0x3c1)+(0x927+0x1*-0xd17+-0x2*-0x1fd)]=_0x509d0b,_0x1f976d['colors'][_0x3787ed*(0x241b+-0x9a3+0x2*-0xd3a)*(-0xa*0x33b+0x1e9d+0x1b5)+(-0x47+-0x879+0x8cb)]=-0x15f6+0xb05+-0x8*-0x17e,_0x1f976d['colors'][_0x3787ed*(-0x667*-0x6+0x8*0x411+-0x46ee)*(-0x519+-0x15b*-0x11+0x2fd*-0x6)+(-0xb2*0x22+-0xccd*-0x1+0x1*0xae3)]=_0x261d52,_0x1f976d['colors'][_0x3787ed*(-0x1f18+-0x1cfb+0x3c17)*(-0x3*-0xa0c+0x1*-0x1c83+0x1*-0x19d)+(-0x4*-0x858+-0x11*-0xcc+-0x1*0x2edf)]=_0x35d06d,_0x1f976d['colors'][_0x3787ed*(0xec2*-0x1+0x2e*0x2+0x2e2*0x5)*(-0x2*0xe8f+-0x14c*0x12+0x347a)+(0x218a+0x111c+-0x653*0x8)]=_0x509d0b,_0x1f976d['colors'][_0x3787ed*(-0x47d*0x3+0x2281+0x1506*-0x1)*(0xb7b+-0x2306*0x1+0x178f)+(-0xbe0+-0x93a*-0x3+0x1*-0xfbf)]=0x3*0x133+0xa18+0x1*-0xcb2,this['_symbolOut'+'lineParams']){const _0x1f8fe3=this['_symbolOut'+'lineParams'][_0x2ca329]*(-0x3*-0x194+0x1*-0x11d+0x2*-0x1cd);_0x4cfb7e=this['_outlinePa'+'lette'][_0x1f8fe3]+this['_outlinePa'+'lette'][_0x1f8fe3+(0xd04+0xf5*-0x6+0x1*-0x745)]*(0x1*0xbef+-0x394+-0x75b),_0x12f07a=this['_outlinePa'+'lette'][_0x1f8fe3+(-0x1d03+0x1c*-0xfc+0x3895)]+this['_outlinePa'+'lette'][_0x1f8fe3+(0x12dc+0xd81+-0x205a*0x1)]*(0x1*-0x25ea+0x1e05+0x8e5),_0x14eb6d=this['_outlinePa'+'lette'][_0x1f8fe3+(0x1ce9*-0x1+-0x13*0x69+-0x1d6*-0x14)];}if(_0x1f976d['outlines'][_0x3787ed*(-0xe14*0x2+0x1d8a+-0x15e)*(0xf*0x204+-0xcfa+0x1*-0x113f)+(-0x6*-0x1d1+-0x393+-0x753)]=_0x4cfb7e,_0x1f976d['outlines'][_0x3787ed*(-0x9*0x115+0xc07+-0x6*0x61)*(0x2*0x111f+0x20cb+-0x2*0x2183)+(0x26fc+0x1633+-0x3d2e)]=_0x12f07a,_0x1f976d['outlines'][_0x3787ed*(0x16fe+-0x708*-0x1+-0x1*0x1e02)*(0x3*-0x783+-0x2e3*-0x1+0x13a9)+(-0x13b3+0xe1b+0x59a*0x1)]=_0x14eb6d,_0x1f976d['outlines'][_0x3787ed*(-0x1*-0x1967+-0x45*0x39+-0xa06)*(0x1*0xeb+0xd5a*0x1+0x5*-0x2da)+(-0x21a+0xe0+0x13d)]=_0x4cfb7e,_0x1f976d['outlines'][_0x3787ed*(-0x1117+-0x2f4*-0x1+-0xe27*-0x1)*(-0x1*-0xe6c+0x2*-0x113b+0x1d*0xb1)+(0x576+-0x1c5*-0x12+-0x254c)]=_0x12f07a,_0x1f976d['outlines'][_0x3787ed*(-0x121*-0x11+0x6*-0xa6+-0xf49)*(0x1281+-0x2d*0x37+0x2f1*-0x3)+(-0xe9*-0x13+0x17f6*-0x1+0x6b0)]=_0x14eb6d,_0x1f976d['outlines'][_0x3787ed*(0x2560*0x1+0x443+0x1*-0x299f)*(-0x80d+0x24b7+-0x1ca7)+(0x23d1+-0xad*0x7+-0x1f10)]=_0x4cfb7e,_0x1f976d['outlines'][_0x3787ed*(-0xc6d+-0xb87*-0x3+-0x4*0x589)*(-0x1914+0x7f7+0x8*0x224)+(-0xbfb+-0x23f6+0x2ff8)]=_0x12f07a,_0x1f976d['outlines'][_0x3787ed*(0x3*0xc42+-0x1*-0x1ca3+-0x4165)*(0x1d47*-0x1+-0x7d*0x13+-0x3*-0xcdb)+(-0xd6a+0x583+-0x3*-0x2a5)]=_0x14eb6d,_0x1f976d['outlines'][_0x3787ed*(0x45*-0x1a+0x12fa+-0xbf4)*(0x1712+-0x8*0x46a+0x1*0xc41)+(0x4*-0x753+-0xb7a+-0x1f*-0x151)]=_0x4cfb7e,_0x1f976d['outlines'][_0x3787ed*(0x148d+-0x845*0x4+-0xd*-0xf7)*(0x82b*0x1+0x2328+0x630*-0x7)+(-0x727*-0x3+-0x699+0xe*-0x10f)]=_0x12f07a,_0x1f976d['outlines'][_0x3787ed*(-0x10f2+0x19b*0x18+0x1f6*-0xb)*(0x1*-0x417+-0x1feb+0x2405)+(0x1*-0x2197+0xc14+-0xac7*-0x2)]=_0x14eb6d,this['_symbolSha'+'dowParams']){const _0x35b3aa=this['_symbolSha'+'dowParams'][_0x2ca329]*(-0xe1e+-0x11*0x215+0x3189);_0x5aafcb=this['_shadowPal'+'ette'][_0x35b3aa]+this['_shadowPal'+'ette'][_0x35b3aa+(-0x1aea+0x12*-0x5c+0x2163)]*(-0x2196+-0x21*-0x117+-0x161),_0x3655b1=this['_shadowPal'+'ette'][_0x35b3aa+(0x6a1*0x2+0x1a21*-0x1+0xce1)]+this['_shadowPal'+'ette'][_0x35b3aa+(0x80*0x44+0x1*0x123c+-0x3439*0x1)]*(-0x1067+-0x1d*0x13f+0x358a),_0x3107c9=this['_shadowPal'+'ette'][_0x35b3aa+(-0x24bf+0x1*-0x56c+0x2a2f)]+(-0x51*-0x4a+0x23e1+-0x11c*0x35)+Math['round'](_0x5a94a6*this['_shadowPal'+'ette'][_0x35b3aa+(-0x106d+0x513*0x1+0xb5f*0x1)]+(0x203a+-0x1f8e+-0x2d))*(-0xa6*-0x17+-0x18ae+0xac4);}_0x1f976d['shadows'][_0x3787ed*(-0x13f8+0x438+0xfc4)*(-0x11f+-0x52*-0x11+-0x450)+(0x1e9b+-0x7*-0x4fb+-0x4178)]=_0x5aafcb,_0x1f976d['shadows'][_0x3787ed*(-0xea9+-0x1fdc+0x2e89)*(-0x22f7*0x1+-0xd*-0x1+-0x1*-0x22ed)+(0x10d1+-0xfb3*0x1+0xf*-0x13)]=_0x3655b1,_0x1f976d['shadows'][_0x3787ed*(0xcb7+0xc5c+-0x190f)*(0xd*0x235+-0xcf3+0xfbb*-0x1)+(0x2*0x2c8+0x2*0x11d7+-0x293c)]=_0x3107c9,_0x1f976d['shadows'][_0x3787ed*(0x199e+0x2*-0x4a8+-0x104a)*(0x1*0xafc+0x1b4d+-0x2646)+(0x1*-0x19e2+-0x9a*0x2b+0x33c3)]=_0x5aafcb,_0x1f976d['shadows'][_0x3787ed*(0x1*-0x2683+0x1bb9+0xace)*(-0x772+0x1*-0x1454+0x1bc9)+(-0xdfc+-0x1f1b*0x1+0x2d1b)]=_0x3655b1,_0x1f976d['shadows'][_0x3787ed*(0x74e+0x23dd+-0x2b27)*(0x2432*-0x1+-0x17*-0xbd+0x133a)+(-0x3*-0x4aa+-0x1*-0xa6a+-0x3*0x821)]=_0x3107c9,_0x1f976d['shadows'][_0x3787ed*(0x1436+0x1ddf+0x1*-0x3211)*(0x2fc+0x2296+-0x258f)+(0x8cd+-0x17*-0x41+-0xe9e)]=_0x5aafcb,_0x1f976d['shadows'][_0x3787ed*(0x1*0x1c61+-0x465+-0x17f8)*(-0xcf1*0x3+-0xb*0x41+-0x1*-0x29a1)+(-0x23*-0x1f+0x8e*-0x45+0x2210)]=_0x3655b1,_0x1f976d['shadows'][_0x3787ed*(-0x1aac+0x4ab*0x1+0x757*0x3)*(0x22eb*-0x1+0x1759+-0xb95*-0x1)+(-0x308+0x556+0x1*-0x246)]=_0x3107c9,_0x1f976d['shadows'][_0x3787ed*(-0x928*0x4+-0x2*-0x1361+-0x21e)*(0x239+-0xe4f+-0x13*-0xa3)+(-0x7e4+-0x713*-0x1+-0x6d*-0x2)]=_0x5aafcb,_0x1f976d['shadows'][_0x3787ed*(0x74b+-0xed5+-0x2*-0x3c7)*(-0x13*-0x2+-0x47f*0x3+-0x6ad*-0x2)+(-0x135d*0x1+0x5*-0x6a0+0x11*0x317)]=_0x3655b1,_0x1f976d['shadows'][_0x3787ed*(-0x39*-0x4f+-0x2079+0xee6)*(0x1*-0xa59+-0x1*-0x43+0xa19)+(0x9dc+-0x6*0x5c6+-0x4f7*-0x5)]=_0x3107c9,_0x1f976d['quad']++;}_0x14661a||_0x2bf4c<_0x283167&&_0x47c410(this['_symbols'],_0x283167,_0x1d705d);}this['_noResize']=!(-0x4b*-0x55+0x901+-0x21e8),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(-0xd0f+-0x3*-0x30e+0x1f3*0x2);const _0x2aeafb=this['_element']['pivot']['x'],_0x59854b=this['_element']['pivot']['y'],_0x440e6b=this['_alignment']['x'],_0x5c1212=this['_alignment']['y'];for(let _0x2a8dba=-0x1808*-0x1+0xfdd*-0x2+0x7b2;_0x2a8dba<this['_meshInfo']['length'];_0x2a8dba++){if(this['_meshInfo'][_0x2a8dba]['count']===0x26ce+0x1b80+-0x2e*0x171)continue;let _0x19e6a4=-0x29e+-0x3*0x167+0x1*0x6d3;for(const _0x343f3e in this['_meshInfo'][_0x2a8dba]['lines']){const _0x2e307f=this['_meshInfo'][_0x2a8dba]['lines'][_0x343f3e],_0x33b7e0=this['_lineWidth'+'s'][parseInt(_0x343f3e,0x1*0x605+-0x11d6+0xbdb)],_0x1e9f0d=-_0x2aeafb*this['_element']['calculated'+'Width']+_0x440e6b*(this['_element']['calculated'+'Width']-_0x33b7e0)*(this['_rtl']?-(-0x77+0x5d2+0x1*-0x55a):-0x2f6*0xc+0x1f40+0x449),_0x2047b8=(-0xcfe+-0x255d+0x4*0xc97-_0x59854b)*this['_element']['calculated'+'Height']-_0x46eb89-(-0x13b4+-0x46+0x5d*0x37-_0x5c1212)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x2864c5=_0x19e6a4;_0x2864c5<=_0x2e307f;_0x2864c5++)this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(0x22f4+0x1*0x204d+-0x433d)*(-0x117d+0x2e*-0x7e+0x2824)]+=_0x1e9f0d,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(-0x2*0x189+0x167*-0x1+0x47d*0x1)*(-0x16f1+0x1654+-0x2*-0x50)+(0x1*0x2575+-0x20d9*0x1+0x499*-0x1)]+=_0x1e9f0d,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(0x18b5+0x1*-0x480+-0x1431)*(-0xb8c+0x1500+-0x971)+(0x149+0x69d*0x5+-0x2254)]+=_0x1e9f0d,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(-0x20d5+0x24e+0x1e8b)*(0xe4f+-0x163e+-0x71*-0x12)+(-0x1*-0xe59+-0xb7*-0x1+-0xf07)]+=_0x1e9f0d,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(-0x1*-0x44+-0x10*-0x8f+-0x930)*(-0xc2e+0x26f0+0x29*-0xa7)+(-0xb67*0x3+-0x84*-0x32+0x86e)]+=_0x2047b8,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(-0x2207+0x22*-0x119+0x1*0x475d)*(0xe8b*0x1+-0x1d*-0x7+-0xf53)+(0x6b*0x1+-0x1d*-0x57+-0xa42)]+=_0x2047b8,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(-0xca3+-0x197e+-0x3f*-0x9b)*(0x18b6+-0x3e5*-0x2+0x207d*-0x1)+(0x1d4a+-0x6*-0x644+-0x42db)]+=_0x2047b8,this['_meshInfo'][_0x2a8dba]['positions'][_0x2864c5*(0x4b5*-0x1+-0x44a+0x903)*(-0x7d8+0x14e0+-0xd05)+(-0x1c*0x150+0xe9*-0x1+0x1*0x25b3)]+=_0x2047b8;if(this['_rtl'])for(let _0x5adeec=_0x19e6a4;_0x5adeec<=_0x2e307f;_0x5adeec++){const _0x217c7=_0x5adeec*(0x26f0+-0x1443+-0x12a9)*(0x24cb+-0x168*0x1+-0x10*0x236);for(let _0x44e63a=0x1*0xd60+0x20b*0xe+0x3*-0xdfe;_0x44e63a<0x1b3b+0x224b*0x1+0x1ec1*-0x2;++_0x44e63a)this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+_0x44e63a*(0x3*-0x133+0xb5*-0x1e+0x18d2)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+_0x44e63a*(0xe26*0x2+0x4*0x1d9+-0x1*0x23ad)]+_0x1e9f0d*(0xca7+0x2*-0x26f+-0x7c7);const _0x169f1b=this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(-0xbff+0xba7+-0x5b*-0x1)],_0x30f699=this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(0x8*-0x2f3+-0x6a*0x22+0x25b2)];this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(0x2*0xf9e+0x22a7+-0x41e0)]=this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(-0x256e+0x2*-0x555+0x3018)],this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(0x2b+-0x1ee6*-0x1+-0x1f0b)]=this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(0x19c1+-0x223*0x2+-0x1572)],this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(-0x1b4f+0x19b7+-0x8*-0x33)]=_0x169f1b,this['_meshInfo'][_0x2a8dba]['positions'][_0x217c7+(-0x177b+-0x2548+0x3ccc)]=_0x30f699;}_0x19e6a4=_0x2e307f+(0x30b+0x1dfd+-0x5*0x69b);}const _0x6ebd19=this['_meshInfo'][_0x2a8dba]['count']*(-0x4ac+-0x683+0xb33),_0x58c004=this['_meshInfo'][_0x2a8dba]['quad']*(0x1d19+0x17*0x9e+0x1*-0x2b47),_0x4275ce=new go(this['_meshInfo'][_0x2a8dba]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x503e38=-0xa*-0x31d+-0xc8e+-0x1d*0xa4;_0x503e38<_0x6ebd19;_0x503e38++)_0x503e38>=_0x58c004?(_0x4275ce['element'][Pe]['set'](0x7c1*-0x5+-0x71*-0x35+0xa4*0x18,0x522+-0x1e43*-0x1+0x2b9*-0xd,-0x175*0xb+-0x2354+-0x335b*-0x1),_0x4275ce['element'][Yt]['set'](0x223e+0xe99+-0x30d7,-0xf4d*-0x2+-0x547*0x5+0x437*-0x1),_0x4275ce['element'][kt]['set'](0x12*-0x1c+-0xf1f*-0x1+-0x1*0xd27,-0x25d*-0x7+-0x16fd+0x672,-0x8*-0x4a2+0x284+-0x2794,-0x7d7+-0x2*-0xc46+-0x10b5),_0x4275ce['element'][Po]['set'](0x1a*-0x146+-0x2d*0x43+0x1*0x2ce3,0x8a9*-0x1+-0x38f+-0x61c*-0x2,-0x1182+0x6ea+0xa98,0x25fc+-0x1eb8+-0xf*0x7c),_0x4275ce['element'][Mo]['set'](-0x1*0xf4d+-0x22*0x33+0x1613,0x3ef*-0x1+-0x1393+0x11*0x162,-0x100+-0x1*0x1e43+-0x1f43*-0x1,0x906+0x3*0x9c9+-0x189*0x19)):(_0x4275ce['element'][Pe]['set'](this['_meshInfo'][_0x2a8dba]['positions'][_0x503e38*(0x2*0x8f9+-0xcd*-0xc+0x281*-0xb)+(0xcc0*0x2+-0x2*0xdf+-0x17c2)],this['_meshInfo'][_0x2a8dba]['positions'][_0x503e38*(0x33*0x7d+0xadc+-0x23c0)+(-0x1e2f*0x1+0x9*-0x351+0x3c09)],this['_meshInfo'][_0x2a8dba]['positions'][_0x503e38*(0x1*0x3f4+-0x159b+0xe*0x143)+(0xf*-0xb1+0x1a*0x89+-0x389*0x1)]),_0x4275ce['element'][Yt]['set'](this['_meshInfo'][_0x2a8dba]['uvs'][_0x503e38*(0x16a7+-0x83f*0x1+-0xe66)+(0x611*-0x3+-0x23*0x53+0x3e*0x7a)],this['_meshInfo'][_0x2a8dba]['uvs'][_0x503e38*(0xf*-0x1a3+-0x2043+0x7*0x81e)+(0x54d*-0x1+-0x8a*-0x1d+-0x295*0x4)]),_0x4275ce['element'][kt]['set'](this['_meshInfo'][_0x2a8dba]['colors'][_0x503e38*(-0x6b*0x11+0x1a78+0xd*-0x17d)+(0x1807+-0x26d2+0x1*0xecb)],this['_meshInfo'][_0x2a8dba]['colors'][_0x503e38*(-0x151*0x4+-0xbe*0x2d+0x1357*0x2)+(0x1144+-0x1eb*-0x14+0x1d*-0x1eb)],this['_meshInfo'][_0x2a8dba]['colors'][_0x503e38*(0x1b79+0x193f+-0x34b4)+(0xa59*-0x3+-0x1f31+-0x1f*-0x202)],this['_meshInfo'][_0x2a8dba]['colors'][_0x503e38*(-0x24e1+-0x1*-0x2036+0x6d*0xb)+(0x741+0x1fd*-0x2+-0x344)]),_0x4275ce['element'][Po]['set'](this['_meshInfo'][_0x2a8dba]['outlines'][_0x503e38*(-0xee9*0x1+0x42*0x7d+-0xa*0x1bb)+(-0x3d6+0x16bd+0x3*-0x64d)],this['_meshInfo'][_0x2a8dba]['outlines'][_0x503e38*(-0x1714+0x191c*-0x1+0x3033)+(0x2209+-0xde9+-0x141f)],this['_meshInfo'][_0x2a8dba]['outlines'][_0x503e38*(-0x2*0x115d+-0x13*0xd+-0x14*-0x1c9)+(-0x145*0x15+-0x2410+0x3ebb)]),_0x4275ce['element'][Mo]['set'](this['_meshInfo'][_0x2a8dba]['shadows'][_0x503e38*(0x1*-0x2455+0x3*-0x89c+0x1f16*0x2)+(-0xfa9*-0x2+0x1229*0x2+-0x1e1*0x24)],this['_meshInfo'][_0x2a8dba]['shadows'][_0x503e38*(0x2*-0xbb2+-0x24*-0x33+0x103b)+(-0x1af+0xb5*-0xf+0xc4b)],this['_meshInfo'][_0x2a8dba]['shadows'][_0x503e38*(-0x1c3b+-0x4d9+0x2b*0xc5)+(0x1e90+-0x16bd*-0x1+-0x354b)])),_0x4275ce['next']();_0x4275ce['end'](),this['_meshInfo'][_0x2a8dba]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x2a8dba]['positions']),this['_meshInfo'][_0x2a8dba]['meshInstan'+'ce']['_aabbVer']=-(-0x13f0*-0x1+0x18cf+-0x2cbe);}this['_aabbDirty']=!(0x1116+0x170d+-0x2823);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x57d807){this['font']!==_0x57d807['resource']&&(this['font']=_0x57d807['resource']);}['_onFontCha'+'nge'](_0x28e5a6,_0x576c81,_0x5ec621,_0x27e294){if(_0x576c81==='data'){this['_font']['data']=_0x5ec621;const _0x4824cd=this['_font']['data']['info']['maps']['length'];for(let _0x3201e9=0x16d4+-0xb2a+-0xbaa;_0x3201e9<_0x4824cd;_0x3201e9++){if(!this['_meshInfo'][_0x3201e9])continue;const _0x100786=this['_meshInfo'][_0x3201e9]['meshInstan'+'ce'];_0x100786&&(_0x100786['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x100786['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x100786['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x3201e9]['width']));}}}['_onFontRem'+'ove'](_0x46ae8a){}['_setTextur'+'eParams'](_0x170240,_0x2c39fb){this['_font']&&(this['_font']['type']===rc?(_0x170240['deletePara'+'meter']('texture_em'+'issiveMap'),_0x170240['deletePara'+'meter']('texture_op'+'acityMap'),_0x170240['setParamet'+'er']('texture_ms'+'dfMap',_0x2c39fb)):this['_font']['type']===TL&&(_0x170240['deletePara'+'meter']('texture_ms'+'dfMap'),_0x170240['setParamet'+'er']('texture_em'+'issiveMap',_0x2c39fb),_0x170240['setParamet'+'er']('texture_op'+'acityMap',_0x2c39fb)));}['_getPxRang'+'e'](_0x355855){const _0x16f4f4=Object['keys'](this['_font']['data']['chars']);for(let _0x22f222=0xc1d*-0x1+0xf27+-0x30a;_0x22f222<_0x16f4f4['length'];_0x22f222++){const _0x4390f8=this['_font']['data']['chars'][_0x16f4f4[_0x22f222]];if(_0x4390f8['range'])return(_0x4390f8['scale']||-0x696+-0x679+0xd10)*_0x4390f8['range'];}return-0x7*0xff+-0x96a+0x1065;}['_getUv'](_0xd05cc4){const _0x596b7b=this['_font']['data'];if(!_0x596b7b['chars'][_0xd05cc4])return _0x596b7b['chars']['\x20']?this['_getUv']('\x20'):[-0x1def+-0x1*0xa8b+0x287a,0x4*0x1ff+-0x1456+0xc5a,0x8*0x49d+-0x1*-0x17a5+0x142f*-0x3,0x11c1*0x1+0x13cb*0x1+0x9*-0x42c];const _0x3e7acd=_0x596b7b['chars'][_0xd05cc4]['map'],_0x5532ce=_0x596b7b['info']['maps'][_0x3e7acd]['width'],_0x2aa7d5=_0x596b7b['info']['maps'][_0x3e7acd]['height'],_0x349e6a=_0x596b7b['chars'][_0xd05cc4]['x'],_0x4cfb77=_0x596b7b['chars'][_0xd05cc4]['y'],_0x1dea43=_0x349e6a,_0x2732b2=_0x4cfb77,_0x5526a2=_0x349e6a+_0x596b7b['chars'][_0xd05cc4]['width'],_0x3e10d1=_0x4cfb77-_0x596b7b['chars'][_0xd05cc4]['height'],_0x2241d2=-0x1187+0x1e54+0xea*-0xe-_0x596b7b['chars'][_0xd05cc4]['height']/_0x2aa7d5;return[_0x1dea43/_0x5532ce,_0x2241d2-_0x2732b2/_0x2aa7d5,_0x5526a2/_0x5532ce,_0x2241d2-_0x3e10d1/_0x2aa7d5];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0xebb+-0x1935+-0x6a8*-0x6),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(-0x12ef*0x2+0x1*0x14f+-0x30c*-0xc),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x3fa75e){if(this['_model']){const _0x310ab2=this['_model']['meshInstan'+'ces'];for(let _0x1f0d70=-0x26ea+0xe3a+0x18b0;_0x1f0d70<_0x310ab2['length'];_0x1f0d70++)_0x310ab2[_0x1f0d70]['stencilFro'+'nt']=_0x3fa75e,_0x310ab2[_0x1f0d70]['stencilBac'+'k']=_0x3fa75e;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x50b19f){const _0x1b9705={};_0x50b19f===void(0x193f+-0xd10+-0xc2f*0x1)&&(_0x50b19f=this['_symbols']['length']);for(let _0x264932=0xc30+-0xaa2+-0x18e,_0x58b00e=_0x50b19f;_0x264932<_0x58b00e;_0x264932++){const _0x3e2017=this['_symbols'][_0x264932];let _0x4fb5fb=this['_font']['data']['chars'][_0x3e2017];_0x4fb5fb||(_0x4fb5fb=this['_font']['data']['chars']['\x20'],_0x4fb5fb||(_0x4fb5fb=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[-0x25e1+-0xdb5+0x3396]]));const _0x28638e=_0x4fb5fb['map'];_0x1b9705[_0x28638e]?_0x1b9705[_0x28638e]++:_0x1b9705[_0x28638e]=0x308+-0x26ad+0x23a6;}return _0x1b9705;}['_updateRen'+'derRange'](){const _0x4ad3c1=this['_rangeStar'+'t']===-0x145+-0x2694+0x27d9?0x355+0x1062+0x1*-0x13b7:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x110f8d=this['_rangeEnd']===-0xac1+-0xefc+-0x19bd*-0x1?-0x1408+-0x14ea*-0x1+-0x1*0xe2:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x1843ab=-0x1f3d*-0x1+-0xe0+-0x1e5d,_0x40174b=this['_meshInfo']['length'];_0x1843ab<_0x40174b;_0x1843ab++){const _0x2041e8=_0x4ad3c1[_0x1843ab]||-0x2*-0x128f+0x355*-0x3+-0x1b1f,_0x5aadb7=_0x110f8d[_0x1843ab]||0x7f1+0xe78+-0x1669,_0x1cddc8=this['_meshInfo'][_0x1843ab]['meshInstan'+'ce'];if(_0x1cddc8){const _0x404089=_0x1cddc8['mesh'];_0x404089&&(_0x404089['primitive'][0xd6d+0x1db*-0x5+-0x426]['base']=_0x2041e8*(0x184+-0x2005+0x1e84)*(0xa55+-0x63d*0x1+-0x416),_0x404089['primitive'][-0x253e+-0xa*0x32e+0x450a]['count']=(_0x5aadb7-_0x2041e8)*(-0x180b+0x67c+-0xd*-0x15a)*(-0x4*-0x71d+0x1*-0x139f+0x8d3*-0x1));}}}set['text'](_0xa8ccf4){this['_i18nKey']=null;const _0xdf430f=_0xa8ccf4!=null&&_0xa8ccf4['toString']()||'';this['_setText'](_0xdf430f);}get['text'](){return this['_text'];}set['key'](_0x567882){const _0x307a53=_0x567882!==null?_0x567882['toString']():null;this['_i18nKey']!==_0x307a53&&(this['_i18nKey']=_0x307a53,_0x307a53?(this['_fontAsset']['disableLoc'+'alization']=!(0x1*0x2335+-0x287*-0x9+-0x39f3),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x4*-0x5ae+-0x2*0x429+0x1f0a));}get['key'](){return this['_i18nKey'];}set['color'](_0x4aef39){const _0xfe0f97=_0x4aef39['r'],_0x186a70=_0x4aef39['g'],_0x11470b=_0x4aef39['b'];if(this['_color']===_0x4aef39&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0xfe0f97&&this['_color']['g']===_0x186a70&&this['_color']['b']===_0x11470b)&&(this['_color']['r']=_0xfe0f97,this['_color']['g']=_0x186a70,this['_color']['b']=_0x11470b,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_color']),this['_colorUnif'+'orm'][-0x1*0xc13+0x21a3+-0x1590]=Ve['r'],this['_colorUnif'+'orm'][-0x26e7+-0x2457*-0x1+0x1*0x291]=Ve['g'],this['_colorUnif'+'orm'][-0x1d*0x91+0xa12+-0x3*-0x21f]=Ve['b'];for(let _0x18adf3=-0x4c2+0x1*0x2183+0x1cc1*-0x1,_0x588c08=this['_model']['meshInstan'+'ces']['length'];_0x18adf3<_0x588c08;_0x18adf3++)this['_model']['meshInstan'+'ces'][_0x18adf3]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x54ee9a){if(this['_color']['a']!==_0x54ee9a&&(this['_color']['a']=_0x54ee9a,this['_model'])){for(let _0xf87fff=-0xb85+-0x12a*-0x13+-0xa99*0x1,_0x420461=this['_model']['meshInstan'+'ces']['length'];_0xf87fff<_0x420461;_0xf87fff++)this['_model']['meshInstan'+'ces'][_0xf87fff]['setParamet'+'er']('material_o'+'pacity',_0x54ee9a);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x54ee9a);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x447430){const _0x30a710=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x447430,this['_scaledLin'+'eHeight']=_0x447430,_0x30a710!==_0x447430&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x552a8f){const _0x1f1aff=this['_wrapLines'];this['_wrapLines']=_0x552a8f,_0x1f1aff!==_0x552a8f&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x1df80d){const _0x4f765c=this['_spacing'];this['_spacing']=_0x1df80d,_0x4f765c!==_0x1df80d&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x2526d1){const _0x207717=this['_fontSize'];this['_fontSize']=_0x2526d1,this['_originalF'+'ontSize']=_0x2526d1,_0x207717!==_0x2526d1&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x5682e4){this['_fontAsset']['defaultAss'+'et']=_0x5682e4;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x3dd9b7){let _0x2ce411;if(this['_font']&&(_0x2ce411=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x3dd9b7,this['_fontMinY']=-0x2e+-0x78d+0x1*0x7bb,this['_fontMaxY']=-0x14*0x1dc+0x13*0xe5+-0x1*-0x1431,!_0x3dd9b7)return;const _0x10c612=this['_font']['data'];for(const _0x2ae8b4 in _0x10c612['chars']){const _0x3c516b=_0x10c612['chars'][_0x2ae8b4];_0x3c516b['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x3c516b['bounds'][0x116*-0x1c+0x1858+0x611]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x3c516b['bounds'][-0xa77+0x4c2+0x2*0x2dc]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x3dd9b7['type']!==_0x2ce411){const _0x389a9=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x389a9);}for(let _0x5053a7=0x110e+-0x75*-0x21+-0x2023,_0x57922c=this['_font']['textures']['length'];_0x5053a7<_0x57922c;_0x5053a7++)if(!this['_meshInfo'][_0x5053a7])this['_meshInfo'][_0x5053a7]=new DL();else{const _0x452b90=this['_meshInfo'][_0x5053a7]['meshInstan'+'ce'];_0x452b90&&(_0x452b90['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x452b90['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x452b90['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x5053a7]['width']),this['_setTextur'+'eParams'](_0x452b90,this['_font']['textures'][_0x5053a7]));}let _0x304600=!(-0x77*0x4f+-0x6b*-0x5+0x22a3*0x1);for(let _0x3e6778=this['_font']['textures']['length'];_0x3e6778<this['_meshInfo']['length'];_0x3e6778++)this['_meshInfo'][_0x3e6778]['meshInstan'+'ce']&&(_0x304600||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x304600=!(-0x2088+0x2d5+0x1db3)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x3e6778]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x5b13d1){_0x5b13d1 instanceof J?this['_alignment']['set'](_0x5b13d1['x'],_0x5b13d1['y']):this['_alignment']['set'](_0x5b13d1[0x1ecc+0x232b+-0x41f7],_0x5b13d1[0xda0+-0x3*0x7cf+0x9ce*0x1]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x1bc176){const _0x2b1e7c=this['_autoWidth'];if(this['_autoWidth']=_0x1bc176,_0x1bc176&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<0x3*0x425+-0x2*-0x248+-0x10ff+0.0001&&(this['_element']['width']=this['width']),_0x2b1e7c!==_0x1bc176){const _0x42709c=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x42709c!==this['_fontSize']&&(this['_fontSize']=_0x42709c,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x21bfbb){const _0x41380f=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x21bfbb,_0x21bfbb&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<-0x7*-0x1ab+0x1*0x14b7+-0x2064+0.0001&&(this['_element']['height']=this['height']),_0x41380f!==_0x21bfbb){const _0x5d694b=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x5d694b!==this['_fontSize']&&(this['_fontSize']=_0x5d694b,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x1de0fe){this['_rtlReorde'+'r']!==_0x1de0fe&&(this['_rtlReorde'+'r']=_0x1de0fe,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x5f0ece){this['_unicodeCo'+'nverter']!==_0x5f0ece&&(this['_unicodeCo'+'nverter']=_0x5f0ece,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x33273f=!(-0xeeb+0x88a+0x662);for(let _0x5ac842=0x1*0x1b98+0x3*0x981+0x1*-0x381b;_0x5ac842<this['_meshInfo']['length'];_0x5ac842++)this['_meshInfo'][_0x5ac842]['meshInstan'+'ce']&&(_0x33273f?this['_aabb']['add'](this['_meshInfo'][_0x5ac842]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x5ac842]['meshInstan'+'ce']['aabb']),_0x33273f=!(0x969+0x4*-0x83b+-0x1cf*-0xd)));this['_aabbDirty']=!(0x133a*0x2+0x2f*0x43+-0x32c0);}return this['_aabb'];}set['outlineCol'+'or'](_0x2ff185){const _0xfba9b9=_0x2ff185 instanceof ie?_0x2ff185['r']:_0x2ff185[0x3b*-0x7+0x2*0xbe2+-0x1627],_0x593cdb=_0x2ff185 instanceof ie?_0x2ff185['g']:_0x2ff185[0x2d3*-0x2+0xe22+-0xa7*0xd],_0x495f28=_0x2ff185 instanceof ie?_0x2ff185['b']:_0x2ff185[-0x1*-0x21d5+-0xfeb+-0x11e8],_0x388801=_0x2ff185 instanceof ie?_0x2ff185['a']:_0x2ff185[0x1*0x1c21+0x4e1*-0x8+0xaea];if(this['_outlineCo'+'lor']===_0x2ff185&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0xfba9b9&&this['_outlineCo'+'lor']['g']===_0x593cdb&&this['_outlineCo'+'lor']['b']===_0x495f28&&this['_outlineCo'+'lor']['a']===_0x388801)&&(this['_outlineCo'+'lor']['r']=_0xfba9b9,this['_outlineCo'+'lor']['g']=_0x593cdb,this['_outlineCo'+'lor']['b']=_0x495f28,this['_outlineCo'+'lor']['a']=_0x388801,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0xa70+0x1d90+-0x5*0x800]=Ve['r'],this['_outlineCo'+'lorUniform'][-0x1456+-0x1aa7*-0x1+-0x650]=Ve['g'],this['_outlineCo'+'lorUniform'][0x19*-0x86+-0x222*-0x4+0x490]=Ve['b'],this['_outlineCo'+'lorUniform'][0x1ff3*0x1+-0x15ab+-0xa45]=Ve['a'];for(let _0x8b8a81=0x71a+-0x14be*0x1+0xda4,_0x35c927=this['_model']['meshInstan'+'ces']['length'];_0x8b8a81<_0x35c927;_0x8b8a81++)this['_model']['meshInstan'+'ces'][_0x8b8a81]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x13baac){const _0x76f3da=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x13baac,_0x76f3da!==_0x13baac&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0xabf71b=-0x7*-0x542+0x1*0x1739+-0x3c07,_0x4682e5=this['_model']['meshInstan'+'ces']['length'];_0xabf71b<_0x4682e5;_0xabf71b++)this['_model']['meshInstan'+'ces'][_0xabf71b]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x17710e){const _0x4d6010=_0x17710e instanceof ie?_0x17710e['r']:_0x17710e[0x1f5a+0x1f96+-0x3ef0],_0xa6acf1=_0x17710e instanceof ie?_0x17710e['g']:_0x17710e[0xa5a+-0x1f8b+0x1532],_0x3f2d1f=_0x17710e instanceof ie?_0x17710e['b']:_0x17710e[0x5*0x789+0x10*-0x22f+0x2bb*-0x1],_0x55dceb=_0x17710e instanceof ie?_0x17710e['a']:_0x17710e[0xb3*-0x35+-0x193a+0x3e4c];if(this['_shadowCol'+'or']===_0x17710e&&M['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x4d6010&&this['_shadowCol'+'or']['g']===_0xa6acf1&&this['_shadowCol'+'or']['b']===_0x3f2d1f&&this['_shadowCol'+'or']['a']===_0x55dceb)&&(this['_shadowCol'+'or']['r']=_0x4d6010,this['_shadowCol'+'or']['g']=_0xa6acf1,this['_shadowCol'+'or']['b']=_0x3f2d1f,this['_shadowCol'+'or']['a']=_0x55dceb,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{Ve['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x1*0x1fe7+0x11f3*-0x1+0x31da]=Ve['r'],this['_shadowCol'+'orUniform'][-0x1*-0xeab+-0x1*0x439+-0xa71]=Ve['g'],this['_shadowCol'+'orUniform'][-0x2a+-0x1a71+-0x1a9d*-0x1]=Ve['b'],this['_shadowCol'+'orUniform'][0x7a2+0xb59+-0x12f8]=Ve['a'];for(let _0x180d76=-0x21cb+0x149f*0x1+0xd2c,_0x427f05=this['_model']['meshInstan'+'ces']['length'];_0x180d76<_0x427f05;_0x180d76++)this['_model']['meshInstan'+'ces'][_0x180d76]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x68c4e){const _0x315102=_0x68c4e instanceof J?_0x68c4e['x']:_0x68c4e[0x38c+-0x7b7+0x42b],_0x5e9ab0=_0x68c4e instanceof J?_0x68c4e['y']:_0x68c4e[0x2*-0xd13+0x1761+0x2c6];if(!(this['_shadowOff'+'set']['x']===_0x315102&&this['_shadowOff'+'set']['y']===_0x5e9ab0)&&(this['_shadowOff'+'set']['set'](_0x315102,_0x5e9ab0),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x19808e=0x155d+-0x19c1*0x1+0x1*0x464,_0x3a2eb5=this['_model']['meshInstan'+'ces']['length'];_0x19808e<_0x3a2eb5;_0x19808e++){const _0x2ac5a5=-this['_font']['data']['info']['maps'][_0x19808e]['width']/this['_font']['data']['info']['maps'][_0x19808e]['height'];this['_shadowOff'+'setUniform'][-0x267b+0xd55+0x1*0x1926]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][0x148e*0x1+-0x488+-0x1005]=_0x2ac5a5*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x19808e]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x59759b){this['_minFontSi'+'ze']!==_0x59759b&&(this['_minFontSi'+'ze']=_0x59759b,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x5d1bf0){this['_maxFontSi'+'ze']!==_0x5d1bf0&&(this['_maxFontSi'+'ze']=_0x5d1bf0,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x368f1f){this['_autoFitWi'+'dth']!==_0x368f1f&&(this['_autoFitWi'+'dth']=_0x368f1f,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x58ab8c){this['_autoFitHe'+'ight']!==_0x58ab8c&&(this['_autoFitHe'+'ight']=_0x58ab8c,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x25247a){this['_maxLines']!==_0x25247a&&(_0x25247a===null&&this['_maxLines']===-(0x1f45*0x1+-0x6b*-0xb+0x1*-0x23dd)||(this['_maxLines']=_0x25247a===null?-(0x162c+0x242e+-0x27*0x17f):_0x25247a,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x3730f1){if(_0x3730f1=!!_0x3730f1,this['_enableMar'+'kup']===_0x3730f1)return;this['_enableMar'+'kup']=_0x3730f1,this['font']&&this['_updateTex'+'t']();const _0xeb7305=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0xeb7305);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x4d342a){return this['_colorPale'+'tte']['slice'](_0x4d342a*(0x504+-0x24e7+-0x2*-0xff3),_0x4d342a*(0x9e1+-0x1406*-0x1+0xef2*-0x2)+(0x2032*-0x1+-0x2ff+0xc*0x2ef));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x5e3d9a){return this['_outlinePa'+'lette']['slice'](_0x5e3d9a*(-0x2479+-0x1327+0x50f*0xb),_0x5e3d9a*(0x219+0x5a+-0x2*0x137)+(-0x240e+-0x437*0x1+0x284a));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x5b65f1){return this['_shadowPal'+'ette']['slice'](_0x5b65f1*(0x1*0x21ad+-0x1*-0x20cf+-0x2*0x213b),_0x5b65f1*(0x1140+-0x260a+0x14d0)+(-0x161f+0x1*0x1c97+-0x2*0x339));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x1f265e){_0x1f265e=Math['max'](0x956*-0x1+-0x19bd+0x2313,Math['min'](_0x1f265e,this['_symbols']['length'])),_0x1f265e!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x1f265e,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x5cba5b){_0x5cba5b=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x5cba5b,this['_symbols']['length'])),_0x5cba5b!==this['_rangeEnd']&&(this['_rangeEnd']=_0x5cba5b,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const qd=new I(),fg=new te(),vi=new I(),zL=new I(),_s=new te(),eh=new te(),th=new te(),La=new te();class is extends we{constructor(_0x54454a,_0x349e1c){super(_0x54454a,_0x349e1c),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0x3*-0x4ed+-0x11*0x72+0x734*-0x1),this['_anchor']=new ae(),this['_localAnch'+'or']=new ae(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x1*-0xed7+0xbb7*0x3+-0x142e,this['_height']=this['_calculate'+'dHeight']=-0x8*-0x33f+0xffc+0x4*-0xa75,this['_margin']=new ae(-0x1d2*0x3+-0x967+0xedd,0x7*0x2db+0x6d6+-0x1ad3,-(0x1b46+-0x6b3*-0x3+-0x127*0x29),-(0x93*-0x8+0x5*-0x11+0x50d)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(0x28d*0xc+-0x18f5*-0x1+0x5*-0xb1d),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new I(),new I(),new I(),new I()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new I(),new I(),new I(),new I()],this['_cornersDi'+'rty']=!(-0x3e4+-0x1af9*0x1+0x1edd*0x1),this['_canvasCor'+'nersDirty']=!(0x1214+0x1b1c+-0x2d30),this['_worldCorn'+'ersDirty']=!(0x24b1*-0x1+0x21d*-0x11+0x489e),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=xh,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=-0x4*0x54b+-0x1d6d+0x3299,this['_fitMode']=Th,this['_useInput']=!(-0x112*-0x4+-0x11a7+0xd60),this['_layers']=[nl],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(0x154f+-0xc7c*0x1+-0x2*0x469),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=0x8*-0x2cd+-0x1830+0x2e98,this['_maskOffse'+'t']=-0xb*0x1e7+0x43c*-0x1+-0x863*-0x3+0.5,this['_maskedBy']=null);}get['data'](){const _0x1f2b12=this['system']['store'][this['entity']['getGuid']()];return _0x1f2b12?_0x1f2b12['data']:null;}set['enabled'](_0x435ea8){const _0x2dd84c=this['data'],_0x4d7aee=_0x2dd84c['enabled'];_0x2dd84c['enabled']=_0x435ea8,this['fire']('set','enabled',_0x4d7aee,_0x435ea8);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>-0x65*0x4a+0xb2e+0x2*0x902+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0x394*-0x8+0xf48*0x1+0xd58+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x581aab){_0x581aab instanceof ae?this['_anchor']['copy'](_0x581aab):this['_anchor']['set'](..._0x581aab),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0x16c0+-0xc*0x26a+0x5*0xa58),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x37606d){var _0x2fea6f,_0x558d79;this['_batchGrou'+'pId']!==_0x37606d&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x1*0x1003+0x1*-0xaa1+0x1aa4&&((_0x2fea6f=this['system']['app']['batcher'])==null||_0x2fea6f['remove'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x37606d>=-0x12d5+-0x2012*0x1+-0x9d*-0x53&&((_0x558d79=this['system']['app']['batcher'])==null||_0x558d79['insert'](mt['ELEMENT'],_0x37606d,this['entity'])),_0x37606d<0x151a+-0x3b*-0x89+-0x34ad&&this['_batchGrou'+'pId']>=-0xd7e+0x6a6+0x6d8&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x37606d);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x50c509){this['_margin']['y']=_0x50c509;const _0x360323=this['entity']['getLocalPo'+'sition'](),_0x307219=this['_absTop'],_0x3e5de5=this['_localAnch'+'or']['y']+_0x50c509;this['_setHeight'](_0x307219-_0x3e5de5),_0x360323['y']=_0x50c509+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x360323);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x4bfe73){this['_setCalcul'+'atedWidth'](_0x4bfe73,!(-0x2644+-0x60d+-0x8dd*-0x5));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x6e4762){this['_setCalcul'+'atedHeight'](_0x6e4762,!(0xd4c+-0x2041*-0x1+-0x2d8d));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x3c8b4a=this['system']['app']['graphicsDe'+'vice'],_0x58d884=this['screenCorn'+'ers'],_0x4a2c47=_0x3c8b4a['canvas']['clientWidt'+'h']/_0x3c8b4a['width'],_0x175f93=_0x3c8b4a['canvas']['clientHeig'+'ht']/_0x3c8b4a['height'];for(let _0x5dc7e7=-0x95b+-0x1f5d+0x517*0x8;_0x5dc7e7<0x3a*-0x9a+0x2*0xa7+0x1fa*0x11;_0x5dc7e7++)this['_canvasCor'+'ners'][_0x5dc7e7]['set'](_0x58d884[_0x5dc7e7]['x']*_0x4a2c47,(_0x3c8b4a['height']-_0x58d884[_0x5dc7e7]['y'])*_0x175f93);return this['_canvasCor'+'nersDirty']=!(0xc8f+0x2249+-0x2ed7),this['_canvasCor'+'ners'];}set['drawOrder'](_0xd0f2cc){let _0x283be4=0x14a8+-0x4*-0x87c+-0x3698;this['screen']&&(_0x283be4=this['screen']['screen']['priority']),_0xd0f2cc>0x156058c*-0x1+0xc2a472*0x1+0x1936119&&(M['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0xd0f2cc=0x87519a+-0x768586+0xef33eb),this['_drawOrder']=(_0x283be4<<-0x1cc7*-0x1+-0x2bf*-0x4+-0x27ab)+_0xd0f2cc,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x1e6e88){this['_height']=_0x1e6e88,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x1e6e88,!(0xc62+-0x2e0+-0x982)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x25c51f){if(this['_addedMode'+'ls']['length'])for(let _0x3106bd=-0x22df+-0x1*-0x871+0x1a6e;_0x3106bd<this['_layers']['length'];_0x3106bd++){const _0x3fe8f9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x3106bd]);if(_0x3fe8f9){for(let _0x31c1f9=-0x1*-0xdb8+-0x1*0x1e1a+0x2*0x831;_0x31c1f9<this['_addedMode'+'ls']['length'];_0x31c1f9++)_0x3fe8f9['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x31c1f9]['meshInstan'+'ces']);}}if(this['_layers']=_0x25c51f,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0xace68=0x1a2d*0x1+0x1e27+-0x3854;_0xace68<this['_layers']['length'];_0xace68++){const _0x33829b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0xace68]);if(_0x33829b){for(let _0x5a8fb4=-0xbc2+-0x335*0x3+0x1561;_0x5a8fb4<this['_addedMode'+'ls']['length'];_0x5a8fb4++)_0x33829b['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x5a8fb4]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x280842){this['_margin']['x']=_0x280842;const _0x1d2df4=this['entity']['getLocalPo'+'sition'](),_0x492a4c=this['_absRight'],_0x436ca1=this['_localAnch'+'or']['x']+_0x280842;this['_setWidth'](_0x492a4c-_0x436ca1),_0x1d2df4['x']=_0x280842+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x1d2df4);}get['left'](){return this['_margin']['x'];}set['margin'](_0x13c0ad){this['_margin']['copy'](_0x13c0ad),this['_calculate'+'Size'](!(-0x5*-0x74c+0x189d*0x1+0x1*-0x3d19),!(-0x6bd*0x4+-0x27*0xd+0x1cef)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x3857f8){const {pivot:_0xa4e0b6,margin:_0x375359}=this,_0x339250=_0xa4e0b6['x'],_0x35342d=_0xa4e0b6['y'];_0x3857f8 instanceof J?_0xa4e0b6['copy'](_0x3857f8):_0xa4e0b6['set'](..._0x3857f8);const _0x4d6f58=_0x375359['x']+_0x375359['z'],_0x40f044=_0xa4e0b6['x']-_0x339250;_0x375359['x']+=_0x4d6f58*_0x40f044,_0x375359['z']-=_0x4d6f58*_0x40f044;const _0x2156ee=_0x375359['y']+_0x375359['w'],_0x5bf4bc=_0xa4e0b6['y']-_0x35342d;_0x375359['y']+=_0x2156ee*_0x5bf4bc,_0x375359['w']-=_0x2156ee*_0x5bf4bc,this['_anchorDir'+'ty']=!(-0x21aa+-0x782+0x292c),this['_cornersDi'+'rty']=!(0x2103+-0x24e5+0x3e2),this['_worldCorn'+'ersDirty']=!(0x9bf+-0x10a9+-0x127*-0x6),this['_calculate'+'Size'](!(-0xc88+-0x65*0x59+-0x39*-0xd6),!(0x114b+-0x1667+0xbb*0x7)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0xa4e0b6);}get['pivot'](){return this['_pivot'];}set['right'](_0x85d4a){this['_margin']['z']=_0x85d4a;const _0x385723=this['entity']['getLocalPo'+'sition'](),_0x1ed8ae=this['_absLeft'],_0x215fb8=this['_localAnch'+'or']['z']-_0x85d4a;this['_setWidth'](_0x215fb8-_0x1ed8ae),_0x385723['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x85d4a-this['_calculate'+'dWidth']*(-0x30d*0x7+0xaa1*0x3+-0x23*0x4d-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x385723);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x3da752=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][-0x2*-0xda5+0x1*0x1fcd+-0x3b17];this['_screenCor'+'ners'][-0x15d*-0x11+0x33d+-0x142*0x15]['set'](this['_absLeft'],this['_absBottom'],0x66d*0x3+0x991*-0x1+0x16*-0x71),this['_screenCor'+'ners'][-0x1*0x1645+-0x4f4+-0x11*-0x19a]['set'](this['_absRight'],this['_absBottom'],0x2699+-0x1334+0xf*-0x14b),this['_screenCor'+'ners'][0x1*-0x4f+0x1*0xaf0+-0x1*0xa9f]['set'](this['_absRight'],this['_absTop'],-0xf56+-0x143a*-0x1+-0x4e4*0x1),this['_screenCor'+'ners'][-0x27*-0xc5+0x1d57+-0x3b57*0x1]['set'](this['_absLeft'],this['_absTop'],-0x79c+-0x16d*0x7+0x1197);const _0x5ab7b3=this['screen']['screen']['screenSpac'+'e'];for(let _0x443a6b=-0x2252+-0x2e*0x62+0x33ee;_0x443a6b<-0x1*-0xe69+-0x169*0x6+-0x5ef;_0x443a6b++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x443a6b],this['_screenCor'+'ners'][_0x443a6b]),_0x5ab7b3&&this['_screenCor'+'ners'][_0x443a6b]['mulScalar'](this['screen']['screen']['scale']),_0x3da752&&this['_screenCor'+'ners'][_0x443a6b]['add'](_0x3da752);return this['_cornersDi'+'rty']=!(-0x1015+0x35+0x32d*0x5),this['_canvasCor'+'nersDirty']=!(0xaf7*-0x2+-0x64e+0x1c3c),this['_worldCorn'+'ersDirty']=!(0x181d+-0xb2a+-0xcf3),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0x209a+0x5df+-0x2679;}get['textHeight'](){return this['_text']?this['_text']['height']:0x53*-0x4e+0x19*-0x16f+0x3d21;}set['top'](_0x5f5b05){this['_margin']['w']=_0x5f5b05;const _0x1f7b95=this['entity']['getLocalPo'+'sition'](),_0x1427a4=this['_absBottom'],_0x5c7740=this['_localAnch'+'or']['w']-_0x5f5b05;this['_setHeight'](_0x5c7740-_0x1427a4),_0x1f7b95['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x5f5b05-this['_calculate'+'dHeight']*(0xe4e+0x1136+-0x1f83-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x1f7b95);}get['top'](){return this['_margin']['w'];}set['type'](_0x290cdf){_0x290cdf!==this['_type']&&(this['_type']=_0x290cdf,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x290cdf===qf?this['_image']=new vL(this):_0x290cdf===sv&&(this['_text']=new BL(this)));}get['type'](){return this['_type'];}set['useInput'](_0x1a037a){this['_useInput']!==_0x1a037a&&(this['_useInput']=_0x1a037a,this['system']['app']['elementInp'+'ut']?_0x1a037a?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(0xdb7+-0xd6*-0x2+-0xf63)&&M['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x1a037a));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x48fd06){this['_fitMode']=_0x48fd06,this['_calculate'+'Size'](!(-0x1*0x6f6+-0xdf*0x1+0x7d5*0x1),!(-0x19*-0xb+-0x1327+0x1a*0xb2)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x54af5d){this['_width']=_0x54af5d,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x54af5d,!(-0xa*-0x2b7+-0x42b+-0x16fb)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x5092eb=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){_s['copy'](this['screen']['screen']['_screenMat'+'rix']),_s['data'][-0x1012+0x3*0xcf5+-0xd*0x1c0]=-_s['data'][0x27f*0x7+0xaed+-0x3b*0x7b],_s['mul2'](this['screen']['getWorldTr'+'ansform'](),_s);for(let _0x3e93bb=0x1*-0x1e71+0x1b7*-0x2+-0x1d*-0x12b;_0x3e93bb<0x2*-0xaa3+0x37d*0x7+-0x321;_0x3e93bb++)_s['transformP'+'oint'](_0x5092eb[_0x3e93bb],this['_worldCorn'+'ers'][_0x3e93bb]);}}else{const _0x2cd70e=this['entity']['getLocalPo'+'sition']();_s['setTransla'+'te'](-_0x2cd70e['x'],-_0x2cd70e['y'],-_0x2cd70e['z']),eh['setTRS'](I['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),th['setTransla'+'te'](_0x2cd70e['x'],_0x2cd70e['y'],_0x2cd70e['z']);const _0x4db425=this['entity']['parent']?this['entity']['parent']:this['entity'];La['copy'](_0x4db425['getWorldTr'+'ansform']()),La['mul'](th)['mul'](eh)['mul'](_s),vi['set'](_0x2cd70e['x']-this['pivot']['x']*this['calculated'+'Width'],_0x2cd70e['y']-this['pivot']['y']*this['calculated'+'Height'],_0x2cd70e['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0xbb1+0x13aa*-0x1+-0x9d*-0xd]),vi['set'](_0x2cd70e['x']+(0x5ba+0x5*0x3a+0x3*-0x249-this['pivot']['x'])*this['calculated'+'Width'],_0x2cd70e['y']-this['pivot']['y']*this['calculated'+'Height'],_0x2cd70e['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0xbf*-0x16+-0x50b+0x1576]),vi['set'](_0x2cd70e['x']+(0x1543+0x45+-0x1587-this['pivot']['x'])*this['calculated'+'Width'],_0x2cd70e['y']+(0x1f58+-0xd*-0x2d5+-0x1*0x4428-this['pivot']['y'])*this['calculated'+'Height'],_0x2cd70e['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][0x2f*-0x37+0xc72+-0x257]),vi['set'](_0x2cd70e['x']-this['pivot']['x']*this['calculated'+'Width'],_0x2cd70e['y']+(-0x182a+-0x2244+0x7*0x859-this['pivot']['y'])*this['calculated'+'Height'],_0x2cd70e['z']),La['transformP'+'oint'](vi,this['_worldCorn'+'ers'][-0x1e08+0x18bf+-0x1c4*-0x3]);}return this['_worldCorn'+'ersDirty']=!(-0x2379+-0x92*-0x3+0x21c4),this['_worldCorn'+'ers'];}set['fontSize'](_0x168307){this['_setValue']('fontSize',_0x168307);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x30e165){this['_setValue']('minFontSiz'+'e',_0x30e165);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x316bcd){this['_setValue']('maxFontSiz'+'e',_0x316bcd);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0xc56d5c){this['_setValue']('maxLines',_0xc56d5c);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x13e765){this['_setValue']('autoFitWid'+'th',_0x13e765);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x43a792){this['_setValue']('autoFitHei'+'ght',_0x43a792);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x310e26){this['_setValue']('color',_0x310e26);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x143cbe){this['_setValue']('font',_0x143cbe);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x477cbb){this['_setValue']('fontAsset',_0x477cbb);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x324379){this['_setValue']('spacing',_0x324379);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x1eceb1){this['_setValue']('lineHeight',_0x1eceb1);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x3ac088){this['_setValue']('wrapLines',_0x3ac088);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x2f0bfd){this['_setValue']('lines',_0x2f0bfd);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x2fedc3){this['_setValue']('alignment',_0x2fedc3);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x4189aa){this['_setValue']('autoWidth',_0x4189aa);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x230074){this['_setValue']('autoHeight',_0x230074);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x23ad1d){this['_setValue']('rtlReorder',_0x23ad1d);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x2464a0){this['_setValue']('unicodeCon'+'verter',_0x2464a0);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x58d111){this['_setValue']('text',_0x58d111);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x3c29d1){this['_setValue']('key',_0x3c29d1);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x5c245e){this['_setValue']('texture',_0x5c245e);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0xc1f553){this['_setValue']('textureAss'+'et',_0xc1f553);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x37b9e9){this['_setValue']('material',_0x37b9e9);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x315244){this['_setValue']('materialAs'+'set',_0x315244);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x3adc95){this['_setValue']('sprite',_0x3adc95);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x2c4eb7){this['_setValue']('spriteAsse'+'t',_0x2c4eb7);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x3a98f0){this['_setValue']('spriteFram'+'e',_0x3a98f0);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x194088){this['_setValue']('pixelsPerU'+'nit',_0x194088);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x4cea1c){this['_setValue']('opacity',_0x4cea1c);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x535d54){this['_setValue']('rect',_0x535d54);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0xf66323){this['_setValue']('mask',_0xf66323);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0xaab5ec){this['_setValue']('outlineCol'+'or',_0xaab5ec);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x45af7e){this['_setValue']('outlineThi'+'ckness',_0x45af7e);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x5113fa){this['_setValue']('shadowColo'+'r',_0x5113fa);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x2ecedd){this['_setValue']('shadowOffs'+'et',_0x2ecedd);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x588b45){this['_setValue']('enableMark'+'up',_0x588b45);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x207e67){this['_setValue']('rangeStart',_0x207e67);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x298ab5){this['_setValue']('rangeEnd',_0x298ab5);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x29f381,_0x46cb1d){this['_text']?(this['_text'][_0x29f381]!==_0x46cb1d&&this['_dirtyBatc'+'h'](),this['_text'][_0x29f381]=_0x46cb1d):this['_image']&&(this['_image'][_0x29f381]!==_0x46cb1d&&this['_dirtyBatc'+'h'](),this['_image'][_0x29f381]=_0x46cb1d);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=ot['prototype']['_sync'],this['entity']['setPositio'+'n']=ot['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=ot['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x5de7b7,_0x57f033,_0x2d167b){if(!this['element']['screen']){ot['prototype']['setPositio'+'n']['call'](this,_0x5de7b7,_0x57f033,_0x2d167b);return;}_0x5de7b7 instanceof I?qd['copy'](_0x5de7b7):qd['set'](_0x5de7b7,_0x57f033,_0x2d167b),this['getWorldTr'+'ansform'](),fg['copy'](this['element']['_screenToW'+'orld'])['invert'](),fg['transformP'+'oint'](qd,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x23ef74,_0x1ebeeb,_0x42fd1f){_0x23ef74 instanceof I?this['localPosit'+'ion']['copy'](_0x23ef74):this['localPosit'+'ion']['set'](_0x23ef74,_0x1ebeeb,_0x42fd1f);const _0x53fdb3=this['element'],_0x1a7ecd=this['localPosit'+'ion'],_0x169765=_0x53fdb3['_pivot'];_0x53fdb3['_margin']['x']=_0x1a7ecd['x']-_0x53fdb3['_calculate'+'dWidth']*_0x169765['x'],_0x53fdb3['_margin']['z']=_0x53fdb3['_localAnch'+'or']['z']-_0x53fdb3['_localAnch'+'or']['x']-_0x53fdb3['_calculate'+'dWidth']-_0x53fdb3['_margin']['x'],_0x53fdb3['_margin']['y']=_0x1a7ecd['y']-_0x53fdb3['_calculate'+'dHeight']*_0x169765['y'],_0x53fdb3['_margin']['w']=_0x53fdb3['_localAnch'+'or']['w']-_0x53fdb3['_localAnch'+'or']['y']-_0x53fdb3['_calculate'+'dHeight']-_0x53fdb3['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0x291120=this['element'],_0x174752=_0x291120['screen'];if(_0x174752){if(_0x291120['_anchorDir'+'ty']){let _0x54febd=0x1*0xd0c+-0x258d+0x2b9*0x9,_0x59d430=-0x4d0+0x26f3+-0x2223,_0x48942c=-0x10*0x1+0x1208+-0x11f8,_0x2aaf36=0xebb+-0x984*0x2+0x44e;if(this['_parent']&&this['_parent']['element'])_0x54febd=this['_parent']['element']['calculated'+'Width'],_0x59d430=this['_parent']['element']['calculated'+'Height'],_0x48942c=this['_parent']['element']['pivot']['x'],_0x2aaf36=this['_parent']['element']['pivot']['y'];else{const _0x1ea4db=_0x174752['screen']['resolution'];_0x54febd=_0x1ea4db['x']/_0x174752['screen']['scale'],_0x59d430=_0x1ea4db['y']/_0x174752['screen']['scale'];}_0x291120['_anchorTra'+'nsform']['setTransla'+'te'](_0x54febd*(_0x291120['anchor']['x']-_0x48942c),-(_0x59d430*(_0x2aaf36-_0x291120['anchor']['y'])),0x81+-0x8*-0x1f+-0x179),_0x291120['_anchorDir'+'ty']=!(0x19e3+-0x23f3*0x1+0x1*0xa11),_0x291120['_calculate'+'LocalAncho'+'rs']();}_0x291120['_sizeDirty']&&_0x291120['_calculate'+'Size'](!(-0x233e+-0x51*0x13+0x2942),!(0x1f5*-0x13+0xe1e+-0xb89*-0x2));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x108eb6=this['localPosit'+'ion'],_0x4e8399=_0x291120['_pivot'];_0x291120['_margin']['x']=_0x108eb6['x']-_0x291120['_calculate'+'dWidth']*_0x4e8399['x'],_0x291120['_margin']['z']=_0x291120['_localAnch'+'or']['z']-_0x291120['_localAnch'+'or']['x']-_0x291120['_calculate'+'dWidth']-_0x291120['_margin']['x'],_0x291120['_margin']['y']=_0x108eb6['y']-_0x291120['_calculate'+'dHeight']*_0x4e8399['y'],_0x291120['_margin']['w']=_0x291120['_localAnch'+'or']['w']-_0x291120['_localAnch'+'or']['y']-_0x291120['_calculate'+'dHeight']-_0x291120['_margin']['y'],this['_dirtyLoca'+'l']=!(0x5fa*0x2+-0x172+-0xa81);}if(!_0x174752){this['_dirtyWorl'+'d']&&(_0x291120['_cornersDi'+'rty']=!(0x1000+0x23f4+-0x33f4),_0x291120['_canvasCor'+'nersDirty']=!(-0x1b06+0xb5*0x1f+0x1*0x51b),_0x291120['_worldCorn'+'ersDirty']=!(0x1ddf+-0xd21*-0x1+0x1580*-0x2)),ot['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0x291120['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0x291120['_anchorTra'+'nsform']):_0x291120['_screenToW'+'orld']['copy'](_0x291120['_anchorTra'+'nsform']),_0x291120['_modelTran'+'sform']['mul2'](_0x291120['_screenToW'+'orld'],this['localTrans'+'form']),_0x174752){_0x291120['_screenToW'+'orld']['mul2'](_0x174752['screen']['_screenMat'+'rix'],_0x291120['_screenToW'+'orld']),_0x174752['screen']['screenSpac'+'e']||_0x291120['_screenToW'+'orld']['mul2'](_0x174752['worldTrans'+'form'],_0x291120['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0x291120['_screenToW'+'orld'],this['localTrans'+'form']);const _0xdc2ff4=_0x291120['_parentWor'+'ldTransfor'+'m'];_0xdc2ff4['setIdentit'+'y']();const _0x3246de=this['_parent'];_0x3246de&&_0x3246de['element']&&_0x3246de!==_0x174752&&(_s['setTRS'](I['ZERO'],_0x3246de['getLocalRo'+'tation'](),_0x3246de['getLocalSc'+'ale']()),_0xdc2ff4['mul2'](_0x3246de['element']['_parentWor'+'ldTransfor'+'m'],_s));const _0xe37142=vi;_0xe37142['set'](0xb12+-0x2664*-0x1+-0x3176,0x1803+0x1*-0x159e+-0x1*0x265,this['localPosit'+'ion']['z']);const _0x5c8204=zL;_0x5c8204['set'](_0x291120['_absLeft']+_0x291120['_pivot']['x']*_0x291120['calculated'+'Width'],_0x291120['_absBottom']+_0x291120['_pivot']['y']*_0x291120['calculated'+'Height'],-0x886*0x2+-0x8*-0x21d+-0x2*-0x12),_s['setTransla'+'te'](-_0x5c8204['x'],-_0x5c8204['y'],-_0x5c8204['z']),eh['setTRS'](_0xe37142,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),th['setTransla'+'te'](_0x5c8204['x'],_0x5c8204['y'],_0x5c8204['z']),_0x291120['_screenTra'+'nsform']['mul2'](_0x291120['_parentWor'+'ldTransfor'+'m'],th)['mul'](eh)['mul'](_s),_0x291120['_cornersDi'+'rty']=!(0x102a+-0xedb+-0x14f),_0x291120['_canvasCor'+'nersDirty']=!(0x25f7+0x87+-0x267e),_0x291120['_worldCorn'+'ersDirty']=!(-0x1383+-0x7f2*0x3+0x2b59);}else this['worldTrans'+'form']['copy'](_0x291120['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(-0x689+-0x295+-0x91f*-0x1);}}['_onInsert'](_0x2c8565){const _0x3af1e5=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x3af1e5['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x42bd19=this['entity'];for(;_0x42bd19;){const _0x55b692=_0x42bd19['parent'];if((_0x55b692===null||_0x55b692['screen'])&&_0x42bd19['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),M['trace'](Rs,'register\x20p'+'rerender'));const _0x8bd40f=this['system']['_prerender']['indexOf'](this['entity']);_0x8bd40f>=-0xe24+-0x552+0x1376&&this['system']['_prerender']['splice'](_0x8bd40f,0x1*-0x1beb+-0x12ee*-0x1+0x2*0x47f),this['system']['_prerender']['indexOf'](_0x42bd19)<-0x180b+-0x23fe+0x3c09*0x1&&this['system']['_prerender']['push'](_0x42bd19),M['trace'](Rs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x42bd19['name']);}_0x42bd19=_0x55b692;}}['_onPrerend'+'er'](){for(let _0x533386=0x2507+0x1*-0xc9d+-0x186a;_0x533386<this['system']['_prerender']['length'];_0x533386++){const _0x5c0034=this['system']['_prerender'][_0x533386];M['trace'](Rs,'prerender\x20'+'from:\x20'+_0x5c0034['name']),_0x5c0034['element']&&_0x5c0034['element']['syncMask'](-0x42a+-0x3b0*0x1+-0x1*-0x7db);}this['system']['_prerender']['length']=0x11*-0x4d+0x2e*0x2e+0x1*-0x327;}['_bindScree'+'n'](_0x22935b){_0x22935b['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0xc125d2){_0xc125d2['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x5d5d26){this['screen']&&this['screen']!==_0x5d5d26&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x19d4de=this['screen'];this['screen']=_0x5d5d26,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x19d4de),this['_anchorDir'+'ty']=!(0xc7*-0x4+0x3*0x8d7+0x1cd*-0xd);const _0x58393b=this['entity']['children'];for(let _0x437537=0x1bf0+0xba0+-0x2790,_0x4b43bd=_0x58393b['length'];_0x437537<_0x4b43bd;_0x437537++)_0x58393b[_0x437537]['element']&&_0x58393b[_0x437537]['element']['_updateScr'+'een'](_0x5d5d26);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x1cd716){const _0x18a10b=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x18a10b['mask'],_0x1cd716);}['_setMasked'+'By'](_0x38d00e){const _0x915f4e=this['_image']||this['_text'];if(_0x38d00e){const _0x507733=_0x38d00e['element']['_image']['_maskRef'];M['trace'](Rs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x507733),_0x915f4e==null||_0x915f4e['_setStenci'+'l'](new ai({'ref':_0x507733,'func':Lh})),this['_maskedBy']=_0x38d00e;}else M['trace'](Rs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x915f4e==null||_0x915f4e['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x36b054,_0x518bfe){var _0xc80c84,_0x3f768e;if(_0x36b054){if(this['_setMasked'+'By'](_0x36b054),this['mask']){const _0x4ef59d=_0x36b054['element']['_image']['_maskRef'],_0x35a0a1=new ai({'ref':_0x4ef59d,'func':Lh,'zpass':j0});this['_image']['_setStenci'+'l'](_0x35a0a1),this['_image']['_maskRef']=_0x518bfe,_0x518bfe++,M['trace'](Rs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x35a0a1['ref']+(0x107f+0x5*-0x619+0xdff))),M['trace'](Rs,'depth++\x20to'+':\x20',_0x518bfe),_0x36b054=this['entity'];}const _0x1a4b37=this['entity']['children'];for(let _0x3f39ba=-0x4ae+-0x14ae+0xcae*0x2,_0x2ae7d9=_0x1a4b37['length'];_0x3f39ba<_0x2ae7d9;_0x3f39ba++)(_0xc80c84=_0x1a4b37[_0x3f39ba]['element'])==null||_0xc80c84['_updateMas'+'k'](_0x36b054,_0x518bfe);this['mask']&&_0x518bfe--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x5d3e15=new ai({'ref':_0x518bfe,'func':Ni,'zpass':q0});this['_image']['_setStenci'+'l'](_0x5d3e15),this['_image']['_maskRef']=_0x518bfe,_0x518bfe++,M['trace'](Rs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x5d3e15['ref']),M['trace'](Rs,'depth++\x20to'+':\x20',_0x518bfe),_0x36b054=this['entity'];}const _0x20326d=this['entity']['children'];for(let _0x5148dc=0x1*-0xacc+-0x1*-0x1ed5+0x1409*-0x1,_0x8d70cf=_0x20326d['length'];_0x5148dc<_0x8d70cf;_0x5148dc++)(_0x3f768e=_0x20326d[_0x5148dc]['element'])==null||_0x3f768e['_updateMas'+'k'](_0x36b054,_0x518bfe);this['mask']&&_0x518bfe--;}}['_parseUpTo'+'Screen'](){const _0x280588={'screen':null,'mask':null};let _0x1aa79e=this['entity']['_parent'];for(;_0x1aa79e&&!_0x1aa79e['screen'];)_0x1aa79e['element']&&_0x1aa79e['element']['mask']&&(_0x280588['mask']||(_0x280588['mask']=_0x1aa79e)),_0x1aa79e=_0x1aa79e['parent'];return _0x1aa79e&&_0x1aa79e['screen']&&(_0x280588['screen']=_0x1aa79e),_0x280588;}['_onScreenR'+'esize'](_0x1567c5){this['_anchorDir'+'ty']=!(-0x4fd*0x5+-0x2535+-0x172*-0x2b),this['_cornersDi'+'rty']=!(0x127e+-0x66d+-0xc11),this['_worldCorn'+'ersDirty']=!(-0xf2c+0x796+0x796),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x1567c5);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x1648dd=0xa8b+-0x1251*-0x1+-0x18f4*0x1,_0x1eb6c2=-0xf05+0xad3*0x2+-0x2b9;const _0x59cef7=this['entity']['_parent'];if(_0x59cef7&&_0x59cef7['element'])_0x1648dd=_0x59cef7['element']['calculated'+'Width'],_0x1eb6c2=_0x59cef7['element']['calculated'+'Height'];else{if(this['screen']){const _0x57a0bf=this['screen']['screen']['resolution'],_0x3a3ffa=this['screen']['screen']['scale'];_0x1648dd=_0x57a0bf['x']/_0x3a3ffa,_0x1eb6c2=_0x57a0bf['y']/_0x3a3ffa;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x1648dd,this['_anchor']['y']*_0x1eb6c2,this['_anchor']['z']*_0x1648dd,this['_anchor']['w']*_0x1eb6c2);}['getOffsetP'+'osition'](_0x5037d4,_0x55a975){const _0xa7da74=this['entity']['getLocalPo'+'sition']()['clone']();return _0xa7da74['x']+=_0x5037d4,_0xa7da74['y']+=_0x55a975,this['_screenToW'+'orld']['transformP'+'oint'](_0xa7da74,_0xa7da74),_0xa7da74;}['onLayersCh'+'anged'](_0x2e977c,_0x5c3218){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x2e977c['off']('add',this['onLayerAdd'+'ed'],this),_0x2e977c['off']('remove',this['onLayerRem'+'oved'],this),_0x5c3218['on']('add',this['onLayerAdd'+'ed'],this),_0x5c3218['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x57a190){this['layers']['indexOf'](_0x57a190['id'])<-0x1904+-0x23fa+-0x1e7f*-0x2||(this['_image']?_0x57a190['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x57a190['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x4d87fb){this['layers']['indexOf'](_0x4d87fb['id'])<0x2039+0x1a5f+-0x3a98||(this['_image']?_0x4d87fb['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x4d87fb['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x2b5b54;const _0x5e5ee8=this['system']['app']['scene'],_0x27814b=_0x5e5ee8['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x5e5ee8['on']('set:layers',this['onLayersCh'+'anged'],this),_0x27814b&&(this['_evtLayerA'+'dded']=_0x27814b['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x27814b['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=-0x2c0+0x1764+-0x4*0x529&&((_0x2b5b54=this['system']['app']['batcher'])==null||_0x2b5b54['insert'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x1c76f2,_0x3280b6,_0x75d3e0,_0x540a49;const _0x3ed077=this['system']['app']['scene']['layers'];(_0x1c76f2=this['_evtLayers'+'Changed'])==null||_0x1c76f2['off'](),this['_evtLayers'+'Changed']=null,_0x3ed077&&((_0x3280b6=this['_evtLayerA'+'dded'])==null||_0x3280b6['off'](),this['_evtLayerA'+'dded']=null,(_0x75d3e0=this['_evtLayerR'+'emoved'])==null||_0x75d3e0['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=-0x47*0x83+0x354+-0x4b7*-0x7&&((_0x540a49=this['system']['app']['batcher'])==null||_0x540a49['remove'](mt['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x1d5d1,_0x5352c7){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x5ed0df=this['_absRight']-this['_absLeft'],_0xaa8d4a=this['_absTop']-this['_absBottom'];_0x1d5d1?this['_setWidth'](_0x5ed0df):this['_setCalcul'+'atedWidth'](_0x5ed0df,!(-0x105+0x229c+0x6*-0x599)),_0x5352c7?this['_setHeight'](_0xaa8d4a):this['_setCalcul'+'atedHeight'](_0xaa8d4a,!(-0xc1f+0x2b7+0x49*0x21));const _0x2fff80=this['entity']['getLocalPo'+'sition']();_0x2fff80['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x2fff80['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x2fff80),this['_sizeDirty']=!(-0x6*-0x2ca+-0x1d6*-0xb+-0x17*0x19b);}['_setWidth'](_0x45e5df){this['_width']=_0x45e5df,this['_setCalcul'+'atedWidth'](_0x45e5df,!(-0x1590+-0x24ea+0x551*0xb)),this['fire']('set:width',this['_width']);}['_setHeight'](_0x1c0f28){this['_height']=_0x1c0f28,this['_setCalcul'+'atedHeight'](_0x1c0f28,!(0xb55+0x11*-0xb3+0x8f)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x1c2ea2,_0x217df9){if(!(Math['abs'](_0x1c2ea2-this['_calculate'+'dWidth'])<=0x1*0x256b+0x26eb+-0x4c56+0.0001)){if(this['_calculate'+'dWidth']=_0x1c2ea2,this['entity']['_dirtifyLo'+'cal'](),_0x217df9){const _0x2a1205=this['entity']['getLocalPo'+'sition'](),_0x533d60=this['_pivot'];this['_margin']['x']=_0x2a1205['x']-this['_calculate'+'dWidth']*_0x533d60['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x3dcc68,_0x47c265){if(!(Math['abs'](_0x3dcc68-this['_calculate'+'dHeight'])<=0x4f*0x31+0x2146+0x3065*-0x1+0.0001)){if(this['_calculate'+'dHeight']=_0x3dcc68,this['entity']['_dirtifyLo'+'cal'](),_0x47c265){const _0x17957f=this['entity']['getLocalPo'+'sition'](),_0x916a40=this['_pivot'];this['_margin']['y']=_0x17957f['y']-this['_calculate'+'dHeight']*_0x916a40['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x1b6f01=this['entity']['_children'];for(let _0x5a3f3c=-0x116*0x2+0x4e*0x3+0xe*0x17,_0x8c306d=_0x1b6f01['length'];_0x5a3f3c<_0x8c306d;_0x5a3f3c++)_0x1b6f01[_0x5a3f3c]['element']&&(_0x1b6f01[_0x5a3f3c]['element']['_anchorDir'+'ty']=!(0x11*0xb2+0x11f7+-0x131*0x19),_0x1b6f01[_0x5a3f3c]['element']['_sizeDirty']=!(-0x242c+0x11*-0xf1+0x342d));}['addModelTo'+'Layers'](_0xca50d3){this['_addedMode'+'ls']['push'](_0xca50d3);for(let _0x1da7af=-0xdaf*-0x2+-0x54*-0x51+0x1*-0x35f2;_0x1da7af<this['layers']['length'];_0x1da7af++){const _0x5c95ee=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x1da7af]);_0x5c95ee&&_0x5c95ee['addMeshIns'+'tances'](_0xca50d3['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x3a95a4){const _0x1c5b0d=this['_addedMode'+'ls']['indexOf'](_0x3a95a4);_0x1c5b0d>=-0xae8+-0x6c5*-0x4+0x6*-0x2b2&&this['_addedMode'+'ls']['splice'](_0x1c5b0d,0x118e+-0x2*0xbe4+0x63b);for(let _0x318376=-0x1389+-0x5*-0x17c+0x7*0x1bb;_0x318376<this['layers']['length'];_0x318376++){const _0x42a771=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x318376]);_0x42a771&&_0x42a771['removeMesh'+'Instances'](_0x3a95a4['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x5ef934=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x5ef934&&(this['_maskOffse'+'t']=-0x22af+-0x26bd+0x496c+0.5,this['_offsetRea'+'dAt']=_0x5ef934);const _0x35596f=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=0x22a8+0x161+-0x2409+0.001,_0x35596f;}['isVisibleF'+'orCamera'](_0x223933){let _0x249980,_0x4adeb8,_0x111e21,_0x57d9e1;if(this['maskedBy']){const _0x41eb3e=this['maskedBy']['element']['screenCorn'+'ers'];_0x249980=Math['min'](Math['min'](_0x41eb3e[0x1*0x2320+0x1046+-0x3366]['x'],_0x41eb3e[0xb29*0x1+-0xc7*0x8+-0x2*0x278]['x']),Math['min'](_0x41eb3e[0x9c6+0x130+-0x2*0x57a]['x'],_0x41eb3e[-0xc36*-0x1+0x84*0x1f+-0x965*0x3]['x'])),_0x4adeb8=Math['max'](Math['max'](_0x41eb3e[-0x5fd+-0x30+0x62d]['x'],_0x41eb3e[-0x626*0x6+-0x3*0x639+0x3790]['x']),Math['max'](_0x41eb3e[0x661*-0x4+0x132c+0x65a]['x'],_0x41eb3e[-0x64b+0x1fc0+-0x1972]['x'])),_0x57d9e1=Math['min'](Math['min'](_0x41eb3e[0x627+-0x21c5+0x1b9e]['y'],_0x41eb3e[0x17*0x2b+-0x2*-0x1387+-0x2aea]['y']),Math['min'](_0x41eb3e[0x3*0x577+0x24e0+-0x3543]['y'],_0x41eb3e[0xaf1+-0x46b*-0x1+-0xf59*0x1]['y'])),_0x111e21=Math['max'](Math['max'](_0x41eb3e[-0x129a*-0x1+0x1*-0x13d9+0xb*0x1d]['y'],_0x41eb3e[0x1ca0+0x72e*0x4+-0x3957]['y']),Math['max'](_0x41eb3e[-0x13c7*-0x1+0x1e6f+-0x3234]['y'],_0x41eb3e[-0xea1+0x1*0x701+-0x7a3*-0x1]['y']));}else{const _0x291518=this['system']['app']['graphicsDe'+'vice']['width'],_0x4113a0=this['system']['app']['graphicsDe'+'vice']['height'],_0x448299=_0x223933['_rect']['z']*_0x291518,_0x5807a=_0x223933['_rect']['w']*_0x4113a0;_0x249980=_0x223933['_rect']['x']*_0x291518,_0x4adeb8=_0x249980+_0x448299,_0x111e21=(0x18*-0x134+-0x25d6+0x163d*0x3-_0x223933['_rect']['y'])*_0x4113a0,_0x57d9e1=_0x111e21-_0x5807a;}const _0x163bb6=this['screenCorn'+'ers'],_0x294792=Math['min'](Math['min'](_0x163bb6[-0x1021*0x1+0x20f0+-0x10cf*0x1]['x'],_0x163bb6[-0x1132+-0xc0*0x30+0x3533]['x']),Math['min'](_0x163bb6[-0x879*0x3+0x1*0x80d+0x1160]['x'],_0x163bb6[-0x982+-0x2451+0x2*0x16eb]['x'])),_0x3d02a8=Math['max'](Math['max'](_0x163bb6[0x164c+-0x100+-0x553*0x4]['x'],_0x163bb6[-0x33c+0x1905+-0x15c8]['x']),Math['max'](_0x163bb6[0xce4+-0x2272+0x1590]['x'],_0x163bb6[-0x8c5*-0x2+-0x3*-0x6+-0x1199]['x'])),_0x65171d=Math['min'](Math['min'](_0x163bb6[0x1f18+-0x423*0x4+-0xe8c*0x1]['y'],_0x163bb6[-0x23ca+-0x2441*-0x1+0x3b*-0x2]['y']),Math['min'](_0x163bb6[0x1f*0xf7+-0x1*0x554+-0x3*0x831]['y'],_0x163bb6[0x102*0x1+0xb7f+-0xc7e]['y'])),_0x293a0c=Math['max'](Math['max'](_0x163bb6[-0x16cc+-0x1e0d+-0x53*-0xa3]['y'],_0x163bb6[-0x8d1+0x1*-0x19ff+0x22d1*0x1]['y']),Math['max'](_0x163bb6[-0x2007*-0x1+0x2498+0x449d*-0x1]['y'],_0x163bb6[-0x1fb7+-0x1402+0x33bc]['y']));return!(_0x3d02a8<_0x249980||_0x294792>_0x4adeb8||_0x65171d>_0x111e21||_0x293a0c<_0x57d9e1);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(-0x18be+-0x353+0x1c12);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(0x95*-0x3b+0xaf3+0x1765);}['_dirtyBatc'+'h'](){var _0x487799;this['batchGroup'+'Id']!==-(0x11d1+-0xd*-0x92+-0x2*0xc9d)&&((_0x487799=this['system']['app']['batcher'])==null||_0x487799['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(is,'EVENT_MOUS'+'EDOWN','mousedown'),h(is,'EVENT_MOUS'+'EUP','mouseup'),h(is,'EVENT_MOUS'+'EENTER','mouseenter'),h(is,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(is,'EVENT_MOUS'+'EMOVE','mousemove'),h(is,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(is,'EVENT_CLIC'+'K','click'),h(is,'EVENT_TOUC'+'HSTART','touchstart'),h(is,'EVENT_TOUC'+'HEND','touchend'),h(is,'EVENT_TOUC'+'HMOVE','touchmove'),h(is,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class VL{constructor(){this['enabled']=!(-0x3*-0x762+-0xd27+0x7*-0x149);}}const GL=['enabled'];class HL extends lt{constructor(_0x4c93bf){super(_0x4c93bf),this['id']='element',this['ComponentT'+'ype']=is,this['DataType']=VL,this['schema']=GL,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x4c93bf['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':hs,'name':'element-sy'+'stem'});const _0x4f9daa=this['_defaultTe'+'xture']['lock'](),_0x565d7f=new Uint8Array(-0x243d+-0x917*-0x1+0x1b2a);_0x565d7f[0x11fe+0x714+0x1*-0x1912]=-0xc43+0x25c6+-0x1884,_0x565d7f[-0xfb*-0x10+0xf5e+0x1f0d*-0x1]=0x22*0x47+-0x629*-0x4+-0x2113,_0x565d7f[0x5*0x59+0x57e*-0x4+-0x143d*-0x1]=-0x174f+0x343*-0x2+-0xf6a*-0x2,_0x565d7f[-0x602*-0x5+-0x978+-0x148f]=-0x1a68+0x1*0x14aa+-0xf*-0x73,_0x4f9daa['set'](_0x565d7f),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x4e84d8,_0xe42d97,_0x13f413){_0x4e84d8['_beingInit'+'ialized']=!(0x2137+-0x2*0x98f+-0xe19),_0xe42d97['anchor']!==void(0x17*-0x19b+-0xc4*0xe+0x2fa5)&&(_0xe42d97['anchor']instanceof ae?_0x4e84d8['anchor']['copy'](_0xe42d97['anchor']):_0x4e84d8['anchor']['set'](_0xe42d97['anchor'][0xd5d+0x560+-0x3*0x63f],_0xe42d97['anchor'][0x1d*-0xa9+-0x1751+0x2a77*0x1],_0xe42d97['anchor'][0x33*0xbf+-0x1d0e+-0x8fd],_0xe42d97['anchor'][0x2c6+-0x1381*0x2+-0x243f*-0x1])),_0xe42d97['pivot']!==void(0x1c2c+0x122a+-0x1*0x2e56)&&(_0xe42d97['pivot']instanceof J?_0x4e84d8['pivot']['copy'](_0xe42d97['pivot']):_0x4e84d8['pivot']['set'](_0xe42d97['pivot'][-0x126a*0x1+0x22*-0x121+0x38cc],_0xe42d97['pivot'][-0x1eea+-0xd*-0x1fc+0x51f]));const _0x23f920=Math['abs'](_0x4e84d8['anchor']['x']-_0x4e84d8['anchor']['z'])>-0x2*-0x9ad+-0x17*-0xa9+-0x15*0x1a5+0.001,_0x5ea201=Math['abs'](_0x4e84d8['anchor']['y']-_0x4e84d8['anchor']['w'])>0xe*0x158+0x77b+-0x7f*0x35+0.001;let _0xe63373=!(0x8ac+0x2ca*0x7+-0x7*0x407),_0x3ea2b4;_0xe42d97['margin']!==void(0x21bb+0x5*0xa7+-0x24fe)&&(_0xe42d97['margin']instanceof ae?_0x4e84d8['margin']['copy'](_0xe42d97['margin']):_0x4e84d8['_margin']['set'](_0xe42d97['margin'][0x10*0x242+0x184*-0xa+-0xb*0x1e8],_0xe42d97['margin'][0x2385+-0x103*-0x14+-0x6f8*0x8],_0xe42d97['margin'][-0x1db*0x2+0xbbb+-0x803],_0xe42d97['margin'][-0x1c45+-0x466+0x20ae]),_0xe63373=!(0xabc+0x5c1*-0x2+0xc6)),_0xe42d97['left']!==void(-0x9d*-0x12+-0x14ce+0x9c4)&&(_0x4e84d8['_margin']['x']=_0xe42d97['left'],_0xe63373=!(-0x1*-0x18f7+0x670+-0x1f67*0x1)),_0xe42d97['bottom']!==void(0x1*0xb47+0x1*-0x23f6+0x18af*0x1)&&(_0x4e84d8['_margin']['y']=_0xe42d97['bottom'],_0xe63373=!(-0x240d*0x1+0x14b*0xd+-0x6*-0x335)),_0xe42d97['right']!==void(0x1*-0x17d8+-0x99d+0x2175)&&(_0x4e84d8['_margin']['z']=_0xe42d97['right'],_0xe63373=!(0x10d9+-0x782+-0x31d*0x3)),_0xe42d97['top']!==void(0x1282+-0x1*-0x238+-0x14ba)&&(_0x4e84d8['_margin']['w']=_0xe42d97['top'],_0xe63373=!(0xce3+-0x987+-0x35c)),_0xe63373&&(_0x4e84d8['margin']=_0x4e84d8['_margin']);let _0x6538d4=!(0x2627+0x863*-0x1+-0x1dc3);_0xe42d97['width']!==void(0xe58+0xb69*0x2+-0x47*0x86)&&!_0x23f920?_0x4e84d8['width']=_0xe42d97['width']:_0x23f920&&(_0x6538d4=!(-0x1b62*0x1+-0x11b4+0x2d16)),_0xe42d97['height']!==void(0x169*-0x3+-0x1ff5+0x2430)&&!_0x5ea201?_0x4e84d8['height']=_0xe42d97['height']:_0x5ea201&&(_0x6538d4=!(-0x5*0x557+-0x2093+0x3b46)),_0x6538d4&&(_0x4e84d8['anchor']=_0x4e84d8['anchor']),_0xe42d97['enabled']!==void(-0x19a5+0x157e+0x427)&&(_0x4e84d8['enabled']=_0xe42d97['enabled']),_0xe42d97['useInput']!==void(-0x5c0+-0x4*-0x7ea+-0x19e8)&&(_0x4e84d8['useInput']=_0xe42d97['useInput']),_0xe42d97['fitMode']!==void(-0x3d*0x61+0x416+-0x1*-0x1307)&&(_0x4e84d8['fitMode']=_0xe42d97['fitMode']),_0x4e84d8['batchGroup'+'Id']=_0xe42d97['batchGroup'+'Id']===void(-0xaf8+-0x35*-0x7f+-0xf53)||_0xe42d97['batchGroup'+'Id']===null?-(0x25a3*-0x1+0x5c*-0x8+0x2884):_0xe42d97['batchGroup'+'Id'],_0xe42d97['layers']&&Array['isArray'](_0xe42d97['layers'])&&(_0x4e84d8['layers']=_0xe42d97['layers']['slice'](-0x17bc*-0x1+-0x10ff+-0x6bd)),_0xe42d97['type']!==void(0x3*-0xa58+0x2*-0xc72+0x4a9*0xc)&&(_0x4e84d8['type']=_0xe42d97['type']),_0x4e84d8['type']===qf?(_0xe42d97['rect']!==void(0x21c7+0x121e*0x1+-0x33e5)&&(_0x4e84d8['rect']=_0xe42d97['rect']),_0xe42d97['color']!==void(0x2*-0x17b+0x17cd+-0x14d7)&&(_0x3ea2b4=_0xe42d97['color'],_0x3ea2b4 instanceof ie||(_0x3ea2b4=new ie(_0xe42d97['color'][-0x8b*0x43+0x1c7e+-0x3*-0x2a1],_0xe42d97['color'][-0xbd0+-0x2dc+-0x11*-0xdd],_0xe42d97['color'][-0x11d0+-0x37*-0x4a+0x1ec])),_0x4e84d8['color']=_0x3ea2b4),_0xe42d97['opacity']!==void(0xa55+-0x7*0xf9+-0x1*0x386)&&(_0x4e84d8['opacity']=_0xe42d97['opacity']),_0xe42d97['textureAss'+'et']!==void(0xbad+-0x1da5+0x11f8)&&(_0x4e84d8['textureAss'+'et']=_0xe42d97['textureAss'+'et']),_0xe42d97['texture']&&(_0x4e84d8['texture']=_0xe42d97['texture']),_0xe42d97['spriteAsse'+'t']!==void(0x14*-0xe+0xed2+0x2*-0x6dd)&&(_0x4e84d8['spriteAsse'+'t']=_0xe42d97['spriteAsse'+'t']),_0xe42d97['sprite']&&(_0x4e84d8['sprite']=_0xe42d97['sprite']),_0xe42d97['spriteFram'+'e']!==void(0x1523+0x16d8+-0x9*0x4e3)&&(_0x4e84d8['spriteFram'+'e']=_0xe42d97['spriteFram'+'e']),_0xe42d97['pixelsPerU'+'nit']!==void(-0x1267+-0xa45+0x1cac)&&_0xe42d97['pixelsPerU'+'nit']!==null&&(_0x4e84d8['pixelsPerU'+'nit']=_0xe42d97['pixelsPerU'+'nit']),_0xe42d97['materialAs'+'set']!==void(-0x596+0x38f*-0x6+0x1af0)&&(_0x4e84d8['materialAs'+'set']=_0xe42d97['materialAs'+'set']),_0xe42d97['material']&&(_0x4e84d8['material']=_0xe42d97['material']),_0xe42d97['mask']!==void(0xece+-0x1*-0x1c2b+-0xc1*0x39)&&(_0x4e84d8['mask']=_0xe42d97['mask'])):_0x4e84d8['type']===sv&&(_0xe42d97['autoWidth']!==void(0x2f*-0x3d+0x1*-0x17ac+0x22df)&&(_0x4e84d8['autoWidth']=_0xe42d97['autoWidth']),_0xe42d97['autoHeight']!==void(0x1*0x1ef1+0xd50+0x2c41*-0x1)&&(_0x4e84d8['autoHeight']=_0xe42d97['autoHeight']),_0xe42d97['rtlReorder']!==void(-0x42c*0x6+-0xfc3+0x28cb*0x1)&&(_0x4e84d8['rtlReorder']=_0xe42d97['rtlReorder']),_0xe42d97['unicodeCon'+'verter']!==void(0x2*0xb3c+0x1e64+0x1*-0x34dc)&&(_0x4e84d8['unicodeCon'+'verter']=_0xe42d97['unicodeCon'+'verter']),_0xe42d97['text']!==null&&_0xe42d97['text']!==void(0x141*0x1d+-0x2337*-0x1+-0x4*0x11e5)?_0x4e84d8['text']=_0xe42d97['text']:_0xe42d97['key']!==null&&_0xe42d97['key']!==void(0xab5+0x2*0x2d0+-0x1055)&&(_0x4e84d8['key']=_0xe42d97['key']),_0xe42d97['color']!==void(0x35f+0x1199*-0x1+0xe3a)&&(_0x3ea2b4=_0xe42d97['color'],_0x3ea2b4 instanceof ie||(_0x3ea2b4=new ie(_0x3ea2b4[0x1ba1+0x4*-0x4eb+-0x7f5],_0x3ea2b4[-0x1143+-0x26af+-0x37f3*-0x1],_0x3ea2b4[0x1430+-0x1177+-0x2b7*0x1])),_0x4e84d8['color']=_0x3ea2b4),_0xe42d97['opacity']!==void(0xc04+-0x186c+0x2*0x634)&&(_0x4e84d8['opacity']=_0xe42d97['opacity']),_0xe42d97['spacing']!==void(-0x1f*0x88+0x2a*0x48+0x4a8)&&(_0x4e84d8['spacing']=_0xe42d97['spacing']),_0xe42d97['fontSize']!==void(-0xf6c+0xfd2+-0x66)&&(_0x4e84d8['fontSize']=_0xe42d97['fontSize'],_0xe42d97['lineHeight']||(_0x4e84d8['lineHeight']=_0xe42d97['fontSize'])),_0xe42d97['lineHeight']!==void(0xf*0x92+0x15ea+-0x1e78)&&(_0x4e84d8['lineHeight']=_0xe42d97['lineHeight']),_0xe42d97['maxLines']!==void(-0x15a9+-0x20ba+-0x7c5*-0x7)&&(_0x4e84d8['maxLines']=_0xe42d97['maxLines']),_0xe42d97['wrapLines']!==void(0x23b*0x1+-0x246e+0x2233)&&(_0x4e84d8['wrapLines']=_0xe42d97['wrapLines']),_0xe42d97['minFontSiz'+'e']!==void(0x2630+0x2000+0x4*-0x118c)&&(_0x4e84d8['minFontSiz'+'e']=_0xe42d97['minFontSiz'+'e']),_0xe42d97['maxFontSiz'+'e']!==void(-0x4a6+0xd31+-0x3*0x2d9)&&(_0x4e84d8['maxFontSiz'+'e']=_0xe42d97['maxFontSiz'+'e']),_0xe42d97['autoFitWid'+'th']&&(_0x4e84d8['autoFitWid'+'th']=_0xe42d97['autoFitWid'+'th']),_0xe42d97['autoFitHei'+'ght']&&(_0x4e84d8['autoFitHei'+'ght']=_0xe42d97['autoFitHei'+'ght']),_0xe42d97['fontAsset']!==void(0x1581+0x4c6*0x1+-0x1a47)&&(_0x4e84d8['fontAsset']=_0xe42d97['fontAsset']),_0xe42d97['font']!==void(0x3d*-0x97+0x1aa4+0x957)&&(_0x4e84d8['font']=_0xe42d97['font']),_0xe42d97['alignment']!==void(-0x791+-0x2010+0x27a1)&&(_0x4e84d8['alignment']=_0xe42d97['alignment']),_0xe42d97['outlineCol'+'or']!==void(-0x1*0x5d5+-0x14b+0x720)&&(_0x4e84d8['outlineCol'+'or']=_0xe42d97['outlineCol'+'or']),_0xe42d97['outlineThi'+'ckness']!==void(-0x61c+-0x14cd+0x1ae9)&&(_0x4e84d8['outlineThi'+'ckness']=_0xe42d97['outlineThi'+'ckness']),_0xe42d97['shadowColo'+'r']!==void(-0x2dc+-0x9*0x6+0x312)&&(_0x4e84d8['shadowColo'+'r']=_0xe42d97['shadowColo'+'r']),_0xe42d97['shadowOffs'+'et']!==void(-0x197b+0x55*-0x2f+-0x2916*-0x1)&&(_0x4e84d8['shadowOffs'+'et']=_0xe42d97['shadowOffs'+'et']),_0xe42d97['enableMark'+'up']!==void(-0x7*-0x21+-0x476*0x5+-0x1567*-0x1)&&(_0x4e84d8['enableMark'+'up']=_0xe42d97['enableMark'+'up']));const _0x4e893e=_0x4e84d8['_parseUpTo'+'Screen']();_0x4e893e['screen']&&_0x4e84d8['_updateScr'+'een'](_0x4e893e['screen']),super['initialize'+'ComponentD'+'ata'](_0x4e84d8,_0xe42d97,_0x13f413),_0x4e84d8['_beingInit'+'ialized']=!(-0x1*0x1753+-0xc9d+0x1*0x23f1),_0x4e84d8['type']===qf&&_0x4e84d8['_image']['_meshDirty']&&_0x4e84d8['_image']['_updateMes'+'h'](_0x4e84d8['_image']['mesh']);}['onAddCompo'+'nent'](_0x49cdfb,_0x34247c){_0x49cdfb['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x1b98a3,_0x2f458c){_0x2f458c['onRemove']();}['cloneCompo'+'nent'](_0x4c9ee5,_0x208b16){const _0x26bf07=_0x4c9ee5['element'],_0xe0d50f={'enabled':_0x26bf07['enabled'],'width':_0x26bf07['width'],'height':_0x26bf07['height'],'anchor':_0x26bf07['anchor']['clone'](),'pivot':_0x26bf07['pivot']['clone'](),'margin':_0x26bf07['margin']['clone'](),'alignment':_0x26bf07['alignment']&&_0x26bf07['alignment']['clone']()||_0x26bf07['alignment'],'autoWidth':_0x26bf07['autoWidth'],'autoHeight':_0x26bf07['autoHeight'],'type':_0x26bf07['type'],'rect':_0x26bf07['rect']&&_0x26bf07['rect']['clone']()||_0x26bf07['rect'],'rtlReorder':_0x26bf07['rtlReorder'],'unicodeConverter':_0x26bf07['unicodeCon'+'verter'],'materialAsset':_0x26bf07['materialAs'+'set'],'material':_0x26bf07['material'],'color':_0x26bf07['color']&&_0x26bf07['color']['clone']()||_0x26bf07['color'],'opacity':_0x26bf07['opacity'],'textureAsset':_0x26bf07['textureAss'+'et'],'texture':_0x26bf07['texture'],'spriteAsset':_0x26bf07['spriteAsse'+'t'],'sprite':_0x26bf07['sprite'],'spriteFrame':_0x26bf07['spriteFram'+'e'],'pixelsPerUnit':_0x26bf07['pixelsPerU'+'nit'],'spacing':_0x26bf07['spacing'],'lineHeight':_0x26bf07['lineHeight'],'wrapLines':_0x26bf07['wrapLines'],'layers':_0x26bf07['layers'],'fontSize':_0x26bf07['fontSize'],'minFontSize':_0x26bf07['minFontSiz'+'e'],'maxFontSize':_0x26bf07['maxFontSiz'+'e'],'autoFitWidth':_0x26bf07['autoFitWid'+'th'],'autoFitHeight':_0x26bf07['autoFitHei'+'ght'],'maxLines':_0x26bf07['maxLines'],'fontAsset':_0x26bf07['fontAsset'],'font':_0x26bf07['font'],'useInput':_0x26bf07['useInput'],'fitMode':_0x26bf07['fitMode'],'batchGroupId':_0x26bf07['batchGroup'+'Id'],'mask':_0x26bf07['mask'],'outlineColor':_0x26bf07['outlineCol'+'or']&&_0x26bf07['outlineCol'+'or']['clone']()||_0x26bf07['outlineCol'+'or'],'outlineThickness':_0x26bf07['outlineThi'+'ckness'],'shadowColor':_0x26bf07['shadowColo'+'r']&&_0x26bf07['shadowColo'+'r']['clone']()||_0x26bf07['shadowColo'+'r'],'shadowOffset':_0x26bf07['shadowOffs'+'et']&&_0x26bf07['shadowOffs'+'et']['clone']()||_0x26bf07['shadowOffs'+'et'],'enableMarkup':_0x26bf07['enableMark'+'up']};return _0x26bf07['key']!==void(-0x3*0x32b+-0x2*-0xdb3+-0x11e5)&&_0x26bf07['key']!==null?_0xe0d50f['key']=_0x26bf07['key']:_0xe0d50f['text']=_0x26bf07['text'],this['addCompone'+'nt'](_0x208b16,_0xe0d50f);}['getTextEle'+'mentMateri'+'al'](_0x1f36f1,_0x3a4e12,_0x3e2f6f){const _0x35e577=(_0x1f36f1&&0xf67+0x1101+-0x2067)|(_0x3a4e12&&-0x41d+0x10c1*-0x1+-0x4*-0x538)|(_0x3e2f6f&&-0x511*0x5+-0x1258+-0x2bb1*-0x1);let _0x133850=this['_defaultTe'+'xtMaterial'+'s'][_0x35e577];if(_0x133850)return _0x133850;let _0x588166='TextMateri'+'al';return _0x133850=new ws(),_0x3a4e12?(_0x133850['msdfMap']=this['_defaultTe'+'xture'],_0x133850['msdfTextAt'+'tribute']=_0x3e2f6f,_0x133850['emissive']['set'](0xe8b+0x39d+-0x1227,-0x1dbd+-0x1*0x1c9c+-0x7*-0x856,0x154d+-0xa7b+-0x39b*0x3)):(_0x588166='Bitmap'+_0x588166,_0x133850['emissive']['set'](-0x1195+0x19a7*-0x1+0x2b3d,0x20aa*0x1+-0x4*0x8aa+-0x49*-0x7,0x2034+-0x4f*-0x56+0x557*-0xb),_0x133850['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x133850['opacityMap']=this['_defaultTe'+'xture'],_0x133850['opacityMap'+'Channel']='a'),_0x1f36f1&&(_0x588166='ScreenSpac'+'e'+_0x588166,_0x133850['depthTest']=!(-0xb47+-0x292*0x1+0xdda)),_0x133850['name']='default'+_0x588166,_0x133850['useLightin'+'g']=!(-0x1f21+0x2*-0xb65+0xcb*0x44),_0x133850['useTonemap']=!(-0x5af*0x2+-0x4*0x15d+0x10d3),_0x133850['useFog']=!(-0x1769+-0x36f+0x1ad9),_0x133850['useSkybox']=!(-0x10c9*0x2+0xd23+0x1470),_0x133850['diffuse']['set'](-0x12ff+-0x18b8+0x2bb7,0x772*0x4+0x1d81*-0x1+-0x47,-0x6b*0x28+0xe6f+-0x5*-0x75),_0x133850['opacity']=0x1*-0x1fab+-0x4*-0x3fb+0xfbf+0.5,_0x133850['blendType']=bn,_0x133850['depthWrite']=!(0x157*0x11+0x192*-0x7+-0x2*0x5e4),_0x133850['emissiveVe'+'rtexColor']=!(0x1553+0x142b+-0x297e),_0x133850['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x35e577]=_0x133850,_0x133850;}['_createBas'+'eImageMate'+'rial'](){const _0x54f838=new ws();return _0x54f838['diffuse']['set'](0x2*-0x79d+0x949*-0x1+-0x5*-0x4e7,-0x2593*0x1+-0x1*-0x2287+-0x104*-0x3,0x353+0x2b*-0xc3+-0x1d6e*-0x1),_0x54f838['emissive']['set'](-0x1*0x9d3+0xdb*-0x2+0xb8a,-0x12af+-0x1d86+-0x1012*-0x3,-0x26dd+-0x177b*-0x1+-0x521*-0x3),_0x54f838['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x54f838['opacityMap']=this['_defaultTe'+'xture'],_0x54f838['opacityMap'+'Channel']='a',_0x54f838['useLightin'+'g']=!(0x6b3+-0x3*-0x7f7+0x1e97*-0x1),_0x54f838['useTonemap']=!(-0xeed*-0x2+-0x1eee*0x1+-0x1*-0x115),_0x54f838['useFog']=!(-0x1f43+0x13d+-0x1e07*-0x1),_0x54f838['useSkybox']=!(-0xaa8+0x22b1+0x2*-0xc04),_0x54f838['blendType']=bn,_0x54f838['depthWrite']=!(0x17*0x142+-0x1989+0x3e*-0xe),_0x54f838;}['getImageEl'+'ementMater'+'ial'](_0x2d4ab9,_0x3bff96,_0x307550,_0xb9facf){return _0x2d4ab9?_0x3bff96?_0x307550?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Et,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(-0x1a6e+0x73c+0x1333),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x1eaf+-0x20ad+0x3f5d,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(-0x3*-0x1ed+0x4*-0x557+0xf96),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(-0x5fc*-0x2+0x3aa+-0x1*0xfa1),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(0xfb*-0x5+0x5*-0x203+0xef7),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x1*-0x63a+0xb26*-0x2+-0x1*-0x1013),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0xb9facf?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=At,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(-0x2272+0x19e5+0x88e),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=-0x2489+-0x1636+-0x1d60*-0x2,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(-0xa58+0x1a9b+-0x1042),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(-0x1f9+-0xf0d+-0x1107*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(0x2*0x327+-0x1778+-0xf*-0x125),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x1712+-0x1b8+-0x1559),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(0x18a7*-0x1+-0xfd6*-0x2+-0x704),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=-0x30b+-0x1a*0xd4+0x2*0xc4a,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x178d+-0x1a41+0x2b5),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(0x1eac+0xce4+0x2b8f*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(-0x1*0x16de+0xeb5+-0x26*-0x37),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(0x15e3+0x4*0x518+-0x2a42),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x307550?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Et,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(0x1ef4+-0x347*0x9+0x4*-0x5d),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0xb9facf?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=At,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(-0x1877*0x1+0x1*0x2604+-0xd8c),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(-0x9a8+0x1a00+0x1057*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x3bff96?_0x307550?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Et,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=-0xfe8*0x2+0xd86*0x2+0x4c5,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(0x12b2+0x1225*0x1+-0x1*0x24d6),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(-0x2f*-0x75+-0x9dc+-0x5cf*0x2),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(-0xc*-0x251+-0x1ed0+0x305*0x1),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(0x92b*0x2+0x13ec+0x7*-0x577),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0xb9facf?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=At,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=0xc2f*-0x2+-0xe*-0x108+0x9ef,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(-0x175b+0x15f4+0xb4*0x2),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0x511+0x81*-0x1f+-0x1*-0x14b1),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(0x1ec3+-0xe6*-0x1+-0x1fa8),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(0x107*0x3+-0x127d*0x1+0xf69),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=-0x4*-0x22a+0x1254+0x1*-0x1afb,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(0x7*-0x12c+-0x7ad+0xfe2),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(-0x20b0+-0x1a4c+0x3afd),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(-0x28c+0x1127+-0xe9a),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(0x185f+-0x2220+-0x2*-0x4e1),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x307550?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Et,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0xb9facf?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=At,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x4fbb47){this['_unicodeCo'+'nverter']=_0x4fbb47;}['registerRt'+'lReorder'](_0x137867){this['_rtlReorde'+'r']=_0x137867;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Ra='free',Oa='limited',Fa='locked',WL=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class km extends we{constructor(_0x4e1612,_0x289311){super(_0x4e1612,_0x289311),M['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(0x1c42+-0x264a+-0xa08*-0x1),this['_linearMot'+'ionX']=Fa,this['_linearLim'+'itsX']=new J(0xcbf+-0x27*0x1c+-0xa7*0xd,0x2f+0x119c*0x2+0x3ef*-0x9),this['_linearSpr'+'ingX']=!(-0x7f*-0x23+0x152d+0x7b5*-0x5),this['_linearSti'+'ffnessX']=0x10f7*0x1+0x1f85+-0x307c,this['_linearDam'+'pingX']=-0x67f*-0x5+0x2181+-0x41fb,this['_linearEqu'+'ilibriumX']=-0x6fe+0x2141+-0x1a43,this['_linearMot'+'ionY']=Fa,this['_linearLim'+'itsY']=new J(0x1*0x199+-0x2*0x564+0x92f*0x1,-0x2e*-0x62+0x727+-0x18c3),this['_linearSpr'+'ingY']=!(0x11d2+0x9bb+0x1b8c*-0x1),this['_linearSti'+'ffnessY']=0x289*-0x4+-0x1b63+-0x2e3*-0xd,this['_linearDam'+'pingY']=-0x1*0x2635+-0x2095+0x46cb,this['_linearEqu'+'ilibriumY']=0x801+-0x196d+0x116c,this['_linearMot'+'ionZ']=Fa,this['_linearLim'+'itsZ']=new J(-0xa7*0x7+0x1*0xdbe+-0x57*0x1b,0x7*-0xb6+0x1*-0x21eb+0x26e5),this['_linearSpr'+'ingZ']=!(-0x1fc9+-0x1bb7+0x3b81),this['_linearSti'+'ffnessZ']=0x67f*0x2+0xb3*0x13+-0x1a47,this['_linearDam'+'pingZ']=-0xd*-0x80+-0x125*-0x5+0x30e*-0x4,this['_linearEqu'+'ilibriumZ']=0x197a+-0x1229*-0x1+-0x2ba3,this['_angularMo'+'tionX']=Fa,this['_angularLi'+'mitsX']=new J(-0xcb3*0x1+0x8dc+-0x1*-0x3d7,-0x53*0x4f+0x7af*-0x2+0xda9*0x3),this['_angularSp'+'ringX']=!(-0x4d0+0xe*0xa7+0x41*-0x11),this['_angularSt'+'iffnessX']=-0x1*0x1d29+-0x69e*0x1+0x23c7,this['_angularDa'+'mpingX']=-0xb4*0x4+0x8b3*-0x1+0xb84,this['_angularEq'+'uilibriumX']=-0x1*0x15ed+0x1ecc+-0x8df*0x1,this['_angularMo'+'tionY']=Fa,this['_angularLi'+'mitsY']=new J(0x1b03+0xa3*-0x2d+-0x1c*-0xf,0xac+0x25e+0x30a*-0x1),this['_angularSp'+'ringY']=!(0x76*-0x3d+0x1c17+0x8),this['_angularSt'+'iffnessY']=-0x53c+0xc81+-0x745,this['_angularDa'+'mpingY']=0x929*0x3+-0x1*0x391+-0x17e9,this['_angularEq'+'uilibriumY']=0x9*-0x39b+-0x2ad*-0x7+0xdb8,this['_angularMo'+'tionZ']=Fa,this['_angularLi'+'mitsZ']=new J(-0x76e+0x1e04+-0xb4b*0x2,-0x545*0x2+0x12c1*-0x1+0x1d4b),this['_angularSp'+'ringZ']=!(0x6da+0xc*0x117+-0x13ed),this['_angularEq'+'uilibriumZ']=0x2*-0x320+-0x3*0x29e+0xe1a,this['_angularDa'+'mpingZ']=0x1*-0x18e+-0xcc6+0xe55,this['_angularSt'+'iffnessZ']=0xd*0x1a2+-0x128b+-0x2af,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x7972f5){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x7972f5,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x494845){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x494845,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0xe3077f){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0xe3077f&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0xe3077f),this['_breakForc'+'e']=_0xe3077f);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x1f92fe){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x1f92fe,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x27274d){this['_angularLi'+'mitsX']['equals'](_0x27274d)||(this['_angularLi'+'mitsX']['copy'](_0x27274d),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x1552f1){this['_angularMo'+'tionX']!==_0x1552f1&&(this['_angularMo'+'tionX']=_0x1552f1,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0xfedb0e){this['_angularLi'+'mitsY']['equals'](_0xfedb0e)||(this['_angularLi'+'mitsY']['copy'](_0xfedb0e),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x4e7f02){this['_angularMo'+'tionY']!==_0x4e7f02&&(this['_angularMo'+'tionY']=_0x4e7f02,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x47d820){this['_angularLi'+'mitsZ']['equals'](_0x47d820)||(this['_angularLi'+'mitsZ']['copy'](_0x47d820),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0xa80022){this['_angularMo'+'tionZ']!==_0xa80022&&(this['_angularMo'+'tionZ']=_0xa80022,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0xc72cdf){this['_linearLim'+'itsX']['equals'](_0xc72cdf)||(this['_linearLim'+'itsX']['copy'](_0xc72cdf),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x272d52){this['_linearMot'+'ionX']!==_0x272d52&&(this['_linearMot'+'ionX']=_0x272d52,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x17af74){this['_linearLim'+'itsY']['equals'](_0x17af74)||(this['_linearLim'+'itsY']['copy'](_0x17af74),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x1feb6d){this['_linearMot'+'ionY']!==_0x1feb6d&&(this['_linearMot'+'ionY']=_0x1feb6d,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x5a8914){this['_linearLim'+'itsZ']['equals'](_0x5a8914)||(this['_linearLim'+'itsZ']['copy'](_0x5a8914),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x1c661f){this['_linearMot'+'ionZ']!==_0x1c661f&&(this['_linearMot'+'ionZ']=_0x1c661f,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x33190e,_0xc33b80){const _0x4fed13=_0x33190e['getTransla'+'tion'](),_0x452b6b=new le();_0x452b6b['setFromMat'+'4'](_0x33190e);const _0x4c0191=new Ammo['btVector3'](_0x4fed13['x'],_0x4fed13['y'],_0x4fed13['z']),_0x292725=new Ammo['btQuaterni'+'on'](_0x452b6b['x'],_0x452b6b['y'],_0x452b6b['z'],_0x452b6b['w']);_0xc33b80['setOrigin'](_0x4c0191),_0xc33b80['setRotatio'+'n'](_0x292725),Ammo['destroy'](_0x4c0191),Ammo['destroy'](_0x292725);}['_updateAng'+'ularLimits'](){const _0x5b85a0=this['_constrain'+'t'];if(_0x5b85a0){let _0x3a3949,_0x3317df,_0x3ebf55,_0x339aea,_0x2186bb,_0xcaf74f;this['_angularMo'+'tionX']===Oa?(_0x3a3949=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x339aea=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Ra?(_0x3a3949=0x244+0x2e3*0x1+-0x293*0x2,_0x339aea=-0x1df1+-0x13d2+0x1*0x31c3):_0x3a3949=_0x339aea=0x61*-0x8+0x1c8b+-0x1*0x1983,this['_angularMo'+'tionY']===Oa?(_0x3317df=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x2186bb=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Ra?(_0x3317df=-0x210e*0x1+0x1cc*0x11+0x283,_0x2186bb=0x2*0x563+0x1d35+0x7ff*-0x5):_0x3317df=_0x2186bb=-0xd88+0x1*0x1b7+-0xb*-0x113,this['_angularMo'+'tionZ']===Oa?(_0x3ebf55=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0xcaf74f=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Ra?(_0x3ebf55=-0x1*0xb2f+0x2042*0x1+-0x3e*0x57,_0xcaf74f=-0x197b+0x4*0x8f5+-0xa59):_0x3ebf55=_0xcaf74f=0x17c1+0x1*0x2119+0x38da*-0x1;const _0x479603=new Ammo['btVector3'](_0x3a3949,_0x3317df,_0x3ebf55);_0x5b85a0['setAngular'+'LowerLimit'](_0x479603),_0x479603['setValue'](_0x339aea,_0x2186bb,_0xcaf74f),_0x5b85a0['setAngular'+'UpperLimit'](_0x479603),Ammo['destroy'](_0x479603);}}['_updateLin'+'earLimits'](){const _0x1de555=this['_constrain'+'t'];if(_0x1de555){let _0x14ea42,_0x1d03a1,_0x2cac7d,_0x10f785,_0x1ca23a,_0x4a68cf;this['_linearMot'+'ionX']===Oa?(_0x14ea42=this['_linearLim'+'itsX']['x'],_0x10f785=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Ra?(_0x14ea42=-0x6aa+0xc48+-0x59d,_0x10f785=-0x2*0x71b+0x785+0x6b1):_0x14ea42=_0x10f785=-0x153*0x13+-0x61*0x2d+-0x709*-0x6,this['_linearMot'+'ionY']===Oa?(_0x1d03a1=this['_linearLim'+'itsY']['x'],_0x1ca23a=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Ra?(_0x1d03a1=-0x4bf*-0x8+-0x2b9+-0x15b*0x1a,_0x1ca23a=0xc9d*0x3+-0x177*0xa+0x1*-0x1731):_0x1d03a1=_0x1ca23a=0x1*-0x6bc+-0x1*0x1e73+0x252f,this['_linearMot'+'ionZ']===Oa?(_0x2cac7d=this['_linearLim'+'itsZ']['x'],_0x4a68cf=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Ra?(_0x2cac7d=-0xedc+-0x1998+0x2875,_0x4a68cf=0x232c+-0x11*0xc7+-0x15f5):_0x2cac7d=_0x4a68cf=-0xa*0x15a+-0xb5d+0x3*0x84b;const _0x5c8ada=new Ammo['btVector3'](_0x14ea42,_0x1d03a1,_0x2cac7d);_0x1de555['setLinearL'+'owerLimit'](_0x5c8ada),_0x5c8ada['setValue'](_0x10f785,_0x1ca23a,_0x4a68cf),_0x1de555['setLinearU'+'pperLimit'](_0x5c8ada),Ammo['destroy'](_0x5c8ada);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x5be526=new te(),_0x27550b=this['_entityA']['rigidbody']['body'];_0x27550b['activate']();const _0x23b4eb=this['entity']['getWorldTr'+'ansform'](),_0x85f26a=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x5be526['mul2'](_0x85f26a,_0x23b4eb);const _0xd69483=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x5be526,_0xd69483),this['_entityB']&&this['_entityB']['rigidbody']){const _0x587688=this['_entityB']['rigidbody']['body'];_0x587688['activate']();const _0x3b468e=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x5be526['mul2'](_0x3b468e,_0x23b4eb);const _0x1b6d78=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x5be526,_0x1b6d78),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x27550b,_0x587688,_0xd69483,_0x1b6d78,!this['_enableCol'+'lision']),Ammo['destroy'](_0x1b6d78);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x27550b,_0xd69483,!this['_enableCol'+'lision']);Ammo['destroy'](_0xd69483);const _0x5655d8=['X','Y','Z','X','Y','Z'];for(let _0x3f7af8=-0x1a6b+-0x62c+0x2097;_0x3f7af8<0xb3a+-0x38*-0x7e+-0x26c4;_0x3f7af8++){const _0xd6b43a=_0x3f7af8<-0x2227+-0x1cfa+-0x6*-0xa86?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x3f7af8,this[_0xd6b43a+'Spring'+_0x5655d8[_0x3f7af8]]),this['_constrain'+'t']['setDamping'](_0x3f7af8,this[_0xd6b43a+'Damping'+_0x5655d8[_0x3f7af8]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x3f7af8,this[_0xd6b43a+('Equilibriu'+'m')+_0x5655d8[_0x3f7af8]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x3f7af8,this[_0xd6b43a+'Stiffness'+_0x5655d8[_0x3f7af8]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x466032){for(const _0x2d2aea of WL)_0x466032['hasOwnProp'+'erty'](_0x2d2aea)&&(_0x466032[_0x2d2aea]instanceof J?this['_'+_0x2d2aea]['copy'](_0x466032[_0x2d2aea]):this['_'+_0x2d2aea]=_0x466032[_0x2d2aea]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x52a783,_0x2a688c,_0xeeb86d){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const $L={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x521573=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x144749=>{['X','Y','Z']['forEach'](_0x33996e=>{const _0x1ffa44=_0x521573+_0x144749+_0x33996e,_0x85c8e='_'+_0x1ffa44;let _0x4c0144=_0x521573==='linear'?0xce*0x13+-0xbe3+0x43*-0xd:-0xa7*-0x21+0xb*-0x211+-0x1*-0x137;_0x33996e==='Y'&&(_0x4c0144+=0x1a21*0x1+0x1*0x115+0x5*-0x571),_0x33996e==='Z'&&(_0x4c0144+=-0x35c+-0xa02+-0x6b0*-0x2),Object['defineProp'+'erty'](km['prototype'],_0x1ffa44,{'get':function(){return this[_0x85c8e];},'set':function(_0x5c32f2){this[_0x85c8e]!==_0x5c32f2&&(this[_0x85c8e]=_0x5c32f2,this['_constrain'+'t'][$L[_0x144749]](_0x4c0144,_0x5c32f2));}});});});});class XL{constructor(){this['enabled']=!(-0x1*0x1fcc+-0x15+-0x1fe1*-0x1);}}const tu=['enabled'];class qL extends lt{constructor(_0x47551f){super(_0x47551f),this['id']='joint',this['app']=_0x47551f,this['ComponentT'+'ype']=km,this['DataType']=XL,this['schema']=tu;}['initialize'+'ComponentD'+'ata'](_0x8b899e,_0x2d7554,_0x5402cb){_0x8b899e['initFromDa'+'ta'](_0x2d7554),super['initialize'+'ComponentD'+'ata'](_0x8b899e,_0x2d7554,tu);}}we['_buildAcce'+'ssors'](km['prototype'],tu);class ov extends we{constructor(){super(...arguments),h(this,'_minWidth',0x2376+0x133e+-0x36b4),h(this,'_minHeight',0x14f6+-0x1327*0x1+-0x1cf),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',0x63b+-0x38*-0x2a+0x1*-0xf6b),h(this,'_fitHeight'+'Proportion',-0x13b1+-0x20dd*0x1+0x348e),h(this,'_excludeFr'+'omLayout',!(-0x7c*-0x29+-0xa15+0x12*-0x8b));}set['minWidth'](_0x1a56d6){_0x1a56d6!==this['_minWidth']&&(this['_minWidth']=_0x1a56d6,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x129bcd){_0x129bcd!==this['_minHeight']&&(this['_minHeight']=_0x129bcd,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x50289f){_0x50289f!==this['_maxWidth']&&(this['_maxWidth']=_0x50289f,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x59f544){_0x59f544!==this['_maxHeight']&&(this['_maxHeight']=_0x59f544,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x1044f9){_0x1044f9!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x1044f9,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x4f547c){_0x4f547c!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x4f547c,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x2f6177){_0x2f6177!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x2f6177,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class jL{constructor(){this['enabled']=!(0x1106+0x1*-0x346+-0xb*0x140);}}const lv=['enabled'];class YL extends lt{constructor(_0x538485){super(_0x538485),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=ov,this['DataType']=jL,this['schema']=lv;}['initialize'+'ComponentD'+'ata'](_0x202430,_0x4d5771,_0x6d3334){_0x4d5771['enabled']!==void(0x2083+0x164+-0x21e7)&&(_0x202430['enabled']=_0x4d5771['enabled']),_0x4d5771['minWidth']!==void(-0x1*-0x755+0x7b6*0x3+-0x1e77)&&(_0x202430['minWidth']=_0x4d5771['minWidth']),_0x4d5771['minHeight']!==void(-0x2*0x14+0x165f+0x2f*-0x79)&&(_0x202430['minHeight']=_0x4d5771['minHeight']),_0x4d5771['maxWidth']!==void(-0x2271+0x1f53+0x31e)&&(_0x202430['maxWidth']=_0x4d5771['maxWidth']),_0x4d5771['maxHeight']!==void(-0x7*-0x399+-0x1d0e+0x3df)&&(_0x202430['maxHeight']=_0x4d5771['maxHeight']),_0x4d5771['fitWidthPr'+'oportion']!==void(0x2eb*-0xd+0x2655+-0x66)&&(_0x202430['fitWidthPr'+'oportion']=_0x4d5771['fitWidthPr'+'oportion']),_0x4d5771['fitHeightP'+'roportion']!==void(-0x5*0x16e+-0xe*-0x1b1+-0x1088)&&(_0x202430['fitHeightP'+'roportion']=_0x4d5771['fitHeightP'+'roportion']),_0x4d5771['excludeFro'+'mLayout']!==void(0x1347*0x2+-0xbf*-0x2b+0xd*-0x56f)&&(_0x202430['excludeFro'+'mLayout']=_0x4d5771['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x202430,_0x4d5771,_0x6d3334);}['cloneCompo'+'nent'](_0xcaeaa3,_0x50d852){const _0x208070=_0xcaeaa3['layoutchil'+'d'];return this['addCompone'+'nt'](_0x50d852,{'enabled':_0x208070['enabled'],'minWidth':_0x208070['minWidth'],'minHeight':_0x208070['minHeight'],'maxWidth':_0x208070['maxWidth'],'maxHeight':_0x208070['maxHeight'],'fitWidthProportion':_0x208070['fitWidthPr'+'oportion'],'fitHeightProportion':_0x208070['fitHeightP'+'roportion'],'excludeFromLayout':_0x208070['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](ov['prototype'],lv);const su=0x3eb*-0x2+-0x1599+0x1d6f,KL=-0x26f3+-0x7*-0x22b+0x17c7,ug=0x27d*-0xc+-0x8*0x459+0x677*0xa,ZL=-0x1*-0x95d+0x2439+0x3*-0xf31,ac={};ac[be]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},ac[qe]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const Um={};Um[be]=qe,Um[qe]=be;const QL={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},es={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ts=new J();function hv(_0x53a9a7){let _0x89b0e2;const _0x30a034=ac[_0x53a9a7],_0x17e846=ac[Um[_0x53a9a7]];function _0xba96f4(_0x41b183,_0x4e09db){return-_0x4e09db[_0x30a034['size']]*_0x41b183['pivot'][_0x30a034['axis']];}function _0x390af(_0x5c34ee,_0x16cc06){return-_0x16cc06[_0x17e846['size']]*_0x5c34ee['pivot'][_0x17e846['axis']];}function _0x2ba0b6(_0xfa4d66,_0x5f3d6c){return _0x5f3d6c[_0x30a034['size']]*(-0x1a56+-0x1d75+0x2*0x1be6-_0xfa4d66['pivot'][_0x30a034['axis']]);}function _0xa4d750(_0x1cd484,_0x540639){_0x1cd484=_0x1cd484['filter'](_0x300347),_0x89b0e2=_0x540639,ts['x']=_0x89b0e2['containerS'+'ize']['x']-_0x89b0e2['padding']['x']-_0x89b0e2['padding']['z'],ts['y']=_0x89b0e2['containerS'+'ize']['y']-_0x89b0e2['padding']['y']-_0x89b0e2['padding']['w'],_0x85ca67(_0x1cd484);const _0x1745c7=_0x11361a(_0x4e3c8b(_0x1cd484)),_0x12f6a7=_0x31c3b1(_0x1745c7,_0x17a524(_0x1745c7)),_0x3a53df=_0x2d3dda(_0x1745c7,_0x12f6a7);return _0x30e2a3(_0x1745c7,_0x12f6a7,_0x3a53df),_0x16bd8c(_0x1745c7,_0x12f6a7,_0x3a53df),_0x2e0bbf(_0x1745c7);}function _0x300347(_0x1a6ca9){const _0x59b5a6=_0x1a6ca9['entity']['layoutchil'+'d'];return!_0x59b5a6||!_0x59b5a6['enabled']||!_0x59b5a6['excludeFro'+'mLayout'];}function _0x85ca67(_0x267be3){for(let _0x2865dd=-0x458+0xb*0x333+-0x1ed9;_0x2865dd<_0x267be3['length'];++_0x2865dd){const _0xaa7824=_0x267be3[_0x2865dd],_0x2b6768=_0xaa7824['anchor'];(_0x2b6768['x']!==0x2401+-0x34+0x263*-0xf||_0x2b6768['y']!==-0x4*0x275+-0x152b+0x1*0x1eff||_0x2b6768['z']!==0x1977+-0x7b3+-0x11c4||_0x2b6768['w']!==-0x2053*-0x1+0x24a1+-0x44f4)&&(_0xaa7824['anchor']=ae['ZERO']);}}function _0x4e3c8b(_0xb88fab){if(!_0x89b0e2['wrap'])return[_0xb88fab];const _0x516ac3=[[]],_0x42c071=_0x36569f(_0xb88fab);let _0x949dc4=-0x1923*-0x1+0x1f1a+0x3*-0x12bf;const _0x386d67=_0x89b0e2[_0x30a034['fitting']]===ug;for(let _0x220171=-0x3d*-0x67+0x1*-0x1fc7+-0x73c*-0x1;_0x220171<_0xb88fab['length'];++_0x220171){_0x516ac3[_0x516ac3['length']-(0x29*0xd1+-0x104+-0x2074)]['length']>0x1*-0xfb5+0xf69+0x4c&&(_0x949dc4+=_0x89b0e2['spacing'][_0x30a034['axis']]);const _0x5f59ec=_0x42c071[_0x220171][_0x30a034['size']];_0x949dc4+=_0x5f59ec,!_0x386d67&&_0x949dc4>ts[_0x30a034['axis']]&&_0x516ac3[_0x516ac3['length']-(0xe*-0x4e+-0xf03+0x1348)]['length']!==0x766*0x2+-0xd47+-0x185&&(_0x949dc4=_0x5f59ec,_0x516ac3['push']([])),_0x516ac3[_0x516ac3['length']-(-0xe64+0x6*-0x16b+0x16e7)]['push'](_0xb88fab[_0x220171]),_0x386d67&&_0x949dc4>ts[_0x30a034['axis']]&&_0x220171!==_0xb88fab['length']-(0x1e2b+-0x1afb*0x1+-0x32f)&&(_0x949dc4=-0x643+0x1*-0x1126+0x1cd*0xd,_0x516ac3['push']([]));}return _0x516ac3;}function _0x11361a(_0x330d49){const _0x436016=_0x89b0e2['orientatio'+'n']===be&&_0x89b0e2['reverseX']||_0x89b0e2['orientatio'+'n']===qe&&_0x89b0e2['reverseY'],_0x6a9de3=_0x89b0e2['orientatio'+'n']===be&&_0x89b0e2['reverseY']||_0x89b0e2['orientatio'+'n']===qe&&_0x89b0e2['reverseX'];if(_0x436016){for(let _0x2b8411=-0xc4d+0x11*0x14+0xaf9;_0x2b8411<_0x330d49['length'];++_0x2b8411)_0x436016&&_0x330d49[_0x2b8411]['reverse']();}return _0x6a9de3&&_0x330d49['reverse'](),_0x330d49;}function _0x17a524(_0x341ae8){const _0x5a4aa3=[];for(let _0x5a6827=-0x1*-0xa39+-0x1a01+0xfc8;_0x5a6827<_0x341ae8['length'];++_0x5a6827){const _0x61a81b=_0x341ae8[_0x5a6827],_0x46c260=_0x36569f(_0x61a81b),_0x56b380=_0x54e961(_0x46c260,_0x30a034),_0x209482=_0x1330a7(_0x89b0e2[_0x30a034['fitting']],_0x56b380,ts[_0x30a034['axis']]);_0x209482===es['APPLY_STRE'+'TCHING']?_0x5c72d8(_0x46c260,_0x56b380,_0x30a034):_0x209482===es['APPLY_SHRI'+'NKING']&&_0x417715(_0x46c260,_0x56b380,_0x30a034),_0x5a4aa3['push'](_0x46c260);}return _0x5a4aa3;}function _0x31c3b1(_0x49ee69,_0x1f71ea){const _0x14d990=[],_0x247336=[];for(let _0x352f6e=-0x1861+-0x4a*-0x56+-0x7b;_0x352f6e<_0x49ee69['length'];++_0x352f6e){const _0x2ee62e=_0x49ee69[_0x352f6e];_0x2ee62e['largestEle'+'ment']=null,_0x2ee62e['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x1523b1=-0x3*-0x3cf+-0xa3e*0x3+0x1*0x134d;_0x1523b1<_0x2ee62e['length'];++_0x1523b1){const _0x39692f=_0x1f71ea[_0x352f6e][_0x1523b1];_0x39692f[_0x17e846['size']]>_0x2ee62e['largestSiz'+'e'][_0x17e846['size']]&&(_0x2ee62e['largestEle'+'ment']=_0x2ee62e[_0x1523b1],_0x2ee62e['largestSiz'+'e']=_0x39692f);}_0x14d990['push'](_0x2ee62e['largestEle'+'ment']),_0x247336['push'](_0x2ee62e['largestSiz'+'e']);}const _0x59cdbc=_0x54e961(_0x247336,_0x17e846),_0x2e9667=_0x1330a7(_0x89b0e2[_0x17e846['fitting']],_0x59cdbc,ts[_0x17e846['axis']]);_0x2e9667===es['APPLY_STRE'+'TCHING']?_0x5c72d8(_0x247336,_0x59cdbc,_0x17e846):_0x2e9667===es['APPLY_SHRI'+'NKING']&&_0x417715(_0x247336,_0x59cdbc,_0x17e846);for(let _0x409dd0=-0x1f50+-0x1737*0x1+0x3687;_0x409dd0<_0x49ee69['length'];++_0x409dd0){const _0x1c8970=_0x49ee69[_0x409dd0];for(let _0x4597dd=0xdb6+-0x307+-0xaaf;_0x4597dd<_0x1c8970['length'];++_0x4597dd){const _0x5dadd7=_0x1f71ea[_0x409dd0][_0x4597dd],_0x385de1=_0x5dadd7[_0x17e846['size']],_0x3ee378=_0x49ee69['length']===-0x691+-0x11f9+0x67*0x3d?ts[_0x17e846['axis']]:_0x1c8970['largestSiz'+'e'][_0x17e846['size']],_0x11eff8=_0x1330a7(_0x89b0e2[_0x17e846['fitting']],_0x385de1,_0x3ee378);_0x11eff8===es['APPLY_STRE'+'TCHING']?_0x5dadd7[_0x17e846['size']]=Math['min'](_0x3ee378,_0x5dadd7[_0x17e846['maxSize']]):_0x11eff8===es['APPLY_SHRI'+'NKING']&&(_0x5dadd7[_0x17e846['size']]=Math['max'](_0x3ee378,_0x5dadd7[_0x17e846['minSize']]));}}return _0x1f71ea;}function _0x1330a7(_0xbdb139,_0x41dccd,_0x4f7d60){switch(_0xbdb139){case su:return es['NONE'];case KL:return _0x41dccd<_0x4f7d60?es['APPLY_STRE'+'TCHING']:es['NONE'];case ug:return _0x41dccd>=_0x4f7d60?es['APPLY_SHRI'+'NKING']:es['NONE'];case ZL:return _0x41dccd<_0x4f7d60?es['APPLY_STRE'+'TCHING']:es['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0xbdb139);}}function _0x54e961(_0x1ca34b,_0x5e81db){const _0x56e09e=_0x225bea(_0x1ca34b,_0x5e81db['size']),_0x4ba6c3=(_0x1ca34b['length']-(-0x1*0x19fc+-0x1*0x95f+0x235c))*_0x89b0e2['spacing'][_0x5e81db['axis']];return _0x56e09e+_0x4ba6c3;}function _0x5c72d8(_0xaec24a,_0x18a08e,_0x50eddd){const _0x2fc295=_0x52ccc4(_0xaec24a,_0x50eddd['maxSize']),_0x3075a5=_0x3ce719(_0xaec24a,_0x50eddd['fittingPro'+'portion']),_0x465999=_0x54dd6c(_0x3075a5,_0x2fc295);let _0x4d08ab=ts[_0x50eddd['axis']]-_0x18a08e;for(let _0x5bb6dd=0x743+-0x1b43+0x20*0xa0;_0x5bb6dd<_0xaec24a['length'];++_0x5bb6dd){const _0x3b7f47=_0x2fc295[_0x5bb6dd],_0x1210b9=_0x5dfc8b(_0x3b7f47,_0x4d08ab,_0x3075a5,_0x465999),_0x13f8cf=_0xaec24a[_0x3b7f47][_0x50eddd['size']]+_0x1210b9,_0x3fd1b5=_0xaec24a[_0x3b7f47][_0x50eddd['maxSize']],_0x3fb7eb=Math['min'](_0x13f8cf,_0x3fd1b5);_0xaec24a[_0x3b7f47][_0x50eddd['size']]=_0x3fb7eb;const _0x305285=Math['max'](_0x13f8cf-_0x3fb7eb,-0x120a*-0x1+0x1*0x5e3+0x7*-0x36b),_0x144742=_0x1210b9-_0x305285;_0x4d08ab-=_0x144742;}}function _0x417715(_0x3b6742,_0x1f92ba,_0x4b8ffa){const _0x213d57=_0x52ccc4(_0x3b6742,_0x4b8ffa['minSize'],!(0x24c3+0xad2+-0x2f95)),_0x469546=_0x3ce719(_0x3b6742,_0x4b8ffa['fittingPro'+'portion']),_0x48d42f=_0x1e50df(_0x469546),_0x353bc7=_0x54dd6c(_0x48d42f,_0x213d57);let _0x284ac9=_0x1f92ba-ts[_0x4b8ffa['axis']];for(let _0x29dbc4=-0x14e*0x2+-0x53e*-0x5+-0x179a;_0x29dbc4<_0x3b6742['length'];++_0x29dbc4){const _0x346c3d=_0x213d57[_0x29dbc4],_0x4f3e4d=_0x5dfc8b(_0x346c3d,_0x284ac9,_0x48d42f,_0x353bc7),_0x284216=_0x3b6742[_0x346c3d][_0x4b8ffa['size']]-_0x4f3e4d,_0x36828d=_0x3b6742[_0x346c3d][_0x4b8ffa['minSize']],_0x76057a=Math['max'](_0x284216,_0x36828d);_0x3b6742[_0x346c3d][_0x4b8ffa['size']]=_0x76057a;const _0x34c3b1=Math['max'](_0x76057a-_0x284216,-0x411+-0x75b+0x56*0x22),_0xbffd5f=_0x4f3e4d-_0x34c3b1;_0x284ac9-=_0xbffd5f;}}function _0x5dfc8b(_0x582bcc,_0x14474a,_0x268199,_0x1115f7){const _0x4993a5=_0x268199[_0x582bcc],_0x5e1762=_0x1115f7[_0x582bcc];return Math['abs'](_0x4993a5)<-0x1*0x454+-0x3*0x816+0x1c96+0.00001&&Math['abs'](_0x5e1762)<0x1ef0+0x51*0x5b+-0x1*0x3bbb+0.00001?_0x14474a:_0x14474a*_0x4993a5/_0x5e1762;}function _0x2d3dda(_0x34b473,_0xc496bc){const _0xd42ebb={};_0xd42ebb[_0x30a034['axis']]=-0x26f9*0x1+-0xa72+-0x3*-0x1079,_0xd42ebb[_0x17e846['axis']]=0x4a8+0x2048+-0x24f0,_0x34b473[_0x30a034['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x5ad528=[];for(let _0x1f2ad0=-0x20f9+0x5e2+0x1b17;_0x1f2ad0<_0x34b473['length'];++_0x1f2ad0){const _0x5b2271=_0x34b473[_0x1f2ad0];if(_0x5b2271['length']===-0x1*-0x959+-0x13d9+0x1c*0x60){_0x5ad528['push']([]);continue;}const _0x312359=[],_0x253475=_0xc496bc[_0x1f2ad0];for(let _0x1f9246=-0x6ab+-0x33*0xa9+-0x6*-0x6b9;_0x1f9246<_0x5b2271['length'];++_0x1f9246){const _0x43d71a=_0x5b2271[_0x1f9246],_0x37118f=_0x253475[_0x1f9246];_0xd42ebb[_0x17e846['axis']]-=_0x390af(_0x43d71a,_0x37118f),_0xd42ebb[_0x30a034['axis']]-=_0xba96f4(_0x43d71a,_0x37118f),_0x312359[_0x1f9246]={},_0x312359[_0x1f9246][_0x30a034['axis']]=_0xd42ebb[_0x30a034['axis']],_0x312359[_0x1f9246][_0x17e846['axis']]=_0xd42ebb[_0x17e846['axis']],_0xd42ebb[_0x17e846['axis']]+=_0x390af(_0x43d71a,_0x37118f),_0xd42ebb[_0x30a034['axis']]+=_0x2ba0b6(_0x43d71a,_0x37118f)+_0x89b0e2['spacing'][_0x30a034['axis']];}_0x5b2271[_0x30a034['size']]=_0xd42ebb[_0x30a034['axis']]-_0x89b0e2['spacing'][_0x30a034['axis']],_0x5b2271[_0x17e846['size']]=_0x5b2271['largestSiz'+'e'][_0x17e846['size']],_0x34b473[_0x30a034['size']]=Math['max'](_0x34b473[_0x30a034['size']],_0x5b2271[_0x30a034['size']]),_0xd42ebb[_0x30a034['axis']]=-0x1535+-0x1*0x1c8f+-0x3d4*-0xd,_0xd42ebb[_0x17e846['axis']]+=_0x5b2271[_0x17e846['size']]+_0x89b0e2['spacing'][_0x17e846['axis']],_0x5ad528['push'](_0x312359);}return _0x34b473[_0x17e846['size']]=_0xd42ebb[_0x17e846['axis']]-_0x89b0e2['spacing'][_0x17e846['axis']],_0x5ad528;}function _0x30e2a3(_0x55a927,_0x693881,_0x3d2e72){const _0x378ef1=_0x89b0e2['alignment'][_0x30a034['axis']],_0x2de3d9=_0x89b0e2['alignment'][_0x17e846['axis']],_0x3e9ccd=_0x89b0e2['padding'][_0x30a034['axis']],_0x18672f=_0x89b0e2['padding'][_0x17e846['axis']];for(let _0x125e02=-0x50d+-0x1a7e+0x1f8b;_0x125e02<_0x55a927['length'];++_0x125e02){const _0x10c67e=_0x55a927[_0x125e02],_0x5a410f=_0x693881[_0x125e02],_0x5dc9b3=_0x3d2e72[_0x125e02],_0x4ee977=(ts[_0x30a034['axis']]-_0x10c67e[_0x30a034['size']])*_0x378ef1+_0x3e9ccd,_0x665a79=(ts[_0x17e846['axis']]-_0x55a927[_0x17e846['size']])*_0x2de3d9+_0x18672f;for(let _0x22c358=0x3*-0x9a3+0x3*0x4be+0xeaf;_0x22c358<_0x10c67e['length'];++_0x22c358){const _0x4ccca5=(_0x10c67e[_0x17e846['size']]-_0x5a410f[_0x22c358][_0x17e846['size']])*_0x89b0e2['alignment'][_0x17e846['axis']];_0x5dc9b3[_0x22c358][_0x30a034['axis']]+=_0x4ee977,_0x5dc9b3[_0x22c358][_0x17e846['axis']]+=_0x665a79+_0x4ccca5;}}}function _0x16bd8c(_0x49eff5,_0x2bb620,_0x4ee611){for(let _0x23cad4=0x250a+-0xd*-0x52+-0x2934;_0x23cad4<_0x49eff5['length'];++_0x23cad4){const _0x222912=_0x49eff5[_0x23cad4],_0x3f6977=_0x2bb620[_0x23cad4],_0x3e22e5=_0x4ee611[_0x23cad4];for(let _0x22438b=-0x843*0x1+0x5b5+0x28e*0x1;_0x22438b<_0x222912['length'];++_0x22438b){const _0x51f51f=_0x222912[_0x22438b];_0x51f51f[_0x30a034['calculated'+'Size']]=_0x3f6977[_0x22438b][_0x30a034['size']],_0x51f51f[_0x17e846['calculated'+'Size']]=_0x3f6977[_0x22438b][_0x17e846['size']],_0x89b0e2['orientatio'+'n']===be?_0x51f51f['entity']['setLocalPo'+'sition'](_0x3e22e5[_0x22438b][_0x30a034['axis']],_0x3e22e5[_0x22438b][_0x17e846['axis']],_0x51f51f['entity']['getLocalPo'+'sition']()['z']):_0x51f51f['entity']['setLocalPo'+'sition'](_0x3e22e5[_0x22438b][_0x17e846['axis']],_0x3e22e5[_0x22438b][_0x30a034['axis']],_0x51f51f['entity']['getLocalPo'+'sition']()['z']);}}}function _0x2e0bbf(_0x5d0baa){const _0x453e38=_0x5d0baa['width'],_0x436490=_0x5d0baa['height'],_0xd9eeb0=(ts['x']-_0x453e38)*_0x89b0e2['alignment']['x']+_0x89b0e2['padding']['x'],_0x4dc580=(ts['y']-_0x436490)*_0x89b0e2['alignment']['y']+_0x89b0e2['padding']['y'];return{'bounds':new ae(_0xd9eeb0,_0x4dc580,_0x453e38,_0x436490)};}function _0x36569f(_0x287c28){const _0x1c54d4=[];for(let _0x16ade8=-0x27b+-0x268c+0x1*0x2907;_0x16ade8<_0x287c28['length'];++_0x16ade8){const _0x51f912=_0x287c28[_0x16ade8],_0x34a9e5=Math['max'](_0x43073a(_0x51f912,'minWidth'),0x1*-0xb7a+0x3ab*0x5+-0x7*0xfb),_0x470456=Math['max'](_0x43073a(_0x51f912,'minHeight'),-0x2*0x31a+0x232b+0x1*-0x1cf7),_0x402b95=Math['max'](_0x43073a(_0x51f912,'maxWidth'),_0x34a9e5),_0x501ff0=Math['max'](_0x43073a(_0x51f912,'maxHeight'),_0x470456),_0x44c95a=_0x3d458a(_0x43073a(_0x51f912,'width'),_0x34a9e5,_0x402b95),_0x24cda4=_0x3d458a(_0x43073a(_0x51f912,'height'),_0x470456,_0x501ff0),_0x5e1980=_0x43073a(_0x51f912,'fitWidthPr'+'oportion'),_0x12f47c=_0x43073a(_0x51f912,'fitHeightP'+'roportion');_0x1c54d4['push']({'minWidth':_0x34a9e5,'minHeight':_0x470456,'maxWidth':_0x402b95,'maxHeight':_0x501ff0,'width':_0x44c95a,'height':_0x24cda4,'fitWidthProportion':_0x5e1980,'fitHeightProportion':_0x12f47c});}return _0x1c54d4;}function _0x43073a(_0x139a8d,_0x78452a){const _0x469787=_0x139a8d['entity']['layoutchil'+'d'];return _0x469787&&_0x469787['enabled']&&_0x469787[_0x78452a]!==void(-0x10f5+-0xc5*0xe+0x1bbb*0x1)&&_0x469787[_0x78452a]!==null?_0x469787[_0x78452a]:_0x139a8d[_0x78452a]!==void(-0x13ec+-0x8*-0x468+0x24*-0x6d)?_0x139a8d[_0x78452a]:QL[_0x78452a];}function _0x3d458a(_0x74e056,_0x14f1e7,_0x47f5fa){return Math['min'](Math['max'](_0x74e056,_0x14f1e7),_0x47f5fa);}function _0x225bea(_0x583a18,_0x30bc63){return _0x583a18['reduce']((_0x2e8014,_0x9e9aa9)=>_0x2e8014+_0x9e9aa9[_0x30bc63],-0x22ef+-0x1d13+0x1556*0x3);}function _0x3ce719(_0x23fca9,_0xd893e1){const _0x339aa4=_0x225bea(_0x23fca9,_0xd893e1),_0x46e553=[],_0x415583=_0x23fca9['length'];if(_0x339aa4===-0xa45+0x44*-0x5d+0x7*0x4ff){for(let _0x55f4e5=-0x2135*0x1+-0x2261+0x1*0x4396;_0x55f4e5<_0x415583;++_0x55f4e5)_0x46e553['push']((0x1e46+-0x1c96+-0x1af)/_0x415583);}else{for(let _0x23a401=-0x1800+-0x1*0xffa+0x27fa;_0x23a401<_0x415583;++_0x23a401)_0x46e553['push'](_0x23fca9[_0x23a401][_0xd893e1]/_0x339aa4);}return _0x46e553;}function _0x1e50df(_0x1efc97){if(_0x1efc97['length']===0x80*0x40+0x12d6+-0x7*0x743)return[-0x1aeb+0x1*0x21b3+-0x15b*0x5];const _0x1a4878=[],_0x5d8bcb=_0x1efc97['length'];for(let _0x3e89aa=-0x1c86+-0x1187+0x2e0d;_0x3e89aa<_0x5d8bcb;++_0x3e89aa)_0x1a4878['push']((-0xce5+0x4f*-0x63+0x2b73-_0x1efc97[_0x3e89aa])/(_0x5d8bcb-(-0x22c8+-0xb88+0x2e51)));return _0x1a4878;}function _0x52ccc4(_0x4e7ecd,_0x3304ec,_0x52ea3d){return _0x4e7ecd['forEach'](_0x447aea),_0x4e7ecd['slice']()['sort']((_0x582472,_0x1b0c06)=>_0x52ea3d?_0x1b0c06[_0x3304ec]-_0x582472[_0x3304ec]:_0x582472[_0x3304ec]-_0x1b0c06[_0x3304ec])['map'](_0x231ce8);}function _0x447aea(_0x395dda,_0x4dc11c){_0x395dda['index']=_0x4dc11c;}function _0x231ce8(_0x26f195){return _0x26f195['index'];}function _0x54dd6c(_0x2e677b,_0x3ed645){const _0x25917e=[];_0x25917e[_0x3ed645[_0x2e677b['length']-(-0x7*0x575+-0x2163+0x4797)]]=_0x2e677b[_0x3ed645[_0x2e677b['length']-(0x1fa9+0x65*0x1+-0x200d)]];for(let _0x524dd4=_0x2e677b['length']-(-0x12b*-0x2+0x13d*0x11+-0x1761);_0x524dd4>=-0x1b0d+-0x997*0x4+0x4169;--_0x524dd4)_0x25917e[_0x3ed645[_0x524dd4]]=_0x25917e[_0x3ed645[_0x524dd4+(0x1177+-0x1*-0x52f+-0x16a5)]]+_0x2e677b[_0x3ed645[_0x524dd4]];return _0x25917e;}return _0xa4d750;}const Bm={};Bm[be]=hv(be),Bm[qe]=hv(qe);class JL{['calculateL'+'ayout'](_0x8b436a,_0xc32392){const _0x2b11a2=Bm[_0xc32392['orientatio'+'n']];if(_0x2b11a2)return _0x2b11a2(_0x8b436a,_0xc32392);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0xc32392['orientatio'+'n']);}}function mg(_0x28e020){return _0x28e020['element'];}function eR(_0x225ece){return _0x225ece['enabled']&&_0x225ece['element']&&_0x225ece['element']['enabled'];}class cv extends we{constructor(_0x42c4b0,_0x13ecc0){super(_0x42c4b0,_0x13ecc0),h(this,'_orientati'+'on',be),h(this,'_reverseX',!(-0x1214+0x1dd6*-0x1+0x2feb)),h(this,'_reverseY',!(0x665+-0x4*0x33b+0x3*0x22d)),h(this,'_alignment',new J(0x1*0x1b2f+0xb*-0xd+-0x1aa0,-0x1fc*0xa+0x3*0x617+0x4*0x65)),h(this,'_padding',new ae()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',su),h(this,'_heightFit'+'ting',su),h(this,'_wrap',!(0x8a*0x3d+0x77*0x23+-0x1b*0x1d2)),h(this,'_layoutCal'+'culator',new JL()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x250348=>{this['_listenFor'+'ReflowEven'+'ts'](_0x250348,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),M['assert'](_0x42c4b0['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x42c4b0['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x42c4b0['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),M['assert'](_0x42c4b0['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x42c4b0['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x42c4b0['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x408447){_0x408447!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x408447,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x300702){_0x300702!==this['_reverseX']&&(this['_reverseX']=_0x300702,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x2845dc){_0x2845dc!==this['_reverseY']&&(this['_reverseY']=_0x2845dc,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x231a1d){_0x231a1d['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x231a1d),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x330ea0){_0x330ea0['equals'](this['_padding'])||(this['_padding']['copy'](_0x330ea0),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x2ad2b3){_0x2ad2b3['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x2ad2b3),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0xd93fb7){_0xd93fb7!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0xd93fb7,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x3948a1){_0x3948a1!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x3948a1,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x49a945){_0x49a945!==this['_wrap']&&(this['_wrap']=_0x49a945,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x48ccb3){return _0x48ccb3===this['entity']||this['entity']['children']['indexOf'](_0x48ccb3)!==-(0x22*0xc1+-0x1b38+0x197);}['_listenFor'+'ReflowEven'+'ts'](_0x436468,_0x4bc4bd){_0x436468['element']&&(_0x436468['element'][_0x4bc4bd]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x436468['element'][_0x4bc4bd]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x436468['element'][_0x4bc4bd]('resize',this['_scheduleR'+'eflow'],this),_0x436468['element'][_0x4bc4bd]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x436468['layoutchil'+'d']&&(_0x436468['layoutchil'+'d'][_0x4bc4bd]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x436468['layoutchil'+'d'][_0x4bc4bd]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0xe24cb6){this['_isSelfOrC'+'hild'](_0xe24cb6)&&(this['_listenFor'+'ReflowEven'+'ts'](_0xe24cb6,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x3142aa){this['_isSelfOrC'+'hild'](_0x3142aa)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x3142aa,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x54d9cc){this['_listenFor'+'ReflowEven'+'ts'](_0x54d9cc,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x495538){this['_listenFor'+'ReflowEven'+'ts'](_0x495538,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x2ecd2a=mg(this['entity']),_0x32ee05=this['entity']['children']['filter'](eR)['map'](mg);if(!_0x2ecd2a||_0x32ee05['length']===-0x1*0x3e6+-0xffc+0x1*0x13e2)return;const _0x5a583d=Math['max'](_0x2ecd2a['calculated'+'Width'],0x98e+0x4a*-0x31+-0x4*-0x127),_0x3a2255=Math['max'](_0x2ecd2a['calculated'+'Height'],-0xa59+-0x141*-0x1c+0x3*-0x841),_0x4a78e9={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x5a583d,_0x3a2255)};this['_isPerform'+'ingReflow']=!(-0x1*-0x1669+-0x1a90+0x1*0x427);const _0x2f6df4=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x32ee05,_0x4a78e9);this['_isPerform'+'ingReflow']=!(-0x898+0x914+-0x7b),this['fire']('reflow',_0x2f6df4);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x52f40b=>{this['_listenFor'+'ReflowEven'+'ts'](_0x52f40b,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class tR{constructor(){this['enabled']=!(-0x1bf7+-0x36+0x1c2d);}}const dv=['enabled'],sR=0x19de*0x1+-0x40+-0x193a;class iR extends lt{constructor(_0x3ddd07){super(_0x3ddd07),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=cv,this['DataType']=tR,this['schema']=dv,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x1e20af,_0xf42748,_0x16da71){_0xf42748['enabled']!==void(0x8*0x389+-0x2074+0x42c)&&(_0x1e20af['enabled']=_0xf42748['enabled']),_0xf42748['orientatio'+'n']!==void(-0x108b+-0x1ad*-0x1+-0xede*-0x1)&&(_0x1e20af['orientatio'+'n']=_0xf42748['orientatio'+'n']),_0xf42748['reverseX']!==void(-0xe*0x2+-0xa5e+-0x53d*-0x2)&&(_0x1e20af['reverseX']=_0xf42748['reverseX']),_0xf42748['reverseY']!==void(-0x1353+0x705+-0x1e*-0x69)&&(_0x1e20af['reverseY']=_0xf42748['reverseY']),_0xf42748['alignment']!==void(0x834+0x17a8+-0x1fdc)&&(_0x1e20af['alignment']=Array['isArray'](_0xf42748['alignment'])?new J(_0xf42748['alignment']):_0xf42748['alignment']),_0xf42748['padding']!==void(0x153f+0x1aaf+-0x2fee)&&(_0x1e20af['padding']=Array['isArray'](_0xf42748['padding'])?new ae(_0xf42748['padding']):_0xf42748['padding']),_0xf42748['spacing']!==void(0x3*0x62f+-0x863+-0xa2a)&&(_0x1e20af['spacing']=Array['isArray'](_0xf42748['spacing'])?new J(_0xf42748['spacing']):_0xf42748['spacing']),_0xf42748['widthFitti'+'ng']!==void(0x3*-0xab5+-0x17eb+-0x380a*-0x1)&&(_0x1e20af['widthFitti'+'ng']=_0xf42748['widthFitti'+'ng']),_0xf42748['heightFitt'+'ing']!==void(0x94f*0x1+0x429*0x4+-0x19f3)&&(_0x1e20af['heightFitt'+'ing']=_0xf42748['heightFitt'+'ing']),_0xf42748['wrap']!==void(0x1770+0x7*0x47d+-0x1f*0x1c5)&&(_0x1e20af['wrap']=_0xf42748['wrap']),super['initialize'+'ComponentD'+'ata'](_0x1e20af,_0xf42748,_0x16da71);}['cloneCompo'+'nent'](_0x5d96e6,_0x35edb3){const _0x44f569=_0x5d96e6['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x35edb3,{'enabled':_0x44f569['enabled'],'orientation':_0x44f569['orientatio'+'n'],'reverseX':_0x44f569['reverseX'],'reverseY':_0x44f569['reverseY'],'alignment':_0x44f569['alignment'],'padding':_0x44f569['padding'],'spacing':_0x44f569['spacing'],'widthFitting':_0x44f569['widthFitti'+'ng'],'heightFitting':_0x44f569['heightFitt'+'ing'],'wrap':_0x44f569['wrap']});}['scheduleRe'+'flow'](_0x486fd5){this['_reflowQue'+'ue']['indexOf'](_0x486fd5)===-(-0x1*0xdcf+-0xf3f+0x1d0f)&&this['_reflowQue'+'ue']['push'](_0x486fd5);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===-0x33b*-0x3+0x18*-0x184+0x1aaf)return;let _0x4831ae=-0x358+-0x2b*0xa2+0x1*0x1e8e;for(;this['_reflowQue'+'ue']['length']>0x4*0xc1+0x1*-0x1a2f+0x172b;){const _0x714a5b=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x1158+0x396+-0x14ee,_0x714a5b['sort']((_0x2e8968,_0x541525)=>_0x2e8968['entity']['graphDepth']-_0x541525['entity']['graphDepth']);for(let _0x5aed3c=-0x1f27+0x7af+0x1778;_0x5aed3c<_0x714a5b['length'];++_0x5aed3c)_0x714a5b[_0x5aed3c]['reflow']();if(++_0x4831ae>=sR){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x5ecff0,_0x27772e){_0x27772e['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](cv['prototype'],dv);class rR{constructor(){h(this,'map',new Map());}['destroy'](_0xf6f916){this['map']['forEach'](_0x289640=>_0x289640['mesh']['destroy']());}}const aR=new Ht(),fv=(_0x5195af,_0x5200c4)=>{const _0x287bf2=aR['get'](_0x5195af,()=>new rR());let _0x4a8302=_0x287bf2['map']['get'](_0x5200c4);if(!_0x4a8302){let _0xee98fb,_0x334bd9;switch(_0x5200c4){case'box':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new Ff()),_0x334bd9={'x':0x2,'y':0x2,'z':0x2,'uv':(0xaa1+-0x176e+0xccf)/(0xa80+-0x3e2+-0x69b)};break;case'capsule':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new JA({'radius':0.5,'height':0x2})),_0x334bd9={'x':Math['PI']*(-0xd3+0xe27+-0xd52),'y':Math['PI'],'z':Math['PI']*(-0x3a4+-0x4*0x14f+0x8e2),'uv':(-0x15f2+0x12d1+0x1*0x322)/(-0xaa7+0x2153*0x1+-0x16a9)+(-0x7*0x377+0x17*0x121+-0x1b5)/(0x5*-0x377+0x1*0x222b+-0x10d5)/(-0x2*0x12e0+-0x1a5c+0x401f)*(-0x1630+-0x3*-0x6eb+0x9*0x29)};break;case'cone':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new eb({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x334bd9={'x':2.54,'y':2.54,'z':2.54,'uv':(-0x3c*-0x8b+-0x77*-0x4f+-0x454c)/(0x24ae+-0x175*0x11+-0x5f3*0x2)+(0x1f+0x79d+0x7bb*-0x1)/(-0xce*-0x7+0x137c+-0x191b)/(-0x2514+-0x23df+0x48f6)};break;case'cylinder':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new tb({'radius':0.5,'height':0x1})),_0x334bd9={'x':Math['PI'],'y':(-0x132*-0x7+0x327*-0x2+0x16*-0x18+0.79)*(0x1323+-0x21*-0x45+0xd3*-0x22),'z':Math['PI'],'uv':(0x229c+0x3e4+-0x1*0x267f)/(-0xed*-0x1b+0x873+0x1b*-0x13d)+(0xb2a+-0x2057+0x152e)/(-0x1def+-0x12f4+0x30e6)/(0x2*0x360+-0x9bd+0x300)*(-0xa1a*-0x1+0x110*-0x8+0x198*-0x1)};break;case'plane':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new sb({'halfExtents':new J(-0x2241+0x322*-0x3+0x2ba7+0.5,0x1f28+0x9e6+-0x5*0x836+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x334bd9={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new By({'radius':0.5})),_0x334bd9={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0xee98fb=Ge['fromGeomet'+'ry'](_0x5195af,new ib({'tubeRadius':0.2,'ringRadius':0.3})),_0x334bd9={'x':Math['PI']*(0x1*0x99b+-0xe03+0x178*0x3+0.5)*(0x4c*-0x4f+0x98c+0xde8+0.5)-Math['PI']*(-0x2b*-0x62+-0x2*0x1f+-0x6*0x2b4+0.1)*(0x1f60+-0x4*-0x146+0x614*-0x6+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x5200c4);}_0xee98fb['incRefCoun'+'t'](),_0x4a8302={'mesh':_0xee98fb,'area':_0x334bd9},_0x287bf2['map']['set'](_0x5200c4,_0x4a8302);}return _0x4a8302;};class uv extends we{constructor(_0x511ab5,_0x423b73){super(_0x511ab5,_0x423b73),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(0x669+0x3*0x2af+-0xe76)),h(this,'_receiveSh'+'adows',!(-0x1467+-0x1*0x19c3+0x2e2a)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(0x1c69+-0x10a+-0x1b5f)),h(this,'_lightmapp'+'ed',!(0x8a*0x48+0x1*-0x162a+-0x1*0x10a5)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x70*-0x52+-0x145b+0x383c*0x1),h(this,'isStatic',!(-0x1*0x27b+-0xd59+0x547*0x3)),h(this,'_layers',[Wi]),h(this,'_batchGrou'+'pId',-(-0x3*-0x503+0x11*0xa+-0xfb2)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0x5*-0x40b+-0x24f5*0x1+-0x130f*-0x3)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x511ab5['defaultMat'+'erial'],_0x423b73['on']('remove',this['onRemoveCh'+'ild'],this),_0x423b73['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x423b73['on']('insert',this['onInsertCh'+'ild'],this),_0x423b73['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x26d727){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x26d727);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x51ed46){if(this['_customAab'+'b']=_0x51ed46,this['_model']){const _0x5b264c=this['_model']['meshInstan'+'ces'];if(_0x5b264c){for(let _0x83a9d3=-0x1695+-0xdf1*0x2+0x3277;_0x83a9d3<_0x5b264c['length'];_0x83a9d3++)_0x5b264c[_0x83a9d3]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x4cf3e0){if(this['_type']!==_0x4cf3e0){if(this['_area']=null,this['_type']=_0x4cf3e0,_0x4cf3e0==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x4226c7=fv(this['system']['app']['graphicsDe'+'vice'],_0x4cf3e0);this['_area']=_0x4226c7['area'];const _0x5bf44e=_0x4226c7['mesh'],_0x3fcc0e=new He(),_0x5b45d4=new $i();_0x5b45d4['graph']=_0x3fcc0e,_0x5b45d4['meshInstan'+'ces']=[new We(_0x5bf44e,this['_material'],_0x3fcc0e)],this['model']=_0x5b45d4,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x129f4a){const _0x57f048=this['system']['app']['assets'];let _0x2ba55f=_0x129f4a;if(_0x129f4a instanceof me&&(_0x2ba55f=_0x129f4a['id']),this['_asset']!==_0x2ba55f){if(this['_asset']){_0x57f048['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x30ebfa=_0x57f048['get'](this['_asset']);_0x30ebfa&&this['_unbindMod'+'elAsset'](_0x30ebfa);}if(this['_asset']=_0x2ba55f,this['_asset']){const _0x164e6c=_0x57f048['get'](this['_asset']);_0x164e6c?this['_bindModel'+'Asset'](_0x164e6c):(this['model']=null,_0x57f048['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x400752){if(this['_model']!==_0x400752){if(_0x400752&&_0x400752['_immutable']){M['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(-0xc02+0x6d7+-0x52c*-0x1),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(-0x2*-0x7fd+-0x3d*0x1+0x26*-0x6a))),this['_model']=_0x400752,this['_model']){this['_model']['_immutable']=!(-0x73a+-0x1ede+-0x1a8*-0x17);const _0x583156=this['_model']['meshInstan'+'ces'];for(let _0x19000d=0x2*0x10+0x4e5+-0x5*0x101;_0x19000d<_0x583156['length'];_0x19000d++)_0x583156[_0x19000d]['castShadow']=this['_castShado'+'ws'],_0x583156[_0x19000d]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x583156[_0x19000d]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x7d6f79){if(_0x7d6f79!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x7d6f79,this['_model'])){const _0x1fc6a5=this['_model']['meshInstan'+'ces'];for(let _0x3e771f=-0x168c+0x28*0xab+-0x42c;_0x3e771f<_0x1fc6a5['length'];_0x3e771f++)_0x1fc6a5[_0x3e771f]['setLightma'+'pped'](_0x7d6f79);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x87ceff){if(this['_castShado'+'ws']===_0x87ceff)return;const _0x7f0ada=this['_model'];if(_0x7f0ada){const _0x506ae2=this['layers'],_0x471354=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x87ceff)for(let _0x288536=0x1a3d+0x74b*-0x5+-0x77*-0x16;_0x288536<_0x506ae2['length'];_0x288536++){const _0x33c60d=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x288536]);_0x33c60d&&_0x33c60d['removeShad'+'owCasters'](_0x7f0ada['meshInstan'+'ces']);}const _0x370bd8=_0x7f0ada['meshInstan'+'ces'];for(let _0x15ce8f=-0x9bd+-0x1107*0x1+-0x6b1*-0x4;_0x15ce8f<_0x370bd8['length'];_0x15ce8f++)_0x370bd8[_0x15ce8f]['castShadow']=_0x87ceff;if(!this['_castShado'+'ws']&&_0x87ceff)for(let _0x4fd906=0x259*0xc+0x5*0x607+-0x3a4f;_0x4fd906<_0x506ae2['length'];_0x4fd906++){const _0x165b21=_0x471354['layers']['getLayerBy'+'Id'](_0x506ae2[_0x4fd906]);_0x165b21&&_0x165b21['addShadowC'+'asters'](_0x7f0ada['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x87ceff;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x330d61){if(this['_receiveSh'+'adows']!==_0x330d61&&(this['_receiveSh'+'adows']=_0x330d61,this['_model'])){const _0x5df5df=this['_model']['meshInstan'+'ces'];for(let _0x199929=-0xae6+-0x1a79+0xc75*0x3,_0x4ecff3=_0x5df5df['length'];_0x199929<_0x4ecff3;_0x199929++)_0x5df5df[_0x199929]['receiveSha'+'dow']=_0x330d61;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0xc47805){this['_castShado'+'wsLightmap']=_0xc47805;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x531afd){this['_lightmapS'+'izeMultipl'+'ier']=_0x531afd;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0xdb1973){const _0x46f076=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0xd16057=0x193c+0x7*-0x4a5+0x747;_0xd16057<this['_layers']['length'];_0xd16057++){const _0x5e9304=_0x46f076['getLayerBy'+'Id'](this['_layers'][_0xd16057]);_0x5e9304&&_0x5e9304['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=0x15e5+0x181b+-0x17*0x200;for(let _0x5593ca=-0x260a+-0xf3e*0x1+0x554*0xa;_0x5593ca<_0xdb1973['length'];_0x5593ca++)this['_layers'][_0x5593ca]=_0xdb1973[_0x5593ca];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x330ecb=-0x1a7a*-0x1+-0xa*-0x326+-0x39f6;_0x330ecb<this['_layers']['length'];_0x330ecb++){const _0xe70b6b=_0x46f076['getLayerBy'+'Id'](this['_layers'][_0x330ecb]);_0xe70b6b&&_0xe70b6b['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x2f775a){var _0x249b0d,_0x4aac9b;this['_batchGrou'+'pId']!==_0x2f775a&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x67*0x52+-0x1*0x56f+0x266d&&((_0x249b0d=this['system']['app']['batcher'])==null||_0x249b0d['remove'](mt['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x2f775a>=-0xd*0x1cf+-0x21b+0x445*0x6&&((_0x4aac9b=this['system']['app']['batcher'])==null||_0x4aac9b['insert'](mt['MODEL'],_0x2f775a,this['entity'])),_0x2f775a<0xc25*-0x2+0x1a*0x26+0x146e&&this['_batchGrou'+'pId']>=-0x1933+-0x184*0x9+0x26d7&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x2f775a);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0xe36a07){let _0x1f105e=_0xe36a07;_0xe36a07 instanceof me&&(_0x1f105e=_0xe36a07['id']);const _0x16a555=this['system']['app']['assets'];if(_0x1f105e!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x16a555['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0xf61e56=_0x16a555['get'](this['_materialA'+'sset']);_0xf61e56&&this['_unbindMat'+'erialAsset'](_0xf61e56);}if(this['_materialA'+'sset']=_0x1f105e,this['_materialA'+'sset']){const _0x438edd=_0x16a555['get'](this['_materialA'+'sset']);_0x438edd?this['_bindMater'+'ialAsset'](_0x438edd):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x16a555['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x346fa0){this['_material']!==_0x346fa0&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x346fa0));}get['material'](){return this['_material'];}set['mapping'](_0x59be81){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x59be81||(_0x59be81={}),this['_mapping']=_0x59be81,!this['_model']))return;const _0x2ce5c1=this['_model']['meshInstan'+'ces'],_0xf44523=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x1846f1=_0xf44523?_0xf44523['data']['mapping']:null;let _0x55aa3c=null;for(let _0x3b41a3=0xf43+0x55e*-0x6+-0x1*-0x10f1,_0x15ea85=_0x2ce5c1['length'];_0x3b41a3<_0x15ea85;_0x3b41a3++)if(_0x59be81[_0x3b41a3]!==void(-0x12*0xbc+-0x4*-0x8cb+0x57d*-0x4))_0x59be81[_0x3b41a3]?(_0x55aa3c=this['system']['app']['assets']['get'](_0x59be81[_0x3b41a3]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x55aa3c,_0x2ce5c1[_0x3b41a3],_0x3b41a3)):_0x2ce5c1[_0x3b41a3]['material']=this['system']['defaultMat'+'erial'];else{if(_0x1846f1){if(_0x1846f1[_0x3b41a3]&&(_0x1846f1[_0x3b41a3]['material']||_0x1846f1[_0x3b41a3]['path'])){if(_0x1846f1[_0x3b41a3]['material']!==void(0xf7c+0x795+-0x49d*0x5))_0x55aa3c=this['system']['app']['assets']['get'](_0x1846f1[_0x3b41a3]['material']);else{if(_0x1846f1[_0x3b41a3]['path']!==void(0x1fc6+-0xad*0x1f+-0xad3)){const _0x28bfe8=this['_getMateri'+'alAssetUrl'](_0x1846f1[_0x3b41a3]['path']);_0x28bfe8&&(_0x55aa3c=this['system']['app']['assets']['getByUrl'](_0x28bfe8));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x55aa3c,_0x2ce5c1[_0x3b41a3],_0x3b41a3);}else _0x2ce5c1[_0x3b41a3]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x261c9a=this['system']['app']['scene']['layers'];for(let _0x140b2d=0x13*-0x17b+-0x1*0x3db+-0x1ffc*-0x1;_0x140b2d<this['_layers']['length'];_0x140b2d++){const _0x3decd1=_0x261c9a['getLayerBy'+'Id'](this['_layers'][_0x140b2d]);_0x3decd1&&_0x3decd1['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x511cf0=this['system']['app']['scene']['layers'];for(let _0x1f1588=0x20d8+0x2528+-0x4600;_0x1f1588<this['_layers']['length'];_0x1f1588++){const _0x35b417=_0x511cf0['getLayerBy'+'Id'](this['_layers'][_0x1f1588]);_0x35b417&&_0x35b417['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x254441,_0x1a61cc){this['addModelTo'+'Layers'](),_0x254441['off']('add',this['onLayerAdd'+'ed'],this),_0x254441['off']('remove',this['onLayerRem'+'oved'],this),_0x1a61cc['on']('add',this['onLayerAdd'+'ed'],this),_0x1a61cc['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x1d4f50){this['layers']['indexOf'](_0x1d4f50['id'])<0x1109+0x51*0x5d+-0x2e76||_0x1d4f50['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x540ee7){this['layers']['indexOf'](_0x540ee7['id'])<0x16d8+-0x2*0x2c+-0x1680||_0x540ee7['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x588f05,_0x2397ea,_0x1e9436,_0x5d1361){const _0x5c32bf=_0x2397ea+':'+_0x1e9436;this['system']['app']['assets']['on'](_0x5c32bf,_0x5d1361,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x588f05]||(this['_materialE'+'vents'][_0x588f05]={}),this['_materialE'+'vents'][_0x588f05][_0x5c32bf]={'id':_0x1e9436,'handler':_0x5d1361};}['_unsetMate'+'rialEvents'](){const _0x2554cc=this['system']['app']['assets'],_0x10e3bc=this['_materialE'+'vents'];if(_0x10e3bc){for(let _0x1f918e=-0x249+0x12c3+0x39*-0x4a,_0x50437a=_0x10e3bc['length'];_0x1f918e<_0x50437a;_0x1f918e++){if(!_0x10e3bc[_0x1f918e])continue;const _0x4aa300=_0x10e3bc[_0x1f918e];for(const _0x47d1a9 in _0x4aa300)_0x2554cc['off'](_0x47d1a9,_0x4aa300[_0x47d1a9]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x4d7d26){let _0x2722cd=null;if(!isNaN(parseInt(_0x4d7d26,0x1c51+-0x167e*-0x1+-0x13d*0x29)))_0x2722cd=this['system']['app']['assets']['get'](_0x4d7d26);else{if(this['asset']){const _0x39f593=this['_getMateri'+'alAssetUrl'](_0x4d7d26);_0x39f593&&(_0x2722cd=this['system']['app']['assets']['getByUrl'](_0x39f593));}}return _0x2722cd;}['_getMateri'+'alAssetUrl'](_0x5b8d0a){if(!this['asset'])return null;const _0x48f647=this['system']['app']['assets']['get'](this['asset']);return _0x48f647?_0x48f647['getAbsolut'+'eUrl'](_0x5b8d0a):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0xa51dc4,_0xb413f8,_0x20de43){const _0x574c7a=this['system']['app']['assets'];_0xa51dc4&&(_0xa51dc4['resource']?(_0xb413f8['material']=_0xa51dc4['resource'],this['_setMateri'+'alEvent'](_0x20de43,'remove',_0xa51dc4['id'],function(){_0xb413f8['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x20de43,'load',_0xa51dc4['id'],function(_0x529097){_0xb413f8['material']=_0x529097['resource'],this['_setMateri'+'alEvent'](_0x20de43,'remove',_0xa51dc4['id'],function(){_0xb413f8['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x574c7a['load'](_0xa51dc4)));}['onEnable'](){var _0x265dcc;const _0x2ed693=this['system']['app'],_0x43af5f=_0x2ed693['scene'],_0x129e5e=_0x43af5f==null?void(-0xfed+-0x138a*-0x1+-0x39d):_0x43af5f['layers'];this['_evtLayers'+'Changed']=_0x43af5f['on']('set:layers',this['onLayersCh'+'anged'],this),_0x129e5e&&(this['_evtLayerA'+'dded']=_0x129e5e['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x129e5e['on']('remove',this['onLayerRem'+'oved'],this));const _0xc4a893=this['_type']==='asset';let _0x492d7a;if(this['_model']?this['addModelTo'+'Layers']():_0xc4a893&&this['_asset']&&(_0x492d7a=_0x2ed693['assets']['get'](this['_asset']),_0x492d7a&&_0x492d7a['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x492d7a)),this['_materialA'+'sset']&&(_0x492d7a=_0x2ed693['assets']['get'](this['_materialA'+'sset']),_0x492d7a&&_0x492d7a['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x492d7a)),_0xc4a893&&this['_mapping']){for(const _0xaf9756 in this['_mapping'])this['_mapping'][_0xaf9756]&&(_0x492d7a=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0xaf9756]),_0x492d7a&&!_0x492d7a['resource']&&_0x2ed693['assets']['load'](_0x492d7a));}this['_batchGrou'+'pId']>=0x1765*-0x1+-0x45*-0x2e+0x1*0xaff&&((_0x265dcc=_0x2ed693['batcher'])==null||_0x265dcc['insert'](mt['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x16fafc,_0x2c1fdf,_0xac8a49,_0x53c675;const _0x376cd1=this['system']['app'],_0x12c5f5=_0x376cd1['scene']['layers'];(_0x16fafc=this['_evtLayers'+'Changed'])==null||_0x16fafc['off'](),this['_evtLayers'+'Changed']=null,_0x12c5f5&&((_0x2c1fdf=this['_evtLayerA'+'dded'])==null||_0x2c1fdf['off'](),this['_evtLayerA'+'dded']=null,(_0xac8a49=this['_evtLayerR'+'emoved'])==null||_0xac8a49['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x39*0x5d+-0x1*0x599+0x1a4e&&((_0x53c675=_0x376cd1['batcher'])==null||_0x53c675['remove'](mt['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0xac7d2d=this['_model']['meshInstan'+'ces'];for(let _0x566e40=0x1*0xb6b+0xc7*-0x4+-0x84f*0x1,_0x38032d=_0xac7d2d['length'];_0x566e40<_0x38032d;_0x566e40++)_0xac7d2d[_0x566e40]['visible']=!(-0x13db+-0xe*-0x1+0xf*0x152);}}['show'](){if(this['_model']){const _0x58a7a8=this['_model']['meshInstan'+'ces'];for(let _0x58e48a=0x553*0x7+0x1bfb+-0x4140,_0x2a040d=_0x58a7a8['length'];_0x58e48a<_0x2a040d;_0x58e48a++)_0x58a7a8[_0x58e48a]['visible']=!(-0x1eea+0x37d*0x1+0x1b6d);}}['_bindMater'+'ialAsset'](_0x3dd3ae){if(_0x3dd3ae['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x3dd3ae['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x3dd3ae['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x3dd3ae['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x3dd3ae['resource'])this['_onMateria'+'lAssetLoad'](_0x3dd3ae);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3dd3ae);}}['_unbindMat'+'erialAsset'](_0x261b9e){_0x261b9e['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x261b9e['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x261b9e['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x261b9e['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0xad73c7){this['system']['app']['assets']['off']('add:'+_0xad73c7['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0xad73c7['id']&&this['_bindMater'+'ialAsset'](_0xad73c7);}['_onMateria'+'lAssetLoad'](_0xb1f8e6){this['_setMateri'+'al'](_0xb1f8e6['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x2ebfe5){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x4e37d4){this['_onMateria'+'lAssetUnlo'+'ad'](_0x4e37d4);}['_onMateria'+'lAssetChan'+'ge'](_0x4ad38e){}['_bindModel'+'Asset'](_0x5ea761){if(this['_unbindMod'+'elAsset'](_0x5ea761),_0x5ea761['on']('load',this['_onModelAs'+'setLoad'],this),_0x5ea761['on']('unload',this['_onModelAs'+'setUnload'],this),_0x5ea761['on']('change',this['_onModelAs'+'setChange'],this),_0x5ea761['on']('remove',this['_onModelAs'+'setRemove'],this),_0x5ea761['resource'])this['_onModelAs'+'setLoad'](_0x5ea761);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x5ea761);}}['_unbindMod'+'elAsset'](_0xf378cc){_0xf378cc['off']('load',this['_onModelAs'+'setLoad'],this),_0xf378cc['off']('unload',this['_onModelAs'+'setUnload'],this),_0xf378cc['off']('change',this['_onModelAs'+'setChange'],this),_0xf378cc['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x4808a3){this['system']['app']['assets']['off']('add:'+_0x4808a3['id'],this['_onModelAs'+'setAdded'],this),_0x4808a3['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x4808a3);}['_onModelAs'+'setLoad'](_0x15d09d){this['model']=_0x15d09d['resource']['clone'](),this['_clonedMod'+'el']=!(-0x2*-0xbc5+0x2*0x8be+-0x2*0x1483);}['_onModelAs'+'setUnload'](_0x5ea902){this['model']=null;}['_onModelAs'+'setChange'](_0x28aafa,_0x579351,_0x3a4407,_0x55f8cd){_0x579351==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x5bae96){this['model']=null;}['_setMateri'+'al'](_0xc9112d){if(this['_material']===_0xc9112d)return;this['_material']=_0xc9112d;const _0x1ed0a5=this['_model'];if(_0x1ed0a5&&this['_type']!=='asset'){const _0xdf1e5=_0x1ed0a5['meshInstan'+'ces'];for(let _0xb33e25=-0x2e9+0x1*0x36a+-0x81,_0x37b83a=_0xdf1e5['length'];_0xb33e25<_0x37b83a;_0xb33e25++)_0xdf1e5[_0xb33e25]['material']=_0xc9112d;}}}class nR{constructor(){this['enabled']=!(0x1*0x220c+-0x1*-0x26e1+-0x48ed);}}const mv=['enabled'];class oR extends lt{constructor(_0x2bd7e2){super(_0x2bd7e2),this['id']='model',this['ComponentT'+'ype']=uv,this['DataType']=nR,this['schema']=mv,this['defaultMat'+'erial']=cl(_0x2bd7e2['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x9d6ae5,_0x22be1e,_0x312cb1){_0x312cb1=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x22be1e['batchGroup'+'Id']===null||_0x22be1e['batchGroup'+'Id']===void(-0x1*-0xdb9+-0x3*0x3a6+-0x2c7))&&(_0x22be1e['batchGroup'+'Id']=-(-0x3*-0x80f+-0x689+-0x5e1*0x3)),_0x22be1e['layers']&&_0x22be1e['layers']['length']&&(_0x22be1e['layers']=_0x22be1e['layers']['slice'](-0xc*-0x55+-0x169*0xd+0xe59));for(let _0x494b3c=-0x14b5+-0x4cb+-0xc0*-0x22;_0x494b3c<_0x312cb1['length'];_0x494b3c++)_0x22be1e['hasOwnProp'+'erty'](_0x312cb1[_0x494b3c])&&(_0x9d6ae5[_0x312cb1[_0x494b3c]]=_0x22be1e[_0x312cb1[_0x494b3c]]);_0x22be1e['aabbCenter']&&_0x22be1e['aabbHalfEx'+'tents']&&(_0x9d6ae5['customAabb']=new Ie(new I(_0x22be1e['aabbCenter']),new I(_0x22be1e['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x9d6ae5,_0x22be1e,['enabled']);}['cloneCompo'+'nent'](_0x1de6b6,_0xbfb165){const _0x50fa90={'type':_0x1de6b6['model']['type'],'asset':_0x1de6b6['model']['asset'],'castShadows':_0x1de6b6['model']['castShadow'+'s'],'receiveShadows':_0x1de6b6['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x1de6b6['model']['castShadow'+'sLightmap'],'lightmapped':_0x1de6b6['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x1de6b6['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x1de6b6['model']['isStatic'],'enabled':_0x1de6b6['model']['enabled'],'layers':_0x1de6b6['model']['layers'],'batchGroupId':_0x1de6b6['model']['batchGroup'+'Id'],'mapping':bh({},_0x1de6b6['model']['mapping'])};let _0x33603e=_0x1de6b6['model']['materialAs'+'set'];!(_0x33603e instanceof me)&&_0x33603e!=null&&(_0x33603e=this['app']['assets']['get'](_0x33603e));const _0x40b126=_0x1de6b6['model']['material'];(!_0x40b126||_0x40b126===this['defaultMat'+'erial']||!_0x33603e||_0x40b126===_0x33603e['resource'])&&(_0x50fa90['materialAs'+'set']=_0x33603e);const _0x1b43b7=this['addCompone'+'nt'](_0xbfb165,_0x50fa90);if(_0x1de6b6['model']['model']&&_0x1de6b6['model']['type']==='asset'&&!_0x1de6b6['model']['asset']&&(_0x1b43b7['model']=_0x1de6b6['model']['model']['clone'](),_0x1b43b7['_clonedMod'+'el']=!(0x1f7c+-0xa7+-0x1ed5)),_0x50fa90['materialAs'+'set']||(_0x1b43b7['material']=_0x40b126),_0x1de6b6['model']['model']){const _0x599045=_0x1de6b6['model']['model']['meshInstan'+'ces'],_0x3c5a6d=_0x1b43b7['model']['meshInstan'+'ces'];for(let _0x49d27a=0x5fe+0x59*0x2b+-0x14f1;_0x49d27a<_0x599045['length'];_0x49d27a++)_0x3c5a6d[_0x49d27a]['mask']=_0x599045[_0x49d27a]['mask'],_0x3c5a6d[_0x49d27a]['material']=_0x599045[_0x49d27a]['material'],_0x3c5a6d[_0x49d27a]['layer']=_0x599045[_0x49d27a]['layer'],_0x3c5a6d[_0x49d27a]['receiveSha'+'dow']=_0x599045[_0x49d27a]['receiveSha'+'dow'];}return _0x1de6b6['model']['customAabb']&&(_0x1b43b7['customAabb']=_0x1de6b6['model']['customAabb']['clone']()),_0x1b43b7;}['onRemove'](_0x4385e7,_0x4b7657){_0x4b7657['onRemove']();}}we['_buildAcce'+'ssors'](uv['prototype'],mv);const lR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],hR=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],cR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],sh=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Na;class dR extends we{constructor(_0x5604bf,_0x5636d4){super(_0x5604bf,_0x5636d4),h(this,'_requested'+'Depth',!(0x152*-0x17+0x1*-0x1a24+0x3883)),h(this,'_drawOrder',0xafe+0x1*0xb8c+0xa*-0x241),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),lR['forEach'](_0x4d3ff8=>{this['on']('set_'+_0x4d3ff8,this['onSetSimpl'+'eProperty'],this);}),hR['forEach'](_0x4b8605=>{this['on']('set_'+_0x4b8605,this['onSetCompl'+'exProperty'],this);}),cR['forEach'](_0x4834dd=>{this['on']('set_'+_0x4834dd,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x55e22c=this['system']['store'][this['entity']['getGuid']()];return _0x55e22c?_0x55e22c['data']:null;}set['enabled'](_0x2d5b75){this['_setValue']('enabled',_0x2d5b75);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x5bd18d){this['_setValue']('autoPlay',_0x5bd18d);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x4e551f){this['_setValue']('numParticl'+'es',_0x4e551f);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x43f57){this['_setValue']('lifetime',_0x43f57);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x2902c6){this['_setValue']('rate',_0x2902c6);}get['rate'](){return this['data']['rate'];}set['rate2'](_0xb56d3e){this['_setValue']('rate2',_0xb56d3e);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x21e08a){this['_setValue']('startAngle',_0x21e08a);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x209fa5){this['_setValue']('startAngle'+'2',_0x209fa5);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x5be372){this['_setValue']('loop',_0x5be372);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x3a65dd){this['_setValue']('preWarm',_0x3a65dd);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x36f866){this['_setValue']('lighting',_0x36f866);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x4f0c6d){this['_setValue']('halfLamber'+'t',_0x4f0c6d);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x366caf){this['_setValue']('intensity',_0x366caf);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x29ddee){this['_setValue']('depthWrite',_0x29ddee);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x591ed4){this['_setValue']('noFog',_0x591ed4);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x368833){this['_setValue']('depthSofte'+'ning',_0x368833);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x42d629){this['_setValue']('sort',_0x42d629);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x144e66){this['_setValue']('blendType',_0x144e66);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x555a36){this['_setValue']('stretch',_0x555a36);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x47092b){this['_setValue']('alignToMot'+'ion',_0x47092b);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x5067cc){this['_setValue']('emitterSha'+'pe',_0x5067cc);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x1dfe7e){this['_setValue']('emitterExt'+'ents',_0x1dfe7e);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x117d88){this['_setValue']('emitterExt'+'entsInner',_0x117d88);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x5e53fc){this['_setValue']('emitterRad'+'ius',_0x5e53fc);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x5f24f4){this['_setValue']('emitterRad'+'iusInner',_0x5f24f4);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x54b924){this['_setValue']('initialVel'+'ocity',_0x54b924);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x58ec1d){this['_setValue']('wrap',_0x58ec1d);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x1eb59e){this['_setValue']('wrapBounds',_0x1eb59e);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x3ad8e7){this['_setValue']('localSpace',_0x3ad8e7);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x2e5c5d){this['_setValue']('screenSpac'+'e',_0x2e5c5d);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x25222a){this['_setValue']('colorMapAs'+'set',_0x25222a);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x1f5030){this['_setValue']('normalMapA'+'sset',_0x1f5030);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0x16ce52){this['_setValue']('mesh',_0x16ce52);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x4991e8){this['_setValue']('meshAsset',_0x4991e8);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x2689ea){this['_setValue']('renderAsse'+'t',_0x2689ea);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x169bf7){this['_setValue']('orientatio'+'n',_0x169bf7);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x3cacfe){this['_setValue']('particleNo'+'rmal',_0x3cacfe);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x5d806d){this['_setValue']('localVeloc'+'ityGraph',_0x5d806d);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x3b03f9){this['_setValue']('localVeloc'+'ityGraph2',_0x3b03f9);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x1506ae){this['_setValue']('velocityGr'+'aph',_0x1506ae);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x4e8c9c){this['_setValue']('velocityGr'+'aph2',_0x4e8c9c);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x5081f7){this['_setValue']('rotationSp'+'eedGraph',_0x5081f7);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x5ba10a){this['_setValue']('rotationSp'+'eedGraph2',_0x5ba10a);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x29d1d9){this['_setValue']('radialSpee'+'dGraph',_0x29d1d9);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x1af88e){this['_setValue']('radialSpee'+'dGraph2',_0x1af88e);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x465440){this['_setValue']('scaleGraph',_0x465440);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x2f1314){this['_setValue']('scaleGraph'+'2',_0x2f1314);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x3d8b54){this['_setValue']('colorGraph',_0x3d8b54);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x20c988){this['_setValue']('colorGraph'+'2',_0x20c988);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x271a1d){this['_setValue']('alphaGraph',_0x271a1d);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x15be70){this['_setValue']('alphaGraph'+'2',_0x15be70);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x125a58){this['_setValue']('colorMap',_0x125a58);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x479316){this['_setValue']('normalMap',_0x479316);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x57e2f8){this['_setValue']('animTilesX',_0x57e2f8);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x1b22a9){this['_setValue']('animTilesY',_0x1b22a9);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x299d75){this['_setValue']('animStartF'+'rame',_0x299d75);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x11d857){this['_setValue']('animNumFra'+'mes',_0x11d857);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x5a80a2){this['_setValue']('animNumAni'+'mations',_0x5a80a2);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x165310){this['_setValue']('animIndex',_0x165310);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x4275d2){this['_setValue']('randomizeA'+'nimIndex',_0x4275d2);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x527c77){this['_setValue']('animSpeed',_0x527c77);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x31ab9){this['_setValue']('animLoop',_0x31ab9);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x4c5727){this['_setValue']('layers',_0x4c5727);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x392d0e){this['_drawOrder']=_0x392d0e,this['emitter']&&(this['emitter']['drawOrder']=_0x392d0e);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0xbf07e8,_0x1762aa){const _0x401cd6=this['data'],_0x89c494=_0x401cd6[_0xbf07e8];_0x401cd6[_0xbf07e8]=_0x1762aa,this['fire']('set',_0xbf07e8,_0x89c494,_0x1762aa);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x37cad8=0xb56*0x1+-0x7b8+-0x1*0x39e;_0x37cad8<this['layers']['length'];_0x37cad8++){const _0x432562=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x37cad8]);_0x432562&&(_0x432562['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x432562);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x39319b=0xa4c*0x2+-0x2501+0x1069*0x1;_0x39319b<this['layers']['length'];_0x39319b++){const _0x1f6a1e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x39319b]);_0x1f6a1e&&_0x1f6a1e['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x10a646,_0x195850,_0x266662){if(this['emitter']){for(let _0x5c3ae0=0x7c*0xe+0x26e8+-0x2db0;_0x5c3ae0<_0x195850['length'];_0x5c3ae0++){const _0x229ae1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x195850[_0x5c3ae0]);_0x229ae1&&_0x229ae1['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x55051b=-0x25*0x7d+0x5b5*-0x3+0x1198*0x2;_0x55051b<_0x266662['length'];_0x55051b++){const _0x1a879b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x266662[_0x55051b]);_0x1a879b&&_0x1a879b['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0xc5da3,_0x44d53c){this['addMeshIns'+'tanceToLay'+'ers'](),_0xc5da3['off']('add',this['onLayerAdd'+'ed'],this),_0xc5da3['off']('remove',this['onLayerRem'+'oved'],this),_0x44d53c['on']('add',this['onLayerAdd'+'ed'],this),_0x44d53c['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xae39e1){!this['emitter']||this['layers']['indexOf'](_0xae39e1['id'])<-0x4*-0x3bb+-0x59*-0x17+0x1*-0x16eb||_0xae39e1['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x41aa9c){!this['emitter']||this['layers']['indexOf'](_0x41aa9c['id'])<0x1a3e+-0x1*0x1c04+0x1c6||_0x41aa9c['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x3a3b34){if(_0x3a3b34['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x3a3b34['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x3a3b34['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x3a3b34['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x3a3b34['resource'])this['_onColorMa'+'pAssetLoad'](_0x3a3b34);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3a3b34);}}['_unbindCol'+'orMapAsset'](_0x25e111){_0x25e111['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x25e111['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x25e111['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x25e111['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x1a96bd){this['colorMap']=_0x1a96bd['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x42217a){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x8b8f5f){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x8b8f5f);}['_onColorMa'+'pAssetChan'+'ge'](_0x377acd){}['onSetColor'+'MapAsset'](_0x574890,_0x43d76c,_0x5620ac){const _0x3af400=this['system']['app']['assets'];if(_0x43d76c){const _0x4cd6c9=_0x3af400['get'](_0x43d76c);_0x4cd6c9&&this['_unbindCol'+'orMapAsset'](_0x4cd6c9);}if(_0x5620ac){_0x5620ac instanceof me&&(this['data']['colorMapAs'+'set']=_0x5620ac['id'],_0x5620ac=_0x5620ac['id']);const _0x2e858e=_0x3af400['get'](_0x5620ac);_0x2e858e?this['_bindColor'+'MapAsset'](_0x2e858e):_0x3af400['once']('add:'+_0x5620ac,_0x7f5406=>{this['_bindColor'+'MapAsset'](_0x7f5406);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x2b0774){if(_0x2b0774['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x2b0774['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x2b0774['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x2b0774['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x2b0774['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x2b0774);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x2b0774);}}['_unbindNor'+'malMapAsse'+'t'](_0x1dd803){_0x1dd803['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x1dd803['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x1dd803['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x1dd803['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x44882f){this['normalMap']=_0x44882f['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x151342){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x515181){this['_onNormalM'+'apAssetUnl'+'oad'](_0x515181);}['_onNormalM'+'apAssetCha'+'nge'](_0x387a4a){}['onSetNorma'+'lMapAsset'](_0x360700,_0x5400d2,_0x464074){const _0x59807a=this['system']['app']['assets'];if(_0x5400d2){const _0x242074=_0x59807a['get'](_0x5400d2);_0x242074&&this['_unbindNor'+'malMapAsse'+'t'](_0x242074);}if(_0x464074){_0x464074 instanceof me&&(this['data']['normalMapA'+'sset']=_0x464074['id'],_0x464074=_0x464074['id']);const _0x346df9=_0x59807a['get'](_0x464074);_0x346df9?this['_bindNorma'+'lMapAsset'](_0x346df9):_0x59807a['once']('add:'+_0x464074,_0x3be7d0=>{this['_bindNorma'+'lMapAsset'](_0x3be7d0);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x598c73){if(_0x598c73['on']('load',this['_onMeshAss'+'etLoad'],this),_0x598c73['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x598c73['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x598c73['on']('change',this['_onMeshAss'+'etChange'],this),_0x598c73['resource'])this['_onMeshAss'+'etLoad'](_0x598c73);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x598c73);}}['_unbindMes'+'hAsset'](_0x37c15e){_0x37c15e['off']('load',this['_onMeshAss'+'etLoad'],this),_0x37c15e['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x37c15e['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x37c15e['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x37cbb3){this['_onMeshCha'+'nged'](_0x37cbb3['resource']);}['_onMeshAss'+'etUnload'](_0x411355){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x3c9791){this['_onMeshAss'+'etUnload'](_0x3c9791);}['_onMeshAss'+'etChange'](_0x293e3d){}['onSetMeshA'+'sset'](_0xebed04,_0x1a4772,_0x560429){const _0x8936ed=this['system']['app']['assets'];if(_0x1a4772){const _0x2723a9=_0x8936ed['get'](_0x1a4772);_0x2723a9&&this['_unbindMes'+'hAsset'](_0x2723a9);}if(_0x560429){_0x560429 instanceof me&&(this['data']['meshAsset']=_0x560429['id'],_0x560429=_0x560429['id']);const _0x35d6fd=_0x8936ed['get'](_0x560429);_0x35d6fd&&this['_bindMeshA'+'sset'](_0x35d6fd);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x3fad16,_0x4e7081,_0xd71953){!_0xd71953||_0xd71953 instanceof me||typeof _0xd71953=='number'?this['meshAsset']=_0xd71953:this['_onMeshCha'+'nged'](_0xd71953);}['_onMeshCha'+'nged'](_0x1442b7){_0x1442b7&&!(_0x1442b7 instanceof Ge)&&(_0x1442b7['meshInstan'+'ces'][0x1203+-0x64+-0x119f]?_0x1442b7=_0x1442b7['meshInstan'+'ces'][0x2559*-0x1+-0x3*0x5b5+0x4*0xd9e]['mesh']:_0x1442b7=null),this['data']['mesh']=_0x1442b7,this['emitter']&&(this['emitter']['mesh']=_0x1442b7,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x3214e8,_0x3fbcf9,_0x55176d){const _0x3b9dd6=this['system']['app']['assets'];if(_0x3fbcf9){const _0x40da0d=_0x3b9dd6['get'](_0x3fbcf9);_0x40da0d&&this['_unbindRen'+'derAsset'](_0x40da0d);}if(_0x55176d){_0x55176d instanceof me&&(this['data']['renderAsse'+'t']=_0x55176d['id'],_0x55176d=_0x55176d['id']);const _0x45a7f9=_0x3b9dd6['get'](_0x55176d);_0x45a7f9&&this['_bindRende'+'rAsset'](_0x45a7f9);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x4ee6fe){if(_0x4ee6fe['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x4ee6fe['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x4ee6fe['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x4ee6fe['resource'])this['_onRenderA'+'ssetLoad'](_0x4ee6fe);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4ee6fe);}}['_unbindRen'+'derAsset'](_0x422fa2){var _0x333ccf;_0x422fa2['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x422fa2['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x422fa2['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x333ccf=this['_evtSetMes'+'hes'])==null||_0x333ccf['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x337d7f){this['_onRenderC'+'hanged'](_0x337d7f['resource']);}['_onRenderA'+'ssetUnload'](_0x16187d){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x1e3f7b){this['_onRenderA'+'ssetUnload'](_0x1e3f7b);}['_onRenderC'+'hanged'](_0x231fae){var _0x587892;if(!_0x231fae){this['_onMeshCha'+'nged'](null);return;}(_0x587892=this['_evtSetMes'+'hes'])==null||_0x587892['off'](),this['_evtSetMes'+'hes']=_0x231fae['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x231fae['meshes']&&this['_onRenderS'+'etMeshes'](_0x231fae['meshes']);}['_onRenderS'+'etMeshes'](_0xc246c1){this['_onMeshCha'+'nged'](_0xc246c1&&_0xc246c1[0xc9*-0x20+0x6*0x3b+0x17be]);}['onSetLoop'](_0x43c254,_0x1459f5,_0x2f6edd){this['emitter']&&(this['emitter'][_0x43c254]=_0x2f6edd,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x319a89,_0x24e50f,_0xaa54d7){this['emitter']&&(this['emitter'][_0x319a89]=_0xaa54d7,this['emitter']['material']['blendType']=_0xaa54d7,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Na||(Na=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](os)),Na&&(Na['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x376*0xb+-0x1fed+-0x625)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Na&&(Na['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x10f1+-0x1f73+0x3065*0x1));}['onSetDepth'+'Softening'](_0x47ee97,_0x28d0ae,_0x4db6c5){_0x28d0ae!==_0x4db6c5&&(_0x4db6c5?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x47ee97]=_0x4db6c5)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x47ee97]=_0x4db6c5)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x172808,_0x2dabb7,_0x1ba92a){this['emitter']&&(this['emitter'][_0x172808]=_0x1ba92a,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x2fd06a,_0x26db2a,_0x38db1d){this['emitter']&&(this['emitter'][_0x2fd06a]=_0x38db1d,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x59fc01,_0x2b1761,_0x33bf1d){this['emitter']&&(this['emitter'][_0x59fc01]=_0x33bf1d,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x9acd9b=this['system']['app']['scene'],_0x4088b3=_0x9acd9b['layers'],_0x5ebeb2=this['data'];for(let _0x2ba54c=0x1*0x10d+-0x801+0x6f4,_0x41254b=sh['length'];_0x2ba54c<_0x41254b;_0x2ba54c++){let _0x400f4d=_0x5ebeb2[sh[_0x2ba54c]];if(_0x400f4d){if(!(_0x400f4d instanceof me)){if(parseInt(_0x400f4d,-0xb*0x22e+-0x8f2+0x20f6)>=-0xb*0x52+-0xae*0xf+0xdb8)_0x400f4d=this['system']['app']['assets']['get'](_0x400f4d);else continue;}_0x400f4d&&!_0x400f4d['resource']&&this['system']['app']['assets']['load'](_0x400f4d);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x181055=_0x5ebeb2['mesh'];_0x181055 instanceof Ge||(_0x181055=null),this['emitter']=new UA(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x5ebeb2['numParticl'+'es'],'emitterExtents':_0x5ebeb2['emitterExt'+'ents'],'emitterExtentsInner':_0x5ebeb2['emitterExt'+'entsInner'],'emitterRadius':_0x5ebeb2['emitterRad'+'ius'],'emitterRadiusInner':_0x5ebeb2['emitterRad'+'iusInner'],'emitterShape':_0x5ebeb2['emitterSha'+'pe'],'initialVelocity':_0x5ebeb2['initialVel'+'ocity'],'wrap':_0x5ebeb2['wrap'],'localSpace':_0x5ebeb2['localSpace'],'screenSpace':_0x5ebeb2['screenSpac'+'e'],'wrapBounds':_0x5ebeb2['wrapBounds'],'lifetime':_0x5ebeb2['lifetime'],'rate':_0x5ebeb2['rate'],'rate2':_0x5ebeb2['rate2'],'orientation':_0x5ebeb2['orientatio'+'n'],'particleNormal':_0x5ebeb2['particleNo'+'rmal'],'animTilesX':_0x5ebeb2['animTilesX'],'animTilesY':_0x5ebeb2['animTilesY'],'animStartFrame':_0x5ebeb2['animStartF'+'rame'],'animNumFrames':_0x5ebeb2['animNumFra'+'mes'],'animNumAnimations':_0x5ebeb2['animNumAni'+'mations'],'animIndex':_0x5ebeb2['animIndex'],'randomizeAnimIndex':_0x5ebeb2['randomizeA'+'nimIndex'],'animSpeed':_0x5ebeb2['animSpeed'],'animLoop':_0x5ebeb2['animLoop'],'startAngle':_0x5ebeb2['startAngle'],'startAngle2':_0x5ebeb2['startAngle'+'2'],'scaleGraph':_0x5ebeb2['scaleGraph'],'scaleGraph2':_0x5ebeb2['scaleGraph'+'2'],'colorGraph':_0x5ebeb2['colorGraph'],'colorGraph2':_0x5ebeb2['colorGraph'+'2'],'alphaGraph':_0x5ebeb2['alphaGraph'],'alphaGraph2':_0x5ebeb2['alphaGraph'+'2'],'localVelocityGraph':_0x5ebeb2['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x5ebeb2['localVeloc'+'ityGraph2'],'velocityGraph':_0x5ebeb2['velocityGr'+'aph'],'velocityGraph2':_0x5ebeb2['velocityGr'+'aph2'],'rotationSpeedGraph':_0x5ebeb2['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x5ebeb2['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x5ebeb2['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x5ebeb2['radialSpee'+'dGraph2'],'colorMap':_0x5ebeb2['colorMap'],'normalMap':_0x5ebeb2['normalMap'],'loop':_0x5ebeb2['loop'],'preWarm':_0x5ebeb2['preWarm'],'sort':_0x5ebeb2['sort'],'stretch':_0x5ebeb2['stretch'],'alignToMotion':_0x5ebeb2['alignToMot'+'ion'],'lighting':_0x5ebeb2['lighting'],'halfLambert':_0x5ebeb2['halfLamber'+'t'],'intensity':_0x5ebeb2['intensity'],'depthSoftening':_0x5ebeb2['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x181055,'depthWrite':_0x5ebeb2['depthWrite'],'noFog':_0x5ebeb2['noFog'],'node':this['entity'],'blendType':_0x5ebeb2['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x5ebeb2['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(-0x26a8+-0x1*0x2327+-0x49d*-0x10));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x9acd9b['on']('set:layers',this['onLayersCh'+'anged'],this),_0x4088b3&&(this['_evtLayerA'+'dded']=_0x4088b3['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x4088b3['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x5ebeb2['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x246285,_0x2270e7,_0x2e60aa;const _0x5ac774=this['system']['app']['scene']['layers'];(_0x246285=this['_evtLayers'+'Changed'])==null||_0x246285['off'](),this['_evtLayers'+'Changed']=null,_0x5ac774&&((_0x2270e7=this['_evtLayerA'+'dded'])==null||_0x2270e7['off'](),this['_evtLayerA'+'dded']=null,(_0x2e60aa=this['_evtLayerR'+'emoved'])==null||_0x2e60aa['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(-0x20*0xf1+0x43c+-0x3b3*-0x7)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x4b0609=-0xfa7*-0x1+-0x1827+0x880;_0x4b0609<sh['length'];_0x4b0609++){const _0x20dafc=sh[_0x4b0609];this['data'][_0x20dafc]&&(this[_0x20dafc]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(-0x1938+0x75*0x2d+0x4a8),this['emitter']['resetTime'](),this['emitter']['addTime'](-0x1a3c+0x1*0x1856+0x1e6,!(0x2*0x1104+0xd45+0x1*-0x2f4d)));}['pause'](){this['data']['paused']=!(-0xa*0x366+0x1850+0x9ac);}['unpause'](){this['data']['paused']=!(-0x4*0x772+-0x28c*0x2+0x22e1);}['play'](){this['data']['paused']=!(-0x5ed*-0x3+0xac*-0x4+0x78b*-0x2),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(-0x2*-0x772+-0x1dc8+0x1*0xee4),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(0x11a5*-0x1+0x1483+-0x1*0x2dd):this['emitter']&&this['emitter']['loop']?!(-0x59*0x4f+0x1542+-0xe3*-0x7):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x341ebf}=this;_0x341ebf&&!_0x341ebf['inTools']&&(_0x341ebf['inTools']=!(0x115f*0x1+0xf*0x14e+-0x24f1),this['rebuild']());}['rebuild'](){const _0x28b41d=this['enabled'];this['enabled']=!(0x92d+0x22c7+0x2bf3*-0x1),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x28b41d;}}class fR{constructor(){this['numParticl'+'es']=-0x192c+0xf8c+0x55*0x1d,this['rate']=0x161+-0x267c+-0x1*-0x251c,this['rate2']=null,this['startAngle']=0x209d*-0x1+0x6*-0x4f0+0x8d*0x71,this['startAngle'+'2']=null,this['lifetime']=-0x15*0x12d+0x5e*-0x3b+0x2e8d,this['emitterExt'+'ents']=new I(),this['emitterExt'+'entsInner']=new I(),this['emitterRad'+'ius']=-0x18b1+0x1b6f*0x1+-0x12*0x27,this['emitterRad'+'iusInner']=0x1242+0x24f2+-0x3734,this['emitterSha'+'pe']=Ys,this['initialVel'+'ocity']=0x9e6*-0x1+-0x5e6+0xfcc,this['wrap']=!(-0x3*-0xba5+0x1d74+-0x192*0x29),this['wrapBounds']=new I(),this['localSpace']=!(-0x1*0x1496+-0x12*-0x167+-0x4a7),this['screenSpac'+'e']=!(-0x59*0x29+-0x1*-0x13af+0x3*-0x1cf),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(0x1b2e+-0x8db*-0x3+-0x1*0x35bf),this['preWarm']=!(-0x1*0x1cfa+0x2681+0x1*-0x986),this['sort']=-0x6*0x31f+0x1909+-0x1*0x64f,this['mode']=dy,this['scene']=null,this['lighting']=!(-0x1070+0x131d+-0x72*0x6),this['halfLamber'+'t']=!(-0x1e52+0x1*-0x3e6+0x2239),this['intensity']=0xe03+0x212d+0x101*-0x2f,this['stretch']=-0x1f48+0x1223+-0x1*-0xd25,this['alignToMot'+'ion']=!(-0xdc4*-0x1+-0xa22*-0x1+-0x1*0x17e5),this['depthSofte'+'ning']=0x2588+-0x2f*-0xb6+0x3f1*-0x12,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(-0x1*-0x19d1+0x22a0+-0x3c70),this['noFog']=!(0xe37+0x4*0x8b+-0x1062),this['orientatio'+'n']=Vh,this['particleNo'+'rmal']=new I(-0x214c+-0x682+0x1*0x27ce,-0x1e29+-0x224b+0x1d*0x239,-0x37b*-0x1+0x14b*-0xf+0xfea),this['animTilesX']=-0x1b21+-0x400+0x1f22,this['animTilesY']=-0x496+0x13*-0x1f7+0x29ec,this['animStartF'+'rame']=-0x124c+0x172e+0x19*-0x32,this['animNumFra'+'mes']=-0x21ad+0x18de*0x1+-0x18*-0x5e,this['animNumAni'+'mations']=0x2bd*0xc+-0x23aa+0x1*0x2cf,this['animIndex']=0x580+-0x12b3+0xd33,this['randomizeA'+'nimIndex']=!(0x18ca*0x1+0x13f3+-0x2cbc),this['animSpeed']=0x18*-0xb8+0x14e0+-0x3*0x135,this['animLoop']=!(-0x1*-0x101+-0x3bd*-0x6+0x359*-0x7),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Gs,this['enabled']=!(-0x53*0x9+0x43*0x73+-0x1b2e),this['paused']=!(-0x15d5+-0x15*-0xd3+0x487),this['autoPlay']=!(-0x205a+-0xcd*0x17+0x32c5),this['layers']=[Wi];}}const uR='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',mR='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),pR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',_R='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',gR='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',SR='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',yR='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),vR='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',xR='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),TR='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',wR='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',ER='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',AR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',bR='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',CR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',PR='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',MR='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),IR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',DR='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',LR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',RR='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',OR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),FR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',NR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',kR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',UR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',BR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',zR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),VR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',GR='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',HR='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',WR='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',$R='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',XR='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',qR='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',jR='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',YR='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),KR='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),ZR='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',QR='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',JR='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',e3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',t3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',s3={'particlePS':uR,'particleVS':mR,'particleAnimFrameClampVS':pR,'particleAnimFrameLoopVS':_R,'particleAnimTexVS':gR,'particleInputFloatPS':SR,'particleInputRgba8PS':yR,'particleOutputFloatPS':vR,'particleOutputRgba8PS':xR,'particleUpdaterAABBPS':TR,'particleUpdaterEndPS':wR,'particleUpdaterInitPS':ER,'particleUpdaterNoRespawnPS':AR,'particleUpdaterOnStopPS':bR,'particleUpdaterRespawnPS':CR,'particleUpdaterSpherePS':PR,'particleUpdaterStartPS':MR,'particle_billboardVS':IR,'particle_blendAddPS':DR,'particle_blendMultiplyPS':LR,'particle_blendNormalPS':RR,'particle_cpuVS':OR,'particle_cpu_endVS':FR,'particle_customFaceVS':NR,'particle_endPS':kR,'particle_endVS':UR,'particle_halflambertPS':BR,'particle_initVS':zR,'particle_lambertPS':VR,'particle_lightingPS':GR,'particle_localShiftVS':HR,'particle_meshVS':WR,'particle_normalVS':$R,'particle_normalMapPS':XR,'particle_pointAlongVS':qR,'particle_simulationPS':jR,'particle_shaderPS':YR,'particle_shaderVS':KR,'particle_softPS':ZR,'particle_softVS':QR,'particle_stretchVS':JR,'particle_TBNVS':e3,'particle_wrapVS':t3},i3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',r3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),a3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',n3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',o3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',l3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',h3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),c3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',d3='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),f3='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',u3='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',m3='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),p3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',_3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',g3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',S3='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',y3='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),v3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',x3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',T3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',w3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',E3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),A3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',b3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',C3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',P3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',M3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',I3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),D3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',L3='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',R3='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',O3='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',F3='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',N3='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',k3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',U3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',B3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),z3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),V3='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',G3='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',H3='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',W3='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',$3='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',X3={'particlePS':i3,'particleVS':r3,'particleAnimFrameClampVS':a3,'particleAnimFrameLoopVS':n3,'particleAnimTexVS':o3,'particleInputFloatPS':l3,'particleInputRgba8PS':h3,'particleOutputFloatPS':c3,'particleOutputRgba8PS':d3,'particleUpdaterAABBPS':f3,'particleUpdaterEndPS':u3,'particleUpdaterInitPS':m3,'particleUpdaterNoRespawnPS':p3,'particleUpdaterOnStopPS':_3,'particleUpdaterRespawnPS':g3,'particleUpdaterSpherePS':S3,'particleUpdaterStartPS':y3,'particle_billboardVS':v3,'particle_blendAddPS':x3,'particle_blendMultiplyPS':T3,'particle_blendNormalPS':w3,'particle_cpuVS':E3,'particle_cpu_endVS':A3,'particle_customFaceVS':b3,'particle_endPS':C3,'particle_endVS':P3,'particle_halflambertPS':M3,'particle_initVS':I3,'particle_lambertPS':D3,'particle_lightingPS':L3,'particle_localShiftVS':R3,'particle_meshVS':O3,'particle_normalVS':F3,'particle_normalMapPS':N3,'particle_pointAlongVS':k3,'particle_simulationPS':U3,'particle_shaderPS':B3,'particle_shaderVS':z3,'particle_softPS':V3,'particle_softVS':G3,'particle_stretchVS':H3,'particle_TBNVS':W3,'particle_wrapVS':$3},q3=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class j3 extends lt{constructor(_0xdbada2){super(_0xdbada2),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=dR,this['DataType']=fR,this['schema']=q3,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Ce['get'](_0xdbada2['graphicsDe'+'vice'],ze)['add'](s3),Ce['get'](_0xdbada2['graphicsDe'+'vice'],st)['add'](X3);}['initialize'+'ComponentD'+'ata'](_0x239871,_0x28e823,_0x534532){const _0x2a3960={};_0x534532=[];const _0x457ccc=this['propertyTy'+'pes'];(_0x28e823['mesh']instanceof me||typeof _0x28e823['mesh']=='number')&&(_0x28e823['meshAsset']=_0x28e823['mesh'],delete _0x28e823['mesh']);for(const _0x3d0f27 in _0x28e823){if(_0x28e823['hasOwnProp'+'erty'](_0x3d0f27)&&(_0x534532['push'](_0x3d0f27),_0x2a3960[_0x3d0f27]=_0x28e823[_0x3d0f27]),_0x457ccc[_0x3d0f27]==='vec3')Array['isArray'](_0x2a3960[_0x3d0f27])&&(_0x2a3960[_0x3d0f27]=new I(_0x2a3960[_0x3d0f27][-0x15c1+0x1*0xb6a+0x1*0xa57],_0x2a3960[_0x3d0f27][0x1271+-0x14e5+0x275*0x1],_0x2a3960[_0x3d0f27][-0x1*0xa7d+-0x20ec+0x9*0x4d3]));else{if(_0x457ccc[_0x3d0f27]==='curve'){if(!(_0x2a3960[_0x3d0f27]instanceof Bs)){const _0x3bd20c=_0x2a3960[_0x3d0f27]['type'];_0x2a3960[_0x3d0f27]=new Bs(_0x2a3960[_0x3d0f27]['keys']),_0x2a3960[_0x3d0f27]['type']=_0x3bd20c;}}else{if(_0x457ccc[_0x3d0f27]==='curveset'&&!(_0x2a3960[_0x3d0f27]instanceof Wr)){const _0x275a85=_0x2a3960[_0x3d0f27]['type'];_0x2a3960[_0x3d0f27]=new Wr(_0x2a3960[_0x3d0f27]['keys']),_0x2a3960[_0x3d0f27]['type']=_0x275a85;}}}_0x2a3960['layers']&&Array['isArray'](_0x2a3960['layers'])&&(_0x2a3960['layers']=_0x2a3960['layers']['slice'](-0x1*0x1ea2+-0x2*0x1201+-0x5*-0xd54));}super['initialize'+'ComponentD'+'ata'](_0x239871,_0x2a3960,_0x534532);}['cloneCompo'+'nent'](_0xfb9f10,_0x40e3b0){const _0x300a68=_0xfb9f10['particlesy'+'stem']['data'],_0x51d8fb=this['schema'],_0x492862={};for(let _0x2e5e4f=-0x9c6+-0x1051*-0x2+-0x214*0xb,_0x14c8d0=_0x51d8fb['length'];_0x2e5e4f<_0x14c8d0;_0x2e5e4f++){const _0x3c97ed=_0x51d8fb[_0x2e5e4f];let _0x2d407a=_0x300a68[_0x3c97ed];_0x2d407a instanceof I||_0x2d407a instanceof Bs||_0x2d407a instanceof Wr?(_0x2d407a=_0x2d407a['clone'](),_0x492862[_0x3c97ed]=_0x2d407a):_0x3c97ed==='layers'?_0x492862['layers']=_0x300a68['layers']['slice'](-0x39a+-0x1058*-0x2+0x1d16*-0x1):_0x2d407a!=null&&(_0x492862[_0x3c97ed]=_0x2d407a);}return this['addCompone'+'nt'](_0x40e3b0,_0x492862);}['onUpdate'](_0x43a60a){const _0x18c44e=this['store'],_0x434fa9=this['app']['stats']['particles'],_0x416668=this['app']['scene']['layers'];for(let _0x42ce94=0x2300+-0x566*-0x1+0x2866*-0x1;_0x42ce94<_0x416668['layerList']['length'];_0x42ce94++)_0x416668['layerList'][_0x42ce94]['requiresLi'+'ghtCube']=!(0x3*0x437+0x25aa+-0x324e);for(const _0x287911 in _0x18c44e)if(_0x18c44e['hasOwnProp'+'erty'](_0x287911)){const _0x6179f1=_0x18c44e[_0x287911],_0x1015e4=_0x6179f1['entity'],_0xa51392=_0x6179f1['data'];if(_0xa51392['enabled']&&_0x1015e4['enabled']){const _0x4b42f5=_0x1015e4['particlesy'+'stem']['emitter'];if(!(_0x4b42f5!=null&&_0x4b42f5['meshInstan'+'ce']['visible']))continue;if(_0x4b42f5['lighting']){const _0x581bd0=_0xa51392['layers'];for(let _0x513a7f=0x891*-0x3+-0x2561+0x3f14;_0x513a7f<_0x581bd0['length'];_0x513a7f++){const _0x4d9898=_0x416668['getLayerBy'+'Id'](_0x581bd0[_0x513a7f]);_0x4d9898&&(_0x4d9898['requiresLi'+'ghtCube']=!(-0x7*0x442+-0x7*-0x3fd+0x1e3));}}if(!_0xa51392['paused']){let _0xc6ac15=-0xb2e+0x2580+0x1*-0x1a52;if(_0x4b42f5['simTime']+=_0x43a60a,_0x4b42f5['simTime']>=_0x4b42f5['fixedTimeS'+'tep']&&(_0xc6ac15=Math['floor'](_0x4b42f5['simTime']/_0x4b42f5['fixedTimeS'+'tep']),_0x4b42f5['simTime']-=_0xc6ac15*_0x4b42f5['fixedTimeS'+'tep']),_0xc6ac15){_0xc6ac15=Math['min'](_0xc6ac15,_0x4b42f5['maxSubStep'+'s']);for(let _0xebf2ac=-0x6bf*-0x2+0x1dd*0x5+0x1*-0x16cf;_0xebf2ac<_0xc6ac15;_0xebf2ac++)_0x4b42f5['addTime'](_0x4b42f5['fixedTimeS'+'tep'],!(-0x1a68+0xb20+0xf49));_0x434fa9['_updatesPe'+'rFrame']+=_0xc6ac15,_0x434fa9['_frameTime']+=_0x4b42f5['_addTimeTi'+'me'],_0x4b42f5['_addTimeTi'+'me']=-0x1fbb*-0x1+0x86*0x40+0x413b*-0x1;}_0x4b42f5['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x549df9,_0x47becd){_0x47becd['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class Y3 extends jc{constructor(_0x1dff1a,_0x411a1){super(),this['skin']=_0x1dff1a,this['skinInstan'+'ce']=_0x411a1;}}const Os=class Os{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Os['_skinInsta'+'nceCache']['forEach']((_0x587090,_0x11efd1)=>{console['log'](_0x11efd1['name']+':\x20Array('+_0x587090['length']+')');for(let _0x542f5c=-0x1eb1+0x1*0x1e9d+-0xa*-0x2;_0x542f5c<_0x587090['length'];_0x542f5c++)console['log']('\x20\x20'+_0x542f5c+(':\x20RefCount'+'\x20')+_0x587090[_0x542f5c]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x4a91e2,_0x31bc23,_0x2f043d){let _0x41e1ee=Os['getCachedS'+'kinInstanc'+'e'](_0x4a91e2,_0x31bc23);return _0x41e1ee||(_0x41e1ee=new hl(_0x4a91e2),_0x41e1ee['resolve'](_0x31bc23,_0x2f043d),Os['addCachedS'+'kinInstanc'+'e'](_0x4a91e2,_0x31bc23,_0x41e1ee)),_0x41e1ee;}static['getCachedS'+'kinInstanc'+'e'](_0x42e5e0,_0x57099b){let _0x3a27e7=null;const _0x283fb1=Os['_skinInsta'+'nceCache']['get'](_0x57099b);if(_0x283fb1){const _0x47bba0=_0x283fb1['find'](_0x3f8e58=>_0x3f8e58['skin']===_0x42e5e0);_0x47bba0&&(_0x47bba0['incRefCoun'+'t'](),_0x3a27e7=_0x47bba0['skinInstan'+'ce']);}return _0x3a27e7;}static['addCachedS'+'kinInstanc'+'e'](_0x2ba706,_0x6b1168,_0x14e8ed){let _0x501b64=Os['_skinInsta'+'nceCache']['get'](_0x6b1168);_0x501b64||(_0x501b64=[],Os['_skinInsta'+'nceCache']['set'](_0x6b1168,_0x501b64));let _0x1fd8c8=_0x501b64['find'](_0x839004=>_0x839004['skin']===_0x2ba706);_0x1fd8c8||(_0x1fd8c8=new Y3(_0x2ba706,_0x14e8ed),_0x501b64['push'](_0x1fd8c8)),_0x1fd8c8['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x1b50b9){if(_0x1b50b9){const _0x3ed721=_0x1b50b9['rootBone'];if(_0x3ed721){const _0x23cfa1=Os['_skinInsta'+'nceCache']['get'](_0x3ed721);if(_0x23cfa1){const _0x105910=_0x23cfa1['findIndex'](_0x2741e5=>_0x2741e5['skinInstan'+'ce']===_0x1b50b9);if(_0x105910>=0x2430+0x177f*0x1+-0x3baf){const _0x3132e7=_0x23cfa1[_0x105910];_0x3132e7['decRefCoun'+'t'](),_0x3132e7['refCount']===0x1f2f+0x22b5+-0x41e4&&(_0x23cfa1['splice'](_0x105910,0x22cc+0x10a2*0x1+0x336d*-0x1),_0x23cfa1['length']||Os['_skinInsta'+'nceCache']['delete'](_0x3ed721),_0x1b50b9&&(_0x1b50b9['destroy'](),_0x3132e7['skinInstan'+'ce']=null));}}}}}};h(Os,'_skinInsta'+'nceCache',new Map());let $o=Os;class Xo{constructor(_0x5b4caf,_0x28e4b4,_0x31aaa3,_0x4df8b4,_0x3adafa){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x5b4caf,this['parent']=_0x28e4b4,this['_scope']=_0x3adafa,this['_registry']=_0x31aaa3,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x4df8b4['load'],this['_onAssetAd'+'d']=_0x4df8b4['add'],this['_onAssetRe'+'move']=_0x4df8b4['remove'],this['_onAssetUn'+'load']=_0x4df8b4['unload']);}set['id'](_0x475ba9){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x475ba9,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x44f8a7){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x44f8a7,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x93a72e,_0x55fcc3,_0x1a9d75,_0x465ce4,_0x28a26e,_0x2cfc2b,_0x3a0cee;this['id']&&((_0x93a72e=this['_evtLoadBy'+'Id'])==null||_0x93a72e['off'](),this['_evtLoadBy'+'Id']=null,(_0x55fcc3=this['_evtAddByI'+'d'])==null||_0x55fcc3['off'](),this['_evtAddByI'+'d']=null,(_0x1a9d75=this['_evtRemove'+'ById'])==null||_0x1a9d75['off'](),this['_evtRemove'+'ById']=null,(_0x465ce4=this['_evtUnload'+'ById'])==null||_0x465ce4['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x28a26e=this['_evtLoadBy'+'Url'])==null||_0x28a26e['off'](),this['_evtLoadBy'+'Url']=null,(_0x2cfc2b=this['_evtAddByU'+'rl'])==null||_0x2cfc2b['off'](),this['_evtAddByU'+'rl']=null,(_0x3a0cee=this['_evtRemove'+'ByUrl'])==null||_0x3a0cee['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x1880f0){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x1880f0);}['_onAdd'](_0xc8537a){this['asset']=_0xc8537a,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0xc8537a);}['_onRemove'](_0x18932e){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x18932e),this['asset']=null;}['_onUnload'](_0x3e169c){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x3e169c);}}class pv extends we{constructor(_0x20449a,_0x51c98e){super(_0x20449a,_0x51c98e),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(0xdf0+-0x2232+0x1442)),h(this,'_receiveSh'+'adows',!(-0xb*-0x2c4+-0x1*0x1e38+-0x34)),h(this,'_castShado'+'wsLightmap',!(0x3*0x760+-0xdd*-0xa+-0x1ec2*0x1)),h(this,'_lightmapp'+'ed',!(0x3*-0x409+-0x1469+0x2085)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0xa1*-0x1+0x9ac+-0xa4c),h(this,'isStatic',!(0x4e3+-0x2b2+-0x14*0x1c)),h(this,'_batchGrou'+'pId',-(-0x10c3+0xfe8+0xdc)),h(this,'_layers',[Wi]),h(this,'_renderSty'+'le',Qa),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new Xo('asset',this,_0x20449a['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x20449a['defaultMat'+'erial'],_0x51c98e['on']('remove',this['onRemoveCh'+'ild'],this),_0x51c98e['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x51c98e['on']('insert',this['onInsertCh'+'ild'],this),_0x51c98e['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x4ec2e9){this['_renderSty'+'le']!==_0x4ec2e9&&(this['_renderSty'+'le']=_0x4ec2e9,We['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x4ec2e9));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x5b1dd6){this['_customAab'+'b']=_0x5b1dd6;const _0x292194=this['_meshInsta'+'nces'];if(_0x292194){for(let _0x120334=0xc2b+0x1d07+-0x2932;_0x120334<_0x292194['length'];_0x120334++)_0x292194[_0x120334]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0xe01d9f){if(this['_type']!==_0xe01d9f&&(this['_area']=null,this['_type']=_0xe01d9f,this['destroyMes'+'hInstances'](),_0xe01d9f!=='asset')){let _0x2da405=this['_material'];(!_0x2da405||_0x2da405===this['system']['defaultMat'+'erial'])&&(_0x2da405=this['_materialR'+'eferences'][0x13ca+0x5b*0x5d+-0x34d9]&&this['_materialR'+'eferences'][-0x1*0x1f81+-0x20a3+0x4024]['asset']&&this['_materialR'+'eferences'][-0x275*-0x1+0xef0+-0x1165]['asset']['resource']);const _0x5c5e90=fv(this['system']['app']['graphicsDe'+'vice'],_0xe01d9f);this['_area']=_0x5c5e90['area'],this['meshInstan'+'ces']=[new We(_0x5c5e90['mesh'],_0x2da405||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x754b8f){if(M['assert'](Array['isArray'](_0x754b8f),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x754b8f,this['_meshInsta'+'nces']){const _0x22c996=this['_meshInsta'+'nces'];for(let _0x3247e0=-0x2*0x315+0xd2a+-0x700;_0x3247e0<_0x22c996['length'];_0x3247e0++)_0x22c996[_0x3247e0]['node']||(_0x22c996[_0x3247e0]['node']=this['entity']),_0x22c996[_0x3247e0]['castShadow']=this['_castShado'+'ws'],_0x22c996[_0x3247e0]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x22c996[_0x3247e0]['renderStyl'+'e']=this['_renderSty'+'le'],_0x22c996[_0x3247e0]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x22c996[_0x3247e0]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x4c6118){if(_0x4c6118!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x4c6118;const _0x2d0488=this['_meshInsta'+'nces'];if(_0x2d0488){for(let _0x372c3d=-0x229f+-0x5*0x705+0x4*0x116e;_0x372c3d<_0x2d0488['length'];_0x372c3d++)_0x2d0488[_0x372c3d]['setLightma'+'pped'](_0x4c6118);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x13106f){if(this['_castShado'+'ws']!==_0x13106f){const _0x5661da=this['_meshInsta'+'nces'];if(_0x5661da){const _0xe0dab3=this['layers'],_0x28ac79=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x13106f)for(let _0x48e16e=0x2687+0x1dc*0xc+-0x3cd7;_0x48e16e<_0xe0dab3['length'];_0x48e16e++){const _0x284262=_0x28ac79['layers']['getLayerBy'+'Id'](this['layers'][_0x48e16e]);_0x284262&&_0x284262['removeShad'+'owCasters'](_0x5661da);}for(let _0x2905fb=-0x57*-0x6a+0xb*0x16+-0x24f8;_0x2905fb<_0x5661da['length'];_0x2905fb++)_0x5661da[_0x2905fb]['castShadow']=_0x13106f;if(!this['_castShado'+'ws']&&_0x13106f)for(let _0x5a4656=-0x1847+0x2641+-0x6fd*0x2;_0x5a4656<_0xe0dab3['length'];_0x5a4656++){const _0x248740=_0x28ac79['layers']['getLayerBy'+'Id'](_0xe0dab3[_0x5a4656]);_0x248740&&_0x248740['addShadowC'+'asters'](_0x5661da);}}this['_castShado'+'ws']=_0x13106f;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x577a76){if(this['_receiveSh'+'adows']!==_0x577a76){this['_receiveSh'+'adows']=_0x577a76;const _0xdd9a39=this['_meshInsta'+'nces'];if(_0xdd9a39){for(let _0x1caf8d=0x526+-0x1*-0x1f2f+-0x2455;_0x1caf8d<_0xdd9a39['length'];_0x1caf8d++)_0xdd9a39[_0x1caf8d]['receiveSha'+'dow']=_0x577a76;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x4c8582){this['_castShado'+'wsLightmap']=_0x4c8582;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x302ce0){this['_lightmapS'+'izeMultipl'+'ier']=_0x302ce0;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x1359be){const _0x318c9e=this['system']['app']['scene']['layers'];let _0x58b31e;if(this['_meshInsta'+'nces']){for(let _0x1501a9=0x1d82+0x2329+-0x40ab;_0x1501a9<this['_layers']['length'];_0x1501a9++)_0x58b31e=_0x318c9e['getLayerBy'+'Id'](this['_layers'][_0x1501a9]),_0x58b31e&&_0x58b31e['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=-0x47*0x53+0x1a2c+0x3*-0x10d;for(let _0x421567=0xcec*0x1+-0x2*0x97d+0x60e;_0x421567<_0x1359be['length'];_0x421567++)this['_layers'][_0x421567]=_0x1359be[_0x421567];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x4e16cb=0x19d5+-0x4a3+-0x1532;_0x4e16cb<this['_layers']['length'];_0x4e16cb++)_0x58b31e=_0x318c9e['getLayerBy'+'Id'](this['_layers'][_0x4e16cb]),_0x58b31e&&_0x58b31e['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x1acc32){var _0x1ca2ce,_0x18e5ad;this['_batchGrou'+'pId']!==_0x1acc32&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x537+-0x1*-0x235f+0x28*-0xc1&&((_0x1ca2ce=this['system']['app']['batcher'])==null||_0x1ca2ce['remove'](mt['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1acc32>=0xd*0x2e9+-0x1582*0x1+-0x1053&&((_0x18e5ad=this['system']['app']['batcher'])==null||_0x18e5ad['insert'](mt['RENDER'],_0x1acc32,this['entity'])),_0x1acc32<-0x1535+0x791+0xda4&&this['_batchGrou'+'pId']>=-0x5*-0x768+-0x2*-0x123d+-0x4982&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x1acc32);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x4fbdef){if(this['_material']!==_0x4fbdef&&(this['_material']=_0x4fbdef,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x36a47f=-0x1a7c+0x674*0x5+-0xa*0x94;_0x36a47f<this['_meshInsta'+'nces']['length'];_0x36a47f++)this['_meshInsta'+'nces'][_0x36a47f]['material']=_0x4fbdef;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0xd6f6f1=[]){if(this['_materialR'+'eferences']['length']>_0xd6f6f1['length']){for(let _0x570638=_0xd6f6f1['length'];_0x570638<this['_materialR'+'eferences']['length'];_0x570638++)this['_materialR'+'eferences'][_0x570638]['id']=null;this['_materialR'+'eferences']['length']=_0xd6f6f1['length'];}for(let _0x5c09b6=-0x1*0x2167+-0x2b8+0x241f;_0x5c09b6<_0xd6f6f1['length'];_0x5c09b6++)if(this['_materialR'+'eferences'][_0x5c09b6]||this['_materialR'+'eferences']['push'](new Xo(_0x5c09b6,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0xd6f6f1[_0x5c09b6]){const _0x45955e=_0xd6f6f1[_0x5c09b6]instanceof me?_0xd6f6f1[_0x5c09b6]['id']:_0xd6f6f1[_0x5c09b6];this['_materialR'+'eferences'][_0x5c09b6]['id']!==_0x45955e&&(this['_materialR'+'eferences'][_0x5c09b6]['id']=_0x45955e),this['_materialR'+'eferences'][_0x5c09b6]['asset']&&this['_onMateria'+'lAdded'](_0x5c09b6,this,this['_materialR'+'eferences'][_0x5c09b6]['asset']);}else this['_materialR'+'eferences'][_0x5c09b6]['id']=null,this['_meshInsta'+'nces'][_0x5c09b6]&&(this['_meshInsta'+'nces'][_0x5c09b6]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x341fbe=>_0x341fbe['id']);}set['asset'](_0x29e1af){const _0x6621a6=_0x29e1af instanceof me?_0x29e1af['id']:_0x29e1af;this['_assetRefe'+'rence']['id']!==_0x6621a6&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x6621a6,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x3291ca){const _0x1a9e45=_0x3291ca instanceof me?_0x3291ca['id']:_0x3291ca;this['_assetRefe'+'rence']['id']=_0x1a9e45;}set['rootBone'](_0x122065){if(this['_rootBone']!==_0x122065){const _0x19b37d=typeof _0x122065=='string';if(this['_rootBone']&&_0x19b37d&&this['_rootBone']['getGuid']()===_0x122065)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x122065 instanceof He?this['_rootBone']=_0x122065:_0x19b37d?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x122065)||null,this['_rootBone']||M['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x1deb81=this['_meshInsta'+'nces'];if(_0x1deb81){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x1f0f60=-0x2*-0xeef+-0x29*-0xca+-0x4*0xf8e;_0x1f0f60<_0x1deb81['length'];_0x1f0f60++)_0x1deb81[_0x1f0f60]['destroy']();this['_meshInsta'+'nces']['length']=-0x1e91+-0x1e2a+0x3cbb*0x1;}}['addToLayer'+'s'](){const _0x5e02df=this['system']['app']['scene']['layers'];for(let _0x5afe27=0x161*-0x4+0x173d+-0x11b9;_0x5afe27<this['_layers']['length'];_0x5afe27++){const _0x49332c=_0x5e02df['getLayerBy'+'Id'](this['_layers'][_0x5afe27]);_0x49332c&&_0x49332c['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x54a816=this['system']['app']['scene']['layers'];for(let _0x3a78e2=0x1431*0x1+-0xead+0x2*-0x2c2;_0x3a78e2<this['_layers']['length'];_0x3a78e2++){const _0x504e0b=_0x54a816['getLayerBy'+'Id'](this['_layers'][_0x3a78e2]);_0x504e0b&&_0x504e0b['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x4f3586=0x125d*-0x2+0x1c00+-0x1*-0x8ba;_0x4f3586<this['_materialR'+'eferences']['length'];_0x4f3586++)this['_materialR'+'eferences'][_0x4f3586]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x41fb40,_0x3cac10){this['addToLayer'+'s'](),_0x41fb40['off']('add',this['onLayerAdd'+'ed'],this),_0x41fb40['off']('remove',this['onLayerRem'+'oved'],this),_0x3cac10['on']('add',this['onLayerAdd'+'ed'],this),_0x3cac10['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4e01ca){this['layers']['indexOf'](_0x4e01ca['id'])<-0x415*-0x6+0x13f1+-0x36b*0xd||_0x4e01ca['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x3d735a){this['layers']['indexOf'](_0x3d735a['id'])<-0x26c5+0x6b+0x265a*0x1||_0x3d735a['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x5797aa;const _0x1f1066=this['system']['app'],_0x38b002=_0x1f1066['scene'],_0x484f28=_0x38b002['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x38b002['on']('set:layers',this['onLayersCh'+'anged'],this),_0x484f28&&(this['_evtLayerA'+'dded']=_0x484f28['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x484f28['on']('remove',this['onLayerRem'+'oved'],this));const _0x4423b4=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x4423b4&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0xfdfed8=0x25ac+0x1*0x896+-0x2e42;_0xfdfed8<this['_materialR'+'eferences']['length'];_0xfdfed8++)this['_materialR'+'eferences'][_0xfdfed8]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0xfdfed8]['asset']);this['_batchGrou'+'pId']>=0x1*0x1097+-0x6cb*-0x2+-0x1e2d&&((_0x5797aa=_0x1f1066['batcher'])==null||_0x5797aa['insert'](mt['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x3256fe,_0x4298a2,_0x1179e1,_0x454588;const _0x593273=this['system']['app'],_0x525a18=_0x593273['scene']['layers'];(_0x3256fe=this['_evtLayers'+'Changed'])==null||_0x3256fe['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x525a18&&((_0x4298a2=this['_evtLayerA'+'dded'])==null||_0x4298a2['off'](),this['_evtLayerA'+'dded']=null,(_0x1179e1=this['_evtLayerR'+'emoved'])==null||_0x1179e1['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x1e38+-0x2b*-0x33+0x15a7*0x1&&((_0x454588=_0x593273['batcher'])==null||_0x454588['remove'](mt['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x456b04=-0x1*0x3e+-0x1*0x47b+-0x3*-0x193;_0x456b04<this['_meshInsta'+'nces']['length'];_0x456b04++)this['_meshInsta'+'nces'][_0x456b04]['visible']=!(0xac4+0x1*0x2397+0x2ba*-0x11);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x423174=-0x16bc+-0x3*0x6df+0x2b59;_0x423174<this['_meshInsta'+'nces']['length'];_0x423174++)this['_meshInsta'+'nces'][_0x423174]['visible']=!(-0x1d*0x7f+-0x4eb*-0x1+0x978);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x29f44e;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x848187=this['_assetRefe'+'rence']['asset']['resource'];(_0x29f44e=this['_evtSetMes'+'hes'])==null||_0x29f44e['off'](),this['_evtSetMes'+'hes']=_0x848187['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x848187['meshes']&&this['_onSetMesh'+'es'](_0x848187['meshes']);}}['_onSetMesh'+'es'](_0x152764){this['_cloneMesh'+'es'](_0x152764);}['_clearSkin'+'Instances'](){for(let _0x1d0884=-0x8*-0x343+-0x249f+0xa87;_0x1d0884<this['_meshInsta'+'nces']['length'];_0x1d0884++){const _0x238b2e=this['_meshInsta'+'nces'][_0x1d0884];$o['removeCach'+'edSkinInst'+'ance'](_0x238b2e['skinInstan'+'ce']),_0x238b2e['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof He)for(let _0x205b66=0x17a3+-0xfe9*0x2+0x82f;_0x205b66<this['_meshInsta'+'nces']['length'];_0x205b66++){const _0xd3621c=this['_meshInsta'+'nces'][_0x205b66],_0x360715=_0xd3621c['mesh'];_0x360715['skin']&&!_0xd3621c['skinInstan'+'ce']&&(_0xd3621c['skinInstan'+'ce']=$o['createCach'+'edSkinInst'+'ance'](_0x360715['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x13f0bf){if(_0x13f0bf&&_0x13f0bf['length']){const _0x546ab4=[];for(let _0x33b780=-0x1*0x2ea+-0x796+0x3*0x380;_0x33b780<_0x13f0bf['length'];_0x33b780++){const _0xeba755=_0x13f0bf[_0x33b780],_0x20dab9=this['_materialR'+'eferences'][_0x33b780]&&this['_materialR'+'eferences'][_0x33b780]['asset']&&this['_materialR'+'eferences'][_0x33b780]['asset']['resource'],_0x8a2844=new We(_0xeba755,_0x20dab9||this['system']['defaultMat'+'erial'],this['entity']);_0x546ab4['push'](_0x8a2844),_0xeba755['morph']&&(_0x8a2844['morphInsta'+'nce']=new oa(_0xeba755['morph']));}this['meshInstan'+'ces']=_0x546ab4,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x4598bd;(_0x4598bd=this['_evtSetMes'+'hes'])==null||_0x4598bd['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x4a2ef1,_0x237475,_0xbebd10){_0xbebd10['resource']?this['_onMateria'+'lLoad'](_0x4a2ef1,_0x237475,_0xbebd10):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0xbebd10);}['_updateMai'+'nMaterial'](_0x2f9ec2,_0x5452cf){_0x2f9ec2===-0x624*0x2+0x24*-0xa4+-0x2f2*-0xc&&(this['material']=_0x5452cf);}['_onMateria'+'lLoad'](_0x9d87a6,_0x42e322,_0x5ae91a){this['_meshInsta'+'nces'][_0x9d87a6]&&(this['_meshInsta'+'nces'][_0x9d87a6]['material']=_0x5ae91a['resource']),this['_updateMai'+'nMaterial'](_0x9d87a6,_0x5ae91a['resource']);}['_onMateria'+'lRemove'](_0x5df435,_0x26fcce,_0x31a837){this['_meshInsta'+'nces'][_0x5df435]&&(this['_meshInsta'+'nces'][_0x5df435]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x5df435,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x154b6b,_0x37e4f7,_0x2c9c80){this['_meshInsta'+'nces'][_0x154b6b]&&(this['_meshInsta'+'nces'][_0x154b6b]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x154b6b,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3943d3,_0x243584){_0x3943d3['rootBone']&&(this['rootBone']=_0x243584[_0x3943d3['rootBone']['getGuid']()]);}}class K3{constructor(){this['enabled']=!(0x1567+0x7*-0x321+-0x80*-0x1);}}const iu=['enabled'],Cr=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class Z3 extends lt{constructor(_0x5982f0){super(_0x5982f0),this['id']='render',this['ComponentT'+'ype']=pv,this['DataType']=K3,this['schema']=iu,this['defaultMat'+'erial']=cl(_0x5982f0['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1e9665,_0x4d1b70,_0x278b56){(_0x4d1b70['batchGroup'+'Id']===null||_0x4d1b70['batchGroup'+'Id']===void(0x3b*-0x59+0xab0+0x9d3))&&(_0x4d1b70['batchGroup'+'Id']=-(-0x2612+0x1b+0x25f8)),_0x4d1b70['layers']&&_0x4d1b70['layers']['length']&&(_0x4d1b70['layers']=_0x4d1b70['layers']['slice'](-0x445*0x5+-0x3*0x664+0xb*0x3af));for(let _0x25a617=-0x26b*0xc+-0xbe2*-0x1+-0x1122*-0x1;_0x25a617<Cr['length'];_0x25a617++)_0x4d1b70['hasOwnProp'+'erty'](Cr[_0x25a617])&&(_0x1e9665[Cr[_0x25a617]]=_0x4d1b70[Cr[_0x25a617]]);_0x4d1b70['aabbCenter']&&_0x4d1b70['aabbHalfEx'+'tents']&&(_0x1e9665['customAabb']=new Ie(new I(_0x4d1b70['aabbCenter']),new I(_0x4d1b70['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1e9665,_0x4d1b70,iu);}['cloneCompo'+'nent'](_0x118678,_0x1ad050){const _0x5dca96={};for(let _0x3a3761=-0x1*0x6c5+-0xfa1+0x1666;_0x3a3761<Cr['length'];_0x3a3761++)_0x5dca96[Cr[_0x3a3761]]=_0x118678['render'][Cr[_0x3a3761]];_0x5dca96['enabled']=_0x118678['render']['enabled'],delete _0x5dca96['meshInstan'+'ces'];const _0x4d8f8d=this['addCompone'+'nt'](_0x1ad050,_0x5dca96),_0x3fd3a0=_0x118678['render']['meshInstan'+'ces'],_0x444a2e=_0x3fd3a0['map'](_0x43381d=>_0x43381d['mesh']);_0x4d8f8d['_onSetMesh'+'es'](_0x444a2e);for(let _0x5eacde=-0x225c+0xf*-0x134+0x3468;_0x5eacde<_0x3fd3a0['length'];_0x5eacde++)_0x4d8f8d['meshInstan'+'ces'][_0x5eacde]['material']=_0x3fd3a0[_0x5eacde]['material'];return _0x118678['render']['customAabb']&&(_0x4d8f8d['customAabb']=_0x118678['render']['customAabb']['clone']()),_0x4d8f8d;}['onRemove'](_0x3f203b,_0x3cc4d3){_0x3cc4d3['onRemove']();}}we['_buildAcce'+'ssors'](pv['prototype'],iu);class jd{constructor(_0x1c58cc,_0x2856e6){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',-0x1*0x9d+-0x24ed+0x12c5*0x2),(this['_construct'+'or']=_0x1c58cc,this['_resize'](_0x2856e6));}['_resize'](_0x3e6352){if(_0x3e6352>this['_pool']['length']){for(let _0x4eac54=this['_pool']['length'];_0x4eac54<_0x3e6352;_0x4eac54++)this['_pool'][_0x4eac54]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(-0x1*-0x13ea+0x20*-0x94+-0x5*0x48)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=-0x4*0x50d+0x2*0x1e5+0x106a;}}let ss,Le,Is,ka;const Q3=new le(),J3=new le(),ih=new I();class Qs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',-0x1acf*0x1+0xe5*-0x2a+0x4061),h(this,'_angularFa'+'ctor',new I(0x14ed+0x12a1*0x1+-0x278d*0x1,-0x11*-0x8e+0xe7*-0x8+-0x235*0x1,0x83e+-0x311+-0x4*0x14b)),h(this,'_angularVe'+'locity',new I()),h(this,'_body',null),h(this,'_friction',-0x1d77+-0x3*-0x4eb+0xeb6+0.5),h(this,'_group',ig),h(this,'_linearDam'+'ping',0x6df*-0x5+0x1*-0x1176+-0x33d1*-0x1),h(this,'_linearFac'+'tor',new I(-0xa*-0x8c+-0x18b9+0x1342,-0x110e+-0x86a+0x1*0x1979,-0x5*0x4e+-0x1daf+0x1f36)),h(this,'_linearVel'+'ocity',new I()),h(this,'_mask',Yf),h(this,'_mass',0x3*0x69a+0x1*0x1465+-0x2832),h(this,'_restituti'+'on',-0xe*-0x12d+-0x138+-0xf3e),h(this,'_rollingFr'+'iction',-0x1e6+-0x1*-0x55d+-0x377),h(this,'_simulatio'+'nEnabled',!(-0x15e6+-0x22a3+0x388a)),h(this,'_type',to);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(ss=new Ammo['btTransfor'+'m'](),Le=new Ammo['btVector3'](),Is=new Ammo['btVector3'](),ka=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](ss),Ammo['destroy'](Le),Ammo['destroy'](Is),Ammo['destroy'](ka),ss=null,Le=null,Is=null,ka=null;}set['angularDam'+'ping'](_0x3f90b4){this['_angularDa'+'mping']!==_0x3f90b4&&(this['_angularDa'+'mping']=_0x3f90b4,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x3f90b4));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x41cd66){this['_angularFa'+'ctor']['equals'](_0x41cd66)||(this['_angularFa'+'ctor']['copy'](_0x41cd66),this['_body']&&this['_type']===Ps&&(Le['setValue'](_0x41cd66['x'],_0x41cd66['y'],_0x41cd66['z']),this['_body']['setAngular'+'Factor'](Le)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x3c247c){this['_body']&&this['_type']===Ps&&(this['_body']['activate'](),Le['setValue'](_0x3c247c['x'],_0x3c247c['y'],_0x3c247c['z']),this['_body']['setAngular'+'Velocity'](Le),this['_angularVe'+'locity']['copy'](_0x3c247c));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===Ps){const _0x404432=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x404432['x'](),_0x404432['y'](),_0x404432['z']());}return this['_angularVe'+'locity'];}set['body'](_0x45a394){this['_body']!==_0x45a394&&(this['_body']=_0x45a394,_0x45a394&&this['_simulatio'+'nEnabled']&&_0x45a394['activate']());}get['body'](){return this['_body'];}set['friction'](_0x5cae5f){this['_friction']!==_0x5cae5f&&(this['_friction']=_0x5cae5f,this['_body']&&this['_body']['setFrictio'+'n'](_0x5cae5f));}get['friction'](){return this['_friction'];}set['group'](_0x2d0e24){this['_group']!==_0x2d0e24&&(this['_group']=_0x2d0e24,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x515a89){this['_linearDam'+'ping']!==_0x515a89&&(this['_linearDam'+'ping']=_0x515a89,this['_body']&&this['_body']['setDamping'](_0x515a89,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x4d8753){this['_linearFac'+'tor']['equals'](_0x4d8753)||(this['_linearFac'+'tor']['copy'](_0x4d8753),this['_body']&&this['_type']===Ps&&(Le['setValue'](_0x4d8753['x'],_0x4d8753['y'],_0x4d8753['z']),this['_body']['setLinearF'+'actor'](Le)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x3846bf){this['_body']&&this['_type']===Ps&&(this['_body']['activate'](),Le['setValue'](_0x3846bf['x'],_0x3846bf['y'],_0x3846bf['z']),this['_body']['setLinearV'+'elocity'](Le),this['_linearVel'+'ocity']['copy'](_0x3846bf));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===Ps){const _0x4495ef=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x4495ef['x'](),_0x4495ef['y'](),_0x4495ef['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x51cc91){this['_mask']!==_0x51cc91&&(this['_mask']=_0x51cc91,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x3d307e){if(this['_mass']!==_0x3d307e&&(this['_mass']=_0x3d307e,this['_body']&&this['_type']===Ps)){const _0x4483b2=this['enabled']&&this['entity']['enabled'];_0x4483b2&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x3d307e,Le),this['_body']['setMassPro'+'ps'](_0x3d307e,Le),this['_body']['updateIner'+'tiaTensor'](),_0x4483b2&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x317977){this['_restituti'+'on']!==_0x317977&&(this['_restituti'+'on']=_0x317977,this['_body']&&this['_body']['setRestitu'+'tion'](_0x317977));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x3d55ae){this['_rollingFr'+'iction']!==_0x3d55ae&&(this['_rollingFr'+'iction']=_0x3d55ae,this['_body']&&this['_body']['setRolling'+'Friction'](_0x3d55ae));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x5eeaee){if(this['_type']!==_0x5eeaee){switch(this['_type']=_0x5eeaee,this['disableSim'+'ulation'](),_0x5eeaee){case Ps:this['_group']=aL,this['_mask']=ag;break;case Ia:this['_group']=nL,this['_mask']=ag;break;case to:default:this['_group']=ig,this['_mask']=Yf;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x71e837=this['entity'];let _0x17e0aa;if(_0x71e837['collision']&&(_0x17e0aa=_0x71e837['collision']['shape'],_0x71e837['trigger']&&(_0x71e837['trigger']['destroy'](),delete _0x71e837['trigger'])),_0x17e0aa){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x2697c7=this['_type']===Ps?this['_mass']:-0x16f5+0x1192+0x563;this['_getEntity'+'Transform'](ss);const _0x8f6f68=this['system']['createBody'](_0x2697c7,_0x17e0aa,ss);if(_0x8f6f68['setRestitu'+'tion'](this['_restituti'+'on']),_0x8f6f68['setFrictio'+'n'](this['_friction']),_0x8f6f68['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x8f6f68['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===Ps){const _0x1e6bb8=this['_linearFac'+'tor'];Le['setValue'](_0x1e6bb8['x'],_0x1e6bb8['y'],_0x1e6bb8['z']),_0x8f6f68['setLinearF'+'actor'](Le);const _0x44b2ce=this['_angularFa'+'ctor'];Le['setValue'](_0x44b2ce['x'],_0x44b2ce['y'],_0x44b2ce['z']),_0x8f6f68['setAngular'+'Factor'](Le);}else this['_type']===Ia&&(_0x8f6f68['setCollisi'+'onFlags'](_0x8f6f68['getCollisi'+'onFlags']()|rL),_0x8f6f68['setActivat'+'ionState'](sg));_0x8f6f68['entity']=_0x71e837,this['body']=_0x8f6f68,this['enabled']&&_0x71e837['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(0x1d3b*0x1+-0x1*-0x2155+-0x3e8f);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x5b6eab=this['entity'];if(_0x5b6eab['collision']&&_0x5b6eab['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0xb705c4=this['_body'];if(_0xb705c4){switch(this['system']['addBody'](_0xb705c4,this['_group'],this['_mask']),this['_type']){case Ps:this['system']['_dynamic']['push'](this),_0xb705c4['forceActiv'+'ationState'](jf),this['syncEntity'+'ToBody']();break;case Ia:this['system']['_kinematic']['push'](this),_0xb705c4['forceActiv'+'ationState'](sg);break;case to:_0xb705c4['forceActiv'+'ationState'](jf),this['syncEntity'+'ToBody']();break;}_0x5b6eab['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x5b6eab['collision']),_0xb705c4['activate'](),this['_simulatio'+'nEnabled']=!(0x3c*0x73+-0x1*0x5d9+-0x151b);}}}['disableSim'+'ulation'](){const _0x8630e6=this['_body'];if(_0x8630e6&&this['_simulatio'+'nEnabled']){const _0x54dd24=this['system'];let _0x35ade0=_0x54dd24['_compounds']['indexOf'](this['entity']['collision']);_0x35ade0>-(-0x207+0x686*0x4+-0x1810)&&_0x54dd24['_compounds']['splice'](_0x35ade0,-0x926+-0x2379+0x1650*0x2),_0x35ade0=_0x54dd24['_dynamic']['indexOf'](this),_0x35ade0>-(-0xca6*-0x1+0x17*-0x108+0x3f*0x2d)&&_0x54dd24['_dynamic']['splice'](_0x35ade0,-0x162a+-0x122+0x174d*0x1),_0x35ade0=_0x54dd24['_kinematic']['indexOf'](this),_0x35ade0>-(0xf22+-0x888+-0x699)&&_0x54dd24['_kinematic']['splice'](_0x35ade0,0xb*-0x295+0x1ff4+0x2*-0x1c6),_0x54dd24['removeBody'](_0x8630e6),_0x8630e6['forceActiv'+'ationState'](iv),this['_simulatio'+'nEnabled']=!(0x1bb*0x2+0xadb+-0x1ca*0x8);}}['applyForce'](_0x5d77a5,_0x4979ce,_0x122a3d,_0x1459ac,_0x4a27bb,_0xaa5b5c){const _0x214b78=this['_body'];_0x214b78&&(_0x214b78['activate'](),_0x5d77a5 instanceof I?Le['setValue'](_0x5d77a5['x'],_0x5d77a5['y'],_0x5d77a5['z']):Le['setValue'](_0x5d77a5,_0x4979ce,_0x122a3d),_0x4979ce instanceof I?Is['setValue'](_0x4979ce['x'],_0x4979ce['y'],_0x4979ce['z']):_0x1459ac!==void(-0x1*-0x1eb7+0x1f66+-0x3e1d)?Is['setValue'](_0x1459ac,_0x4a27bb,_0xaa5b5c):Is['setValue'](0x224f+-0x77b*-0x4+0x92d*-0x7,-0x232e+-0x1*-0xe09+0x1*0x1525,-0x302+0x1*-0xd99+0x1*0x109b),_0x214b78['applyForce'](Le,Is));}['applyTorqu'+'e'](_0x4484f7,_0x16ea10,_0x4e4f19){const _0x5e14da=this['_body'];_0x5e14da&&(_0x5e14da['activate'](),_0x4484f7 instanceof I?Le['setValue'](_0x4484f7['x'],_0x4484f7['y'],_0x4484f7['z']):Le['setValue'](_0x4484f7,_0x16ea10,_0x4e4f19),_0x5e14da['applyTorqu'+'e'](Le));}['applyImpul'+'se'](_0x420298,_0x23d9ba,_0x1cb481,_0x539ed3,_0xad4e55,_0x32af84){const _0xe01b31=this['_body'];_0xe01b31&&(_0xe01b31['activate'](),_0x420298 instanceof I?Le['setValue'](_0x420298['x'],_0x420298['y'],_0x420298['z']):Le['setValue'](_0x420298,_0x23d9ba,_0x1cb481),_0x23d9ba instanceof I?Is['setValue'](_0x23d9ba['x'],_0x23d9ba['y'],_0x23d9ba['z']):_0x539ed3!==void(0x57*0x63+-0x1d1c+0x81*-0x9)?Is['setValue'](_0x539ed3,_0xad4e55,_0x32af84):Is['setValue'](0x1c0*-0x10+0x1a*-0xe2+0xcbd*0x4,0xbe6*0x1+-0x1*-0x2381+0x3*-0xfcd,0x166b+-0x1ca*-0x9+-0x207*0x13),_0xe01b31['applyImpul'+'se'](Le,Is));}['applyTorqu'+'eImpulse'](_0x620a0a,_0x1b2167,_0x60a958){const _0x36b3ba=this['_body'];_0x36b3ba&&(_0x36b3ba['activate'](),_0x620a0a instanceof I?Le['setValue'](_0x620a0a['x'],_0x620a0a['y'],_0x620a0a['z']):Le['setValue'](_0x620a0a,_0x1b2167,_0x60a958),_0x36b3ba['applyTorqu'+'eImpulse'](Le));}['isStatic'](){return this['_type']===to;}['isStaticOr'+'Kinematic'](){return this['_type']===to||this['_type']===Ia;}['isKinemati'+'c'](){return this['_type']===Ia;}['_getEntity'+'Transform'](_0x919b9f){const _0x583ca9=this['entity'],_0x181e07=_0x583ca9['collision'];if(_0x181e07){const _0x51edc9=_0x181e07['getShapePo'+'sition'](),_0x4dd366=_0x181e07['getShapeRo'+'tation']();Le['setValue'](_0x51edc9['x'],_0x51edc9['y'],_0x51edc9['z']),ka['setValue'](_0x4dd366['x'],_0x4dd366['y'],_0x4dd366['z'],_0x4dd366['w']);}else{const _0x40c37c=_0x583ca9['getPositio'+'n'](),_0x338995=_0x583ca9['getRotatio'+'n']();Le['setValue'](_0x40c37c['x'],_0x40c37c['y'],_0x40c37c['z']),ka['setValue'](_0x338995['x'],_0x338995['y'],_0x338995['z'],_0x338995['w']);}_0x919b9f['setOrigin'](Le),_0x919b9f['setRotatio'+'n'](ka);}['syncEntity'+'ToBody'](){const _0x58391e=this['_body'];if(_0x58391e){if(this['_getEntity'+'Transform'](ss),_0x58391e['setWorldTr'+'ansform'](ss),this['_type']===Ia){const _0x1c518c=_0x58391e['getMotionS'+'tate']();_0x1c518c&&_0x1c518c['setWorldTr'+'ansform'](ss);}_0x58391e['activate']();}}['_updateDyn'+'amic'](){const _0x13364d=this['_body'];if(_0x13364d['isActive']()){const _0x2db950=_0x13364d['getMotionS'+'tate']();if(_0x2db950){const _0x3fdf98=this['entity'];_0x2db950['getWorldTr'+'ansform'](ss);const _0x278d52=ss['getOrigin'](),_0x315631=ss['getRotatio'+'n'](),_0x59f9cb=_0x3fdf98['collision'];if(_0x59f9cb&&_0x59f9cb['_hasOffset']){const _0x467da5=_0x59f9cb['data']['linearOffs'+'et'],_0x2640ec=_0x59f9cb['data']['angularOff'+'set'],_0x2ccc78=J3['copy'](_0x2640ec)['invert'](),_0x3afdf3=Q3['set'](_0x315631['x'](),_0x315631['y'](),_0x315631['z'](),_0x315631['w']())['mul'](_0x2ccc78);_0x3afdf3['transformV'+'ector'](_0x467da5,ih),_0x3fdf98['setPositio'+'n'](_0x278d52['x']()-ih['x'],_0x278d52['y']()-ih['y'],_0x278d52['z']()-ih['z']),_0x3fdf98['setRotatio'+'n'](_0x3afdf3);}else _0x3fdf98['setPositio'+'n'](_0x278d52['x'](),_0x278d52['y'](),_0x278d52['z']()),_0x3fdf98['setRotatio'+'n'](_0x315631['x'](),_0x315631['y'](),_0x315631['z'](),_0x315631['w']());}}}['_updateKin'+'ematic'](){const _0x4b4c96=this['_body']['getMotionS'+'tate']();_0x4b4c96&&(this['_getEntity'+'Transform'](ss),_0x4b4c96['setWorldTr'+'ansform'](ss));}['teleport'](_0x42bbe3,_0x262c88,_0x46393a,_0x1d11f7,_0x29a54a,_0x10d53f){_0x42bbe3 instanceof I?this['entity']['setPositio'+'n'](_0x42bbe3):this['entity']['setPositio'+'n'](_0x42bbe3,_0x262c88,_0x46393a),_0x262c88 instanceof le?this['entity']['setRotatio'+'n'](_0x262c88):_0x262c88 instanceof I?this['entity']['setEulerAn'+'gles'](_0x262c88):_0x1d11f7!==void(0x1115*0x2+-0x2b*-0x7d+-0x3729)&&this['entity']['setEulerAn'+'gles'](_0x1d11f7,_0x29a54a,_0x10d53f),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(Qs,'EVENT_CONT'+'ACT','contact'),h(Qs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Qs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Qs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Qs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(Qs,'order',-(0x20a9*0x1+-0x1*0x1717+-0x991));class eO{constructor(){this['enabled']=!(-0x22*0xd6+-0xe3*0x1f+0x37e9);}}let xi,Ti;class pg{constructor(_0x39deef,_0x5694a9,_0x540283,_0x2d616e){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x39deef,this['point']=_0x5694a9,this['normal']=_0x540283,this['hitFractio'+'n']=_0x2d616e);}}class tO{constructor(_0x560275,_0x4e34d0,_0x3ba95f){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==-0xb0*0xd+-0xf4*0xd+-0x27*-0x8c?(this['a']=_0x560275,this['b']=_0x4e34d0,this['impulse']=_0x3ba95f['impulse'],this['localPoint'+'A']=_0x3ba95f['localPoint'],this['localPoint'+'B']=_0x3ba95f['localPoint'+'Other'],this['pointA']=_0x3ba95f['point'],this['pointB']=_0x3ba95f['pointOther'],this['normal']=_0x3ba95f['normal']):(this['a']=null,this['b']=null,this['impulse']=-0x2458+-0x18a*-0x4+0x1e30,this['localPoint'+'A']=new I(),this['localPoint'+'B']=new I(),this['pointA']=new I(),this['pointB']=new I(),this['normal']=new I());}}class sO{constructor(_0x27eb08=new I(),_0x701e76=new I(),_0x248ef9=new I(),_0x511abc=new I(),_0x29a39f=new I(),_0xfd7a89=0x112f+0x3*0xc18+-0x3577){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x27eb08,this['localPoint'+'Other']=_0x701e76,this['point']=_0x248ef9,this['pointOther']=_0x511abc,this['normal']=_0x29a39f,this['impulse']=_0xfd7a89);}}class iO{constructor(_0x49e6ef,_0x1a3753){h(this,'other'),h(this,'contacts'),(this['other']=_0x49e6ef,this['contacts']=_0x1a3753);}}const _v=['enabled'];class gv extends lt{constructor(_0x10662a){super(_0x10662a),h(this,'maxSubStep'+'s',0x7d0+0x1347+0x5*-0x569),h(this,'fixedTimeS'+'tep',(0x175b+-0x1b9d+0x443)/(0x4cb*0x6+-0x48b*0x3+-0xee5)),h(this,'gravity',new I(0x19dd+-0x90f+0xef*-0x12,-(-0xb18+0x22e7+0x1*-0x17c6+0.8100000000000005),0xb*-0x2d7+0xd*-0x1f7+-0x8*-0x719)),h(this,'_gravityFl'+'oat32',new Float32Array(-0x2a*-0xa9+-0x1be8*0x1+0x31)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x10662a['stats']['frame'],this['ComponentT'+'ype']=Qs,this['DataType']=eO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=_v,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x2f4e62=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x2f4e62);}else M['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');xi=new Ammo['btVector3'](),Ti=new Ammo['btVector3'](),Qs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new jd(sO,-0x30*-0x2b+-0x1d8a+0x157b),this['contactRes'+'ultPool']=new jd(iO,0x6c6+-0xe01*-0x1+-0x14c6),this['singleCont'+'actResultP'+'ool']=new jd(tO,-0x1e91+-0x62*0x13+0x1*0x25d8),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x12ada5,_0x12145a,_0xa8efcc){const _0x3f7fad=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x2faa32 of _0x3f7fad)if(_0x12145a['hasOwnProp'+'erty'](_0x2faa32)){const _0x2bd552=_0x12145a[_0x2faa32];Array['isArray'](_0x2bd552)?_0x12ada5[_0x2faa32]=new I(_0x2bd552[-0x4*-0x596+-0x19a6+0x34e],_0x2bd552[0xd85+-0x122f+0xef*0x5],_0x2bd552[0x7d0+0x3*0xb5+0x4d*-0x21]):_0x12ada5[_0x2faa32]=_0x2bd552;}super['initialize'+'ComponentD'+'ata'](_0x12ada5,_0x12145a,['enabled']);}['cloneCompo'+'nent'](_0xb0e0e8,_0x3d462b){const _0x1647c2=_0xb0e0e8['rigidbody'],_0x140a35={'enabled':_0x1647c2['enabled'],'mass':_0x1647c2['mass'],'linearDamping':_0x1647c2['linearDamp'+'ing'],'angularDamping':_0x1647c2['angularDam'+'ping'],'linearFactor':[_0x1647c2['linearFact'+'or']['x'],_0x1647c2['linearFact'+'or']['y'],_0x1647c2['linearFact'+'or']['z']],'angularFactor':[_0x1647c2['angularFac'+'tor']['x'],_0x1647c2['angularFac'+'tor']['y'],_0x1647c2['angularFac'+'tor']['z']],'friction':_0x1647c2['friction'],'rollingFriction':_0x1647c2['rollingFri'+'ction'],'restitution':_0x1647c2['restitutio'+'n'],'type':_0x1647c2['type'],'group':_0x1647c2['group'],'mask':_0x1647c2['mask']};return this['addCompone'+'nt'](_0x3d462b,_0x140a35);}['onBeforeRe'+'move'](_0xa2c179,_0x5e1efa){_0x5e1efa['enabled']&&(_0x5e1efa['enabled']=!(-0x13a*0x19+0x3c9*0x3+-0x1350*-0x1)),_0x5e1efa['body']&&(this['destroyBod'+'y'](_0x5e1efa['body']),_0x5e1efa['body']=null);}['addBody'](_0x510809,_0x54a6f0,_0x1bd01c){_0x54a6f0!==void(0x212f+0x1178+-0x32a7*0x1)&&_0x1bd01c!==void(0xfee*0x2+-0x1*-0x1a96+-0x1*0x3a72)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x510809,_0x54a6f0,_0x1bd01c):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x510809);}['removeBody'](_0x2ce9a3){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x2ce9a3);}['createBody'](_0x4538fa,_0x2a6061,_0x5498e7){const _0x15ddf0=new Ammo['btVector3'](0x205d+0x4f*-0x1c+-0x17b9,0x2485+-0x1072+0x3*-0x6b1,0x1*-0x1cf9+0xefa+-0xdff*-0x1);_0x4538fa!==-0xd*0x2a1+0x1247*0x1+-0xa*-0x197&&_0x2a6061['calculateL'+'ocalInerti'+'a'](_0x4538fa,_0x15ddf0);const _0x403bdd=new Ammo['btDefaultM'+'otionState'](_0x5498e7),_0x41c0c0=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x4538fa,_0x403bdd,_0x2a6061,_0x15ddf0),_0x441b91=new Ammo['btRigidBod'+'y'](_0x41c0c0);return Ammo['destroy'](_0x41c0c0),Ammo['destroy'](_0x15ddf0),_0x441b91;}['destroyBod'+'y'](_0x54b7f2){const _0x48bfaa=_0x54b7f2['getMotionS'+'tate']();_0x48bfaa&&Ammo['destroy'](_0x48bfaa),Ammo['destroy'](_0x54b7f2);}['raycastFir'+'st'](_0x2d7cff,_0x277165,_0x8dc0e9={}){if(_0x8dc0e9['filterTags']||_0x8dc0e9['filterCall'+'back'])return _0x8dc0e9['sort']=!(0x1022+-0xe36+-0x2*0xf6),this['raycastAll'](_0x2d7cff,_0x277165,_0x8dc0e9)[0x1e89+0x1148+-0x1*0x2fd1]||null;let _0x392637=null;xi['setValue'](_0x2d7cff['x'],_0x2d7cff['y'],_0x2d7cff['z']),Ti['setValue'](_0x277165['x'],_0x277165['y'],_0x277165['z']);const _0x5dca2f=new Ammo['ClosestRay'+'ResultCall'+'back'](xi,Ti);if(typeof _0x8dc0e9['filterColl'+'isionGroup']=='number'&&_0x5dca2f['set_m_coll'+'isionFilte'+'rGroup'](_0x8dc0e9['filterColl'+'isionGroup']),typeof _0x8dc0e9['filterColl'+'isionMask']=='number'&&_0x5dca2f['set_m_coll'+'isionFilte'+'rMask'](_0x8dc0e9['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](xi,Ti,_0x5dca2f),_0x5dca2f['hasHit']()){const _0x1c79e2=_0x5dca2f['get_m_coll'+'isionObjec'+'t'](),_0x3f7278=Ammo['castObject'](_0x1c79e2,Ammo['btRigidBod'+'y']);if(_0x3f7278){const _0x1ec4f6=_0x5dca2f['get_m_hitP'+'ointWorld'](),_0x190c1e=_0x5dca2f['get_m_hitN'+'ormalWorld']();_0x392637=new pg(_0x3f7278['entity'],new I(_0x1ec4f6['x'](),_0x1ec4f6['y'](),_0x1ec4f6['z']()),new I(_0x190c1e['x'](),_0x190c1e['y'](),_0x190c1e['z']()),_0x5dca2f['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x5dca2f),_0x392637;}['raycastAll'](_0x41261a,_0x46a7d2,_0x281b4a={}){M['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0xb43362=[];xi['setValue'](_0x41261a['x'],_0x41261a['y'],_0x41261a['z']),Ti['setValue'](_0x46a7d2['x'],_0x46a7d2['y'],_0x46a7d2['z']);const _0x4e01fe=new Ammo['AllHitsRay'+'ResultCall'+'back'](xi,Ti);if(typeof _0x281b4a['filterColl'+'isionGroup']=='number'&&_0x4e01fe['set_m_coll'+'isionFilte'+'rGroup'](_0x281b4a['filterColl'+'isionGroup']),typeof _0x281b4a['filterColl'+'isionMask']=='number'&&_0x4e01fe['set_m_coll'+'isionFilte'+'rMask'](_0x281b4a['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](xi,Ti,_0x4e01fe),_0x4e01fe['hasHit']()){const _0x5b2a55=_0x4e01fe['get_m_coll'+'isionObjec'+'ts'](),_0xc48999=_0x4e01fe['get_m_hitP'+'ointWorld'](),_0x558da1=_0x4e01fe['get_m_hitN'+'ormalWorld'](),_0x16a64b=_0x4e01fe['get_m_hitF'+'ractions'](),_0x2493b1=_0x5b2a55['size']();for(let _0x1c5d99=0x251c+0x5*0xb+-0x1c7*0x15;_0x1c5d99<_0x2493b1;_0x1c5d99++){const _0x59bd62=Ammo['castObject'](_0x5b2a55['at'](_0x1c5d99),Ammo['btRigidBod'+'y']);if(_0x59bd62&&_0x59bd62['entity']){if(_0x281b4a['filterTags']&&!_0x59bd62['entity']['tags']['has'](..._0x281b4a['filterTags'])||_0x281b4a['filterCall'+'back']&&!_0x281b4a['filterCall'+'back'](_0x59bd62['entity']))continue;const _0x2467c1=_0xc48999['at'](_0x1c5d99),_0x582fba=_0x558da1['at'](_0x1c5d99),_0x2f8ee5=new pg(_0x59bd62['entity'],new I(_0x2467c1['x'](),_0x2467c1['y'](),_0x2467c1['z']()),new I(_0x582fba['x'](),_0x582fba['y'](),_0x582fba['z']()),_0x16a64b['at'](_0x1c5d99));_0xb43362['push'](_0x2f8ee5);}}_0x281b4a['sort']&&_0xb43362['sort']((_0x2c402e,_0x16c659)=>_0x2c402e['hitFractio'+'n']-_0x16c659['hitFractio'+'n']);}return Ammo['destroy'](_0x4e01fe),_0xb43362;}['_storeColl'+'ision'](_0x21e5ba,_0x10b46e){let _0x5555fe=!(0x17*0x107+0x1b71+-0x3311);const _0x9d2300=_0x21e5ba['getGuid']();return this['collisions'][_0x9d2300]=this['collisions'][_0x9d2300]||{'others':[],'entity':_0x21e5ba},this['collisions'][_0x9d2300]['others']['indexOf'](_0x10b46e)<-0x1f69+-0x5a1+0x250a&&(this['collisions'][_0x9d2300]['others']['push'](_0x10b46e),_0x5555fe=!(-0x14d4*0x1+0x1b3e+0x335*-0x2)),this['frameColli'+'sions'][_0x9d2300]=this['frameColli'+'sions'][_0x9d2300]||{'others':[],'entity':_0x21e5ba},this['frameColli'+'sions'][_0x9d2300]['others']['push'](_0x10b46e),_0x5555fe;}['_createCon'+'tactPointF'+'romAmmo'](_0x294498){const _0x1a5e71=_0x294498['get_m_loca'+'lPointA'](),_0x25fa90=_0x294498['get_m_loca'+'lPointB'](),_0x116edf=_0x294498['getPositio'+'nWorldOnA'](),_0x4d32ce=_0x294498['getPositio'+'nWorldOnB'](),_0x1b48c2=_0x294498['get_m_norm'+'alWorldOnB'](),_0x3f40ee=this['contactPoi'+'ntPool']['allocate']();return _0x3f40ee['localPoint']['set'](_0x1a5e71['x'](),_0x1a5e71['y'](),_0x1a5e71['z']()),_0x3f40ee['localPoint'+'Other']['set'](_0x25fa90['x'](),_0x25fa90['y'](),_0x25fa90['z']()),_0x3f40ee['point']['set'](_0x116edf['x'](),_0x116edf['y'](),_0x116edf['z']()),_0x3f40ee['pointOther']['set'](_0x4d32ce['x'](),_0x4d32ce['y'](),_0x4d32ce['z']()),_0x3f40ee['normal']['set'](_0x1b48c2['x'](),_0x1b48c2['y'](),_0x1b48c2['z']()),_0x3f40ee['impulse']=_0x294498['getApplied'+'Impulse'](),_0x3f40ee;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x1aa9ff){const _0x743072=_0x1aa9ff['get_m_loca'+'lPointA'](),_0x3b5fab=_0x1aa9ff['get_m_loca'+'lPointB'](),_0x40dca1=_0x1aa9ff['getPositio'+'nWorldOnA'](),_0x1cc289=_0x1aa9ff['getPositio'+'nWorldOnB'](),_0x1e9df1=_0x1aa9ff['get_m_norm'+'alWorldOnB'](),_0xc05f05=this['contactPoi'+'ntPool']['allocate']();return _0xc05f05['localPoint'+'Other']['set'](_0x743072['x'](),_0x743072['y'](),_0x743072['z']()),_0xc05f05['localPoint']['set'](_0x3b5fab['x'](),_0x3b5fab['y'](),_0x3b5fab['z']()),_0xc05f05['pointOther']['set'](_0x40dca1['x'](),_0x40dca1['y'](),_0x40dca1['z']()),_0xc05f05['point']['set'](_0x1cc289['x'](),_0x1cc289['y'](),_0x1cc289['z']()),_0xc05f05['normal']['set'](_0x1e9df1['x'](),_0x1e9df1['y'](),_0x1e9df1['z']()),_0xc05f05['impulse']=_0x1aa9ff['getApplied'+'Impulse'](),_0xc05f05;}['_createSin'+'gleContact'+'Result'](_0xf9af0d,_0x474349,_0x2d2e26){const _0xac7405=this['singleCont'+'actResultP'+'ool']['allocate']();return _0xac7405['a']=_0xf9af0d,_0xac7405['b']=_0x474349,_0xac7405['localPoint'+'A']=_0x2d2e26['localPoint'],_0xac7405['localPoint'+'B']=_0x2d2e26['localPoint'+'Other'],_0xac7405['pointA']=_0x2d2e26['point'],_0xac7405['pointB']=_0x2d2e26['pointOther'],_0xac7405['normal']=_0x2d2e26['normal'],_0xac7405['impulse']=_0x2d2e26['impulse'],_0xac7405;}['_createCon'+'tactResult'](_0x191352,_0x65a886){const _0x357f6f=this['contactRes'+'ultPool']['allocate']();return _0x357f6f['other']=_0x191352,_0x357f6f['contacts']=_0x65a886,_0x357f6f;}['_cleanOldC'+'ollisions'](){for(const _0xa773a7 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0xa773a7)){const _0x30167e=this['frameColli'+'sions'][_0xa773a7],_0x3020ed=this['collisions'][_0xa773a7],_0x57a262=_0x3020ed['entity'],_0x6914b5=_0x57a262['collision'],_0x564adf=_0x57a262['rigidbody'],_0xb13d5=_0x3020ed['others'];let _0x270b79=_0xb13d5['length'];for(;_0x270b79--;){const _0x2994c6=_0xb13d5[_0x270b79];(!_0x30167e||_0x30167e['others']['indexOf'](_0x2994c6)<0x1ca*0xd+0x22c+-0x196e)&&(_0xb13d5['splice'](_0x270b79,0x544+0xf2*0x10+-0x1463),_0x57a262['trigger']?(_0x6914b5&&_0x6914b5['fire']('triggerlea'+'ve',_0x2994c6),_0x2994c6['rigidbody']&&_0x2994c6['rigidbody']['fire']('triggerlea'+'ve',_0x57a262)):_0x2994c6['trigger']||(_0x564adf&&_0x564adf['fire']('collisione'+'nd',_0x2994c6),_0x6914b5&&_0x6914b5['fire']('collisione'+'nd',_0x2994c6)));}_0xb13d5['length']===0x58*0xa+-0x223*0xd+0x1857*0x1&&delete this['collisions'][_0xa773a7];}}['_hasContac'+'tEvent'](_0x30053a){const _0xa46eac=_0x30053a['collision'];if(_0xa46eac&&(_0xa46eac['hasEvent']('collisions'+'tart')||_0xa46eac['hasEvent']('collisione'+'nd')||_0xa46eac['hasEvent']('contact')))return!(0xf17+-0x1bd*-0x14+-0x1*0x31db);const _0x4d95e0=_0x30053a['rigidbody'];return _0x4d95e0&&(_0x4d95e0['hasEvent']('collisions'+'tart')||_0x4d95e0['hasEvent']('collisione'+'nd')||_0x4d95e0['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x107254,_0x1654c1){const _0x430995=Ammo['wrapPointe'+'r'](_0x107254,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x54f463=_0x430995['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x4bac9b=0x2386+0x1*-0x2435+0xaf;_0x4bac9b<_0x54f463;_0x4bac9b++){const _0x106f11=_0x430995['getManifol'+'dByIndexIn'+'ternal'](_0x4bac9b),_0x46a31f=_0x106f11['getBody0'](),_0x1a8d5b=_0x106f11['getBody1'](),_0x67e6e=Ammo['castObject'](_0x46a31f,Ammo['btRigidBod'+'y']),_0x49ee99=Ammo['castObject'](_0x1a8d5b,Ammo['btRigidBod'+'y']),_0x20908f=_0x67e6e['entity'],_0x367a8f=_0x49ee99['entity'];if(!_0x20908f||!_0x367a8f)continue;const _0x1e2117=_0x67e6e['getCollisi'+'onFlags'](),_0x314f89=_0x49ee99['getCollisi'+'onFlags'](),_0x2a54ef=_0x106f11['getNumCont'+'acts'](),_0x21610f=[],_0x38b4c8=[];let _0x373707;if(_0x2a54ef>0xa55+-0x1a48+0x1*0xff3){if(_0x1e2117&oo||_0x314f89&oo){const _0x37974b=_0x20908f['collision']&&(_0x20908f['collision']['hasEvent']('triggerent'+'er')||_0x20908f['collision']['hasEvent']('triggerlea'+'ve')),_0x6e02e9=_0x367a8f['collision']&&(_0x367a8f['collision']['hasEvent']('triggerent'+'er')||_0x367a8f['collision']['hasEvent']('triggerlea'+'ve')),_0x42d673=_0x20908f['rigidbody']&&(_0x20908f['rigidbody']['hasEvent']('triggerent'+'er')||_0x20908f['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x1368ff=_0x367a8f['rigidbody']&&(_0x367a8f['rigidbody']['hasEvent']('triggerent'+'er')||_0x367a8f['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x37974b&&(_0x373707=this['_storeColl'+'ision'](_0x20908f,_0x367a8f),_0x373707&&!(_0x314f89&oo)&&_0x20908f['collision']['fire']('triggerent'+'er',_0x367a8f)),_0x6e02e9&&(_0x373707=this['_storeColl'+'ision'](_0x367a8f,_0x20908f),_0x373707&&!(_0x1e2117&oo)&&_0x367a8f['collision']['fire']('triggerent'+'er',_0x20908f)),_0x42d673&&(_0x373707||(_0x373707=this['_storeColl'+'ision'](_0x367a8f,_0x20908f)),_0x373707&&_0x20908f['rigidbody']['fire']('triggerent'+'er',_0x367a8f)),_0x1368ff&&(_0x373707||(_0x373707=this['_storeColl'+'ision'](_0x20908f,_0x367a8f)),_0x373707&&_0x367a8f['rigidbody']['fire']('triggerent'+'er',_0x20908f));}else{const _0x53851f=this['_hasContac'+'tEvent'](_0x20908f),_0x5ac543=this['_hasContac'+'tEvent'](_0x367a8f),_0x1cf4be=this['hasEvent']('contact');if(_0x1cf4be||_0x53851f||_0x5ac543){for(let _0x436b27=0x3*-0xb2a+-0x1ff2+0x3*0x15d0;_0x436b27<_0x2a54ef;_0x436b27++){const _0x23f558=_0x106f11['getContact'+'Point'](_0x436b27),_0x2e8313=this['_createCon'+'tactPointF'+'romAmmo'](_0x23f558);if(_0x53851f||_0x5ac543){_0x21610f['push'](_0x2e8313);const _0x3be45c=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x23f558);_0x38b4c8['push'](_0x3be45c);}if(_0x1cf4be){const _0x2bdc36=this['_createSin'+'gleContact'+'Result'](_0x20908f,_0x367a8f,_0x2e8313);this['fire']('contact',_0x2bdc36);}}if(_0x53851f){const _0x3f26c6=this['_createCon'+'tactResult'](_0x367a8f,_0x21610f);_0x373707=this['_storeColl'+'ision'](_0x20908f,_0x367a8f),_0x20908f['collision']&&(_0x20908f['collision']['fire']('contact',_0x3f26c6),_0x373707&&_0x20908f['collision']['fire']('collisions'+'tart',_0x3f26c6)),_0x20908f['rigidbody']&&(_0x20908f['rigidbody']['fire']('contact',_0x3f26c6),_0x373707&&_0x20908f['rigidbody']['fire']('collisions'+'tart',_0x3f26c6));}if(_0x5ac543){const _0x4dcf12=this['_createCon'+'tactResult'](_0x20908f,_0x38b4c8);_0x373707=this['_storeColl'+'ision'](_0x367a8f,_0x20908f),_0x367a8f['collision']&&(_0x367a8f['collision']['fire']('contact',_0x4dcf12),_0x373707&&_0x367a8f['collision']['fire']('collisions'+'tart',_0x4dcf12)),_0x367a8f['rigidbody']&&(_0x367a8f['rigidbody']['fire']('contact',_0x4dcf12),_0x373707&&_0x367a8f['rigidbody']['fire']('collisions'+'tart',_0x4dcf12));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x38dae2){let _0x1cfa97,_0xcc9b12;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][0xc44+0x757*-0x1+-0x4ed]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0xf93+-0x1844+0x27d8]=this['gravity']['y'],this['_gravityFl'+'oat32'][-0x22ad+-0x899*0x4+0x4513]=this['gravity']['z'];const _0x3a9a68=this['dynamicsWo'+'rld']['getGravity']();(_0x3a9a68['x']()!==this['_gravityFl'+'oat32'][-0x85c+0x2*-0x2c6+0xde8]||_0x3a9a68['y']()!==this['_gravityFl'+'oat32'][0x5*-0x75+-0x17a5+-0x3*-0x8a5]||_0x3a9a68['z']()!==this['_gravityFl'+'oat32'][-0x2169+0xeaa+0x12c1*0x1])&&(_0x3a9a68['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x3a9a68));const _0x45f446=this['_triggers'];for(_0x1cfa97=-0xc15+-0x410+0x1025,_0xcc9b12=_0x45f446['length'];_0x1cfa97<_0xcc9b12;_0x1cfa97++)_0x45f446[_0x1cfa97]['updateTran'+'sform']();const _0x42d3f9=this['_compounds'];for(_0x1cfa97=-0xcb*0x5+0x65e*-0x1+-0x1*-0xa55,_0xcc9b12=_0x42d3f9['length'];_0x1cfa97<_0xcc9b12;_0x1cfa97++)_0x42d3f9[_0x1cfa97]['_updateCom'+'pound']();const _0x8f57d7=this['_kinematic'];for(_0x1cfa97=-0x1744+0x485*0x7+-0x1*0x85f,_0xcc9b12=_0x8f57d7['length'];_0x1cfa97<_0xcc9b12;_0x1cfa97++)_0x8f57d7[_0x1cfa97]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x38dae2,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x420e57=this['_dynamic'];for(_0x1cfa97=0x686+0x2184+-0x280a,_0xcc9b12=_0x420e57['length'];_0x1cfa97<_0xcc9b12;_0x1cfa97++)_0x420e57[_0x1cfa97]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x38dae2),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](xi),Ammo['destroy'](Ti),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,xi=null,Ti=null,Qs['onAppDestr'+'oy']());}}h(gv,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](Qs['prototype'],_v);const Ua='none',rO='blend',_g=new te();class Sv extends we{constructor(_0x4afbc2,_0x410f80){super(_0x4afbc2,_0x410f80),this['_resolutio'+'n']=new J(-0xb27+-0x268f+0x3436,0x6cf*0x2+0x19d9+-0x2637),this['_reference'+'Resolution']=new J(-0x117e+0x9*0x397+-0xc51,-0x1ab4+-0xd2b+0x3*0xdb5),this['_scaleMode']=Ua,this['scale']=-0x3*0x214+-0x23*0x66+0x142f,this['_scaleBlen'+'d']=0x8d*-0x29+0x1615+0x1*0x80+0.5,this['_priority']=0x961+0x2113*0x1+-0x2a74,this['_screenSpa'+'ce']=!(-0x159c+0x9da+0xbc3),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x4afbc2['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x3a2834,_0x13f2f5){var _0x4b8638;if(!(_0x3a2834 instanceof ot))return _0x13f2f5;if(_0x3a2834['element']){const _0x668c80=_0x3a2834['element']['drawOrder'];_0x3a2834['element']['drawOrder']=_0x13f2f5++,_0x3a2834['element']['_batchGrou'+'pId']>=-0x3*-0xa9c+-0x1e1f+0x1*-0x1b5&&_0x668c80!==_0x3a2834['element']['drawOrder']&&((_0x4b8638=this['system']['app']['batcher'])==null||_0x4b8638['markGroupD'+'irty'](_0x3a2834['element']['_batchGrou'+'pId']));}_0x3a2834['particlesy'+'stem']&&(_0x3a2834['particlesy'+'stem']['drawOrder']=_0x13f2f5++);const _0x3f6e4d=_0x3a2834['children'];for(let _0x243274=0x1b20+0xc60+-0x20*0x13c;_0x243274<_0x3f6e4d['length'];_0x243274++)_0x13f2f5=this['_recurseDr'+'awOrderSyn'+'c'](_0x3f6e4d[_0x243274],_0x13f2f5);return _0x13f2f5;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],-0xb*0x227+0x8*-0x208+0x27ee),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x10aba0=this['_resolutio'+'n']['x']/this['scale'],_0x1d85c3=this['_resolutio'+'n']['y']/this['scale'],_0x23b85c=0xc*-0xd9+0x1*0x13f9+-0x9cd,_0x4c31fa=_0x10aba0,_0x1eb4a0=-_0x1d85c3;this['_screenMat'+'rix']['setOrtho'](_0x23b85c,_0x4c31fa,_0x1eb4a0,0x1*-0x19f5+-0x1f85*-0x1+-0x590,-0x148+0xc39+-0xc8*0xe,-(0x177d*-0x1+0x23*-0x10c+-0x1*-0x3c22)),this['_screenSpa'+'ce']||(_g['setScale']((-0x6f+-0x1f*-0x1d+0x18a*-0x2+0.5)*_0x10aba0,(-0x101c+0x1c72+0x62b*-0x2+0.5)*_0x1d85c3,-0xded+0x6b6*0x2+-0xd*-0xa),this['_screenMat'+'rix']['mul2'](_g,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x470769,_0x4382e2){const _0x3678eb=Math['log2']((_0x470769['x']||-0x91*0x17+-0x1*0xd43+0x1a4b)/_0x4382e2['x']),_0x3ad2dc=Math['log2']((_0x470769['y']||-0x2576+-0xe04+0x337b)/_0x4382e2['y']);return Math['pow'](-0x3*0xa67+-0x120d+0x41b*0xc,_0x3678eb*(0x13fe+0x4*-0x6e+0x3*-0x617-this['_scaleBlen'+'d'])+_0x3ad2dc*this['_scaleBlen'+'d']);}['_onResize'](_0xe7635f,_0x5f2ada){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0xe7635f,_0x5f2ada),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x3295f9){this['_elements']['add'](_0x3295f9);}['_unbindEle'+'ment'](_0xd9778c){this['_elements']['delete'](_0xd9778c);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x47bfaf=>_0x47bfaf['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x19499d){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x19499d['x'],_0x19499d['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x1bfc25=>_0x1bfc25['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x464f72){this['_reference'+'Resolution']['set'](_0x464f72['x'],_0x464f72['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x52f526=>_0x52f526['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Ua?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x5c8d92){this['_screenSpa'+'ce']=_0x5c8d92,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x5875df=>_0x5875df['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x1dd619){_0x1dd619!==Ua&&_0x1dd619!==rO&&(_0x1dd619=Ua),!this['_screenSpa'+'ce']&&_0x1dd619!==Ua&&(_0x1dd619=Ua),this['_scaleMode']=_0x1dd619,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x72c7fa){this['_scaleBlen'+'d']=_0x72c7fa,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x27dd51=>_0x27dd51['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x42ef70){_0x42ef70>0xfbd+-0x20f4+0x1236&&(M['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x42ef70+'\x20to\x20255'),_0x42ef70=0x3*0xaf1+-0x1*0x779+-0x5*0x4df),this['_priority']!==_0x42ef70&&(this['_priority']=_0x42ef70,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class aO{constructor(){this['enabled']=!(0x1087*0x1+0x17fc+-0x2883);}}const ru=['enabled'];class nO extends lt{constructor(_0x36a02b){super(_0x36a02b),this['id']='screen',this['ComponentT'+'ype']=Sv,this['DataType']=aO,this['schema']=ru,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new T0(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x17e9dc,_0x395ae3,_0x396427){_0x395ae3['priority']!==void(0x1672*0x1+-0xf49+-0x729)&&(_0x17e9dc['priority']=_0x395ae3['priority']),_0x395ae3['screenSpac'+'e']!==void(0x545*-0x1+-0xfb9+-0x2*-0xa7f)&&(_0x17e9dc['screenSpac'+'e']=_0x395ae3['screenSpac'+'e']),_0x17e9dc['cull']=_0x17e9dc['screenSpac'+'e'],_0x395ae3['scaleMode']!==void(0x3f7+0x11d*-0x7+0x3d4)&&(_0x17e9dc['scaleMode']=_0x395ae3['scaleMode']),_0x395ae3['scaleBlend']!==void(0x64b+-0x2*-0x4be+0x1*-0xfc7)&&(_0x17e9dc['scaleBlend']=_0x395ae3['scaleBlend']),_0x395ae3['resolution']!==void(0x16cc+-0x105b*-0x1+-0xd0d*0x3)&&(_0x395ae3['resolution']instanceof J?_0x17e9dc['_resolutio'+'n']['copy'](_0x395ae3['resolution']):_0x17e9dc['_resolutio'+'n']['set'](_0x395ae3['resolution'][-0x1*0x1d04+0xfb0+0xd54],_0x395ae3['resolution'][0xc04*-0x1+0x1a37+0x2e*-0x4f]),_0x17e9dc['resolution']=_0x17e9dc['_resolutio'+'n']),_0x395ae3['referenceR'+'esolution']!==void(-0x2b*-0xc1+-0xd01*-0x2+0x1*-0x3a6d)&&(_0x395ae3['referenceR'+'esolution']instanceof J?_0x17e9dc['_reference'+'Resolution']['copy'](_0x395ae3['referenceR'+'esolution']):_0x17e9dc['_reference'+'Resolution']['set'](_0x395ae3['referenceR'+'esolution'][0x1f4+0x2*-0xdea+0x10*0x19e],_0x395ae3['referenceR'+'esolution'][0x79a+-0x1*-0x117b+-0x1914]),_0x17e9dc['referenceR'+'esolution']=_0x17e9dc['_reference'+'Resolution']),_0x17e9dc['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x17e9dc,_0x395ae3,ru);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x5d4e94){const _0x591982=this['store'];for(const _0x254f1b in _0x591982)_0x591982[_0x254f1b]['entity']['screen']['update']&&_0x591982[_0x254f1b]['entity']['screen']['update'](_0x5d4e94);}['_onResize'](_0x493df4,_0x14ac31){this['windowReso'+'lution']['x']=_0x493df4,this['windowReso'+'lution']['y']=_0x14ac31;}['cloneCompo'+'nent'](_0x491259,_0xf1f766){const _0x3e67d8=_0x491259['screen'];return this['addCompone'+'nt'](_0xf1f766,{'enabled':_0x3e67d8['enabled'],'screenSpace':_0x3e67d8['screenSpac'+'e'],'scaleMode':_0x3e67d8['scaleMode'],'resolution':_0x3e67d8['resolution']['clone'](),'referenceResolution':_0x3e67d8['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x5a4b75,_0xaac4af){_0xaac4af['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x112cff=this['_drawOrder'+'SyncQueue']['list']();for(let _0x4fbb2f=0x16ff+-0x1*0x136a+-0x395;_0x4fbb2f<_0x112cff['length'];_0x4fbb2f++){const _0x155418=_0x112cff[_0x4fbb2f];_0x155418['callback']['call'](_0x155418['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x1446d5,_0x3673e3,_0x26cdae){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x1446d5)||this['_drawOrder'+'SyncQueue']['push'](_0x1446d5,{'callback':_0x3673e3,'scope':_0x26cdae});}}we['_buildAcce'+'ssors'](Sv['prototype'],ru);const Zi=new J(),gg=new I(),Pr=new cf(),Sg=new aS(),yg=new I(),so=new I(),oO=new le(),lO={'x':'y','y':'x'};class xo extends pe{constructor(_0x323608,_0x22e1f0){if(super(),!_0x323608||!(_0x323608 instanceof is))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x22e1f0&&_0x22e1f0!=='x'&&_0x22e1f0!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x22e1f0);this['_element']=_0x323608,this['_app']=_0x323608['system']['app'],this['_axis']=_0x22e1f0||null,this['_enabled']=!(0xf82*-0x1+-0x19*-0x67+0x9b*0x9),this['_dragScale']=new I(),this['_dragStart'+'MousePosit'+'ion']=new I(),this['_dragStart'+'HandlePosi'+'tion']=new I(),this['_deltaMous'+'ePosition']=new I(),this['_deltaHand'+'lePosition']=new I(),this['_isDraggin'+'g']=!(-0xed0+0x109a+0x1*-0x1c9),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x214dc9){this['_element'][_0x214dc9]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x214dc9]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x214dc9]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x54e8fa){const _0x2fb64d=_0x54e8fa==='on';this['_hasDragLi'+'steners']&&_0x2fb64d||(this['_app']['mouse']&&(this['_element'][_0x54e8fa]('mousemove',this['_onMove'],this),this['_element'][_0x54e8fa]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Me['touch']&&(this['_element'][_0x54e8fa]('touchmove',this['_onMove'],this),this['_element'][_0x54e8fa]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x54e8fa]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x54e8fa]('selectmove',this['_onMove'],this),this['_element'][_0x54e8fa]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x2fb64d);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x3f4418){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x3f4418['camera'],this['_calculate'+'DragScale']();const _0xd90df3=this['_screenToL'+'ocal'](_0x3f4418);_0xd90df3&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x15*0x10f+-0x1807+-0x2e42*-0x1),this['_dragStart'+'MousePosit'+'ion']['copy'](_0xd90df3),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x1c9c+0x7be+0x2459*-0x1),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x2ffef8){return _0x2ffef8['inputSourc'+'e']?Pr['set'](_0x2ffef8['inputSourc'+'e']['getOrigin'](),_0x2ffef8['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x2ffef8),this['_chooseRay'+'OriginAndD'+'irection']()),yg['copy'](this['_element']['entity']['forward'])['mulScalar'](-(-0x247e+0x5*-0x8+0x24a7*0x1)),Sg['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),yg),Sg['intersects'+'Ray'](Pr,so)?(oO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](so,so),so['mul'](this['_dragScale']),so):null;}['_determine'+'InputPosit'+'ion'](_0x4754fd){const _0x4dd039=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x4754fd['x']<'u'&&typeof _0x4754fd['y']<'u'?(Zi['x']=_0x4754fd['x']*_0x4dd039,Zi['y']=_0x4754fd['y']*_0x4dd039):_0x4754fd['changedTou'+'ches']?(Zi['x']=_0x4754fd['changedTou'+'ches'][-0x3d*0x28+0x13cf+-0x1*0xa47]['x']*_0x4dd039,Zi['y']=_0x4754fd['changedTou'+'ches'][-0x9d4+0x1e9c+0x428*-0x5]['y']*_0x4dd039):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Pr['origin']['set'](Zi['x'],-Zi['y'],-0x1a48+-0x229f+0x3ce7*0x1),Pr['direction']['copy'](I['FORWARD'])):(gg['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](Zi['x'],Zi['y'],0x19f6+-0x617*-0x3+0x275*-0x12)),Pr['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Pr['direction']['copy'](gg)['sub'](Pr['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x4cf64c=this['_element']['entity']['parent'];const _0x226f09=this['_element']['screen']&&this['_element']['screen']['screen'],_0x29dbe6=_0x226f09&&_0x226f09['screenSpac'+'e'],_0x329777=_0x29dbe6?_0x226f09['scale']:0x7b*-0x43+-0x2404+0x4436,_0x4f4f02=this['_dragScale'];for(_0x4f4f02['set'](_0x329777,_0x329777,_0x329777);_0x4cf64c&&(_0x4f4f02['mul'](_0x4cf64c['getLocalSc'+'ale']()),_0x4cf64c=_0x4cf64c['parent'],!(_0x29dbe6&&_0x4cf64c['screen'])););_0x4f4f02['x']=(-0x1eb2+0xc0d+0x2aa*0x7)/_0x4f4f02['x'],_0x4f4f02['y']=(-0x11aa*-0x1+0x1b23+0x4*-0xb33)/_0x4f4f02['y'],_0x4f4f02['z']=0x1*0x533+0x1225+-0x1758;}['_onMove'](_0x1abab0){const {_element:_0x207314,_deltaMousePosition:_0x199f48,_deltaHandlePosition:_0x1da9b6,_axis:_0x204059}=this;if(_0x207314&&this['_isDraggin'+'g']&&this['enabled']&&_0x207314['enabled']&&_0x207314['entity']['enabled']){const _0x4c66c5=this['_screenToL'+'ocal'](_0x1abab0);if(_0x4c66c5){if(_0x199f48['sub2'](_0x4c66c5,this['_dragStart'+'MousePosit'+'ion']),_0x1da9b6['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x199f48),_0x204059){const _0x3501e6=_0x207314['entity']['getLocalPo'+'sition'](),_0x3a611d=lO[_0x204059];_0x1da9b6[_0x3a611d]=_0x3501e6[_0x3a611d];}_0x207314['entity']['setLocalPo'+'sition'](_0x1da9b6),this['fire']('drag:move',_0x1da9b6);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x29ab9d){this['_enabled']=_0x29ab9d;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(xo,'EVENT_DRAG'+'START','drag:start'),h(xo,'EVENT_DRAG'+'END','drag:end'),h(xo,'EVENT_DRAG'+'MOVE','drag:move');const hO=-0x101d+-0x950+0x196d,vg=-0x4*0x760+-0x1a2f*-0x1+0x352*0x1,cO=0x18a6+-0x6c4*-0x4+-0x33b4,dO=-0xa1e+-0x215a+0x2b78,fO=0x1b94+0x26*-0xc4+-0x185*-0x1,io=new J();class yv extends we{constructor(_0x35189f,_0x3da994){super(_0x35189f,_0x3da994),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][be]=null,this['_prevConte'+'ntSizes'][qe]=null,this['_scroll']=new J(),this['_velocity']=new I(),this['_dragStart'+'Position']=new I(),this['_disabledC'+'ontentInpu'+'t']=!(-0x1*0x1ed7+0x18da*-0x1+0x37b2),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x48292b=this['system']['store'][this['entity']['getGuid']()];return _0x48292b?_0x48292b['data']:null;}set['enabled'](_0x3e7215){this['_setValue']('enabled',_0x3e7215);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x165125){this['_setValue']('horizontal',_0x165125);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x478c30){this['_setValue']('vertical',_0x478c30);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0xaad931){this['_setValue']('scrollMode',_0xaad931);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x2430aa){this['_setValue']('bounceAmou'+'nt',_0x2430aa);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x1b0e48){this['_setValue']('friction',_0x1b0e48);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x4db646){this['_setValue']('dragThresh'+'old',_0x4db646);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x546153){this['_setValue']('useMouseWh'+'eel',_0x546153);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x4e99a6){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x4e99a6);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x2f4c93){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x2f4c93);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x54de3e){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x54de3e);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x24c2c3){if(this['_viewportE'+'ntity']===_0x24c2c3)return;const _0x43b5d8=typeof _0x24c2c3=='string';this['_viewportE'+'ntity']&&_0x43b5d8&&this['_viewportE'+'ntity']['getGuid']()===_0x24c2c3||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x24c2c3 instanceof He?this['_viewportE'+'ntity']=_0x24c2c3:_0x43b5d8?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x24c2c3)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x43b5d8&&_0x24c2c3&&(this['data']['viewportEn'+'tity']=_0x24c2c3));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x5a4cd6){if(this['_contentEn'+'tity']===_0x5a4cd6)return;const _0xf7999a=typeof _0x5a4cd6=='string';this['_contentEn'+'tity']&&_0xf7999a&&this['_contentEn'+'tity']['getGuid']()===_0x5a4cd6||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x5a4cd6 instanceof He?this['_contentEn'+'tity']=_0x5a4cd6:_0xf7999a?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x5a4cd6)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0xf7999a&&_0x5a4cd6&&(this['data']['contentEnt'+'ity']=_0x5a4cd6));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x19d0a9){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x19d0a9)return;const _0x49cd1e=typeof _0x19d0a9=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x49cd1e&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x19d0a9||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x19d0a9 instanceof He?this['_horizonta'+'lScrollbar'+'Entity']=_0x19d0a9:_0x49cd1e?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x19d0a9)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][be]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x49cd1e&&_0x19d0a9&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x19d0a9));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x2d65b7){if(this['_verticalS'+'crollbarEn'+'tity']===_0x2d65b7)return;const _0x58ae9f=typeof _0x2d65b7=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x58ae9f&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x2d65b7||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x2d65b7 instanceof He?this['_verticalS'+'crollbarEn'+'tity']=_0x2d65b7:_0x58ae9f?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x2d65b7)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][qe]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x58ae9f&&_0x2d65b7&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x2d65b7));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x1bcf5e){this['_onSetScro'+'ll'](_0x1bcf5e['x'],_0x1bcf5e['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x462fba,_0x849b14){const _0x34e0a7=this['data'],_0x27d237=_0x34e0a7[_0x462fba];_0x34e0a7[_0x462fba]=_0x849b14,this['fire']('set',_0x462fba,_0x27d237,_0x849b14);}['_toggleLif'+'ecycleList'+'eners'](_0x47db62){this[_0x47db62]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x47db62]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x47db62]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x55f4df){if(this['entity']['element']){if(_0x55f4df==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x55f4df]('resize',this['_syncAll'],this),this['entity']['element'][_0x55f4df]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x55f4df==='on';}}['_onElement'+'ComponentA'+'dd'](_0x3239fe){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x167996){var _0x517076;(_0x517076=this['_evtElemen'+'tRemove'])==null||_0x517076['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x21dad8,_0x2779bf;(_0x21dad8=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x21dad8['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x2779bf=this['_viewportE'+'ntity'])!=null&&_0x2779bf['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x5df2bb=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x5df2bb['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x5df2bb['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x4e57a9,_0x1e70f6;(_0x4e57a9=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x4e57a9['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x1e70f6=this['_evtViewpo'+'rtResize'])==null||_0x1e70f6['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x413132,_0xd82f6d;(_0x413132=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x413132['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0xd82f6d=this['_contentEn'+'tity'])!=null&&_0xd82f6d['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x169c87=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x169c87['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x169c87['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x1c5b68,_0x61760d;(_0x1c5b68=this['_evtConten'+'tElementRe'+'move'])==null||_0x1c5b68['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x61760d=this['_evtConten'+'tResize'])==null||_0x61760d['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new xo(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][be]=null,this['_prevConte'+'ntSizes'][qe]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x272b45){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(-0x578+-0x7a8+0xd20),this['_setScroll'+'FromConten'+'tPosition'](_0x272b45),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x272b45),!this['_disabledC'+'ontentInpu'+'t'])){const _0x3ae7e6=_0x272b45['x']-this['_dragStart'+'Position']['x'],_0x2aea7f=_0x272b45['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x3ae7e6)>this['dragThresh'+'old']||Math['abs'](_0x2aea7f)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x31c13e;(_0x31c13e=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x31c13e['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x4a1e5b;(_0x4a1e5b=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x4a1e5b['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x2ef676){!this['_scrollbar'+'UpdateFlag'+'s'][be]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x2ef676,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x1d7898){!this['_scrollbar'+'UpdateFlag'+'s'][qe]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x1d7898);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x324257;const _0x74a0c2=(_0x324257=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(0x70e+-0x777+-0x3*-0x23):_0x324257['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x74a0c2['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x74a0c2['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarPositi'+'on'](be);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x5a6218;const _0x22cb4e=(_0x5a6218=this['_verticalS'+'crollbarEn'+'tity'])==null?void(-0x1f*0x85+-0x2b3*0xe+-0x7b3*-0x7):_0x5a6218['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x22cb4e['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x22cb4e['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](qe),this['_syncScrol'+'lbarPositi'+'on'](qe);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x3f075a,_0x2c2a9f;(_0x3f075a=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x3f075a['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x2c2a9f=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x2c2a9f['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x79376a,_0x5910e8;(_0x79376a=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x79376a['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x5910e8=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x5910e8['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](be);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](qe);}['_onSetScro'+'ll'](_0x3772b0,_0x36d0e3,_0x26cf71){_0x26cf71!==!(0x38*-0x91+-0x42+-0x1*-0x1ffb)&&this['_velocity']['set'](0x8b*0x21+0x2*-0x79c+-0x2b3,0xe0f+-0xd*0x93+0x1*-0x698,-0x1940+0xf29*-0x2+0x6*0x943);const _0x42810d=this['_updateAxi'+'s'](_0x3772b0,'x',be),_0x20b744=this['_updateAxi'+'s'](_0x36d0e3,'y',qe);(_0x42810d||_0x20b744)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x3c12e0,_0x49403e,_0x5d80e2){const _0x518656=_0x3c12e0!==null&&Math['abs'](_0x3c12e0-this['_scroll'][_0x49403e])>-0xa8d*0x1+0x1e*-0xd6+0x23a1+0.00001;return(_0x518656||this['_isDraggin'+'g']()||_0x3c12e0===-0x1415+-0xaa*0x29+0x2f4f)&&(this['_scroll'][_0x49403e]=this['_determine'+'NewScrollV'+'alue'](_0x3c12e0,_0x49403e,_0x5d80e2),this['_syncConte'+'ntPosition'](_0x5d80e2),this['_syncScrol'+'lbarPositi'+'on'](_0x5d80e2)),_0x518656;}['_determine'+'NewScrollV'+'alue'](_0x25a7fb,_0x131468,_0xf00d2c){if(!this['_getScroll'+'ingEnabled'](_0xf00d2c))return this['_scroll'][_0x131468];switch(this['scrollMode']){case hO:return Y['clamp'](_0x25a7fb,0x2161+0xee1+-0x80b*0x6,this['_getMaxScr'+'ollValue'](_0xf00d2c));case vg:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x25a7fb,_0x131468,_0xf00d2c),_0x25a7fb;case cO:return _0x25a7fb;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x25a7fb;}}['_syncAll'](){this['_syncConte'+'ntPosition'](be),this['_syncConte'+'ntPosition'](qe),this['_syncScrol'+'lbarPositi'+'on'](be),this['_syncScrol'+'lbarPositi'+'on'](qe),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarEnable'+'dState'](qe);}['_syncConte'+'ntPosition'](_0x702b01){if(!this['_contentEn'+'tity'])return;const _0x5cbc34=this['_getAxis'](_0x702b01),_0x110578=this['_getSign'](_0x702b01),_0x477396=this['_prevConte'+'ntSizes'][_0x702b01],_0x2bf886=this['_getConten'+'tSize'](_0x702b01);if(_0x477396!==null&&Math['abs'](_0x477396-_0x2bf886)>-0x1*-0x1f3d+-0x6*-0x1ce+-0x3d3*0xb+0.0001){const _0x1ab026=this['_getMaxOff'+'set'](_0x702b01,_0x477396),_0x1ad3e5=this['_getMaxOff'+'set'](_0x702b01,_0x2bf886);_0x1ad3e5===-0x1f28+-0x1a04+0x392c*0x1?this['_scroll'][_0x5cbc34]=-0x20ab+0x3d+-0x169*-0x17:this['_scroll'][_0x5cbc34]=Y['clamp'](this['_scroll'][_0x5cbc34]*_0x1ab026/_0x1ad3e5,-0x1*0x1f+-0x1*-0x1229+0x1*-0x120a,-0x1*-0xb77+-0x10a6+-0x530*-0x1);}const _0x805930=this['_scroll'][_0x5cbc34]*this['_getMaxOff'+'set'](_0x702b01),_0x442160=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x442160[_0x5cbc34]=_0x805930*_0x110578,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x442160),this['_prevConte'+'ntSizes'][_0x702b01]=_0x2bf886;}['_syncScrol'+'lbarPositi'+'on'](_0x1bc6ef){const _0x72fa96=this['_scrollbar'+'Entities'][_0x1bc6ef];if(!(_0x72fa96!=null&&_0x72fa96['scrollbar']))return;const _0x3868b9=this['_getAxis'](_0x1bc6ef);this['_scrollbar'+'UpdateFlag'+'s'][_0x1bc6ef]=!(0x22c4+-0x4*-0x189+-0x28e8*0x1),_0x72fa96['scrollbar']['value']=this['_scroll'][_0x3868b9],_0x72fa96['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x3868b9,_0x1bc6ef),this['_scrollbar'+'UpdateFlag'+'s'][_0x1bc6ef]=!(0xa*-0x33f+0xd2d+0x134a);}['_syncScrol'+'lbarEnable'+'dState'](_0x2a2cbd){const _0x37374f=this['_scrollbar'+'Entities'][_0x2a2cbd];if(!_0x37374f)return;const _0x3337d6=this['_getScroll'+'ingEnabled'](_0x2a2cbd),_0x1b8bb9=this['_getScroll'+'barVisibil'+'ity'](_0x2a2cbd);switch(_0x1b8bb9){case dO:_0x37374f['enabled']=_0x3337d6;return;case fO:_0x37374f['enabled']=_0x3337d6&&this['_contentIs'+'LargerThan'+'Viewport'](_0x2a2cbd);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x1b8bb9),_0x37374f['enabled']=_0x3337d6;}}['_contentIs'+'LargerThan'+'Viewport'](_0x417ee1){return this['_getConten'+'tSize'](_0x417ee1)>this['_getViewpo'+'rtSize'](_0x417ee1);}['_contentPo'+'sitionToSc'+'rollValue'](_0x5a3d6d){const _0x3ba11e=this['_getMaxOff'+'set'](be),_0x276815=this['_getMaxOff'+'set'](qe);return _0x3ba11e===0x1*0x180d+0x174c+-0x2f59?io['x']=0x5d*-0xb+-0x1916+0x1d15:io['x']=_0x5a3d6d['x']/_0x3ba11e,_0x276815===-0x1861+-0x246f*0x1+-0x10*-0x3cd?io['y']=-0x1*0x115+-0x1c0e+-0x1d23*-0x1:io['y']=_0x5a3d6d['y']/-_0x276815,io;}['_getMaxOff'+'set'](_0x4891d8,_0x1696c4){_0x1696c4=_0x1696c4===void(0x6c1+0xb2*-0x4+0x3f9*-0x1)?this['_getConten'+'tSize'](_0x4891d8):_0x1696c4;const _0x198426=this['_getViewpo'+'rtSize'](_0x4891d8);return _0x1696c4<_0x198426?-this['_getViewpo'+'rtSize'](_0x4891d8):_0x198426-_0x1696c4;}['_getMaxScr'+'ollValue'](_0x900159){return this['_contentIs'+'LargerThan'+'Viewport'](_0x900159)?-0x24be+0x6*0x32b+0x11bd:0xda*0x10+-0x1058+0x2b8;}['_getScroll'+'barHandleS'+'ize'](_0xb724c7,_0x47b2db){const _0xa5e7f=this['_getViewpo'+'rtSize'](_0x47b2db),_0x363e06=this['_getConten'+'tSize'](_0x47b2db);if(Math['abs'](_0x363e06)<0x12e*0x5+-0x383+0x2f*-0xd+0.001)return 0x5b3*-0x2+0x7d*-0x3a+0x27b9;const _0x168e25=Math['min'](_0xa5e7f/_0x363e06,-0x1*0x116+-0x227a*0x1+0x2391),_0x3b745c=this['_toOversho'+'ot'](this['_scroll'][_0xb724c7],_0x47b2db);return _0x3b745c===-0x2*-0x148+0x20b2+-0x2342*0x1?_0x168e25:_0x168e25/(-0xa45*-0x3+0x168d*-0x1+-0x841+Math['abs'](_0x3b745c));}['_getViewpo'+'rtSize'](_0x3b1617){return this['_getSize'](_0x3b1617,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x53dd7b){return this['_getSize'](_0x53dd7b,this['_contentEn'+'tity']);}['_getSize'](_0x4bedda,_0x2531ef){return _0x2531ef!=null&&_0x2531ef['element']?_0x2531ef['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x4bedda)]:-0x286*0x7+0x1a77*0x1+0x3*-0x2ef;}['_getScroll'+'ingEnabled'](_0x32d920){if(_0x32d920===be)return this['horizontal'];if(_0x32d920===qe)return this['vertical'];M['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x32d920);}['_getScroll'+'barVisibil'+'ity'](_0x2cc543){if(_0x2cc543===be)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x2cc543===qe)return this['verticalSc'+'rollbarVis'+'ibility'];M['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x2cc543);}['_getSign'](_0x13c3b9){return _0x13c3b9===be?-0x22b1+-0x1542+0x2*0x1bfa:-(-0x1220+-0x594*0x4+0x2871);}['_getAxis'](_0x1cdec5){return _0x1cdec5===be?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x1884f1){return _0x1884f1===be?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](be),this['_syncScrol'+'lbarEnable'+'dState'](qe));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===vg&&(this['_hasOversh'+'oot']('x',be)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',be),this['_hasOversh'+'oot']('y',qe)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',qe)),Math['abs'](this['_velocity']['x'])>0x17e1+0x202d*-0x1+-0xec*-0x9+0.0001||Math['abs'](this['_velocity']['y'])>-0x23f6+-0x29*0x46+-0x2*-0x1796+0.0001){const _0xe34fe0=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0xe34fe0['x']+=this['_velocity']['x'],_0xe34fe0['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0xe34fe0),this['_setScroll'+'FromConten'+'tPosition'](_0xe34fe0);}this['_velocity']['x']*=0x1*-0x113b+0x30d+0xe2f-this['friction'],this['_velocity']['y']*=0x16*0x15b+0x809+-0x66*0x5f-this['friction'];}}['_hasOversh'+'oot'](_0x43aea4,_0x5ea779){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x43aea4],_0x5ea779))>-0x5*0x773+0x1e4d+0x6f2+0.001;}['_toOversho'+'ot'](_0x50970d,_0x496d5b){const _0x54aa6c=this['_getMaxScr'+'ollValue'](_0x496d5b);return _0x50970d<0x256a+0x15cf+-0x3b39*0x1?_0x50970d:_0x50970d>_0x54aa6c?_0x50970d-_0x54aa6c:-0xb83+0x1e4a*-0x1+0x29cd;}['_setVeloci'+'tyFromOver'+'shoot'](_0x4478d5,_0x1f60b1,_0x1af64d){const _0x53e6be=this['_toOversho'+'ot'](_0x4478d5,_0x1af64d)*this['_getMaxOff'+'set'](_0x1af64d)*this['_getSign'](_0x1af64d);Math['abs'](_0x53e6be)>-0x1*-0x9b7+-0x185*-0x9+-0x1764&&(this['_velocity'][_0x1f60b1]=-_0x53e6be/(this['bounceAmou'+'nt']*(-0x18dd+0x88*0xb+-0x1*-0x1337)+(-0x213c+-0x22cb*0x1+0x4408)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x296f9d){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x296f9d,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x296f9d)):(this['_velocity']['set'](0x1*0xd69+0x8*-0x1bb+-0x6f*-0x1,0x14e5+-0x1394+-0x151,-0x1*-0x15fe+-0x1879*-0x1+0x94b*-0x5),this['_prevConte'+'ntDragPosi'+'tion']=_0x296f9d['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x507a29){let _0xdb1c6=this['_contentPo'+'sitionToSc'+'rollValue'](_0x507a29);this['_isDraggin'+'g']()&&(_0xdb1c6=this['_applyScro'+'llValueTen'+'sion'](_0xdb1c6)),this['_onSetScro'+'ll'](_0xdb1c6['x'],_0xdb1c6['y'],!(-0x1*-0x1b4e+-0x10ed*-0x1+-0x6f*0x66));}['_applyScro'+'llValueTen'+'sion'](_0x6aa2d8){let _0x1a0db6=this['_getMaxScr'+'ollValue'](be),_0x135f24=this['_toOversho'+'ot'](_0x6aa2d8['x'],be);return _0x135f24>-0x9*-0x3db+-0x1*0xa2a+0x1889*-0x1?_0x6aa2d8['x']=_0x1a0db6+(0xf3a+0x1206+-0xb15*0x3)*Math['log10'](-0x9d4+0x21a6+0x5b*-0x43+_0x135f24):_0x135f24<0xb71*-0x2+-0x1894+0x2f76&&(_0x6aa2d8['x']=-(-0x2010+0x6ae*-0x1+-0x6d*-0x5b)*Math['log10'](-0x26*0x83+0x1d01+-0x98e*0x1-_0x135f24)),_0x1a0db6=this['_getMaxScr'+'ollValue'](qe),_0x135f24=this['_toOversho'+'ot'](_0x6aa2d8['y'],qe),_0x135f24>-0xca*0x19+0x9dc+0x9de?_0x6aa2d8['y']=_0x1a0db6+(0x2*-0xb89+0xd*0x233+0x1*-0x584)*Math['log10'](0x15d8+0x1d3b+0x883*-0x6+_0x135f24):_0x135f24<-0x3*0xcc8+-0x148c+-0x2*-0x1d72&&(_0x6aa2d8['y']=-(0x21fd*-0x1+-0x1b00+-0x3cfe*-0x1)*Math['log10'](-0x2549+0x4ad+0x209d-_0x135f24)),_0x6aa2d8;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x1ad1b4){var _0x4692ff,_0xc94acc;(_0x4692ff=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x4692ff['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x1ad1b4),(_0xc94acc=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0xc94acc['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x1ad1b4);}['_setConten'+'tDraggingE'+'nabled'](_0x23ec16){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x23ec16);}['_onMouseWh'+'eel'](_0x20fadf){var _0x1f1712;if(!this['useMouseWh'+'eel']||!((_0x1f1712=this['_contentEn'+'tity'])!=null&&_0x1f1712['element']))return;const _0x4bafbc=_0x20fadf['event'],_0x3ce32d=_0x4bafbc['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x34cf09=_0x4bafbc['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x3c1780=Y['clamp'](this['_scroll']['x']+_0x3ce32d,0x1828+0xed9+0x2701*-0x1,this['_getMaxScr'+'ollValue'](be)),_0x342b2f=Y['clamp'](this['_scroll']['y']+_0x34cf09,-0x2e0+-0xa*-0x28c+-0x8*0x2d3,this['_getMaxScr'+'ollValue'](qe));this['scroll']=new J(_0x3c1780,_0x342b2f);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x1718ca=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x1718ca['element']&&(_0x1718ca['element']['useInput']=!(-0x1*-0x10e7+0x1fc6+-0x1*0x30ad));}this['_disabledC'+'ontentInpu'+'t']=!(0x559*-0x1+0xd0*0x6+0x7a);}['_disableCo'+'ntentInput'](){const _0x28f9ce=_0x2ccf39=>{_0x2ccf39['element']&&_0x2ccf39['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x2ccf39),_0x2ccf39['element']['useInput']=!(0x3*-0x60d+-0x31*-0xbf+-0x1267));const _0x2e1070=_0x2ccf39['children'];for(let _0x584e0e=0x2ca*0xc+0x10*-0x131+-0x1*0xe68,_0x2ae8e2=_0x2e1070['length'];_0x584e0e<_0x2ae8e2;_0x584e0e++)_0x28f9ce(_0x2e1070[_0x584e0e]);};if(this['_contentEn'+'tity']){const _0x2f35d2=this['_contentEn'+'tity']['children'];for(let _0x4d4374=0xc*0xae+-0x2*-0xdf3+-0x240e,_0x1aaea4=_0x2f35d2['length'];_0x4d4374<_0x1aaea4;_0x4d4374++)_0x28f9ce(_0x2f35d2[_0x4d4374]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x8b7+-0xa*0x13d+0x1519);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x4a*-0x4a+0x1b2b+0x1*-0x308f)),this['_setConten'+'tDraggingE'+'nabled'](!(0xd72+-0x3*0x32d+-0x3eb)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x315*0xb+-0x1909+-0xbf*-0x4f)),this['_setConten'+'tDraggingE'+'nabled'](!(0x848+0x16a9+-0x1ef0));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x2b1b9a,_0x98a037){_0x2b1b9a['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x98a037[_0x2b1b9a['viewportEn'+'tity']['getGuid']()]),_0x2b1b9a['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x98a037[_0x2b1b9a['contentEnt'+'ity']['getGuid']()]),_0x2b1b9a['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x98a037[_0x2b1b9a['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x2b1b9a['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x98a037[_0x2b1b9a['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(yv,'EVENT_SETS'+'CROLL','set:scroll');const uO=0x26*-0x4f+-0x290*-0x8+-0x8bc;class mO{constructor(){h(this,'enabled',!(-0x1a69*-0x1+0xe15+0x49*-0x8e)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',uO),h(this,'useMouseWh'+'eel',!(0x68*0x19+-0xd*-0x1e7+0x22e3*-0x1)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(-0x2390+-0x1d4+0x2565,-0x1b7*-0x2+-0x1*0xb69+-0x7fc*-0x1)),h(this,'horizontal'+'ScrollbarV'+'isibility',-0x1ea9+-0x1f*-0x1f+-0x1c*-0xf6),h(this,'verticalSc'+'rollbarVis'+'ibility',0x7*-0x3df+0x1da2+-0x289),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const xg=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],pO=-0xa11+-0x3*-0x243+0x352;class _O extends lt{constructor(_0x380844){super(_0x380844),this['id']='scrollview',this['ComponentT'+'ype']=yv,this['DataType']=mO,this['schema']=xg,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x249469,_0x1c1075,_0x1feeef){_0x1c1075['dragThresh'+'old']===void(0xb2*-0x18+-0x29b*-0x7+0x18d*-0x1)&&(_0x1c1075['dragThresh'+'old']=pO),_0x1c1075['useMouseWh'+'eel']===void(0x5a*0x7+0x1*-0x897+0x1*0x621)&&(_0x1c1075['useMouseWh'+'eel']=!(-0x5*0x118+0x9*-0x1b7+-0x1*-0x14e7)),_0x1c1075['mouseWheel'+'Sensitivit'+'y']===void(-0x1004+-0x344+-0x4d2*-0x4)&&(_0x1c1075['mouseWheel'+'Sensitivit'+'y']=new J(0xddc+-0x1*-0xbcd+-0x19a8,-0x7fa*-0x4+0x1445+0x4*-0xd0b)),super['initialize'+'ComponentD'+'ata'](_0x249469,_0x1c1075,xg),_0x249469['viewportEn'+'tity']=_0x1c1075['viewportEn'+'tity'],_0x249469['contentEnt'+'ity']=_0x1c1075['contentEnt'+'ity'],_0x249469['horizontal'+'ScrollbarE'+'ntity']=_0x1c1075['horizontal'+'ScrollbarE'+'ntity'],_0x249469['verticalSc'+'rollbarEnt'+'ity']=_0x1c1075['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x594cb6){const _0x3e3387=this['store'];for(const _0x2088fc in _0x3e3387){const _0x36dd82=_0x3e3387[_0x2088fc]['entity'],_0x489705=_0x36dd82['scrollview'];_0x489705['enabled']&&_0x36dd82['enabled']&&_0x489705['onUpdate']();}}['_onRemoveC'+'omponent'](_0xbc17ac,_0x5cab1e){_0x5cab1e['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class vv extends we{constructor(_0x5c3c6b,_0xd2ba20){super(_0x5c3c6b,_0xd2ba20),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x609af7=this['system']['store'][this['entity']['getGuid']()];return _0x609af7?_0x609af7['data']:null;}set['enabled'](_0x3a0d72){this['_setValue']('enabled',_0x3a0d72);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x24e0ad){this['_setValue']('orientatio'+'n',_0x24e0ad);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x4efcd3){this['_setValue']('value',_0x4efcd3);}get['value'](){return this['data']['value'];}set['handleSize'](_0x5cbeac){this['_setValue']('handleSize',_0x5cbeac);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x554b3a){if(this['_handleEnt'+'ity']===_0x554b3a)return;const _0x4bebd0=typeof _0x554b3a=='string';this['_handleEnt'+'ity']&&_0x4bebd0&&this['_handleEnt'+'ity']['getGuid']()===_0x554b3a||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x554b3a instanceof He?this['_handleEnt'+'ity']=_0x554b3a:_0x4bebd0?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x554b3a)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x4bebd0&&_0x554b3a&&(this['data']['handleEnti'+'ty']=_0x554b3a));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0xbf98d4,_0x351dea){const _0x4c75d0=this['data'],_0x47c360=_0x4c75d0[_0xbf98d4];_0x4c75d0[_0xbf98d4]=_0x351dea,this['fire']('set',_0xbf98d4,_0x47c360,_0x351dea);}['_toggleLif'+'ecycleList'+'eners'](_0x5fc72e){this[_0x5fc72e]('set_value',this['_onSetValu'+'e'],this),this[_0x5fc72e]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x5fc72e]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x441cd7,_0x17fc17;(_0x441cd7=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x441cd7['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x17fc17=this['_handleEnt'+'ity'])!=null&&_0x17fc17['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x4112d9=this['_handleEnt'+'ity']['element'],_0x223a22=this['_evtHandle'+'EntityChan'+'ges'];_0x223a22['push'](_0x4112d9['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x223a22['push'](_0x4112d9['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x223a22['push'](_0x4112d9['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x223a22['push'](_0x4112d9['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x4ebb80=-0x1*0xa7+-0x19a9*-0x1+0x1902*-0x1;_0x4ebb80<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x4ebb80++)this['_evtHandle'+'EntityChan'+'ges'][_0x4ebb80]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x1df*0x4+0x120e*0x1+-0x6*0x1c3;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new xo(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0xff69ae){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0xff69ae[this['_getAxis']()]));}['_onSetValu'+'e'](_0x12d11c,_0x5b3091,_0x457182){Math['abs'](_0x457182-_0x5b3091)>-0x1*0x1894+0xe6c+0xa28+0.00001&&(this['data']['value']=Y['clamp'](_0x457182,0xd84+0x2478+0x1*-0x31fc,0xd0a+-0x2*-0x407+-0x1*0x1517),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x3705a0,_0x58024e,_0x222746){Math['abs'](_0x222746-_0x58024e)>-0x3b*-0x5a+0x21e+-0x16dc+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x222746,0x1c98+0x125*0x19+-0x3935,0x3*-0x9ff+-0x3*-0x24a+0x1720),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x1efdd3,_0x19b158,_0x157cb6){var _0x38db40;_0x157cb6!==_0x19b158&&((_0x38db40=this['_handleEnt'+'ity'])!=null&&_0x38db40['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0x1*0x14b9+0x2375+0xa4*-0x17);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x1e1c2a=this['_handleEnt'+'ity'],_0x4c5a15=_0x1e1c2a==null?void(0x1087*0x1+-0x2d4*0x7+0x345):_0x1e1c2a['element'];if(_0x1e1c2a){const _0x18e5d3=_0x1e1c2a['getLocalPo'+'sition']();_0x18e5d3[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x1e1c2a['setLocalPo'+'sition'](_0x18e5d3);}_0x4c5a15&&(_0x4c5a15[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x25e4de){return _0x25e4de*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x3038e4){return _0x3038e4*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x6ec*-0x1+-0x17b0+0xa34*0x3+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===be?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x25ad+-0x74e*-0x2+0xa75*-0x5;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===be?0x1659*0x1+-0xfe7+-0x671:-(0x53b+-0xd98+-0x132*-0x7);}['_getAxis'](){return this['orientatio'+'n']===be?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===be?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===be?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x2ca079){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x2ca079);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x1*0x8f5+0x1db9+-0x14c4));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x3*0x5bc+0x1858+-0x298b));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3874d7,_0x37371b){_0x3874d7['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x37371b[_0x3874d7['handleEnti'+'ty']['getGuid']()]);}}h(vv,'EVENT_SETV'+'ALUE','set:value');class gO{constructor(){h(this,'enabled',!(-0x1f1c+-0x1d09+0x1*0x3c25)),h(this,'orientatio'+'n',be),h(this,'value',0x55b*-0x6+0x25e3+-0x5c1),h(this,'handleSize',0x1abf+0x1*-0x1603+-0x4bc),h(this,'handleEnti'+'ty',null);}}const Tg=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class SO extends lt{constructor(_0x13dc15){super(_0x13dc15),this['id']='scrollbar',this['ComponentT'+'ype']=vv,this['DataType']=gO,this['schema']=Tg,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x2922bb,_0x21ab39,_0x38a318){super['initialize'+'ComponentD'+'ata'](_0x2922bb,_0x21ab39,Tg),_0x2922bb['handleEnti'+'ty']=_0x21ab39['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x3fe112){_0x3fe112['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x471402,_0x14449f){_0x14449f['onRemove']();}}const yO={'volume':0x0,'pitch':0x0,'loop':!(0x27a*-0x4+0x1c9a+-0x12b1),'startTime':0x0,'duration':0x0,'position':new I(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Oi extends pe{constructor(_0x3e018c,_0x269c7f='Untitled',_0x608ac3={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x3e018c,this['_assets']=_0x3e018c['system']['app']['assets'],this['_manager']=_0x3e018c['system']['manager'],this['name']=_0x269c7f,this['_volume']=_0x608ac3['volume']!==void(0x1*0x423+0x19da+-0x1dfd)?Y['clamp'](Number(_0x608ac3['volume'])||-0x50*0x1+0x2c2+-0x272,0x1012+0xa*0x145+-0x1cc4,-0x239a+-0x2468+0x4803):-0x1e83+0x61*-0x31+-0x23*-0x167,this['_pitch']=_0x608ac3['pitch']!==void(-0x1c29+-0x57a+-0x1*-0x21a3)?Math['max'](-0x10e9+-0x118+0x1201+0.01,Number(_0x608ac3['pitch'])||-0x221b+0xcb0+0x156b):0x1352+-0x1*-0xd0d+-0x205e,this['_loop']=!!(_0x608ac3['loop']!==void(0x1bd2+0x5b1*-0x5+-0x1*-0xa3)&&_0x608ac3['loop']),this['_duration']=_0x608ac3['duration']>0xce7+0x9e*0x5+-0xffd?_0x608ac3['duration']:null,this['_startTime']=Math['max'](-0x81*0x24+-0x1*-0x781+0xaa3,Number(_0x608ac3['startTime'])||-0x4*0x1d3+-0x1ef1+-0xd*-0x2f1),this['_overlap']=!!_0x608ac3['overlap'],this['_autoPlay']=!!_0x608ac3['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x608ac3['asset'],this['_asset']instanceof me&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x53090e){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){M['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x478bb7=_0x53090e;if(_0x478bb7||(_0x478bb7=this['_createIns'+'tance'](),this['instances']['push'](_0x478bb7)),this['isLoaded'])_0x478bb7['play']();else{const _0x3dd60a=function(_0x90d6c2){const _0x42f5a3=_0x478bb7['_playWhenL'+'oaded'];_0x478bb7['sound']=_0x90d6c2,_0x42f5a3&&_0x478bb7['play']();};this['off']('load',_0x3dd60a),this['once']('load',_0x3dd60a),this['load']();}return _0x478bb7;}['pause'](){let _0x176919=!(-0x1a71+-0x25f0+0x4062);const _0x30164a=this['instances'];for(let _0x55d39b=0xd*0x283+-0x16a6*-0x1+-0x374d,_0x563ae6=_0x30164a['length'];_0x55d39b<_0x563ae6;_0x55d39b++)_0x30164a[_0x55d39b]['pause']()&&(_0x176919=!(-0x4*0x47+0xb25+0x16f*-0x7));return _0x176919;}['resume'](){let _0x5b7f9b=!(0x425*0x1+0x1*0xaf+-0xf7*0x5);const _0x492c11=this['instances'];for(let _0x4270ad=-0x9eb+0x2e7+0x704,_0x2ee7a2=_0x492c11['length'];_0x4270ad<_0x2ee7a2;_0x4270ad++)_0x492c11[_0x4270ad]['resume']()&&(_0x5b7f9b=!(0x147a+0x2*-0x1073+0xc6c));return _0x5b7f9b;}['stop'](){let _0x202cb8=!(-0x1451+0x1*0x1f16+-0xac4);const _0x3e70fa=this['instances'];let _0x3ec0db=_0x3e70fa['length'];for(;_0x3ec0db--;)_0x3e70fa[_0x3ec0db]['stop'](),_0x202cb8=!(0xd0+0xe90+-0xf60);return _0x3e70fa['length']=-0x73*0x41+0x1b45+-0x26*-0xd,_0x202cb8;}['load'](){if(!this['_hasAsset']())return;const _0x4076ab=this['_assets']['get'](this['_asset']);if(!_0x4076ab){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x4076ab['off']('remove',this['_onAssetRe'+'moved'],this),_0x4076ab['on']('remove',this['_onAssetRe'+'moved'],this),!_0x4076ab['resource']){_0x4076ab['off']('load',this['_onAssetLo'+'ad'],this),_0x4076ab['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x4076ab);return;}this['fire']('load',_0x4076ab['resource']);}['setExterna'+'lNodes'](_0x51dbee,_0x3490dc){if(!_0x51dbee){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x3490dc||(_0x3490dc=_0x51dbee),this['_firstNode']=_0x51dbee,this['_lastNode']=_0x3490dc,!this['_overlap']){const _0x21b058=this['instances'];for(let _0x14cfec=0x42*0x2f+-0x6fb*-0x5+-0x2f05,_0x17db1f=_0x21b058['length'];_0x14cfec<_0x17db1f;_0x14cfec++)_0x21b058[_0x14cfec]['setExterna'+'lNodes'](_0x51dbee,_0x3490dc);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x513946=this['instances'];for(let _0x186b76=-0x214f+0xa14+0x13*0x139,_0x4c800f=_0x513946['length'];_0x186b76<_0x4c800f;_0x186b76++)_0x513946[_0x186b76]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0xd0dc4c=null;const _0x377817=this['_component'];let _0x52bd67=null;if(this['_hasAsset']()){const _0x25ea54=this['_assets']['get'](this['_asset']);_0x25ea54&&(_0x52bd67=_0x25ea54['resource']);}const _0x3c9d9e=yO;return _0x3c9d9e['volume']=this['_volume']*_0x377817['volume'],_0x3c9d9e['pitch']=this['_pitch']*_0x377817['pitch'],_0x3c9d9e['loop']=this['_loop'],_0x3c9d9e['startTime']=this['_startTime'],_0x3c9d9e['duration']=this['_duration'],_0x3c9d9e['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x3c9d9e['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x3c9d9e['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x3c9d9e['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x3c9d9e['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x377817['positional']?(_0x3c9d9e['position']['copy'](_0x377817['entity']['getPositio'+'n']()),_0x3c9d9e['maxDistanc'+'e']=_0x377817['maxDistanc'+'e'],_0x3c9d9e['refDistanc'+'e']=_0x377817['refDistanc'+'e'],_0x3c9d9e['rollOffFac'+'tor']=_0x377817['rollOffFac'+'tor'],_0x3c9d9e['distanceMo'+'del']=_0x377817['distanceMo'+'del'],_0xd0dc4c=new Va(this['_manager'],_0x52bd67,_0x3c9d9e)):_0xd0dc4c=new Ss(this['_manager'],_0x52bd67,_0x3c9d9e),this['_firstNode']&&_0xd0dc4c['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0xd0dc4c;}['_onInstanc'+'ePlay'](_0x27bfb3){this['fire']('play',_0x27bfb3),this['_component']['fire']('play',this,_0x27bfb3);}['_onInstanc'+'ePause'](_0x5f1dc5){this['fire']('pause',_0x5f1dc5),this['_component']['fire']('pause',this,_0x5f1dc5);}['_onInstanc'+'eResume'](_0x4f0af7){this['fire']('resume',_0x4f0af7),this['_component']['fire']('resume',this,_0x4f0af7);}['_onInstanc'+'eStop'](_0x84a545){const _0x239d65=this['instances']['indexOf'](_0x84a545);_0x239d65!==-(-0x2*-0xb3e+-0xdb*-0x20+-0x31db)&&this['instances']['splice'](_0x239d65,0x1*-0x57b+-0xd8+0x36*0x1e),this['fire']('stop',_0x84a545),this['_component']['fire']('stop',this,_0x84a545);}['_onInstanc'+'eEnd'](_0xfc53cb){const _0x34e98a=this['instances']['indexOf'](_0xfc53cb);_0x34e98a!==-(-0x15a8+0x85e+0xd4b)&&this['instances']['splice'](_0x34e98a,0xf*-0x23d+-0x1e24+0x3fb8),this['fire']('end',_0xfc53cb),this['_component']['fire']('end',this,_0xfc53cb);}['_onAssetAd'+'d'](_0x49491){this['load']();}['_onAssetLo'+'ad'](_0x32b690){this['load']();}['_onAssetRe'+'moved'](_0x264240){_0x264240['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x264240['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x4f70e1){const _0x3530ed=this['instances'];for(let _0x506577=0x1ae0+0x5ab+0x208b*-0x1,_0x4cb4c5=_0x3530ed['length'];_0x506577<_0x4cb4c5;_0x506577++)_0x3530ed[_0x506577]['position']=_0x4f70e1;}set['asset'](_0x203cd0){const _0x2b69c7=this['_asset'];if(_0x2b69c7){this['_assets']['off']('add:'+_0x2b69c7,this['_onAssetAd'+'d'],this);const _0x36be46=this['_assets']['get'](_0x2b69c7);_0x36be46&&_0x36be46['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x203cd0,this['_asset']instanceof me&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x53d958){this['_autoPlay']=!!_0x53d958;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x571633){if(this['_duration']=Math['max'](0x1*0x60+-0x5*-0x4ad+-0x17c1,Number(_0x571633)||0x89f*0x1+-0x16dd*0x1+0xe3e)||null,!this['_overlap']){const _0x52feb3=this['instances'];for(let _0x5c8280=-0x22c4+0xdfd+0x14c7,_0x549f24=_0x52feb3['length'];_0x5c8280<_0x549f24;_0x5c8280++)_0x52feb3[_0x5c8280]['duration']=this['_duration'];}}get['duration'](){let _0x1b828a=-0x12f9+0x22db*-0x1+0xd75*0x4;if(this['_hasAsset']()){const _0x2ede44=this['_assets']['get'](this['_asset']);_0x1b828a=_0x2ede44!=null&&_0x2ede44['resource']?_0x2ede44['resource']['duration']:0x212c*-0x1+0x188a+0x8a2;}return this['_duration']!=null?this['_duration']%(_0x1b828a||-0x20ca+0xe30*-0x1+0x2efb):_0x1b828a;}get['isLoaded'](){if(this['_hasAsset']()){const _0x3ab5fc=this['_assets']['get'](this['_asset']);if(_0x3ab5fc)return!!_0x3ab5fc['resource'];}return!(0xa39*0x3+-0x418*0x2+-0x167a);}get['isPaused'](){const _0x50cd27=this['instances'],_0x336cdc=_0x50cd27['length'];if(_0x336cdc===0x18bb*-0x1+0x167b+0x240)return!(-0x1a05*-0x1+0xb*0x2e3+-0x39c5);for(let _0x4f7d17=0x52e*0x7+-0x1fb8+-0x1*0x48a;_0x4f7d17<_0x336cdc;_0x4f7d17++)if(!_0x50cd27[_0x4f7d17]['isPaused'])return!(0x1*0xb66+-0xe4e+0x2e9);return!(-0x1e1f+-0x5dc+0x23fb*0x1);}get['isPlaying'](){const _0xd868a3=this['instances'];for(let _0x51c5a2=0x3cf+-0x1851+0x1482,_0x282b54=_0xd868a3['length'];_0x51c5a2<_0x282b54;_0x51c5a2++)if(_0xd868a3[_0x51c5a2]['isPlaying'])return!(0xd62+-0xb61+-0x201);return!(0x1893+-0x1a60+0x4d*0x6);}get['isStopped'](){const _0x1a9bf0=this['instances'];for(let _0x483eee=-0x7ae+0xa6f+-0x2c1,_0x3be0bb=_0x1a9bf0['length'];_0x483eee<_0x3be0bb;_0x483eee++)if(!_0x1a9bf0[_0x483eee]['isStopped'])return!(0xfd8+-0x281*-0x4+0x1*-0x19db);return!(0x5c6*-0x2+-0x14c8+0x2054*0x1);}set['loop'](_0x18279e){this['_loop']=!!_0x18279e;const _0x2589a4=this['instances'];for(let _0x354b91=-0xc89+0xb2*0x33+-0x16ed,_0x3576af=_0x2589a4['length'];_0x354b91<_0x3576af;_0x354b91++)_0x2589a4[_0x354b91]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x1759ee){this['_overlap']=!!_0x1759ee;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x2d3fa1){if(this['_pitch']=Math['max'](Number(_0x2d3fa1)||0x1165+-0x17a*-0x1a+-0x37c9,0x171e+0xa*0x6d+-0x1b60+0.01),!this['_overlap']){const _0x2a20a9=this['instances'];for(let _0x3251f2=0x26e7+0x10fd+0x1c*-0x1ff,_0x702b4a=_0x2a20a9['length'];_0x3251f2<_0x702b4a;_0x3251f2++)_0x2a20a9[_0x3251f2]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x44fbbf){if(this['_startTime']=Math['max'](-0x1*-0x22bd+0x8c3+0x15c0*-0x2,Number(_0x44fbbf)||0x12aa+-0x59*0x45+0x553),!this['_overlap']){const _0x2cc0e0=this['instances'];for(let _0x578578=0x6a5+0x2f1*-0x1+-0x3b4,_0x3ad9f0=_0x2cc0e0['length'];_0x578578<_0x3ad9f0;_0x578578++)_0x2cc0e0[_0x578578]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x98d0ba){if(this['_volume']=Y['clamp'](Number(_0x98d0ba)||-0x10df+-0x1ee1+0x2fc0,0xa*0x221+0x1849+0x1*-0x2d93,-0x72*-0x4f+0xc3b+-0x52*0x94),!this['_overlap']){const _0x8159d5=this['instances'];for(let _0x4a7fda=0x4*0x28f+-0x1e85+0x1449,_0x69bd7c=_0x8159d5['length'];_0x4a7fda<_0x69bd7c;_0x4a7fda++)_0x8159d5[_0x4a7fda]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Oi,'EVENT_PLAY','play'),h(Oi,'EVENT_PAUS'+'E','pause'),h(Oi,'EVENT_RESU'+'ME','resume'),h(Oi,'EVENT_STOP','stop'),h(Oi,'EVENT_END','end'),h(Oi,'EVENT_LOAD','load');class Nr extends we{constructor(){super(...arguments),h(this,'_volume',0x2*-0x8b+0xeee+-0x49d*0x3),h(this,'_pitch',-0xc1b*-0x1+0x2338+-0x9*0x542),h(this,'_positiona'+'l',!(-0x19f4+0x3*0x765+-0x5*-0xc1)),h(this,'_refDistan'+'ce',-0x16d7+0x55*-0x35+0x2871),h(this,'_maxDistan'+'ce',0x5*0x4c1+-0x265e+0x2d3*0x13),h(this,'_rollOffFa'+'ctor',-0x1f9*-0x1+0x1*0x16d3+-0x18cb),h(this,'_distanceM'+'odel',om),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x31ae5b,_0x4a4319,_0x244395){const _0x1bd2e8=this['_slots'];for(const _0x44a3ee in _0x1bd2e8){const _0x10c9fd=_0x1bd2e8[_0x44a3ee];if(!_0x10c9fd['overlap']){const _0x5c9ed7=_0x10c9fd['instances'];for(let _0x1761b7=-0x287*-0x8+0x12b1*-0x1+-0x187,_0x2e5a3f=_0x5c9ed7['length'];_0x1761b7<_0x2e5a3f;_0x1761b7++)_0x5c9ed7[_0x1761b7][_0x31ae5b]=_0x244395?_0x10c9fd[_0x31ae5b]*_0x4a4319:_0x4a4319;}}}set['distanceMo'+'del'](_0x5461b6){this['_distanceM'+'odel']=_0x5461b6,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x5461b6,!(0xe41+0x20d7+0x96b*-0x5));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x5a22f1){this['_maxDistan'+'ce']=_0x5a22f1,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x5a22f1,!(-0x175b+-0x1*0x1b21+0x1*0x327d));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x2d6c3f){this['_refDistan'+'ce']=_0x2d6c3f,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x2d6c3f,!(0x17*0x167+0x1ac+-0x21ec));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x37244e){this['_rollOffFa'+'ctor']=_0x37244e,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x37244e,!(0x37+-0x66d+0x637));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x53daad){this['_pitch']=_0x53daad,this['_updateSou'+'ndInstance'+'s']('pitch',_0x53daad,!(-0x1*0x10b1+-0x1f*0x2b+-0xaf3*-0x2));}get['pitch'](){return this['_pitch'];}set['volume'](_0x42f85f){this['_volume']=_0x42f85f,this['_updateSou'+'ndInstance'+'s']('volume',_0x42f85f,!(0x1cd2+0x58c+-0x225e));}get['volume'](){return this['_volume'];}set['positional'](_0x5096d0){this['_positiona'+'l']=_0x5096d0;const _0x61a602=this['_slots'];for(const _0x8f8ecb in _0x61a602){const _0x43633f=_0x61a602[_0x8f8ecb];if(!_0x43633f['overlap']){const _0x38d9d9=_0x43633f['instances'],_0x1a7ccc=_0x38d9d9['length'];for(let _0x47d8db=_0x1a7ccc-(0x86f+0xdd7+-0x1*0x1645);_0x47d8db>=-0x95a+0x225f+-0xb7*0x23;_0x47d8db--){const _0x405fc4=_0x38d9d9[_0x47d8db]['isPlaying']||_0x38d9d9[_0x47d8db]['isSuspende'+'d'],_0xde8fed=_0x38d9d9[_0x47d8db]['currentTim'+'e'];_0x405fc4&&_0x38d9d9[_0x47d8db]['stop']();const _0x55ff76=_0x43633f['_createIns'+'tance']();_0x405fc4&&(_0x55ff76['play'](),_0x55ff76['currentTim'+'e']=_0xde8fed),_0x38d9d9['push'](_0x55ff76);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x262b62){const _0x158303=this['_slots'];if(_0x158303){for(const _0x437734 in _0x158303)_0x158303[_0x437734]['stop']();}const _0x28ab4e={};for(const _0xd9ada1 in _0x262b62)_0x262b62[_0xd9ada1]instanceof Oi?_0x28ab4e[_0x262b62[_0xd9ada1]['name']]=_0x262b62[_0xd9ada1]:_0x262b62[_0xd9ada1]['name']&&(_0x28ab4e[_0x262b62[_0xd9ada1]['name']]=new Oi(this,_0x262b62[_0xd9ada1]['name'],_0x262b62[_0xd9ada1]));this['_slots']=_0x28ab4e,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x11179c=this['_slots'],_0x175c64=this['_playingBe'+'foreDisabl'+'e'];for(const _0xbb9bbf in _0x11179c){const _0x16726c=_0x11179c[_0xbb9bbf];_0x16726c['autoPlay']&&_0x16726c['isStopped']?_0x16726c['play']():_0x175c64[_0xbb9bbf]?_0x16726c['resume']():_0x16726c['isLoaded']||_0x16726c['load']();}}['onDisable'](){const _0x4b4577=this['_slots'],_0x354dbb={};for(const _0x5ee49f in _0x4b4577)_0x4b4577[_0x5ee49f]['overlap']||_0x4b4577[_0x5ee49f]['isPlaying']&&(_0x4b4577[_0x5ee49f]['pause'](),_0x354dbb[_0x5ee49f]=!(0x365+-0x1*-0x14f5+-0x185a));this['_playingBe'+'foreDisabl'+'e']=_0x354dbb;}['onRemove'](){this['off']();}['addSlot'](_0x5c68c2,_0x2fde43){const _0x23eae6=this['_slots'];if(_0x23eae6[_0x5c68c2])return M['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x5c68c2+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x4b5875=new Oi(this,_0x5c68c2,_0x2fde43);return _0x23eae6[_0x5c68c2]=_0x4b5875,_0x4b5875['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x4b5875['play'](),_0x4b5875;}['removeSlot'](_0x3b724a){const _0x29b7d3=this['_slots'];_0x29b7d3[_0x3b724a]&&(_0x29b7d3[_0x3b724a]['stop'](),delete _0x29b7d3[_0x3b724a]);}['slot'](_0x319ae4){return this['_slots'][_0x319ae4];}['_getSlotPr'+'operty'](_0x31c7f9,_0x2f0dc9){if(!this['enabled']||!this['entity']['enabled'])return;const _0x53b9e6=this['_slots'][_0x31c7f9];if(!_0x53b9e6){M['warn']('Trying\x20to\x20'+'get\x20'+_0x2f0dc9+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x31c7f9+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x53b9e6[_0x2f0dc9];}['isPlaying'](_0x46d42d){return this['_getSlotPr'+'operty'](_0x46d42d,'isPlaying')||!(0x1b*-0x145+-0x34*0x3+0x1172*0x2);}['isLoaded'](_0x45e710){return this['_getSlotPr'+'operty'](_0x45e710,'isLoaded')||!(0x3*-0x71f+-0x2c3*-0x1+-0x129b*-0x1);}['isPaused'](_0x534db6){return this['_getSlotPr'+'operty'](_0x534db6,'isPaused')||!(-0x6e*-0x47+-0x7*0x539+0x60e);}['isStopped'](_0x3152ec){return this['_getSlotPr'+'operty'](_0x3152ec,'isStopped')||!(-0x1*-0xb41+-0x10e8+0x5a8);}['play'](_0x23e655){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x101e3a=this['_slots'][_0x23e655];return _0x101e3a?_0x101e3a['play']():(M['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x23e655+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x5e8c87){const _0x387822=this['_slots'];if(_0x5e8c87){const _0x2c2240=_0x387822[_0x5e8c87];if(!_0x2c2240){M['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x5e8c87+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x2c2240['pause']();}else{for(const _0x22f6f3 in _0x387822)_0x387822[_0x22f6f3]['pause']();}}['resume'](_0x29438c){const _0x53f58f=this['_slots'];if(_0x29438c){const _0x3c0c83=_0x53f58f[_0x29438c];if(!_0x3c0c83){M['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x29438c+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x3c0c83['isPaused']&&_0x3c0c83['resume']();}else{for(const _0x3cf567 in _0x53f58f)_0x53f58f[_0x3cf567]['resume']();}}['stop'](_0x5a24a4){const _0x5b955f=this['_slots'];if(_0x5a24a4){const _0xdfe36b=_0x5b955f[_0x5a24a4];if(!_0xdfe36b){M['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x5a24a4+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0xdfe36b['stop']();}else{for(const _0x4790f9 in _0x5b955f)_0x5b955f[_0x4790f9]['stop']();}}}h(Nr,'EVENT_PLAY','play'),h(Nr,'EVENT_PAUS'+'E','pause'),h(Nr,'EVENT_RESU'+'ME','resume'),h(Nr,'EVENT_STOP','stop'),h(Nr,'EVENT_END','end');class vO{constructor(){this['enabled']=!(-0x9d9*-0x1+-0x17aa+0xdd1);}}const xv=['enabled'];class xO extends lt{constructor(_0x15672e){super(_0x15672e),this['id']='sound',this['ComponentT'+'ype']=Nr,this['DataType']=vO,this['schema']=xv,this['manager']=_0x15672e['soundManag'+'er'],M['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x2d28a6){this['manager']['volume']=_0x2d28a6;}get['volume'](){return this['manager']['volume'];}get['context'](){return al()?this['manager']['context']:(M['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x359b0e,_0x230557,_0x270c65){_0x270c65=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x355207=0x21c1*0x1+0xb8+-0x2279;_0x355207<_0x270c65['length'];_0x355207++)_0x230557['hasOwnProp'+'erty'](_0x270c65[_0x355207])&&(_0x359b0e[_0x270c65[_0x355207]]=_0x230557[_0x270c65[_0x355207]]);super['initialize'+'ComponentD'+'ata'](_0x359b0e,_0x230557,['enabled']);}['cloneCompo'+'nent'](_0x1509f2,_0x4f7459){const _0x32d312=_0x1509f2['sound'],_0xda9aac=_0x32d312['slots'],_0x5de0c5={};for(const _0x5410e4 in _0xda9aac){const _0x1995f5=_0xda9aac[_0x5410e4];_0x5de0c5[_0x5410e4]={'name':_0x1995f5['name'],'volume':_0x1995f5['volume'],'pitch':_0x1995f5['pitch'],'loop':_0x1995f5['loop'],'duration':_0x1995f5['duration'],'startTime':_0x1995f5['startTime'],'overlap':_0x1995f5['overlap'],'autoPlay':_0x1995f5['autoPlay'],'asset':_0x1995f5['asset']};}const _0x17443c={'distanceModel':_0x32d312['distanceMo'+'del'],'enabled':_0x32d312['enabled'],'maxDistance':_0x32d312['maxDistanc'+'e'],'pitch':_0x32d312['pitch'],'positional':_0x32d312['positional'],'refDistance':_0x32d312['refDistanc'+'e'],'rollOffFactor':_0x32d312['rollOffFac'+'tor'],'slots':_0x5de0c5,'volume':_0x32d312['volume']};return this['addCompone'+'nt'](_0x4f7459,_0x17443c);}['onUpdate'](_0x5a6e69){const _0x4f1bd2=this['store'];for(const _0x3d97ba in _0x4f1bd2)if(_0x4f1bd2['hasOwnProp'+'erty'](_0x3d97ba)){const _0xdb3710=_0x4f1bd2[_0x3d97ba]['entity'];if(_0xdb3710['enabled']){const _0x4a3c28=_0xdb3710['sound'];if(_0x4a3c28['enabled']&&_0x4a3c28['positional']){const _0x47da3f=_0xdb3710['getPositio'+'n'](),_0xb481aa=_0x4a3c28['slots'];for(const _0x1c8254 in _0xb481aa)_0xb481aa[_0x1c8254]['updatePosi'+'tion'](_0x47da3f);}}}}['onBeforeRe'+'move'](_0x1b65ca,_0x18afc0){const _0x1946ad=_0x18afc0['slots'];for(const _0x1030ac in _0x1946ad)_0x1946ad[_0x1030ac]['overlap']||_0x1946ad[_0x1030ac]['stop']();_0x18afc0['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Nr['prototype'],xv);const wg='simple',Eg='animated';class Fi extends pe{constructor(_0x433fb7,_0x1e6438){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x433fb7,this['_frame']=-0x8c9+0xd39*-0x1+0x756*0x3,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x1e6438['spriteAsse'+'t'],this['name']=_0x1e6438['name'],this['fps']=_0x1e6438['fps']||-0x234b+-0x3*-0xc77+-0x1*0x21a,this['loop']=_0x1e6438['loop']||!(-0x1e5a+-0x292*0xa+0x1*0x380f),this['_playing']=!(-0x1b01*0x1+0x7e*0x8+0x1712*0x1),this['_paused']=!(-0x17ff+-0x4*-0x6e2+0x1*-0x388),this['_time']=0x67b+0x1921*-0x1+0x2aa*0x7);}get['duration'](){if(this['_sprite']){const _0x1feaef=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x1feaef);}return 0x1*0xf65+0x1*-0x22e1+-0x2b*-0x74;}set['frame'](_0xd9c84d){this['_setFrame'](_0xd9c84d);const _0x1d6e35=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x1d6e35);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x514d40){var _0x83c210;if(this['_sprite']&&((_0x83c210=this['_evtSetMes'+'hes'])==null||_0x83c210['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x514d40,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x45fb53;!_0x514d40||!_0x514d40['atlas']?(_0x45fb53=this['_component']['_meshInsta'+'nce'],_0x45fb53&&(_0x45fb53['deletePara'+'meter']('texture_em'+'issiveMap'),_0x45fb53['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x514d40['atlas']['texture']&&(_0x45fb53=this['_component']['_meshInsta'+'nce'],_0x45fb53&&(_0x45fb53['setParamet'+'er']('texture_em'+'issiveMap',_0x514d40['atlas']['texture']),_0x45fb53['setParamet'+'er']('texture_op'+'acityMap',_0x514d40['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x240048){const _0x3f9f38=this['_component']['system']['app']['assets'];let _0x493193=_0x240048;if(_0x240048 instanceof me&&(_0x493193=_0x240048['id']),this['_spriteAss'+'et']!==_0x493193){if(this['_spriteAss'+'et']){const _0x528ab3=_0x3f9f38['get'](this['_spriteAss'+'et']);_0x528ab3&&this['_unbindSpr'+'iteAsset'](_0x528ab3);}if(this['_spriteAss'+'et']=_0x493193,this['_spriteAss'+'et']){const _0x19f669=_0x3f9f38['get'](this['_spriteAss'+'et']);_0x19f669?this['_bindSprit'+'eAsset'](_0x19f669):(this['sprite']=null,_0x3f9f38['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x30d652){this['_setTime'](_0x30d652),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0x1*0x1b85+-0xa*-0x22e+-0x107*0x30),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=-0x1c74+0xb41+-0x7*-0x275;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x12a57c){this['_component']['system']['app']['assets']['off']('add:'+_0x12a57c['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x12a57c['id']&&this['_bindSprit'+'eAsset'](_0x12a57c);}['_bindSprit'+'eAsset'](_0x49a26c){_0x49a26c['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x49a26c['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x49a26c['resource']?this['_onSpriteA'+'ssetLoad'](_0x49a26c):this['_component']['system']['app']['assets']['load'](_0x49a26c);}['_unbindSpr'+'iteAsset'](_0x541df9){_0x541df9&&(_0x541df9['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x541df9['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x541df9['resource']&&!_0x541df9['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x541df9['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x2f945b){if(!_0x2f945b['resource'])this['sprite']=null;else{if(_0x2f945b['resource']['atlas'])this['sprite']=_0x2f945b['resource'];else{const _0x4233b5=_0x2f945b['data']['textureAtl'+'asAsset'],_0x35c2c1=this['_component']['system']['app']['assets'];_0x35c2c1['off']('load:'+_0x4233b5,this['_onTexture'+'AtlasLoad'],this),_0x35c2c1['once']('load:'+_0x4233b5,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x4ca6c8){const _0x417c35=this['_spriteAss'+'et'];_0x417c35 instanceof me?this['_onSpriteA'+'ssetLoad'](_0x417c35):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x417c35));}['_onSpriteA'+'ssetRemove'](_0x107c85){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ei&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x490944){if(this['fps']===0x22*0xf1+0x2*-0x329+0x4*-0x66c||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x3cf503=this['fps']<-0x7*0x3a1+0x172c+0x23b?-(0x1*0x1a3f+0x1*0x159c+-0x2fda):-0x2297+0x11b2+-0x5a2*-0x3,_0x58f070=this['_time']+_0x490944*this['_component']['speed']*_0x3cf503,_0xe8f7f1=this['duration'],_0x24ef4f=_0x58f070>_0xe8f7f1||_0x58f070<-0x1665+-0xa2c+-0x3*-0xadb;this['_setTime'](_0x58f070);let _0x2e3a25=this['frame'];this['_sprite']?_0x2e3a25=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0xe8f7f1):_0x2e3a25=-0x9*0x39+-0x1*-0x141+0x3*0x40,_0x2e3a25!==this['_frame']&&this['_setFrame'](_0x2e3a25),_0x24ef4f&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(0x1*0xce3+0x59*0x35+-0x1f4f),this['_paused']=!(-0x1bcc+-0x19a1+0x356e),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x617804){this['_time']=_0x617804;const _0x590ec5=this['duration'];this['_time']<0x3df*-0xa+0x519+0x219d?this['loop']?this['_time']=this['_time']%_0x590ec5+_0x590ec5:this['_time']=-0x6b7+0xfb+0x5bc:this['_time']>_0x590ec5&&(this['loop']?this['_time']%=_0x590ec5:this['_time']=_0x590ec5);}['_setFrame'](_0x439e8a){this['_sprite']?this['_frame']=Y['clamp'](_0x439e8a,-0x1d35+0x6dc*0x1+-0x1659*-0x1,this['_sprite']['frameKeys']['length']-(-0x16a5+-0x1bb7+0x325d)):this['_frame']=_0x439e8a,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x1fd6e9=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x1fd6e9['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x1dcb+0x9*-0x3eb+0x578),this['_paused']=!(-0x2*-0x106e+-0xd84+-0x1357),this['frame']=0x2*-0x155+-0xd*0x97+0x73*0x17,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(0xa6*0xd+-0x1*-0x2403+0x1*-0x2c71),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(0x505*0x3+0x7*0x139+-0x9b*0x27),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0x397*0x5+-0x7d6+-0x2*-0xce5),this['_paused']=!(-0x215a+0x1a13*0x1+0x3a4*0x2),this['_time']=0x1*0x17d2+0x990+-0x2162,this['frame']=-0x1*0xd72+0x1*-0x327+-0x7*-0x25f,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Fi,'EVENT_PLAY','play'),h(Fi,'EVENT_PAUS'+'E','pause'),h(Fi,'EVENT_RESU'+'ME','resume'),h(Fi,'EVENT_STOP','stop'),h(Fi,'EVENT_END','end'),h(Fi,'EVENT_LOOP','loop');const Ag='texture_em'+'issiveMap',bg='texture_op'+'acityMap',Cg='material_e'+'missive',Pg='material_o'+'pacity',TO='innerOffse'+'t',wO='outerScale',EO='atlasRect';class Ji extends we{constructor(_0x3151d9,_0x437b13){super(_0x3151d9,_0x437b13),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=wg,this['_material']=_0x3151d9['defaultMat'+'erial'],this['_color']=new ie(0xd80+-0x1380+0x601,-0x4*-0x17b+0xe4*0x2+0x1*-0x7b3,-0x10c0+0x1*-0x1d95+0x1*0x2e56,0x5*0x33b+0x1e*-0x3+-0xfcc),this['_colorUnif'+'orm']=new Float32Array(-0x257c+-0x3e8+-0x2967*-0x1),this['_speed']=-0x657+-0x135*0x5+0x1*0xc61,this['_flipX']=!(0x10*0x19f+-0xd4c+0x1*-0xca3),this['_flipY']=!(0x1*-0x1463+0x2*-0xb17+0x2a92*0x1),this['_width']=0x1afc+0x1dc5*0x1+0x2*-0x1c60,this['_height']=-0x3*0xcdf+0xb84+0x1b1a,this['_drawOrder']=-0x1*-0x1925+0x91*0x2d+-0x32a2*0x1,this['_layers']=[Wi],this['_outerScal'+'e']=new J(0x1*0x12eb+0x39*0x94+-0x1*0x33de,0x1205+0x7ba+-0x19be),this['_outerScal'+'eUniform']=new Float32Array(-0x25*0x94+-0x1caf+0x3215),this['_innerOffs'+'et']=new ae(),this['_innerOffs'+'etUniform']=new Float32Array(0x4a*-0x74+-0xf91+0x311d),this['_atlasRect']=new ae(),this['_atlasRect'+'Uniform']=new Float32Array(0x2*0xafd+-0x1f47+0x951),this['_batchGrou'+'pId']=-(0xc2*-0x1+0x13d4+-0x1*0x1311),this['_batchGrou'+'p']=null,this['_node']=new He(),this['_model']=new $i(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x437b13['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x437b13,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(0x4*0x4a5+-0x83f*0x2+0x1*-0x215),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Fi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(0x1d7f*-0x1+-0xcb+0x1e4b),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x3da941){this['_type']!==_0x3da941&&(this['_type']=_0x3da941,this['_type']===wg?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===Eg&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x46e87b){this['_currentCl'+'ip']['frame']=_0x46e87b;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x883bd9){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x883bd9;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x4da857){this['_currentCl'+'ip']['sprite']=_0x4da857;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x4dcb1b){this['_material']=_0x4dcb1b,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x4dcb1b);}get['material'](){return this['_material'];}set['color'](_0x4c9fc1){this['_color']['r']=_0x4c9fc1['r'],this['_color']['g']=_0x4c9fc1['g'],this['_color']['b']=_0x4c9fc1['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][0x1*-0x1389+0x37d*-0x6+0x2877]=this['_color']['r'],this['_colorUnif'+'orm'][0xf53+0x21e4+0x3136*-0x1]=this['_color']['g'],this['_colorUnif'+'orm'][0x18d3+-0x18*-0xd0+-0x8dd*0x5]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](Cg,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x3a8a92){this['_color']['a']=_0x3a8a92,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](Pg,_0x3a8a92);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x374552){if(!_0x374552){for(const _0x3119a5 in this['_clips'])this['removeClip'](_0x3119a5);return;}for(const _0x403897 in this['_clips']){let _0x261217=!(0x1034+0x1*-0x1e23+-0x2*-0x6f8);for(const _0x4c0476 in _0x374552)if(_0x374552[_0x4c0476]['name']===_0x403897){_0x261217=!(0x63d*-0x2+-0xe*-0xa1+0x3ac),this['_clips'][_0x403897]['fps']=_0x374552[_0x4c0476]['fps'],this['_clips'][_0x403897]['loop']=_0x374552[_0x4c0476]['loop'],_0x374552[_0x4c0476]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x403897]['sprite']=_0x374552[_0x4c0476]['sprite']:_0x374552[_0x4c0476]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x403897]['spriteAsse'+'t']=_0x374552[_0x4c0476]['spriteAsse'+'t']);break;}_0x261217||this['removeClip'](_0x403897);}for(const _0x94b3e3 in _0x374552)this['_clips'][_0x374552[_0x94b3e3]['name']]||this['addClip'](_0x374552[_0x94b3e3]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x4c4cc7){this['_speed']=_0x4c4cc7;}get['speed'](){return this['_speed'];}set['flipX'](_0x3a0c3b){this['_flipX']!==_0x3a0c3b&&(this['_flipX']=_0x3a0c3b,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x327d2e){this['_flipY']!==_0x327d2e&&(this['_flipY']=_0x327d2e,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x29f755){_0x29f755!==this['_width']&&(this['_width']=_0x29f755,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===At||this['sprite']['renderMode']===Et)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x28b41a){_0x28b41a!==this['_height']&&(this['_height']=_0x28b41a,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===At||this['sprite']['renderMode']===Et)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x2fb0c5){var _0x21980f,_0x5abad8;if(this['_batchGrou'+'pId']===_0x2fb0c5)return;const _0x369f9f=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x2fb0c5,this['entity']['enabled']&&_0x369f9f>=0x1*-0x1b7c+-0xa5*0x37+-0x1*-0x3eef&&((_0x21980f=this['system']['app']['batcher'])==null||_0x21980f['remove'](mt['SPRITE'],_0x369f9f,this['entity'])),this['entity']['enabled']&&_0x2fb0c5>=0x872*-0x1+-0x1bf7+0xc23*0x3?(_0x5abad8=this['system']['app']['batcher'])==null||_0x5abad8['insert'](mt['SPRITE'],_0x2fb0c5,this['entity']):_0x369f9f>=0x1*0xdf3+-0x2f*0x4b+0x1*-0x2e&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x4ac11e){this['_autoPlayC'+'lip']=_0x4ac11e instanceof Fi?_0x4ac11e['name']:_0x4ac11e,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x378154){this['_drawOrder']=_0x378154,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x378154);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x2115b0){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x2115b0,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x453f96;const _0x356ce5=this['system']['app'],_0x48191d=_0x356ce5['scene'],_0x1a6263=_0x48191d['layers'];this['_evtLayers'+'Changed']=_0x48191d['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x1a6263&&(this['_evtLayerA'+'dded']=_0x1a6263['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x1a6263['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=0xa5+0x54*0x2f+0x55b*-0x3&&((_0x453f96=_0x356ce5['batcher'])==null||_0x453f96['insert'](mt['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0xe3d837,_0x355337,_0x2815bc,_0x39d8f7;const _0x31fb72=this['system']['app'],_0x1ea5ae=_0x31fb72['scene']['layers'];(_0xe3d837=this['_evtLayers'+'Changed'])==null||_0xe3d837['off'](),this['_evtLayers'+'Changed']=null,_0x1ea5ae&&((_0x355337=this['_evtLayerA'+'dded'])==null||_0x355337['off'](),this['_evtLayerA'+'dded']=null,(_0x2815bc=this['_evtLayerR'+'emoved'])==null||_0x2815bc['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=-0x11*-0x19+0x19*0xb9+-0x13ba&&((_0x39d8f7=_0x31fb72['batcher'])==null||_0x39d8f7['remove'](mt['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x7091c4;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x185228 in this['_clips'])this['_clips'][_0x185228]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x7091c4=this['_node'])==null||_0x7091c4['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x13a70d=[this['_meshInsta'+'nce']];for(let _0x571d95=0x20a3+-0xb2d+0x43*-0x52,_0x2f0a20=this['_layers']['length'];_0x571d95<_0x2f0a20;_0x571d95++){const _0x9b4f42=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x571d95]);_0x9b4f42&&_0x9b4f42['addMeshIns'+'tances'](_0x13a70d);}this['_addedMode'+'l']=!(-0x1669*-0x1+-0x14b+0xa8f*-0x2);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0xf1eb54=[this['_meshInsta'+'nce']];for(let _0x44825a=0x2321+0x2474+0xe51*-0x5,_0xdeb068=this['_layers']['length'];_0x44825a<_0xdeb068;_0x44825a++){const _0x42410b=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x44825a]);_0x42410b&&_0x42410b['removeMesh'+'Instances'](_0xf1eb54);}this['_addedMode'+'l']=!(-0x1ed4+0xf1*0x17+0x92e);}['_showFrame'](_0x306ee2){if(!this['sprite'])return;const _0x11cc27=this['sprite']['meshes'][_0x306ee2];if(!_0x11cc27){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(0xc62+0x2089+-0x2cea*0x1));return;}let _0x4d3969;if(this['sprite']['renderMode']===Et?_0x4d3969=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===At?_0x4d3969=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x4d3969=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new We(_0x11cc27,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0xbc0+-0x14a+-0x1*0xa75),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(-0x5c8+-0x17c+0x745*0x1),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][-0x1*-0x1c2e+0x7*0x3ad+0x25*-0x175]=this['_color']['r'],this['_colorUnif'+'orm'][-0xb2*0x26+-0xbb9*0x1+0x2626]=this['_color']['g'],this['_colorUnif'+'orm'][0x1294+-0x5*-0x2ef+0x43*-0x7f]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](Cg,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](Pg,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x4d3969&&(this['_meshInsta'+'nce']['material']=_0x4d3969),this['_meshInsta'+'nce']['mesh']!==_0x11cc27&&(this['_meshInsta'+'nce']['mesh']=_0x11cc27,this['_meshInsta'+'nce']['visible']=!(0x1*0x2065+0x1*0xf65+-0xfee*0x3),this['_meshInsta'+'nce']['_aabbVer']=-(-0x26f9*-0x1+-0x212c+-0x5cc)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](Ag,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](bg,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](Ag),this['_meshInsta'+'nce']['deletePara'+'meter'](bg)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x2ae752=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x306ee2]];if(_0x2ae752){const _0x1716b9=(-0x1757*-0x1+0x1528+-0x65b*0x7)/_0x2ae752['rect']['z'],_0x718671=(-0xd*-0x2d2+-0x21e1+-0x2c7)/_0x2ae752['rect']['w'];this['_innerOffs'+'et']['set'](_0x2ae752['border']['x']*_0x1716b9,_0x2ae752['border']['y']*_0x718671,_0x2ae752['border']['z']*_0x1716b9,_0x2ae752['border']['w']*_0x718671);const _0x39c251=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x2ae752['rect']['x']/_0x39c251['width'],_0x2ae752['rect']['y']/_0x39c251['height'],_0x2ae752['rect']['z']/_0x39c251['width'],_0x2ae752['rect']['w']/_0x39c251['height']);}else this['_innerOffs'+'et']['set'](0x1b0d+-0x1*-0x23ef+0x3a*-0x116,-0x1*0x14a1+0x34*0x82+-0x5c7,0x1*-0xaed+0x1555+-0xa68,0x6a1*0x1+-0x2458+0x1db7);this['_innerOffs'+'etUniform'][-0xf3f*0x2+-0x13c5*0x1+-0x10c1*-0x3]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][0x2e1*0x3+0x342*0x1+-0x1*0xbe4]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x7*-0x501+-0x23ca+0x46d3]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x3e*-0x1b+-0x35*-0x49+0x8*-0x112]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](TO,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x118f*0x2+0x3*-0xc77+0x13*0x3d1]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x1*-0x12e2+0x1f*0x3b+-0x1a06]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x134c+-0x1*-0x248f+-0x1141*0x1]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0x1e01+-0xd01*-0x1+-0x41*-0x43]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](EO,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x127378=this['flipX']?-(0x166+-0xcd2*0x1+0xb6d):0xd0*0x4+0x2*0xdd8+-0x1eef*0x1,_0x18773c=this['flipY']?-(-0x975+0x1f13+0x1*-0x159d):0x30c+0x9*-0x445+0x2362,_0xaed5c8=-0x1413+0x137c+0x97,_0x34e30d=-0x43*-0x62+0x2165+0x3b0b*-0x1;if(this['sprite']&&(this['sprite']['renderMode']===Et||this['sprite']['renderMode']===At)){let _0x54d22e=0x586*-0x4+0x1ab1*0x1+-0x15*0x38,_0x5b879c=-0x399*-0x5+-0x5b8*0x4+-0x4*-0x139;if(this['sprite']['atlas']){const _0x33eadb=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x33eadb&&(_0x54d22e=_0x33eadb['rect']['z'],_0x5b879c=_0x33eadb['rect']['w'],_0xaed5c8=(-0x6*-0x5f3+-0xe4f+0xf*-0x16d+0.5-_0x33eadb['pivot']['x'])*this['_width'],_0x34e30d=(0x1c26+0x4e5+0xb*-0x301+0.5-_0x33eadb['pivot']['y'])*this['_height']);}const _0x4ea0ab=_0x54d22e/this['sprite']['pixelsPerU'+'nit'],_0x29a85b=_0x5b879c/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x4ea0ab),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x29a85b)),_0x127378*=_0x4ea0ab,_0x18773c*=_0x29a85b,this['_outerScal'+'e']['x']/=_0x4ea0ab,this['_outerScal'+'e']['y']/=_0x29a85b,_0x127378*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x4ea0ab),0x137*0xb+-0xfd1*-0x2+0x1*-0x2cff+0.0001,-0x23ca+0xe0*0x10+0x15cb),_0x18773c*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x29a85b),0x230a+0x2151+0x13*-0x399+0.0001,0x1242+-0x5e*-0x6+-0x1475),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0x1076+-0x22*0x37+0x17c4]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x5d2+-0x23c1+0xef8*0x2]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](wO,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x127378,_0x18773c,0xc95*-0x2+-0x134c+0x1*0x2c77),this['_node']['setLocalPo'+'sition'](_0xaed5c8,_0x34e30d,-0x1808+0x1627+0x1e1);}['_updateAab'+'b'](_0x4e7dde){return _0x4e7dde['center']['set'](0xc68+-0x12a0+0x638,0x9*-0x2fe+0x4*0x494+0x44f*0x2,-0x1b+0x1*0x2111+-0x20f6),_0x4e7dde['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0x37*0x65+-0x9*0x315+-0x60a*-0x1+0.5),this['_outerScal'+'e']['y']*(0x941*-0x3+0x13af+0x2*0x40a+0.5),-0x15f5+-0x2406+-0x1*-0x39fb+0.001),_0x4e7dde['setFromTra'+'nsformedAa'+'bb'](_0x4e7dde,this['_node']['getWorldTr'+'ansform']()),_0x4e7dde;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==Eg)return;const _0x211dbf=this['_clips'][this['_autoPlayC'+'lip']];_0x211dbf&&!_0x211dbf['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x211dbf['name']);}['_onLayersC'+'hanged'](_0x497680,_0x24353f){_0x497680['off']('add',this['onLayerAdd'+'ed'],this),_0x497680['off']('remove',this['onLayerRem'+'oved'],this),_0x24353f['on']('add',this['onLayerAdd'+'ed'],this),_0x24353f['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x49a65a){this['layers']['indexOf'](_0x49a65a['id'])<-0x2467+0x88*0x22+0x1257||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x49a65a['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x303fb4){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x303fb4['id'])<0xbba+0x9*0x79+0xffb*-0x1||_0x303fb4['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x518450=-0x230c+-0x82c*-0x1+0x1ae0;_0x518450<this['layers']['length'];_0x518450++){const _0x158aee=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x518450]);_0x158aee&&_0x158aee['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x2c0b7b){const _0xb3497=new Fi(this,{'name':_0x2c0b7b['name'],'fps':_0x2c0b7b['fps'],'loop':_0x2c0b7b['loop'],'spriteAsset':_0x2c0b7b['spriteAsse'+'t']});return this['_clips'][_0x2c0b7b['name']]=_0xb3497,_0xb3497['name']&&_0xb3497['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0xb3497;}['removeClip'](_0x1bc4a5){delete this['_clips'][_0x1bc4a5];}['clip'](_0xbf9a15){return this['_clips'][_0xbf9a15];}['play'](_0x1d4008){const _0x54a174=this['_clips'][_0x1d4008],_0x48c2f9=this['_currentCl'+'ip'];return _0x48c2f9&&_0x48c2f9!==_0x54a174&&(_0x48c2f9['_playing']=!(-0x1863*0x1+0x3df*-0x5+0x2bbf)),this['_currentCl'+'ip']=_0x54a174,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x54a174,this['_currentCl'+'ip']['play']()):M['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x1d4008+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x54a174;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(Ji,'EVENT_PLAY','play'),h(Ji,'EVENT_PAUS'+'E','pause'),h(Ji,'EVENT_RESU'+'ME','resume'),h(Ji,'EVENT_STOP','stop'),h(Ji,'EVENT_END','end'),h(Ji,'EVENT_LOOP','loop');class AO{constructor(){this['enabled']=!(-0x12*0x38+0x179a+-0x13aa);}}const Tv=['enabled'];class bO extends lt{constructor(_0x206a2a){super(_0x206a2a),this['id']='sprite',this['ComponentT'+'ype']=Ji,this['DataType']=AO,this['schema']=Tv,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x47c54f){this['_defaultMa'+'terial']=_0x47c54f;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x37435e=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':hs,'name':'sprite'}),_0x1fb1f3=new Uint8Array(_0x37435e['lock']());_0x1fb1f3[0xba9+0x1*-0x51b+-0x68e]=_0x1fb1f3[0x4*0x6a1+0x82f*0x1+-0x22b2]=_0x1fb1f3[0x260a+-0x23ed+-0x21b]=_0x1fb1f3[0x2f7*-0xb+-0x154e+0x35ee]=0x44a+-0x22*-0x3d+-0xb65,_0x37435e['unlock']();const _0xea7a6d=new ws();_0xea7a6d['diffuse']['set'](-0x1*0x131a+0x17ed+0x13*-0x41,-0x96b+0x1*0xd82+-0x417,0x1dfa+0x7*0x355+0xaa9*-0x5),_0xea7a6d['emissive']['set'](0x1dc4+-0x9*-0x2f1+-0x383c,-0x1263*0x1+0xf*0x98+0x97c*0x1,0x167e+-0x255e+0xee1),_0xea7a6d['emissiveMa'+'p']=_0x37435e,_0xea7a6d['opacityMap']=_0x37435e,_0xea7a6d['opacityMap'+'Channel']='a',_0xea7a6d['useLightin'+'g']=!(0x3*0x7e+-0x5db+0x1*0x462),_0xea7a6d['useTonemap']=!(0x1100+0xd7*0x1+0x8eb*-0x2),_0xea7a6d['useFog']=!(-0x136c+0x1*-0x85c+-0x1*-0x1bc9),_0xea7a6d['useSkybox']=!(0x23b+0x1*-0x1ba6+0x4*0x65b),_0xea7a6d['blendType']=bn,_0xea7a6d['depthWrite']=!(0x13cf+-0x33d*-0xa+0x3430*-0x1),_0xea7a6d['pixelSnap']=!(0x83*-0x4b+0xeca+0xa*0x25c),_0xea7a6d['cull']=xt,_0xea7a6d['update'](),this['_defaultTe'+'xture']=_0x37435e,this['_defaultMa'+'terial']=_0xea7a6d;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x28a8f2){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x28a8f2;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x275fdf=this['defaultMat'+'erial']['clone']();_0x275fdf['nineSliced'+'Mode']=Et,_0x275fdf['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x275fdf;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0xba37c){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0xba37c;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x3e7b0a=this['defaultMat'+'erial']['clone']();_0x3e7b0a['nineSliced'+'Mode']=At,_0x3e7b0a['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x3e7b0a;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x236bac,_0x4aa83d,_0x9c40a8){if(_0x4aa83d['enabled']!==void(-0x266+0x1*0x2494+0x5*-0x6d6)&&(_0x236bac['enabled']=_0x4aa83d['enabled']),_0x236bac['type']=_0x4aa83d['type'],_0x4aa83d['layers']&&Array['isArray'](_0x4aa83d['layers'])&&(_0x236bac['layers']=_0x4aa83d['layers']['slice'](-0x1*-0x1ff5+0xcd1+-0x2cc6)),_0x4aa83d['drawOrder']!==void(0x1d38+0x1*0xbdb+-0x2913)&&(_0x236bac['drawOrder']=_0x4aa83d['drawOrder']),_0x4aa83d['color']!==void(-0xbb*-0x2e+-0x3*-0x9e3+-0x3f43)&&(_0x4aa83d['color']instanceof ie?_0x236bac['color']['set'](_0x4aa83d['color']['r'],_0x4aa83d['color']['g'],_0x4aa83d['color']['b'],_0x4aa83d['opacity']??-0x7f*-0x13+0x1*-0x1bd1+-0x115*-0x11):_0x236bac['color']['set'](_0x4aa83d['color'][0x3a*0x5+0x631*-0x3+0x37d*0x5],_0x4aa83d['color'][0x35*0x5f+-0x1*0x15af+0x205],_0x4aa83d['color'][-0xa*0xa3+-0x1784+0x2*0xef2],_0x4aa83d['opacity']??0x6f7*0x3+0x14bb+-0x299f),_0x236bac['color']=_0x236bac['color']),_0x4aa83d['opacity']!==void(0x1ec4+0xcf*0x1d+-0x1*0x3637)&&(_0x236bac['opacity']=_0x4aa83d['opacity']),_0x4aa83d['flipX']!==void(0x1259*-0x1+0x2*0x3a5+0xb0f)&&(_0x236bac['flipX']=_0x4aa83d['flipX']),_0x4aa83d['flipY']!==void(0x1*0x1710+-0x1706+-0xa)&&(_0x236bac['flipY']=_0x4aa83d['flipY']),_0x4aa83d['width']!==void(-0x8*0x283+0xb59+0x8bf)&&(_0x236bac['width']=_0x4aa83d['width']),_0x4aa83d['height']!==void(0x4c1+0x558+0x2f*-0x37)&&(_0x236bac['height']=_0x4aa83d['height']),_0x4aa83d['spriteAsse'+'t']!==void(-0x1e68+-0x14ed+-0x3355*-0x1)&&(_0x236bac['spriteAsse'+'t']=_0x4aa83d['spriteAsse'+'t']),_0x4aa83d['sprite']&&(_0x236bac['sprite']=_0x4aa83d['sprite']),_0x4aa83d['frame']!==void(0x1*0x7a+-0x28a+-0x108*-0x2)&&(_0x236bac['frame']=_0x4aa83d['frame']),_0x4aa83d['clips']){for(const _0x554f7d in _0x4aa83d['clips'])_0x236bac['addClip'](_0x4aa83d['clips'][_0x554f7d]);}_0x4aa83d['speed']!==void(-0x52d+0x477*-0x3+-0x1*-0x1292)&&(_0x236bac['speed']=_0x4aa83d['speed']),_0x4aa83d['autoPlayCl'+'ip']&&(_0x236bac['autoPlayCl'+'ip']=_0x4aa83d['autoPlayCl'+'ip']),_0x236bac['batchGroup'+'Id']=_0x4aa83d['batchGroup'+'Id']===void(-0x5*-0x2ab+-0x2100+0x1*0x13a9)||_0x4aa83d['batchGroup'+'Id']===null?-(0x20c*-0x5+0xc75+-0x47*0x8):_0x4aa83d['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x236bac,_0x4aa83d,_0x9c40a8);}['cloneCompo'+'nent'](_0x5564b6,_0x3b0363){const _0xc72877=_0x5564b6['sprite'];return this['addCompone'+'nt'](_0x3b0363,{'enabled':_0xc72877['enabled'],'type':_0xc72877['type'],'spriteAsset':_0xc72877['spriteAsse'+'t'],'sprite':_0xc72877['sprite'],'width':_0xc72877['width'],'height':_0xc72877['height'],'frame':_0xc72877['frame'],'color':_0xc72877['color']['clone'](),'opacity':_0xc72877['opacity'],'flipX':_0xc72877['flipX'],'flipY':_0xc72877['flipY'],'speed':_0xc72877['speed'],'clips':_0xc72877['clips'],'autoPlayClip':_0xc72877['autoPlayCl'+'ip'],'batchGroupId':_0xc72877['batchGroup'+'Id'],'drawOrder':_0xc72877['drawOrder'],'layers':_0xc72877['layers']['slice'](0x2f*0x71+-0x2568+0x10a9*0x1)});}['onUpdate'](_0xa03f46){const _0xc9675b=this['store'];for(const _0x26b7c8 in _0xc9675b)if(_0xc9675b['hasOwnProp'+'erty'](_0x26b7c8)){const _0x2ff407=_0xc9675b[_0x26b7c8];if(_0x2ff407['data']['enabled']&&_0x2ff407['entity']['enabled']){const _0x75897c=_0x2ff407['entity']['sprite'];_0x75897c['_currentCl'+'ip']&&_0x75897c['_currentCl'+'ip']['_update'](_0xa03f46);}}}['onBeforeRe'+'move'](_0x59cb1d,_0x95c3fd){_0x95c3fd['onDestroy']();}}we['_buildAcce'+'ssors'](Ji['prototype'],Tv),(function(){const _0x2b38d2=function(){let _0x2edcdd;try{_0x2edcdd=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x245a55){_0x2edcdd=window;}return _0x2edcdd;},_0x7bec86=_0x2b38d2();_0x7bec86['setInterva'+'l'](_0x15e975,0xb*-0x239+-0x12b6+0x3ac9);}());class en extends we{constructor(_0x378ff0,_0x208ede){super(_0x378ff0,_0x208ede),this['_oldState']=!(0x6b5*0x2+0xef3+-0x1c5d),this['_size']=new I(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x45a260){_0x45a260 instanceof I?this['_size']['copy'](_0x45a260):_0x45a260 instanceof Array&&_0x45a260['length']>=0x1756+-0xd6*-0x24+-0x356b&&this['size']['set'](_0x45a260[-0x47*-0x7a+-0x7*0x6b+-0x1ee9],_0x45a260[-0x15f0+-0x1fbc+0xd*0x421],_0x45a260[0x21f9*-0x1+0x150e+0xced]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0xe76d5d,_0x5882d4,_0x367d05){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x33c26e=this['enabled']&&this['entity']['enabled'];_0x33c26e!==this['_oldState']&&(this['_oldState']=_0x33c26e,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(en,'EVENT_ENAB'+'LE','enable'),h(en,'EVENT_DISA'+'BLE','disable'),h(en,'EVENT_STAT'+'E','state'),h(en,'EVENT_REMO'+'VE','remove');class CO{constructor(){this['enabled']=!(-0x1d39*-0x1+-0x60d*0x1+-0x4*0x5cb);}}const wv=['enabled'];class PO extends lt{constructor(_0x5b9f01){super(_0x5b9f01),this['id']='zone',this['ComponentT'+'ype']=en,this['DataType']=CO,this['schema']=wv,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x44b581,_0x5aba4c,_0x5eb724){_0x44b581['enabled']=_0x5aba4c['hasOwnProp'+'erty']('enabled')?!!_0x5aba4c['enabled']:!(0x6f1*-0x3+0x1868+-0x395),_0x5aba4c['size']&&(_0x5aba4c['size']instanceof I?_0x44b581['size']['copy'](_0x5aba4c['size']):_0x5aba4c['size']instanceof Array&&_0x5aba4c['size']['length']>=-0x21fe+0x129e+0xf63&&_0x44b581['size']['set'](_0x5aba4c['size'][-0x1*0x6c3+-0x9d*0x2f+0x2396],_0x5aba4c['size'][-0x925*-0x2+0x107*0x1b+-0x2b*0x112],_0x5aba4c['size'][-0x485*-0x7+0x1850+-0x37f1]));}['cloneCompo'+'nent'](_0x2aea58,_0x5df13d){const _0x209f96={'enabled':_0x2aea58['zone']['enabled'],'size':_0x2aea58['zone']['size']};return this['addCompone'+'nt'](_0x5df13d,_0x209f96);}['_onBeforeR'+'emove'](_0x50915d,_0x5d6c32){_0x5d6c32['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](en['prototype'],wv);class MO{constructor(_0x2d699d,_0x19f2e9){this['effect']=_0x2d699d,this['inputTarge'+'t']=_0x19f2e9,this['outputTarg'+'et']=null,this['name']=_0x2d699d['constructo'+'r']['name'];}}class IO{constructor(_0x497c15,_0x2653f3){this['app']=_0x497c15,this['camera']=_0x2653f3,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x1db0*0x1+0x123*-0x1d+0x1c*0x1e),this['depthTarge'+'t']=null,_0x2653f3['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x260976,_0x31554d){const _0x305bf8=this['camera']['rect'],_0x388522=this['destinatio'+'nRenderTar'+'get'],_0x10d9b7=this['app']['graphicsDe'+'vice'],_0xae842d=Math['floor'](_0x305bf8['z']*((_0x388522==null?void(0x1f44+-0xa03+-0x1541):_0x388522['width'])??_0x10d9b7['width'])),_0x56814f=Math['floor'](_0x305bf8['w']*((_0x388522==null?void(-0xc70+-0x1*-0x1457+-0x7e7):_0x388522['height'])??_0x10d9b7['height']));return new _e(_0x10d9b7,{'name':_0x31554d,'format':_0x260976,'width':_0xae842d,'height':_0x56814f,'mipmaps':!(0x541*-0x1+-0xfb*-0x22+-0x1c14),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0xf32dd0,_0x2d77f2){const _0x2c99e2=this['app']['graphicsDe'+'vice'],_0x398c33=(this['destinatio'+'nRenderTar'+'get']??_0x2c99e2['backBuffer'])['isColorBuf'+'ferSrgb'](0x263b*-0x1+-0x1a22+0x405d),_0x3f59a1=(_0x2d77f2&&_0x2c99e2['getRendera'+'bleHdrForm'+'at']([at,Bt],!(0x115b*-0x1+-0x2*-0x3ed+-0x3*-0x32b)))??(_0x398c33?hs:Oe),_0xcf3f32=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x1ebfe8=this['_allocateC'+'olorBuffer'](_0x3f59a1,_0xcf3f32);return new vt({'colorBuffer':_0x1ebfe8,'depth':_0xf32dd0,'stencil':_0xf32dd0&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0xf32dd0?_0x2c99e2['samples']:0x1*0x1af7+0x4*-0x149+0x2*-0xae9});}['_resizeOff'+'screenTarg'+'et'](_0x1d7c16){const _0x183bed=_0x1d7c16['colorBuffe'+'r']['format'],_0x3c09c8=_0x1d7c16['colorBuffe'+'r']['name'];_0x1d7c16['destroyFra'+'meBuffers'](),_0x1d7c16['destroyTex'+'tureBuffer'+'s'](),_0x1d7c16['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x183bed,_0x3c09c8),_0x1d7c16['_colorBuff'+'ers']=[_0x1d7c16['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x330f91){_0x330f91['destroyTex'+'tureBuffer'+'s'](),_0x330f91['destroy']();}['addEffect'](_0xff1203){const _0x1b46b0=this['effects'],_0x2f7bd8=_0x1b46b0['length']===-0x17d+0x36*-0x10+0x4dd,_0x57b591=this['_createOff'+'screenTarg'+'et'](_0x2f7bd8,_0xff1203['hdr']),_0x2b8205=new MO(_0xff1203,_0x57b591);_0x1b46b0['push'](_0x2b8205),this['_sourceTar'+'get']=_0x2b8205['inputTarge'+'t'],_0x1b46b0['length']>0x2475+-0x120d+0x2a1*-0x7&&(_0x1b46b0[_0x1b46b0['length']-(0x2*-0xc6d+-0x1a9a+0x3376)]['outputTarg'+'et']=_0x2b8205['inputTarge'+'t']),this['_newPostEf'+'fect']=_0xff1203,_0xff1203['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(0xb*-0x257+-0xec3*-0x2+0x3*-0x143);}['removeEffe'+'ct'](_0x147f49){let _0x64347b=-(-0x1*-0x439+-0x109*-0x23+-0x2873);for(let _0x19bdab=-0x21bb+0x1*-0x1205+0x40*0xcf,_0x920dc=this['effects']['length'];_0x19bdab<_0x920dc;_0x19bdab++)if(this['effects'][_0x19bdab]['effect']===_0x147f49){_0x64347b=_0x19bdab;break;}_0x64347b>=0x2562+-0x1557+0x3*-0x559&&(_0x64347b>-0x21+0x2337*-0x1+0x2358?this['effects'][_0x64347b-(-0x29*0x2b+-0x1bd8+0x22bc)]['outputTarg'+'et']=_0x64347b+(0x441*0x9+0x7b5+0x3d*-0xc1)<this['effects']['length']?this['effects'][_0x64347b+(-0xa33*0x1+0x68f+0x1*0x3a5)]['inputTarge'+'t']:null:this['effects']['length']>0xc34+-0x16*-0x18d+-0x2e51&&(this['effects'][-0x1b23*0x1+-0x15d*0xf+0x83*0x5d]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][0x689+0x50*-0x2e+0x7d8]['inputTarge'+'t']),this['effects'][-0xde6*-0x2+0x116c+-0x2d37]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(-0x11*0xa3+-0x12ca+-0x39*-0x85),this['effects'][-0x7d*0x30+-0xe6*-0x20+-0x9*0x97]['hdr']),this['_sourceTar'+'get']=this['effects'][0x20d1*-0x1+0x1315+0x1*0xdbd]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][-0x7a4+-0x1391*0x1+0x1b*0x102]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x64347b]['inputTarge'+'t']),this['effects']['splice'](_0x64347b,-0x1*-0xdf8+-0x34*-0x56+-0x1*0x1f6f)),this['enabled']&&_0x147f49['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0xf+0x25ec+-0x3*0xc9f&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x435ab2=-0x129b+-0x3*0x15d+-0x1*-0x16b2,_0x34c609=this['effects']['length'];_0x435ab2<_0x34c609;_0x435ab2++){const _0x31034c=this['effects'][_0x435ab2]['effect'];this['_newPostEf'+'fect']!==_0x31034c&&_0x31034c['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0x106bb8=0x4*-0x299+0xb70+0x1*-0x10c,_0x47a385=this['effects']['length'];_0x106bb8<_0x47a385;_0x106bb8++)this['effects'][_0x106bb8]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x8792a7=this['app']['scene']['layers']['getLayerBy'+'Id'](os);_0x8792a7&&(_0x8792a7['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(-0x215*0x8+-0x1b4f*-0x1+0x3*-0x38d)));}['_releaseDe'+'pthMap'](){const _0x1a6f11=this['app']['scene']['layers']['getLayerBy'+'Id'](os);_0x1a6f11&&(_0x1a6f11['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x3f9+0x554*0x3+-0x13f4)));}['destroy'](){for(let _0x256cfd=-0x12cf+0x431+0xe9e,_0x144595=this['effects']['length'];_0x256cfd<_0x144595;_0x256cfd++)this['effects'][_0x256cfd]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x154c+0x140f+0x13d,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(0xe7+-0x2c3*-0x8+-0x16ff),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][-0x1*0x233e+-0x1*0xcff+0x303d]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x3c151d=null;const _0x16f029=this['effects']['length'];if(_0x16f029)for(let _0x4afcf4=0x23f2+-0x2106+-0x2ec;_0x4afcf4<_0x16f029;_0x4afcf4++){const _0x1b6a7f=this['effects'][_0x4afcf4];let _0x1f181a=_0x1b6a7f['outputTarg'+'et'];_0x4afcf4===_0x16f029-(0x3f*0x2e+-0x20ea+-0x61*-0x39)&&(_0x3c151d=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x1f181a=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x1b6a7f['name']),_0x1b6a7f['effect']['render'](_0x1b6a7f['inputTarge'+'t'],_0x1f181a,_0x3c151d),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(-0x639*0x3+0x24e1+-0x1235),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x830520,_0x13a530){const _0x21cd66=this['camera']['rect'],_0x1dd44a=this['destinatio'+'nRenderTar'+'get'];_0x830520=(_0x1dd44a==null?void(-0x1a2f+-0x12cd*0x1+0x2cfc):_0x1dd44a['width'])??_0x830520,_0x13a530=(_0x1dd44a==null?void(-0x1*-0x14ed+-0x33*0x77+0x2c8*0x1):_0x1dd44a['height'])??_0x13a530,this['camera']['camera']['aspectRati'+'o']=_0x830520*_0x21cd66['z']/(_0x13a530*_0x21cd66['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x2ce291=this['app']['graphicsDe'+'vice'],_0x195985=this['destinatio'+'nRenderTar'+'get'],_0x3c157c=(_0x195985==null?void(0x8bc+-0x1b09+0x124d):_0x195985['width'])??_0x2ce291['width'],_0x551e40=(_0x195985==null?void(0x227b+0x12df+-0x355a*0x1):_0x195985['height'])??_0x2ce291['height'],_0x5a36de=this['camera']['rect'],_0x4e9328=Math['floor'](_0x5a36de['z']*_0x3c157c),_0x11173c=Math['floor'](_0x5a36de['w']*_0x551e40),_0x1fe621=this['effects'];for(let _0x526cf8=0x104a+0x21c4+-0x320e,_0x3234b4=_0x1fe621['length'];_0x526cf8<_0x3234b4;_0x526cf8++){const _0x32a4f5=_0x1fe621[_0x526cf8];(_0x32a4f5['inputTarge'+'t']['width']!==_0x4e9328||_0x32a4f5['inputTarge'+'t']['height']!==_0x11173c)&&this['_resizeOff'+'screenTarg'+'et'](_0x32a4f5['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x5f1027,_0x5ac33c,_0x49848a){this['enabled']&&this['resizeRend'+'erTargets']();}}class Ev extends we{constructor(_0x500352,_0x51f646){super(_0x500352,_0x51f646),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',-0x12b3+0x17a9+0x1*-0x4f6),h(this,'_renderSce'+'neColorMap',-0xa73*-0x3+-0x2271+0x318),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x1bd2+0xef*-0x1+0x3*0x996)),h(this,'_sceneColo'+'rMapReques'+'ted',!(-0x1a84+0x6*-0x103+0x2097)),h(this,'_priority',-0x15ab+0xf39*0x1+-0x42*-0x19),h(this,'_disablePo'+'stEffectsL'+'ayer',nl),h(this,'_camera',new dl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x51f646,this['_postEffec'+'ts']=new IO(_0x500352['app'],this));}['setShaderP'+'ass'](_0x49f543){const _0x54022c=hi['get'](this['system']['app']['graphicsDe'+'vice']),_0x225936=_0x49f543?_0x54022c['allocate'](_0x49f543,{'isForward':!(0x1443+0x125+0xa*-0x224)}):null;return this['_camera']['shaderPass'+'Info']=_0x225936,_0x225936['index'];}['getShaderP'+'ass'](){var _0x346458;return(_0x346458=this['_camera']['shaderPass'+'Info'])==null?void(0x24f2+-0x26e*-0x5+-0x3118):_0x346458['name'];}set['renderPass'+'es'](_0x499e56){this['_camera']['renderPass'+'es']=_0x499e56||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(-0x269*-0x7+0x1a70+-0x2b4f);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x54540c){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x54540c;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x29ee96){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x29ee96;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x333298){this['_camera']['fogParams']=_0x333298;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x454e8e){this['_camera']['aperture']=_0x454e8e;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x534a2a){this['_camera']['aspectRati'+'o']=_0x534a2a;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x301fc7){this['_camera']['aspectRati'+'oMode']=_0x301fc7;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x432b30){this['_camera']['calculateP'+'rojection']=_0x432b30;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x57e325){this['_camera']['calculateT'+'ransform']=_0x57e325;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x14e81e){this['_camera']['clearColor']=_0x14e81e;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x59e0a5){this['_camera']['clearColor'+'Buffer']=_0x59e0a5,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x46c254){this['_camera']['clearDepth'+'Buffer']=_0x46c254,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0xc81fee){this['_camera']['clearStenc'+'ilBuffer']=_0xc81fee,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x5c6531){this['_camera']['cullFaces']=_0x5c6531;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x1edc4c){this['_disablePo'+'stEffectsL'+'ayer']=_0x1edc4c,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x30f067){this['_camera']['farClip']=_0x30f067;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x34dddc){this['_camera']['flipFaces']=_0x34dddc;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x373261){this['_camera']['fov']=_0x373261;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x46e423){this['_camera']['frustumCul'+'ling']=_0x46e423;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0x5e6911){this['_camera']['horizontal'+'Fov']=_0x5e6911;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x584c1b){const _0x1aba52=this['_camera']['layers'],_0x479020=this['system']['app']['scene'];_0x1aba52['forEach'](_0x197402=>{const _0x37d360=_0x479020['layers']['getLayerBy'+'Id'](_0x197402);_0x37d360==null||_0x37d360['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x584c1b,this['enabled']&&this['entity']['enabled']&&_0x584c1b['forEach'](_0x2e7a99=>{const _0x4974ea=_0x479020['layers']['getLayerBy'+'Id'](_0x2e7a99);_0x4974ea==null||_0x4974ea['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x14e350){this['_camera']['jitter']=_0x14e350;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x5535c5){this['_camera']['nearClip']=_0x5535c5;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0xa7907b){this['_camera']['orthoHeigh'+'t']=_0xa7907b;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x22fe7b){this['_priority']=_0x22fe7b,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x394c20){this['_camera']['projection']=_0x394c20;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x493128){this['_camera']['rect']=_0x493128,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x15f290){_0x15f290&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0x1035+0x26a7+0x1b6e*-0x2)),this['_sceneColo'+'rMapReques'+'ted']=!(0x82d*0x1+0x357*-0x3+-0x1*-0x1d8)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x7*-0x4a5+0x219e+-0x422*0x10)),this['_sceneColo'+'rMapReques'+'ted']=!(-0xc7*-0x10+0x8d+-0x6*0x22a));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>-0x3c1*0x1+0xe62+-0xaa1;}set['renderScen'+'eDepthMap'](_0x3953f1){_0x3953f1&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(-0xe03+0x35*-0x2e+0xf1*0x19)),this['_sceneDept'+'hMapReques'+'ted']=!(0x2*0x215+0x14e*-0xd+0xccc)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x4*-0x86e+-0x1c2+-0x9*0x38d)),this['_sceneDept'+'hMapReques'+'ted']=!(-0x1*0x6c5+-0x25a7+-0x33*-0xdf));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>-0x155c+-0x3a0+-0x27*-0xa4;}set['renderTarg'+'et'](_0x5b23a5){M['call'](()=>{this['_camera']['renderPass'+'es']['length']>-0x1295+-0x5*-0x3ad+0x34&&M['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x5b23a5,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x233416){this['_camera']['scissorRec'+'t']=_0x233416;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x3e6f88){this['_camera']['sensitivit'+'y']=_0x3e6f88;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x543c2b){this['_camera']['shutter']=_0x543c2b;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x41e77c){if(this['layers']['find'](_0x17b417=>_0x17b417===os)){const _0x2030fc=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](os);_0x41e77c?_0x2030fc==null||_0x2030fc['incrementC'+'ounter']():_0x2030fc==null||_0x2030fc['decrementC'+'ounter']();}else{if(_0x41e77c)return!(-0x3*-0x87c+0x1cc9*-0x1+-0x3d*-0xe);}return!(0x1e9e+0x166c+-0x8d7*0x6);}['requestSce'+'neColorMap'](_0x2a8dbd){this['_renderSce'+'neColorMap']+=_0x2a8dbd?-0x17a8+0x48d*0x1+0x131c:-(-0x130*0x5+0x22c3+-0x1cd2),M['assert'](this['_renderSce'+'neColorMap']>=-0xc04*0x1+0x187e+-0x2*0x63d),this['_enableDep'+'thLayer'](_0x2a8dbd)||M['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x41b8d0){this['_renderSce'+'neDepthMap']+=_0x41b8d0?0x36f+-0x147f+-0x1111*-0x1:-(0x1198+0x678+-0x180f),M['assert'](this['_renderSce'+'neDepthMap']>=-0x11bb+0x15*0x95+-0x582*-0x1),this['_enableDep'+'thLayer'](_0x41b8d0)||M['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x10d1e9=this['system']['app']['scene']['layers'];_0x10d1e9['_dirty']=!(-0xb2*-0x1b+-0x164b+-0x35*-0x11);}['screenToWo'+'rld'](_0x53570e,_0x3d1953,_0x5d5be0,_0x5b737d){const _0x160e80=this['system']['app']['graphicsDe'+'vice'],{width:_0x1d84f5,height:_0xfa5074}=_0x160e80['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x53570e,_0x3d1953,_0x5d5be0,_0x1d84f5,_0xfa5074,_0x5b737d);}['worldToScr'+'een'](_0x1ce438,_0x4acdd9){const _0x216024=this['system']['app']['graphicsDe'+'vice'],{width:_0x6bd173,height:_0x4cd220}=_0x216024['clientRect'];return this['_camera']['worldToScr'+'een'](_0x1ce438,_0x6bd173,_0x4cd220,_0x4acdd9);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(0x1ff6+-0x15*-0xdf+-0x1f*0x19f),this['_camera']['_viewProjM'+'atDirty']=!(-0x18fb+0x19af+-0xb4);}['addCameraT'+'oLayers'](){const _0x2707c8=this['layers'];for(let _0x17f933=-0x7a*0x1c+0x17ee+-0xa96;_0x17f933<_0x2707c8['length'];_0x17f933++){const _0x5443ae=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2707c8[_0x17f933]);_0x5443ae&&_0x5443ae['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x3d7a19=this['layers'];for(let _0x53e695=-0x749*-0x1+-0x4b6+-0x293;_0x53e695<_0x3d7a19['length'];_0x53e695++){const _0x2338dd=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x3d7a19[_0x53e695]);_0x2338dd&&_0x2338dd['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x16aabe,_0x55a4fc){this['addCameraT'+'oLayers'](),_0x16aabe['off']('add',this['onLayerAdd'+'ed'],this),_0x16aabe['off']('remove',this['onLayerRem'+'oved'],this),_0x55a4fc['on']('add',this['onLayerAdd'+'ed'],this),_0x55a4fc['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xe1db4c){this['layers']['indexOf'](_0xe1db4c['id'])<-0x50*0x2c+0xecb*-0x1+0x1c8b||_0xe1db4c['addCamera'](this);}['onLayerRem'+'oved'](_0xf281fd){this['layers']['indexOf'](_0xf281fd['id'])<0x2*-0xff2+-0x395*-0x5+0xdfb||_0xf281fd['removeCame'+'ra'](this);}['onEnable'](){var _0xe0d84b,_0x51024b,_0x38a3a0;const _0x365064=this['system']['app']['scene'],_0x15f4f8=_0x365064['layers'];this['system']['addCamera'](this),(_0xe0d84b=this['_evtLayers'+'Changed'])==null||_0xe0d84b['off'](),this['_evtLayers'+'Changed']=_0x365064['on']('set:layers',this['onLayersCh'+'anged'],this),_0x15f4f8&&((_0x51024b=this['_evtLayerA'+'dded'])==null||_0x51024b['off'](),this['_evtLayerA'+'dded']=_0x15f4f8['on']('add',this['onLayerAdd'+'ed'],this),(_0x38a3a0=this['_evtLayerR'+'emoved'])==null||_0x38a3a0['off'](),this['_evtLayerR'+'emoved']=_0x15f4f8['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x4f318b,_0x14f118,_0x34d6d6;const _0x93655c=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x4f318b=this['_evtLayers'+'Changed'])==null||_0x4f318b['off'](),this['_evtLayers'+'Changed']=null,_0x93655c&&((_0x14f118=this['_evtLayerA'+'dded'])==null||_0x14f118['off'](),this['_evtLayerA'+'dded']=null,(_0x34d6d6=this['_evtLayerR'+'emoved'])==null||_0x34d6d6['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x3f08b3){const _0x5b91b6=this['system']['app']['graphicsDe'+'vice'],_0x1ba05f=_0x3f08b3?_0x3f08b3['width']:_0x5b91b6['width'],_0x1bd129=_0x3f08b3?_0x3f08b3['height']:_0x5b91b6['height'];return _0x1ba05f*this['rect']['z']/(_0x1bd129*this['rect']['w']);}['frameUpdat'+'e'](_0x1062de){this['aspectRati'+'oMode']===Im&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x1062de));}['startXr'](_0x229a26,_0x11bb84,_0x198ea0){this['system']['app']['xr']['start'](this,_0x229a26,_0x11bb84,_0x198ea0);}['endXr'](_0x14a656){if(!this['_camera']['xr']){_0x14a656&&_0x14a656(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x14a656);}['copy'](_0x54b659){this['aperture']=_0x54b659['aperture'],this['aspectRati'+'o']=_0x54b659['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x54b659['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x54b659['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x54b659['calculateT'+'ransform'],this['clearColor']=_0x54b659['clearColor'],this['clearColor'+'Buffer']=_0x54b659['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x54b659['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x54b659['clearStenc'+'ilBuffer'],this['cullFaces']=_0x54b659['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x54b659['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x54b659['farClip'],this['flipFaces']=_0x54b659['flipFaces'],this['fov']=_0x54b659['fov'],this['frustumCul'+'ling']=_0x54b659['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x54b659['horizontal'+'Fov'],this['layers']=_0x54b659['layers'],this['nearClip']=_0x54b659['nearClip'],this['orthoHeigh'+'t']=_0x54b659['orthoHeigh'+'t'],this['priority']=_0x54b659['priority'],this['projection']=_0x54b659['projection'],this['rect']=_0x54b659['rect'],this['renderTarg'+'et']=_0x54b659['renderTarg'+'et'],this['scissorRec'+'t']=_0x54b659['scissorRec'+'t'],this['sensitivit'+'y']=_0x54b659['sensitivit'+'y'],this['shutter']=_0x54b659['shutter'];}}class DO{constructor(){this['enabled']=!(-0x455*-0x2+0x1763+-0x200d);}}const Av=['enabled'];class LO extends lt{constructor(_0x276614){super(_0x276614),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Ev,this['DataType']=DO,this['schema']=Av,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x302aa6,_0x20ee94,_0x3fe1a9){_0x3fe1a9=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x508074=-0xe5*-0x12+-0x1*0x809+-0x811;_0x508074<_0x3fe1a9['length'];_0x508074++){const _0x37abea=_0x3fe1a9[_0x508074];if(_0x20ee94['hasOwnProp'+'erty'](_0x37abea)){const _0x1d0e83=_0x20ee94[_0x37abea];switch(_0x37abea){case'rect':case'scissorRec'+'t':Array['isArray'](_0x1d0e83)?_0x302aa6[_0x37abea]=new ae(_0x1d0e83[0x16d1+0x1e80+-0x3551],_0x1d0e83[0x26a3+0x789*-0x3+0x1007*-0x1],_0x1d0e83[0xaf6*-0x1+-0xb*0xb4+-0x26*-0x7e],_0x1d0e83[0x3*0x749+-0x246f+0xf9*0xf]):_0x302aa6[_0x37abea]=_0x1d0e83;break;case'clearColor':Array['isArray'](_0x1d0e83)?_0x302aa6[_0x37abea]=new ie(_0x1d0e83[0x1*0xe59+-0x2*0x61+-0xd97],_0x1d0e83[0x761*0x3+-0x3*0x689+-0x1*0x287],_0x1d0e83[-0x113+-0x1*0x1d29+0xe*0x229],_0x1d0e83[0x1cc+0x2499+-0x2662]):_0x302aa6[_0x37abea]=_0x1d0e83;break;default:_0x302aa6[_0x37abea]=_0x1d0e83;break;}}}super['initialize'+'ComponentD'+'ata'](_0x302aa6,_0x20ee94,['enabled']);}['cloneCompo'+'nent'](_0x470caf,_0x14399b){const _0xeaeb07=_0x470caf['camera'];return this['addCompone'+'nt'](_0x14399b,{'aspectRatio':_0xeaeb07['aspectRati'+'o'],'aspectRatioMode':_0xeaeb07['aspectRati'+'oMode'],'calculateProjection':_0xeaeb07['calculateP'+'rojection'],'calculateTransform':_0xeaeb07['calculateT'+'ransform'],'clearColor':_0xeaeb07['clearColor'],'clearColorBuffer':_0xeaeb07['clearColor'+'Buffer'],'clearDepthBuffer':_0xeaeb07['clearDepth'+'Buffer'],'clearStencilBuffer':_0xeaeb07['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0xeaeb07['renderScen'+'eDepthMap'],'renderSceneColorMap':_0xeaeb07['renderScen'+'eColorMap'],'cullFaces':_0xeaeb07['cullFaces'],'enabled':_0xeaeb07['enabled'],'farClip':_0xeaeb07['farClip'],'flipFaces':_0xeaeb07['flipFaces'],'fov':_0xeaeb07['fov'],'frustumCulling':_0xeaeb07['frustumCul'+'ling'],'horizontalFov':_0xeaeb07['horizontal'+'Fov'],'layers':_0xeaeb07['layers'],'renderTarget':_0xeaeb07['renderTarg'+'et'],'nearClip':_0xeaeb07['nearClip'],'orthoHeight':_0xeaeb07['orthoHeigh'+'t'],'projection':_0xeaeb07['projection'],'priority':_0xeaeb07['priority'],'rect':_0xeaeb07['rect'],'scissorRect':_0xeaeb07['scissorRec'+'t'],'aperture':_0xeaeb07['aperture'],'sensitivity':_0xeaeb07['sensitivit'+'y'],'shutter':_0xeaeb07['shutter'],'gammaCorrection':_0xeaeb07['gammaCorre'+'ction'],'toneMapping':_0xeaeb07['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x590daa,_0xf71169){this['removeCame'+'ra'](_0xf71169),_0xf71169['onRemove']();}['onAppPrere'+'nder'](){for(let _0x16994e=-0x35*-0x9e+-0x3b*0x54+-0xd5a,_0x128fd5=this['cameras']['length'];_0x16994e<_0x128fd5;_0x16994e++)this['cameras'][_0x16994e]['onAppPrere'+'nder']();}['addCamera'](_0x10aa6f){this['cameras']['push'](_0x10aa6f),Go(this['cameras']);}['removeCame'+'ra'](_0xbca833){const _0x2ef1c7=this['cameras']['indexOf'](_0xbca833);_0x2ef1c7>=0x11*0x211+0x1ce0+-0x4001&&(this['cameras']['splice'](_0x2ef1c7,-0x196+-0x536+0x6cd*0x1),Go(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Ev['prototype'],Av);class bv{constructor(){h(this,'enabled',!(0x5*-0x222+0xb*0x2e0+-0x14f6)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(0x44f+0x7*0x137+0x445*-0x3,-0xf*-0x225+-0x1*0x1867+-0x7c3,0xbb*0x1c+-0xa7*-0x1+0x25*-0x92)),h(this,'intensity',-0x1*-0x269b+-0x105f+-0x163b),h(this,'luminance',-0x7*-0x539+0x2*0x28e+-0x29ab),h(this,'shape',Vs),h(this,'affectSpec'+'ularity',!(0x1772+-0x963+-0xe0f)),h(this,'castShadow'+'s',!(-0x1*-0x1097+-0x2*-0xbb9+0x501*-0x8)),h(this,'shadowDist'+'ance',0x9ce+0x1bb4+-0x556*0x7),h(this,'shadowInte'+'nsity',0x5*0x2c7+-0x179d+-0x35*-0x2f),h(this,'shadowReso'+'lution',0xb*0x26a+-0x26e0+0x1052),h(this,'shadowBias',-0x3*0x223+-0x1d7b+0x23e4+0.05),h(this,'numCascade'+'s',0x2211+0x349+-0x2559),h(this,'cascadeBle'+'nd',-0xaa*-0x20+-0x1e05+0x8c5),h(this,'bakeNumSam'+'ples',0x11*-0x86+0x148b*-0x1+0x1d72),h(this,'bakeArea',0xaa*-0x35+-0x2263*-0x1+0xcf),h(this,'cascadeDis'+'tribution',0x1*-0x79+-0x9*0x21+-0xd1*-0x2+0.5),h(this,'normalOffs'+'etBias',0x9*-0x3e7+0x1401+0xf1e*0x1),h(this,'range',0xd28+0x45*-0x8b+0x1859),h(this,'innerConeA'+'ngle',-0x235f+0x1e0b+0x57c),h(this,'outerConeA'+'ngle',-0xb7*-0x1d+-0x133*0x1+-0x135b),h(this,'falloffMod'+'e',Sm),h(this,'shadowType',ks),h(this,'vsmBlurSiz'+'e',0x1c48+-0x3f3+-0x184a),h(this,'vsmBlurMod'+'e',vm),h(this,'vsmBias',(0x29*0x4a+-0x4bb+-0x1*0x71f+0.01)*(0x26fa+0x15ff+-0x3cf9+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',0xf9b+-0x5*0x349+-0x1*-0xd3),h(this,'cookieFall'+'off',!(0x2173+-0x2*0x275+-0x1c89)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',0x15d*0xa+0x10eb+-0x1e8d*0x1),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',Pm),h(this,'mask',0xf21+0xc59*0x3+0x342b*-0x1),h(this,'affectDyna'+'mic',!(0x2110+0x12c7+0x17*-0x241)),h(this,'affectLigh'+'tmapped',!(-0x4ab+0x16f6*-0x1+-0x1ba2*-0x1)),h(this,'bake',!(-0x22be+0x23c2+-0x25*0x7)),h(this,'bakeDir',!(-0x1*0x119f+0x35*0x11+0xe1a)),h(this,'isStatic',!(-0x1529*-0x1+0x748+-0x1c70)),h(this,'layers',[Wi]),h(this,'penumbraSi'+'ze',0x8*0x3c7+0x1c41+-0x3a78),h(this,'penumbraFa'+'lloff',-0x5*0x727+0x5ab*-0x1+0x296f),h(this,'shadowSamp'+'les',-0xd5d+-0x18a2+0x260f*0x1),h(this,'shadowBloc'+'kerSamples',0x21f0+0x248f+-0x466f);}}const To=Object['keys'](new bv());class RO extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x7*0x147+-0x13*-0x117+-0xbc3)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x306cfa=this['system']['store'][this['entity']['getGuid']()];return _0x306cfa?_0x306cfa['data']:null;}set['enabled'](_0x5940fb){this['_setValue']('enabled',_0x5940fb,function(_0x349a2d,_0x213210){this['onSetEnabl'+'ed'](null,_0x213210,_0x349a2d);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x3f03b6){this['_setValue']('light',_0x3f03b6);}get['light'](){return this['data']['light'];}set['type'](_0x251c13){this['_setValue']('type',_0x251c13,function(_0x474b2f,_0x312729){this['system']['changeType'](this,_0x312729,_0x474b2f),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x30ba78){this['_setValue']('color',_0x30ba78,function(_0x39082c,_0xadddc5){this['light']['setColor'](_0x39082c);},!(0x2*-0x4d6+0x18ff+0xf53*-0x1));}get['color'](){return this['data']['color'];}set['intensity'](_0x5d58be){this['_setValue']('intensity',_0x5d58be,function(_0x1cb670,_0x2be39c){this['light']['intensity']=_0x1cb670;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x29cf04){this['_setValue']('luminance',_0x29cf04,function(_0x5b61c6,_0xde11a3){this['light']['luminance']=_0x5b61c6;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x292c18){this['_setValue']('shape',_0x292c18,function(_0x25550a,_0x2dee50){this['light']['shape']=_0x25550a;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x42eec3){this['_setValue']('affectSpec'+'ularity',_0x42eec3,function(_0x8fa713,_0x2d2896){this['light']['affectSpec'+'ularity']=_0x8fa713;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x5906d3){this['_setValue']('castShadow'+'s',_0x5906d3,function(_0x4ed1a6,_0x44725c){this['light']['castShadow'+'s']=_0x4ed1a6;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x3d1d86){this['_setValue']('shadowDist'+'ance',_0x3d1d86,function(_0x2972f6,_0x28695d){this['light']['shadowDist'+'ance']=_0x2972f6;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x280566){this['_setValue']('shadowInte'+'nsity',_0x280566,function(_0xdb011e,_0x566360){this['light']['shadowInte'+'nsity']=_0xdb011e;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x55a376){this['_setValue']('shadowReso'+'lution',_0x55a376,function(_0x4a2bcf,_0xe77578){this['light']['shadowReso'+'lution']=_0x4a2bcf;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x4a803d){this['_setValue']('shadowBias',_0x4a803d,function(_0x8fa077,_0x5b4db8){this['light']['shadowBias']=-(0x74*0x2d+0xe87*0x1+-0x22eb*0x1+0.01)*Y['clamp'](_0x8fa077,0x864+-0x133a+0xad6,0x833*0x2+-0xd60+-0x305);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x444416){this['_setValue']('numCascade'+'s',_0x444416,function(_0x49d0d3,_0x48ea31){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x49d0d3),-0xfa0+-0x1337*-0x1+0x6*-0x99,-0x5*-0x106+-0x33*-0x3+-0x1*0x5b3);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x2520a4){this['_setValue']('cascadeBle'+'nd',_0x2520a4,function(_0x3b2379,_0x451003){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x3b2379,0x265*-0x9+-0x7*0x421+-0x2*-0x193a,-0x2147+-0x1dce+0x1*0x3f16);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x351668){this['_setValue']('bakeNumSam'+'ples',_0x351668,function(_0x4152d4,_0x4021ab){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x4152d4),0x22b0+0x2*-0xd7c+0x7b7*-0x1,-0x2486+0x1*0xda2+0x4c7*0x5);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0xd2a907){this['_setValue']('bakeArea',_0xd2a907,function(_0x2a3aff,_0x30b70c){this['light']['bakeArea']=Y['clamp'](_0x2a3aff,-0x3fb*-0x2+0x1986+-0x217c,-0x14a7+-0x1*0x209f+0x35fa);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x116163){this['_setValue']('cascadeDis'+'tribution',_0x116163,function(_0x16bd23,_0x25d6e6){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x16bd23,0x12*-0x219+-0x2496+0x4*0x1296,-0x3*0xbda+-0x19cb+0x1*0x3d5a);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x54f723){this['_setValue']('normalOffs'+'etBias',_0x54f723,function(_0x150768,_0x311a75){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x150768,-0xc25+0x1*-0x174f+0x2374,-0xb7a*-0x2+0x4ff+-0x1bf2);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0xb589d5){this['_setValue']('range',_0xb589d5,function(_0x460be0,_0x4ab460){this['light']['attenuatio'+'nEnd']=_0x460be0;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x2a728c){this['_setValue']('innerConeA'+'ngle',_0x2a728c,function(_0xe0c846,_0x2eaffa){this['light']['innerConeA'+'ngle']=_0xe0c846;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x121431){this['_setValue']('outerConeA'+'ngle',_0x121431,function(_0xce0f7c,_0x29fd21){this['light']['outerConeA'+'ngle']=_0xce0f7c;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x4549eb){this['_setValue']('falloffMod'+'e',_0x4549eb,function(_0x58ccb2,_0x4d7527){this['light']['falloffMod'+'e']=_0x58ccb2;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x58d696){this['_setValue']('shadowType',_0x58d696,function(_0x33f2bb,_0x20599e){this['light']['shadowType']=_0x33f2bb;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x5491a2){this['_setValue']('vsmBlurSiz'+'e',_0x5491a2,function(_0x107736,_0x54979a){this['light']['vsmBlurSiz'+'e']=_0x107736;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x5d3f5a){this['_setValue']('vsmBlurMod'+'e',_0x5d3f5a,function(_0x21aed3,_0x9e1cf8){this['light']['vsmBlurMod'+'e']=_0x21aed3;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x59a135){this['_setValue']('vsmBias',_0x59a135,function(_0x2c15b5,_0x381108){this['light']['vsmBias']=Y['clamp'](_0x2c15b5,0x1c90+-0x71*0x49+0x3a9,-0x80*0x25+0x1327*-0x1+0x25a8);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x430fbd){this['_setValue']('cookieAsse'+'t',_0x430fbd,function(_0x52699d,_0x26678b){if(!(this['_cookieAss'+'etId']&&(_0x52699d instanceof me&&_0x52699d['id']===this['_cookieAss'+'etId']||_0x52699d===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x52699d instanceof me)this['data']['cookieAsse'+'t']=_0x52699d['id'],this['_cookieAss'+'etId']=_0x52699d['id'],this['onCookieAs'+'setAdd'](_0x52699d);else{if(typeof _0x52699d=='number'){this['_cookieAss'+'etId']=_0x52699d;const _0x492973=this['system']['app']['assets']['get'](_0x52699d);_0x492973?this['onCookieAs'+'setAdd'](_0x492973):(this['_cookieAss'+'etAdd']=!(0x1*-0x23b1+-0x1*-0x7+0x23aa),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x15a0b8){this['_setValue']('cookie',_0x15a0b8,function(_0x71063e,_0x2d1645){this['light']['cookie']=_0x71063e;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x2d11d7){this['_setValue']('cookieInte'+'nsity',_0x2d11d7,function(_0x40bebb,_0x3d0271){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x40bebb,0xb3*-0xd+-0x1*0x125+0xa3c,0x1be5+-0x74d+-0xfb*0x15);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x40fc4b){this['_setValue']('cookieFall'+'off',_0x40fc4b,function(_0x19f2c4,_0x328d29){this['light']['cookieFall'+'off']=_0x19f2c4;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x33a745){this['_setValue']('cookieChan'+'nel',_0x33a745,function(_0x580944,_0x5b96ed){this['light']['cookieChan'+'nel']=_0x580944;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x53078e){this['_setValue']('cookieAngl'+'e',_0x53078e,function(_0x3a8462,_0x240a5a){if(_0x3a8462!==-0x2334+-0x1f3+0x2527||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new ae());let _0x4d73b6=0x3*-0x293+0x19*-0x14f+0x165*0x1d,_0x1d5569=-0x1*0x5c9+0x173*-0x3+0xa23*0x1;this['cookieScal'+'e']&&(_0x4d73b6=this['cookieScal'+'e']['x'],_0x1d5569=this['cookieScal'+'e']['y']);const _0x5ef228=Math['cos'](_0x3a8462*Y['DEG_TO_RAD']),_0x358b1d=Math['sin'](_0x3a8462*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x5ef228/_0x4d73b6,-_0x358b1d/_0x4d73b6,_0x358b1d/_0x1d5569,_0x5ef228/_0x1d5569),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x14842a){this['_setValue']('cookieScal'+'e',_0x14842a,function(_0x30acca,_0x531e67){if(_0x30acca!==null||this['cookieAngl'+'e']!==0x19ed*0x1+-0xdf*-0x3+-0x1c8a){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new ae());const _0x52ca91=_0x30acca['x'],_0x442cd2=_0x30acca['y'],_0x180590=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x41681f=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x180590/_0x52ca91,-_0x41681f/_0x52ca91,_0x41681f/_0x442cd2,_0x180590/_0x442cd2),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(0xb0f*0x1+0xf9*-0x22+0x1603));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x6a70ff){this['_setValue']('cookieOffs'+'et',_0x6a70ff,function(_0x59ad09,_0x22e5d2){this['light']['cookieOffs'+'et']=_0x59ad09;},!(-0x165d+0x11*0x1b+-0xa49*-0x2));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x4dd2f4){this['_setValue']('shadowUpda'+'teMode',_0x4dd2f4,function(_0x1bed1a,_0x1db155){this['light']['shadowUpda'+'teMode']=_0x1bed1a;},!(-0xda9+0x2450+0x78d*-0x3));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x2b6f73){this['_setValue']('mask',_0x2b6f73,function(_0x21044d,_0x1a698c){this['light']['mask']=_0x21044d;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x570147){this['_setValue']('affectDyna'+'mic',_0x570147,function(_0x552683,_0x39d583){_0x552683?this['light']['mask']|=ds:this['light']['mask']&=~ds,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x5251b9){this['_setValue']('affectLigh'+'tmapped',_0x5251b9,function(_0x27bf03,_0x9cbe32){_0x27bf03?(this['light']['mask']|=si,this['bake']&&(this['light']['mask']&=~ii)):(this['light']['mask']&=~si,this['bake']&&(this['light']['mask']|=ii));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x1542d4){this['_setValue']('bake',_0x1542d4,function(_0x32228f,_0x1396d4){_0x32228f?(this['light']['mask']|=ii,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~si)):(this['light']['mask']&=~ii,this['affectLigh'+'tmapped']&&(this['light']['mask']|=si)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x3aa882){this['_setValue']('bakeDir',_0x3aa882,function(_0x5b3e37,_0x4ebc6e){this['light']['bakeDir']=_0x5b3e37;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x274852){this['_setValue']('isStatic',_0x274852,function(_0x37ae7c,_0x456d0a){this['light']['isStatic']=_0x37ae7c;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x5f3716){this['_setValue']('layers',_0x5f3716,function(_0x6e5892,_0x3a9c27){for(let _0x3e3ae3=-0x1b91+-0xc8b+-0x44*-0x97;_0x3e3ae3<_0x3a9c27['length'];_0x3e3ae3++){const _0x2fca8a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x3a9c27[_0x3e3ae3]);_0x2fca8a&&(_0x2fca8a['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x2fca8a));}for(let _0x183739=0x183d+-0x38b*0x1+-0x14b2;_0x183739<_0x6e5892['length'];_0x183739++){const _0x1418d9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x6e5892[_0x183739]);_0x1418d9&&this['enabled']&&this['entity']['enabled']&&(_0x1418d9['addLight'](this),this['light']['addLayer'](_0x1418d9));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x54c906){this['light']['shadowUpda'+'teOverride'+'s']=_0x54c906;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x531f11){this['light']['shadowSamp'+'les']=_0x531f11;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x38bb8d){this['light']['shadowBloc'+'kerSamples']=_0x38bb8d;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x29b4b0){this['light']['penumbraSi'+'ze']=_0x29b4b0;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x5cdaf2){this['light']['penumbraFa'+'lloff']=_0x5cdaf2;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x3990e5,_0x2aa7e1,_0x348467,_0x4e8f05){const _0x27d81e=this['data'],_0x214a52=_0x27d81e[_0x3990e5];!_0x4e8f05&&_0x214a52===_0x2aa7e1||(_0x27d81e[_0x3990e5]=_0x2aa7e1,_0x348467&&_0x348467['call'](this,_0x2aa7e1,_0x214a52));}['addLightTo'+'Layers'](){for(let _0x5a98c9=0x27*-0xe4+-0x137b*-0x1+0xf41;_0x5a98c9<this['layers']['length'];_0x5a98c9++){const _0x26de9d=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x5a98c9]);_0x26de9d&&(_0x26de9d['addLight'](this),this['light']['addLayer'](_0x26de9d));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x33f8d9=-0x1169+-0x4*0x565+0x26fd*0x1;_0x33f8d9<this['layers']['length'];_0x33f8d9++){const _0x41eb6a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x33f8d9]);_0x41eb6a&&(_0x41eb6a['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x41eb6a));}}['onLayersCh'+'anged'](_0x149684,_0x9f75da){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x149684['off']('add',this['onLayerAdd'+'ed'],this),_0x149684['off']('remove',this['onLayerRem'+'oved'],this),_0x9f75da['on']('add',this['onLayerAdd'+'ed'],this),_0x9f75da['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x37e195){this['layers']['indexOf'](_0x37e195['id'])>=-0x4b*-0x53+-0x65*0x1+0x17ec*-0x1&&this['enabled']&&this['entity']['enabled']&&(_0x37e195['addLight'](this),this['light']['addLayer'](_0x37e195));}['onLayerRem'+'oved'](_0x533de0){this['layers']['indexOf'](_0x533de0['id'])>=0xfb*0x1+-0xb*-0x35d+0x25fa*-0x1&&(_0x533de0['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x533de0));}['refreshPro'+'perties'](){for(let _0x5c7d8a=0x21e6+-0x2e*0x6b+-0xeac;_0x5c7d8a<To['length'];_0x5c7d8a++){const _0xcbcce2=To[_0x5c7d8a];this[_0xcbcce2]=this[_0xcbcce2];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0xebe41d=!(0x837+-0x177e+0xf48);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(0x1225*-0x1+-0x1f4+0x1419),_0xebe41d=!(-0xebc+-0x7*0x438+0x1622*0x2)),(!this['_cookieAss'+'et']['resource']||_0xebe41d)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x23cb0c){this['_cookieAss'+'etId']===_0x23cb0c['id']&&(this['_cookieAss'+'et']=_0x23cb0c,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(0xea0*-0x1+-0x52*-0xc+0xac9)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x318ec9=this['system']['app']['scene'],_0x332817=_0x318ec9['layers'];this['light']['enabled']=!(0xe7c+-0x5*0x15d+-0x7ab),this['_evtLayers'+'Changed']=_0x318ec9['on']('set:layers',this['onLayersCh'+'anged'],this),_0x332817&&(this['_evtLayerA'+'dded']=_0x332817['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x332817['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x20db95,_0x417700,_0x3e48aa;const _0x326a00=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0x1*-0x1acf+-0xf4b+-0xb83),(_0x20db95=this['_evtLayers'+'Changed'])==null||_0x20db95['off'](),this['_evtLayers'+'Changed']=null,_0x326a00&&((_0x417700=this['_evtLayerA'+'dded'])==null||_0x417700['off'](),this['_evtLayerA'+'dded']=null,(_0x3e48aa=this['_evtLayerR'+'emoved'])==null||_0x3e48aa['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class OO extends lt{constructor(_0x2af162){super(_0x2af162),this['id']='light',this['ComponentT'+'ype']=RO,this['DataType']=bv,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x434b47,_0x2e09fc){const _0x166fbc={..._0x2e09fc};_0x166fbc['type']||(_0x166fbc['type']=_0x434b47['data']['type']),_0x434b47['data']['type']=_0x166fbc['type'],_0x166fbc['layers']&&Array['isArray'](_0x166fbc['layers'])&&(_0x166fbc['layers']=_0x166fbc['layers']['slice'](-0x218f*0x1+0xe1e+0x9*0x229)),_0x166fbc['color']&&Array['isArray'](_0x166fbc['color'])&&(_0x166fbc['color']=new ie(_0x166fbc['color'][-0xefa+-0x1*-0x88a+0x2*0x338],_0x166fbc['color'][0x1*0xc4f+0x1d83+-0x29d1*0x1],_0x166fbc['color'][-0x2074*0x1+0x167a+-0x1aa*-0x6])),_0x166fbc['cookieOffs'+'et']&&_0x166fbc['cookieOffs'+'et']instanceof Array&&(_0x166fbc['cookieOffs'+'et']=new J(_0x166fbc['cookieOffs'+'et'][-0x1*0x23f5+0x19fb+0x9fa*0x1],_0x166fbc['cookieOffs'+'et'][0x116a+-0xe3f+-0x1b*0x1e])),_0x166fbc['cookieScal'+'e']&&_0x166fbc['cookieScal'+'e']instanceof Array&&(_0x166fbc['cookieScal'+'e']=new J(_0x166fbc['cookieScal'+'e'][-0x15*0x73+-0xcb4+0x1623],_0x166fbc['cookieScal'+'e'][-0x7*0x339+0x11b9+0x4d7])),_0x166fbc['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x166fbc['enabled']=_0x166fbc['enable']),_0x166fbc['shape']||(_0x166fbc['shape']=Vs);const _0x2b09f7=new Ho(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x2b09f7['type']=Lf[_0x166fbc['type']],_0x2b09f7['_node']=_0x434b47['entity'],_0x434b47['data']['light']=_0x2b09f7,super['initialize'+'ComponentD'+'ata'](_0x434b47,_0x166fbc,To);}['_onRemoveC'+'omponent'](_0x1a9b0a,_0x23a9b7){_0x23a9b7['onRemove']();}['cloneCompo'+'nent'](_0xa03e01,_0x2eda08){const _0x2941b9=_0xa03e01['light'],_0x3ec509=[];let _0x3a7875;for(let _0x5b274a=0x2090+0x98*-0x27+0x1*-0x968;_0x5b274a<To['length'];_0x5b274a++)_0x3a7875=To[_0x5b274a],_0x3a7875!=='light'&&(_0x2941b9[_0x3a7875]&&_0x2941b9[_0x3a7875]['clone']?_0x3ec509[_0x3a7875]=_0x2941b9[_0x3a7875]['clone']():_0x3ec509[_0x3a7875]=_0x2941b9[_0x3a7875]);return this['addCompone'+'nt'](_0x2eda08,_0x3ec509);}['changeType'](_0x18de62,_0x5cc805,_0x599be0){_0x5cc805!==_0x599be0&&(_0x18de62['light']['type']=Lf[_0x599be0]);}}const FO=['x','y','z','w'],NO=[void(0x92b*0x1+0x17c6+-0x1*0x20f1),void(-0x24b3+-0x3*-0x937+0x90e),J,I,ae];function Rn(_0x2056d6,_0x550d58,_0x153d25,_0x314f46){switch(_0x550d58['type']){case'boolean':return!!_0x153d25;case'number':if(typeof _0x153d25=='number')return _0x153d25;if(typeof _0x153d25=='string'){const _0x475109=parseInt(_0x153d25,0x1a5b+-0xc80+-0xdd1);return isNaN(_0x475109)?null:_0x475109;}else{if(typeof _0x153d25=='boolean')return 0xb*-0x2e1+-0x3b3+0x2*0x11af+_0x153d25;}return null;case'json':{const _0x153456={};if(Array['isArray'](_0x550d58['schema'])){(!_0x153d25||typeof _0x153d25!='object')&&(_0x153d25={});for(let _0x2b3b0e=0x2*-0xf25+0x26db+-0x891;_0x2b3b0e<_0x550d58['schema']['length'];_0x2b3b0e++){const _0x1db0f8=_0x550d58['schema'][_0x2b3b0e];if(_0x1db0f8['name']){if(_0x1db0f8['array']){_0x153456[_0x1db0f8['name']]=[];const _0x3a852f=Array['isArray'](_0x153d25[_0x1db0f8['name']])?_0x153d25[_0x1db0f8['name']]:[];for(let _0x49b6a5=-0x24bf+0x261d+-0x15e;_0x49b6a5<_0x3a852f['length'];_0x49b6a5++)_0x153456[_0x1db0f8['name']]['push'](Rn(_0x2056d6,_0x1db0f8,_0x3a852f[_0x49b6a5]));}else{const _0x517102=_0x153d25['hasOwnProp'+'erty'](_0x1db0f8['name'])?_0x153d25[_0x1db0f8['name']]:_0x1db0f8['default'];_0x153456[_0x1db0f8['name']]=Rn(_0x2056d6,_0x1db0f8,_0x517102);}}}}return _0x153456;}case'asset':return _0x153d25 instanceof me?_0x153d25:typeof _0x153d25=='number'?_0x2056d6['assets']['get'](_0x153d25)||null:typeof _0x153d25=='string'&&_0x2056d6['assets']['get'](parseInt(_0x153d25,0x1*-0x1394+-0x1*-0x1535+0x25*-0xb))||null;case'entity':return _0x153d25 instanceof He?_0x153d25:typeof _0x153d25=='string'?_0x2056d6['getEntityF'+'romIndex'](_0x153d25):null;case'rgb':case'rgba':if(_0x153d25 instanceof ie)return _0x314f46 instanceof ie?(_0x314f46['copy'](_0x153d25),_0x314f46):_0x153d25['clone']();if(_0x153d25 instanceof Array&&_0x153d25['length']>=-0x691+0x25*0xe5+-0x49*0x5d&&_0x153d25['length']<=0x1073*0x1+-0x8e3+-0x78c){for(let _0x143ed1=0x1*-0x4d5+-0xdf*0x1+-0xa*-0x92;_0x143ed1<_0x153d25['length'];_0x143ed1++)if(typeof _0x153d25[_0x143ed1]!='number')return null;return _0x314f46||(_0x314f46=new ie()),_0x314f46['r']=_0x153d25[-0x1*-0x2b+-0x1*-0x253d+0x38*-0xab],_0x314f46['g']=_0x153d25[0x9*0x35b+0x15*0x1f+-0x20bd],_0x314f46['b']=_0x153d25[-0x304+-0x1*-0x1079+-0xd73],_0x314f46['a']=_0x153d25['length']===0x1ddd+0x26+-0xa0*0x30?0x424+0xe51+-0x1274:_0x153d25[0x10*-0x146+-0x1505*0x1+0x2968],_0x314f46;}else{if(typeof _0x153d25=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x153d25))return _0x314f46||(_0x314f46=new ie()),_0x314f46['fromString'](_0x153d25),_0x314f46;}return null;case'vec2':case'vec3':case'vec4':{const _0x23d455=parseInt(_0x550d58['type']['slice'](-0x1ac6+-0xdf0+0x28b9),-0x2b*0xe3+0x19*-0x6b+0x309e),_0x75dc=NO[_0x23d455];if(_0x153d25 instanceof _0x75dc)return _0x314f46 instanceof _0x75dc?(_0x314f46['copy'](_0x153d25),_0x314f46):_0x153d25['clone']();if(_0x153d25 instanceof Array&&_0x153d25['length']===_0x23d455){for(let _0x3a6000=0x3*0x5e6+-0x3f8+-0x1*0xdba;_0x3a6000<_0x153d25['length'];_0x3a6000++)if(typeof _0x153d25[_0x3a6000]!='number')return null;_0x314f46||(_0x314f46=new _0x75dc());for(let _0x44b30b=0x67*-0x29+0xa39+0x646;_0x44b30b<_0x23d455;_0x44b30b++)_0x314f46[FO[_0x44b30b]]=_0x153d25[_0x44b30b];return _0x314f46;}return null;}case'curve':if(_0x153d25){let _0x4916f5;if(_0x153d25 instanceof Bs||_0x153d25 instanceof Wr)_0x4916f5=_0x153d25['clone']();else{const _0x3569ef=_0x153d25['keys'][0x1aab+0x2270+-0x3d1b]instanceof Array?Wr:Bs;_0x4916f5=new _0x3569ef(_0x153d25['keys']),_0x4916f5['type']=_0x153d25['type'];}return _0x4916f5;}break;}return _0x153d25;}function Cv(_0x5b3c10,_0x1d5373,_0x200362,_0x254a7c){return _0x1d5373['array']?_0x200362['map']((_0x28e8c5,_0x1fd7ed)=>Rn(_0x5b3c10,_0x1d5373,_0x28e8c5,_0x254a7c?_0x254a7c[_0x1fd7ed]:null)):Rn(_0x5b3c10,_0x1d5373,_0x200362,_0x254a7c);}function Pv(_0x5657e4,_0x1a416d,_0x46598c,_0x2d81b0){if(_0x46598c)for(const _0x3b7633 in _0x1a416d){const _0x3be229=_0x1a416d[_0x3b7633],_0x477f7f=_0x46598c[_0x3b7633];_0x477f7f!==void(0x1e37+0x305+-0x213c)&&(_0x2d81b0[_0x3b7633]=Cv(_0x5657e4,_0x3be229,_0x477f7f,_0x2d81b0[_0x3b7633]));}}const rn=class rn{constructor(_0x5ba3ed){this['scriptType']=_0x5ba3ed,this['index']={};}['add'](_0xf6f6cb,_0x2dd037){if(this['index'][_0xf6f6cb]){M['warn']('attribute\x20'+'\x27'+_0xf6f6cb+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(rn['reservedNa'+'mes']['has'](_0xf6f6cb)){M['warn']('attribute\x20'+'\x27'+_0xf6f6cb+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0xf6f6cb]=_0x2dd037,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0xf6f6cb,{'get':function(){return this['__attribut'+'es'][_0xf6f6cb];},'set':function(_0x1efbe5){const _0xd84802='attr',_0x334de1='attr:'+_0xf6f6cb,_0x5d1938=this['__attribut'+'es'][_0xf6f6cb];let _0xf7afe6=_0x5d1938;if(_0x5d1938&&_0x2dd037['type']!=='json'&&_0x2dd037['type']!=='entity'&&_0x5d1938['clone']&&(this['hasEvent'](_0xd84802)||this['hasEvent'](_0x334de1))&&(_0xf7afe6=_0x5d1938['clone']()),_0x2dd037['array']){if(this['__attribut'+'es'][_0xf6f6cb]=[],_0x1efbe5){for(let _0x23f37d=-0x1024+0x11*0xe9+0xab*0x1,_0x47279c=_0x1efbe5['length'];_0x23f37d<_0x47279c;_0x23f37d++)this['__attribut'+'es'][_0xf6f6cb]['push'](Rn(this['app'],_0x2dd037,_0x1efbe5[_0x23f37d],_0x5d1938?_0x5d1938[_0x23f37d]:null));}}else this['__attribut'+'es'][_0xf6f6cb]=Rn(this['app'],_0x2dd037,_0x1efbe5,_0x5d1938);this['fire'](_0xd84802,_0xf6f6cb,this['__attribut'+'es'][_0xf6f6cb],_0xf7afe6),this['fire'](_0x334de1,this['__attribut'+'es'][_0xf6f6cb],_0xf7afe6);}});}['remove'](_0x37d146){return this['index'][_0x37d146]?(delete this['index'][_0x37d146],delete this['scriptType']['prototype'][_0x37d146],!(0xdcc+-0x21*0x81+-0x2d5*-0x1)):!(-0x8*-0xe3+0x1fa7+-0x39*0xae);}['has'](_0x354532){return!!this['index'][_0x354532];}['get'](_0x2b0c49){return this['index'][_0x2b0c49]||null;}};h(rn,'assignAttr'+'ibutesToSc'+'ript',Pv),h(rn,'attributeT'+'oValue',Cv),h(rn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let qo=rn;const au='initialize',nu='postInitia'+'lize',kO='update',UO='postUpdate',BO='swap';class qt extends pe{constructor(_0x27504c){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x27504c);}set['enabled'](_0x29cf9f){this['_enabled']=!!_0x29cf9f,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(-0x23b2+-0x59f*-0x3+0x12d5*0x1),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,au)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(-0x36*-0x85+0x1fcd+-0x7*0x88d),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,nu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x3ab85b){const _0x4f9747=this['constructo'+'r'];M['assert'](_0x3ab85b&&_0x3ab85b['app']&&_0x3ab85b['entity'],'script\x20['+_0x4f9747['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x3ab85b['app'],this['entity']=_0x3ab85b['entity'],this['_enabled']=typeof _0x3ab85b['enabled']=='boolean'?_0x3ab85b['enabled']:!(0x4*-0x7cf+0x44a+0x1af2),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0x9*-0x7d+-0x2389+0x1f25*0x1),this['__scriptTy'+'pe']=_0x4f9747,this['__executio'+'nOrder']=-(0x1d*0x16+0x26e*0xb+-0x1d37);}static get['scriptName'](){return this['__name'];}}h(qt,'EVENT_ENAB'+'LE','enable'),h(qt,'EVENT_DISA'+'BLE','disable'),h(qt,'EVENT_STAT'+'E','state'),h(qt,'EVENT_DEST'+'ROY','destroy'),h(qt,'EVENT_ATTR','attr'),h(qt,'EVENT_ERRO'+'R','error'),h(qt,'__name',null),h(qt,'__getScrip'+'tName',Mv);const zO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function Mv(_0x512363){if(typeof _0x512363!='function')return;if(_0x512363['scriptName'])return _0x512363['scriptName'];if('name'in Function['prototype'])return _0x512363['name'];if(_0x512363===Function||_0x512363===Function['prototype']['constructo'+'r'])return'Function';const _0x46416a=(''+_0x512363)['match'](zO);return _0x46416a?_0x46416a[0x2*0x331+-0x8*0x13+-0x5c9*0x1]:void(-0x2*0xab3+-0x81b+-0x53*-0x5b);}class wo extends qt{constructor(_0x4b67c8){super(_0x4b67c8),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x4b67c8);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new qo(this)),this['__attribut'+'es'];}['initScript'](_0x580539){qt['prototype']['initScript']['call'](this,_0x580539),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x580539['attributes']||{};}['initScript'+'Type'](_0x421ec1){this['initScript'](_0x421ec1);}['__initiali'+'zeAttribut'+'es'](_0x1f1b4f){if(!(!_0x1f1b4f&&!this['__attribut'+'esRaw'])){for(const _0x4e676f in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x4e676f)?this[_0x4e676f]=this['__attribut'+'esRaw'][_0x4e676f]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x4e676f)||(this['__scriptTy'+'pe']['attributes']['index'][_0x4e676f]['hasOwnProp'+'erty']('default')?this[_0x4e676f]=this['__scriptTy'+'pe']['attributes']['index'][_0x4e676f]['default']:this[_0x4e676f]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x36dd24){for(const _0x5f0f34 in _0x36dd24)_0x36dd24['hasOwnProp'+'erty'](_0x5f0f34)&&(this['prototype'][_0x5f0f34]=_0x36dd24[_0x5f0f34]);}}const VO=_0x36b96b=>_0x36b96b[-0x1103+-0x243*-0x7+0x2*0x97]['toLowerCas'+'e']()+_0x36b96b['substring'](0x1174+0x1866+-0x29d9);class Ei extends we{constructor(_0x1e6217,_0x1ed87b){super(_0x1e6217,_0x1ed87b),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new Ph({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new Ph({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(0x12a3+-0x6*-0x401+-0x2aa8),this['_scriptsDa'+'ta']=null,this['_oldState']=!(0x1498+0x1f49*-0x1+0xab1*0x1),this['_enabled']=!(-0x20*-0x70+-0x24d5+0x16d5*0x1),this['_beingEnab'+'led']=!(0xe*0x49+-0x1336+0xf39),this['_isLooping'+'ThroughScr'+'ipts']=!(0x1346*0x1+-0xf57+-0x3ee),this['_execution'+'Order']=-(0x1fb1+0x9b*0x21+-0x33ab),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x204a24){this['_scriptsDa'+'ta']=_0x204a24;for(const _0x5a0947 in _0x204a24){if(!_0x204a24['hasOwnProp'+'erty'](_0x5a0947))continue;const _0x5480e8=this['_scriptsIn'+'dex'][_0x5a0947];if(_0x5480e8){if(typeof _0x204a24[_0x5a0947]['enabled']=='boolean'&&(_0x5480e8['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x5480e8);}),_0x5480e8['enabled']=!!_0x204a24[_0x5a0947]['enabled']),typeof _0x204a24[_0x5a0947]['attributes']=='object'){for(const _0x404bd3 in _0x204a24[_0x5a0947]['attributes'])if(!qo['reservedNa'+'mes']['has'](_0x404bd3)){if(!_0x5480e8['__attribut'+'es']['hasOwnProp'+'erty'](_0x404bd3)){const _0x160f6b=this['system']['app']['scripts']['get'](_0x5a0947);_0x160f6b&&_0x160f6b['attributes']['add'](_0x404bd3,{});}_0x5480e8[_0x404bd3]=_0x204a24[_0x5a0947]['attributes'][_0x404bd3];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0xd87aa2){const _0xf4c71f=this['_enabled'];this['_enabled']=_0xd87aa2,this['fire']('set','enabled',_0xf4c71f,_0xd87aa2);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(0x2503+-0x1767*0x1+-0xd9c),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(-0x1*0x2239+-0x3ab*0x1+0x25e5);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x4d70c1=this['_beginLoop'+'ing']();for(let _0x5a34a7=-0x100+0xe4c+-0x2e*0x4a,_0x5084d6=this['scripts']['length'];_0x5a34a7<_0x5084d6;_0x5a34a7++){const _0x2e5be0=this['scripts'][_0x5a34a7];_0x2e5be0['_initializ'+'ed']&&!_0x2e5be0['_postIniti'+'alized']&&_0x2e5be0['enabled']&&(_0x2e5be0['_postIniti'+'alized']=!(0x3a9*-0x4+-0x4*0x194+0x14f4),_0x2e5be0['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x2e5be0,nu));}this['_endLoopin'+'g'](_0x4d70c1);}['_beginLoop'+'ing'](){const _0x4e2e1f=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0x15*-0x10f+-0x9*-0x2df+-0x36f*0xe),_0x4e2e1f;}['_endLoopin'+'g'](_0x972911){this['_isLooping'+'ThroughScr'+'ipts']=_0x972911,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x4796e2,_0x1174a3,_0x33c3f1){this['_beingEnab'+'led']=!(0x1c6+0x14*0x1af+0x11b9*-0x2),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(0x1*-0x10b1+0xf06+0x1ac);}['_checkStat'+'e'](){const _0x444e81=this['enabled']&&this['entity']['enabled'];if(_0x444e81===this['_oldState'])return;this['_oldState']=_0x444e81,this['fire'](_0x444e81?'enable':'disable'),this['fire']('state',_0x444e81),_0x444e81?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0xcf4890=this['_beginLoop'+'ing']();for(let _0x5872ba=-0x43*-0x7f+-0x220a*0x1+0xcd,_0x468880=this['scripts']['length'];_0x5872ba<_0x468880;_0x5872ba++){const _0xd92542=this['scripts'][_0x5872ba];_0xd92542['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0xd92542);}),_0xd92542['enabled']=_0xd92542['_enabled'];}this['_endLoopin'+'g'](_0xcf4890);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x23043c=this['_beginLoop'+'ing']();for(let _0x578ebd=-0x1afa+-0x2d1+0x1dcb;_0x578ebd<this['scripts']['length'];_0x578ebd++){const _0x4ebd70=this['scripts'][_0x578ebd];_0x4ebd70&&this['destroy'](_0x4ebd70['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x23043c);}['_removeDes'+'troyedScri'+'pts'](){const _0x8c8cd3=this['_destroyed'+'Scripts']['length'];if(_0x8c8cd3){for(let _0x4c043f=0x4c*0x23+0xa*-0x34+-0x85c;_0x4c043f<_0x8c8cd3;_0x4c043f++){const _0x1249e5=this['_destroyed'+'Scripts'][_0x4c043f];this['_removeScr'+'iptInstanc'+'e'](_0x1249e5);}this['_destroyed'+'Scripts']['length']=0x2051*0x1+-0x155e+-0xaf3,this['_resetExec'+'utionOrder'](-0x24e8+0x2b*-0x3e+0x2f52,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x39756c=0x14c*0xe+0xc86+0x2*-0xf57,_0x5282ce=this['scripts']['length'];_0x39756c<_0x5282ce;_0x39756c++){const _0x3ffa4f=this['scripts'][_0x39756c];this['initialize'+'Attributes'](_0x3ffa4f);}}['initialize'+'Attributes'](_0x18eff7){var _0x1f9426;if(_0x18eff7 instanceof wo)_0x18eff7['__initiali'+'zeAttribut'+'es']();else{const _0x53b1f6=_0x18eff7['__scriptTy'+'pe']['__name'],_0x18071e=this['_attribute'+'DataMap']['get'](_0x53b1f6);if(!_0x18071e)return;const _0x244f0d=(_0x1f9426=this['system']['app']['scripts'])==null?void(-0x97c+0xf12+-0x596):_0x1f9426['getSchema'](_0x53b1f6);_0x244f0d||M['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x53b1f6+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),Pv(this['system']['app'],_0x244f0d['attributes'],_0x18071e,_0x18eff7);}}['_scriptMet'+'hod'](_0xda0e8,_0x5d59ea,_0x3f70cb){try{_0xda0e8[_0x5d59ea](_0x3f70cb);}catch(_0x55a49f){_0xda0e8['enabled']=!(-0xb7c+-0x1400+0x1f7d*0x1),_0xda0e8['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x5d59ea+'\x22\x20for\x20\x22'+_0xda0e8['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x55a49f),console['error'](_0x55a49f)),_0xda0e8['fire']('error',_0x55a49f,_0x5d59ea),this['fire']('error',_0xda0e8,_0x55a49f,_0x5d59ea);}}['_onInitial'+'ize'](){const _0x4f7ec5=this['_scripts'],_0x1614d7=this['_beginLoop'+'ing']();for(let _0x1c7f50=0x31*0xbb+-0x99*-0x2+-0x11*0x22d,_0x2abcea=_0x4f7ec5['length'];_0x1c7f50<_0x2abcea;_0x1c7f50++){const _0x17071e=_0x4f7ec5[_0x1c7f50];!_0x17071e['_initializ'+'ed']&&_0x17071e['enabled']&&(_0x17071e['_initializ'+'ed']=!(0x15d3+-0xac*0x34+0xd1d),_0x17071e['initialize']&&this['_scriptMet'+'hod'](_0x17071e,au));}this['_endLoopin'+'g'](_0x1614d7);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x1d1a1b){const _0x10bbe6=this['_updateLis'+'t'];if(!_0x10bbe6['length'])return;const _0x56f80f=this['_beginLoop'+'ing']();for(_0x10bbe6['loopIndex']=0xc58+0x9d+-0xcf5;_0x10bbe6['loopIndex']<_0x10bbe6['length'];_0x10bbe6['loopIndex']++){const _0x4b1e6d=_0x10bbe6['items'][_0x10bbe6['loopIndex']];_0x4b1e6d['enabled']&&this['_scriptMet'+'hod'](_0x4b1e6d,kO,_0x1d1a1b);}this['_endLoopin'+'g'](_0x56f80f);}['_onPostUpd'+'ate'](_0x100489){const _0x1a384b=this['_postUpdat'+'eList'];if(!_0x1a384b['length'])return;const _0x344054=this['_beginLoop'+'ing']();for(_0x1a384b['loopIndex']=0x1*0x863+-0x1*-0x2027+-0x288a;_0x1a384b['loopIndex']<_0x1a384b['length'];_0x1a384b['loopIndex']++){const _0x45b6e9=_0x1a384b['items'][_0x1a384b['loopIndex']];_0x45b6e9['enabled']&&this['_scriptMet'+'hod'](_0x45b6e9,UO,_0x100489);}this['_endLoopin'+'g'](_0x344054);}['_insertScr'+'iptInstanc'+'e'](_0x4b9c9d,_0x213fbe,_0x19c7f3){_0x213fbe===-(-0x1640+-0x1562+0x2ba3*0x1)?(this['_scripts']['push'](_0x4b9c9d),_0x4b9c9d['__executio'+'nOrder']=_0x19c7f3,_0x4b9c9d['update']&&this['_updateLis'+'t']['append'](_0x4b9c9d),_0x4b9c9d['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x4b9c9d)):(this['_scripts']['splice'](_0x213fbe,0x789*-0x3+0x1cb9*-0x1+0x3354,_0x4b9c9d),_0x4b9c9d['__executio'+'nOrder']=_0x213fbe,this['_resetExec'+'utionOrder'](_0x213fbe+(0xe5c*0x2+0x289*-0x8+-0x86f),_0x19c7f3+(-0x1f74+-0x8*0x60+0x2275)),_0x4b9c9d['update']&&this['_updateLis'+'t']['insert'](_0x4b9c9d),_0x4b9c9d['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x4b9c9d));}['_removeScr'+'iptInstanc'+'e'](_0x1142ba){const _0x5ee6f8=this['_scripts']['indexOf'](_0x1142ba);return _0x5ee6f8===-(-0xe0c*-0x1+0x1*0x2201+-0x300c)||(this['_scripts']['splice'](_0x5ee6f8,0x1232+-0x1*-0xd03+-0x1f34),_0x1142ba['update']&&this['_updateLis'+'t']['remove'](_0x1142ba),_0x1142ba['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x1142ba)),_0x5ee6f8;}['_resetExec'+'utionOrder'](_0x308957,_0x372178){for(let _0x41b852=_0x308957;_0x41b852<_0x372178;_0x41b852++)this['_scripts'][_0x41b852]['__executio'+'nOrder']=_0x41b852;}['_resolveEn'+'tityScript'+'Attribute'](_0x58d6b6,_0x2fc4c4,_0x537c2f,_0x44684e,_0x33b71c,_0x15b8e9){if(_0x58d6b6['array']){const _0x45f9eb=_0x537c2f['length'];if(!_0x45f9eb)return;const _0xdbe301=_0x537c2f['slice']();for(let _0x4b1a63=0x2*0x1201+-0x1*-0x1d84+0x20c3*-0x2;_0x4b1a63<_0x45f9eb;_0x4b1a63++){const _0x2253e6=_0xdbe301[_0x4b1a63]instanceof ot?_0xdbe301[_0x4b1a63]['getGuid']():_0xdbe301[_0x4b1a63];_0x15b8e9[_0x2253e6]&&(_0xdbe301[_0x4b1a63]=_0x44684e?_0x15b8e9[_0x2253e6]['getGuid']():_0x15b8e9[_0x2253e6]);}_0x33b71c[_0x2fc4c4]=_0xdbe301;}else{if(_0x537c2f instanceof ot)_0x537c2f=_0x537c2f['getGuid']();else{if(typeof _0x537c2f!='string')return;}_0x15b8e9[_0x537c2f]&&(_0x33b71c[_0x2fc4c4]=_0x15b8e9[_0x537c2f]);}}['has'](_0x33e1f2){if(typeof _0x33e1f2=='string')return!!this['_scriptsIn'+'dex'][_0x33e1f2];if(!_0x33e1f2)return!(-0x21*-0x89+-0x24c+0xf5c*-0x1);const _0x36cc45=_0x33e1f2,_0x37634a=_0x36cc45['__name'],_0xd67d1f=this['_scriptsIn'+'dex'][_0x37634a];return(_0xd67d1f&&_0xd67d1f['instance'])instanceof _0x36cc45;}['get'](_0x4e1d68){if(typeof _0x4e1d68=='string'){const _0x2bf148=this['_scriptsIn'+'dex'][_0x4e1d68];return _0x2bf148?_0x2bf148['instance']:null;}if(!_0x4e1d68)return null;const _0x1bb6c7=_0x4e1d68,_0x1a70d7=_0x1bb6c7['__name'],_0x401a4a=this['_scriptsIn'+'dex'][_0x1a70d7],_0x4be0e4=_0x401a4a&&_0x401a4a['instance'];return _0x4be0e4 instanceof _0x1bb6c7?_0x4be0e4:null;}['create'](_0x560eac,_0x10ddc5={}){const _0x39bdf6=this;let _0x406241=_0x560eac,_0x1346d9=_0x560eac;if(typeof _0x406241=='string')_0x406241=this['system']['app']['scripts']['get'](_0x406241);else{if(_0x406241){const _0x5b22ce=Mv(_0x406241),_0x15787b=VO(_0x5b22ce);!(_0x406241['prototype']instanceof wo)&&!_0x406241['scriptName']&&M['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x5b22ce+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x5b22ce+('.scriptNam'+'e\x20=\x20\x22')+_0x15787b+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x406241['__name']??(_0x406241['__name']=_0x406241['scriptName']??_0x15787b),_0x1346d9=_0x406241['__name'];}}if(_0x406241){if(!this['_scriptsIn'+'dex'][_0x1346d9]||!this['_scriptsIn'+'dex'][_0x1346d9]['instance']){const _0x210462=new _0x406241({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x10ddc5['hasOwnProp'+'erty']('enabled')?_0x10ddc5['enabled']:!(0x4a*-0x19+0x93c+-0x202),'attributes':_0x10ddc5['attributes']||{}});_0x10ddc5['properties']&&typeof _0x10ddc5['properties']=='object'&&Object['assign'](_0x210462,_0x10ddc5['properties']),_0x210462 instanceof wo||this['_attribute'+'DataMap']['set'](_0x1346d9,_0x10ddc5['attributes']);const _0x236055=this['_scripts']['length'];let _0x1d4c5b=-(0x157f+-0x105b+0x107*-0x5);return typeof _0x10ddc5['ind']=='number'&&_0x10ddc5['ind']!==-(-0x2*-0xe19+0x2284+-0x3eb5)&&_0x236055>_0x10ddc5['ind']&&(_0x1d4c5b=_0x10ddc5['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x210462,_0x1d4c5b,_0x236055),this['_scriptsIn'+'dex'][_0x1346d9]={'instance':_0x210462,'onSwap':function(){_0x39bdf6['swap'](_0x1346d9);}},this[_0x1346d9]=_0x210462,_0x10ddc5['preloading']||this['initialize'+'Attributes'](_0x210462),this['fire']('create',_0x1346d9,_0x210462),this['fire']('create:'+_0x1346d9,_0x210462),this['system']['app']['scripts']['on']('swap:'+_0x1346d9,this['_scriptsIn'+'dex'][_0x1346d9]['onSwap']),_0x10ddc5['preloading']||(_0x210462['enabled']&&!_0x210462['_initializ'+'ed']&&(_0x210462['_initializ'+'ed']=!(0xdc7+-0x482+-0x945),_0x210462['initialize']&&this['_scriptMet'+'hod'](_0x210462,au)),_0x210462['enabled']&&!_0x210462['_postIniti'+'alized']&&(_0x210462['_postIniti'+'alized']=!(0x11c8+-0x1e95*0x1+0xccd),_0x210462['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x210462,nu))),_0x210462;}M['warn']('script\x20\x27'+_0x1346d9+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x1346d9]={'awaiting':!(0x7d+0x5a1+0xae*-0x9),'ind':this['_scripts']['length']},M['warn']('script\x20\x27'+_0x1346d9+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x54585a){let _0xb92cee=_0x54585a,_0x29e64b=_0x54585a;typeof _0x29e64b=='string'?_0x29e64b=this['system']['app']['scripts']['get'](_0x29e64b):_0x29e64b&&(_0xb92cee=_0x29e64b['__name']);const _0x1993f6=this['_scriptsIn'+'dex'][_0xb92cee];if(delete this['_scriptsIn'+'dex'][_0xb92cee],!_0x1993f6)return!(-0x1ca0*-0x1+-0xc4c+-0x1053);this['_attribute'+'DataMap']['delete'](_0xb92cee);const _0x3d52a5=_0x1993f6['instance'];if(_0x3d52a5&&!_0x3d52a5['_destroyed']){if(_0x3d52a5['enabled']=!(-0x6a*-0x2f+-0x1736+0x3c1),_0x3d52a5['_destroyed']=!(-0x980*0x4+-0xbf1*0x1+0x31f1),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x3d52a5);else{const _0x3d5f88=this['_removeScr'+'iptInstanc'+'e'](_0x3d52a5);_0x3d5f88>=-0x269f+-0x17b*0x15+0x45b6&&this['_resetExec'+'utionOrder'](_0x3d5f88,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0xb92cee,_0x1993f6['onSwap']),delete this[_0xb92cee],this['fire']('destroy',_0xb92cee,_0x3d52a5||null),this['fire']('destroy:'+_0xb92cee,_0x3d52a5||null),_0x3d52a5&&_0x3d52a5['fire']('destroy'),!(0x2503+-0x1c+0x1*-0x24e7);}['swap'](_0x552949){let _0x2fa990=_0x552949,_0x144565=_0x552949;typeof _0x144565=='string'?_0x144565=this['system']['app']['scripts']['get'](_0x144565):_0x144565&&(_0x2fa990=_0x144565['__name']);const _0x17638c=this['_scriptsIn'+'dex'][_0x2fa990];if(!_0x17638c||!_0x17638c['instance'])return!(-0x1fee+0x43*-0x74+0x3e4b);const _0x3e1bb8=_0x17638c['instance'],_0x2adb5f=this['_scripts']['indexOf'](_0x3e1bb8),_0x2b2e4e=new _0x144565({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x3e1bb8['enabled'],'attributes':_0x3e1bb8['__attribut'+'es']});return _0x2b2e4e['swap']?(this['initialize'+'Attributes'](_0x2b2e4e),this['_scripts'][_0x2adb5f]=_0x2b2e4e,this['_scriptsIn'+'dex'][_0x2fa990]['instance']=_0x2b2e4e,this[_0x2fa990]=_0x2b2e4e,_0x2b2e4e['__executio'+'nOrder']=_0x2adb5f,_0x3e1bb8['update']&&this['_updateLis'+'t']['remove'](_0x3e1bb8),_0x3e1bb8['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x3e1bb8),_0x2b2e4e['update']&&this['_updateLis'+'t']['insert'](_0x2b2e4e),_0x2b2e4e['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x2b2e4e),this['_scriptMet'+'hod'](_0x2b2e4e,BO,_0x3e1bb8),this['fire']('swap',_0x2fa990,_0x2b2e4e),this['fire']('swap:'+_0x2fa990,_0x2b2e4e),!(-0xe1e+-0x1c58+0x2a76)):!(0x1851+0x22d5+-0x3b25);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x1603a7,_0x193216){var _0xf680c1,_0x15a2bb,_0x126d78;const _0x5c0a98=this['entity']['script'];for(const _0x2d867a in _0x1603a7['_scriptsIn'+'dex']){const _0x1e7312=this['system']['app']['scripts']['get'](_0x2d867a);if(!_0x1e7312)continue;const _0x435d8b=_0x1603a7['_scriptsIn'+'dex'][_0x2d867a];if(!_0x435d8b||!_0x435d8b['instance'])continue;const _0x551e74=_0x5c0a98[_0x2d867a]['__attribut'+'esRaw']??_0x5c0a98['_attribute'+'DataMap']['get'](_0x2d867a),_0xda700=_0x5c0a98[_0x2d867a]['__attribut'+'es'];if(!_0x551e74&&!_0xda700)continue;const _0xe06580=!!_0x551e74,_0x984599=_0x435d8b['instance']['__attribut'+'es']??_0x5c0a98['_attribute'+'DataMap']['get'](_0x2d867a);for(const _0x101b01 in _0x984599){if(!_0x984599[_0x101b01])continue;const _0x4a8e0c=((_0xf680c1=_0x1e7312['attributes'])==null?void(-0xe95*-0x1+-0x1991+0xafc):_0xf680c1['get'](_0x101b01))??((_0x126d78=(_0x15a2bb=this['system']['app']['scripts']['getSchema'](_0x2d867a))==null?void(-0x65*-0x52+-0x422+0x18*-0x12d):_0x15a2bb['attributes'])==null?void(-0x9c4+0x3*0x397+-0x101):_0x126d78[_0x101b01]);if(_0x4a8e0c){if(_0x4a8e0c['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x4a8e0c,_0x101b01,_0x984599[_0x101b01],_0xe06580,_0x551e74||_0xda700,_0x193216);else{if(_0x4a8e0c['type']==='json'&&Array['isArray'](_0x4a8e0c['schema'])){const _0x83923a=_0x984599[_0x101b01],_0x182443=_0x551e74?_0x551e74[_0x101b01]:_0xda700[_0x101b01];for(let _0x1dd730=-0x1057*-0x1+0x7c1+-0x1*0x1818;_0x1dd730<_0x4a8e0c['schema']['length'];_0x1dd730++){const _0x19abd9=_0x4a8e0c['schema'][_0x1dd730];if(_0x19abd9['type']==='entity'){if(_0x4a8e0c['array']){for(let _0x452fb3=0x419+-0x1*0x2547+0x212e;_0x452fb3<_0x83923a['length'];_0x452fb3++)this['_resolveEn'+'tityScript'+'Attribute'](_0x19abd9,_0x19abd9['name'],_0x83923a[_0x452fb3][_0x19abd9['name']],_0xe06580,_0x182443[_0x452fb3],_0x193216);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x19abd9,_0x19abd9['name'],_0x83923a[_0x19abd9['name']],_0xe06580,_0x182443,_0x193216);}}}}}}}}['move'](_0x19824d,_0x4935a8){const _0x49de05=this['_scripts']['length'];if(_0x4935a8>=_0x49de05||_0x4935a8<-0x7*-0x515+0x12b*0xc+-0x3197)return!(-0x171f+0x11b8+0x568);let _0x3acff2=_0x19824d,_0x1ce16d=_0x19824d;typeof _0x1ce16d!='string'?_0x1ce16d=_0x19824d['__name']:_0x3acff2=null;const _0x428d13=this['_scriptsIn'+'dex'][_0x1ce16d];if(!_0x428d13||!_0x428d13['instance'])return!(0x19*-0x17f+-0x1765+0x3ccd);const _0xaad807=_0x428d13['instance'];if(_0x3acff2&&!(_0xaad807 instanceof _0x3acff2))return!(0xd01*0x3+-0x1b*0xe5+-0xedb*0x1);const _0x13272a=this['_scripts']['indexOf'](_0xaad807);return _0x13272a===-(0xf97+-0x222a+0x1294)||_0x13272a===_0x4935a8?!(-0x20de+0x61*-0x13+0x2812):(this['_scripts']['splice'](_0x4935a8,0x7ac*-0x3+0xc6d*-0x1+0x2371*0x1,this['_scripts']['splice'](_0x13272a,-0x56a+-0x141c+0x1*0x1987)[0x12fa+-0x121d*0x1+-0xdd]),this['_resetExec'+'utionOrder'](0x256b+0x1d54+-0x42bf,_0x49de05),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x1ce16d,_0xaad807,_0x4935a8,_0x13272a),this['fire']('move:'+_0x1ce16d,_0xaad807,_0x4935a8,_0x13272a),!(0x1372+-0x397*-0x1+0x1709*-0x1));}}h(Ei,'EVENT_CREA'+'TE','create'),h(Ei,'EVENT_DEST'+'ROY','destroy'),h(Ei,'EVENT_ENAB'+'LE','enable'),h(Ei,'EVENT_DISA'+'BLE','disable'),h(Ei,'EVENT_REMO'+'VE','remove'),h(Ei,'EVENT_STAT'+'E','state'),h(Ei,'EVENT_MOVE','move'),h(Ei,'EVENT_ERRO'+'R','error');class GO{constructor(){this['enabled']=!(-0x13eb*-0x1+-0x10a6+0x1f*-0x1b);}}const HO='_onInitial'+'izeAttribu'+'tes',WO='_onInitial'+'ize',$O='_onPostIni'+'tialize',XO='_onUpdate',qO='_onPostUpd'+'ate';let rh=0x10b*0x19+0x1fe1+0x2*-0x1cfa;class jO extends lt{constructor(_0x5dce03){super(_0x5dce03),this['id']='script',this['ComponentT'+'ype']=Ei,this['DataType']=GO,this['_component'+'s']=new Ph({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new Ph({'sortBy':'_execution'+'Order'}),this['preloading']=!(0xb57*0x2+0x10fd*-0x2+0x6*0x1e2),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x20e84d,_0x3cd5dd){if(_0x20e84d['_execution'+'Order']=rh++,this['_component'+'s']['append'](_0x20e84d),rh>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x20e84d['enabled']=_0x3cd5dd['hasOwnProp'+'erty']('enabled')?!!_0x3cd5dd['enabled']:!(-0x4a7*-0x2+-0x743*0x1+-0x20b),_0x20e84d['enabled']&&_0x20e84d['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x20e84d),_0x3cd5dd['hasOwnProp'+'erty']('order')&&_0x3cd5dd['hasOwnProp'+'erty']('scripts')){_0x20e84d['_scriptsDa'+'ta']=_0x3cd5dd['scripts'];for(let _0x41788d=-0x2252+-0x1563+-0x1*-0x37b5;_0x41788d<_0x3cd5dd['order']['length'];_0x41788d++)_0x20e84d['create'](_0x3cd5dd['order'][_0x41788d],{'enabled':_0x3cd5dd['scripts'][_0x3cd5dd['order'][_0x41788d]]['enabled'],'attributes':_0x3cd5dd['scripts'][_0x3cd5dd['order'][_0x41788d]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x5607ed,_0xa3e40f){var _0x1091ba;const _0x217ad8=[],_0x1ee210={};for(let _0x8b1245=0x1353+0x349*-0x3+-0x978;_0x8b1245<_0x5607ed['script']['_scripts']['length'];_0x8b1245++){const _0x940e76=_0x5607ed['script']['_scripts'][_0x8b1245],_0xc22a28=_0x940e76['__scriptTy'+'pe']['__name'];_0x217ad8['push'](_0xc22a28);const _0x4fbce1=((_0x1091ba=_0x5607ed['script']['_attribute'+'DataMap'])==null?void(-0x1064+-0x3*0x569+0x209f):_0x1091ba['get'](_0xc22a28))||{};for(const _0x3158a2 in _0x940e76['__attribut'+'es'])_0x4fbce1[_0x3158a2]=_0x940e76['__attribut'+'es'][_0x3158a2];_0x1ee210[_0xc22a28]={'enabled':_0x940e76['_enabled'],'attributes':_0x4fbce1};}for(const _0x53a3f0 in _0x5607ed['script']['_scriptsIn'+'dex'])_0x53a3f0['awaiting']&&_0x217ad8['splice'](_0x53a3f0['ind'],-0x350+-0x1*-0x1aba+-0x176a,_0x53a3f0);const _0x56c948={'enabled':_0x5607ed['script']['enabled'],'order':_0x217ad8,'scripts':_0x1ee210};return this['addCompone'+'nt'](_0xa3e40f,_0x56c948);}['_resetExec'+'utionOrder'](){rh=0x2026+0x23b3*0x1+-0xb*0x62b;for(let _0x39d40e=0x113+-0x16b1+-0xacf*-0x2,_0x18a352=this['_component'+'s']['length'];_0x39d40e<_0x18a352;_0x39d40e++)this['_component'+'s']['items'][_0x39d40e]['_execution'+'Order']=rh++;}['_callCompo'+'nentMethod'](_0x47e0f2,_0x13abdd,_0x33e1fb){for(_0x47e0f2['loopIndex']=-0x47*0x14+0x13d+0x44f;_0x47e0f2['loopIndex']<_0x47e0f2['length'];_0x47e0f2['loopIndex']++)_0x47e0f2['items'][_0x47e0f2['loopIndex']][_0x13abdd](_0x33e1fb);}['_onInitial'+'ize'](){this['preloading']=!(-0x5ff+-0x351+0xf*0x9f),this['_callCompo'+'nentMethod'](this['_component'+'s'],HO),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],WO);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],$O);}['_onUpdate'](_0x2898c6){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],XO,_0x2898c6);}['_onPostUpd'+'ate'](_0x408fbb){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],qO,_0x408fbb);}['_addCompon'+'entToEnabl'+'ed'](_0x4fd3e9){this['_enabledCo'+'mponents']['insert'](_0x4fd3e9);}['_removeCom'+'ponentFrom'+'Enabled'](_0x5e677b){this['_enabledCo'+'mponents']['remove'](_0x5e677b);}['_onBeforeR'+'emove'](_0x1a484f,_0x30c00d){this['_component'+'s']['items']['indexOf'](_0x30c00d)>=-0x2*-0xb29+0x2369+-0x39bb*0x1&&_0x30c00d['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x30c00d),this['_component'+'s']['remove'](_0x30c00d);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class Iv extends we{constructor(_0x12a41b,_0x480db3){super(_0x12a41b,_0x480db3),h(this,'_layers',[Wi]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(0xec0+-0x83d+0x1*-0x683)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(0x1016+-0x130a+0x2f5)),(this['_assetRefe'+'rence']=new Xo('asset',this,_0x12a41b['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x480db3['on']('remove',this['onRemoveCh'+'ild'],this),_0x480db3['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x480db3['on']('insert',this['onInsertCh'+'ild'],this),_0x480db3['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x2db9b6){var _0x281003,_0x52c1b5;this['_customAab'+'b']=_0x2db9b6,(_0x52c1b5=(_0x281003=this['_instance'])==null?void(0x2*-0x223+0xa70+0x1*-0x62a):_0x281003['meshInstan'+'ce'])==null||_0x52c1b5['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x1e1ff5){if(this['destroyIns'+'tance'](),this['_instance']=_0x1e1ff5,this['_instance']){const _0x412854=this['_instance']['meshInstan'+'ce'];_0x412854['node']||(_0x412854['node']=this['entity']),_0x412854['castShadow']=this['_castShado'+'ws'],_0x412854['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x155d99){this['_instance']?this['_instance']['material']=_0x155d99:this['_materialT'+'mp']=_0x155d99;}get['material'](){var _0x3eb036;return((_0x3eb036=this['_instance'])==null?void(0x547*-0x7+0x12*0x153+-0x131*-0xb):_0x3eb036['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x1a9f85){_0x1a9f85!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x1a9f85,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x1a9f85));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x2250e8){var _0x366356;if(this['_castShado'+'ws']!==_0x2250e8){const _0x1b1e36=(_0x366356=this['instance'])==null?void(-0x79f+0x1ffe+0x16f*-0x11):_0x366356['meshInstan'+'ce'];if(_0x1b1e36){const _0x3f5c09=this['layers'],_0x16fa7=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x2250e8)for(let _0x1bb80f=0x1*-0x1f67+-0x8*0x4de+-0x665*-0xb;_0x1bb80f<_0x3f5c09['length'];_0x1bb80f++){const _0x162596=_0x16fa7['layers']['getLayerBy'+'Id'](this['layers'][_0x1bb80f]);_0x162596&&_0x162596['removeShad'+'owCasters']([_0x1b1e36]);}if(_0x1b1e36['castShadow']=_0x2250e8,!this['_castShado'+'ws']&&_0x2250e8)for(let _0x4af527=0x656*-0x1+-0x14e*0x7+-0x3de*-0x4;_0x4af527<_0x3f5c09['length'];_0x4af527++){const _0x1f3e70=_0x16fa7['layers']['getLayerBy'+'Id'](_0x3f5c09[_0x4af527]);_0x1f3e70&&_0x1f3e70['addShadowC'+'asters']([_0x1b1e36]);}}this['_castShado'+'ws']=_0x2250e8;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x4b391c){this['removeFrom'+'Layers'](),this['_layers']['length']=0xb51+0x8f5+-0x1446;for(let _0x3a6b5d=0x97*0x10+0x824*-0x1+-0x14c;_0x3a6b5d<_0x4b391c['length'];_0x3a6b5d++)this['_layers'][_0x3a6b5d]=_0x4b391c[_0x3a6b5d];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x41a368){const _0x140601=_0x41a368 instanceof me?_0x41a368['id']:_0x41a368;this['_assetRefe'+'rence']['id']!==_0x140601&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x140601,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0x370b63;this['_instance']&&(this['removeFrom'+'Layers'](),(_0x370b63=this['_instance'])==null||_0x370b63['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x1519ee,_0x5ca9e9;const _0x345470=(_0x1519ee=this['instance'])==null?void(0x11ff*-0x1+0x1*0x2443+-0x922*0x2):_0x1519ee['meshInstan'+'ce'];if(_0x345470){const _0x552e00=this['system']['app']['scene']['layers'];for(let _0x3c42b2=0x1501+-0x2412+0xf11;_0x3c42b2<this['_layers']['length'];_0x3c42b2++)(_0x5ca9e9=_0x552e00['getLayerBy'+'Id'](this['_layers'][_0x3c42b2]))==null||_0x5ca9e9['addMeshIns'+'tances']([_0x345470]);}}['removeFrom'+'Layers'](){var _0x134d5a,_0x88dfa7;const _0x39528f=(_0x134d5a=this['instance'])==null?void(0x14d7+-0x1405+-0x7*0x1e):_0x134d5a['meshInstan'+'ce'];if(_0x39528f){const _0x17c9af=this['system']['app']['scene']['layers'];for(let _0x25f855=0x33f*0x5+0x2529+-0x3564;_0x25f855<this['_layers']['length'];_0x25f855++)(_0x88dfa7=_0x17c9af['getLayerBy'+'Id'](this['_layers'][_0x25f855]))==null||_0x88dfa7['removeMesh'+'Instances']([_0x39528f]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x5cc845,_0x32f2df){this['addToLayer'+'s'](),_0x5cc845['off']('add',this['onLayerAdd'+'ed'],this),_0x5cc845['off']('remove',this['onLayerRem'+'oved'],this),_0x32f2df['on']('add',this['onLayerAdd'+'ed'],this),_0x32f2df['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5936c1){this['layers']['indexOf'](_0x5936c1['id'])<0x239d+0x767*-0x4+-0x601*0x1||this['_instance']&&_0x5936c1['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x5eb4b0){this['layers']['indexOf'](_0x5eb4b0['id'])<-0x1bbe+-0xa*-0x4e+0x18b2||this['_instance']&&_0x5eb4b0['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x5c1c06=this['system']['app']['scene'],_0x5f4117=_0x5c1c06['layers'];this['_evtLayers'+'Changed']=_0x5c1c06['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5f4117&&(this['_evtLayerA'+'dded']=_0x5f4117['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5f4117['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x5f03d8,_0x424bbc,_0x2ad6b2;const _0x4a62c9=this['system']['app']['scene']['layers'];(_0x5f03d8=this['_evtLayers'+'Changed'])==null||_0x5f03d8['off'](),this['_evtLayers'+'Changed']=null,_0x4a62c9&&((_0x424bbc=this['_evtLayerA'+'dded'])==null||_0x424bbc['off'](),this['_evtLayerA'+'dded']=null,(_0x2ad6b2=this['_evtLayerR'+'emoved'])==null||_0x2ad6b2['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x34*0x29+-0x40*0x47+0x96d));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x1397+-0x3*0x864+0x595));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x51b37d=this['_assetRefe'+'rence']['asset'];_0x51b37d&&(this['instance']=_0x51b37d['resource']['createInst'+'ance'](_0x51b37d['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class YO{constructor(){this['enabled']=!(0x984+-0x1d7e+-0x13fa*-0x1);}}const ou=['enabled'],ro=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class KO extends lt{constructor(_0x68e9b5){super(_0x68e9b5),this['id']='gsplat',this['ComponentT'+'ype']=Iv,this['DataType']=YO,this['schema']=ou,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x572d1b,_0x3c1cce,_0x23abf0){_0x3c1cce['layers']&&_0x3c1cce['layers']['length']&&(_0x3c1cce['layers']=_0x3c1cce['layers']['slice'](-0x22e6*-0x1+-0x12d9+-0x1*0x100d));for(let _0x14afd8=0x1*0x327+0x1520+-0x1847;_0x14afd8<ro['length'];_0x14afd8++)_0x3c1cce['hasOwnProp'+'erty'](ro[_0x14afd8])&&(_0x572d1b[ro[_0x14afd8]]=_0x3c1cce[ro[_0x14afd8]]);_0x3c1cce['aabbCenter']&&_0x3c1cce['aabbHalfEx'+'tents']&&(_0x572d1b['customAabb']=new Ie(new I(_0x3c1cce['aabbCenter']),new I(_0x3c1cce['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x572d1b,_0x3c1cce,ou);}['cloneCompo'+'nent'](_0x53ec51,_0x4fa648){const _0x5005d3=_0x53ec51['gsplat'],_0x4b03c0={};ro['forEach'](_0xc057dd=>{_0xc057dd==='material'?_0x4b03c0[_0xc057dd]=_0x5005d3[_0xc057dd]['clone']():_0x4b03c0[_0xc057dd]=_0x5005d3[_0xc057dd];}),_0x4b03c0['enabled']=_0x5005d3['enabled'];const _0x3fbea1=this['addCompone'+'nt'](_0x4fa648,_0x4b03c0);return _0x5005d3['customAabb']&&(_0x3fbea1['customAabb']=_0x5005d3['customAabb']['clone']()),_0x3fbea1;}['onRemove'](_0x260b65,_0x35f377){_0x35f377['onRemove']();}}we['_buildAcce'+'ssors'](Iv['prototype'],ou);class zm extends pe{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x628aa7){this['decRefMesh'+'es'](),this['_meshes']=_0x628aa7,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x628aa7);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x2fa61a;(_0x2fa61a=this['_meshes'])==null||_0x2fa61a['forEach']((_0x5d27c9,_0x13688b)=>{_0x5d27c9&&(_0x5d27c9['decRefCoun'+'t'](),_0x5d27c9['refCount']<0x1e71*-0x1+-0x2*0x1069+0x3f44&&(_0x5d27c9['destroy'](),this['_meshes'][_0x13688b]=null));});}['incRefMesh'+'es'](){var _0x4e7deb;(_0x4e7deb=this['_meshes'])==null||_0x4e7deb['forEach'](_0xa99fe2=>{_0xa99fe2==null||_0xa99fe2['incRefCoun'+'t']();});}}h(zm,'EVENT_SETM'+'ESHES','set:meshes');function wh(_0x18054a){const _0x2bb7c3=this;if(!_0x2bb7c3['resource'])return;const _0x42107f=_0x18054a['resource'],_0x39cf9a=_0x42107f['renders']&&_0x42107f['renders'][_0x2bb7c3['data']['renderInde'+'x']];_0x39cf9a&&(_0x2bb7c3['resource']['meshes']=_0x39cf9a['resource']['meshes']);}function Mg(_0x1d6fa9){const _0x37096c=this;_0x37096c['registry']['off']('load:'+_0x1d6fa9['id'],wh,_0x37096c),_0x37096c['registry']['on']('load:'+_0x1d6fa9['id'],wh,_0x37096c),_0x37096c['registry']['off']('remove:'+_0x1d6fa9['id'],Ig,_0x37096c),_0x37096c['registry']['once']('remove:'+_0x1d6fa9['id'],Ig,_0x37096c),_0x1d6fa9['resource']?wh['call'](_0x37096c,_0x1d6fa9):_0x37096c['registry']['load'](_0x1d6fa9);}function Ig(_0x5e841f){const _0x14d783=this;_0x14d783['registry']['off']('load:'+_0x5e841f['id'],wh,_0x14d783),_0x14d783['resource']&&_0x14d783['resource']['destroy']();}class ZO extends Ze{constructor(_0x564212){super(_0x564212,'render'),this['_registry']=_0x564212['assets'];}['open'](_0x5eecb0,_0x18ce45){return new zm();}['patch'](_0x1fdeba,_0x126eee){if(!_0x1fdeba['data']['containerA'+'sset'])return;const _0x18e459=_0x126eee['get'](_0x1fdeba['data']['containerA'+'sset']);if(!_0x18e459){_0x126eee['once']('add:'+_0x1fdeba['data']['containerA'+'sset'],Mg,_0x1fdeba);return;}Mg['call'](_0x1fdeba,_0x18e459);}}class Dv{constructor(_0x37aec0,_0x3a57ab,_0x2a344a,_0x52d6a6){this['_paths']=_0x37aec0,this['_input']=_0x3a57ab,this['_output']=_0x2a344a,this['_interpola'+'tion']=_0x52d6a6;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class nc{constructor(_0x7d3276,_0x3ac31e){this['_component'+'s']=_0x7d3276,this['_data']=_0x3ac31e;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function QO(_0x30b62c,_0x59e9b7){let _0x34778f;const _0x51ae2a=(_0x382ece,_0x47559f)=>{switch(_0x47559f){case _0x34778f['DT_INT8']:return new Int8Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']);case _0x34778f['DT_INT16']:return new Int16Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']/(0x1f5a+-0x1d*0x40+0xc*-0x202));case _0x34778f['DT_INT32']:return new Int32Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']/(-0x1a*0xe5+-0x22*-0x6f+-0x444*-0x2));case _0x34778f['DT_UINT8']:return new Uint8Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']);case _0x34778f['DT_UINT16']:return new Uint16Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']/(0x38*-0x17+0x15da+-0x10d0));case _0x34778f['DT_UINT32']:return new Uint32Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']/(-0xb58+-0xaf+-0xc0b*-0x1));case _0x34778f['DT_FLOAT32']:return new Float32Array(_0x382ece['buffer'],_0x382ece['byteOffset'],_0x382ece['byteLength']/(0x774+-0x2*0x4eb+0x266));}return null;},_0x11b1a0=_0xbfaf46=>{switch(_0xbfaf46){case _0x34778f['DT_INT8']:return 0xf0d*0x2+-0xc0d+-0x120c;case _0x34778f['DT_INT16']:return 0x6*-0x1e0+-0xb9e+-0x10*-0x16e;case _0x34778f['DT_INT32']:return 0x22da+0x3c5*-0x5+-0xffd;case _0x34778f['DT_UINT8']:return 0xb1*-0x2+0x17ea+-0x1687;case _0x34778f['DT_UINT16']:return-0x86b+-0x1be3+0x2450;case _0x34778f['DT_UINT32']:return 0x59f*-0x5+-0x7*-0x4dc+0x1f7*-0x3;case _0x34778f['DT_FLOAT32']:return 0x1de7+0xb*-0x101+-0x12d8;}return 0xe9*-0x1f+-0x23c5+0x3ffd;},_0x2b6d20=_0x24a831=>_0x24a831['num_compon'+'ents']()*_0x11b1a0(_0x24a831['data_type']()),_0x5b6310={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x5479b1=(_0x56f8f4,_0x2d5262)=>{const _0x1aaca5=(_0x649412,_0x34d23d,_0xe0c12b)=>{_0x649412[-0x1*0x215b+0x1dc3+0x14*0x2e]=_0x34d23d[-0x1f97+-0xd28+0x2cbf]-_0xe0c12b[-0x16d*-0x7+-0x1d*0x11f+0x1688],_0x649412[-0x3*-0xb0d+-0x1d4c+0x22*-0x1d]=_0x34d23d[-0xb3*-0x13+0x127b+-0x1fc3*0x1]-_0xe0c12b[0x1703+-0x1be*0x7+-0xad0],_0x649412[-0x14a8+0x1ab6+0x3*-0x204]=_0x34d23d[-0x2553+0x780+0x1dd5]-_0xe0c12b[-0x3d*-0x5+0x1215+-0x1344];},_0x95a70b=(_0x4349ea,_0x5c9a7a,_0x2f07ac)=>{_0x4349ea[-0x1c54+0x65e*0x4+0xc*0x3d]=_0x5c9a7a[-0x25d9+-0x1250+0x9e*0x5b]*_0x2f07ac[-0x7*-0x3d5+0x21b6+-0x3c87]-_0x2f07ac[0x1fde+0xf4*-0x16+-0xae5]*_0x5c9a7a[0x821*0x2+0x852+0xc49*-0x2],_0x4349ea[-0x1*-0x1dbb+0x146e+0x1e*-0x1ac]=_0x5c9a7a[0x608+0x24ca+-0x2ad0]*_0x2f07ac[-0x171*-0x19+0x1bd+-0x25c6]-_0x2f07ac[-0x89c+-0x14e9+0x1d87]*_0x5c9a7a[0x1*0x1e55+0xbdb*-0x1+-0x2b*0x6e],_0x4349ea[-0xa5+0x1e*0x17+0x20b*-0x1]=_0x5c9a7a[-0x168+-0x1051*0x1+0x15d*0xd]*_0x2f07ac[0x95*-0x1b+-0x19d9+-0x1*-0x2991]-_0x2f07ac[-0xd0a*0x1+-0x9b7+0x16c1]*_0x5c9a7a[0xfca+0x178*0x7+-0x1a11];},_0x3c5b5f=(_0x3a79af,_0x591644)=>{const _0x311428=_0x3a79af[_0x591644+(-0x95*0x35+0x1d2b+0x1ae)],_0x52b337=_0x3a79af[_0x591644+(0x57f+0x2169+0x1b1*-0x17)],_0x2071ce=_0x3a79af[_0x591644+(0x20b6+0xbd*0x34+-0xe*0x514)],_0x56c94c=(0x8d1+0x18fe+-0x1*0x21ce)/Math['sqrt'](_0x311428*_0x311428+_0x52b337*_0x52b337+_0x2071ce*_0x2071ce);_0x3a79af[_0x591644+(0x48e+-0xd74+0x22*0x43)]*=_0x56c94c,_0x3a79af[_0x591644+(0x1bd4+0x101*0x16+-0x31e9)]*=_0x56c94c,_0x3a79af[_0x591644+(0x9ae+0x996+-0x1d*0xaa)]*=_0x56c94c;},_0x39c4e4=(_0x102fb6,_0x1b4182,_0x3cad52)=>{for(let _0x2f1beb=0x227*0x1+0x1437+0x1*-0x165e;_0x2f1beb<0x2507*0x1+0x13*0x71+-0x2d67;++_0x2f1beb)_0x102fb6[_0x2f1beb]=_0x1b4182[_0x3cad52+_0x2f1beb];},_0x23d138=_0x2d5262['length']/(-0x14a1*0x1+-0x122f+0x26d3),_0xa06886=_0x56f8f4['length']/(0x2084+-0x7*-0x547+-0x4572),_0x489b77=new Float32Array(_0x56f8f4['length']),_0x53cc0a=[-0x1542+-0x1f9a+0x34dc,0x140c+-0xb25+-0x8e7,0x176*-0xc+0x1ffd+-0xe75],_0x1931a6=[-0x2062+0x13a1+0xcc1*0x1,-0x697+0x13e9*-0x1+0x1a80,0x2*0x1135+0x25f9+-0x4863],_0x4201ce=[0x1bbb+0x15d9+-0x3194,-0x656*0x5+0xc00*0x3+-0x452,0x6e3*-0x2+0xad4+0x3a*0xd],_0x1ceb7b=[0x1b70*-0x1+-0xe05*-0x1+0xd6b,0x21d3+0x1c90+0x1*-0x3e63,0x1*0x923+-0xb65+0x242],_0xc728d1=[0x579*0x1+0x413*-0x6+-0x3*-0x653,-0x287+-0x70a*-0x3+-0x1297,-0x9c7+-0xd25+0x16ec],_0x75cd0f=[0x203*0x8+0x1155+-0x216d,-0xaf9+0x1466+-0x96d,-0x2425+0x2437+-0x2*0x9];for(let _0x127f23=-0x4*0x7be+-0x1eff+0x3df7;_0x127f23<_0x23d138;++_0x127f23){const _0x402ea9=_0x2d5262[_0x127f23*(-0x1*-0x2403+0x8a8+-0x2ca8)+(-0x5*0x3fd+0x2671+-0x1280)]*(-0x7b6+-0x13*-0x12f+-0xec4),_0x4496ed=_0x2d5262[_0x127f23*(0x13a1+0x21b1+-0x354f)+(-0x218a+-0x710+0x2d*0xe7)]*(0x1*-0x1d62+0x950*0x3+-0x1*-0x175),_0x51c939=_0x2d5262[_0x127f23*(-0x9d1*-0x2+0x17ba+0x1*-0x2b59)+(0xccf+0x1b79+0x80e*-0x5)]*(-0xf8b+-0x1b1f+0x2aad);_0x39c4e4(_0x53cc0a,_0x56f8f4,_0x402ea9),_0x39c4e4(_0x1931a6,_0x56f8f4,_0x4496ed),_0x39c4e4(_0x4201ce,_0x56f8f4,_0x51c939),_0x1aaca5(_0x1ceb7b,_0x1931a6,_0x53cc0a),_0x1aaca5(_0xc728d1,_0x4201ce,_0x53cc0a),_0x95a70b(_0x75cd0f,_0x1ceb7b,_0xc728d1),_0x3c5b5f(_0x75cd0f,0x20f2+0x5*0x590+-0xca*0x4d);for(let _0x4ba02f=-0xb0c+0x2206+0x22*-0xad;_0x4ba02f<-0x12ba+0xa8e+0x82f;++_0x4ba02f)_0x489b77[_0x402ea9+_0x4ba02f]+=_0x75cd0f[_0x4ba02f],_0x489b77[_0x4496ed+_0x4ba02f]+=_0x75cd0f[_0x4ba02f],_0x489b77[_0x51c939+_0x4ba02f]+=_0x75cd0f[_0x4ba02f];}for(let _0x1a29aa=0x218e+-0xcd8+0xb*-0x1e2;_0x1a29aa<_0xa06886;++_0x1a29aa)_0x3c5b5f(_0x489b77,_0x1a29aa*(0x125b+-0x12f3+0x5*0x1f));return new Uint8Array(_0x489b77['buffer']);},_0x400ab2=_0x4b1cfa=>{const _0x44d4a4={},_0xd66a38=new _0x34778f['DecoderBuf'+'fer']();_0xd66a38['Init'](_0x4b1cfa,_0x4b1cfa['length']);const _0x415da2=new _0x34778f['Decoder']();if(_0x415da2['GetEncoded'+'GeometryTy'+'pe'](_0xd66a38)!==_0x34778f['TRIANGULAR'+'_MESH'])return _0x44d4a4['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x44d4a4;const _0x5632d5=new _0x34778f['Mesh'](),_0x2f6577=_0x415da2['DecodeBuff'+'erToMesh'](_0xd66a38,_0x5632d5);if(!_0x2f6577||!_0x2f6577['ok']()||_0x34778f['getPointer'](_0x5632d5)===0x1*0x8cd+0x1*-0xb2e+0x261)return _0x44d4a4['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x44d4a4;const _0x459d9e=_0x5632d5['num_faces']()*(0x108c+0x21ce+-0x3257),_0x24aa60=_0x5632d5['num_points']()<=-0x2*-0x63d6+0x1e05c+-0x1a809,_0xd7fca3=_0x459d9e*(_0x24aa60?0x4*-0x567+-0x17f*-0x1+0x141f:0xa6*-0x3b+0x1*-0x88a+0x2*0x1768),_0x12a32c=_0x34778f['_malloc'](_0xd7fca3);_0x24aa60?(_0x415da2['GetTriangl'+'esUInt16Ar'+'ray'](_0x5632d5,_0xd7fca3,_0x12a32c),_0x44d4a4['indices']=new Uint16Array(_0x34778f['HEAPU16']['buffer'],_0x12a32c,_0x459d9e)['slice']()['buffer']):(_0x415da2['GetTriangl'+'esUInt32Ar'+'ray'](_0x5632d5,_0xd7fca3,_0x12a32c),_0x44d4a4['indices']=new Uint32Array(_0x34778f['HEAPU32']['buffer'],_0x12a32c,_0x459d9e)['slice']()['buffer']),_0x34778f['_free'](_0x12a32c);const _0x263cab=[];for(let _0x34446f=-0x1749*0x1+0x750+0xff9;_0x34446f<_0x5632d5['num_attrib'+'utes']();++_0x34446f)_0x263cab['push'](_0x415da2['GetAttribu'+'te'](_0x5632d5,_0x34446f));_0x263cab['sort']((_0xdef603,_0x495a56)=>(_0x5b6310[_0xdef603['attribute_'+'type']()]??_0x5b6310['length'])-(_0x5b6310[_0x495a56['attribute_'+'type']()]??_0x5b6310['length'])),_0x44d4a4['attributes']=_0x263cab['map'](_0x38a1c9=>_0x38a1c9['unique_id']());let _0x219285=0x72a+0xc7b+-0x6b*0x2f;const _0x1f07b6=_0x263cab['map'](_0x1d85d8=>{const _0x5bdba4=_0x219285;return _0x219285+=Math['ceil'](_0x2b6d20(_0x1d85d8)/(0xd16+-0x1836+-0x17*-0x7c))*(-0xddb*-0x2+0x6e1*-0x2+-0xdf0),_0x5bdba4;}),_0x6fb70d=_0x263cab['some'](_0x2cf240=>_0x2cf240['attribute_'+'type']()===-0x1586+0x133f*-0x1+-0x266*-0x11),_0x21ddd9=_0x1f07b6[-0x7b7+-0x2*0x1066+0x2884];if(!_0x6fb70d){for(let _0x345d0d=-0xc4e+-0x1944+0x2593*0x1;_0x345d0d<_0x1f07b6['length'];++_0x345d0d)_0x1f07b6[_0x345d0d]+=-0x233*0x5+-0x16cc+-0x21d7*-0x1;_0x219285+=0x2060+-0x106*-0xc+-0x476*0xa;}_0x44d4a4['vertices']=new ArrayBuffer(_0x5632d5['num_points']()*_0x219285);const _0x4a36a3=new Uint8Array(_0x44d4a4['vertices']);for(let _0x1cccc4=-0x2549+-0x1e19+-0x1676*-0x3;_0x1cccc4<_0x5632d5['num_attrib'+'utes']();++_0x1cccc4){const _0x34e566=_0x263cab[_0x1cccc4],_0x516f1c=_0x2b6d20(_0x34e566),_0x4bc550=_0x5632d5['num_points']()*_0x516f1c,_0x216156=_0x34778f['_malloc'](_0x4bc550);_0x415da2['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x5632d5,_0x34e566,_0x34e566['data_type'](),_0x4bc550,_0x216156);const _0xa002b=new Uint8Array(_0x34778f['HEAPU8']['buffer'],_0x216156,_0x4bc550);for(let _0x2511e3=-0x1c6f+0xc2d*0x3+-0x25*0x38;_0x2511e3<_0x5632d5['num_points']();++_0x2511e3)for(let _0x17f54d=0xeb9+-0x12c8+-0x1*-0x40f;_0x17f54d<_0x516f1c;++_0x17f54d)_0x4a36a3[_0x2511e3*_0x219285+_0x1f07b6[_0x1cccc4]+_0x17f54d]=_0xa002b[_0x2511e3*_0x516f1c+_0x17f54d];if(!_0x6fb70d&&_0x34e566['attribute_'+'type']()===0xd28+-0x1632*-0x1+-0x19*0x16a){const _0x2219ad=_0x5479b1(_0x51ae2a(_0xa002b,_0x34e566['data_type']()),_0x24aa60?new Uint16Array(_0x44d4a4['indices']):new Uint32Array(_0x44d4a4['indices']));for(let _0x5dc888=-0x1d30+-0x1*0x19c3+0x36f3;_0x5dc888<_0x5632d5['num_points']();++_0x5dc888)for(let _0x548cb0=-0x45+0xa6*0x27+-0x1905;_0x548cb0<-0x87*0x2+0x1a97+-0x57*0x4b;++_0x548cb0)_0x4a36a3[_0x5dc888*_0x219285+_0x21ddd9+_0x548cb0]=_0x2219ad[_0x5dc888*(0xcaf+-0xd06*-0x1+-0x19a9)+_0x548cb0];}_0x34778f['_free'](_0x216156);}return _0x34778f['destroy'](_0x5632d5),_0x34778f['destroy'](_0x415da2),_0x34778f['destroy'](_0xd66a38),_0x44d4a4;},_0x531c7b=_0x5627b2=>{const _0x5ebb4d=_0x400ab2(new Uint8Array(_0x5627b2['buffer']));self['postMessag'+'e']({'jobId':_0x5627b2['jobId'],'error':_0x5ebb4d['error'],'indices':_0x5ebb4d['indices'],'vertices':_0x5ebb4d['vertices'],'attributes':_0x5ebb4d['attributes']},[_0x5ebb4d['indices'],_0x5ebb4d['vertices']]['filter'](_0x5c1e5d=>_0x5c1e5d!=null));},_0x58ee80=[];self['onmessage']=_0x2f4d6b=>{const _0x5442b7=_0x2f4d6b['data'];switch(_0x5442b7['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x25dce8,_0x258c96)=>(WebAssembly['instantiat'+'e'](_0x5442b7['module'],_0x25dce8)['then'](_0x323271=>_0x258c96(_0x323271))['catch'](_0x43f845=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x43f845)),{})})['then'](_0x3c38fe=>{_0x34778f=_0x3c38fe,_0x58ee80['forEach'](_0x6e241f=>_0x531c7b(_0x6e241f));});break;case'decodeMesh':_0x34778f?_0x531c7b(_0x5442b7):_0x58ee80['push'](_0x5442b7);break;}};}const Dg=0x6*-0x187+-0x1*0x136b+-0x4*-0x726;class JO{constructor(){this['workers']=[[],[],[]],this['jobId']=0x2588*-0x1+0x2325+-0x2f*-0xd,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x1e9f78,_0x18371c)=>{_0x1e9f78['postMessag'+'e']({'type':'decodeMesh','jobId':_0x18371c['jobId'],'buffer':_0x18371c['buffer']},[_0x18371c['buffer']]);};}['init'](_0x1c4904){for(_0x1c4904['forEach'](_0x4e94a4=>{_0x4e94a4['addEventLi'+'stener']('message',_0x2390d7=>{const _0x35f756=_0x2390d7['data'],_0x2195b4=this['jobCallbac'+'ks']['get'](_0x35f756['jobId']);if(_0x2195b4&&_0x2195b4(_0x35f756['error'],{'indices':_0x35f756['indices'],'vertices':_0x35f756['vertices'],'attributes':_0x35f756['attributes']}),this['jobCallbac'+'ks']['delete'](_0x35f756['jobId']),this['jobQueue']['length']>-0x74e*-0x3+-0x19c3+-0x3d9*-0x1){const _0x1951c4=this['jobQueue']['shift']();this['run'](_0x4e94a4,_0x1951c4);}else{const _0x34cbeb=this['workers'][0x2f*-0x90+-0x12e3+0x2d55]['indexOf'](_0x4e94a4);if(_0x34cbeb!==-(0x2*-0xee7+-0x167c+0x344b))this['workers'][-0x1345*0x2+-0xa6*0x29+0x4122]['splice'](_0x34cbeb,-0x1*0x697+-0x1f59+-0x373*-0xb),this['workers'][-0x3*-0x9a8+-0x11d7+-0xb20]['push'](_0x4e94a4);else{const _0x4e5788=this['workers'][0x2*0xf92+0x1156+-0x3079]['indexOf'](_0x4e94a4);_0x4e5788!==-(-0xdc8+-0xf*-0x298+-0x191f)?(this['workers'][-0x10bb*-0x2+-0x1fbc+-0x1b9]['splice'](_0x4e5788,0x259f+-0xeb1+-0x16ed),this['workers'][0x20aa+-0x7*-0x2a6+-0x1d*0x1c4]['push'](_0x4e94a4)):M['error']('logical\x20er'+'ror');}}});}),this['workers'][0x3*-0x626+0x1bec+-0x97a]=_0x1c4904;this['jobQueue']['length']&&(this['workers'][-0x3fb*0x2+-0x6*-0x416+-0x108e]['length']||this['workers'][0x1cbe+-0x1463+0x85a*-0x1]['length']);){const _0x5ef269=this['jobQueue']['shift']();if(this['workers'][0xce*-0x27+0x8*0x4e0+-0x186*0x5]['length']>-0x2099+0x85b+-0x2*-0xc1f){const _0x392f2a=this['workers'][0x1a73*-0x1+-0xde2+-0x23*-0x127]['shift']();this['workers'][0x26bf+0x723+-0x2de1]['push'](_0x392f2a),this['run'](_0x392f2a,_0x5ef269);}else{const _0x515216=this['workers'][0x2*-0x61f+0x25e8+-0x19a9]['shift']();this['workers'][-0x1*0x835+-0x129b*0x1+0x1ad2]['push'](_0x515216),this['run'](_0x515216,_0x5ef269);}}}['enqueueJob'](_0x10c220,_0x260388){const _0x17ddc2={'jobId':this['jobId']++,'buffer':_0x10c220};if(this['jobCallbac'+'ks']['set'](_0x17ddc2['jobId'],_0x260388),this['workers'][-0x24a*-0x2+-0x263*-0x5+-0x1083]['length']>0x17a*-0xd+0x15*-0xe9+0x264f){const _0x4e0e71=this['workers'][0x2277+0x1*0x2221+-0x6dc*0xa]['shift']();this['workers'][-0x4b3+-0x1a6b+0x1f1f]['push'](_0x4e0e71),this['run'](_0x4e0e71,_0x17ddc2);}else{if(this['workers'][0xf*0xb1+0x128b*-0x1+0x82d]['length']>-0x1fb+-0x1400+-0x11*-0x14b){const _0xdb821f=this['workers'][0x1b46+0x1*-0x142c+-0x719]['shift']();this['workers'][-0x1c41+0x145+0x1afe]['push'](_0xdb821f),this['run'](_0xdb821f,_0x17ddc2);}else this['jobQueue']['push'](_0x17ddc2);}}}const eF=_0x1265cf=>new Promise((_0x4128bd,_0x3150d6)=>{const _0x53d5f4={'cache':!(0x69*0x35+-0x1df9*-0x1+-0x33b6),'responseType':'text','retry':Dg>0x11da+0x1fd1+-0x5*0x9ef,'maxRetries':Dg};nt['get'](_0x1265cf,_0x53d5f4,(_0x10165d,_0x53ac39)=>{_0x10165d?_0x3150d6(_0x10165d):_0x4128bd(_0x53ac39);});}),tF=_0x1ae750=>{const _0x4b1252=()=>fetch(_0x1ae750)['then'](_0x39f4ce=>_0x39f4ce['arrayBuffe'+'r']())['then'](_0x30568d=>WebAssembly['compile'](_0x30568d)),_0x49993f=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x1ae750))['catch'](_0x1f6f8c=>(M['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x1ae750+'\x20('+_0x1f6f8c+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x4b1252()));return WebAssembly['compileStr'+'eaming']?_0x49993f():_0x4b1252();},Lg=0x4*-0x97+-0x1cb*0x1+0x428;let Eh;const sF=_0xfa70e1=>{if(Eh)return!(-0x873+0x2228+-0x1*0x19b5);if(!_0xfa70e1){const _0x421189=sS['getConfig']('DracoDecod'+'erModule');_0x421189?_0xfa70e1={'jsUrl':_0x421189['glueUrl'],'wasmUrl':_0x421189['wasmUrl'],'numWorkers':_0x421189['numWorkers']}:_0xfa70e1={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':Lg};}return!_0xfa70e1['jsUrl']||!_0xfa70e1['wasmUrl']?!(-0x241b*0x1+0x88a*-0x1+-0x7f*-0x5a):(Eh=new JO(),Promise['all']([eF(_0xfa70e1['jsUrl']),tF(_0xfa70e1['wasmUrl'])])['then'](([_0xeacb0d,_0x2fe2c2])=>{const _0x2af003=['/*\x20draco\x20*'+'/',_0xeacb0d,'/*\x20worker\x20'+'*/','(\x0a'+QO['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x18725d=new Blob([_0x2af003],{'type':'applicatio'+'n/javascri'+'pt'}),_0x22dec5=URL['createObje'+'ctURL'](_0x18725d),_0x387167=Math['max'](0x61*0x44+-0x21*0xe5+0x3c2,Math['min'](-0x19*0xef+-0x21e8+-0x11*-0x35f,_0xfa70e1['numWorkers']||Lg)),_0x40624c=[];for(let _0x104f0c=-0x56d+0xf6*-0x1b+0x1f5f;_0x104f0c<_0x387167;++_0x104f0c){const _0x1fb5ba=new Worker(_0x22dec5);_0x1fb5ba['postMessag'+'e']({'type':'init','module':_0x2fe2c2}),_0x40624c['push'](_0x1fb5ba);}Eh['init'](_0x40624c);}),!(0x4*0x50d+0x7d*0x31+-0x2c21));},iF=(_0x4a8244,_0x2b6df5)=>sF()?(Eh['enqueueJob'](_0x4a8244,_0x2b6df5),!(-0x3*0x66c+-0x916+0x17e*0x13)):!(0x78b*-0x2+0x1d2c*0x1+-0x5*0x2d1);class rF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x104f02=>{_0x104f02['meshes']=null;});}}const Lv=_0x4a0d5f=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x4a0d5f),aF=_0x525475=>_0x525475['substring'](_0x525475['indexOf'](':')+(-0x3d*-0x6d+0x1e07+0x3d*-0xeb),_0x525475['indexOf'](';')),jo=_0x38fb8e=>{switch(_0x38fb8e){case'SCALAR':return-0x1dd0+0x1e91+0x4*-0x30;case'VEC2':return 0x135e*0x1+-0x43*0x21+-0xb7*0xf;case'VEC3':return 0x2456+0x1*-0x14de+-0xf75;case'VEC4':return 0x2285+0x2*0x32f+-0x28df;case'MAT2':return-0x4*0x97f+0x23e+-0xc7*-0x2e;case'MAT3':return-0xca0+0x12db+-0x632;case'MAT4':return 0x11a9*0x1+0x207f+-0x3218;default:return-0x20e7*-0x1+0x1439+-0x351d;}},td=_0xd05999=>{switch(_0xd05999){case-0x35*0x37+-0x2596+0x1*0x44f9:return Nc;case 0x1*0x565+0x1*-0x2345+-0x71*-0x71:return Xr;case 0x1*0x1d42+0x1b1b+-0x1*0x245b:return kc;case 0x7*0xdb+-0x257d+0x3383:return rl;case 0x1*0x19ef+-0x25f*0xa+0x11cb:return MS;case-0x3*-0xabc+0xdf1*0x1+-0x1a20:return Do;case 0x145+-0x1e94+0xad*0x49:return Be;default:return-0x14*0x169+-0x1*0xd33+0x2967;}},nF=_0x2eb983=>{switch(_0x2eb983){case-0x11*0x1d6+0x1e4*0x2+0x1*0x2f6e:return-0x1*0x1f51+-0x10dd+0x302f;case 0x12e*0x9+-0x1ed3+0x2836:return 0xc33*0x1+0x11b*0x3+-0xf83;case-0x50e+0x19c7*0x1+0xb7*-0x1:return 0x9*0x22f+-0x1*-0x1934+-0x81*0x59;case-0x5e6*-0x6+0x27b5+-0x3716:return-0x3*-0x2c9+0x177b+-0x1fd4;case-0x1573+-0x12d2+0x3c49:return 0x1d7+0x700+-0x8d3;case 0xc42+-0x39e*-0xb+-0x2007:return-0xbef*0x3+-0x2562+0x4933;case 0xc1e*-0x3+-0x3d5*-0x6+0x2162:return-0x16b8+0x2602+-0xf46;default:return 0x1394+0xf64+0x5d4*-0x6;}},oF=_0x45b280=>{switch(_0x45b280){case-0x6b4+0x1777*-0x1+0x322b:return Int8Array;case 0x189e+0x943*-0x1+0x4a6:return Uint8Array;case 0xbb8+-0x6d0+0xf1a:return Int16Array;case 0xdd7+0x26f9+0x20cd*-0x1:return Uint16Array;case 0x2*-0xa97+-0x1*-0x87+0x28ab:return Int32Array;case-0x20b1*-0x1+-0x1*-0x611+0x29*-0x75:return Uint32Array;case-0x1c68+0xc11*0x3+0xc3b*0x1:return Float32Array;default:return null;}},oc={'POSITION':Pe,'NORMAL':cs,'TANGENT':ci,'COLOR_0':kt,'JOINTS_0':ns,'WEIGHTS_0':li,'TEXCOORD_0':Yt,'TEXCOORD_1':da,'TEXCOORD_2':Qo,'TEXCOORD_3':Jo,'TEXCOORD_4':el,'TEXCOORD_5':tl,'TEXCOORD_6':sl,'TEXCOORD_7':il},Rg={[Pe]:0x9db*-0x3+-0x15bd+0x334e*0x1,[cs]:-0xa0*0x14+0x11c5*-0x2+0x300b,[ci]:-0xb2d*-0x1+-0x700+-0x42b,[kt]:-0x3b*-0x2f+-0x2f4+-0x7de,[ns]:-0x3cc+-0xf1e+-0x2*-0x977,[li]:0x12b0+0x8d6+0x92b*-0x3,[Yt]:0x2*-0xeb9+-0xb19+0x2891*0x1,[da]:0x2c*-0xc1+-0x149*0x1+0x2*0x113e,[Qo]:0x16a5+-0x5*-0x515+0x3*-0x1002,[Jo]:0x5e+0x16*0x10+-0x1*0x1b5,[el]:0x197b+-0xb1b*0x1+0x72b*-0x2,[tl]:0x1db9+-0x1*0x1327+-0xa87,[sl]:-0xc40+0x821*0x1+0x42b,[il]:0x1add+-0x190+-0xca0*0x2},lF=_0x582f5c=>{switch(_0x582f5c){case Nc:return _0x262873=>Math['max'](_0x262873/(0x1525+0x3d*0x17+-0x1a21),-(-0x105a+0xf49+0x112));case Xr:return _0x30b180=>_0x30b180/(0x1794+-0x1387*0x2+0x1079*0x1);case kc:return _0x3f4423=>Math['max'](_0x3f4423/(-0x42ef+0x7d89*-0x1+-0x1*-0x14077),-(-0x21a7*-0x1+-0x1be3+-0x5c3));case rl:return _0x595bf1=>_0x595bf1/(0x1677f+-0x18299*0x1+0x211*0x89);default:return _0x1b09bb=>_0x1b09bb;}},lu=(_0x2ba39d,_0x40e082,_0x4ec596)=>{const _0xe76546=lF(_0x4ec596),_0x3449a4=_0x40e082['length'];for(let _0x1e11d4=-0xd*-0xd7+-0x1f03+-0xa0c*-0x2;_0x1e11d4<_0x3449a4;++_0x1e11d4)_0x2ba39d[_0x1e11d4]=_0xe76546(_0x40e082[_0x1e11d4]);return _0x2ba39d;},Qr=(_0x283cc8,_0x48a73a,_0x1ea628=!(-0x3e*-0x58+-0x9da+0xb75*-0x1))=>{const _0x431ac1=jo(_0x283cc8['type']),_0x40621f=oF(_0x283cc8['componentT'+'ype']);if(!_0x40621f)return null;let _0x3e6439;if(_0x283cc8['sparse']){const _0x2ea693=_0x283cc8['sparse'],_0xb436c5={'count':_0x2ea693['count'],'type':'SCALAR'},_0x552310=Qr(Object['assign'](_0xb436c5,_0x2ea693['indices']),_0x48a73a,!(0x1*0x1e1f+0xf6f+-0x22*0x157)),_0x55ac24={'count':_0x2ea693['count'],'type':_0x283cc8['type'],'componentType':_0x283cc8['componentT'+'ype']},_0x159fa6=Qr(Object['assign'](_0x55ac24,_0x2ea693['values']),_0x48a73a,!(0x2543+0x661+-0x2ba4));if(_0x283cc8['hasOwnProp'+'erty']('bufferView')){const _0x1da06b={'bufferView':_0x283cc8['bufferView'],'byteOffset':_0x283cc8['byteOffset'],'componentType':_0x283cc8['componentT'+'ype'],'count':_0x283cc8['count'],'type':_0x283cc8['type']};_0x3e6439=Qr(_0x1da06b,_0x48a73a,!(0x608*0x4+-0x3*-0xb8d+-0x3ac7))['slice']();}else _0x3e6439=new _0x40621f(_0x283cc8['count']*_0x431ac1);for(let _0x189486=0x1*0x1ed+0x1edd*0x1+-0x20ca;_0x189486<_0x2ea693['count'];++_0x189486){const _0x3a7768=_0x552310[_0x189486];for(let _0xb604a0=0x69*0x5+-0x192b+0x10d*0x16;_0xb604a0<_0x431ac1;++_0xb604a0)_0x3e6439[_0x3a7768*_0x431ac1+_0xb604a0]=_0x159fa6[_0x189486*_0x431ac1+_0xb604a0];}}else{if(_0x283cc8['hasOwnProp'+'erty']('bufferView')){const _0x5743b6=_0x48a73a[_0x283cc8['bufferView']];if(_0x1ea628&&_0x5743b6['hasOwnProp'+'erty']('byteStride')){const _0x9f01eb=_0x431ac1*_0x40621f['BYTES_PER_'+'ELEMENT'],_0x1b7c54=new ArrayBuffer(_0x283cc8['count']*_0x9f01eb),_0x263973=new Uint8Array(_0x1b7c54);let _0x7d4717=-0x1*-0x238f+0x1*-0xb08+-0x1887;for(let _0x2078c4=-0x80d+0x23*-0x11a+0x2e9b;_0x2078c4<_0x283cc8['count'];++_0x2078c4){let _0x1a8ecc=(_0x283cc8['byteOffset']||0x346*-0x1+0xe12+-0xacc)+_0x2078c4*_0x5743b6['byteStride'];for(let _0x488d1b=-0x4dc*-0x1+0x270+0x2*-0x3a6;_0x488d1b<_0x9f01eb;++_0x488d1b)_0x263973[_0x7d4717++]=_0x5743b6[_0x1a8ecc++];}_0x3e6439=new _0x40621f(_0x1b7c54);}else _0x3e6439=new _0x40621f(_0x5743b6['buffer'],_0x5743b6['byteOffset']+(_0x283cc8['byteOffset']||0x20e*0xb+0x1d0c+-0x33a6),_0x283cc8['count']*_0x431ac1);}else _0x3e6439=new _0x40621f(_0x283cc8['count']*_0x431ac1);}return _0x3e6439;},un=(_0x5cfbc9,_0xbf4ba7)=>{const _0x3b7ec4=Qr(_0x5cfbc9,_0xbf4ba7,!(0x19b1+0x317*-0x5+-0xa3e));if(_0x3b7ec4 instanceof Float32Array||!_0x5cfbc9['normalized'])return _0x3b7ec4;const _0x9ddce6=new Float32Array(_0x3b7ec4['length']);return lu(_0x9ddce6,_0x3b7ec4,td(_0x5cfbc9['componentT'+'ype'])),_0x9ddce6;},hu=_0x2b0916=>{let _0x5f54d7=_0x2b0916['min'],_0x1fa356=_0x2b0916['max'];if(!_0x5f54d7||!_0x1fa356)return null;if(_0x2b0916['normalized']){const _0x45c248=td(_0x2b0916['componentT'+'ype']);_0x5f54d7=lu([],_0x5f54d7,_0x45c248),_0x1fa356=lu([],_0x1fa356,_0x45c248);}return new Ie(new I((_0x1fa356[0xa9d+0x8d*0x11+-0x13fa*0x1]+_0x5f54d7[0x2142+-0x45*0x25+-0x7c3*0x3])*(0x212f+-0x1*0x262d+0x4fe+0.5),(_0x1fa356[-0x1265+-0x1cc4+0x2f2a]+_0x5f54d7[-0x1*0x1223+0x1d29+-0x1f*0x5b])*(-0x67*0x53+-0x1a10+-0x1eb*-0x1f+0.5),(_0x1fa356[-0x200e+-0xbdd+0x2bed]+_0x5f54d7[0x5*0x9f+0x13e0+0x16f9*-0x1])*(0x97*0x3+0x22a*0x10+0x34f*-0xb+0.5)),new I((_0x1fa356[0x69d+-0x569+-0x134]-_0x5f54d7[-0x5*-0x3f9+0x447*0x7+-0x31ce])*(-0x26b*0x2+-0x1670*0x1+0x2*0xda3+0.5),(_0x1fa356[0x520+0x3*0x4a9+-0xf*0x146]-_0x5f54d7[-0xb1+-0x2391+0x2443])*(-0x25c0+-0x2597*-0x1+0x29+0.5),(_0x1fa356[0x1008+0x16*-0x11b+0x84c]-_0x5f54d7[-0x1ab2+0x1112+-0x19b*-0x6])*(0x128e+0x224+-0x14b2+0.5)));},Rv=_0x2e8c7e=>{if(!_0x2e8c7e['hasOwnProp'+'erty']('mode'))return zs;switch(_0x2e8c7e['mode']){case 0x13c5+-0x2a2+-0x1123:return Oc;case-0x15af+-0x9c*-0x22+0xf8:return Fc;case-0x1923+0xc42+0xce3:return wS;case 0x104c+-0x10c9*0x2+0x1149:return ES;case 0x1*-0xced+-0xc2a+0x1*0x191b:return zs;case-0x1239+0x23d*0x5+-0x5*-0x169:return cr;case-0x1062+0x1531+-0x4c9:return $r;default:return zs;}},hF=_0x186ed1=>{const _0x59203f=new Uint16Array(_0x186ed1);for(let _0x238836=-0x949*-0x4+0x99b+-0x2ebf;_0x238836<_0x186ed1;_0x238836++)_0x59203f[_0x238836]=_0x238836;return _0x59203f;},cF=(_0x411928,_0x538b1d)=>{const _0x50c945=_0x411928[Pe];if(!_0x50c945||_0x50c945['components']!==0x154d+-0x1b37+0x25*0x29)return;let _0x1901d8;if(_0x50c945['size']!==_0x50c945['stride']){const _0x4557b2=_0x50c945['stride']/po[_0x50c945['type']],_0x1eb5ec=new ln[_0x50c945['type']](_0x50c945['buffer'],_0x50c945['offset'],_0x50c945['count']*_0x4557b2);_0x1901d8=new ln[_0x50c945['type']](_0x50c945['count']*(0x1*-0x2094+-0xa88*-0x3+0xff));for(let _0x22e35e=-0x6*-0x56+0x19ac+-0x1bb0;_0x22e35e<_0x50c945['count'];++_0x22e35e)_0x1901d8[_0x22e35e*(-0xaea+-0x189f+0x2bc*0xd)+(-0x13*0xd+0x8*0x3ef+-0x1e81)]=_0x1eb5ec[_0x22e35e*_0x4557b2+(0x2*-0xbad+-0x1c73*0x1+0x95*0x59)],_0x1901d8[_0x22e35e*(-0x170b*-0x1+0x766+-0x1e6e)+(-0x2e*0xd9+0x1cdc+0xa23)]=_0x1eb5ec[_0x22e35e*_0x4557b2+(-0x1*0x18fd+-0x1b4c+0x344a)],_0x1901d8[_0x22e35e*(0x1924+0x789+0x20aa*-0x1)+(0x905+0x1*-0x3df+-0xbc*0x7)]=_0x1eb5ec[_0x22e35e*_0x4557b2+(0x5*-0x57d+-0x1a83*-0x1+-0x18*-0xa)];}else _0x1901d8=new ln[_0x50c945['type']](_0x50c945['buffer'],_0x50c945['offset'],_0x50c945['count']*(-0x1*-0x1fff+0x525*0x1+-0x2521));const _0x3f9ced=_0x50c945['count'];_0x538b1d||(_0x538b1d=hF(_0x3f9ced));const _0x2991e0=Uy(_0x1901d8,_0x538b1d),_0x38bd51=new Float32Array(_0x2991e0['length']);_0x38bd51['set'](_0x2991e0),_0x411928[cs]={'buffer':_0x38bd51['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x3f9ced,'components':0x3,'type':Be};},dF=_0x24fa75=>{const _0x5c9691=_0x5dfeba=>{const _0x1fa986=[];for(let _0x3dffcb=0x143f+0x1*0xf20+-0x235f;_0x3dffcb<_0x5dfeba['_levels']['length'];++_0x3dffcb){let _0x589105=[];if(_0x5dfeba['cubemap']){for(let _0x2c097c=0x1957+-0x1871*-0x1+-0x8*0x639;_0x2c097c<-0x185f+-0x245c+-0x67*-0x97;++_0x2c097c)_0x589105['push'](_0x5dfeba['_levels'][_0x3dffcb][_0x2c097c]);}else _0x589105=_0x5dfeba['_levels'][_0x3dffcb];_0x1fa986['push'](_0x589105);}return _0x1fa986;},_0x5cd3f2=new _e(_0x24fa75['device'],_0x24fa75);return _0x5cd3f2['_levels']=_0x5c9691(_0x24fa75),_0x5cd3f2;},fF=_0x2d908a=>{const _0x14ef2a=new me(_0x2d908a['name']+'_clone',_0x2d908a['type'],_0x2d908a['file'],_0x2d908a['data'],_0x2d908a['options']);return _0x14ef2a['loaded']=!(0x2494+-0x14a5+-0xfef*0x1),_0x14ef2a['resource']=dF(_0x2d908a['resource']),_0x2d908a['registry']['add'](_0x14ef2a),_0x14ef2a;},uF=(_0x3b6e58,_0x450f08)=>{const _0x243664=_0x450f08[Pe];if(!_0x243664)return null;const _0x18fe82=_0x243664['count'],_0x348e24=[];for(const _0x3ec60b in _0x450f08)if(_0x450f08['hasOwnProp'+'erty'](_0x3ec60b)){const _0x41ee77={'semantic':_0x3ec60b,'components':_0x450f08[_0x3ec60b]['components'],'type':_0x450f08[_0x3ec60b]['type'],'normalize':!!_0x450f08[_0x3ec60b]['normalize']};zt['isElementV'+'alid'](_0x3b6e58,_0x41ee77)||_0x41ee77['components']++,_0x348e24['push'](_0x41ee77);}_0x348e24['sort']((_0x6b889c,_0x4fc583)=>Rg[_0x6b889c['semantic']]-Rg[_0x4fc583['semantic']]);let _0x35880b,_0x7c430,_0x13be48,_0x1387a1,_0x40e18a,_0x2b3759;const _0x379d3f=new zt(_0x3b6e58,_0x348e24);let _0x2ff581=!(-0x1787+-0xa3*-0x2b+0x1d*-0x22);for(_0x35880b=-0x69e*0x5+0x17*0xa8+0x11fe*0x1;_0x35880b<_0x379d3f['elements']['length'];++_0x35880b)if(_0x40e18a=_0x379d3f['elements'][_0x35880b],_0x1387a1=_0x450f08[_0x40e18a['name']],_0x2b3759=_0x1387a1['offset']-_0x243664['offset'],_0x1387a1['buffer']!==_0x243664['buffer']||_0x1387a1['stride']!==_0x40e18a['stride']||_0x1387a1['size']!==_0x40e18a['size']||_0x2b3759!==_0x40e18a['offset']){_0x2ff581=!(0x21c8+-0x21d8+-0x11*-0x1);break;}const _0x47d748=new xs(_0x3b6e58,_0x379d3f,_0x18fe82),_0x3ada90=_0x47d748['lock'](),_0x494534=new Uint32Array(_0x3ada90);let _0x367768;if(_0x2ff581)_0x367768=new Uint32Array(_0x243664['buffer'],_0x243664['offset'],_0x18fe82*_0x47d748['format']['size']/(0x1d*0x13d+0x1a40+-0x1*0x3e25)),_0x494534['set'](_0x367768);else{let _0xc13f25,_0x4ee586;for(_0x35880b=0x7*0x1+0x221a+0x1*-0x2221;_0x35880b<_0x47d748['format']['elements']['length'];++_0x35880b){_0x40e18a=_0x47d748['format']['elements'][_0x35880b],_0xc13f25=_0x40e18a['stride']/(0x1cbe+-0xef0+-0xdca),_0x1387a1=_0x450f08[_0x40e18a['name']],_0x4ee586=_0x1387a1['stride']/(-0x145+-0xc7e+0xdc7),_0x367768=new Uint32Array(_0x1387a1['buffer'],_0x1387a1['offset'],(_0x1387a1['count']-(-0x2320+0xa47+-0x18da*-0x1))*_0x4ee586+(_0x1387a1['size']+(0x5*-0x16c+-0x1590+-0x1caf*-0x1))/(-0x653*-0x5+-0x2*0x1091+0x187));let _0x5df2f8=0x294+0x1ed8+-0x1f*0x114,_0x429233=_0x40e18a['offset']/(0x7c+0x71*0x2b+-0x1373);const _0x305b4d=Math['floor']((_0x1387a1['size']+(0xe99+-0xd8b+-0x10b))/(-0xde5+-0x1162+0x1f4b));for(_0x7c430=-0x2*0xae7+-0x22b0+-0x387e*-0x1;_0x7c430<_0x18fe82;++_0x7c430){for(_0x13be48=-0x8fe+0xd*-0x2ea+0x19*0x1e0;_0x13be48<_0x305b4d;++_0x13be48)_0x494534[_0x429233+_0x13be48]=_0x367768[_0x5df2f8+_0x13be48];_0x5df2f8+=_0x4ee586,_0x429233+=_0xc13f25;}}}return _0x47d748['unlock'](),_0x47d748;},mF=(_0x2b78b8,_0x46c9cb,_0x53ea78,_0x3197f4,_0xa23596,_0x32a1f4)=>{const _0x2793ab={},_0x52af30=[];for(const _0x40644c in _0x46c9cb)_0x46c9cb['hasOwnProp'+'erty'](_0x40644c)&&oc['hasOwnProp'+'erty'](_0x40644c)&&(_0x2793ab[_0x40644c]=_0x46c9cb[_0x40644c],_0x52af30['push'](_0x40644c+':'+_0x46c9cb[_0x40644c]));_0x52af30['sort']();const _0x1350e6=_0x52af30['join']();let _0x56737b=_0x32a1f4[_0x1350e6];if(!_0x56737b){const _0x109a6f={};for(const _0x2cc5b0 in _0x2793ab){const _0x164a8b=_0x3197f4[_0x46c9cb[_0x2cc5b0]],_0x3de01f=Qr(_0x164a8b,_0xa23596),_0x39654e=_0xa23596[_0x164a8b['bufferView']],_0x50cf0e=oc[_0x2cc5b0],_0x40c9e1=jo(_0x164a8b['type'])*nF(_0x164a8b['componentT'+'ype']),_0x5bb52b=_0x39654e&&_0x39654e['hasOwnProp'+'erty']('byteStride')?_0x39654e['byteStride']:_0x40c9e1;_0x109a6f[_0x50cf0e]={'buffer':_0x3de01f['buffer'],'size':_0x40c9e1,'offset':_0x3de01f['byteOffset'],'stride':_0x5bb52b,'count':_0x164a8b['count'],'components':jo(_0x164a8b['type']),'type':td(_0x164a8b['componentT'+'ype']),'normalize':_0x164a8b['normalized']};}_0x109a6f['hasOwnProp'+'erty'](cs)||cF(_0x109a6f,_0x53ea78),_0x56737b=uF(_0x2b78b8,_0x109a6f),_0x32a1f4[_0x1350e6]=_0x56737b;}return _0x56737b;},pF=(_0x3ac3df,_0x375c29,_0x1322b0,_0x13842b,_0x1a3666,_0x14c342)=>{let _0x38e539,_0x5b91c8,_0x426fe7;const _0x3d7d06=_0x375c29['joints'],_0x30409b=_0x3d7d06['length'],_0x544493=[];if(_0x375c29['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x3dd554=_0x375c29['inverseBin'+'dMatrices'],_0x1fac32=Qr(_0x1322b0[_0x3dd554],_0x13842b,!(-0x232c*0x1+0x359*-0x4+0x3090*0x1)),_0x2c549c=[];for(_0x38e539=0x53*-0x3e+-0xb76+0x1f90;_0x38e539<_0x30409b;_0x38e539++){for(_0x5b91c8=0x10aa+0x20*0x134+-0x372a;_0x5b91c8<0x1*-0x12cb+0xa85+0x856;_0x5b91c8++)_0x2c549c[_0x5b91c8]=_0x1fac32[_0x38e539*(0x16d*0x16+0x7a*0x2b+0x1e*-0x1ba)+_0x5b91c8];_0x426fe7=new te(),_0x426fe7['set'](_0x2c549c),_0x544493['push'](_0x426fe7);}}else{for(_0x38e539=0xc90*-0x1+0x13d*0xb+0x1*-0x10f;_0x38e539<_0x30409b;_0x38e539++)_0x426fe7=new te(),_0x544493['push'](_0x426fe7);}const _0x135da2=[];for(_0x38e539=-0x21c0+-0x185b+0x3a1b;_0x38e539<_0x30409b;_0x38e539++)_0x135da2[_0x38e539]=_0x1a3666[_0x3d7d06[_0x38e539]]['name'];const _0x198dba=_0x135da2['join']('#');let _0x5f4ea0=_0x14c342['get'](_0x198dba);return _0x5f4ea0||(_0x5f4ea0=new zy(_0x3ac3df,_0x544493,_0x135da2),_0x14c342['set'](_0x198dba,_0x5f4ea0)),_0x5f4ea0;},_F=(_0x10143f,_0x3be7ee,_0x1fd12,_0x46cc8c,_0x240b55,_0xb085d1,_0x153851)=>{var _0x2b58f7;const _0x2bac9c=new Ge(_0x10143f);_0x2bac9c['aabb']=hu(_0x1fd12[_0x3be7ee['attributes']['POSITION']]);const _0x72b1b5=[];for(const [_0x49a0ab,_0x2bbd8d]of Object['entries'](_0x3be7ee['attributes'])){const _0x382abb=_0x1fd12[_0x2bbd8d],_0x486006=oc[_0x49a0ab],_0x393d19=td(_0x382abb['componentT'+'ype']);_0x72b1b5['push']({'semantic':_0x486006,'components':jo(_0x382abb['type']),'type':_0x393d19,'normalize':_0x382abb['normalized']??(_0x486006===kt&&(_0x393d19===Xr||_0x393d19===rl))});}if(_0x153851['push'](new Promise((_0x14d663,_0x18a4fe)=>{const _0x317ca2=_0x3be7ee['extensions']['KHR_draco_'+'mesh_compr'+'ession'];iF(_0x46cc8c[_0x317ca2['bufferView']]['slice']()['buffer'],(_0x5d1e3a,_0x1edb53)=>{var _0x235183;if(_0x5d1e3a)console['log'](_0x5d1e3a),_0x18a4fe(_0x5d1e3a);else{const _0x341f13={};for(const [_0x32a690,_0x4076df]of Object['entries'](_0x317ca2['attributes']))_0x341f13[oc[_0x32a690]]=_0x1edb53['attributes']['indexOf'](_0x4076df);_0x72b1b5['sort']((_0x4f1dff,_0x5059c5)=>_0x341f13[_0x4f1dff['semantic']]-_0x341f13[_0x5059c5['semantic']]),(_0x235183=_0x3be7ee['attributes'])!=null&&_0x235183['NORMAL']||_0x72b1b5['splice'](-0x22d4+0x23ec+-0x117*0x1,0x40*0x7+0x1a93+-0x1c53,{'semantic':'NORMAL','components':0x3,'type':Be});const _0x404a83=new zt(_0x10143f,_0x72b1b5),_0x8663b4=_0x1edb53['vertices']['byteLength']/_0x404a83['size'],_0x2dae8f=_0x8663b4<=0x33*-0x31d+-0x5*-0x24cd+0xe6c5?zi:hr,_0xf82dde=_0x1edb53['indices']['byteLength']/(_0x8663b4<=-0x46b3+-0x42*-0x2be+-0x6*-0x1849?0x9f6+0x25f*0x9+0x1f4b*-0x1:-0xf2e*-0x2+0x62c+-0x2484);M['call'](()=>{_0x8663b4!==_0x1fd12[_0x3be7ee['attributes']['POSITION']]['count']&&M['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0xf82dde!==_0x1fd12[_0x3be7ee['indices']]['count']&&M['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x499c90=new xs(_0x10143f,_0x404a83,_0x8663b4,{'data':_0x1edb53['vertices']}),_0x479798=new dr(_0x10143f,_0x2dae8f,_0xf82dde,ls,_0x1edb53['indices']);_0x2bac9c['vertexBuff'+'er']=_0x499c90,_0x2bac9c['indexBuffe'+'r'][-0x1a92+0x211f*-0x1+0x3bb1]=_0x479798,_0x2bac9c['primitive'][-0x1ba8+0x1*-0x18c2+0x346a]['type']=Rv(_0x3be7ee),_0x2bac9c['primitive'][0x2252+-0x20ce+-0x184]['base']=0x142d+0x1*0x349+-0x1776,_0x2bac9c['primitive'][-0x1c52+0x2329+-0x6d7]['count']=_0x479798?_0xf82dde:_0x8663b4,_0x2bac9c['primitive'][0xf8*0x1b+-0x14a0+-0x1*0x588]['indexed']=!!_0x479798,_0x14d663();}});})),(_0x2b58f7=_0x3be7ee==null?void(0x1dcb+0xc5*-0x1a+-0x1*0x9c9):_0x3be7ee['extensions'])!=null&&_0x2b58f7['KHR_materi'+'als_varian'+'ts']){const _0x374560=_0x3be7ee['extensions']['KHR_materi'+'als_varian'+'ts'],_0x1ee6d0={};_0x374560['mappings']['forEach'](_0x1abb05=>{_0x1abb05['variants']['forEach'](_0x5c2203=>{_0x1ee6d0[_0x5c2203]=_0x1abb05['material'];});}),_0x240b55[_0x2bac9c['id']]=_0x1ee6d0;}return _0xb085d1[_0x2bac9c['id']]=_0x3be7ee['material'],_0x2bac9c;},gF=(_0x2288e5,_0x561c2a,_0x14eb9c,_0x3b7536,_0x3da021,_0x1ad8c8,_0x389ac2,_0xe09302,_0x16fe61)=>{const _0x5ceef4=[];return _0x561c2a['primitives']['forEach'](_0x2a8ed0=>{var _0x1cfa95;if((_0x1cfa95=_0x2a8ed0['extensions'])!=null&&_0x1cfa95['KHR_draco_'+'mesh_compr'+'ession'])_0x5ceef4['push'](_F(_0x2288e5,_0x2a8ed0,_0x14eb9c,_0x3b7536,_0x1ad8c8,_0x389ac2,_0x16fe61));else{let _0x1bd6e8=_0x2a8ed0['hasOwnProp'+'erty']('indices')?Qr(_0x14eb9c[_0x2a8ed0['indices']],_0x3b7536,!(0x2c1+-0xf86+0xcc5)):null;const _0xe8b031=mF(_0x2288e5,_0x2a8ed0['attributes'],_0x1bd6e8,_0x14eb9c,_0x3b7536,_0x3da021),_0x4305e7=Rv(_0x2a8ed0),_0x386db1=new Ge(_0x2288e5);if(_0x386db1['vertexBuff'+'er']=_0xe8b031,_0x386db1['primitive'][0x1*-0x2499+-0x649+-0xb*-0x3e6]['type']=_0x4305e7,_0x386db1['primitive'][-0x22f3+0x1409+0x775*0x2]['base']=0x2274+-0xdb7+-0x14bd*0x1,_0x386db1['primitive'][-0x409*0x7+-0x234e*0x1+0x3f8d]['indexed']=_0x1bd6e8!==null,_0x1bd6e8!==null){let _0x584e33;_0x1bd6e8 instanceof Uint8Array?_0x584e33=ff:_0x1bd6e8 instanceof Uint16Array?_0x584e33=zi:_0x584e33=hr,_0x584e33===ff&&_0x2288e5['isWebGPU']&&(_0x584e33=zi,_0x1bd6e8=new Uint16Array(_0x1bd6e8));const _0x2734c2=new dr(_0x2288e5,_0x584e33,_0x1bd6e8['length'],ls,_0x1bd6e8);_0x386db1['indexBuffe'+'r'][0xa89+0x229c+0x7f*-0x5b]=_0x2734c2,_0x386db1['primitive'][-0x1202+-0x1920+-0x1591*-0x2]['count']=_0x1bd6e8['length'];}else _0x386db1['primitive'][0xb82*0x2+0x1d0b+0x340f*-0x1]['count']=_0xe8b031['numVertice'+'s'];if(_0x2a8ed0['hasOwnProp'+'erty']('extensions')&&_0x2a8ed0['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x35943c=_0x2a8ed0['extensions']['KHR_materi'+'als_varian'+'ts'],_0x4cb116={};_0x35943c['mappings']['forEach'](_0x25f019=>{_0x25f019['variants']['forEach'](_0x500287=>{_0x4cb116[_0x500287]=_0x25f019['material'];});}),_0x1ad8c8[_0x386db1['id']]=_0x4cb116;}_0x389ac2[_0x386db1['id']]=_0x2a8ed0['material'];let _0x4030a2=_0x14eb9c[_0x2a8ed0['attributes']['POSITION']];if(_0x386db1['aabb']=hu(_0x4030a2),_0x2a8ed0['hasOwnProp'+'erty']('targets')){const _0x49e528=[];_0x2a8ed0['targets']['forEach']((_0x269d1f,_0x26746c)=>{const _0x13f9e4={};_0x269d1f['hasOwnProp'+'erty']('POSITION')&&(_0x4030a2=_0x14eb9c[_0x269d1f['POSITION']],_0x13f9e4['deltaPosit'+'ions']=un(_0x4030a2,_0x3b7536),_0x13f9e4['aabb']=hu(_0x4030a2)),_0x269d1f['hasOwnProp'+'erty']('NORMAL')&&(_0x4030a2=_0x14eb9c[_0x269d1f['NORMAL']],_0x13f9e4['deltaNorma'+'ls']=un(_0x4030a2,_0x3b7536)),_0x561c2a['hasOwnProp'+'erty']('extras')&&_0x561c2a['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x13f9e4['name']=_0x561c2a['extras']['targetName'+'s'][_0x26746c]:_0x13f9e4['name']=_0x26746c['toString'](0x88*0x8+-0x55b+0x125),_0x561c2a['hasOwnProp'+'erty']('weights')&&(_0x13f9e4['defaultWei'+'ght']=_0x561c2a['weights'][_0x26746c]),_0x13f9e4['preserveDa'+'ta']=_0xe09302['morphPrese'+'rveData'],_0x49e528['push'](new ed(_0x13f9e4));}),_0x386db1['morph']=new Ny(_0x49e528,_0x2288e5,{'preferHighPrecision':_0xe09302['morphPrefe'+'rHighPreci'+'sion']});}_0x5ceef4['push'](_0x386db1);}}),_0x5ceef4;},bt=(_0x2dfdaa,_0x3cb5d6,_0x20beb3)=>{var _0x4069d3;let _0x48c32b;const _0x803765=_0x2dfdaa['texCoord'];if(_0x803765){for(_0x48c32b=0x1aa4+0x1c9b+0x1*-0x373f;_0x48c32b<_0x20beb3['length'];++_0x48c32b)_0x3cb5d6[_0x20beb3[_0x48c32b]+'MapUv']=_0x803765;}const _0x3b4245=[-0x59e*0x2+0x71b+0x421*0x1,0x1686+-0x12e*-0x11+-0x2a94],_0x31de6d=[-0x20ab+0xcb9*0x3+-0x57f*0x1,-0x39*-0x44+0xe0a+-0x2a7*0xb],_0x34e8be=(_0x4069d3=_0x2dfdaa['extensions'])==null?void(0xadf+0x60d*-0x4+0x1*0xd55):_0x4069d3['KHR_textur'+'e_transfor'+'m'];if(_0x34e8be){const _0x4acb54=_0x34e8be['offset']||_0x3b4245,_0x3ec1db=_0x34e8be['scale']||_0x31de6d,_0x1bd526=_0x34e8be['rotation']?-_0x34e8be['rotation']*Y['RAD_TO_DEG']:-0x2bc+0x4cb+0x1f*-0x11,_0x303caa=new J(_0x3ec1db[0x1425+-0x2088+0xc63],_0x3ec1db[-0x6*0x4ff+-0x1aca+0x1*0x38c5]),_0x3a2ccd=new J(_0x4acb54[-0x3c7+0x1*-0x1afe+0x1*0x1ec5],0x7cf*0x1+0x1a27*-0x1+0x29f*0x7-_0x3ec1db[-0x1*-0x653+0x1155+-0x17a7]-_0x4acb54[-0x11f8+0x1a4a+0x1*-0x851]);for(_0x48c32b=0x1296+0x2*-0xc3a+-0x1*-0x5de;_0x48c32b<_0x20beb3['length'];++_0x48c32b)_0x3cb5d6[_0x20beb3[_0x48c32b]+'MapTiling']=_0x303caa,_0x3cb5d6[_0x20beb3[_0x48c32b]+'MapOffset']=_0x3a2ccd,_0x3cb5d6[_0x20beb3[_0x48c32b]+('MapRotatio'+'n')]=_0x1bd526;}},SF=(_0x517551,_0x8760e2,_0x58d2e8)=>{let _0x1b6050,_0x312779;if(_0x517551['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x1b6050=_0x517551['diffuseFac'+'tor'],_0x8760e2['diffuse']['set'](Math['pow'](_0x1b6050[0x1472+0xbc9+0x203b*-0x1],(0x176c*-0x1+0x186+0x15e7)/(-0xa6*0x5+-0x19e6+0x23e*0xd+0.20000000000000018)),Math['pow'](_0x1b6050[0x2620+0x2f1+-0x2910],(-0x2ec*-0x8+0x82e+-0xc5*0x29)/(-0xeff*-0x1+0xd2+-0xfcf+0.20000000000000018)),Math['pow'](_0x1b6050[-0x4*0x158+-0x46*0x12+-0x2*-0x527],(0x1c94+0x167d+0x2*-0x1988)/(0x18fb*0x1+0x18b0+-0x1*0x31a9+0.20000000000000018))),_0x8760e2['opacity']=_0x1b6050[0x1*-0x16ed+-0x1c74+0x4ac*0xb]):(_0x8760e2['diffuse']['set'](0x44*-0xa+0x1*0x1af2+-0x1849*0x1,0xfb*0x6+-0x123b+0xc5a,-0x111*-0x12+0x11f2+-0x2523),_0x8760e2['opacity']=0x1de2+-0x1da9*-0x1+-0x1dc5*0x2),_0x517551['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x306e01=_0x517551['diffuseTex'+'ture'];_0x312779=_0x58d2e8[_0x306e01['index']],_0x8760e2['diffuseMap']=_0x312779,_0x8760e2['diffuseMap'+'Channel']='rgb',_0x8760e2['opacityMap']=_0x312779,_0x8760e2['opacityMap'+'Channel']='a',bt(_0x306e01,_0x8760e2,['diffuse','opacity']);}if(_0x8760e2['useMetalne'+'ss']=!(-0x3b2*0x1+0x1*0x146+0x26d),_0x517551['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x1b6050=_0x517551['specularFa'+'ctor'],_0x8760e2['specular']['set'](Math['pow'](_0x1b6050[-0x16*0xc9+-0xbb7+0x29*0xb5],(-0x11f1+0x1a08+-0x816)/(-0x10*0x73+-0xc80+0x13b2+0.20000000000000018)),Math['pow'](_0x1b6050[0x2135+-0x295*-0x5+-0x2e1d],(-0x1c67+0x167*-0x8+-0x1*-0x27a0)/(0x1bfc+0x2*0x2f+-0x1c58+0.20000000000000018)),Math['pow'](_0x1b6050[-0x113d*0x2+-0x20f9*0x1+0x4375],(0xeb3+0x1f0b+-0x2dbd*0x1)/(0x394*0x3+-0xbf1*-0x3+-0x2bd*0x11+0.20000000000000018)))):_0x8760e2['specular']['set'](0x1981*-0x1+0x75a*-0x3+0x2f90,0x165c+-0x2*-0x6cd+-0x7*0x523,-0xae2+0x163d+-0xb5a),_0x517551['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x8760e2['gloss']=_0x517551['glossiness'+'Factor']:_0x8760e2['gloss']=0x2*0xb11+-0x1*0xe94+0x78d*-0x1,_0x517551['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x36149e=_0x517551['specularGl'+'ossinessTe'+'xture'];_0x8760e2['specularMa'+'p']=_0x8760e2['glossMap']=_0x58d2e8[_0x36149e['index']],_0x8760e2['specularMa'+'pChannel']='rgb',_0x8760e2['glossMapCh'+'annel']='a',bt(_0x36149e,_0x8760e2,['gloss','metalness']);}},yF=(_0x39646d,_0x3cea8e,_0x3c2966)=>{if(_0x39646d['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x3cea8e['clearCoat']=_0x39646d['clearcoatF'+'actor']*(0x17b+-0x2*0x1267+-0x1*-0x2353+0.25):_0x3cea8e['clearCoat']=-0x20a5+-0x1*-0x12b5+-0x1be*-0x8,_0x39646d['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x5fcdda=_0x39646d['clearcoatT'+'exture'];_0x3cea8e['clearCoatM'+'ap']=_0x3c2966[_0x5fcdda['index']],_0x3cea8e['clearCoatM'+'apChannel']='r',bt(_0x5fcdda,_0x3cea8e,['clearCoat']);}if(_0x39646d['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x3cea8e['clearCoatG'+'loss']=_0x39646d['clearcoatR'+'oughnessFa'+'ctor']:_0x3cea8e['clearCoatG'+'loss']=0x3*-0x423+-0x3*-0x647+-0x2*0x336,_0x39646d['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x2dede6=_0x39646d['clearcoatR'+'oughnessTe'+'xture'];_0x3cea8e['clearCoatG'+'lossMap']=_0x3c2966[_0x2dede6['index']],_0x3cea8e['clearCoatG'+'lossMapCha'+'nnel']='g',bt(_0x2dede6,_0x3cea8e,['clearCoatG'+'loss']);}if(_0x39646d['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x4f4a43=_0x39646d['clearcoatN'+'ormalTextu'+'re'];_0x3cea8e['clearCoatN'+'ormalMap']=_0x3c2966[_0x4f4a43['index']],bt(_0x4f4a43,_0x3cea8e,['clearCoatN'+'ormal']),_0x4f4a43['hasOwnProp'+'erty']('scale')?_0x3cea8e['clearCoatB'+'umpiness']=_0x4f4a43['scale']:_0x3cea8e['clearCoatB'+'umpiness']=-0x2*-0xc22+-0xb59+-0xcea;}_0x3cea8e['clearCoatG'+'lossInvert']=!(-0x8c5+-0x313+0x17b*0x8);},vF=(_0x11ce76,_0x2a13f1,_0x36a64c)=>{_0x2a13f1['useLightin'+'g']=!(-0x1*0x6a3+0x6cf+0x1*-0x2b),_0x2a13f1['emissive']['copy'](_0x2a13f1['diffuse']),_0x2a13f1['emissiveMa'+'p']=_0x2a13f1['diffuseMap'],_0x2a13f1['emissiveMa'+'pUv']=_0x2a13f1['diffuseMap'+'Uv'],_0x2a13f1['emissiveMa'+'pTiling']['copy'](_0x2a13f1['diffuseMap'+'Tiling']),_0x2a13f1['emissiveMa'+'pOffset']['copy'](_0x2a13f1['diffuseMap'+'Offset']),_0x2a13f1['emissiveMa'+'pRotation']=_0x2a13f1['diffuseMap'+'Rotation'],_0x2a13f1['emissiveMa'+'pChannel']=_0x2a13f1['diffuseMap'+'Channel'],_0x2a13f1['emissiveVe'+'rtexColor']=_0x2a13f1['diffuseVer'+'texColor'],_0x2a13f1['emissiveVe'+'rtexColorC'+'hannel']=_0x2a13f1['diffuseVer'+'texColorCh'+'annel'],_0x2a13f1['useLightin'+'g']=!(0x428+0x3e3+-0x80a),_0x2a13f1['useSkybox']=!(0x1*0xb7e+-0x1c05+0xb8*0x17),_0x2a13f1['diffuse']['set'](-0x210e+-0x1*0x7eb+0xa*0x419,0x2460+-0xd*-0x2d7+0x3b*-0x13e,0xce0+0x21*-0x1f+-0x8e0),_0x2a13f1['diffuseMap']=null,_0x2a13f1['diffuseVer'+'texColor']=!(-0x2*-0x9d5+0x1*0x88+-0x1431);},xF=(_0x1a4bba,_0x2b5991,_0x59f2e8)=>{if(_0x2b5991['useMetalne'+'ssSpecular'+'Color']=!(0x2676*0x1+-0x4*0x92f+0x22*-0xd),_0x1a4bba['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x2b5991['specularMa'+'p']=_0x59f2e8[_0x1a4bba['specularCo'+'lorTexture']['index']],_0x2b5991['specularMa'+'pChannel']='rgb',bt(_0x1a4bba['specularCo'+'lorTexture'],_0x2b5991,['specular'])),_0x1a4bba['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x12139f=_0x1a4bba['specularCo'+'lorFactor'];_0x2b5991['specular']['set'](Math['pow'](_0x12139f[0x1567+0x224f*-0x1+0xce8],(-0x8*0x344+-0x3e5*0x1+0x1e06)/(0x25c+0x1*0x1f2b+-0x2185+0.20000000000000018)),Math['pow'](_0x12139f[-0x22b*-0xf+-0x1d84+0x20*-0x18],(0x2*-0x6f0+0x1*0x19c7+-0xbe6)/(-0x1df0+0x13*-0x1c8+0x3fca+0.20000000000000018)),Math['pow'](_0x12139f[-0x757+-0x2bd*-0xb+-0x16c6],(0x16ff+0x1f4a+0x3648*-0x1)/(0x4b*0x6+-0x89*-0x2e+-0x1a5e+0.20000000000000018)));}else _0x2b5991['specular']['set'](0x1ff2+-0x3ce+-0x15*0x157,-0x11*-0x9d+0x1971+-0x23dd*0x1,0x9ab+0x8*-0x76+-0x2fd*0x2);_0x1a4bba['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x2b5991['specularit'+'yFactor']=_0x1a4bba['specularFa'+'ctor']:_0x2b5991['specularit'+'yFactor']=-0x1*-0x1e9a+0x25e6+0x16d5*-0x3,_0x1a4bba['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x2b5991['specularit'+'yFactorMap'+'Channel']='a',_0x2b5991['specularit'+'yFactorMap']=_0x59f2e8[_0x1a4bba['specularTe'+'xture']['index']],bt(_0x1a4bba['specularTe'+'xture'],_0x2b5991,['specularit'+'yFactor']));},TF=(_0xbf6e45,_0x32e0a8,_0x1d5ab5)=>{_0xbf6e45['hasOwnProp'+'erty']('ior')&&(_0x32e0a8['refraction'+'Index']=(-0x185d+0x1ded*0x1+0x58f*-0x1)/_0xbf6e45['ior']);},wF=(_0x49e216,_0x165441,_0x5c2785)=>{_0x49e216['hasOwnProp'+'erty']('dispersion')&&(_0x165441['dispersion']=_0x49e216['dispersion']);},EF=(_0x569f4d,_0x2cd56e,_0x15bae7)=>{_0x2cd56e['blendType']=Gs,_0x2cd56e['useDynamic'+'Refraction']=!(0xda3+-0x13*-0x133+-0x246c),_0x569f4d['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x2cd56e['refraction']=_0x569f4d['transmissi'+'onFactor']),_0x569f4d['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x2cd56e['refraction'+'MapChannel']='r',_0x2cd56e['refraction'+'Map']=_0x15bae7[_0x569f4d['transmissi'+'onTexture']['index']],bt(_0x569f4d['transmissi'+'onTexture'],_0x2cd56e,['refraction']));},AF=(_0x406532,_0x5e76db,_0x5c0eb3)=>{if(_0x5e76db['useSheen']=!(-0x188a+-0x193e+0x31c8),_0x406532['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x3077cc=_0x406532['sheenColor'+'Factor'];_0x5e76db['sheen']['set'](Math['pow'](_0x3077cc[0x130f*0x1+-0x3f*0x1f+0x5b7*-0x2],(-0x8e2+0x1*-0x17ff+0x20e2)/(-0x74e+0x1*-0xab5+0x1205+0.20000000000000018)),Math['pow'](_0x3077cc[0xde6*0x1+0x6d7*-0x1+-0x70e],(-0x37*0x25+0x790+0x64)/(-0xd67+-0xf44+0x1cad+0.20000000000000018)),Math['pow'](_0x3077cc[-0xdf*0x13+0x1eaa+0x9d*-0x17],(-0x2483+-0x2c9+0x274d)/(-0x1*-0x1382+0x1bf*-0xd+-0x75*-0x7+0.20000000000000018)));}else _0x5e76db['sheen']['set'](0x33*-0xc1+-0x225f+0x48d3,0x1*0x4cb+-0x2*0x618+-0x1*-0x766,0xe*0x1f6+0x1365*-0x1+-0x80e);_0x406532['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x5e76db['sheenMap']=_0x5c0eb3[_0x406532['sheenColor'+'Texture']['index']],bt(_0x406532['sheenColor'+'Texture'],_0x5e76db,['sheen'])),_0x5e76db['sheenGloss']=_0x406532['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x406532['sheenRough'+'nessFactor']:-0x581*0x1+0x4*0x71+0x3bd,_0x406532['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x5e76db['sheenGloss'+'Map']=_0x5c0eb3[_0x406532['sheenRough'+'nessTextur'+'e']['index']],_0x5e76db['sheenGloss'+'MapChannel']='a',bt(_0x406532['sheenRough'+'nessTextur'+'e'],_0x5e76db,['sheenGloss'])),_0x5e76db['sheenGloss'+'Invert']=!(0xbcb+-0x16e3+0x5*0x238);},bF=(_0x5e6a10,_0xfc76a8,_0x6ee038)=>{if(_0xfc76a8['blendType']=Gs,_0xfc76a8['useDynamic'+'Refraction']=!(0x3*-0x96b+-0x1*-0xa3b+0x1206),_0x5e6a10['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0xfc76a8['thickness']=_0x5e6a10['thicknessF'+'actor']),_0x5e6a10['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0xfc76a8['thicknessM'+'ap']=_0x6ee038[_0x5e6a10['thicknessT'+'exture']['index']],_0xfc76a8['thicknessM'+'apChannel']='g',bt(_0x5e6a10['thicknessT'+'exture'],_0xfc76a8,['thickness'])),_0x5e6a10['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0xfc76a8['attenuatio'+'nDistance']=_0x5e6a10['attenuatio'+'nDistance']),_0x5e6a10['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x5011eb=_0x5e6a10['attenuatio'+'nColor'];_0xfc76a8['attenuatio'+'n']['set'](Math['pow'](_0x5011eb[0xeae+0x1094+0x2*-0xfa1],(0x1*-0x1cb1+-0x10fd+0x2daf)/(0x125e+-0x938+-0x924+0.20000000000000018)),Math['pow'](_0x5011eb[0x2*0xac7+0x493+-0x1a20],(-0x1*-0x117a+-0x13b6+0x1*0x23d)/(-0x1be+0x180d+-0x207*0xb+0.20000000000000018)),Math['pow'](_0x5011eb[-0x766+0x127a+-0xb12],(0x1734+0xb7*-0x18+0xd*-0x77)/(-0x41a+-0x2*0x464+0xce4+0.20000000000000018)));}},CF=(_0x548bbb,_0x48b202,_0x50b91d)=>{_0x548bbb['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x48b202['emissiveIn'+'tensity']=_0x548bbb['emissiveSt'+'rength']);},PF=(_0x3eafd5,_0x101e36,_0x1b82db)=>{_0x101e36['useIridesc'+'ence']=!(0x959*-0x1+-0x191+0xaea),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x101e36['iridescenc'+'e']=_0x3eafd5['iridescenc'+'eFactor']),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x101e36['iridescenc'+'eMapChanne'+'l']='r',_0x101e36['iridescenc'+'eMap']=_0x1b82db[_0x3eafd5['iridescenc'+'eTexture']['index']],bt(_0x3eafd5['iridescenc'+'eTexture'],_0x101e36,['iridescenc'+'e'])),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x101e36['iridescenc'+'eRefractio'+'nIndex']=_0x3eafd5['iridescenc'+'eIor']),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x101e36['iridescenc'+'eThickness'+'Min']=_0x3eafd5['iridescenc'+'eThickness'+'Minimum']),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x101e36['iridescenc'+'eThickness'+'Max']=_0x3eafd5['iridescenc'+'eThickness'+'Maximum']),_0x3eafd5['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x101e36['iridescenc'+'eThickness'+'MapChannel']='g',_0x101e36['iridescenc'+'eThickness'+'Map']=_0x1b82db[_0x3eafd5['iridescenc'+'eThickness'+'Texture']['index']],bt(_0x3eafd5['iridescenc'+'eThickness'+'Texture'],_0x101e36,['iridescenc'+'eThickness']));},MF=(_0x87649a,_0x450547,_0x42d647)=>{if(_0x450547['enableGGXS'+'pecular']=!(-0x31a+0x3*0xa1c+-0x1b3a),_0x87649a['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x450547['anisotropy'+'Intensity']=_0x87649a['anisotropy'+'Strength']:_0x450547['anisotropy'+'Intensity']=-0x715+0xd78*0x1+-0x663,_0x87649a['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x1c84e5=_0x87649a['anisotropy'+'Texture'];_0x450547['anisotropy'+'Map']=_0x42d647[_0x1c84e5['index']],bt(_0x1c84e5,_0x450547,['anisotropy']);}_0x87649a['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x450547['anisotropy'+'Rotation']=_0x87649a['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x450547['anisotropy'+'Rotation']=-0x138f+0x5f0+0xd9f;},Ov=(_0x4f3c2f,_0x2b2521)=>{const _0x3f2c41=new ws();_0x4f3c2f['hasOwnProp'+'erty']('name')&&(_0x3f2c41['name']=_0x4f3c2f['name']),_0x3f2c41['occludeSpe'+'cular']=Kc,_0x3f2c41['diffuseVer'+'texColor']=!(0x86+-0xcba+0xc34),_0x3f2c41['specularTi'+'nt']=!(0x1082+-0x255a+0x14d8),_0x3f2c41['specularVe'+'rtexColor']=!(-0x3c*-0x47+0xb00+-0x1ba4),_0x3f2c41['specular']['set'](0x455*0x5+-0x103c+-0x2b6*0x2,0x80d+0xc44+-0x68*0x32,0x107e*-0x2+-0x95d+0x2a5a),_0x3f2c41['gloss']=0x1472+-0xc*-0x8+0x49*-0x49,_0x3f2c41['glossInver'+'t']=!(-0x19e0+-0x1bf6+0x35d6),_0x3f2c41['useMetalne'+'ss']=!(0x94*0x16+-0x3*0xa7b+0x1*0x12b9);let _0x2e6e36,_0x4d4026;if(_0x4f3c2f['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x1c89c4=_0x4f3c2f['pbrMetalli'+'cRoughness'];if(_0x1c89c4['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x2e6e36=_0x1c89c4['baseColorF'+'actor'],_0x3f2c41['diffuse']['set'](Math['pow'](_0x2e6e36[-0x4be*0x4+-0x3cb*-0x1+0xf2d],(-0x1baf*0x1+0x5cc*0x2+0x1018)/(-0xf1e+0xd8a+0x196+0.20000000000000018)),Math['pow'](_0x2e6e36[-0x1331+0x23d1*0x1+0xb9*-0x17],(0x9ac*-0x4+0x2c6*-0x1+0x2977)/(-0x134d+0x157b+0x8b*-0x4+0.20000000000000018)),Math['pow'](_0x2e6e36[0x605+-0x7cf*-0x5+-0x2d0e],(0x1568+-0x1cc5+-0x75e*-0x1)/(-0x8f0+-0xe82*-0x1+-0x590+0.20000000000000018))),_0x3f2c41['opacity']=_0x2e6e36[-0x2637+-0xa43*-0x2+0x11b4]),_0x1c89c4['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x21402a=_0x1c89c4['baseColorT'+'exture'];_0x4d4026=_0x2b2521[_0x21402a['index']],_0x3f2c41['diffuseMap']=_0x4d4026,_0x3f2c41['diffuseMap'+'Channel']='rgb',_0x3f2c41['opacityMap']=_0x4d4026,_0x3f2c41['opacityMap'+'Channel']='a',bt(_0x21402a,_0x3f2c41,['diffuse','opacity']);}if(_0x1c89c4['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x3f2c41['metalness']=_0x1c89c4['metallicFa'+'ctor']),_0x1c89c4['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x3f2c41['gloss']=_0x1c89c4['roughnessF'+'actor']),_0x1c89c4['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x3b418d=_0x1c89c4['metallicRo'+'ughnessTex'+'ture'];_0x3f2c41['metalnessM'+'ap']=_0x3f2c41['glossMap']=_0x2b2521[_0x3b418d['index']],_0x3f2c41['metalnessM'+'apChannel']='b',_0x3f2c41['glossMapCh'+'annel']='g',bt(_0x3b418d,_0x3f2c41,['gloss','metalness']);}}if(_0x4f3c2f['hasOwnProp'+'erty']('normalText'+'ure')){const _0x11e732=_0x4f3c2f['normalText'+'ure'];_0x3f2c41['normalMap']=_0x2b2521[_0x11e732['index']],bt(_0x11e732,_0x3f2c41,['normal']),_0x11e732['hasOwnProp'+'erty']('scale')&&(_0x3f2c41['bumpiness']=_0x11e732['scale']);}if(_0x4f3c2f['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x3207a4=_0x4f3c2f['occlusionT'+'exture'];_0x3f2c41['aoMap']=_0x2b2521[_0x3207a4['index']],_0x3f2c41['aoMapChann'+'el']='r',bt(_0x3207a4,_0x3f2c41,['ao']);}if(_0x4f3c2f['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x2e6e36=_0x4f3c2f['emissiveFa'+'ctor'],_0x3f2c41['emissive']['set'](Math['pow'](_0x2e6e36[0x13e9*-0x1+0x2*-0x3f1+0x1bcb],(0x1d87*0x1+-0x289+-0x8d*0x31)/(0x29d+0x1c9c+-0x1f37+0.20000000000000018)),Math['pow'](_0x2e6e36[0x1*0x1f71+0xa*-0xb9+-0x1836],(-0x1aba+0x1713+0x3a8)/(0x62b+0x9*0xe0+0x1*-0xe09+0.20000000000000018)),Math['pow'](_0x2e6e36[0x511*0x5+-0x77f+-0x11d4],(0xe98+0x15dc+0x7*-0x535)/(0x1696*0x1+-0x1*-0xa34+0x1*-0x20c8+0.20000000000000018)))),_0x4f3c2f['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x5898a1=_0x4f3c2f['emissiveTe'+'xture'];_0x3f2c41['emissiveMa'+'p']=_0x2b2521[_0x5898a1['index']],bt(_0x5898a1,_0x3f2c41,['emissive']);}if(_0x4f3c2f['hasOwnProp'+'erty']('alphaMode'))switch(_0x4f3c2f['alphaMode']){case'MASK':_0x3f2c41['blendType']=ys,_0x4f3c2f['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x3f2c41['alphaTest']=_0x4f3c2f['alphaCutof'+'f']:_0x3f2c41['alphaTest']=-0x5*-0x581+0x1*0x2224+0x11f*-0x37+0.5;break;case'BLEND':_0x3f2c41['blendType']=Gs,_0x3f2c41['depthWrite']=!(0x2*-0xf63+0x1d75+-0xa9*-0x2);break;default:case'OPAQUE':_0x3f2c41['blendType']=ys;break;}else _0x3f2c41['blendType']=ys;_0x4f3c2f['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x3f2c41['twoSidedLi'+'ghting']=_0x4f3c2f['doubleSide'+'d'],_0x3f2c41['cull']=_0x4f3c2f['doubleSide'+'d']?xt:Jr):(_0x3f2c41['twoSidedLi'+'ghting']=!(-0x4b*0x1+-0x1*-0x1903+-0x18b7),_0x3f2c41['cull']=Jr);const _0x163b81={'KHR_materials_clearcoat':yF,'KHR_materials_emissive_strength':CF,'KHR_materials_ior':TF,'KHR_materials_dispersion':wF,'KHR_materials_iridescence':PF,'KHR_materials_pbrSpecularGlossiness':SF,'KHR_materials_sheen':AF,'KHR_materials_specular':xF,'KHR_materials_transmission':EF,'KHR_materials_unlit':vF,'KHR_materials_volume':bF,'KHR_materials_anisotropy':MF};if(_0x4f3c2f['hasOwnProp'+'erty']('extensions'))for(const _0x28e86d in _0x4f3c2f['extensions']){const _0x52af5e=_0x163b81[_0x28e86d];_0x52af5e!==void(-0x1e3c+-0x1976+0x37b2)&&_0x52af5e(_0x4f3c2f['extensions'][_0x28e86d],_0x3f2c41,_0x2b2521);}return _0x3f2c41['update'](),_0x3f2c41;},IF=(_0x4e07d7,_0x4254a7,_0x2dd653,_0x4b89b8,_0x5380fe,_0x3a2bee,_0x369df9)=>{const _0x45de02=_0x5c5b39=>new nc(jo(_0x5c5b39['type']),un(_0x5c5b39,_0x4b89b8)),_0x34cabc={'STEP':qy,'LINEAR':Uf,'CUBICSPLINE':Bf},_0x6b6c3b={},_0x4a678f={},_0x26628d={};let _0x273dbb=-0xb*-0x2dd+0xac*0x1d+-0x32fa,_0x14ba0a;for(_0x14ba0a=-0x75*-0x29+0x2*0x7f4+-0x22a5;_0x14ba0a<_0x4e07d7['samplers']['length'];++_0x14ba0a){const _0x399073=_0x4e07d7['samplers'][_0x14ba0a];_0x6b6c3b['hasOwnProp'+'erty'](_0x399073['input'])||(_0x6b6c3b[_0x399073['input']]=_0x45de02(_0x2dd653[_0x399073['input']])),_0x4a678f['hasOwnProp'+'erty'](_0x399073['output'])||(_0x4a678f[_0x399073['output']]=_0x45de02(_0x2dd653[_0x399073['output']]));const _0x18e974=_0x399073['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x34cabc['hasOwnProp'+'erty'](_0x399073['interpolat'+'ion'])?_0x34cabc[_0x399073['interpolat'+'ion']]:Uf,_0x484545={'paths':[],'input':_0x399073['input'],'output':_0x399073['output'],'interpolation':_0x18e974};_0x26628d[_0x14ba0a]=_0x484545;}const _0x3c0467=[],_0x378436={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x6cd3c9=_0x239a28=>{const _0x55e1fa=[];for(;_0x239a28;)_0x55e1fa['unshift'](_0x239a28['name']),_0x239a28=_0x239a28['parent'];return _0x55e1fa;},_0x407777=(_0x3bcc73,_0x4cf408,_0x663d7c)=>{const _0x82db09=_0x4a678f[_0x3bcc73['output']];if(!_0x82db09){M['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x663d7c+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x4457c0;if(_0x3a2bee&&_0x3a2bee[_0x4cf408['mesh']]){const _0x4bbdde=_0x3a2bee[_0x4cf408['mesh']];_0x4bbdde['hasOwnProp'+'erty']('extras')&&_0x4bbdde['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x4457c0=_0x4bbdde['extras']['targetName'+'s']);}const _0x56ecae=_0x82db09['data'],_0x380aa4=_0x56ecae['length']/_0x6b6c3b[_0x3bcc73['input']]['data']['length'],_0x54bfd3=_0x56ecae['length']/_0x380aa4,_0x343eef=_0x54bfd3*(0x1f08+-0x10b1+-0x13*0xc1),_0x433ac7=new ArrayBuffer(_0x343eef*_0x380aa4);for(let _0x53a1c2=0x140c+-0x22f0+0xee4*0x1;_0x53a1c2<_0x380aa4;_0x53a1c2++){const _0x154eb6=new Float32Array(_0x433ac7,_0x343eef*_0x53a1c2,_0x54bfd3);for(let _0xa2d0f8=-0x266b+-0x44e+0x2ab9;_0xa2d0f8<_0x54bfd3;_0xa2d0f8++)_0x154eb6[_0xa2d0f8]=_0x56ecae[_0xa2d0f8*_0x380aa4+_0x53a1c2];const _0xcc93c7=new nc(0x594+0x1*-0xd76+0x7e3,_0x154eb6),_0x2ed8ad=_0x4457c0!=null&&_0x4457c0[_0x53a1c2]?'name.'+_0x4457c0[_0x53a1c2]:_0x53a1c2;_0x4a678f[-_0x273dbb]=_0xcc93c7;const _0x2aabd8={'paths':[{'entityPath':_0x663d7c,'component':'graph','propertyPath':['weight.'+_0x2ed8ad]}],'input':_0x3bcc73['input'],'output':-_0x273dbb,'interpolation':_0x3bcc73['interpolat'+'ion']};_0x273dbb++,_0x26628d['morphCurve'+'-'+_0x14ba0a+'-'+_0x53a1c2]=_0x2aabd8;}};for(_0x14ba0a=-0x56*0x6b+0xc13+0x2a7*0x9;_0x14ba0a<_0x4e07d7['channels']['length'];++_0x14ba0a){const _0x3d5cd4=_0x4e07d7['channels'][_0x14ba0a],_0x556510=_0x3d5cd4['target'],_0x2f298f=_0x26628d[_0x3d5cd4['sampler']],_0x3e0b1b=_0x5380fe[_0x556510['node']],_0x5daa3a=_0x369df9[_0x556510['node']],_0x21d153=_0x6cd3c9(_0x3e0b1b);_0x556510['path']['startsWith']('weights')?(_0x407777(_0x2f298f,_0x5daa3a,_0x21d153),_0x26628d[_0x3d5cd4['sampler']]['morphCurve']=!(-0x14fc+-0x1b3*0xf+0x2e79)):_0x2f298f['paths']['push']({'entityPath':_0x21d153,'component':'graph','propertyPath':[_0x378436[_0x556510['path']]]});}const _0x470c8a=[],_0x44ac91=[],_0x55d170=[];for(const _0x28d2b5 in _0x6b6c3b)_0x470c8a['push'](_0x6b6c3b[_0x28d2b5]),_0x6b6c3b[_0x28d2b5]=_0x470c8a['length']-(-0x1e1b+-0x1222*0x1+0x303e);for(const _0x82d07d in _0x4a678f)_0x44ac91['push'](_0x4a678f[_0x82d07d]),_0x4a678f[_0x82d07d]=_0x44ac91['length']-(-0x127c+-0x2182+0x33ff);for(const _0x570631 in _0x26628d){const _0x136b65=_0x26628d[_0x570631];_0x136b65['morphCurve']||(_0x55d170['push'](new Dv(_0x136b65['paths'],_0x6b6c3b[_0x136b65['input']],_0x4a678f[_0x136b65['output']],_0x136b65['interpolat'+'ion'])),_0x136b65['paths']['length']>-0x2653*0x1+-0x291+0x28e4&&_0x136b65['paths'][0xa64+-0x2*-0xccf+-0x2402]['propertyPa'+'th'][-0xf17*0x2+-0x5e4+0x2412]==='localRotat'+'ion'&&_0x136b65['interpolat'+'ion']!==Bf&&_0x3c0467['push'](_0x55d170[_0x55d170['length']-(0x24c5+-0x2*-0x103d+-0x453e)]['output']));}_0x3c0467['sort']();let _0x56c2f0=null,_0x495128;for(_0x14ba0a=-0x325+-0xc2f*0x1+-0x7aa*-0x2;_0x14ba0a<_0x3c0467['length'];++_0x14ba0a){const _0x17dbe6=_0x3c0467[_0x14ba0a];if(_0x14ba0a===0x1632+-0x1*-0x439+0x1a6b*-0x1||_0x17dbe6!==_0x56c2f0){if(_0x495128=_0x44ac91[_0x17dbe6],_0x495128['components']===0x98f*0x1+-0x1d87*-0x1+-0x2712*0x1){const _0x1b2de1=_0x495128['data'],_0x5cd184=_0x1b2de1['length']-(-0x4f*0x5+-0x1e04+0x3b*0x89);for(let _0x2396de=-0xdac+-0x58*-0x7+0xb44;_0x2396de<_0x5cd184;_0x2396de+=-0x7*-0x463+-0x1*-0x2df+-0x18*0x166)_0x1b2de1[_0x2396de+(0x40*-0x4d+0x1898+-0x558)]*_0x1b2de1[_0x2396de+(-0x173f+-0xf*0x1b1+0x30a2)]+_0x1b2de1[_0x2396de+(-0x3*0xc9d+0x511*-0x7+0x494f)]*_0x1b2de1[_0x2396de+(-0x10ac+-0x1bf7+0x8*0x595)]+_0x1b2de1[_0x2396de+(0x1f40+0x979*-0x2+-0xc4c)]*_0x1b2de1[_0x2396de+(0x1*0x1ab1+-0x2580+0xad5)]+_0x1b2de1[_0x2396de+(0x1564*-0x1+0xd*-0x2f6+0x3be5)]*_0x1b2de1[_0x2396de+(-0x1032+-0x1d0f+0x2d48)]<-0xd56+-0x2*0x1bb+0x10cc&&(_0x1b2de1[_0x2396de+(0x59*0x58+-0x49*-0x5+-0x1*0x2001)]*=-(0x2569+-0xd84+-0x22c*0xb),_0x1b2de1[_0x2396de+(-0x269e*-0x1+-0x2523+-0xbb*0x2)]*=-(0x17d4+-0x1*-0x2615+-0x46c*0xe),_0x1b2de1[_0x2396de+(0x1af*-0x1+-0x1a8f+-0x1c44*-0x1)]*=-(0x2256+0x1c98+-0x3eed),_0x1b2de1[_0x2396de+(-0x1cdf*0x1+0x66*0x1f+0x2c2*0x6)]*=-(-0x1725+0xae1*-0x1+-0x1f*-0x119));}_0x56c2f0=_0x17dbe6;}}let _0x5e8b80=0x10a4+-0x77*-0x19+-0x1c43;for(_0x14ba0a=-0x356+-0xa*-0x2db+-0x1938;_0x14ba0a<_0x470c8a['length'];_0x14ba0a++)_0x495128=_0x470c8a[_0x14ba0a]['_data'],_0x5e8b80=Math['max'](_0x5e8b80,_0x495128['length']===-0xe8*0x7+-0x576*-0x5+-0x14f6?0x1f6f+-0x14fe*0x1+0xf3*-0xb:_0x495128[_0x495128['length']-(-0xc6e*0x1+-0x2*0xcb3+0x25d5)]);return new Gi(_0x4e07d7['hasOwnProp'+'erty']('name')?_0x4e07d7['name']:'animation_'+_0x4254a7,_0x5e8b80,_0x470c8a,_0x44ac91,_0x55d170);},ah=new te(),Ba=new I(),DF=(_0xf43b80,_0x2e1a69,_0x1f1b55)=>{const _0x13c147=new He();if(_0xf43b80['hasOwnProp'+'erty']('name')&&_0xf43b80['name']['length']>0x1315+-0x1cad*-0x1+-0x2fc2?_0x13c147['name']=_0xf43b80['name']:_0x13c147['name']='node_'+_0x2e1a69,_0xf43b80['hasOwnProp'+'erty']('matrix')&&(ah['data']['set'](_0xf43b80['matrix']),ah['getTransla'+'tion'](Ba),_0x13c147['setLocalPo'+'sition'](Ba),ah['getEulerAn'+'gles'](Ba),_0x13c147['setLocalEu'+'lerAngles'](Ba),ah['getScale'](Ba),_0x13c147['setLocalSc'+'ale'](Ba)),_0xf43b80['hasOwnProp'+'erty']('rotation')){const _0x707205=_0xf43b80['rotation'];_0x13c147['setLocalRo'+'tation'](_0x707205[-0x17de+0xdf*-0x1+0x18bd],_0x707205[-0x2*0xf3b+0x1d0b+0x16c],_0x707205[0x2172+0x5ea*0x1+-0x275a],_0x707205[0x589+-0xf9c+-0xa16*-0x1]);}if(_0xf43b80['hasOwnProp'+'erty']('translatio'+'n')){const _0xc5ee40=_0xf43b80['translatio'+'n'];_0x13c147['setLocalPo'+'sition'](_0xc5ee40[-0x1*0x1f39+-0x3b0*-0x4+0x1*0x1079],_0xc5ee40[0xb65*-0x2+0x11*-0x182+0x306d],_0xc5ee40[0x2ad*0x1+-0x16*-0x1c5+-0x1cf*0x17]);}if(_0xf43b80['hasOwnProp'+'erty']('scale')){const _0x1f929b=_0xf43b80['scale'];_0x13c147['setLocalSc'+'ale'](_0x1f929b[-0x24b0+0x2038+0x1a*0x2c],_0x1f929b[-0xa29+-0x7*0xd3+0xfef],_0x1f929b[-0x5*0x6cd+-0xdfc+0x2fff]);}return _0xf43b80['hasOwnProp'+'erty']('extensions')&&_0xf43b80['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x1f1b55['set'](_0xf43b80,{'ext':_0xf43b80['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x13c147;},LF=(_0x244354,_0x51dcbc)=>{const _0x461f5e=_0x244354['type']==='orthograph'+'ic'?hn:Ks,_0x2790dc=_0x461f5e===hn?_0x244354['orthograph'+'ic']:_0x244354['perspectiv'+'e'],_0xc66c4c={'enabled':!(0x2*0x1ab+0x1*0xd61+0x1*-0x10b6),'projection':_0x461f5e,'nearClip':_0x2790dc['znear'],'aspectRatioMode':Im};_0x2790dc['zfar']&&(_0xc66c4c['farClip']=_0x2790dc['zfar']),_0x461f5e===hn?(_0xc66c4c['orthoHeigh'+'t']=(-0x1590+-0x46e*0x3+0x2*0x116d+0.5)*_0x2790dc['ymag'],_0x2790dc['ymag']&&(_0xc66c4c['aspectRati'+'oMode']=Mf,_0xc66c4c['aspectRati'+'o']=_0x2790dc['xmag']/_0x2790dc['ymag'])):(_0xc66c4c['fov']=_0x2790dc['yfov']*Y['RAD_TO_DEG'],_0x2790dc['aspectRati'+'o']&&(_0xc66c4c['aspectRati'+'oMode']=Mf,_0xc66c4c['aspectRati'+'o']=_0x2790dc['aspectRati'+'o']));const _0x24ae3b=new ot(_0x244354['name']);return _0x24ae3b['addCompone'+'nt']('camera',_0xc66c4c),_0x24ae3b;},RF=(_0x3ddbce,_0x5cae20)=>{const _0x447b69={'enabled':!(-0x142+-0x25e5+-0x2728*-0x1),'type':_0x3ddbce['type']==='point'?'omni':_0x3ddbce['type'],'color':_0x3ddbce['hasOwnProp'+'erty']('color')?new ie(_0x3ddbce['color']):ie['WHITE'],'range':_0x3ddbce['hasOwnProp'+'erty']('range')?_0x3ddbce['range']:-0x13a0+0xa03+0x30ac,'falloffMode':oy,'intensity':_0x3ddbce['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x3ddbce['intensity'],-0x2127+0xf05*0x1+0x1222,0x1b82*0x1+-0x1*-0xb3+-0x1c33):0x26ed+-0x2536+-0x2*0xdb};_0x3ddbce['hasOwnProp'+'erty']('spot')&&(_0x447b69['innerConeA'+'ngle']=_0x3ddbce['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x3ddbce['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:0x4*0x5c8+0x164d+-0x2d6d,_0x447b69['outerConeA'+'ngle']=_0x3ddbce['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x3ddbce['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(-0x447+0x2445+-0x1ffa)),_0x3ddbce['hasOwnProp'+'erty']('intensity')&&(_0x447b69['luminance']=_0x3ddbce['intensity']*Ho['getLightUn'+'itConversi'+'on'](Lf[_0x447b69['type']],_0x447b69['outerConeA'+'ngle'],_0x447b69['innerConeA'+'ngle']));const _0x411971=new ot(_0x5cae20['name']);return _0x411971['rotateLoca'+'l'](-0x2494+0x10f6+0x13f8,-0x1*-0x2371+0x1fea+-0x435b,0x798+-0x1ca*0x6+-0x3*-0x10c),_0x411971['addCompone'+'nt']('light',_0x447b69),_0x411971;},OF=(_0x210644,_0x450627,_0x282200,_0x2d34c4)=>{if(!_0x450627['hasOwnProp'+'erty']('skins')||_0x450627['skins']['length']===0x22f8+-0x2704+0x40c)return[];const _0xf486a3=new Map();return _0x450627['skins']['map'](_0x47974e=>pF(_0x210644,_0x47974e,_0x450627['accessors'],_0x2d34c4,_0x282200,_0xf486a3));},FF=(_0x161dd3,_0x2be4b0,_0x116890,_0x14ce60)=>{var _0x52b2ce,_0x49a3de,_0xd67942;const _0x5952a8={},_0x194b73={},_0x5e3eb8={},_0x290388=[];return{'meshes':!_0x14ce60['skipMeshes']&&((_0x52b2ce=_0x2be4b0==null?void(0x1*-0x52f+-0x293*0xb+0x2180):_0x2be4b0['meshes'])==null?void(-0x1f68+0xbcf*0x2+0x1*0x7ca):_0x52b2ce['length'])&&((_0x49a3de=_0x2be4b0==null?void(0x14f5+0xd*0x2dd+-0x3a2e):_0x2be4b0['accessors'])==null?void(0x1a1a+-0xa39*-0x1+0x2453*-0x1):_0x49a3de['length'])&&((_0xd67942=_0x2be4b0==null?void(-0x1088+0x610+-0x53c*-0x2):_0x2be4b0['bufferView'+'s'])==null?void(0x5f*-0x1+0x1414+0x13b5*-0x1):_0xd67942['length'])?_0x2be4b0['meshes']['map'](_0x38b839=>gF(_0x161dd3,_0x38b839,_0x2be4b0['accessors'],_0x116890,_0x5952a8,_0x194b73,_0x5e3eb8,_0x14ce60,_0x290388)):[],'meshVariants':_0x194b73,'meshDefaultMaterials':_0x5e3eb8,'promises':_0x290388};},NF=(_0x253e4e,_0x27a8e6,_0x587759)=>{var _0xece09f,_0x49b1a7,_0xdbb1b7;if(!_0x253e4e['hasOwnProp'+'erty']('materials')||_0x253e4e['materials']['length']===0x2410+-0x1954*0x1+0x6*-0x1ca)return[];const _0x4321cc=(_0xece09f=_0x587759==null?void(-0xa*0x31d+0x2636+0x97*-0xc):_0x587759['material'])==null?void(0x7cf*-0x5+0xaf4+0x1c17):_0xece09f['preprocess'],_0x25d470=((_0x49b1a7=_0x587759==null?void(0x1dba+0x191b+-0x3*0x1247):_0x587759['material'])==null?void(0x20c2+0x1fa5*-0x1+-0x11d):_0x49b1a7['process'])??Ov,_0x2fc3c7=(_0xdbb1b7=_0x587759==null?void(-0x1*0x5bd+0x792*-0x4+0x2405):_0x587759['material'])==null?void(-0x10c8+0x228e+-0x11c6):_0xdbb1b7['postproces'+'s'];return _0x253e4e['materials']['map'](_0x33ffe9=>{_0x4321cc&&_0x4321cc(_0x33ffe9);const _0x591ae7=_0x25d470(_0x33ffe9,_0x27a8e6);return _0x2fc3c7&&_0x2fc3c7(_0x33ffe9,_0x591ae7),_0x591ae7;});},kF=_0x25ec2f=>{if(!_0x25ec2f['hasOwnProp'+'erty']('extensions')||!_0x25ec2f['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x30fa0f=_0x25ec2f['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0x3803ee={};for(let _0x3e1cc4=-0x437*0x5+0x327+0x7c*0x25;_0x3e1cc4<_0x30fa0f['length'];_0x3e1cc4++)_0x3803ee[_0x30fa0f[_0x3e1cc4]['name']]=_0x3e1cc4;return _0x3803ee;},UF=(_0x4fddd2,_0x1f4f1c,_0x2fa1c8,_0xefa1cd)=>{var _0x1aaf2a,_0x187df8;if(!_0x4fddd2['hasOwnProp'+'erty']('animations')||_0x4fddd2['animations']['length']===-0xb5+-0x7d6+0x88b)return[];const _0x2a2530=(_0x1aaf2a=_0xefa1cd==null?void(-0x1*-0xfca+0x1*-0x19d6+0xa0c):_0xefa1cd['animation'])==null?void(-0x7eb+-0x97b*0x2+0x1ae1):_0x1aaf2a['preprocess'],_0x25c64d=(_0x187df8=_0xefa1cd==null?void(-0x208b+-0xe*-0x157+0xdc9):_0xefa1cd['animation'])==null?void(0x89d+0x1578+-0x1*0x1e15):_0x187df8['postproces'+'s'];return _0x4fddd2['animations']['map']((_0x2ceb90,_0x47ffa1)=>{_0x2a2530&&_0x2a2530(_0x2ceb90);const _0x544839=IF(_0x2ceb90,_0x47ffa1,_0x4fddd2['accessors'],_0x2fa1c8,_0x1f4f1c,_0x4fddd2['meshes'],_0x4fddd2['nodes']);return _0x25c64d&&_0x25c64d(_0x2ceb90,_0x544839),_0x544839;});},BF=(_0x1691b7,_0x118939,_0x1ee50a,_0x5ec14a)=>{const _0x57957d=_0x118939['accessors'];_0x1ee50a['forEach']((_0x1e8334,_0x4742ba)=>{const _0x4c05a2=_0x1e8334['ext']['attributes'];let _0x2d47db;if(_0x4c05a2['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x24c66d=_0x57957d[_0x4c05a2['TRANSLATIO'+'N']];_0x2d47db=un(_0x24c66d,_0x5ec14a);}let _0x2826e4;if(_0x4c05a2['hasOwnProp'+'erty']('ROTATION')){const _0x70f8ea=_0x57957d[_0x4c05a2['ROTATION']];_0x2826e4=un(_0x70f8ea,_0x5ec14a);}let _0x4ff2d6;if(_0x4c05a2['hasOwnProp'+'erty']('SCALE')){const _0xc478b9=_0x57957d[_0x4c05a2['SCALE']];_0x4ff2d6=un(_0xc478b9,_0x5ec14a);}const _0x29520a=(_0x2d47db?_0x2d47db['length']/(-0x979+0x13a3+-0xa27):0x1*-0x1523+-0xd54+0x11*0x207)||(_0x2826e4?_0x2826e4['length']/(0x261*-0x6+-0x44*-0x4+0xd3a*0x1):0x20c5*-0x1+-0x20c4+0x4189)||(_0x4ff2d6?_0x4ff2d6['length']/(-0x1cf7+-0x70*-0xe+-0x6*-0x3cf):0x1*-0x1603+-0x1ab4+0x30b7);if(_0x29520a){const _0x506113=new Float32Array(_0x29520a*(-0x3*0xbac+0x1cd3+0x641)),_0x39c937=new I(),_0x356247=new le(),_0x506587=new I(0x68*-0x60+-0x1ddc+0x1*0x44dd,0x24c3*-0x1+0x1c4f+0x875,-0x18ef+-0xec6+0x1ba*0x17),_0x3a13b=new te();let _0x2e9ba1=-0xbc+-0x1*-0xa30+-0x974;for(let _0x13e4f5=-0xa4b+-0x1a86+-0x145*-0x1d;_0x13e4f5<_0x29520a;_0x13e4f5++){const _0xbc06a1=_0x13e4f5*(-0x26c9+-0xdd*-0x1+0x25ef);if(_0x2d47db&&_0x39c937['set'](_0x2d47db[_0xbc06a1],_0x2d47db[_0xbc06a1+(0x1*0x1406+0x15b3+0x1bd*-0x18)],_0x2d47db[_0xbc06a1+(-0x2108+-0x2*0xc6b+0x39e0)]),_0x2826e4){const _0x1cfc3f=_0x13e4f5*(0x917+-0x5*-0x271+-0x1548);_0x356247['set'](_0x2826e4[_0x1cfc3f],_0x2826e4[_0x1cfc3f+(-0x1*0xe17+-0x16*0xe5+0x21c6)],_0x2826e4[_0x1cfc3f+(0x1bf3+0x3*-0x371+-0xcd*0x16)],_0x2826e4[_0x1cfc3f+(-0x7*-0x35b+-0x5*-0x5b2+-0x33f4)]);}_0x4ff2d6&&_0x506587['set'](_0x4ff2d6[_0xbc06a1],_0x4ff2d6[_0xbc06a1+(-0x18b2+-0x7*0x512+0x3c31)],_0x4ff2d6[_0xbc06a1+(-0x40e+0x9a5+-0x595)]),_0x3a13b['setTRS'](_0x39c937,_0x356247,_0x506587);for(let _0x41348f=0x675+-0x4*-0x111+0x131*-0x9;_0x41348f<-0x2689+0x25d*0x5+-0x2*-0xd64;_0x41348f++)_0x506113[_0x2e9ba1++]=_0x3a13b['data'][_0x41348f];}_0x1e8334['matrices']=_0x506113;}});},zF=(_0x5ae8cb,_0x11361c,_0x4c4b2e)=>{var _0x4519e3,_0x406a80,_0x4562bd;if(!_0x5ae8cb['hasOwnProp'+'erty']('nodes')||_0x5ae8cb['nodes']['length']===0xa3f*-0x1+0x5*-0x10c+-0x529*-0x3)return[];const _0x2429f9=(_0x4519e3=_0x11361c==null?void(0x117c+0x4*-0x1b5+-0xaa8):_0x11361c['node'])==null?void(0x1076*-0x2+0x212*-0x4+0x494*0x9):_0x4519e3['preprocess'],_0x1217f1=((_0x406a80=_0x11361c==null?void(-0x616*-0x4+-0x689+-0x11cf):_0x11361c['node'])==null?void(-0x194e+-0x1*-0x3d7+-0x5*-0x44b):_0x406a80['process'])??DF,_0x47970b=(_0x4562bd=_0x11361c==null?void(0x3*0xcd+0xd*0xa6+-0x1*0xad5):_0x11361c['node'])==null?void(-0x237f+0x252d+-0x5*0x56):_0x4562bd['postproces'+'s'],_0x1ec495=_0x5ae8cb['nodes']['map']((_0x176638,_0x12e32a)=>{_0x2429f9&&_0x2429f9(_0x176638);const _0xfc3699=_0x1217f1(_0x176638,_0x12e32a,_0x4c4b2e);return _0x47970b&&_0x47970b(_0x176638,_0xfc3699),_0xfc3699;});for(let _0x4bd4be=0x9e6*0x1+-0xb62+0x26*0xa;_0x4bd4be<_0x5ae8cb['nodes']['length'];++_0x4bd4be){const _0x24fcf1=_0x5ae8cb['nodes'][_0x4bd4be];if(_0x24fcf1['hasOwnProp'+'erty']('children')){const _0x4bae39=_0x1ec495[_0x4bd4be],_0x5d2d3f={};for(let _0x5d1e45=-0x186+-0x742*0x5+0x5*0x790;_0x5d1e45<_0x24fcf1['children']['length'];++_0x5d1e45){const _0x422f41=_0x1ec495[_0x24fcf1['children'][_0x5d1e45]];_0x422f41['parent']||(_0x5d2d3f['hasOwnProp'+'erty'](_0x422f41['name'])?_0x422f41['name']+=_0x5d2d3f[_0x422f41['name']]++:_0x5d2d3f[_0x422f41['name']]=-0x3b2+-0xe*-0xb3+0x1*-0x617,_0x4bae39['addChild'](_0x422f41));}}}return _0x1ec495;},VF=(_0x5e7dc5,_0x2b0fcf)=>{var _0x87089a;const _0x56c0f7=[],_0x56bde0=_0x5e7dc5['scenes']['length'];if(_0x56bde0===0x251d+-0xb7c+-0x19a0&&((_0x87089a=_0x5e7dc5['scenes'][0x1066*-0x1+0x1*0x1b0f+-0xaa9]['nodes'])==null?void(0x246*0x7+0x1*0x1f0+-0x11da):_0x87089a['length'])===0x1452+-0x22ba+0xe69){const _0x4e0fc8=_0x5e7dc5['scenes'][-0x1a*0xd0+0x161+0x13bf]['nodes'][0x15fe+0x1e64+-0x2e9*0x12];_0x56c0f7['push'](_0x2b0fcf[_0x4e0fc8]);}else for(let _0x44c0b3=-0x9d*-0x29+-0x27*-0x3f+-0x1*0x22be;_0x44c0b3<_0x56bde0;_0x44c0b3++){const _0x374baf=_0x5e7dc5['scenes'][_0x44c0b3];if(_0x374baf['nodes']){const _0x3714cb=new He(_0x374baf['name']);for(let _0x467138=0x23bc+0xb*-0x2c5+0x47*-0x13;_0x467138<_0x374baf['nodes']['length'];_0x467138++){const _0xe7eec5=_0x2b0fcf[_0x374baf['nodes'][_0x467138]];_0x3714cb['addChild'](_0xe7eec5);}_0x56c0f7['push'](_0x3714cb);}}return _0x56c0f7;},GF=(_0x17cc71,_0x11a964,_0x2d4e1f)=>{var _0x4e1535,_0x654625,_0x5a80d8;let _0x328e4=null;if(_0x17cc71['hasOwnProp'+'erty']('nodes')&&_0x17cc71['hasOwnProp'+'erty']('cameras')&&_0x17cc71['cameras']['length']>0x1*-0xe84+0x2694+-0x1810){const _0x10c2e2=(_0x4e1535=_0x2d4e1f==null?void(-0x1*0x799+0xe57+-0x6be):_0x2d4e1f['camera'])==null?void(-0x17a6*0x1+-0x20a5*0x1+0x384b):_0x4e1535['preprocess'],_0x280df7=((_0x654625=_0x2d4e1f==null?void(-0x1*0x243f+-0x6c3*0x2+0x1*0x31c5):_0x2d4e1f['camera'])==null?void(0x154d*-0x1+0x33*0x17+-0x42e*-0x4):_0x654625['process'])??LF,_0x2da710=(_0x5a80d8=_0x2d4e1f==null?void(-0xa57+-0x1108*-0x1+-0x1*0x6b1):_0x2d4e1f['camera'])==null?void(-0x7ec+0xe75*-0x1+-0x11*-0x151):_0x5a80d8['postproces'+'s'];_0x17cc71['nodes']['forEach']((_0x4beca8,_0x1581c1)=>{if(_0x4beca8['hasOwnProp'+'erty']('camera')){const _0x37e104=_0x17cc71['cameras'][_0x4beca8['camera']];if(_0x37e104){_0x10c2e2&&_0x10c2e2(_0x37e104);const _0x117180=_0x280df7(_0x37e104,_0x11a964[_0x1581c1]);_0x2da710&&_0x2da710(_0x37e104,_0x117180),_0x117180&&(_0x328e4||(_0x328e4=new Map()),_0x328e4['set'](_0x4beca8,_0x117180));}}});}return _0x328e4;},HF=(_0xe81862,_0x6dcd1e,_0x11e327)=>{var _0x17fe1a,_0x284e0b,_0x26143b;let _0x5e3379=null;if(_0xe81862['hasOwnProp'+'erty']('nodes')&&_0xe81862['hasOwnProp'+'erty']('extensions')&&_0xe81862['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0xe81862['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x286816=_0xe81862['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x286816['length']){const _0x485383=(_0x17fe1a=_0x11e327==null?void(-0x5*-0x75f+-0x1b79+-0x962):_0x11e327['light'])==null?void(-0x1*0x2449+0x26+0x2423):_0x17fe1a['preprocess'],_0x14124=((_0x284e0b=_0x11e327==null?void(0x1*-0x1639+-0x2383*0x1+0x39bc):_0x11e327['light'])==null?void(0x1fbb+-0xcf7+-0x12c4):_0x284e0b['process'])??RF,_0x597c41=(_0x26143b=_0x11e327==null?void(-0x499+0x5c5+-0x3*0x64):_0x11e327['light'])==null?void(0x7b8+-0x47*0x77+0x1949):_0x26143b['postproces'+'s'];_0xe81862['nodes']['forEach']((_0x3e978f,_0x257003)=>{if(_0x3e978f['hasOwnProp'+'erty']('extensions')&&_0x3e978f['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x3e978f['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x593574=_0x3e978f['extensions']['KHR_lights'+'_punctual']['light'],_0x405143=_0x286816[_0x593574];if(_0x405143){_0x485383&&_0x485383(_0x405143);const _0x3e22be=_0x14124(_0x405143,_0x6dcd1e[_0x257003]);_0x597c41&&_0x597c41(_0x405143,_0x3e22be),_0x3e22be&&(_0x5e3379||(_0x5e3379=new Map()),_0x5e3379['set'](_0x3e978f,_0x3e22be));}}});}}return _0x5e3379;},WF=(_0x452c2d,_0xc9bd1,_0x44fb61)=>{_0x452c2d['nodes']['forEach'](_0x195f9e=>{_0x195f9e['hasOwnProp'+'erty']('mesh')&&_0x195f9e['hasOwnProp'+'erty']('skin')&&_0xc9bd1[_0x195f9e['mesh']]['meshes']['forEach'](_0x102a8b=>{_0x102a8b['skin']=_0x44fb61[_0x195f9e['skin']];});});},$F=async(_0x5df673,_0x387727,_0x192c0d,_0x466253,_0x3b7452)=>{var _0x3d1577,_0x2768eb;const _0x111183=(_0x3d1577=_0x3b7452==null?void(0x2+0x2f1*0x5+-0xeb7):_0x3b7452['global'])==null?void(-0x5*-0x1df+0x2512+-0x2e6d):_0x3d1577['preprocess'],_0x2e62e3=(_0x2768eb=_0x3b7452==null?void(0x10f9+-0x13e4+-0x1*-0x2eb):_0x3b7452['global'])==null?void(0x2*0xa61+0x17af+-0x2c71):_0x2768eb['postproces'+'s'];_0x111183&&_0x111183(_0x387727),_0x387727['asset']&&_0x387727['asset']['generator']==='PlayCanvas'&&M['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x3c28d9=new Map(),_0x53bf0f=zF(_0x387727,_0x3b7452,_0x3c28d9),_0x3186f9=VF(_0x387727,_0x53bf0f),_0x379f63=HF(_0x387727,_0x53bf0f,_0x3b7452),_0x486e25=GF(_0x387727,_0x53bf0f,_0x3b7452),_0xd129ad=kF(_0x387727),_0x55d0c1=await Promise['all'](_0x192c0d),{meshes:_0x515862,meshVariants:_0x2ff323,meshDefaultMaterials:_0xdcf155,promises:_0x4f3030}=FF(_0x5df673,_0x387727,_0x55d0c1,_0x3b7452),_0x58cb3b=UF(_0x387727,_0x53bf0f,_0x55d0c1,_0x3b7452);BF(_0x5df673,_0x387727,_0x3c28d9,_0x55d0c1);const _0x4ed9a0=await Promise['all'](_0x466253),_0x35690b=_0x4ed9a0['map'](_0x360b6c=>_0x360b6c['resource']),_0x3f63b3=NF(_0x387727,_0x35690b,_0x3b7452),_0xa1aff0=OF(_0x5df673,_0x387727,_0x53bf0f,_0x55d0c1),_0x1e77b5=[];for(let _0x5e0b4e=0x25*0x91+0x23c3*-0x1+0xece;_0x5e0b4e<_0x515862['length'];_0x5e0b4e++)_0x1e77b5[_0x5e0b4e]=new zm(),_0x1e77b5[_0x5e0b4e]['meshes']=_0x515862[_0x5e0b4e];WF(_0x387727,_0x1e77b5,_0xa1aff0);const _0x5932b5=new rF();return _0x5932b5['gltf']=_0x387727,_0x5932b5['nodes']=_0x53bf0f,_0x5932b5['scenes']=_0x3186f9,_0x5932b5['animations']=_0x58cb3b,_0x5932b5['textures']=_0x4ed9a0,_0x5932b5['materials']=_0x3f63b3,_0x5932b5['variants']=_0xd129ad,_0x5932b5['meshVarian'+'ts']=_0x2ff323,_0x5932b5['meshDefaul'+'tMaterials']=_0xdcf155,_0x5932b5['renders']=_0x1e77b5,_0x5932b5['skins']=_0xa1aff0,_0x5932b5['lights']=_0x379f63,_0x5932b5['cameras']=_0x486e25,_0x5932b5['nodeInstan'+'cingMap']=_0x3c28d9,_0x2e62e3&&_0x2e62e3(_0x387727,_0x5932b5),await Promise['all'](_0x4f3030),_0x5932b5;},XF=(_0x455cf6,_0x13e8ad)=>{const _0x1b82f6=(_0x2092b1,_0x5f2359)=>{switch(_0x2092b1){case-0x35f*-0x16+-0x3b3b+0x1711:return Te;case-0x3f5*-0xd+0x20*0x23d+-0x5510:return _t;case 0x199e+0x25*-0xf9+0x3*0x1075:return xc;case-0x1*0x2895+0x45de+-0x137*-0x8:return wc;case-0x44df+0x1*-0x4c56+-0x1*-0xb837:return Tc;case-0x2a7b+0x1e8e+-0x32f0*-0x1:return ea;default:return _0x5f2359;}},_0x23ed7f=(_0x478649,_0x21011d)=>{switch(_0x478649){case 0xa1c9*0x1+0xac56+-0xccf0:return ue;case 0xcd57+-0x2d00+-0x7*0x421:return Tu;case-0x3741*-0x1+0x4bed+-0x5a2d:return pt;default:return _0x21011d;}};_0x455cf6&&(_0x13e8ad=_0x13e8ad??{},_0x455cf6['minFilter']=_0x1b82f6(_0x13e8ad['minFilter'],ea),_0x455cf6['magFilter']=_0x1b82f6(_0x13e8ad['magFilter'],_t),_0x455cf6['addressU']=_0x23ed7f(_0x13e8ad['wrapS'],pt),_0x455cf6['addressV']=_0x23ed7f(_0x13e8ad['wrapT'],pt));};let qF=0x4bb*-0x1+-0x1a2*0x10+0xa49*0x3;const Wa=_0x335659=>{var _0x11f857,_0x38ebe6,_0x3b825a,_0x34728b;return((_0x38ebe6=(_0x11f857=_0x335659['extensions'])==null?void(0x5e3*0x1+0x1*-0xf29+0x946):_0x11f857['KHR_textur'+'e_basisu'])==null?void(-0x19d+0x1*-0x26c1+0x285e):_0x38ebe6['source'])??((_0x34728b=(_0x3b825a=_0x335659['extensions'])==null?void(-0x1095*-0x1+-0x3*-0x45c+0x1*-0x1da9):_0x3b825a['EXT_textur'+'e_webp'])==null?void(-0x2*0x8f+-0x52*0x3e+0x14fa):_0x34728b['source'])??_0x335659['source'];},jF=(_0x59bff3,_0x6c81e,_0xa90b96,_0x274551,_0x47e974)=>{var _0x4c94d9,_0x5a7b76,_0x45f933;if(!_0x59bff3['images']||_0x59bff3['images']['length']===-0x194b*-0x1+0x9e8*-0x2+-0x57b*0x1)return[];const _0x8b8614=(_0x4c94d9=_0x47e974==null?void(-0x4*-0x7b7+-0x1*0x12ff+-0xbdd*0x1):_0x47e974['image'])==null?void(0x37*-0x1c+-0x12b*-0x1+0x4d9):_0x4c94d9['preprocess'],_0x1b5665=(_0x5a7b76=_0x47e974==null?void(-0x3*0x67e+0x37*0xa7+0x11*-0xf7):_0x47e974['image'])==null?void(0x27*0x75+0x1*0x18ed+-0x40*0xab):_0x5a7b76['processAsy'+'nc'],_0x59b825=(_0x45f933=_0x47e974==null?void(-0xa97*-0x3+-0x5*-0x713+-0x4324):_0x47e974['image'])==null?void(-0xe*0x73+0xa3*-0x2d+0x22f1):_0x45f933['postproces'+'s'],_0x15c1ef={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0xbf0a58=_0x2437d6=>{const _0x34bc75=new Set();return _0x2437d6['hasOwnProp'+'erty']('materials')&&_0x2437d6['materials']['forEach'](_0x47f915=>{if(_0x47f915['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x3d52b7=_0x47f915['pbrMetalli'+'cRoughness'];if(_0x3d52b7['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x597252=_0x2437d6['textures'][_0x3d52b7['baseColorT'+'exture']['index']];_0x34bc75['add'](Wa(_0x597252));}}if(_0x47f915['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x2d0d72=_0x2437d6['textures'][_0x47f915['emissiveTe'+'xture']['index']];_0x34bc75['add'](Wa(_0x2d0d72));}if(_0x47f915['hasOwnProp'+'erty']('extensions')){const _0x2d1077=_0x47f915['extensions']['KHR_materi'+'als_sheen'];if(_0x2d1077&&_0x2d1077['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x2fbaab=_0x2437d6['textures'][_0x2d1077['sheenColor'+'Texture']['index']];_0x34bc75['add'](Wa(_0x2fbaab));}const _0x33ec3a=_0x47f915['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x33ec3a&&_0x33ec3a['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x2c0bf3=_0x2437d6['textures'][_0x33ec3a['specularGl'+'ossinessTe'+'xture']['index']];_0x34bc75['add'](Wa(_0x2c0bf3));}const _0x11eccb=_0x47f915['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x11eccb&&_0x11eccb['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x57bbdd=_0x2437d6['textures'][_0x11eccb['specularCo'+'lorTexture']['index']];_0x34bc75['add'](Wa(_0x57bbdd));}}}),_0x34bc75;},_0x690004=(_0x2d7ed8,_0x14c25,_0x655513,_0x2b6a06,_0x1fa8c9,_0x28d0d1)=>new Promise((_0x5b6dac,_0xada0ae)=>{const _0x429f6a=_0x1d9579=>{const _0x44d5c6=(_0x2d7ed8['name']||'gltf-textu'+'re')+'-'+qF++,_0x20fe3c={'url':_0x14c25||_0x44d5c6};if(_0x1d9579&&(_0x20fe3c['contents']=_0x1d9579['slice'](0x1229*-0x2+-0x1b1*-0x1+0x22a1)['buffer']),_0x2b6a06){const _0x4aaebb=_0x15c1ef[_0x2b6a06];_0x4aaebb&&(_0x20fe3c['filename']=_0x20fe3c['url']+'.'+_0x4aaebb);}const _0x483522={'srgb':_0x28d0d1},_0x2fbd14=new me(_0x44d5c6,'texture',_0x20fe3c,_0x483522,_0x1fa8c9);_0x2fbd14['on']('load',_0x48b3e4=>_0x5b6dac(_0x48b3e4)),_0x2fbd14['on']('error',_0x3885d2=>_0xada0ae(_0x3885d2)),_0x274551['add'](_0x2fbd14),_0x274551['load'](_0x2fbd14);};_0x655513?_0x655513['then'](_0x190771=>_0x429f6a(_0x190771)):_0x429f6a(null);}),_0x172a75=_0xbf0a58(_0x59bff3);return _0x59bff3['images']['map']((_0x1ef3cb,_0x22097d)=>{_0x8b8614&&_0x8b8614(_0x1ef3cb);let _0x2e5fd6;return _0x1b5665?_0x2e5fd6=new Promise((_0x5c9f2a,_0x55fb3d)=>{_0x1b5665(_0x1ef3cb,(_0x98adbe,_0x5c2188)=>{_0x98adbe?_0x55fb3d(_0x98adbe):_0x5c9f2a(_0x5c2188);});}):_0x2e5fd6=new Promise(_0x36aeb8=>{_0x36aeb8(null);}),_0x2e5fd6=_0x2e5fd6['then'](_0x904196=>{const _0x7cf733=_0x172a75['has'](_0x22097d);return _0x904196||(_0x1ef3cb['hasOwnProp'+'erty']('uri')?Lv(_0x1ef3cb['uri'])?_0x690004(_0x1ef3cb,_0x1ef3cb['uri'],null,aF(_0x1ef3cb['uri']),null,_0x7cf733):_0x690004(_0x1ef3cb,Ln['test'](_0x1ef3cb['uri'])?_0x1ef3cb['uri']:xe['join'](_0xa90b96,_0x1ef3cb['uri']),null,null,{'crossOrigin':'anonymous'},_0x7cf733):_0x1ef3cb['hasOwnProp'+'erty']('bufferView')&&_0x1ef3cb['hasOwnProp'+'erty']('mimeType')?_0x690004(_0x1ef3cb,null,_0x6c81e[_0x1ef3cb['bufferView']],_0x1ef3cb['mimeType'],null,_0x7cf733):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x22097d)));}),_0x59b825&&(_0x2e5fd6=_0x2e5fd6['then'](_0x1fd902=>(_0x59b825(_0x1ef3cb,_0x1fd902),_0x1fd902))),_0x2e5fd6;});},YF=(_0x556c73,_0x4712a2,_0x37d5c9)=>{var _0x38e756,_0x3f2ce1,_0x10ba21,_0x296bae,_0x2d372e;if(!((_0x38e756=_0x556c73==null?void(-0x1872+-0x2038+0x38aa):_0x556c73['images'])!=null&&_0x38e756['length'])||!((_0x3f2ce1=_0x556c73==null?void(-0x774+0x209f*0x1+-0x1*0x192b):_0x556c73['textures'])!=null&&_0x3f2ce1['length']))return[];const _0x4a1a7d=(_0x10ba21=_0x37d5c9==null?void(0x445*-0x3+-0x1e86+-0x2b55*-0x1):_0x37d5c9['texture'])==null?void(0x14*0x2+-0x777*0x5+-0x1*-0x252b):_0x10ba21['preprocess'],_0x50645b=(_0x296bae=_0x37d5c9==null?void(-0x7e4+-0x11c*-0x11+0x3a8*-0x3):_0x37d5c9['texture'])==null?void(0x373*-0x1+0x654+0xb*-0x43):_0x296bae['processAsy'+'nc'],_0x143ffc=(_0x2d372e=_0x37d5c9==null?void(-0x1b35+0x1a0c*0x1+0x129):_0x37d5c9['texture'])==null?void(-0x16f*-0x7+0x8*0x20c+-0x1a69*0x1):_0x2d372e['postproces'+'s'],_0x1d9ead=new Set();return _0x556c73['textures']['map'](_0x7b049b=>{_0x4a1a7d&&_0x4a1a7d(_0x7b049b);let _0x4fbab1;return _0x50645b?_0x4fbab1=new Promise((_0x11b7f9,_0x4bf060)=>{_0x50645b(_0x7b049b,_0x556c73['images'],(_0x7f10d4,_0x23ae46)=>{_0x7f10d4?_0x4bf060(_0x7f10d4):_0x11b7f9(_0x23ae46);});}):_0x4fbab1=new Promise(_0x10448b=>{_0x10448b(null);}),_0x4fbab1=_0x4fbab1['then'](_0x21ca97=>{_0x21ca97=_0x21ca97??Wa(_0x7b049b);const _0x2b0323=_0x1d9ead['has'](_0x21ca97);return _0x1d9ead['add'](_0x21ca97),_0x4712a2[_0x21ca97]['then'](_0x5ee7c3=>{const _0x50ae5b=_0x2b0323?fF(_0x5ee7c3):_0x5ee7c3;return XF(_0x50ae5b['resource'],(_0x556c73['samplers']??[])[_0x7b049b['sampler']]),_0x50ae5b;});}),_0x143ffc&&(_0x4fbab1=_0x4fbab1['then'](_0x556516=>(_0x143ffc(_0x7b049b,_0x556516),_0x556516))),_0x4fbab1;});},KF=(_0x3c80e6,_0x1cfe1c,_0x216c16,_0x2b2141)=>{var _0x49247c,_0x778d37,_0xdb664e;if(!_0x3c80e6['buffers']||_0x3c80e6['buffers']['length']===-0x2*0x58f+0x2320+-0x1802)return[];const _0xc7f03f=(_0x49247c=_0x2b2141==null?void(-0x4b5+0x19f3+-0x153e):_0x2b2141['buffer'])==null?void(-0x8fe+0x1e3+0x71b*0x1):_0x49247c['preprocess'],_0x141e41=(_0x778d37=_0x2b2141==null?void(0x2*-0x7b6+0x11c5*0x1+-0x259):_0x2b2141['buffer'])==null?void(0x102*0x3+-0x875+0xd*0x6b):_0x778d37['processAsy'+'nc'],_0x564e2e=(_0xdb664e=_0x2b2141==null?void(-0x1*0x1b7c+0xd*0x1c5+0x47b):_0x2b2141['buffer'])==null?void(0x69b+-0x1058+-0x115*-0x9):_0xdb664e['postproces'+'s'];return _0x3c80e6['buffers']['map']((_0x204454,_0xad91ba)=>{_0xc7f03f&&_0xc7f03f(_0x204454);let _0x35a216;return _0x141e41?_0x35a216=new Promise((_0x16281f,_0x485985)=>{_0x141e41(_0x204454,(_0x2c4693,_0x3bc3a0)=>{_0x2c4693?_0x485985(_0x2c4693):_0x16281f(_0x3bc3a0);});}):_0x35a216=new Promise(_0x15304d=>{_0x15304d(null);}),_0x35a216=_0x35a216['then'](_0x250108=>{if(_0x250108)return _0x250108;if(_0x204454['hasOwnProp'+'erty']('uri')){if(Lv(_0x204454['uri'])){const _0x39a335=atob(_0x204454['uri']['split'](',')[-0x101a+-0x254c+-0x31*-0x117]),_0x307d6d=new Uint8Array(_0x39a335['length']);for(let _0xbf5cd3=-0x82c+0xff9+-0x7cd;_0xbf5cd3<_0x39a335['length'];_0xbf5cd3++)_0x307d6d[_0xbf5cd3]=_0x39a335['charCodeAt'](_0xbf5cd3);return _0x307d6d;}return new Promise((_0x29ee66,_0x4e44c2)=>{nt['get'](Ln['test'](_0x204454['uri'])?_0x204454['uri']:xe['join'](_0x216c16,_0x204454['uri']),{'cache':!(0x8e9*0x1+0x18e9+0x4a*-0x75),'responseType':'arraybuffe'+'r','retry':!(-0x242+0x24b4+-0x2271*0x1)},(_0x4fe23c,_0x4cda4e)=>{_0x4fe23c?_0x4e44c2(_0x4fe23c):_0x29ee66(new Uint8Array(_0x4cda4e));});});}return _0x1cfe1c;}),_0x564e2e&&(_0x35a216=_0x35a216['then'](_0x2d8cea=>(_0x564e2e(_0x3c80e6['buffers'][_0xad91ba],_0x2d8cea),_0x2d8cea))),_0x35a216;});},ZF=(_0x4eeb33,_0x161d79)=>{const _0x2b721f=JSON['parse']((_0x586727=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x586727);let _0x27900a='';for(let _0xe1f9e4=-0x460+-0x77c*-0x1+0x2*-0x18e;_0xe1f9e4<_0x586727['length'];_0xe1f9e4++)_0x27900a+=String['fromCharCo'+'de'](_0x586727[_0xe1f9e4]);return decodeURIComponent(escape(_0x27900a));})(_0x4eeb33));if(_0x2b721f['asset']&&_0x2b721f['asset']['version']&&parseFloat(_0x2b721f['asset']['version'])<-0x20f5+0x81f+-0xa*-0x27c){_0x161d79('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x2b721f['asset']['version']+'\x27.');return;}_0x161d79(null,_0x2b721f);},QF=(_0x55aeee,_0x41ea58)=>{const _0x144c13=_0x55aeee instanceof ArrayBuffer?new DataView(_0x55aeee):new DataView(_0x55aeee['buffer'],_0x55aeee['byteOffset'],_0x55aeee['byteLength']),_0x5789dc=_0x144c13['getUint32'](0x1a*-0x45+-0x143*0x13+-0x2d1*-0xb,!(-0x548+-0x16*0xc4+-0x588*-0x4)),_0x4eb181=_0x144c13['getUint32'](0x153c+-0xba1+0x997*-0x1,!(-0x180c+-0xd99*0x1+-0x17*-0x1a3)),_0x42e623=_0x144c13['getUint32'](0x152e*-0x1+-0x8cc*0x2+-0x2*-0x1367,!(0xb*0x24a+0x504+-0x1e32));if(_0x5789dc!==-0x5f735731*-0x1+0x3531ef20+0xd0d79a7*-0x6){_0x41ea58('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x5789dc['toString'](-0x6b3+0x1*-0x191b+0x1fde));return;}if(_0x4eb181!==-0x1660+-0xc29+0x228b){_0x41ea58('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x4eb181);return;}if(_0x42e623<=0x11fa+0x111f*-0x1+0x3*-0x49||_0x42e623>_0x144c13['byteLength']){_0x41ea58('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x42e623);return;}const _0xb8c6b0=[];let _0x3dc505=0x1d6a+0x1f26+-0x3c84;for(;_0x3dc505<_0x42e623;){const _0xeda0c5=_0x144c13['getUint32'](_0x3dc505,!(-0x1*-0x1552+-0x2493*-0x1+0x39e5*-0x1));_0x3dc505+_0xeda0c5+(-0x3*-0x693+-0x99*-0x17+-0x2170)>_0x144c13['byteLength']&&_0x41ea58('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0xeda0c5);const _0x2e895d=_0x144c13['getUint32'](_0x3dc505+(0x2*0x3cd+-0x82*-0x9+0x185*-0x8),!(0x77*-0x4f+0x25eb+0x99*-0x2)),_0x12a7b1=new Uint8Array(_0x144c13['buffer'],_0x144c13['byteOffset']+_0x3dc505+(0x47d+0x1*-0x252f+-0x105d*-0x2),_0xeda0c5);_0xb8c6b0['push']({'length':_0xeda0c5,'type':_0x2e895d,'data':_0x12a7b1}),_0x3dc505+=_0xeda0c5+(0x1f63+0x1147+-0x30a2);}if(_0xb8c6b0['length']!==0xc2f+0x1c*-0x160+0x2*0xd29&&_0xb8c6b0['length']!==0xc79*-0x2+0x6*0x171+-0x827*-0x2){_0x41ea58('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0xb8c6b0[-0x1310*0x1+0x12b6+-0xa*-0x9]['type']!==0x45*-0x8a8e22+-0x8c28b628+0x82894*0x1f5b){_0x41ea58('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0xb8c6b0[0x106d+0x1763*-0x1+0x6f6]['type']['toString'](-0x426*-0x2+-0x7*0x3a6+-0x2*-0x8a7));return;}if(_0xb8c6b0['length']>0xf3c+-0x214*-0x2+-0x1363&&_0xb8c6b0[0x1*0x20b5+-0x20b9+-0x1*-0x5]['type']!==0x76010e*-0x1+0xa92fb*0xd+0x3ad391){_0x41ea58('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0xb8c6b0[0xfa1+-0x10a3+0x103]['type']['toString'](-0x8c5+-0x7d1+-0x10a6*-0x1));return;}_0x41ea58(null,{'gltfChunk':_0xb8c6b0[-0x405*0x1+-0x14f*-0x11+0x2*-0x91d]['data'],'binaryChunk':_0xb8c6b0['length']===0x17a8+0x20c6*0x1+0x1*-0x386c?_0xb8c6b0[-0xa68+0x9d+0x9cc]['data']:null});},JF=(_0x4665d1,_0x45b866,_0x26ac52)=>{const _0x51d3c7=()=>{const _0x1b3ea4=new Uint8Array(_0x45b866);return _0x1b3ea4[-0x5*-0x188+0x172e+0x1ed6*-0x1]===0x4a6+-0xab*0x25+0x1478&&_0x1b3ea4[-0x1f1d+0x595*0x4+-0x4b*-0x1e]===0x940+-0x1c9*0x11+0x1585&&_0x1b3ea4[-0x1664+0x1b9d+0x537*-0x1]===0xf90*0x1+0x159*-0x15+0xd11&&_0x1b3ea4[0x2615+0x38b+0x9f*-0x43]===0x15d*0x7+-0x1d*0x101+0x13d8;};_0x4665d1&&_0x4665d1['toLowerCas'+'e']()['endsWith']('.glb')||_0x51d3c7()?QF(_0x45b866,_0x26ac52):_0x26ac52(null,{'gltfChunk':_0x45b866,'binaryChunk':null});},eN=(_0x2252c6,_0x4ee97d,_0x58fac4)=>{var _0x5ded64,_0x777d15,_0x3f3f63,_0x42dc70;const _0x54f1e3=[],_0x5e5693=(_0x5ded64=_0x58fac4==null?void(0x23*-0xb9+-0x26d7+0x4022):_0x58fac4['bufferView'])==null?void(0x829*-0x3+0xb4e+0xd2d):_0x5ded64['preprocess'],_0x211d79=(_0x777d15=_0x58fac4==null?void(-0x41*-0x97+0x7a7+-0x2dfe):_0x58fac4['bufferView'])==null?void(0x11*0x16a+0x50a+0x1*-0x1d14):_0x777d15['processAsy'+'nc'],_0x1ad044=(_0x3f3f63=_0x58fac4==null?void(-0x7c6+0x179b+-0x1*0xfd5):_0x58fac4['bufferView'])==null?void(-0x1aeb+-0xd4a*-0x1+0xda1):_0x3f3f63['postproces'+'s'];if(!((_0x42dc70=_0x2252c6['bufferView'+'s'])!=null&&_0x42dc70['length']))return _0x54f1e3;for(let _0x570664=0x531*-0x3+0x2408+-0x1475;_0x570664<_0x2252c6['bufferView'+'s']['length'];++_0x570664){const _0x523c12=_0x2252c6['bufferView'+'s'][_0x570664];_0x5e5693&&_0x5e5693(_0x523c12);let _0x5f47ec;_0x211d79?_0x5f47ec=new Promise((_0x1c0736,_0x848a0b)=>{_0x211d79(_0x523c12,_0x4ee97d,(_0x3c398f,_0xca82)=>{_0x3c398f?_0x848a0b(_0x3c398f):_0x1c0736(_0xca82);});}):_0x5f47ec=new Promise(_0x695e23=>{_0x695e23(null);}),_0x5f47ec=_0x5f47ec['then'](_0x3e7bb7=>_0x3e7bb7||_0x4ee97d[_0x523c12['buffer']]['then'](_0xb2be36=>new Uint8Array(_0xb2be36['buffer'],_0xb2be36['byteOffset']+(_0x523c12['byteOffset']||0x2262+-0x24d6+-0x13a*-0x2),_0x523c12['byteLength']))),_0x523c12['hasOwnProp'+'erty']('byteStride')&&(_0x5f47ec=_0x5f47ec['then'](_0x6a64ef=>(_0x6a64ef['byteStride']=_0x523c12['byteStride'],_0x6a64ef))),_0x1ad044&&(_0x5f47ec=_0x5f47ec['then'](_0x3ce8e0=>(_0x1ad044(_0x523c12,_0x3ce8e0),_0x3ce8e0))),_0x54f1e3['push'](_0x5f47ec);}return _0x54f1e3;};class lc{static['parse'](_0x52407c,_0x12e94d,_0x22aec9,_0x21dc98,_0x35113b,_0x9858b5,_0x47735b){JF(_0x52407c,_0x22aec9,(_0x3bfb0d,_0xe21d62)=>{if(_0x3bfb0d){_0x47735b(_0x3bfb0d);return;}ZF(_0xe21d62['gltfChunk'],(_0x337fb2,_0x13aea9)=>{if(_0x337fb2){_0x47735b(_0x337fb2);return;}const _0x5e5e32=KF(_0x13aea9,_0xe21d62['binaryChun'+'k'],_0x12e94d,_0x9858b5),_0x52914d=eN(_0x13aea9,_0x5e5e32,_0x9858b5),_0x11aa8d=jF(_0x13aea9,_0x52914d,_0x12e94d,_0x35113b,_0x9858b5),_0x3d4f25=YF(_0x13aea9,_0x11aa8d,_0x9858b5);$F(_0x21dc98,_0x13aea9,_0x52914d,_0x3d4f25,_0x9858b5)['then'](_0xe57c3d=>_0x47735b(null,_0xe57c3d))['catch'](_0x1e3fc4=>_0x47735b(_0x1e3fc4));});});}static['createDefa'+'ultMateria'+'l'](){return Ov({'name':'defaultGlb'+'Material'},[]);}}class tN extends Ze{constructor(_0x55bedf){super(_0x55bedf,'animation'),this['device']=_0x55bedf['graphicsDe'+'vice'],this['assets']=_0x55bedf['assets'];}['load'](_0x578e33,_0x56ffe9,_0x554e2a){typeof _0x578e33=='string'&&(_0x578e33={'load':_0x578e33,'original':_0x578e33});const _0x2b73fa={'retry':this['maxRetries']>-0x119+-0x1bd9*0x1+0xc3*0x26,'maxRetries':this['maxRetries']};(_0x578e33['load']['startsWith']('blob:')||_0x578e33['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x578e33['original'])['toLowerCas'+'e']()==='.glb'?_0x2b73fa['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x2b73fa['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x578e33['load'],_0x2b73fa,(_0x13dcb6,_0x5b42e5)=>{_0x13dcb6?_0x56ffe9('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x578e33['original']+'\x20['+_0x13dcb6+']'):xe['getExtensi'+'on'](_0x578e33['original'])['toLowerCas'+'e']()==='.glb'?lc['parse']('filename.g'+'lb','',_0x5b42e5,this['device'],this['assets'],(_0x554e2a==null?void(0x191+-0x147*-0x15+-0x5c*0x4f):_0x554e2a['options'])??{},(_0x46ab11,_0x4367ba)=>{var _0xb5dc14;if(_0x46ab11)_0x56ffe9(_0x46ab11);else{const _0x523b08=_0x4367ba['animations'];if((_0xb5dc14=_0x554e2a==null?void(-0xf4f*-0x1+-0x47b+0x1*-0xad4):_0x554e2a['data'])!=null&&_0xb5dc14['events']){for(let _0x289645=0x1*0xf8b+0xcb*0x3+-0x11ec;_0x289645<_0x523b08['length'];_0x289645++)_0x523b08[_0x289645]['events']=new Zy(Object['values'](_0x554e2a['data']['events']));}_0x4367ba['destroy'](),_0x56ffe9(null,_0x523b08);}}):_0x56ffe9(null,this['_parseAnim'+'ationV'+_0x5b42e5['animation']['version']](_0x5b42e5));});}['open'](_0x16ab97,_0x214163,_0x4b2123){return _0x214163;}['_parseAnim'+'ationV3'](_0x1d46c6){const _0x378c25=_0x1d46c6['animation'],_0x41ea3c=new P_();_0x41ea3c['name']=_0x378c25['name'],_0x41ea3c['duration']=_0x378c25['duration'];for(let _0x15192c=0x530*-0x2+-0x11*0xa5+0x7f*0x2b;_0x15192c<_0x378c25['nodes']['length'];_0x15192c++){const _0x2b99dd=new C_(),_0x24b876=_0x378c25['nodes'][_0x15192c];_0x2b99dd['_name']=_0x24b876['name'];for(let _0x13568f=0x1bb*-0x1+-0x122+0x2dd;_0x13568f<_0x24b876['keys']['length'];_0x13568f++){const _0x4769a3=_0x24b876['keys'][_0x13568f],_0x589780=_0x4769a3['time'],_0x2ee87e=_0x4769a3['pos'],_0x5d31d5=_0x4769a3['rot'],_0x37eee1=_0x4769a3['scale'],_0x2e3d73=new I(_0x2ee87e[-0x154f+0x1*0x202+0x134d],_0x2ee87e[0x13a6+0x1ad0+-0x2e75*0x1],_0x2ee87e[0x24fd+0xaa0+-0x2f9b]),_0x48e1fd=new le()['setFromEul'+'erAngles'](_0x5d31d5[-0x24db+0x1e7b+0x660],_0x5d31d5[-0x2cd+0xe*-0x59+-0x3d6*-0x2],_0x5d31d5[0x88*0xd+-0x422+-0x2c4]),_0x1b8636=new I(_0x37eee1[0x9f5+-0xe*0x1cd+-0x30d*-0x5],_0x37eee1[0x1f01+0x1*0x1f51+-0x173*0x2b],_0x37eee1[-0x169*0x17+-0x25cd+0x463e]),_0x415deb=new b_(_0x589780,_0x2e3d73,_0x48e1fd,_0x1b8636);_0x2b99dd['_keys']['push'](_0x415deb);}_0x41ea3c['addNode'](_0x2b99dd);}return _0x41ea3c;}['_parseAnim'+'ationV4'](_0x55b7f8){const _0x373dfe=_0x55b7f8['animation'],_0x472c7b=new P_();_0x472c7b['name']=_0x373dfe['name'],_0x472c7b['duration']=_0x373dfe['duration'];for(let _0x132e31=-0x3d*-0x86+0x1e98+-0x3e86;_0x132e31<_0x373dfe['nodes']['length'];_0x132e31++){const _0x5ccf39=new C_(),_0x42840c=_0x373dfe['nodes'][_0x132e31];_0x5ccf39['_name']=_0x42840c['name'];const _0x53d356=_0x42840c['defaults']['p'],_0xd068f=_0x42840c['defaults']['r'],_0x4c92ec=_0x42840c['defaults']['s'];for(let _0x35538b=-0x139+-0x6f5+0x2ba*0x3;_0x35538b<_0x42840c['keys']['length'];_0x35538b++){const _0x3badda=_0x42840c['keys'][_0x35538b],_0x829322=_0x3badda['t'],_0x8da8ce=_0x53d356||_0x3badda['p'],_0x372cee=_0xd068f||_0x3badda['r'],_0x57c0fc=_0x4c92ec||_0x3badda['s'],_0x1005cc=new I(_0x8da8ce[0x7c4+-0x1d*-0x6e+-0x143a],_0x8da8ce[-0x25f1+0x52*-0x61+0x4504],_0x8da8ce[0x1*0x1aad+0x8*-0x2c2+-0x49b]),_0x15dbd7=new le()['setFromEul'+'erAngles'](_0x372cee[0x1a34+-0x35a+0xe1*-0x1a],_0x372cee[-0x1*-0xae5+-0x1a5+-0x93f],_0x372cee[0xc93+0x305*-0x2+-0x687]),_0x25ee59=new I(_0x57c0fc[-0xa*-0x95+0x2545+-0x3*0xe5d],_0x57c0fc[-0x4b9*-0x5+0x67b+-0x1*0x1e17],_0x57c0fc[0x3f5*0x1+-0xc*-0x21c+0x2a9*-0xb]),_0x215aad=new b_(_0x829322,_0x1005cc,_0x15dbd7,_0x25ee59);_0x5ccf39['_keys']['push'](_0x215aad);}_0x472c7b['addNode'](_0x5ccf39);}return _0x472c7b;}}class sN extends Ze{constructor(_0x55f6ad){super(_0x55f6ad,'animclip');}['load'](_0x2f89cc,_0x6e61a4){typeof _0x2f89cc=='string'&&(_0x2f89cc={'load':_0x2f89cc,'original':_0x2f89cc});const _0x54785a={'retry':this['maxRetries']>0x5*0x275+-0x381+-0x8*0x119,'maxRetries':this['maxRetries']};_0x2f89cc['load']['startsWith']('blob:')&&(_0x54785a['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x2f89cc['load'],_0x54785a,(_0x13dc48,_0x1ce0e8)=>{_0x13dc48?_0x6e61a4('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x2f89cc['original']+'\x20['+_0x13dc48+']'):_0x6e61a4(null,_0x1ce0e8);});}['open'](_0x41ee7a,_0x446a77){const _0xb4c507=_0x446a77['name'],_0x178c7e=_0x446a77['duration'],_0x57781c=_0x446a77['inputs']['map'](_0x236212=>new nc(-0x249e*-0x1+-0xac7+-0x19d6,_0x236212)),_0x59981e=_0x446a77['outputs']['map'](_0x4e0a4c=>new nc(_0x4e0a4c['components'],_0x4e0a4c['data'])),_0x73d7da=_0x446a77['curves']['map'](_0x535fed=>new Dv([_0x535fed['path']],_0x535fed['inputIndex'],_0x535fed['outputInde'+'x'],_0x535fed['interpolat'+'ion']));return new Gi(_0xb4c507,_0x178c7e,_0x57781c,_0x59981e,_0x73d7da);}}class iN extends Ze{constructor(_0x1f5d88){super(_0x1f5d88,'animstateg'+'raph');}['load'](_0x140924,_0x909a2a){typeof _0x140924=='string'&&(_0x140924={'load':_0x140924,'original':_0x140924});const _0x4d5869={'retry':this['maxRetries']>0x6*-0x1f7+0xf1*0x26+-0x17fc,'maxRetries':this['maxRetries']};_0x140924['load']['startsWith']('blob:')&&(_0x4d5869['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x140924['load'],_0x4d5869,(_0x1762e8,_0x4c53d8)=>{_0x1762e8?_0x909a2a('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x140924['original']+'\x20['+_0x1762e8+']'):_0x909a2a(null,_0x4c53d8);});}['open'](_0x7861cf,_0x7698b6){return new vh(_0x7698b6);}}const Yd=(function(){if(typeof window>'u')return!(0x2e+0x1aa4+0x55d*-0x5);const _0x11192d=window['navigator']['userAgent'],_0x178540=_0x11192d['indexOf']('MSIE\x20');if(_0x178540>-0x2364+0x14*-0xc1+0x3278)return parseInt(_0x11192d['substring'](_0x178540+(0xf3b*-0x1+-0x2*0x83f+0x1fbe),_0x11192d['indexOf']('.',_0x178540)),0x28c+-0x10*0x121+0xf8e);if(_0x11192d['indexOf']('Trident/')>0x82f+-0x12a8+0xa79){const _0x327c67=_0x11192d['indexOf']('rv:');return parseInt(_0x11192d['substring'](_0x327c67+(0x21d*0x1+0x829*0x1+-0x25*0x47),_0x11192d['indexOf']('.',_0x327c67)),-0x7cf+-0x78e*0x3+0x1e83);}return!(-0x13*0x9b+-0x2*-0x504+0x17a);}()),rN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class aN extends Ze{constructor(_0x2cc30d){super(_0x2cc30d,'audio'),this['manager']=_0x2cc30d['soundManag'+'er'],M['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x59109c){const _0xda733a=xe['getExtensi'+'on'](_0x59109c);return rN['indexOf'](_0xda733a)>-(0x1cdd+-0x252+0x56*-0x4f)||_0x59109c['startsWith']('blob:');}['load'](_0x40a6a2,_0x38ab76){typeof _0x40a6a2=='string'&&(_0x40a6a2={'load':_0x40a6a2,'original':_0x40a6a2});const _0x2ff7dd=function(_0x33ca25){_0x38ab76(null,new BT(_0x33ca25));},_0x26dcea=function(_0x3751bd){let _0x135c88='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x40a6a2['original'];_0x3751bd&&(_0x135c88+=':\x20'+(_0x3751bd['message']||_0x3751bd)),console['warn'](_0x135c88),_0x38ab76(_0x135c88);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x40a6a2['original'])){_0x26dcea('Audio\x20form'+'at\x20for\x20'+_0x40a6a2['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x40a6a2['load'],_0x2ff7dd,_0x26dcea);}else _0x26dcea(null);}['_createSou'+'nd'](_0x5a539e,_0x74c42,_0x2c224e){if(al()){const _0x164f1f=this['manager'];if(!_0x164f1f['context']){_0x2c224e('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x4864bf={'retry':this['maxRetries']>-0x1d3*-0x2+0xed*0x6+-0x934,'maxRetries':this['maxRetries']};(_0x5a539e['startsWith']('blob:')||_0x5a539e['startsWith']('data:'))&&(_0x4864bf['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),nt['get'](_0x5a539e,_0x4864bf,(_0x2eee92,_0x383efc)=>{if(_0x2eee92){_0x2c224e(_0x2eee92);return;}_0x164f1f['context']['decodeAudi'+'oData'](_0x383efc,_0x74c42,_0x2c224e);});}else{let _0x3b0cf4=null;try{_0x3b0cf4=new Audio();}catch{_0x2c224e('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}Yd&&document['body']['appendChil'+'d'](_0x3b0cf4);const _0x4b4391=function(){_0x3b0cf4['removeEven'+'tListener']('canplaythr'+'ough',_0x4b4391),Yd&&document['body']['removeChil'+'d'](_0x3b0cf4),_0x74c42(_0x3b0cf4);};_0x3b0cf4['onerror']=function(){_0x3b0cf4['onerror']=null,Yd&&document['body']['removeChil'+'d'](_0x3b0cf4),_0x2c224e();},_0x3b0cf4['addEventLi'+'stener']('canplaythr'+'ough',_0x4b4391),_0x3b0cf4['src']=_0x5a539e;}}}class nN extends Ze{constructor(_0x1c3e16){super(_0x1c3e16,'binary');}['load'](_0x4adda4,_0x1c03d4){typeof _0x4adda4=='string'&&(_0x4adda4={'load':_0x4adda4,'original':_0x4adda4}),nt['get'](_0x4adda4['load'],{'responseType':Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x1e19+0x1*0x1127+0x679*0x2,'maxRetries':this['maxRetries']},(_0x56fc72,_0x119369)=>{_0x56fc72?_0x1c03d4('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x4adda4['original']+'\x20['+_0x56fc72+']'):_0x1c03d4(null,_0x119369);});}['openBinary'](_0x4242a1){return _0x4242a1['buffer'];}}class ar{constructor(_0x254df2,_0x373af1,_0x4fee33,_0x3e31ad){const _0x150323=function(_0x5254f2,_0x4e5411,_0x331d9b){const _0x2dc629=ar['createAsse'+'t'](_0x373af1['name'],_0x5254f2,_0x4e5411,_0x331d9b);return _0x4fee33['add'](_0x2dc629),_0x2dc629;},_0xe2943c=[];for(let _0x113395=0x1142+-0x1e73+0xd31;_0x113395<_0x254df2['renders']['length'];++_0x113395)_0xe2943c['push'](_0x150323('render',_0x254df2['renders'][_0x113395],_0x113395));const _0x3a0ae4=[];for(let _0x41a204=0x2205+-0x10a6+0x115f*-0x1;_0x41a204<_0x254df2['materials']['length'];++_0x41a204)_0x3a0ae4['push'](_0x150323('material',_0x254df2['materials'][_0x41a204],_0x41a204));const _0x25b1e7=[];for(let _0xbf9248=-0x288*-0xf+-0xc4*0x1c+0xb8*-0x17;_0xbf9248<_0x254df2['animations']['length'];++_0xbf9248)_0x25b1e7['push'](_0x150323('animation',_0x254df2['animations'][_0xbf9248],_0xbf9248));this['data']=_0x254df2,this['_model']=null,this['_assetName']=_0x373af1['name'],this['_assets']=_0x4fee33,this['_defaultMa'+'terial']=_0x3e31ad,this['renders']=_0xe2943c,this['materials']=_0x3a0ae4,this['textures']=_0x254df2['textures'],this['animations']=_0x25b1e7;}get['model'](){if(!this['_model']){const _0x5dcd87=ar['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x29d745=ar['createAsse'+'t'](this['_assetName'],'model',_0x5dcd87,-0x1*-0xc83+-0x2*0x39e+-0x1*0x547);this['_assets']['add'](_0x29d745),this['_model']=_0x29d745;}return this['_model'];}static['createAsse'+'t'](_0x5ee1cb,_0x5c0528,_0xf574b2,_0x5ce894){const _0x299b50=new me(_0x5ee1cb+'/'+_0x5c0528+'/'+_0x5ce894,_0x5c0528,{'url':''});return _0x299b50['resource']=_0xf574b2,_0x299b50['loaded']=!(-0x170d+-0xb46+0x2253),_0x299b50;}['instantiat'+'eModelEnti'+'ty'](_0x4ff562){const _0x5e1646=new ot(void(0x1*-0x1f67+-0x21b8+0x3*0x15b5),this['_assets']['_loader']['_app']);return _0x5e1646['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x4ff562)),_0x5e1646;}['instantiat'+'eRenderEnt'+'ity'](_0x48c4d6){const _0xbdc921=this['_defaultMa'+'terial'],_0x1bf9aa=[],_0x56a5d6=function(_0x567c57,_0x28ea22,_0x8c2ab9,_0x2061bd,_0x376665,_0x1607ba,_0x337296,_0x337c8f){const _0xc82167=_0x376665[_0x8c2ab9['id']],_0x383747=_0xc82167===void(0x1442+0x2350+0x1*-0x3792)?_0xbdc921:_0x2061bd[_0xc82167],_0x4bd4ad=new We(_0x8c2ab9,_0x383747);_0x8c2ab9['morph']&&(_0x4bd4ad['morphInsta'+'nce']=new oa(_0x8c2ab9['morph'])),_0x337296['hasOwnProp'+'erty']('skin')&&_0x1bf9aa['push']({'meshInstance':_0x4bd4ad,'rootBone':_0x567c57,'entity':_0x28ea22});const _0x1dff0b=_0x337c8f['get'](_0x337296);if(_0x1dff0b){const _0x5b4558=_0x1dff0b['matrices'],_0x267edc=zt['getDefault'+'Instancing'+'Format'](_0x8c2ab9['device']),_0x5e980f=new xs(_0x8c2ab9['device'],_0x267edc,_0x5b4558['length']/(0x1582+0x5f2+-0x1b64),{'data':_0x5b4558});_0x4bd4ad['setInstanc'+'ing'](_0x5e980f),_0x4bd4ad['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0xb57+0xd9d+0x2*-0xc7a);}return _0x4bd4ad;},_0x38c44f=(_0x19e93b,_0x4db48d,_0x3e3cc5)=>{const _0x42aaa0=new ot(void(-0x1*-0x108d+0x2c8+-0x1355),this['_assets']['_loader']['_app']);_0x4db48d['_cloneInte'+'rnal'](_0x42aaa0),_0x19e93b||(_0x19e93b=_0x42aaa0);let _0x31f2aa=null,_0x336a53=null;for(let _0x2a9fee=-0x18ad*-0x1+-0x18a4+0x3*-0x3;_0x2a9fee<_0x3e3cc5['nodes']['length'];_0x2a9fee++)if(_0x3e3cc5['nodes'][_0x2a9fee]===_0x4db48d){const _0x390e82=_0x3e3cc5['gltf']['nodes'][_0x2a9fee];if(_0x390e82['hasOwnProp'+'erty']('mesh')){const _0xe6757c=_0x3e3cc5['renders'][_0x390e82['mesh']]['meshes'];_0x336a53=this['renders'][_0x390e82['mesh']];for(let _0x3d2137=-0x29*-0xe9+0x832*0x1+0x3d*-0xbf;_0x3d2137<_0xe6757c['length'];_0x3d2137++){const _0x20546f=_0xe6757c[_0x3d2137];if(_0x20546f){const _0x46d6f0=_0x56a5d6(_0x19e93b,_0x42aaa0,_0x20546f,_0x3e3cc5['materials'],_0x3e3cc5['meshDefaul'+'tMaterials'],_0x3e3cc5['skins'],_0x390e82,_0x3e3cc5['nodeInstan'+'cingMap']);_0x31f2aa||(_0x31f2aa=[]),_0x31f2aa['push'](_0x46d6f0);}}}if(_0x3e3cc5['lights']){const _0x46a568=_0x3e3cc5['lights']['get'](_0x390e82);_0x46a568&&_0x42aaa0['addChild'](_0x46a568['clone']());}if(_0x3e3cc5['cameras']){const _0x42e339=_0x3e3cc5['cameras']['get'](_0x390e82);_0x42e339&&_0x42e339['camera']['system']['cloneCompo'+'nent'](_0x42e339,_0x42aaa0);}}_0x31f2aa&&(_0x42aaa0['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x31f2aa},_0x48c4d6)),_0x42aaa0['render']['assignAsse'+'t'](_0x336a53));const _0x168643=_0x4db48d['children'];for(let _0x3e451b=-0x1*0x6b5+-0xbb9*-0x3+-0x1c76;_0x3e451b<_0x168643['length'];_0x3e451b++){const _0x374b11=_0x38c44f(_0x19e93b,_0x168643[_0x3e451b],_0x3e3cc5);_0x42aaa0['addChild'](_0x374b11);}return _0x42aaa0;},_0x3e2490=[];for(const _0x4a4328 of this['data']['scenes'])_0x3e2490['push'](_0x38c44f(null,_0x4a4328,this['data']));return _0x1bf9aa['forEach'](_0x24fc93=>{_0x24fc93['meshInstan'+'ce']['skinInstan'+'ce']=$o['createCach'+'edSkinInst'+'ance'](_0x24fc93['meshInstan'+'ce']['mesh']['skin'],_0x24fc93['rootBone'],_0x24fc93['entity']),_0x24fc93['meshInstan'+'ce']['node']['render']['rootBone']=_0x24fc93['rootBone'];}),ar['createScen'+'eHierarchy'](_0x3e2490,ot);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x468ac2,_0x154f0d){const _0x244298=_0x154f0d?this['data']['variants'][_0x154f0d]:null;if(_0x244298===void(0x1b50+0x2*0x43f+-0x2*0x11e7)){M['warn']('No\x20variant'+'\x20named\x20'+_0x154f0d+('\x20exists\x20in'+'\x20resource'));return;}const _0x4cb29f=_0x468ac2['findCompon'+'ents']('render');for(let _0x221d5b=0x1fca+0x1893+-0x2f*0x133;_0x221d5b<_0x4cb29f['length'];_0x221d5b++){const _0x52a622=_0x4cb29f[_0x221d5b];this['_applyMate'+'rialVarian'+'t'](_0x244298,_0x52a622['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x462324,_0x10ceab){const _0x3f9f51=_0x10ceab?this['data']['variants'][_0x10ceab]:null;if(_0x3f9f51===void(0x14a3+-0x430+0x1073*-0x1)){M['warn']('No\x20variant'+'\x20named\x20'+_0x10ceab+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x3f9f51,_0x462324);}['_applyMate'+'rialVarian'+'t'](_0x47d1ec,_0x57d806){_0x57d806['forEach'](_0x2934d3=>{if(_0x47d1ec===null)_0x2934d3['material']=this['_defaultMa'+'terial'];else{const _0x4908b6=this['data']['meshVarian'+'ts'][_0x2934d3['mesh']['id']];_0x4908b6&&(_0x2934d3['material']=this['data']['materials'][_0x4908b6[_0x47d1ec]]);}M['assert'](_0x2934d3['material']);});}static['createScen'+'eHierarchy'](_0x1339b3,_0x7c77ab){let _0x833d61=null;if(_0x1339b3['length']===0x35*-0x2+-0x1d52+0x1dbd)_0x833d61=_0x1339b3[0x23fe+-0x42d*-0x3+-0x3085];else{_0x833d61=new _0x7c77ab('SceneGroup');for(const _0x39d441 of _0x1339b3)_0x833d61['addChild'](_0x39d441);}return _0x833d61;}static['createMode'+'l'](_0x44b974,_0x480f0d){const _0x596e20=function(_0x14f5ea,_0x4030e3,_0x4d50b1,_0x9ca942,_0x25b7e7,_0x572ca3,_0x5024cc){const _0x11ebbc=_0x44b974['meshDefaul'+'tMaterials'][_0x4030e3['id']],_0x5ca02f=_0x11ebbc===void(-0x41f+-0x1fc*-0x9+0xdbd*-0x1)?_0x480f0d:_0x25b7e7[_0x11ebbc],_0xf75e16=new We(_0x4030e3,_0x5ca02f,_0x572ca3);if(_0x4030e3['morph']){const _0x31812f=new oa(_0x4030e3['morph']);_0xf75e16['morphInsta'+'nce']=_0x31812f,_0x14f5ea['morphInsta'+'nces']['push'](_0x31812f);}if(_0x5024cc['hasOwnProp'+'erty']('skin')){const _0x898a09=_0x5024cc['skin'],_0x30dc5f=_0x4d50b1[_0x898a09];_0x4030e3['skin']=_0x30dc5f;const _0x40823f=_0x9ca942[_0x898a09];_0xf75e16['skinInstan'+'ce']=_0x40823f,_0x14f5ea['skinInstan'+'ces']['push'](_0x40823f);}_0x14f5ea['meshInstan'+'ces']['push'](_0xf75e16);},_0x1e3341=new $i(),_0x60d2e6=[];for(const _0xb52182 of _0x44b974['skins']){const _0x4abcba=new hl(_0xb52182);_0x4abcba['bones']=_0xb52182['bones'],_0x60d2e6['push'](_0x4abcba);}_0x1e3341['graph']=ar['createScen'+'eHierarchy'](_0x44b974['scenes'],He);for(let _0xa31f20=0x26f6+0x607+-0x2cfd;_0xa31f20<_0x44b974['nodes']['length'];_0xa31f20++){const _0x281b78=_0x44b974['nodes'][_0xa31f20];if(_0x281b78['root']===_0x1e3341['graph']){const _0x550bc0=_0x44b974['gltf']['nodes'][_0xa31f20];if(_0x550bc0['hasOwnProp'+'erty']('mesh')){const _0x5cdc1b=_0x44b974['renders'][_0x550bc0['mesh']]['meshes'];for(let _0x1ffe87=-0x1134+-0x359*0x5+-0x21f1*-0x1;_0x1ffe87<_0x5cdc1b['length'];_0x1ffe87++){const _0x552d44=_0x5cdc1b[_0x1ffe87];_0x552d44&&_0x596e20(_0x1e3341,_0x552d44,_0x44b974['skins'],_0x60d2e6,_0x44b974['materials'],_0x281b78,_0x550bc0);}}}}return _0x1e3341;}['destroy'](){const _0x55f6f7=this['_assets'],_0x1fd6f0=function(_0x1b2115){_0x55f6f7['remove'](_0x1b2115),_0x1b2115['unload']();},_0x593d29=function(_0x363be2){_0x363be2['forEach'](_0x53a32a=>{_0x1fd6f0(_0x53a32a);});};this['animations']&&(_0x593d29(this['animations']),this['animations']=null),this['textures']&&(_0x593d29(this['textures']),this['textures']=null),this['materials']&&(_0x593d29(this['materials']),this['materials']=null),this['renders']&&(_0x593d29(this['renders']),this['renders']=null),this['_model']&&(_0x1fd6f0(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class oN{constructor(_0x5226d3,_0xbccde7,_0x5db4eb){this['_device']=_0x5226d3,this['_assets']=_0xbccde7,this['_defaultMa'+'terial']=lc['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x5db4eb;}['_getUrlWit'+'houtParams'](_0x377310){return _0x377310['indexOf']('?')>=-0x175e+-0xc8+0x119*0x16?_0x377310['split']('?')[0x2235+-0x9b5+0x1880*-0x1]:_0x377310;}['load'](_0x25639f,_0x14db4c,_0x11932c){me['fetchArray'+'Buffer'](_0x25639f['load'],(_0x1b820d,_0x2dc8fd)=>{_0x1b820d?_0x14db4c(_0x1b820d):lc['parse'](this['_getUrlWit'+'houtParams'](_0x25639f['original']),xe['extractPat'+'h'](_0x25639f['load']),_0x2dc8fd,this['_device'],_0x11932c['registry'],_0x11932c['options'],(_0x4d0e5f,_0xc73ba8)=>{_0x4d0e5f?_0x14db4c(_0x4d0e5f):_0x14db4c(null,new ar(_0xc73ba8,_0x11932c,this['_assets'],this['_defaultMa'+'terial']));});},_0x11932c,this['maxRetries']);}['open'](_0x2164a1,_0x3f48fc,_0x13431e){return _0x3f48fc;}['patch'](_0x106578,_0x39c3a7){}}class lN extends Ze{constructor(_0x40bfa3){super(_0x40bfa3,'container'),this['glbContain'+'erParser']=new oN(_0x40bfa3['graphicsDe'+'vice'],_0x40bfa3['assets'],-0x1b69*-0x1+0x1221+-0x192*0x1d),this['parsers']={};}set['maxRetries'](_0x242cea){this['glbContain'+'erParser']['maxRetries']=_0x242cea;for(const _0xf72b44 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0xf72b44)&&(this['parsers'][_0xf72b44]['maxRetries']=_0x242cea);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x2f7efb){return _0x2f7efb['indexOf']('?')>=0x1173+-0x1405+0x5e*0x7?_0x2f7efb['split']('?')[0x2522+0x13*-0xdf+-0x1495]:_0x2f7efb;}['_getParser'](_0x263a9f){const _0x58d1e4=_0x263a9f?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x263a9f))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x58d1e4]||this['glbContain'+'erParser'];}['load'](_0x34878e,_0x522e60,_0x54217a){typeof _0x34878e=='string'&&(_0x34878e={'load':_0x34878e,'original':_0x34878e}),this['_getParser'](_0x34878e['original'])['load'](_0x34878e,_0x522e60,_0x54217a);}['open'](_0x1c5c10,_0x53db39,_0x52f7c5){return this['_getParser'](_0x1c5c10)['open'](_0x1c5c10,_0x53db39,_0x52f7c5);}}class hN extends Ze{constructor(_0x211b43){super(_0x211b43,'css'),h(this,'decoder',null);}['load'](_0x5f590a,_0x50eb1f){typeof _0x5f590a=='string'&&(_0x5f590a={'load':_0x5f590a,'original':_0x5f590a}),nt['get'](_0x5f590a['load'],{'retry':this['maxRetries']>0x2*-0x37+-0x13ab+0x1419,'maxRetries':this['maxRetries']},(_0x5f1073,_0x4e99f3)=>{_0x5f1073?_0x50eb1f('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x5f590a['original']+'\x20['+_0x5f1073+']'):_0x50eb1f(null,_0x4e99f3);});}['openBinary'](_0x108dfa){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x108dfa);}}class cN extends Ze{constructor(_0x22f28a){super(_0x22f28a,'cubemap'),this['_device']=_0x22f28a['graphicsDe'+'vice'],this['_registry']=_0x22f28a['assets'],this['_loader']=_0x22f28a['loader'];}['load'](_0x326fd6,_0x523c52,_0x4f9c4f){this['loadAssets'](_0x4f9c4f,_0x523c52);}['open'](_0x363c14,_0x5a8c20,_0x3cfadc){return _0x3cfadc?_0x3cfadc['resource']:null;}['patch'](_0x41f624,_0x4a7d25){this['loadAssets'](_0x41f624,(_0x32b24a,_0x39c462)=>{_0x32b24a&&(_0x4a7d25['fire']('error',_0x41f624),_0x4a7d25['fire']('error:'+_0x41f624['id'],_0x32b24a,_0x41f624),_0x41f624['fire']('error',_0x41f624));});}['getAssetId'+'s'](_0x2f6788){const _0x58ff91=[];if(_0x58ff91[-0x77*-0x6+0x1*-0x21c9+0x1eff]=_0x2f6788['file'],(_0x2f6788['loadFaces']||!_0x2f6788['file'])&&_0x2f6788['data']&&_0x2f6788['data']['textures']){for(let _0xa3ec63=-0x5f9*-0x3+0x47*-0x44+0x1*0xf1;_0xa3ec63<0x3b*-0x47+0x17a3+-0x2*0x3a0;++_0xa3ec63)_0x58ff91[_0xa3ec63+(0xd7d+0x106b+-0x1de7)]=_0x2f6788['data']['textures'][_0xa3ec63];}else _0x58ff91[0x21c8+0x903+-0x2aca]=_0x58ff91[-0x1e04+-0x1a6f+0x95*0x61]=_0x58ff91[0xddf+0x2225*-0x1+0x241*0x9]=_0x58ff91[-0x1*-0x2513+-0xbf*0xd+-0x19c*0x11]=_0x58ff91[-0x92*0x1d+0x1*-0x1abb+0xe6e*0x3]=_0x58ff91[-0x341*0x1+0x2c6+-0x2b*-0x3]=null;return _0x58ff91;}['compareAss'+'etIds'](_0x5ce834,_0x5936b6){return _0x5ce834&&_0x5936b6?parseInt(_0x5ce834,0x9*-0xc9+-0x13*-0x10a+-0xca3)===_0x5ce834||typeof _0x5ce834=='string'?_0x5ce834===_0x5936b6:_0x5ce834['url']===_0x5936b6['url']:_0x5ce834!==null==(_0x5936b6!==null);}['update'](_0xd1fe9a,_0x420906,_0x168469){const _0x5c49ce=_0xd1fe9a['data']||{},_0x5a7537=_0xd1fe9a['_handlerSt'+'ate']['assets'],_0x3d2354=_0xd1fe9a['_resources'];let _0x494553,_0x17335c,_0x5ae625;const _0x1cf55e=[null,null,null,null,null,null,null],_0x1d66d3=function(){return _0x5c49ce['hasOwnProp'+'erty']('type')?_0x5c49ce['type']:_0x5c49ce['hasOwnProp'+'erty']('rgbm')?_0x5c49ce['rgbm']?ta:di:null;};if(!_0xd1fe9a['loaded']||_0x168469[0x26ea+0xd56*0x1+-0x3440]!==_0x5a7537[-0x5d4+0x5b9*0x3+0x1*-0xb57]){if(_0x168469[0x8c6+0x1*-0x6a3+-0x223]){if(_0x494553=_0x168469[-0x1ca*-0x11+0x1afa+0x1cb2*-0x2]['resource'],_0x494553['cubemap']){for(_0x5ae625=0xee8+0xd26+-0x1*0x1c0e;_0x5ae625<0x1c79+-0x6c4+-0x3d*0x5b;++_0x5ae625)_0x1cf55e[_0x5ae625+(0x307*0x3+-0x1*0x20b5+0x1*0x17a1)]=new _e(this['_device'],{'name':_0xd1fe9a['name']+('_prelitCub'+'emap')+(_0x494553['width']>>_0x5ae625),'cubemap':!(-0x1*0x23f3+0x1*0x2573+-0x180),'type':_0x1d66d3()||_0x494553['type'],'width':_0x494553['width']>>_0x5ae625,'height':_0x494553['height']>>_0x5ae625,'format':_0x494553['format'],'levels':[_0x494553['_levels'][_0x5ae625]],'addressU':ue,'addressV':ue,'mipmaps':_0x5ae625===-0x1*0x4c9+0x1993*-0x1+0x74*0x43});}else _0x1cf55e[0x18a*-0x14+-0x19*-0xd+0x1d84]=_0x494553;}}else _0x1cf55e[-0x1*-0xad2+0x1*0x21e+-0xcef]=_0x3d2354[-0x2fb*0x3+-0xdc7*0x2+0x2480]||null,_0x1cf55e[-0x8b1+-0x144b+0x1cfe]=_0x3d2354[-0x9*0x1e9+0x1b14*0x1+-0x9*0x119]||null,_0x1cf55e[-0xb*-0x295+-0x21e9*0x1+-0x1*-0x585]=_0x3d2354[0x3*-0x945+0x124b+0x987]||null,_0x1cf55e[-0x61*0x1a+0x22ef+-0x1911]=_0x3d2354[0x13*-0x1df+0x9d1+0x19c0]||null,_0x1cf55e[0x94b+-0x1*-0x25ca+-0x2f10]=_0x3d2354[0x105d+0x61*-0x4f+0xd97]||null,_0x1cf55e[0x2618+-0x23e9*0x1+0x1*-0x229]=_0x3d2354[-0x8b4+0x1ac1+-0x1207]||null;const _0x48f955=_0x168469['slice'](-0x9*-0x445+0x120*-0x10+-0x51b*0x4);if(!_0xd1fe9a['loaded']||!this['cmpArrays'](_0x48f955,_0x5a7537['slice'](0x2c7*0xd+0x2df*-0xa+-0x764))){if(_0x48f955['indexOf'](null)===-(-0x1*-0xd48+0x13c9+0x1088*-0x2)){const _0x37a7ef=_0x48f955['map'](_0x172f8c=>_0x172f8c['resource']),_0x402e1d=[];for(_0x17335c=0x2636+0x210a+-0x4740;_0x17335c<_0x37a7ef[0x7f*-0xb+0x26c7+-0x6aa*0x5]['_levels']['length'];++_0x17335c)_0x402e1d['push'](_0x37a7ef['map'](_0x4d2e23=>_0x4d2e23['_levels'][_0x17335c]));const _0x30242f=_0x37a7ef[-0xf0+0xce8+0x4*-0x2fe]['format'],_0x5e609f=new _e(this['_device'],{'name':_0xd1fe9a['name']+'_faces','cubemap':!(0x985+-0x1612+0xc8d),'type':_0x1d66d3()||_0x37a7ef[0xcc4+0x355+0x1019*-0x1]['type'],'width':_0x37a7ef[-0x7a5*0x2+0x9*0x21d+0x1*-0x3bb]['width'],'height':_0x37a7ef[0x2e1+-0x37*-0x5f+-0x174a]['height'],'format':_0x30242f===ur?Oe:_0x30242f,'mipmaps':_0x5c49ce['mipmaps']??!(-0x129d+0x21f5+-0xf58),'levels':_0x402e1d,'minFilter':_0x5c49ce['hasOwnProp'+'erty']('minFilter')?_0x5c49ce['minFilter']:_0x37a7ef[-0x297+0x1168+-0xed1]['minFilter'],'magFilter':_0x5c49ce['hasOwnProp'+'erty']('magFilter')?_0x5c49ce['magFilter']:_0x37a7ef[-0x1*-0x1d0f+0x57*0x67+0x401*-0x10]['magFilter'],'anisotropy':_0x5c49ce['hasOwnProp'+'erty']('anisotropy')?_0x5c49ce['anisotropy']:0x772*-0x4+-0x1*-0xaf1+-0x3*-0x648,'addressU':ue,'addressV':ue});_0x1cf55e[0xb*0x161+0x605*-0x1+0x926*-0x1]=_0x5e609f;}}else _0x1cf55e[0x1*0xb3a+0x2e9*0x2+0x2*-0x886]=_0x3d2354[-0x1*-0x997+0x1149+-0x1ae0]||null;if(!this['cmpArrays'](_0x1cf55e,_0x3d2354)){for(_0xd1fe9a['resources']=_0x1cf55e,_0xd1fe9a['_handlerSt'+'ate']['assetIds']=_0x420906,_0xd1fe9a['_handlerSt'+'ate']['assets']=_0x168469,_0x5ae625=-0x1*0x1cfb+0x4ae+0x184d;_0x5ae625<_0x3d2354['length'];++_0x5ae625)_0x3d2354[_0x5ae625]!==null&&_0x1cf55e['indexOf'](_0x3d2354[_0x5ae625])===-(0x6a2*0x4+-0x1271+-0x816)&&_0x3d2354[_0x5ae625]['destroy']();}for(_0x5ae625=0x72*-0x43+-0x8*0x47e+0x20e3*0x2;_0x5ae625<_0x5a7537['length'];++_0x5ae625)_0x5a7537[_0x5ae625]!==null&&_0x168469['indexOf'](_0x5a7537[_0x5ae625])===-(-0x6*0x3b5+0xf*0x21a+-0x947)&&_0x5a7537[_0x5ae625]['unload']();}['cmpArrays'](_0x2059b9,_0x323b2d){if(_0x2059b9['length']!==_0x323b2d['length'])return!(0x1347+0x17ca+-0x8*0x562);for(let _0x23bff8=0x1a09+-0x22d5*0x1+-0x466*-0x2;_0x23bff8<_0x2059b9['length'];++_0x23bff8)if(_0x2059b9[_0x23bff8]!==_0x323b2d[_0x23bff8])return!(-0xa1c+0xda4+-0x387);return!(-0x2479*0x1+0x17*0x5e+-0x19*-0x11f);}['resolveId'](_0x49c738){const _0x382f5e=parseInt(_0x49c738,0x1bbf*-0x1+0x76d*0x1+-0xa2e*-0x2);return _0x382f5e===_0x49c738||_0x382f5e['toString']()===_0x49c738?_0x382f5e:_0x49c738;}['loadAssets'](_0x1cef84,_0x47294d){_0x1cef84['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x1cef84['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x3d70b4=this,_0x5ec50e=_0x3d70b4['getAssetId'+'s'](_0x1cef84),_0x14dc50=[null,null,null,null,null,null,null],_0x301f8b=_0x1cef84['_handlerSt'+'ate']['assetIds'],_0x57a851=_0x1cef84['_handlerSt'+'ate']['assets'],_0xc79cd6=_0x3d70b4['_registry'];let _0x878770=0x130d+0x125d*0x2+-0x40*0xdf;const _0x1b33d8=function(_0x316c96,_0xaade60){_0x14dc50[_0x316c96]=_0xaade60,_0x878770--,_0x878770===0x38b*0x5+0x6b5*-0x2+0x3*-0x16f&&(_0x3d70b4['update'](_0x1cef84,_0x5ec50e,_0x14dc50),_0x47294d(null,_0x1cef84['resources']));},_0x248a0b=function(_0x3e7aec,_0x56f0d9,_0xde46b6){_0x47294d(_0x56f0d9);},_0x1d2be7=function(_0x275ffd,_0x1a94e4){_0x1a94e4['loaded']?_0x1b33d8(_0x275ffd,_0x1a94e4):(_0xc79cd6['once']('load:'+_0x1a94e4['id'],_0x1b33d8['bind'](_0x3d70b4,_0x275ffd)),_0xc79cd6['once']('error:'+_0x1a94e4['id'],_0x248a0b['bind'](_0x3d70b4,_0x275ffd)),_0x1a94e4['loading']||_0xc79cd6['load'](_0x1a94e4));};let _0x5aa524;for(let _0x2d8a86=0x1299+0x1e38+-0x30d1;_0x2d8a86<0x1275+-0x360+0x1*-0xf0e;++_0x2d8a86){const _0x238071=this['resolveId'](_0x5ec50e[_0x2d8a86]);if(!_0x238071)_0x1b33d8(_0x2d8a86,null);else{if(_0x3d70b4['compareAss'+'etIds'](_0x238071,_0x301f8b[_0x2d8a86]))_0x1d2be7(_0x2d8a86,_0x57a851[_0x2d8a86]);else{if(parseInt(_0x238071,0x443*0x5+0xb72+-0x20b7)===_0x238071)_0x5aa524=_0xc79cd6['get'](_0x238071),_0x5aa524?_0x1d2be7(_0x2d8a86,_0x5aa524):setTimeout(((_0x5bf73e,_0x5ca836)=>{const _0x3f8997=_0xc79cd6['get'](_0x5ca836);_0x3f8997?_0x1d2be7(_0x5bf73e,_0x3f8997):_0x248a0b(_0x5bf73e,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x5ca836);})['bind'](null,_0x2d8a86,_0x238071));else{const _0x1e75b8=typeof _0x238071=='string'?{'url':_0x238071,'filename':_0x238071}:_0x238071,_0x1ce4de=_0x1e75b8['url']['search']('.dds')===-(-0x2*0x20e+-0x191b+-0x37*-0x88)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(0xc69*0x1+0x4*-0x5c5+0xaac*0x1)}:null;_0x5aa524=new me(_0x1cef84['name']+'_part_'+_0x2d8a86,'texture',_0x1e75b8,_0x1ce4de),_0xc79cd6['add'](_0x5aa524),_0x1d2be7(_0x2d8a86,_0x5aa524);}}}}}}class dN extends Ze{constructor(_0x13b108){super(_0x13b108,'folder');}['load'](_0x427a95,_0x59e47c){_0x59e47c(null,null);}}class Og{constructor(_0x4b0fa3,_0x246eaa){this['type']=_0x246eaa&&_0x246eaa['type']||rc,this['em']=0x308+0x1da7*-0x1+0x1aa0,this['textures']=_0x4b0fa3,this['intensity']=-0x1*0x2566+0x3e6+0x2180,this['_data']=null,this['data']=_0x246eaa;}set['data'](_0x4eaa41){if(this['_data']=_0x4eaa41,!!_0x4eaa41&&(this['_data']['intensity']!==void(0x2d*-0xbb+0x1657+0xa88)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<-0x422+-0x1078+0x149c)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x565d4b in this['_data']['chars'])this['_data']['chars'][_0x565d4b]['map']=0x210d*-0x1+0x212*0xc+0x835;}}get['data'](){return this['_data'];}}function Kd(_0x2bf70d){return _0x2bf70d['version']<0x225a+0x1acf+0x1462*-0x3&&(_0x2bf70d['version']<0x2659*0x1+-0x26ad+-0x2b*-0x2&&(_0x2bf70d['info']['maps']=_0x2bf70d['info']['maps']||[{'width':_0x2bf70d['info']['width'],'height':_0x2bf70d['info']['height']}]),_0x2bf70d['chars']=Object['keys'](_0x2bf70d['chars']||{})['reduce']((_0x4d222e,_0x39a8a5)=>{const _0x1687a1=_0x2bf70d['chars'][_0x39a8a5],_0x20a4d5=_0x1687a1['letter']!==void(-0x8*0x26+-0x18d3+0x1a03)?_0x1687a1['letter']:dh['fromCodePo'+'int'](_0x39a8a5);return _0x2bf70d['version']<0x2275*0x1+-0xbbc+-0x16b7&&(_0x1687a1['map']=_0x1687a1['map']||0x1*0x1943+0x118d*-0x1+-0x7b6),_0x4d222e[_0x20a4d5]=_0x1687a1,_0x4d222e;},{}),_0x2bf70d['version']=-0x23d3+-0x1c6+0x259c),_0x2bf70d;}class fN extends Ze{constructor(_0x9e584){super(_0x9e584,'font'),this['_loader']=_0x9e584['loader'],this['maxRetries']=-0x1990+-0x12f+0x1abf;}['load'](_0x252e85,_0x539cb4,_0x17d8eb){typeof _0x252e85=='string'&&(_0x252e85={'load':_0x252e85,'original':_0x252e85});const _0x3ccc97=this;xe['getExtensi'+'on'](_0x252e85['original'])==='.json'?nt['get'](_0x252e85['load'],{'retry':this['maxRetries']>0xe2+-0x1bdd+0x1afb,'maxRetries':this['maxRetries']},(_0x5a82cd,_0x293f0c)=>{if(_0x5a82cd)_0x539cb4('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x252e85['original']+'\x20['+_0x5a82cd+']');else{const _0x3efe16=Kd(_0x293f0c);_0x3ccc97['_loadTextu'+'res'](_0x252e85['load']['replace']('.json','.png'),_0x3efe16,(_0x36b156,_0x32d2ce)=>{_0x36b156?_0x539cb4(_0x36b156):_0x539cb4(null,{'data':_0x3efe16,'textures':_0x32d2ce});});}}):(_0x17d8eb&&_0x17d8eb['data']&&(_0x17d8eb['data']=Kd(_0x17d8eb['data'])),this['_loadTextu'+'res'](_0x252e85['load'],_0x17d8eb&&_0x17d8eb['data'],_0x539cb4));}['_loadTextu'+'res'](_0xfe809,_0xfa4e4e,_0x4b92d1){const _0x48832d=_0xfa4e4e['info']['maps']['length'];let _0x33dd21=-0xc8b*-0x1+0x57b+-0x301*0x6,_0xd6c8f7=null;const _0x578ea6=new Array(_0x48832d),_0x247a82=this['_loader'],_0x8206cd=function(_0x4b8fc6){const _0x561ee5=function(_0x3f8529,_0x2c3c64){if(!_0xd6c8f7){if(_0x3f8529){_0xd6c8f7=_0x3f8529,_0x4b92d1(_0x3f8529);return;}_0x2c3c64['upload'](),_0x578ea6[_0x4b8fc6]=_0x2c3c64,_0x33dd21++,_0x33dd21===_0x48832d&&_0x4b92d1(null,_0x578ea6);}};_0x4b8fc6===-0x25e4+0x2*-0x124c+0x4a7c?_0x247a82['load'](_0xfe809,'texture',_0x561ee5):_0x247a82['load'](_0xfe809['replace']('.png',_0x4b8fc6+'.png'),'texture',_0x561ee5);};for(let _0x153726=0xc04+0x3*-0x17a+-0x796;_0x153726<_0x48832d;_0x153726++)_0x8206cd(_0x153726);}['open'](_0x704e87,_0x529cba,_0x47958f){let _0x5b8022;return _0x529cba['textures']?_0x5b8022=new Og(_0x529cba['textures'],_0x529cba['data']):_0x5b8022=new Og(_0x529cba,null),_0x5b8022;}['patch'](_0x276e91,_0x254f3d){const _0x5a1b69=_0x276e91['resource'];!_0x5a1b69['data']&&_0x276e91['data']?_0x5a1b69['data']=_0x276e91['data']:!_0x276e91['data']&&_0x5a1b69['data']&&(_0x276e91['data']=_0x5a1b69['data']),_0x276e91['data']&&(_0x276e91['data']=Kd(_0x276e91['data']));}}async function uN(){const _0x43094b=0x1*-0x6dc+-0xd7d+-0x1459*-0x1+0.28209479177387814;class _0x8baa3{constructor(_0x479919,_0x3bec44,_0x3b5807){this['x']=_0x479919,this['y']=_0x3bec44,this['z']=_0x3b5807;}}class _0x77fb9e{constructor(_0x7694d6,_0x6f2877,_0x1f418a,_0x4f3e7b){this['x']=_0x7694d6,this['y']=_0x6f2877,this['z']=_0x1f418a,this['w']=_0x4f3e7b;}}class _0x40133c{constructor(_0x194e33,_0x455b72,_0x116d91,_0x457a43){this['x']=_0x194e33,this['y']=_0x455b72,this['z']=_0x116d91,this['w']=_0x457a43;}['set'](_0x1b203a,_0x19e502,_0x19c366,_0x5210be){this['x']=_0x1b203a,this['y']=_0x19e502,this['z']=_0x19c366,this['w']=_0x5210be;}}class _0x3f5f16{constructor(_0x2fa23a,_0x3968a7,_0x17a8ce,_0x3686a2,_0x549e0d,_0x38648e,_0x17817e,_0x530d8d,_0x4a8523,_0x55bf59,_0x473d52,_0xf8b2d4,_0x443cb4,_0x399d15){const _0x260365=(_0x220e99,_0x3cf1c2)=>{const _0x378bdf=(0x21ab+0x269b*0x1+0x3*-0x1817<<_0x3cf1c2)-(-0x2127+-0xb27*-0x1+-0x2b*-0x83);return(_0x220e99&_0x378bdf)/_0x378bdf;},_0x40769c=(_0x5ac3ec,_0x5bc3c3)=>{_0x5ac3ec['x']=_0x260365(_0x5bc3c3>>>-0xbda+0x146+0xaa9*0x1,-0x21a1+-0xba2*0x3+-0x86*-0x83),_0x5ac3ec['y']=_0x260365(_0x5bc3c3>>>0x11ad+-0x427+-0xd7b,-0xe38+-0x3*-0x371+0x3ef),_0x5ac3ec['z']=_0x260365(_0x5bc3c3,0xa3*0x36+0x1852+-0x3aa9);},_0x264d7e=(_0x199391,_0x419410)=>{_0x199391['x']=_0x260365(_0x419410>>>0xb10+0xb9b*0x2+-0x222e,-0x1b07+-0x16d6+0x31e5*0x1),_0x199391['y']=_0x260365(_0x419410>>>0xa1d+-0x1*-0x13c3+-0x1dd0,-0x1bd5*-0x1+0xc*-0x93+0x1*-0x14e9),_0x199391['z']=_0x260365(_0x419410>>>0xe66+-0x4*-0x4e8+-0x1ca*0x13,0x20d0+-0x5*-0x445+0x5d*-0x95),_0x199391['w']=_0x260365(_0x419410,-0x2428+-0x25a8+0x49d8);},_0x3a7cab=(_0x34e755,_0x554893)=>{const _0x169d38=(-0x51f+-0x68e*-0x5+-0x1ba6)/(Math['sqrt'](-0x65e+0x1*-0x2096+0x26f6*0x1)*(0x4fd+-0x1*0xc73+0x2*0x3bb+0.5)),_0x4b3a64=(_0x260365(_0x554893>>>0x621+0x1e6f+0x5*-0x74c,0x24c4+0x910+-0x16e5*0x2)-(-0x455*0x1+0x1a2e*-0x1+0x1e83+0.5))*_0x169d38,_0x40d44a=(_0x260365(_0x554893>>>-0x2*0xd8d+0x2335+-0x811,-0x24*0x9c+0x202+0x13f8)-(0x17b6*0x1+-0xd50+0xf2*-0xb+0.5))*_0x169d38,_0x3c086d=(_0x260365(_0x554893,-0x1619*-0x1+-0x849*0x1+-0x29*0x56)-(-0xc*0x10+-0x187b*-0x1+-0x17bb+0.5))*_0x169d38,_0x40be02=Math['sqrt'](0x47a*-0x5+0x76c+0x3*0x4fd-(_0x4b3a64*_0x4b3a64+_0x40d44a*_0x40d44a+_0x3c086d*_0x3c086d));switch(_0x554893>>>-0x1*-0x11fb+-0x97c*0x1+0x1ad*-0x5){case 0x14d2+0x1aab*-0x1+0x5d9:_0x34e755['set'](_0x4b3a64,_0x40d44a,_0x3c086d,_0x40be02);break;case-0x16ae+0x146f+0x240:_0x34e755['set'](_0x40be02,_0x40d44a,_0x3c086d,_0x4b3a64);break;case-0x612+0x1e16+-0x1802:_0x34e755['set'](_0x40d44a,_0x40be02,_0x3c086d,_0x4b3a64);break;case 0x1*0x235c+-0x103e+-0x43*0x49:_0x34e755['set'](_0x40d44a,_0x3c086d,_0x40be02,_0x4b3a64);break;}},_0x545d34=(_0x38f68c,_0x4732cb,_0x2c5ef0)=>_0x38f68c*(-0xc8a*0x3+-0x22eb+0x488a*0x1-_0x2c5ef0)+_0x4732cb*_0x2c5ef0,_0x60aaac=[-0xa1f+-0x2*0x142+-0x2*-0x653,0x3*0xbd8+-0x1*0x1576+0x257*-0x6,0x3*0xbce+0x121c*0x1+-0x1*0x3577][_0x17817e-(0x24d8+0x1*-0x14ca+-0x100d)],_0x2848da=0x2089+-0x239a+-0x7*-0x71;this['read']=_0xdf1d4a=>{const _0x5c19d7=Math['floor'](_0xdf1d4a/(0x249+0x1c1b+-0x1d64))*_0x3968a7;if(_0x530d8d&&(_0x40769c(_0x530d8d,_0x17a8ce[_0xdf1d4a*_0x2848da+(-0xe3*-0xf+0xf6b+-0x1cb8)]),_0x530d8d['x']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0x1*0x199c+-0x23d+0x1*0x1bd9)],_0x2fa23a[_0x5c19d7+(0x233d+0xc6d*0x3+-0x4881*0x1)],_0x530d8d['x']),_0x530d8d['y']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x3*0xb64+-0x7*0x3ed+-0x6b0)],_0x2fa23a[_0x5c19d7+(0x1cb4+-0x2264+0x5b4)],_0x530d8d['y']),_0x530d8d['z']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x110d*0x1+0x1ca3*0x1+-0x2dae)],_0x2fa23a[_0x5c19d7+(-0x135c+-0x5de*0x1+0x1*0x193f)],_0x530d8d['z'])),_0x4a8523&&_0x3a7cab(_0x4a8523,_0x17a8ce[_0xdf1d4a*_0x2848da+(-0x1700+0x3ff+0x1302)]),_0x55bf59&&(_0x40769c(_0x55bf59,_0x17a8ce[_0xdf1d4a*_0x2848da+(0x48a+0x22cf+-0x2757)]),_0x55bf59['x']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0xe1f+0x73a+0x6eb*0x1)],_0x2fa23a[_0x5c19d7+(-0x1*-0x2151+0x1*0x213+-0x235b)],_0x55bf59['x']),_0x55bf59['y']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0x106*0x3+0x774*0x1+-0x45b)],_0x2fa23a[_0x5c19d7+(-0xe71*-0x2+0x2629+-0x4301)],_0x55bf59['y']),_0x55bf59['z']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0x1c73+-0x1b7a+0x37f5)],_0x2fa23a[_0x5c19d7+(-0x60d*-0x3+0x5d*0x1+0x1279*-0x1)],_0x55bf59['z'])),_0x473d52&&(_0x264d7e(_0x473d52,_0x17a8ce[_0xdf1d4a*_0x2848da+(0xeae*-0x1+0x1eec*0x1+-0x103b)]),_0x3968a7>-0x382*0x9+0x20*-0xe5+0x3c3e&&(_0x473d52['x']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x31*0x1+0x18c5+-0x18ea)],_0x2fa23a[_0x5c19d7+(-0x1767+-0x1*-0x1a91+0x3*-0x109)],_0x473d52['x']),_0x473d52['y']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0xec5+-0x1aca+0x299c)],_0x2fa23a[_0x5c19d7+(-0xe*-0x18d+-0x1*-0xf56+-0x24fc)],_0x473d52['y']),_0x473d52['z']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0xad8+0x231e+-0x4*0x60e)],_0x2fa23a[_0x5c19d7+(-0x1abc+-0x17*-0x1+-0x2*-0xd5b)],_0x473d52['z']))),_0xf8b2d4&&(_0x40769c(_0xf8b2d4,_0x17a8ce[_0xdf1d4a*_0x2848da+(-0xae7*-0x3+-0x1d1b+-0x396)]),_0xf8b2d4['x']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x1*-0x12c5+0x6db*-0x3+-0x184*-0x1a)],_0x2fa23a[_0x5c19d7+(-0x1947*0x1+-0x2155+0x3ab1)],_0xf8b2d4['x']),_0xf8b2d4['y']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x1a1+0x1*0x255c+-0x26ea)],_0x2fa23a[_0x5c19d7+(-0x1f*0x6a+0x1b15+-0x19*0x91)],_0xf8b2d4['y']),_0xf8b2d4['z']=_0x545d34(_0x2fa23a[_0x5c19d7+(-0x16*0xce+-0x496*-0x3+-0x2*-0x203)],_0x2fa23a[_0x5c19d7+(-0x89*0x3b+-0x14ca+-0x1*-0x3474)],_0xf8b2d4['z'])),_0x443cb4&&(_0x40769c(_0x443cb4,_0x17a8ce[_0xdf1d4a*_0x2848da+(0xf87+-0x1dfe+-0x4*-0x39f)]),_0x443cb4['x']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x76+0xae*-0x1a+0x8a7*0x2)],_0x2fa23a[_0x5c19d7+(0x258e+-0x177e+-0x2cb*0x5)],_0x443cb4['x']),_0x443cb4['y']=_0x545d34(_0x2fa23a[_0x5c19d7+(0x1b*-0x10a+-0x150b*0x1+0x3133)],_0x2fa23a[_0x5c19d7+(-0x2*-0xbb9+-0x506*0x1+-0x1251)],_0x443cb4['y'])),_0x399d15&&_0x17817e>-0x46a*0x1+-0x1*-0x8f2+0xa*-0x74){const _0x52f845=[_0x3686a2,_0x549e0d,_0x38648e];for(let _0x546718=0x5*0x209+-0x156b+-0x2*-0x59f;_0x546718<0xa6*0x38+0x2478+-0x48c5;++_0x546718)for(let _0x420f34=0x22c*0x3+0x25a5*0x1+-0x253*0x13;_0x420f34<0x7*0xd6+0x1297*-0x1+0xccc;++_0x420f34)_0x399d15[_0x546718*(0x5*0x6d5+-0x1edf+-0x33b)+_0x420f34]=_0x420f34<_0x60aaac?_0x52f845[_0x546718][_0xdf1d4a*(-0x1b40+-0x92+0x1be2)+_0x420f34]*((-0xdef+-0x12e*-0x17+-0x1*0xd2b)/(-0x1d03+-0x6*-0x2a4+-0x4a*-0x31))-(-0x582*0x4+-0x18d0+0x2edc):0x102d+0x89*0x14+-0x1*0x1ae1;}};}}self['onmessage']=async _0x434141=>{const {data:_0x31d508}=_0x434141;switch(_0x31d508['type']){case'initWorker':break;case'decompress':_0x39a85f(_0x31d508['numSplats'],_0x31d508['chunkData'],_0x31d508['chunkSize'],_0x31d508['vertexData'],_0x31d508['shData0'],_0x31d508['shData1'],_0x31d508['shData2'],_0x31d508['shBands']);break;}};const _0x39a85f=(_0x148d77,_0x2f2d1b,_0x5d1367,_0x5331b4,_0x2aace8,_0x477894,_0x2a7d38,_0x1bc2ac)=>{const _0x3995f4=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x1bc2ac>0x1*0x1d4+0x1793+0x1967*-0x1){const _0x42021b=[];for(let _0x159c14=0xe65+0x4f*-0x6d+0x6*0x335;_0x159c14<-0x25b5+-0x4d*0x58+0x405a;++_0x159c14)_0x42021b['push']('f_rest_'+_0x159c14);_0x3995f4['splice'](_0x3995f4['indexOf']('f_dc_0')+(-0x134*-0x1a+-0x2*0x11a1+-0x1*-0x3fb),-0xaf0+-0x4*-0x3f1+-0x4d4,..._0x42021b);}const _0x2a435f={};_0x3995f4['forEach'](_0x369ac1=>{_0x2a435f[_0x369ac1]=new Float32Array(_0x148d77);});const _0x15a058=new _0x8baa3(),_0x362afc=new _0x40133c(),_0x44d2c5=new _0x8baa3(),_0x1108f1=new _0x77fb9e(),_0x3fd515=new _0x8baa3(),_0x19d1cf=new _0x8baa3(),_0x54eb78=_0x1bc2ac>-0x2dd*-0x1+0x68f+-0x96c?new Float32Array(0x1fc8+0x85*-0x3b+-0xf4):null,_0x54d7df=new _0x3f5f16(_0x2f2d1b,_0x5d1367,_0x5331b4,_0x2aace8,_0x477894,_0x2a7d38,_0x1bc2ac,_0x15a058,_0x362afc,_0x44d2c5,_0x1108f1,_0x3fd515,_0x19d1cf,_0x54eb78);for(let _0x1a79d9=-0x3f3+-0x2371+0x2764;_0x1a79d9<_0x148d77;++_0x1a79d9)if(_0x54d7df['read'](_0x1a79d9),_0x2a435f['x'][_0x1a79d9]=_0x15a058['x'],_0x2a435f['y'][_0x1a79d9]=_0x15a058['y'],_0x2a435f['z'][_0x1a79d9]=_0x15a058['z'],_0x2a435f['rot_1'][_0x1a79d9]=_0x362afc['x'],_0x2a435f['rot_2'][_0x1a79d9]=_0x362afc['y'],_0x2a435f['rot_3'][_0x1a79d9]=_0x362afc['z'],_0x2a435f['rot_0'][_0x1a79d9]=_0x362afc['w'],_0x2a435f['scale_0'][_0x1a79d9]=_0x44d2c5['x'],_0x2a435f['scale_1'][_0x1a79d9]=_0x44d2c5['y'],_0x2a435f['scale_2'][_0x1a79d9]=_0x44d2c5['z'],_0x2a435f['motion_0'][_0x1a79d9]=_0x3fd515['x'],_0x2a435f['motion_1'][_0x1a79d9]=_0x3fd515['y'],_0x2a435f['motion_2'][_0x1a79d9]=_0x3fd515['z'],_0x2a435f['t_scale'][_0x1a79d9]=_0x19d1cf['x'],_0x2a435f['t'][_0x1a79d9]=_0x19d1cf['y'],_0x2a435f['f_dc_0'][_0x1a79d9]=(_0x1108f1['x']-(-0x26da+0x34c*0x1+0x238e+0.5))/_0x43094b,_0x2a435f['f_dc_1'][_0x1a79d9]=(_0x1108f1['y']-(-0x2009+-0x416*0x7+0x331*0x13+0.5))/_0x43094b,_0x2a435f['f_dc_2'][_0x1a79d9]=(_0x1108f1['z']-(0x1*0x823+0x87d+-0x10a0+0.5))/_0x43094b,_0x2a435f['opacity'][_0x1a79d9]=_0x1108f1['w']<=0xe*-0x3b+-0x278+-0x2d9*-0x2?-(-0xb*-0x332+-0x5*0x523+-0x94f):_0x1108f1['w']>=0x2657+-0x1*-0x74b+-0x2da1?0x2*0x6f1+-0x1d10+0xf56:-Math['log']((-0x683+-0xf8f+-0x1*-0x1613)/_0x1108f1['w']-(0x3b6+0x5a1+0xef*-0xa)),_0x54eb78){for(let _0x3ab6bb=0x376*-0x6+-0x1408+0x1466*0x2;_0x3ab6bb<0xb05+-0x1*0xf5f+0x3d*0x13;++_0x3ab6bb)_0x2a435f['f_rest_'+_0x3ab6bb][_0x1a79d9]=_0x54eb78[_0x3ab6bb];}let _0xb00a5={'x':_0x2a435f['x'],'y':_0x2a435f['y'],'z':_0x2a435f['z'],'rot_1':_0x2a435f['rot_1'],'rot_2':_0x2a435f['rot_2'],'rot_3':_0x2a435f['rot_3'],'rot_0':_0x2a435f['rot_0'],'scale_0':_0x2a435f['scale_0'],'scale_1':_0x2a435f['scale_1'],'scale_2':_0x2a435f['scale_2'],'motion_0':_0x2a435f['motion_0'],'motion_1':_0x2a435f['motion_1'],'motion_2':_0x2a435f['motion_2'],'t_scale':_0x2a435f['t_scale'],'t':_0x2a435f['t'],'f_dc_0':_0x2a435f['f_dc_0'],'f_dc_1':_0x2a435f['f_dc_1'],'f_dc_2':_0x2a435f['f_dc_2'],'opacity':_0x2a435f['opacity']};_0x54eb78&&(_0xb00a5={..._0xb00a5,'f_rest_0':_0x2a435f['f_rest_0'],'f_rest_1':_0x2a435f['f_rest_1'],'f_rest_2':_0x2a435f['f_rest_2'],'f_rest_3':_0x2a435f['f_rest_3'],'f_rest_4':_0x2a435f['f_rest_4'],'f_rest_5':_0x2a435f['f_rest_5'],'f_rest_6':_0x2a435f['f_rest_6'],'f_rest_7':_0x2a435f['f_rest_7'],'f_rest_8':_0x2a435f['f_rest_8'],'f_rest_9':_0x2a435f['f_rest_9'],'f_rest_10':_0x2a435f['f_rest_10'],'f_rest_11':_0x2a435f['f_rest_11'],'f_rest_12':_0x2a435f['f_rest_12'],'f_rest_13':_0x2a435f['f_rest_13'],'f_rest_14':_0x2a435f['f_rest_14'],'f_rest_15':_0x2a435f['f_rest_15'],'f_rest_16':_0x2a435f['f_rest_16'],'f_rest_17':_0x2a435f['f_rest_17'],'f_rest_18':_0x2a435f['f_rest_18'],'f_rest_19':_0x2a435f['f_rest_19'],'f_rest_20':_0x2a435f['f_rest_20'],'f_rest_21':_0x2a435f['f_rest_21'],'f_rest_22':_0x2a435f['f_rest_22'],'f_rest_23':_0x2a435f['f_rest_23'],'f_rest_24':_0x2a435f['f_rest_24'],'f_rest_25':_0x2a435f['f_rest_25'],'f_rest_26':_0x2a435f['f_rest_26'],'f_rest_27':_0x2a435f['f_rest_27'],'f_rest_28':_0x2a435f['f_rest_28'],'f_rest_29':_0x2a435f['f_rest_29'],'f_rest_30':_0x2a435f['f_rest_30'],'f_rest_31':_0x2a435f['f_rest_31'],'f_rest_32':_0x2a435f['f_rest_32'],'f_rest_33':_0x2a435f['f_rest_33'],'f_rest_34':_0x2a435f['f_rest_34'],'f_rest_35':_0x2a435f['f_rest_35'],'f_rest_36':_0x2a435f['f_rest_36'],'f_rest_37':_0x2a435f['f_rest_37'],'f_rest_38':_0x2a435f['f_rest_38'],'f_rest_39':_0x2a435f['f_rest_39'],'f_rest_40':_0x2a435f['f_rest_40'],'f_rest_41':_0x2a435f['f_rest_41'],'f_rest_42':_0x2a435f['f_rest_42'],'f_rest_43':_0x2a435f['f_rest_43'],'f_rest_44':_0x2a435f['f_rest_44']});const _0x222848=Object['values'](_0xb00a5)['map'](_0x139583=>_0x139583['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0xb00a5},_0x222848);};}class mN extends pe{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+uN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x5e98b9=>{if(!this['worker'])return;const {data:_0x379f27}=_0x5e98b9;switch(_0x379f27['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x379f27['data']);break;}};}['decompress'](_0x343e43,_0x1b1000,_0x38ac5c,_0x2b0b1b,_0x919868,_0x34dffe,_0x38140f,_0x387c86){const _0xaba8e9=[_0x1b1000['buffer'],_0x2b0b1b['buffer']];_0x919868&&_0xaba8e9['push'](_0x919868['buffer']),_0x34dffe&&_0xaba8e9['push'](_0x34dffe['buffer']),_0x38140f&&_0xaba8e9['push'](_0x38140f['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x343e43,'chunkData':_0x1b1000,'chunkSize':_0x38ac5c,'vertexData':_0x2b0b1b,'shData0':_0x919868,'shData1':_0x34dffe,'shData2':_0x38140f,'shBands':_0x387c86},_0xaba8e9);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class pN{constructor(_0x59fd8a,_0x4a878f,_0x136e10,_0x16dba4,_0x5c0a13,_0x17765c,_0x4285a1,_0x211f38){const _0x1f3757=(_0x4814cb,_0x22e275)=>{const _0x2f8b8c=(0x18b5+-0x2b*0xd7+-0x1*-0xb69<<_0x22e275)-(0x3d1*0x8+-0x25c+-0x1c2b);return(_0x4814cb&_0x2f8b8c)/_0x2f8b8c;},_0x272cfc=(_0x1d767b,_0x2349b0)=>{_0x1d767b['x']=_0x1f3757(_0x2349b0>>>0xa42+0x1*-0x475+-0x5b8,0x181d+-0x1b93+-0x3*-0x12b),_0x1d767b['y']=_0x1f3757(_0x2349b0>>>-0x1115*0x2+0x24a1+-0x26c,0x17c0+0x860+-0x6f*0x4a),_0x1d767b['z']=_0x1f3757(_0x2349b0,0x8a6+-0x1162+-0x15*-0x6b);},_0x1499cd=(_0x4335ae,_0x38b25d)=>{_0x4335ae['x']=_0x1f3757(_0x38b25d>>>0xf*-0x1c7+0x5*-0x7b5+0x1*0x414a,0x1b8b+0x8ea*0x3+-0x2b*0x143),_0x4335ae['y']=_0x1f3757(_0x38b25d>>>-0x4*-0x350+-0x66*0x2f+0x2c5*0x2,-0x76f+0x1*0xe54+-0x6dd),_0x4335ae['z']=_0x1f3757(_0x38b25d>>>-0x25*-0x1a+-0x3*0xc0b+0x2067,0x1404+-0x12e5+-0x3*0x5d),_0x4335ae['w']=_0x1f3757(_0x38b25d,-0x1043+-0x98f+-0x3*-0x89e);},_0x5110fc=(_0x175aa3,_0x359fbc)=>{const _0x27cc77=(-0x1029+-0xacc*0x1+-0x3da*-0x7)/(Math['sqrt'](0x1ed+0x92f+0xb1a*-0x1)*(-0x1730+-0x1*-0x1e67+0x1*-0x737+0.5)),_0xb81855=(_0x1f3757(_0x359fbc>>>-0x29a*0x7+0x201+0x1049,0xaab*-0x3+-0x4e4+0x24ef)-(0x6a1*-0x1+0x140f+-0xd6e+0.5))*_0x27cc77,_0x5ac971=(_0x1f3757(_0x359fbc>>>-0x173c*0x1+-0x17*-0x146+-0xe*0x6e,-0x1e9f+0xa*-0x3e1+0x4573*0x1)-(-0x18b7+-0x233+0x1aea+0.5))*_0x27cc77,_0x38ccfc=(_0x1f3757(_0x359fbc,-0x1*-0x3f1+-0x16e7+0x1300)-(-0xa3*-0x26+-0x1ad5+-0x2d*-0xf+0.5))*_0x27cc77,_0x5064df=Math['sqrt'](0x1fa7+0x712+-0x1*0x26b8-(_0xb81855*_0xb81855+_0x5ac971*_0x5ac971+_0x38ccfc*_0x38ccfc));switch(_0x359fbc>>>-0x20d9+-0xe2+0x21d9){case 0x191+-0x11*-0x247+-0x2848:_0x175aa3['set'](_0xb81855,_0x5ac971,_0x38ccfc,_0x5064df);break;case 0xa*0x15a+-0x121a+0x497:_0x175aa3['set'](_0x5064df,_0x5ac971,_0x38ccfc,_0xb81855);break;case 0x1372+0x1a11+-0x2d81:_0x175aa3['set'](_0x5ac971,_0x5064df,_0x38ccfc,_0xb81855);break;case-0x1c3*0x2+-0x19*0x184+-0x15*-0x1f9:_0x175aa3['set'](_0x5ac971,_0x38ccfc,_0x5064df,_0xb81855);break;}},_0x4cbb52=(_0x308bc7,_0x45407c,_0xae2e74)=>_0x308bc7*(-0x5a*0x2+0x265a+-0x25a5*0x1-_0xae2e74)+_0x45407c*_0xae2e74,{chunkData:_0x45c3e3,chunkSize:_0x2793e1,vertexData:_0x22c206,shData0:_0x54511c,shData1:_0x42f807,shData2:_0x1b184e,shBands:_0x185a84}=_0x59fd8a,_0x79b7fa=[0x262+0x5b*0xf+0x22*-0x3a,0xe95+0x1*0xe8f+-0x1d1c,-0x121e+-0xf3f+0x1*0x216c][_0x185a84-(0x17*-0x3d+-0x178*-0x7+-0x4cc)],_0x2dbafb=0xde7*0x1+-0xa77+-0x13*0x2e;this['read']=_0x15c27a=>{const _0x263d60=Math['floor'](_0x15c27a/(0x195a+-0x1798+0xc2*-0x1))*_0x2793e1;if(_0x4a878f&&(_0x272cfc(_0x4a878f,_0x22c206[_0x15c27a*_0x2dbafb+(-0x3c*0x3a+-0x31*-0x4c+0x2*-0x7a)]),_0x4a878f['x']=_0x4cbb52(_0x45c3e3[_0x263d60+(0x1783+0x12fe+0x9*-0x4b9)],_0x45c3e3[_0x263d60+(0x2707*-0x1+-0x1c4d+0x4357)],_0x4a878f['x']),_0x4a878f['y']=_0x4cbb52(_0x45c3e3[_0x263d60+(0x11ca+-0x1ddc+0x1*0xc13)],_0x45c3e3[_0x263d60+(0x2*-0x52f+0x1436*-0x1+-0x3d3*-0x8)],_0x4a878f['y']),_0x4a878f['z']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0xe01+0x473*-0x7+-0xaa*-0x44)],_0x45c3e3[_0x263d60+(0x2*0x272+0x11f*-0x11+0xe30)],_0x4a878f['z'])),_0x136e10&&_0x5110fc(_0x136e10,_0x22c206[_0x15c27a*_0x2dbafb+(0x20*0x100+-0x1*0xc83+0x4df*-0x4)]),_0x16dba4&&(_0x272cfc(_0x16dba4,_0x22c206[_0x15c27a*_0x2dbafb+(-0x1a39+-0x1*-0x989+0x10b2)]),_0x16dba4['x']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0xf44*-0x1+-0x7*0x419+0xd71)],_0x45c3e3[_0x263d60+(0x2*-0xe7b+-0x5*0x548+-0x1*-0x3767)],_0x16dba4['x']),_0x16dba4['y']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x1e13+-0x183f+0x3659)],_0x45c3e3[_0x263d60+(-0x34*0x33+0x1e23+0x13bd*-0x1)],_0x16dba4['y']),_0x16dba4['z']=_0x4cbb52(_0x45c3e3[_0x263d60+(0x1618+0x1fe4+-0x35f4)],_0x45c3e3[_0x263d60+(-0x1295*0x2+0x2569+-0x2*0x1a)],_0x16dba4['z'])),_0x5c0a13&&(_0x1499cd(_0x5c0a13,_0x22c206[_0x15c27a*_0x2dbafb+(-0x1*0x1f0d+0x16c1+0x84f)]),_0x2793e1>0x1e5d+-0x26b5+0x864&&(_0x5c0a13['x']=_0x4cbb52(_0x45c3e3[_0x263d60+(0x45e+-0x2054+-0x2cd*-0xa)],_0x45c3e3[_0x263d60+(-0x1*0xce3+-0xc2a+0x191c*0x1)],_0x5c0a13['x']),_0x5c0a13['y']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0xbb*-0x23+-0x303+-0x1681)],_0x45c3e3[_0x263d60+(-0x1b34+0x10e1*-0x1+0x1*0x2c25)],_0x5c0a13['y']),_0x5c0a13['z']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x1*0xc85+-0x867*-0x1+0x42c)],_0x45c3e3[_0x263d60+(-0xcf*-0x17+0x47*-0x83+0x31*0x5d)],_0x5c0a13['z']))),_0x17765c&&(_0x272cfc(_0x17765c,_0x22c206[_0x15c27a*_0x2dbafb+(0x24ac+0x131d+-0x1297*0x3)]),_0x17765c['x']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x80*0x4e+0x959+0x1db9)],_0x45c3e3[_0x263d60+(0x38b+0x18bb+-0x1c31)],_0x17765c['x']),_0x17765c['y']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x1ec6+0x2*0x1e5+-0x1*-0x1b0f)],_0x45c3e3[_0x263d60+(-0x1efd+-0x8*-0x347+-0x1*-0x4db)],_0x17765c['y']),_0x17765c['z']=_0x4cbb52(_0x45c3e3[_0x263d60+(0x4*0x6d3+-0x166b*-0x1+-0x31a3)],_0x45c3e3[_0x263d60+(0x5*0x463+0x2*-0x314+0x2*-0x7d8)],_0x17765c['z'])),_0x4285a1&&(_0x272cfc(_0x4285a1,_0x22c206[_0x15c27a*_0x2dbafb+(0x1*-0x22a3+0x1da5+0x503*0x1)]),_0x4285a1['x']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x17c0+0x1*-0x13b5+0x1*0x2b8d)],_0x45c3e3[_0x263d60+(0x1*0xccf+-0x139a+0x6e4)],_0x4285a1['x']),_0x4285a1['y']=_0x4cbb52(_0x45c3e3[_0x263d60+(-0x1fac+-0x1705+0x437*0xd)],_0x45c3e3[_0x263d60+(0x9f*-0x3b+-0x899+0x2d59)],_0x4285a1['y'])),_0x211f38&&_0x185a84>-0x114a+0x1*-0x531+0x167b){const _0x140410=[_0x54511c,_0x42f807,_0x1b184e];for(let _0x59d61e=-0x6ed+0x17*0xe6+-0xdbd;_0x59d61e<0x1f7a+0x41*0x20+-0x1*0x2797;++_0x59d61e)for(let _0x196ea0=0x259c+0x201a+-0x45b6;_0x196ea0<-0x152b*-0x1+0x72*0x1+-0x158e;++_0x196ea0)_0x211f38[_0x59d61e*(0x1*-0x1a24+-0xccc+0x43*0x95)+_0x196ea0]=_0x196ea0<_0x79b7fa?_0x140410[_0x59d61e][_0x15c27a*(-0x5*-0x19a+0x23*-0x2f+-0x185)+_0x196ea0]*((0x1*0x1093+0x929*0x1+-0x19b4)/(-0x4f7+-0x46b*-0x8+-0x1d62))-(0x1488+-0x9*-0x258+-0x2*0x14ce):0x2bf+0x232*0x2+0x7*-0x105;}};}}class _N{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x2cddee,_0x367070,_0x520a9a,_0x5bcfc0,_0x3b3796,_0x4efc55,_0x2a5327){return new pN(this,_0x2cddee,_0x367070,_0x520a9a,_0x5bcfc0,_0x3b3796,_0x4efc55,_0x2a5327);}['calcAabb'](_0x4edda0){const {chunkData:_0x3a0ca5,numChunks:_0x28eeb4,chunkSize:_0x280d01}=this;let _0x32b0e3=Math['exp'](Math['max'](_0x3a0ca5[0x2537*-0x1+-0xebb+0x33fb],_0x3a0ca5[0x1*-0x16d3+-0xf8b+0x2668],_0x3a0ca5[-0x1c79+-0x33a*0x1+0x1fbe])),_0x6e7a6d=_0x3a0ca5[-0xdd9+-0x1cff*0x1+0xc*0x392]-_0x32b0e3,_0x54d908=_0x3a0ca5[0x7*0x3f5+-0x332+-0x1880]-_0x32b0e3,_0x2ebd13=_0x3a0ca5[0x1bd9*0x1+0x26b8+0x1*-0x428f]-_0x32b0e3,_0x2e02e6=_0x3a0ca5[-0x12f4+0x5*0x4f8+-0x5e1]+_0x32b0e3,_0x5b3f86=_0x3a0ca5[0x1f*0x131+0xde5*0x1+-0x32d0]+_0x32b0e3,_0xf18b88=_0x3a0ca5[-0x2525+-0x83a+-0x16b2*-0x2]+_0x32b0e3;for(let _0x5af47d=-0x2*0xd2b+-0x48b+0x43*0x76;_0x5af47d<_0x28eeb4;++_0x5af47d){const _0x3825bd=_0x5af47d*_0x280d01;_0x32b0e3=Math['exp'](Math['max'](_0x3a0ca5[_0x3825bd+(-0x9c+-0x2031+0xaf2*0x3)],_0x3a0ca5[_0x3825bd+(0xd5b+0x2469+-0x9f2*0x5)],_0x3a0ca5[_0x3825bd+(0xda6*-0x1+0x2395*0x1+0x4*-0x579)])),_0x6e7a6d=Math['min'](_0x6e7a6d,_0x3a0ca5[_0x3825bd+(-0x1828+-0x2476+0x3c9e)]-_0x32b0e3),_0x54d908=Math['min'](_0x54d908,_0x3a0ca5[_0x3825bd+(-0xbb3+0x12d5+-0x49*0x19)]-_0x32b0e3),_0x2ebd13=Math['min'](_0x2ebd13,_0x3a0ca5[_0x3825bd+(-0xe71+-0x1ad+-0x6*-0x2b0)]-_0x32b0e3),_0x2e02e6=Math['max'](_0x2e02e6,_0x3a0ca5[_0x3825bd+(0x1113+0x2*-0x229+-0xcbe)]+_0x32b0e3),_0x5b3f86=Math['max'](_0x5b3f86,_0x3a0ca5[_0x3825bd+(0x24b5+0x107*0x7+0x2be2*-0x1)]+_0x32b0e3),_0xf18b88=Math['max'](_0xf18b88,_0x3a0ca5[_0x3825bd+(-0x35*-0x8+-0x1b7e+-0x1*-0x19db)]+_0x32b0e3);}return _0x4edda0['center']['set']((_0x6e7a6d+_0x2e02e6)*(0x267f+0x1339+-0x39b8+0.5),(_0x54d908+_0x5b3f86)*(-0x464+0x2a*-0x76+-0x13*-0x140+0.5),(_0x2ebd13+_0xf18b88)*(-0x1314+-0x1cc3*-0x1+-0x1*0x9af+0.5)),_0x4edda0['halfExtent'+'s']['set']((_0x2e02e6-_0x6e7a6d)*(-0x9a8+0x24f6+-0x1b4e+0.5),(_0x5b3f86-_0x54d908)*(-0x263d+-0x3*-0x217+-0x554*-0x6+0.5),(_0xf18b88-_0x2ebd13)*(0x2f5+-0x135d*-0x1+-0x1652+0.5)),!(-0x1761+-0x12d3+0x2a34);}['getCenters'](_0x5c43cf){const {vertexData:_0x2068c3,chunkData:_0x409b59,numChunks:_0x2d3612,chunkSize:_0x63870}=this;let _0x4215a9,_0xcaa53,_0x560031,_0x47aa4f,_0x24720b,_0x54b64a;for(let _0x30ef1a=-0x1009*0x2+0x34c*0xa+-0xe6;_0x30ef1a<_0x2d3612;++_0x30ef1a){const _0x956560=_0x30ef1a*_0x63870;_0x4215a9=_0x409b59[_0x956560+(-0x1*-0xc05+0x29*0x77+-0x1f14)],_0xcaa53=_0x409b59[_0x956560+(0x2551+0x18d7+-0x3e27)],_0x560031=_0x409b59[_0x956560+(-0x1*0x8b+-0x22d*-0x11+0xb*-0x350)],_0x47aa4f=_0x409b59[_0x956560+(-0x959*-0x2+0x1490+-0x273f)],_0x24720b=_0x409b59[_0x956560+(0x219*-0x1+0x17f8+0x5*-0x45f)],_0x54b64a=_0x409b59[_0x956560+(0x2665*-0x1+-0xc3e*-0x1+0x1a2c)];const _0x9bcab5=Math['min'](this['numSplats'],(_0x30ef1a+(0x78f+-0x13e4+0xc56))*(-0xc1*-0xd+0xf6d+-0x183a));for(let _0x1ff3e7=_0x30ef1a*(-0xb51+-0x66*-0x38+-0x3*0x355);_0x1ff3e7<_0x9bcab5;++_0x1ff3e7){const _0x3d5e63=_0x2068c3[_0x1ff3e7*(-0x17e1*0x1+-0x1*-0x331+0x14b4)],_0x3a66c6=(_0x3d5e63>>>-0x1*0x16f6+-0x104+0x3*0x805)/(-0x197e+-0x1*0xf3d+-0x46e*-0xb),_0xebe64c=(_0x3d5e63>>>0x160b+-0x1beb*-0x1+0x31eb*-0x1&-0x1c7*-0xd+0x1c11+0xd*-0x3a1)/(0x16c9+-0x23bf+0x10f5),_0x37a40c=(_0x3d5e63&-0xfd7*0x2+0xbf*-0x19+0x4*0xe95)/(-0x1d53+-0xc*0x266+0x210d*0x2);_0x5c43cf[_0x1ff3e7*(-0x7*0x3c5+0x8*-0x2bd+0x304e)+(-0x551*-0x1+0xb18+-0x1069)]=(-0x19*0x2c+0x1*0x249e+-0x2051-_0x3a66c6)*_0x4215a9+_0x3a66c6*_0x47aa4f,_0x5c43cf[_0x1ff3e7*(-0x6*0xe9+0x39a*0x3+0x15*-0x41)+(0x16a8+0xe*-0x1eb+0x5*0xd7)]=(-0x69a+0x7ae+-0x113-_0xebe64c)*_0xcaa53+_0xebe64c*_0x24720b,_0x5c43cf[_0x1ff3e7*(0x1c9+0x213b+0x3*-0xbab)+(0x1*-0x60a+-0x59*-0x1f+-0x4bb)]=(0x199*-0x13+-0x241*-0xc+0x350-_0x37a40c)*_0x560031+_0x37a40c*_0x54b64a;}}}['getChunks'](_0x40ac8e){const {chunkData:_0x234c49,numChunks:_0x16e472,chunkSize:_0x31931a}=this;let _0x3b5d4c,_0x30cfd2,_0x3818a1,_0x25d47d,_0x4e9937,_0xd9810e;for(let _0x499685=0x1508*0x1+0x89f+-0x1da7;_0x499685<_0x16e472;++_0x499685){const _0x2f7d73=_0x499685*_0x31931a;_0x3b5d4c=_0x234c49[_0x2f7d73+(-0x1*0xde+-0x5*-0x4c1+-0x1c3*0xd)],_0x30cfd2=_0x234c49[_0x2f7d73+(0x1fa7+0x20eb*-0x1+0x145)],_0x3818a1=_0x234c49[_0x2f7d73+(0x1c06+-0x2f9*-0x5+-0x2ae1)],_0x25d47d=_0x234c49[_0x2f7d73+(0x1dba+-0x1f39+0x182)],_0x4e9937=_0x234c49[_0x2f7d73+(0x1a61+-0x14e*0x7+-0x113b)],_0xd9810e=_0x234c49[_0x2f7d73+(0x22+-0x65b+0x31f*0x2)],_0x40ac8e[_0x499685*(0x4d6+0x1bf4*0x1+-0x20c4)+(0x1*-0x48b+-0x250e+0x2999)]=_0x3b5d4c,_0x40ac8e[_0x499685*(-0x1234+0x4b6+0xd84)+(0x578*0x3+-0x1268+0x201)]=_0x30cfd2,_0x40ac8e[_0x499685*(-0x15f3+0x1288+0x371)+(0x1d0*0x1+0x1*0x1cce+0xf4e*-0x2)]=_0x3818a1,_0x40ac8e[_0x499685*(0x136*-0xb+-0xfbf+0x1d17)+(0x1896+0x22d4+0x1*-0x3b67)]=_0x25d47d,_0x40ac8e[_0x499685*(0x125*-0x1+0x2*0x4e5+0x89f*-0x1)+(0x1a67+-0x166*-0xd+0x1*-0x2c91)]=_0x4e9937,_0x40ac8e[_0x499685*(0x47*0x2f+-0x67*0xc+0x5*-0x1a3)+(-0xb65+-0x16a*-0x2+-0x1*-0x896)]=_0xd9810e;}}['calcFocalP'+'oint'](_0x56b500){const {chunkData:_0x13093c,numChunks:_0x59fd31,chunkSize:_0x580326}=this;_0x56b500['x']=-0x149d+0x1b*-0x56+0x1daf,_0x56b500['y']=0xb*0x31+0x1f1a+-0x2135,_0x56b500['z']=-0x17*-0x19+-0x1973+0x1734;for(let _0x3a9ec1=0x1*-0x8eb+-0xa0+-0x15d*-0x7;_0x3a9ec1<_0x59fd31;++_0x3a9ec1){const _0x57f767=_0x3a9ec1*_0x580326;_0x56b500['x']+=_0x13093c[_0x57f767+(0x16*-0x18+-0xb95*-0x2+-0x151a)]+_0x13093c[_0x57f767+(-0x2e9*-0x4+0x8c0+-0x1*0x1461)],_0x56b500['y']+=_0x13093c[_0x57f767+(-0xfaa+0x2f0+0xcbb)]+_0x13093c[_0x57f767+(-0x1de*-0x11+0x1*0x1633+-0x35ed)],_0x56b500['z']+=_0x13093c[_0x57f767+(0x1712+0x1d4a+-0x2*0x1a2d)]+_0x13093c[_0x57f767+(-0x1f*-0x7c+0x967+-0x1866)];}_0x56b500['mulScalar']((-0xfb5+-0x187a+0x282f+0.5)/_0x59fd31);}get['isCompress'+'ed'](){return!(-0x3*0x44f+0x842*0x1+-0xef*-0x5);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0x2386+-0xd0b+0x3191));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0xefd481=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x490600}=this;if(_0x490600>0x21b*0x7+0x6cf+-0x314*0x7){const _0x10892e=[];for(let _0x178617=-0x19a*-0xa+0x33e*-0x7+0xbe*0x9;_0x178617<-0x6*0x60f+-0x1678+-0x55d*-0xb;++_0x178617)_0x10892e['push']('f_rest_'+_0x178617);_0xefd481['splice'](_0xefd481['indexOf']('f_dc_0')+(0x6b5+-0x8e9*-0x2+-0x92*0x2b),0x5*0x634+-0xbd+-0x1e47,..._0x10892e);}const _0x5d9379=new mN();return _0x5d9379['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x1ddba8,_0x5b38e3)=>{_0x5d9379['on']('decompress'+'ed',_0x43f4aa=>{_0x5d9379['destroy'](),_0x1ddba8(new Dn([{'name':'vertex','count':this['numSplats'],'properties':_0xefd481['map'](_0x164863=>({'type':'float','name':_0x164863,'storage':_0x43f4aa[_0x164863],'byteSize':0x4}))}],this['comments']));});});}}async function gN(){const _0x5966f9='super4d-ca'+'che-v1',_0x95da12={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x3798ec=new Uint8Array([-0x25c+-0x3*0x44+0x5*0xb8,0x1*0x1db1+0x1*0xfbd+-0x2d02,0x1e3+-0xc*0xbf+0x78a,-0xaac+0x279*0x1+-0x25*-0x39]),_0x3d27d2=new Uint8Array([0x1*0xeb1+-0x1c8a+0xde3,-0xf7b*0x1+0x1*0x2541+0xd*-0x1a5,0x1968*-0x1+-0x45*0x4a+0x2dc8,-0x259c+-0x1*0x17bc+0x3dbc,-0x320+0x8f*-0x11+0xcfe,0x20e9+0x1686+-0x3707,-0x29*0x88+-0x25ea+0x3c17,-0x1224+0xe62+0x423,0xa81+0x540+-0xf5d,-0x13cf+0xd2d*0x1+0x707,-0x10d*0x6+-0x1*0x13c+0x2*0x3fe,-0x5a7+-0x31*-0x5+0x4bc]),_0x1b736f=-0x10bf+0xba8+0x517+0.28209479177387814,_0x4d4605=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x38b575{constructor(_0x56669b={}){this['options']={..._0x95da12,..._0x56669b},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x3e*-0xb+-0x1c97*-0x1+-0x19ed,this['initialize'+'d']=!(0x3b9*-0x8+0x19ab+0x41e);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x5966f9);const _0x1e8672=await this['cache']['keys'](),_0x7eabe9=[];for(const _0x4592ca of _0x1e8672){const _0x580060=_0x4592ca['url'],_0x1b374f=await this['cache']['match'](_0x580060);if(_0x1b374f){const _0x3a2fc8=(await _0x1b374f['blob']())['size'],_0x1d0b1c=_0x1b374f['headers']['get']('x-cache-ti'+'me');_0x1d0b1c&&_0x7eabe9['push']({'url':_0x580060,'size':_0x3a2fc8,'cacheTime':parseInt(_0x1d0b1c)});}}_0x7eabe9['sort']((_0x16b7dd,_0x27192c)=>_0x16b7dd['cacheTime']-_0x27192c['cacheTime']);for(const _0x1bcf22 of _0x7eabe9)this['cacheSizes']['set'](_0x1bcf22['url'],_0x1bcf22['size']),this['currentSiz'+'e']+=_0x1bcf22['size'],this['lruList']['push'](_0x1bcf22['url']);}catch(_0x24221a){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x24221a);}this['initialize'+'d']=!(-0x7d+0x2e7*-0x9+0x1a9c);}}async['get'](_0x280177){if(await this['init'](),!this['cache'])return null;try{const _0x3c94ad=await this['cache']['match'](_0x280177);if(!_0x3c94ad)return null;const _0x593a1b=_0x3c94ad['headers']['get']('x-cache-ti'+'me');return _0x593a1b&&Date['now']()-parseInt(_0x593a1b)>this['options']['maxAge']?(await this['delete'](_0x280177),null):(this['updateLRU'](_0x280177),_0x3c94ad);}catch{return null;}}async['set'](_0x54e604,_0x3ebe15){if(!(!this['cache']||_0x54e604['startsWith']('blob:')))try{const _0x2701ab=_0x3ebe15['clone'](),_0x32d0b2=await _0x2701ab['blob'](),_0x1c0bc1=_0x32d0b2['size'];this['currentSiz'+'e']+_0x1c0bc1>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x1c0bc1);const _0x3400c7=new Headers(_0x2701ab['headers']);_0x3400c7['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x3a8b28=new Response(_0x32d0b2,{'status':_0x2701ab['status'],'statusText':_0x2701ab['statusText'],'headers':_0x3400c7});await this['cache']['put'](_0x54e604,_0x3a8b28),this['cacheSizes']['set'](_0x54e604,_0x1c0bc1),this['currentSiz'+'e']+=_0x1c0bc1,this['updateLRU'](_0x54e604);}catch(_0x22c22c){console['error']('Cache\x20set\x20'+'error:',_0x22c22c);}}['updateLRU'](_0x3d0c51){const _0x493914=this['lruList']['indexOf'](_0x3d0c51);_0x493914>-(0xb*0x1a6+0x5*-0x649+0xd4c)&&this['lruList']['splice'](_0x493914,0x128d*-0x1+-0x1*-0x2056+-0xdc8),this['lruList']['push'](_0x3d0c51);}async['cleanupSpa'+'ce'](_0x30a34a){const _0x3945f2=this['options']['maxSize']*(0x3*-0x20c+0x1*-0x2479+0x2a9d+0.9);if(!(this['currentSiz'+'e']<=_0x3945f2))for(;this['lruList']['length']>0x2604+-0xbfb+0x1f*-0xd7&&this['currentSiz'+'e']>_0x3945f2;){const _0x3dd55c=this['lruList']['shift']();_0x3dd55c&&await this['delete'](_0x3dd55c);}}async['delete'](_0x580fc4){if(this['cache'])try{await this['cache']['delete'](_0x580fc4);const _0x5056a7=this['cacheSizes']['get'](_0x580fc4)||-0x18d*-0x6+0x23a*0x5+0x147*-0x10;this['currentSiz'+'e']-=_0x5056a7,this['cacheSizes']['delete'](_0x580fc4);const _0x58d60a=this['lruList']['indexOf'](_0x580fc4);_0x58d60a>-(0x1902+-0x21f2+0x8f1)&&this['lruList']['splice'](_0x58d60a,-0x2227*-0x1+0x177b*-0x1+-0x1*0xaab);}catch(_0x41d6a1){console['error']('Cache\x20dele'+'te\x20error:',_0x41d6a1);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x5e535b=>Promise['all'](_0x5e535b['map'](_0x4ee03f=>{var _0xd85bd2;return(_0xd85bd2=this['cache'])==null?void(-0x1085+0x4d*-0x17+0x1770):_0xd85bd2['delete'](_0x4ee03f);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x2*0xb5a+-0x136f+-0x345;}catch(_0x1c2838){console['error']('Cache\x20clea'+'r\x20error:',_0x1c2838);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x4*0x907+-0x1f73*0x1+0x1*0x438f;}}class _0x5cfc4a{constructor(_0x58603d=[],_0x43b215={}){this['cacheManag'+'er']=new _0x38b575(_0x43b215['cache']),this['retryCount']=_0x43b215['retryCount']||-0xc6d*0x1+0xfa4+-0x334,this['retryDelay']=_0x43b215['retryDelay']||0x112d+-0x1e2d+-0xb*-0x15c,this['maxConcurr'+'ency']=_0x43b215['maxConcurr'+'ency']||-0x1782+-0x23f6+0x3b7a,this['downloadQu'+'eue']=_0x58603d,this['isProcessi'+'ngDownload'+'Queue']=!(0x3a1*0x1+0x110*0x2+0x2e*-0x20),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x50b*0x5+0x1*-0x5c+-0x18db);this['downloadQu'+'eue']['length']>0x1*-0x25fa+-0x26e0*0x1+0x4cda;)try{const _0x5afd9a=this['downloadQu'+'eue']['splice'](-0x1*0x21bf+-0xc*0x1bc+0x368f,this['maxConcurr'+'ency'])['map'](_0x3aa313=>{if(!this['pendingRes'+'ponses']['has'](_0x3aa313)){const _0x5e9b30=this['download'](_0x3aa313);return this['pendingRes'+'ponses']['set'](_0x3aa313,_0x5e9b30),_0x5e9b30['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x3aa313);});}return Promise['resolve']();});await Promise['all'](_0x5afd9a);}catch(_0xb3c569){console['error']('Download\x20e'+'rror:',_0xb3c569);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x24c6+-0x5e0*0x3+-0x1325);}}}async['fetch'](_0x493b57,_0x56e3c4={}){if(this['pendingRes'+'ponses']['has'](_0x493b57))return this['pendingRes'+'ponses']['get'](_0x493b57);const {forceRefresh:_0x50b9ac=!(0x1*0xc7f+0x275*0x1+-0xef3),..._0x4163c7}=_0x56e3c4;this['pendingRes'+'ponses']['set'](_0x493b57,this['download'](_0x493b57,_0x4163c7));const _0xf963ab=await this['pendingRes'+'ponses']['get'](_0x493b57);return this['pendingRes'+'ponses']['delete'](_0x493b57),_0xf963ab;}async['download'](_0x3b12d8,_0xf18bb={}){var _0x51eb2a;await((_0x51eb2a=this['cacheManag'+'er'])==null?void(-0x1*0x230b+0x4*-0x89f+0x3*0x172d):_0x51eb2a['init']());const {forceRefresh:_0x5673b2=!(0x1dc8+-0x2290+0x4c9*0x1),..._0x36d2c6}=_0xf18bb;_0x5673b2&&await this['cacheManag'+'er']['delete'](_0x3b12d8);const _0x3b57a1=await this['cacheManag'+'er']['get'](_0x3b12d8);if(_0x3b57a1)return _0x3b57a1;let _0x207e6d;for(let _0x2c9bf2=0x22ca*-0x1+-0x166e+-0x8*-0x727;_0x2c9bf2<this['retryCount'];_0x2c9bf2++)try{const _0x8e8104=await fetch(_0x3b12d8,_0x36d2c6);if(!_0x8e8104['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x8e8104['status']);return await this['cacheManag'+'er']['set'](_0x3b12d8,_0x8e8104),_0x8e8104;}catch(_0x6d6d77){console['error']('Download\x20e'+'rror:',_0x6d6d77),_0x207e6d=_0x6d6d77,_0x2c9bf2<this['retryCount']-(-0x5*-0x5ad+-0x6f3+0x1*-0x156d)&&await new Promise(_0x1418e3=>setTimeout(_0x1418e3,this['retryDelay']*(_0x2c9bf2+(-0x63e*0x2+-0x1a1f+0x269c))));}throw _0x207e6d;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x1a*-0x2f+0x1*-0x26ad+0x21e8),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x2a323e{constructor(){this['numSplats']=-0x1297*-0x1+-0x5cb+-0xccc,this['comments']=[],this['chunkData']=new Float32Array(-0x1a4c+0x1d2c*-0x1+0x3778),this['vertexData']=new Uint32Array(-0x18a3+0x79*-0x3d+-0x76*-0x74),this['is4D']=!(0x2be*0xd+0x544+-0x2*0x1475),this['shBands']=-0x115e+0x1f2+0xf6c,this['shData0']=new Uint8Array(-0x1*-0x1ca5+-0x2146+0x4a1),this['shData1']=new Uint8Array(-0x1714+-0x251*-0xd+-0x709*0x1),this['shData2']=new Uint8Array(-0x12dc+-0x1909+-0x1*-0x2be5),this['elements']=[],this['isCompress'+'ed']=!(0x1cd0+-0x7*0x4cf+0x4d9);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x2057+-0xf81+0x1*-0xfd6));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x10b7ec{constructor(_0x2467aa,_0x321f9b=[]){this['elements']=_0x2467aa,this['comments']=_0x321f9b,this['isCompress'+'ed']=!(-0x2*-0x1207+0x5*-0x325+-0xa2a*0x2);}}class _0x40f10f{constructor(_0x596fbf,_0xc6da5f){this['reader']=_0x596fbf,this['progressFu'+'nc']=_0xc6da5f,this['head']=-0x2343+-0x1880+0x3bc3,this['tail']=-0x1*0xe59+-0x404*-0x1+0xa55;}async['read'](){var _0x11406b;const {value:_0x1e5165,done:_0x3735bb}=await this['reader']['read']();if(_0x3735bb)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x1e5165),(_0x11406b=this['progressFu'+'nc'])==null||_0x11406b['call'](this,_0x1e5165['byteLength']);}['push'](_0xa5d6cd){if(!this['data'])this['data']=_0xa5d6cd,this['view']=new DataView(this['data']['buffer']),this['tail']=_0xa5d6cd['length'];else{const _0x1a50ce=this['tail']-this['head'],_0x4ebbd7=_0x1a50ce+_0xa5d6cd['length'];if(this['data']['length']>=_0x4ebbd7)this['head']>-0x9c4+0xa6*-0x13+0x1616?(this['data']['copyWithin'](-0x1*-0xeef+-0x222a+0x133b*0x1,this['head'],this['tail']),this['data']['set'](_0xa5d6cd,_0x1a50ce),this['head']=0xe6*0x24+-0x53d+-0x1b1b,this['tail']=_0x4ebbd7):(this['data']['set'](_0xa5d6cd,this['tail']),this['tail']+=_0xa5d6cd['length']);else{const _0x3f11ab=new Uint8Array(_0x4ebbd7);this['head']>-0x1813+0x1*0x26ad+0x59*-0x2a||this['tail']<this['data']['length']?_0x3f11ab['set'](this['data']['subarray'](this['head'],this['tail']),-0x16*0x132+-0x40c+-0x4*-0x796):_0x3f11ab['set'](this['data'],-0x1*-0x22a5+-0x958+-0x194d),_0x3f11ab['set'](_0xa5d6cd,_0x1a50ce),this['data']=_0x3f11ab,this['view']=new DataView(this['data']['buffer']),this['head']=-0x21b3*0x1+-0x4d8*0x8+0x4873,this['tail']=_0x4ebbd7;}}}['compact'](){this['head']>-0x1432+-0x12e*0x8+0x1da2*0x1&&(this['data']['copyWithin'](0xac2+-0x838+-0x1a*0x19,this['head'],this['tail']),this['tail']-=this['head'],this['head']=0x1ed9+0x1*-0x1a91+-0x448);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x363b9e=this['view']['getInt8'](this['head']);return this['head']++,_0x363b9e;}['getUint8'](){const _0xfcbc2=this['view']['getUint8'](this['head']);return this['head']++,_0xfcbc2;}['getInt16'](){const _0x47667f=this['view']['getInt16'](this['head'],!(-0x3*-0xc6a+-0x2274+0x7*-0x66));return this['head']+=-0xf98+-0x25b3+0xaa9*0x5,_0x47667f;}['getUint16'](){const _0x6c9010=this['view']['getUint16'](this['head'],!(0xc*-0x5f+-0x1a97+-0x9*-0x373));return this['head']+=-0x1a7a*0x1+0xb61*-0x2+0x313e,_0x6c9010;}['getInt32'](){const _0x46d3a9=this['view']['getInt32'](this['head'],!(-0x4b*-0x83+-0x1ca4+-0x9bd));return this['head']+=-0x15a5+0xf8f+0x61a,_0x46d3a9;}['getUint32'](){const _0x5c5117=this['view']['getUint32'](this['head'],!(-0x1087+-0x1*-0x1e5c+-0x1*0xdd5));return this['head']+=-0x7*0xa6+-0xe*0x65+-0x102*-0xa,_0x5c5117;}['getFloat32'](){const _0x572d50=this['view']['getFloat32'](this['head'],!(-0x9*0x3ad+-0x2bf*0x9+0x39cc));return this['head']+=-0x485*0x1+0xcdb*0x1+0x1e*-0x47,_0x572d50;}['getFloat64'](){const _0x18b3e3=this['view']['getFloat64'](this['head'],!(-0x6b*-0x1+-0x1ba8+0x1b3d));return this['head']+=0x2a9+0xd*0xbb+-0xc20*0x1,_0x18b3e3;}}class _0x2a9cda{constructor(_0x27793a,_0x4ca3f0,_0x3e06bf){this['x']=_0x27793a,this['y']=_0x4ca3f0,this['z']=_0x3e06bf;}}class _0x1251ae{constructor(_0x5cd7eb,_0x4dfd5e,_0x34d3c1,_0x4e6a26){this['x']=_0x5cd7eb,this['y']=_0x4dfd5e,this['z']=_0x34d3c1,this['w']=_0x4e6a26;}}class _0x5f5512{constructor(_0x3f6560,_0x377800,_0x1165d5,_0x597a9d){this['x']=_0x3f6560,this['y']=_0x377800,this['z']=_0x1165d5,this['w']=_0x597a9d;}['set'](_0x4bdfa1,_0x1d1176,_0x5c847b,_0x1b0b00){this['x']=_0x4bdfa1,this['y']=_0x1d1176,this['z']=_0x5c847b,this['w']=_0x1b0b00;}}class _0x102abb{constructor(_0x454a1d,_0x48c959,_0x1062b8,_0x557f77,_0x474aa0,_0x8f9280,_0x542322,_0xdfa909,_0x2fb6c9,_0x5821ee,_0x299a08,_0x572904,_0x4e48ed,_0x3c213a){const _0x4eb953=(_0x1c884f,_0x3d3212)=>{const _0x5b48ef=(0x2319+0x1*0x1b03+-0xd*0x4c7<<_0x3d3212)-(0x2a*-0xa1+-0x15a9+0xc05*0x4);return(_0x1c884f&_0x5b48ef)/_0x5b48ef;},_0x322e00=(_0x3b8d12,_0x416d5f)=>{_0x3b8d12['x']=_0x4eb953(_0x416d5f>>>-0x12+-0x220b+0x2232,0x28+-0x79d*-0x4+-0x1e91),_0x3b8d12['y']=_0x4eb953(_0x416d5f>>>-0x1*0x2587+-0xf*-0xdd+0x189f,-0x8e2+-0x1af0+0x23dc),_0x3b8d12['z']=_0x4eb953(_0x416d5f,0x363*-0x4+0x2557+-0x17c0);},_0x584087=(_0x14c60d,_0x5957da)=>{_0x14c60d['x']=_0x4eb953(_0x5957da>>>-0x1*-0x256a+-0xdd7*0x1+-0x177b*0x1,0x231d+0x1697*0x1+-0x1cd6*0x2),_0x14c60d['y']=_0x4eb953(_0x5957da>>>0x1417+-0x1e8e+0xa87,0x351*-0x1+0x1f*-0x53+-0x7*-0x1ea),_0x14c60d['z']=_0x4eb953(_0x5957da>>>0x721*-0x5+-0x2443+-0x47f*-0x10,0x1ac7*-0x1+-0x125f*0x1+0x2d2e),_0x14c60d['w']=_0x4eb953(_0x5957da,-0x225d+-0x2*0xbd6+0x3a11);},_0x249592=(_0x3fe75f,_0x3eb82a)=>{const _0x3ec485=(-0xbd4+-0x18e3+0x24b8)/(Math['sqrt'](-0x304+0x1*-0x23d5+0x26db)*(0x9*-0x359+0x1045+0x1*0xddc+0.5)),_0x4568fc=(_0x4eb953(_0x3eb82a>>>-0xfbf+-0xe2*-0xb+-0x1*-0x61d,0x18d6+-0x2645+-0x1*-0xd79)-(-0x1c1f+0x1*0x10cc+0xdf*0xd+0.5))*_0x3ec485,_0x2b1980=(_0x4eb953(_0x3eb82a>>>-0x634*0x1+-0x23a+0x878,0x21d6+-0x1*0x1c8b+-0x541)-(0x1*-0x47+-0xb62+0x5*0x255+0.5))*_0x3ec485,_0x412dca=(_0x4eb953(_0x3eb82a,-0x2d7+-0x25df+0x28c0)-(0x21a4*0x1+0x2250+0x1*-0x43f4+0.5))*_0x3ec485,_0x5af803=Math['sqrt'](0x48b*0x2+0x1*0xdd2+-0x1*0x16e7-(_0x4568fc*_0x4568fc+_0x2b1980*_0x2b1980+_0x412dca*_0x412dca));switch(_0x3eb82a>>>0x1e9+0x1272+0x6bf*-0x3){case 0xe89*0x1+-0x180f*-0x1+-0x2698:_0x3fe75f['set'](_0x4568fc,_0x2b1980,_0x412dca,_0x5af803);break;case 0x2e7*-0x2+0x5cb*-0x1+0x2d*0x42:_0x3fe75f['set'](_0x5af803,_0x2b1980,_0x412dca,_0x4568fc);break;case-0xb*-0x131+-0x4*-0x433+-0x1de5:_0x3fe75f['set'](_0x2b1980,_0x5af803,_0x412dca,_0x4568fc);break;case-0x2*-0x87e+-0x25c9+0x14d0:_0x3fe75f['set'](_0x2b1980,_0x412dca,_0x5af803,_0x4568fc);break;}},_0x32fdf6=(_0x3161c4,_0x1706db,_0x579cdb)=>_0x3161c4*(0x1bb*-0x13+0x1ee3*0x1+0x1ff-_0x579cdb)+_0x1706db*_0x579cdb,_0xa17873=[0x20d7+0x7a3+-0xd7d*0x3,0x6d8+-0x5*0x3c2+0xbfa,-0x1*0x45c+-0x1051*-0x1+-0xbe6][_0x542322-(-0x155a+-0x1*-0x201d+-0xac2)],_0x19e898=0x43d*0x1+-0x367*-0x3+-0xe6c*0x1;this['read']=_0x1ca565=>{const _0x537642=Math['floor'](_0x1ca565/(0x5*0x3c1+-0x1c*0xbb+-0x1*-0x2af))*_0x48c959;if(_0xdfa909&&(_0x322e00(_0xdfa909,_0x1062b8[_0x1ca565*_0x19e898+(-0xe17+0x1ada+-0xcc3)]),_0xdfa909['x']=_0x32fdf6(_0x454a1d[_0x537642+(0x1bd4+0x270c+-0x42e0)],_0x454a1d[_0x537642+(0xc68+-0x1d48*0x1+0x10e3)],_0xdfa909['x']),_0xdfa909['y']=_0x32fdf6(_0x454a1d[_0x537642+(0x955+-0x211b+-0x17c7*-0x1)],_0x454a1d[_0x537642+(0x17ea+-0x12e+0x8*-0x2d7)],_0xdfa909['y']),_0xdfa909['z']=_0x32fdf6(_0x454a1d[_0x537642+(0xe92+0x1f*-0x122+0x148e)],_0x454a1d[_0x537642+(-0x211e+-0x5*-0x285+0x16*0xef)],_0xdfa909['z'])),_0x2fb6c9&&_0x249592(_0x2fb6c9,_0x1062b8[_0x1ca565*_0x19e898+(-0x3b+0x146a+-0x142e)]),_0x5821ee&&(_0x322e00(_0x5821ee,_0x1062b8[_0x1ca565*_0x19e898+(0x5*-0x7ba+0x4c1*0x3+0x1*0x1861)]),_0x5821ee['x']=_0x32fdf6(_0x454a1d[_0x537642+(0x18c1*0x1+0x869*0x1+-0x2124)],_0x454a1d[_0x537642+(0x347+-0x23eb+0x689*0x5)],_0x5821ee['x']),_0x5821ee['y']=_0x32fdf6(_0x454a1d[_0x537642+(0x1512+-0x1d9f*-0x1+0x1*-0x32aa)],_0x454a1d[_0x537642+(-0x16d4+0x9b*-0x14+-0x2*-0x117d)],_0x5821ee['y']),_0x5821ee['z']=_0x32fdf6(_0x454a1d[_0x537642+(-0x7*-0x166+0xd02+-0x16c4)],_0x454a1d[_0x537642+(0x1*0x266+0xe*-0x277+0x2027*0x1)],_0x5821ee['z'])),_0x299a08&&(_0x584087(_0x299a08,_0x1062b8[_0x1ca565*_0x19e898+(-0x3*-0x19b+0x18af*0x1+-0x1d7d)]),_0x48c959>-0x14d1+-0xc61*0x2+0x3*0xf35&&(_0x299a08['x']=_0x32fdf6(_0x454a1d[_0x537642+(-0x1738+-0x11*0x73+0xa4d*0x3)],_0x454a1d[_0x537642+(-0x560+0x1171*-0x1+-0x30*-0x7a)],_0x299a08['x']),_0x299a08['y']=_0x32fdf6(_0x454a1d[_0x537642+(0x2*0x14a+-0x8b*-0x1e+-0x12d1)],_0x454a1d[_0x537642+(-0x3*-0x565+-0x4b*-0x61+0x2*-0x1645)],_0x299a08['y']),_0x299a08['z']=_0x32fdf6(_0x454a1d[_0x537642+(0x9ef*0x1+0x159*0x15+0xb5*-0x36)],_0x454a1d[_0x537642+(0x108b+-0xb35+-0x545)],_0x299a08['z']))),_0x572904&&(_0x322e00(_0x572904,_0x1062b8[_0x1ca565*_0x19e898+(0x1f*-0xa3+-0x1*-0x9e3+0x9de)]),_0x572904['x']=_0x32fdf6(_0x454a1d[_0x537642+(-0xde*-0xf+-0x1e55+-0x1*-0x1165)],_0x454a1d[_0x537642+(-0x5f9+0x879+-0x26b)],_0x572904['x']),_0x572904['y']=_0x32fdf6(_0x454a1d[_0x537642+(0x24b7+0x19df+-0x3e83)],_0x454a1d[_0x537642+(-0x241*0xf+0x170d+-0x8*-0x15b)],_0x572904['y']),_0x572904['z']=_0x32fdf6(_0x454a1d[_0x537642+(0xa*-0x107+-0x513*0x3+0x1993)],_0x454a1d[_0x537642+(0xf3e*-0x2+-0xa*0x316+-0x3d6f*-0x1)],_0x572904['z'])),_0x4e48ed&&(_0x322e00(_0x4e48ed,_0x1062b8[_0x1ca565*_0x19e898+(-0x10*0x205+0x9b3+0xb51*0x2)]),_0x4e48ed['x']=_0x32fdf6(_0x454a1d[_0x537642+(0xef*0x22+0x1ecb+0xc7d*-0x5)],_0x454a1d[_0x537642+(0xba2*-0x1+0x6c9*0x1+0x6*0xd3)],_0x4e48ed['x']),_0x4e48ed['y']=_0x32fdf6(_0x454a1d[_0x537642+(-0x59f*0x1+-0x6ff+-0x58*-0x25)],_0x454a1d[_0x537642+(-0x1118+0x1798+-0x665)],_0x4e48ed['y'])),_0x3c213a&&_0x542322>-0x2*0x821+-0x1*0x1286+0x22c8){const _0x1a4e4a=[_0x557f77,_0x474aa0,_0x8f9280];for(let _0x2180d1=0xc*-0x28c+0x7ea+0x2*0xb53;_0x2180d1<0x1d+-0x7*0x28d+0x11c1;++_0x2180d1)for(let _0x36b357=-0x663+0x1e9f+-0x183c;_0x36b357<-0xac5+-0xc89+0x175d;++_0x36b357)_0x3c213a[_0x2180d1*(-0x642+0x1848+-0x11f7)+_0x36b357]=_0x36b357<_0xa17873?_0x1a4e4a[_0x2180d1][_0x1ca565*(0x1a9b+0x10*0x25f+-0x407b)+_0x36b357]*((-0x1*0x935+0x1*0x1cf3+-0x9db*0x2)/(0xd*-0x2b6+-0x1*-0x86+0x23b7))-(-0x1b7*0xe+-0x14c4+0x2cca):-0xb*-0x57+0x3*-0x471+-0x1*-0x996;}};}}self['onmessage']=async _0x273edc=>{var _0x5f19d8,_0x237088,_0x21517a;const {data:_0x5e3e96}=_0x273edc;switch(_0x5e3e96['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x5e3e96['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x5cfc4a(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x5f19d8=globalThis['fetchWorke'+'r'])==null||_0x5f19d8['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x24a278,decompress:_0xa1dfce}=_0x5e3e96;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x5cfc4a(globalThis['loadUrlLis'+'t']));const _0x12e1f1=await globalThis['fetchWorke'+'r']['fetch'](_0x24a278);if(!_0x12e1f1||!_0x12e1f1['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x24a278});else{const _0x3300ec=parseInt(_0x12e1f1['headers']['get']('content-le'+'ngth')??'0',-0x154f+0x1001+0x558);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x3300ec,'bytes':0x0,'url':_0x24a278});let _0x253c53=await _0x1f7222(_0x12e1f1['body']['getReader'](),_0x35e5c5=>{self['postMessag'+'e']({'type':'progress','bytes':_0x35e5c5,'totalLength':_0x3300ec,'url':_0x24a278});});if(_0xa1dfce&&_0x253c53['isCompress'+'ed']){const _0x38d6ba=_0x3022e3(_0x253c53),_0x4bdad7=(_0x237088=_0x38d6ba==null?void(-0x12bd+-0x725+-0x2*-0xcf1):_0x38d6ba['elements'][0x1*-0x1307+0x29*-0xf1+-0x734*-0x8])==null?void(-0x1aad*-0x1+-0x262e+0xb81):_0x237088['properties']['map'](_0x577f1a=>_0x577f1a['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x38d6ba,'url':_0x24a278},_0x4bdad7);}else{if(_0x253c53['isCompress'+'ed']){const _0x14db20=['chunkData','vertexData'];_0x253c53['shData0']&&_0x14db20['push']('shData0','shData1','shData2');const _0x16be0b=_0x14db20['map'](_0xa9b74d=>{var _0x1fed5b;return(_0x1fed5b=_0x253c53[_0xa9b74d])==null?void(-0x16e0+-0x1514+0x2bf4):_0x1fed5b['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x253c53,'url':_0x24a278},_0x16be0b);}else{_0x253c53=_0x141d6a(_0x253c53);const _0x53c756=(_0x21517a=_0x253c53==null?void(-0x10d+0x3*0xcd6+-0x2575*0x1):_0x253c53['elements'][0x10*0x1dc+0x3*-0xa31+-0x1*-0xd3])==null?void(-0x9*-0xf3+0x1ba0+-0x2f*0xc5):_0x21517a['properties']['map'](_0x2476c7=>_0x2476c7['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x253c53,'url':_0x24a278},_0x53c756);}}}}catch(_0x132e11){self['postMessag'+'e']({'type':'error','data':_0x132e11['message'],'url':_0x24a278});}break;}};const _0x141d6a=_0x500977=>{var _0x5da8d7;const _0xf9dfa9=(_0x5da8d7=_0x500977==null?void(-0x1fd0+0x114f+-0xe81*-0x1):_0x500977['elements'][-0x4ff*0x3+-0x29*0xa7+0x29bc*0x1])==null?void(0x1f89+-0x1dd1+-0x1b8):_0x5da8d7['properties']['find'](_0x44e4ef=>_0x44e4ef['name']==='opacity');if(_0xf9dfa9){for(let _0x1841f2=-0xad6*-0x3+0x2170+-0x2*0x20f9;_0x1841f2<_0xf9dfa9['storage']['length'];_0x1841f2++)_0xf9dfa9['storage'][_0x1841f2]=(0x17f*0xa+0xeb1*0x1+-0x1da6)/(0x1ced+-0x1*-0x1c31+-0x391d+Math['exp'](-_0xf9dfa9['storage'][_0x1841f2]));}return _0x500977;},_0x1f1549=_0xecd522=>{const _0x23ef7a=[],_0x3e8506=[];let _0x1064dc;for(let _0x29f383=-0x4cb+-0xd3e+-0x905*-0x2;_0x29f383<_0xecd522['length'];++_0x29f383){const _0x42dcf8=_0xecd522[_0x29f383]['split']('\x20');switch(_0x42dcf8[0x6d+-0x1165+0x10f8]){case'comment':_0x3e8506['push'](_0x42dcf8['slice'](-0x9*-0x24b+0xfc8+0x1*-0x246a)['join']('\x20'));break;case'format':_0x1064dc=_0x42dcf8[-0x9a4*-0x1+-0x1*0x2527+0x1b84];break;case'element':_0x23ef7a['push']({'name':_0x42dcf8[-0xf*0x9c+0x2017+-0x16f2],'count':parseInt(_0x42dcf8[-0x22f4+0x23d4*0x1+-0xde],0x47*0x89+-0x607*0x4+-0xdd9),'properties':[]});break;case'property':{if(!_0x4d4605['has'](_0x42dcf8[0x7*-0x445+-0x1ad9+0x38bd]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x42dcf8[0xa46+-0x13db+0x2*0x4cb]+('\x27\x20in\x20ply\x20h'+'eader'));_0x23ef7a[_0x23ef7a['length']-(-0x11*0x20c+0x18a2+0x13*0x89)]['properties']['push']({'type':_0x42dcf8[-0x77*0x35+-0x245b+-0xf*-0x411],'name':_0x42dcf8[0x114+0x1a*-0x1e+-0x16*-0x17],'storage':null,'byteSize':_0x4d4605['get'](_0x42dcf8[0x4*0x3d7+0x1*-0x7fc+-0x33*0x25])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x42dcf8[0x1106*0x2+0x321*0x9+-0x3e35]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x23ef7a,'format':_0x1064dc,'comments':_0x3e8506};},_0x5012b5=_0x294bf1=>{const _0x3ee30c=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x17fc4b=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x158121=new Array(0x1*0x1303+-0xd59+-0x57d)['fill']('')['map']((_0x5157c7,_0x37156a)=>'f_rest_'+_0x37156a),_0x18c306=()=>_0x294bf1[0x2f5*0xd+0x1c3+-0x2834]['name']==='chunk'&&_0x294bf1[0xa*-0x1a6+0x1201+-0x185*0x1]['properties']['every']((_0x5a0f58,_0x546e61)=>_0x5a0f58['name']===_0x3ee30c[_0x546e61]&&_0x5a0f58['type']==='float')&&_0x294bf1[-0x1bc8+-0x7*-0x13+0x1*0x1b44]['name']==='vertex'&&_0x294bf1[0x16c1+0x21b4+0x1*-0x3874]['properties']['every']((_0x267666,_0x36b53d)=>_0x267666['name']===_0x17fc4b[_0x36b53d]&&_0x267666['type']==='uint'),_0x42b1c9=()=>_0x294bf1[0x1deb+-0xd*-0x5a+-0xd*0x2a7]['name']==='sh'&&[0x22*-0xaf+-0x1802+0x2f49,-0x1*-0x2627+0x2442+-0x4a51,-0x24a*-0x1+-0x24f7+-0x6*-0x5cf]['indexOf'](_0x294bf1[0xad0+-0x32a+-0x28c*0x3]['properties']['length'])!==-(0x17b*0x4+0x3ab*-0x3+-0x2*-0x28b)&&_0x294bf1[-0x178+0x7e3+-0x223*0x3]['properties']['every']((_0xd97b68,_0x3ec03e)=>_0xd97b68['name']===_0x158121[_0x3ec03e]&&_0xd97b68['type']==='uchar');return _0x294bf1['length']===0x1*-0x307+-0x145f*-0x1+-0xe*0x13d&&_0x18c306()||_0x294bf1['length']===-0xf59+0xb*0xa3+-0x1*-0x85b&&_0x18c306()&&_0x42b1c9();},_0x4dfc18=_0x5b5789=>_0x5b5789['length']===-0x38*0x7a+0x4*0x4f+0x1975&&_0x5b5789[-0x567*0x2+-0x2af+0xd7d]['name']==='vertex'&&_0x5b5789[-0x1*-0x118f+-0x2464+-0x1*-0x12d5]['properties']['every'](_0x12bbda=>_0x12bbda['type']==='float'),_0x2e5455=async(_0x2b3db0,_0x57bcab,_0x2aa65a)=>{const _0x194024=new _0x2a323e();_0x194024['comments']=_0x2aa65a;const _0x3ba016=_0x57bcab[-0x2ec*-0x2+0xa5d*-0x2+0xee2]['count'],_0x107211=_0x57bcab[0x13b+-0x5*-0x259+-0x53*0x28]['properties']['length'],_0x2f4789=_0x57bcab[-0x21cb+-0x1783+0x394f]['count'],_0x251fa1=_0x57bcab[0x245*-0x1+-0x988+0xbce]['properties']['some'](_0xfb716=>_0xfb716['name']==='packed_tim'+'e'),_0x2fca2f=(_0x4150a3=>{const _0x3b3d6b=Math['ceil'](Math['sqrt'](_0x4150a3)),_0x5d1d84=Math['ceil'](_0x4150a3/_0x3b3d6b);return _0x3b3d6b*_0x5d1d84;})(_0x2f4789);_0x194024['numSplats']=_0x2f4789,_0x194024['is4D']=_0x251fa1,_0x194024['chunkData']=new Float32Array(_0x3ba016*_0x107211),_0x194024['vertexData']=new Uint32Array(_0x2fca2f*(0x1*-0x13af+0x1978+-0x5c3));const _0x5a47be=async(_0x3f4ec4,_0x3cc2fc)=>{const _0x1f5922=new Uint8Array(_0x3f4ec4);let _0x33f371=0x1*0x154f+0x25e2+0x3b31*-0x1;for(;_0x33f371<_0x3cc2fc;){for(;_0x2b3db0['remaining']===-0x230d+0x188b+0xa82;)await _0x2b3db0['read']();const _0x181e41=Math['min'](_0x3cc2fc-_0x33f371,_0x2b3db0['remaining']),_0x532d6e=_0x2b3db0['data'];for(let _0x184961=0x3*-0x4e0+0x31d+0x1*0xb83;_0x184961<_0x181e41;++_0x184961)_0x1f5922[_0x33f371++]=_0x532d6e[_0x2b3db0['head']++];}};if(await _0x5a47be(_0x194024['chunkData']['buffer'],_0x3ba016*_0x107211*(-0x15e7+0xc78+0x973)),await _0x5a47be(_0x194024['vertexData']['buffer'],_0x2f4789*(-0x12f6+0x258f+-0x1293)*(0x130d+-0x2089+0x6c0*0x2)),_0x57bcab['length']===-0x941*0x1+-0x66c+0xfb0){const _0x35204e=_0x2fca2f*(-0x31d*-0x7+-0x57e+-0x103d),_0x8d197=new Uint8Array(_0x35204e),_0x10d973=new Uint8Array(_0x35204e),_0x5c5248=new Uint8Array(_0x35204e),_0x592638=0x1feb+0x1c*-0xa0+-0xa6b,_0x26591c=_0x57bcab[0x22bf*-0x1+0x16a1+0x20*0x61]['properties']['length']/(0x1854+0x1*0xa15+-0xee*0x25),_0x1f626c=new Uint8Array(_0x592638*_0x26591c*(-0x247d+-0x7*0x4c0+0x45c0));for(let _0x308e86=0x1a6b*0x1+0x49b*-0x3+-0xc9a;_0x308e86<_0x194024['numSplats'];_0x308e86+=_0x592638){const _0x33e8b2=Math['min'](_0x592638,_0x194024['numSplats']-_0x308e86);await _0x5a47be(_0x1f626c['buffer'],_0x33e8b2*_0x26591c*(0x12c6+0x2d*0xbb+-0x33a2));for(let _0x541d52=-0x57a+0x2511+-0x1*0x1f97;_0x541d52<_0x33e8b2;++_0x541d52)for(let _0x9c26c6=-0x2*0x95b+0x77c+0x1df*0x6;_0x9c26c6<0x11*0xb9+-0x1*0xfd4+0x39a;++_0x9c26c6){const _0x413b48=(_0x308e86+_0x541d52)*(0x883+0x1127+0x3a*-0x71)+_0x9c26c6;_0x9c26c6<_0x26591c?(_0x8d197[_0x413b48]=_0x1f626c[(_0x541d52*(0x113a+0x2519*-0x1+0xa*0x1fd)+(0x115b+-0x2101+0xfa6))*_0x26591c+_0x9c26c6],_0x10d973[_0x413b48]=_0x1f626c[(_0x541d52*(-0x1857+0x724+0x1136)+(0x7c5+-0x135*0x7+0xaf))*_0x26591c+_0x9c26c6],_0x5c5248[_0x413b48]=_0x1f626c[(_0x541d52*(-0x116f*0x2+0x1*-0x1714+0x191*0x25)+(0x1b8f+-0x716+-0x1*0x1477))*_0x26591c+_0x9c26c6]):(_0x8d197[_0x413b48]=-0x61+-0x2016+0x20f6,_0x10d973[_0x413b48]=0xc5d+0x988+-0x1566,_0x5c5248[_0x413b48]=0x32*0xc1+-0x1*-0x6cf+0x2b*-0x106);}}_0x194024['shData0']=_0x8d197,_0x194024['shData1']=_0x10d973,_0x194024['shData2']=_0x5c5248,_0x194024['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0x26591c];}else _0x194024['shBands']=-0x1cb9+0x2135+-0x47c;return _0x194024;},_0x47c1ef=async(_0x33e595,_0x395981,_0x2a3d9a)=>{const _0xd80391=_0x395981[0x1707+0x1*0x24c3+-0x3bca],_0x162d6d=_0xd80391['properties'],_0x5da35e=_0x162d6d['length'],_0x4333cc=_0x162d6d['map'](_0x31d234=>_0x31d234['storage']),_0x132a5c=_0x162d6d['reduce']((_0x269e79,_0x3a6168)=>_0x269e79+_0x3a6168['byteSize'],0x11c3+-0x1541*-0x1+-0x1382*0x2);let _0xbd7377=0x2*-0x12ff+0xed5+0x1729,_0x48be5;const _0x470c3c=()=>{const _0x587559=_0x33e595['data']['buffer'];(_0x48be5==null?void(-0x1861+0x8c*0x17+0xbcd):_0x48be5['buffer'])!==_0x587559&&(_0x48be5=new Float32Array(_0x587559,-0x514+0x1*0x178d+-0x1279*0x1,_0x587559['byteLength']/(0x4be*-0x7+0x24dd+-0x3a7)));};for(_0x470c3c();_0xbd7377<_0xd80391['count'];){for(;_0x33e595['remaining']<_0x132a5c;)await _0x33e595['read'](),_0x470c3c();const _0x4e674b=Math['min'](_0xd80391['count']-_0xbd7377,Math['floor'](_0x33e595['remaining']/_0x132a5c));for(let _0x4c746d=-0xe15*-0x1+0xbe4+-0x19f9;_0x4c746d<_0x5da35e;++_0x4c746d){const _0x167c8e=_0x4333cc[_0x4c746d];for(let _0x1a42e5=-0x1*-0x22a0+-0x4f*0x63+0x95*-0x7;_0x1a42e5<_0x4e674b;++_0x1a42e5)_0x167c8e[_0x1a42e5+_0xbd7377]=_0x48be5[_0x1a42e5*_0x5da35e+_0x4c746d];}_0xbd7377+=_0x4e674b,_0x33e595['head']+=_0x4e674b*_0x132a5c;}return new _0x10b7ec(_0x395981,_0x2a3d9a);},_0x25575e=async(_0x2e42a6,_0x1f76e9,_0x1a9e0b)=>{for(let _0x6fde2a=0x14+-0xab5+0x3*0x38b;_0x6fde2a<_0x1f76e9['length'];++_0x6fde2a){const _0x3df2c4=_0x1f76e9[_0x6fde2a],_0x534942=_0x3df2c4['properties']['reduce']((_0x47a1cf,_0x1ead3e)=>_0x47a1cf+_0x1ead3e['byteSize'],0x316+0x1*-0x23b9+0x22d*0xf),_0x36406a=_0x3df2c4['properties']['map'](_0x18e8a4=>{if(_0x18e8a4['storage'])switch(_0x18e8a4['type']){case'char':return(_0x9a4083,_0x1bccdd)=>{_0x18e8a4['storage'][_0x1bccdd]=_0x9a4083['getInt8']();};case'uchar':return(_0x31a488,_0x5efde4)=>{_0x18e8a4['storage'][_0x5efde4]=_0x31a488['getUint8']();};case'short':return(_0x59ef8e,_0x5bddd4)=>{_0x18e8a4['storage'][_0x5bddd4]=_0x59ef8e['getInt16']();};case'ushort':return(_0x5a8c57,_0x321e4e)=>{_0x18e8a4['storage'][_0x321e4e]=_0x5a8c57['getUint16']();};case'int':return(_0x323c09,_0x407508)=>{_0x18e8a4['storage'][_0x407508]=_0x323c09['getInt32']();};case'uint':return(_0x4bb103,_0x45deb8)=>{_0x18e8a4['storage'][_0x45deb8]=_0x4bb103['getUint32']();};case'float':return(_0x148255,_0x34ab63)=>{_0x18e8a4['storage'][_0x34ab63]=_0x148255['getFloat32']();};case'double':return(_0x2cb8e8,_0x168e61)=>{_0x18e8a4['storage'][_0x168e61]=_0x2cb8e8['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x18e8a4['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x1260ea=>{_0x1260ea['head']+=_0x18e8a4['byteSize'];};});let _0x42cdd6=-0x1a9a+-0x1e0b+0x38a5*0x1;for(;_0x42cdd6<_0x3df2c4['count'];){for(;_0x2e42a6['remaining']<_0x534942;)await _0x2e42a6['read']();const _0x41d357=Math['min'](_0x3df2c4['count']-_0x42cdd6,Math['floor'](_0x2e42a6['remaining']/_0x534942));for(let _0x30f018=-0x1ea1+-0x13fc*-0x1+0xaa5;_0x30f018<_0x41d357;++_0x30f018){for(let _0x5c5b2b=-0x1*0x7+0x634+-0x62d;_0x5c5b2b<_0x3df2c4['properties']['length'];++_0x5c5b2b)_0x36406a[_0x5c5b2b](_0x2e42a6,_0x42cdd6);_0x42cdd6++;}}}return new _0x10b7ec(_0x1f76e9,_0x1a9e0b);},_0x1f7222=async(_0x2d7352,_0x2be695=null)=>{const _0x3ce2c6=(_0x5dd6cd,_0x87aad4)=>{const _0x3b937e=_0x5dd6cd['length']-_0x87aad4['length'];let _0x201f95,_0xaa7885;for(_0x201f95=0x25d+-0xa*0x18e+0xd2f;_0x201f95<=_0x3b937e;++_0x201f95){for(_0xaa7885=0xff*0x4+0xd39*-0x1+0x93d;_0xaa7885<_0x87aad4['length']&&_0x5dd6cd[_0x201f95+_0xaa7885]===_0x87aad4[_0xaa7885];++_0xaa7885);if(_0xaa7885===_0x87aad4['length'])return _0x201f95;}return-(0x8*-0x108+0xec2+0xb9*-0x9);},_0x5f0992=(_0x3b3466,_0x173dda)=>{if(_0x3b3466['length']<_0x173dda['length'])return!(0x6b*-0x27+-0x1d5a+0x2da8);for(let _0x252d8e=-0x301*0x7+0x71*-0x2+0x1*0x15e9;_0x252d8e<_0x173dda['length'];++_0x252d8e)if(_0x3b3466[_0x252d8e]!==_0x173dda[_0x252d8e])return!(0x1924+-0x26*0x7f+-0x649*0x1);return!(0x9c8+0x886*0x1+-0x124e);},_0x290720=new _0x40f10f(_0x2d7352,_0x2be695);let _0x1cc66f;for(;;){if(await _0x290720['read'](),_0x290720['tail']>=_0x3798ec['length']&&!_0x5f0992(_0x290720['data'],_0x3798ec))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x1cc66f=_0x3ce2c6(_0x290720['data'],_0x3d27d2),_0x1cc66f!==-(-0x49*-0x23+0x4ca+0x2*-0x762))break;}const _0x14c72e=new TextDecoder('ascii')['decode'](_0x290720['data']['subarray'](-0x17b*0x1+-0xee6+0x257*0x7,_0x1cc66f))['split']('\x0a'),{elements:_0x472443,format:_0x24eb6a,comments:_0x1167e3}=_0x1f1549(_0x14c72e);if(_0x24eb6a!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x290720['head']=_0x1cc66f+_0x3d27d2['length'],_0x290720['compact'](),await((async()=>_0x5012b5(_0x472443)?await _0x2e5455(_0x290720,_0x472443,_0x1167e3):(_0x472443['forEach'](_0x2c9a6f=>{_0x2c9a6f['properties']['forEach'](_0x352a1f=>{const _0x48733d=_0x4d4605['get'](_0x352a1f['type']);if(_0x48733d){const _0x2df897=new _0x48733d(_0x2c9a6f['count']);_0x352a1f['storage']=_0x2df897;}});}),_0x4dfc18(_0x472443)?await _0x47c1ef(_0x290720,_0x472443,_0x1167e3):await _0x25575e(_0x290720,_0x472443,_0x1167e3)))());},_0x3022e3=_0x197083=>{const {numSplats:_0x58f526,chunkData:_0x551cf8,chunkSize:_0x39872d,vertexData:_0x2af07f,shData0:_0x31e4bb,shData1:_0xfa1dcb,shData2:_0x3ba3fd,shBands:_0x28e9a6,comments:_0x4ce4b6,is4D:_0x14d1f6}=_0x197083,_0x556ab8=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x14d1f6&&_0x556ab8['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x28e9a6>0x1304+-0xbb8+-0x74c){const _0x2b88b0=[];for(let _0x4c9260=0x56a+0x1*-0x26ae+0x2144;_0x4c9260<-0x63d+-0x1*0xb1e+0x1188;++_0x4c9260)_0x2b88b0['push']('f_rest_'+_0x4c9260);_0x556ab8['splice'](_0x556ab8['indexOf']('f_dc_0')+(0x34*0x8e+0x4*-0x81e+0x3a1),0x1*0x1565+-0x1216*0x2+-0x123*-0xd,..._0x2b88b0);}const _0x243cf9={};_0x556ab8['forEach'](_0x57678d=>{_0x243cf9[_0x57678d]=new Float32Array(_0x58f526);});const _0x250f3c=new _0x2a9cda(),_0x1b8014=new _0x5f5512(),_0x12d271=new _0x2a9cda(),_0x5a0d03=new _0x1251ae(),_0x484bd2=new _0x2a9cda(),_0x5a1c93=new _0x2a9cda(),_0x480787=_0x28e9a6>-0x210c+0x1f*0x11+0x1efd*0x1?new Float32Array(0x74*0x2+-0xa5f+-0x269*-0x4):null,_0x717854=new _0x102abb(_0x551cf8,_0x39872d,_0x2af07f,_0x31e4bb,_0xfa1dcb,_0x3ba3fd,_0x28e9a6,_0x250f3c,_0x1b8014,_0x12d271,_0x5a0d03,_0x484bd2,_0x5a1c93,_0x480787);for(let _0x940ccc=-0xc75*-0x3+-0x2*-0x62f+-0x31bd;_0x940ccc<_0x58f526;++_0x940ccc){_0x717854['read'](_0x940ccc),_0x243cf9['x'][_0x940ccc]=_0x250f3c['x'],_0x243cf9['y'][_0x940ccc]=_0x250f3c['y'],_0x243cf9['z'][_0x940ccc]=_0x250f3c['z'],_0x243cf9['rot_1'][_0x940ccc]=_0x1b8014['x'],_0x243cf9['rot_2'][_0x940ccc]=_0x1b8014['y'],_0x243cf9['rot_3'][_0x940ccc]=_0x1b8014['z'],_0x243cf9['rot_0'][_0x940ccc]=_0x1b8014['w'],_0x243cf9['scale_0'][_0x940ccc]=_0x12d271['x'],_0x243cf9['scale_1'][_0x940ccc]=_0x12d271['y'],_0x243cf9['scale_2'][_0x940ccc]=_0x12d271['z'],_0x243cf9['motion_0'][_0x940ccc]=_0x484bd2['x'],_0x243cf9['motion_1'][_0x940ccc]=_0x484bd2['y'],_0x243cf9['motion_2'][_0x940ccc]=_0x484bd2['z'],_0x243cf9['t_scale'][_0x940ccc]=_0x5a1c93['x'],_0x243cf9['t'][_0x940ccc]=_0x5a1c93['y'],_0x243cf9['f_dc_0'][_0x940ccc]=(_0x5a0d03['x']-(0x1*0x1b7f+-0xfb4+-0xbcb+0.5))/_0x1b736f,_0x243cf9['f_dc_1'][_0x940ccc]=(_0x5a0d03['y']-(0xfdd+-0x4a1+-0xb3c+0.5))/_0x1b736f,_0x243cf9['f_dc_2'][_0x940ccc]=(_0x5a0d03['z']-(-0x1315+-0xd83+0x2098*0x1+0.5))/_0x1b736f;const _0x476072=_0x5a0d03['w']<=-0xde6+0xa3*0x31+-0x114d?-(0x1*0x12bb+-0x1c2c+-0xd*-0xbd):_0x5a0d03['w']>=-0x5*-0x2ae+0x158b+0x4*-0x8bc?0x8b4*-0x2+0x7e1*0x1+0x9af:-Math['log']((0x3d*0x8e+0x176a+0x3d1*-0xf)/_0x5a0d03['w']-(0x22cc+-0x4*-0x355+-0x301f*0x1));if(_0x243cf9['opacity'][_0x940ccc]=(0x122a+-0x229f+0x1076)/(-0x1*-0x1bbd+0x25b8+-0x4174+Math['exp'](-_0x476072)),_0x480787){for(let _0x3a0e78=0x8*0x2dc+0x1184+0xb*-0x3ac;_0x3a0e78<-0xcba+-0x179d+0x2484;++_0x3a0e78)_0x243cf9['f_rest_'+_0x3a0e78][_0x940ccc]=_0x480787[_0x3a0e78];}}const _0x4274cf=[{'count':_0x58f526,'name':'vertex','properties':_0x556ab8['map'](_0x4222ec=>({'byteSize':0x4,'name':_0x4222ec,'type':'float','storage':_0x243cf9[_0x4222ec]}))}];return new _0x10b7ec(_0x4274cf,_0x4ce4b6);};}class SN extends pe{constructor(_0x509924){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x509924,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+gN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x3839b0,_0x23b3b5,_0x5e70df=(_0x3a305a,_0x30dfac)=>{},_0x29ec10=(_0x2594ff,_0x35420e,_0x216a75)=>{},_0x4dd9a2=(_0xaa37de,_0x5a380b)=>{}){var _0x5ae07a;return(_0x5ae07a=this['worker'])==null||_0x5ae07a['postMessag'+'e']({'type':'loadPly','url':_0x3839b0,'decompress':_0x23b3b5}),new Promise((_0x576971,_0x367c02)=>{if(!this['worker']){_0x367c02(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x377cda=>{if(!this['worker'])return;const {data:_0xfa59ff}=_0x377cda;if(_0x3839b0===_0xfa59ff['url'])switch(_0xfa59ff['type']){case'totalLengt'+'h':_0x5e70df==null||_0x5e70df(_0xfa59ff['totalLengt'+'h'],_0xfa59ff['url']);break;case'progress':_0x29ec10==null||_0x29ec10(_0xfa59ff['bytes'],_0xfa59ff['totalLengt'+'h'],_0xfa59ff['url']);break;case'splatData':_0x576971(_0xfa59ff['data']);break;case'error':_0x4dd9a2==null||_0x4dd9a2(_0xfa59ff['data'],_0xfa59ff['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x1*0xeb1+-0x1*-0xf95+-0xe4));}}class yN{constructor(_0x2d662d,_0x24a44f){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x2d662d,this['maxRetries']=_0x24a44f,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=-0xe24*0x1+0x1db4+-0x8*0x1f2);}async['load'](_0x4f71ec,_0x5dd8e5,_0x22ea67){var _0x268657,_0x3c23ae,_0x271277;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x4f71ec['load']['includes'](',')?this['urlList']=_0x4f71ec['load']['split'](','):this['urlList']['push'](_0x4f71ec['load']);const _0x41091c=_0x22ea67['data']['createTime']!==((_0x3c23ae=(_0x268657=this['onlyOneAss'+'et'])==null?void(-0x3*0x425+-0x34*-0x2f+0x2e3):_0x268657['data'])==null?void(0x1467+0x8*-0x164+0x947*-0x1):_0x3c23ae['createTime']);(!this['readWorker']||_0x41091c)&&((_0x271277=this['readWorker'])==null||_0x271277['destroy'](),this['readWorker']=new SN(this['urlList']));const _0x9bf98c=_0x22ea67['data']['loadIndex']>=-0x14a0+-0x124c+-0x2*-0x1376?_0x22ea67['data']['loadIndex']:-0x1487*0x1+-0x2483+-0x413*-0xe,_0x219e3f=_0x22ea67['data']['loadMode']==='all'?this['urlList']['length']-_0x9bf98c:_0x9bf98c+(-0x266a+0x3b9*-0x8+-0x1*-0x4433),_0x3f5aba=_0x22ea67['data']['timeOption'],_0x1d7de0=_0x22ea67['data']['events'];for(let _0x25be2a=_0x9bf98c;_0x25be2a<_0x219e3f;_0x25be2a++)await this['loadGsplat'+'Data'](this['urlList'],_0x5dd8e5,_0x22ea67,_0x25be2a,_0x3f5aba,_0x1d7de0,_0x219e3f);_0x1d7de0['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x302f23,_0x370f1b,_0x5e95a2,_0x1181ed,_0x1f1681,_0x26ee86,_0x3af788){var _0x215a41,_0x1e293a,_0x1198a3;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x302f23[_0x1181ed]['trim'](),_0x1181ed);const _0x51fe4e=_0x1f1681[(0x0+0x2*-0x1af+-0x9*-0x60)*_0x1181ed]+_0x1f1681[(0x197b+0x1*0x2332+-0x3cab)*_0x1181ed+(-0x3*-0x571+-0x14f*-0x3+-0x143f)],_0x4e6ea9=_0x302f23[_0x1181ed]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x1456+-0x1*-0xf95+-0x1*-0x1849))['toFixed'](-0x5*-0xd7+-0x11*-0x1ee+-0x3*0xc55));try{const _0x1f0a44=await((_0x215a41=this['readWorker'])==null?void(0x1ab7+0xaf1+-0x25a8):_0x215a41['loadPly'](_0x4e6ea9,_0x5e95a2['data']['decompress'],()=>{this['totalRecei'+'ved']=-0x2*-0xdfd+0xd89+0x1*-0x2983;},(_0x40a780,_0x479b1f)=>{this['totalRecei'+'ved']+=_0x40a780,_0x5e95a2&&_0x26ee86['fire']('progress',_0x479b1f*_0x1181ed/_0x3af788+this['totalRecei'+'ved']/_0x3af788,_0x479b1f);},(_0x339fb3,_0x5522f5)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x5522f5,_0x339fb3);}));let _0x55a3d1;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x1081+0xa25+0x2*-0x38f))['toFixed'](0x542*-0x3+0x11d6*-0x1+0x219e)),_0x1f0a44['isCompress'+'ed']?(_0x55a3d1=new _N(),_0x55a3d1['comments']=_0x1f0a44['comments'],_0x55a3d1['numSplats']=_0x1f0a44['numSplats'],_0x55a3d1['is4D']=_0x1f0a44['is4D'],_0x55a3d1['chunkData']=_0x1f0a44['chunkData'],_0x55a3d1['vertexData']=_0x1f0a44['vertexData'],_0x55a3d1['shData0']=_0x1f0a44['shData0'],_0x55a3d1['shData1']=_0x1f0a44['shData1'],_0x55a3d1['shData2']=_0x1f0a44['shData2'],_0x55a3d1['shBands']=_0x1f0a44['shBands']):_0x55a3d1=new Dn(_0x1f0a44['elements'],_0x1f0a44['comments']),_0x5e95a2['fire']('load:data',_0x55a3d1),_0x55a3d1['isCompress'+'ed']||_0x5e95a2['data']['reorder'];const _0x779d9a=_0x5e95a2['data']['createTime']!==((_0x1198a3=(_0x1e293a=this['onlyOneAss'+'et'])==null?void(-0x11*-0x17+0x1*-0x213d+0x9*0x386):_0x1e293a['data'])==null?void(-0xa9d+0x7f*-0x8+0xe95):_0x1198a3['createTime']);this['gsplatReso'+'urce']&&!_0x779d9a?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x55a3d1['isCompress'+'ed']?await _0x55a3d1['decompress']():_0x55a3d1,_0x1f1681,_0x51fe4e,_0x5e95a2,_0x26ee86):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new Fb(this['app']['graphicsDe'+'vice'],_0x55a3d1['isCompress'+'ed']?await _0x55a3d1['decompress']():_0x55a3d1),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x1f1681,this['onlyOneAss'+'et']=_0x5e95a2),_0x370f1b(null,this['gsplatReso'+'urce']);}catch(_0x8b1ab6){_0x370f1b(_0x8b1ab6,null);}}['open'](_0x1f0e58,_0x448e03){return _0x448e03;}}async function vN(){const _0x3572f3='super4d-ca'+'che-v1',_0x29b285={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x3bd72b=-0x3d3*0x2+0x25b0+0xf05*-0x2+0.28209479177387814;class _0x440ba2{constructor(_0x182bf1={}){this['options']={..._0x29b285,..._0x182bf1},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x5*-0x3bd+0x7d9+0x1*0xad8,this['initialize'+'d']=!(0x33*-0x64+0x9d5*0x1+0xa18);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x3572f3);const _0x10bc60=await this['cache']['keys'](),_0x402d21=[];for(const _0x5911d7 of _0x10bc60){const _0x3f51c0=_0x5911d7['url'],_0x236f84=await this['cache']['match'](_0x3f51c0);if(_0x236f84){const _0x28c49f=(await _0x236f84['blob']())['size'],_0x499c59=_0x236f84['headers']['get']('x-cache-ti'+'me');_0x499c59&&_0x402d21['push']({'url':_0x3f51c0,'size':_0x28c49f,'cacheTime':parseInt(_0x499c59)});}}_0x402d21['sort']((_0x2e16db,_0x6a5d3d)=>_0x2e16db['cacheTime']-_0x6a5d3d['cacheTime']);for(const _0xc8a42 of _0x402d21)this['cacheSizes']['set'](_0xc8a42['url'],_0xc8a42['size']),this['currentSiz'+'e']+=_0xc8a42['size'],this['lruList']['push'](_0xc8a42['url']);}catch(_0x4b6928){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x4b6928);}this['initialize'+'d']=!(-0x1*0x419+-0x12e7*-0x1+-0xece);}}async['get'](_0x2cb47b){if(await this['init'](),!this['cache'])return null;try{const _0x57fa66=await this['cache']['match'](_0x2cb47b);if(!_0x57fa66)return null;const _0x51229d=_0x57fa66['headers']['get']('x-cache-ti'+'me');return _0x51229d&&Date['now']()-parseInt(_0x51229d)>this['options']['maxAge']?(await this['delete'](_0x2cb47b),null):(this['updateLRU'](_0x2cb47b),_0x57fa66);}catch{return null;}}async['set'](_0x4f047d,_0x527005){if(!(!this['cache']||_0x4f047d['startsWith']('blob:')))try{const _0x1d1f01=_0x527005['clone'](),_0x1f6521=await _0x1d1f01['blob'](),_0x17dd2f=_0x1f6521['size'];this['currentSiz'+'e']+_0x17dd2f>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x17dd2f);const _0x36084b=new Headers(_0x1d1f01['headers']);_0x36084b['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x54e2db=new Response(_0x1f6521,{'status':_0x1d1f01['status'],'statusText':_0x1d1f01['statusText'],'headers':_0x36084b});await this['cache']['put'](_0x4f047d,_0x54e2db),this['cacheSizes']['set'](_0x4f047d,_0x17dd2f),this['currentSiz'+'e']+=_0x17dd2f,this['updateLRU'](_0x4f047d);}catch(_0x4d5dfc){console['error']('Cache\x20set\x20'+'error:',_0x4d5dfc);}}['updateLRU'](_0x154925){const _0x342dec=this['lruList']['indexOf'](_0x154925);_0x342dec>-(-0x21f0+-0x17fb+0xb*0x544)&&this['lruList']['splice'](_0x342dec,0x3e*0x8d+0x460+0x13*-0x207),this['lruList']['push'](_0x154925);}async['cleanupSpa'+'ce'](_0x4ddeb0){const _0x3e733c=this['options']['maxSize']*(-0x2208+-0xb09*-0x1+-0x1d*-0xcb+0.9);if(!(this['currentSiz'+'e']<=_0x3e733c))for(;this['lruList']['length']>-0x1*0x9b5+-0x29d+0x2*0x629&&this['currentSiz'+'e']>_0x3e733c;){const _0x5a5a84=this['lruList']['shift']();_0x5a5a84&&await this['delete'](_0x5a5a84);}}async['delete'](_0x2ebb84){if(this['cache'])try{await this['cache']['delete'](_0x2ebb84);const _0xe26d13=this['cacheSizes']['get'](_0x2ebb84)||0xb*0x2d7+-0x625+-0x248*0xb;this['currentSiz'+'e']-=_0xe26d13,this['cacheSizes']['delete'](_0x2ebb84);const _0x4d4b87=this['lruList']['indexOf'](_0x2ebb84);_0x4d4b87>-(0xdd7+0x234d+-0x3*0x1061)&&this['lruList']['splice'](_0x4d4b87,-0x1*-0x1ebc+-0x1d75*0x1+-0x146);}catch(_0x4c2125){console['error']('Cache\x20dele'+'te\x20error:',_0x4c2125);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x18bfb0=>Promise['all'](_0x18bfb0['map'](_0x39bcf7=>{var _0x1e39b7;return(_0x1e39b7=this['cache'])==null?void(0x19bd+-0x412*-0x1+-0x1dcf*0x1):_0x1e39b7['delete'](_0x39bcf7);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x2*0x203+0xf8b*0x1+-0x1391;}catch(_0x1b99f8){console['error']('Cache\x20clea'+'r\x20error:',_0x1b99f8);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x761+0x1491*-0x1+0xd3*0x10;}}class _0x4d7ce3{constructor(_0x3707ed=[],_0x2c4449={}){this['cacheManag'+'er']=new _0x440ba2(_0x2c4449['cache']),this['retryCount']=_0x2c4449['retryCount']||-0x1f2e+-0xb10+0x2a41*0x1,this['retryDelay']=_0x2c4449['retryDelay']||-0x13bf+0x1*-0x173f+0x2cf2,this['maxConcurr'+'ency']=_0x2c4449['maxConcurr'+'ency']||0x1d*0x63+-0x1609*0x1+0xad8,this['downloadQu'+'eue']=_0x3707ed,this['isProcessi'+'ngDownload'+'Queue']=!(-0x99*0xf+0x13ad+0xab5*-0x1),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0xb*-0x122+-0x116d+0x4f7);this['downloadQu'+'eue']['length']>0x2f5+0x2021*-0x1+0xe96*0x2;)try{const _0x1c5ccb=this['downloadQu'+'eue']['splice'](0x685*0x2+-0x1486+-0x2*-0x3be,this['maxConcurr'+'ency'])['map'](_0x2576ec=>{if(!this['pendingRes'+'ponses']['has'](_0x2576ec)){const _0x53341d=this['download'](_0x2576ec);return this['pendingRes'+'ponses']['set'](_0x2576ec,_0x53341d),_0x53341d['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x2576ec);});}return Promise['resolve']();});await Promise['all'](_0x1c5ccb);}catch(_0xe19207){console['error']('Download\x20e'+'rror:',_0xe19207);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x2245+-0x1993*-0x1+-0x3bd7);}}}async['fetch'](_0x1d08f6,_0x36da20={}){if(this['pendingRes'+'ponses']['has'](_0x1d08f6))return this['pendingRes'+'ponses']['get'](_0x1d08f6);const {forceRefresh:_0x245625=!(0x1558+0x1*0x2321+0x4*-0xe1e),..._0xc6a062}=_0x36da20;this['pendingRes'+'ponses']['set'](_0x1d08f6,this['download'](_0x1d08f6,_0xc6a062));const _0x4fd207=await this['pendingRes'+'ponses']['get'](_0x1d08f6);return this['pendingRes'+'ponses']['delete'](_0x1d08f6),_0x4fd207;}async['download'](_0x2fec7b,_0xc034b8={}){var _0x491c0a;await((_0x491c0a=this['cacheManag'+'er'])==null?void(-0x2705+-0x6d*0x43+0x189*0x2c):_0x491c0a['init']());const {forceRefresh:_0x41410f=!(-0x6f3*-0x4+-0x1b1*0x9+-0xc92),..._0x4a9ab5}=_0xc034b8;_0x41410f&&await this['cacheManag'+'er']['delete'](_0x2fec7b);const _0x3e4c98=await this['cacheManag'+'er']['get'](_0x2fec7b);if(_0x3e4c98)return _0x3e4c98;let _0x314a63;for(let _0x33bca1=0x13f9*0x1+-0xb5*-0x35+0x2b*-0x156;_0x33bca1<this['retryCount'];_0x33bca1++)try{const _0x1e13c=await fetch(_0x2fec7b,_0x4a9ab5);if(!_0x1e13c['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x1e13c['status']);return await this['cacheManag'+'er']['set'](_0x2fec7b,_0x1e13c),_0x1e13c;}catch(_0x3353f8){console['error']('Download\x20e'+'rror:',_0x3353f8),_0x314a63=_0x3353f8,_0x33bca1<this['retryCount']-(-0x1*-0x70b+-0x105+-0x43*0x17)&&await new Promise(_0x255513=>setTimeout(_0x255513,this['retryDelay']*(_0x33bca1+(0x9d*0x2b+-0x7a6+-0x257*0x8))));}throw _0x314a63;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x446e0e;(_0x446e0e=this['cacheManag'+'er'])==null||_0x446e0e['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x53*-0x57+0x91b+-0x254f*0x1),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x5b87a0{constructor(_0x1db389,_0x7c0402=[]){this['elements']=_0x1db389,this['comments']=_0x7c0402,this['isCompress'+'ed']=!(0x8*-0x422+0x5ec+-0x1*-0x1b25);}}class _0x24ba8b{constructor(_0x293a25){this['url']=_0x293a25;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x4d7ce3(globalThis['downloadQu'+'eueUrlList']));const _0x2ed722=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x2ed722['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x2ed722['statusText']);const _0x2d7bc4=await _0x2ed722['arrayBuffe'+'r'](),_0x194dc8=new Uint8Array(_0x2d7bc4);let _0x5f4428=-0x1*0x9aa+-0x1*-0x1495+-0x41*0x2b,{size:_0x5182ea,type:_0x2499a8}=this['_readBoxHe'+'ader'](_0x194dc8,_0x5f4428);if(_0x2499a8!=='moof')throw new Error('Not\x20a\x20moof');_0x5f4428+=-0x2c8*0x9+0xf1+0x181f;const _0x1732ff=_0x5f4428+_0x5182ea-(-0x76*-0x1d+0x2*0x6c3+0xbf*-0x24);let _0x36f98c=null;for(;_0x5f4428<_0x1732ff;){const {size:_0x36e6a5,type:_0x4aa22b}=this['_readBoxHe'+'ader'](_0x194dc8,_0x5f4428);_0x5f4428+=-0x50*0x55+0xc3*-0x5+-0x1*-0x1e67;const _0x27672e=_0x194dc8['slice'](_0x5f4428,_0x5f4428+_0x36e6a5-(0xd5+0x2f*-0x65+0x3*0x5ea));_0x5f4428+=_0x36e6a5-(-0x11*-0x1df+-0x56*-0x3+-0x20c9),_0x4aa22b==='emsg'&&(_0x36f98c=this['_parseEmsg'](_0x27672e));}if(!_0x36f98c)throw new Error('Incomplete'+'\x20moof');const {size:_0x5729dd,type:_0x25ccbe}=this['_readBoxHe'+'ader'](_0x194dc8,_0x5f4428);if(_0x25ccbe!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x5f4428+=-0xd82+-0x2507+0x35f*0xf;const _0x50fbc4=_0x194dc8['slice'](_0x5f4428,_0x5f4428+(_0x5729dd-(-0x6be*-0x2+0x732+-0x14a6)));return{'metadata':_0x36f98c,'segmentData':_0x50fbc4};}['_readBoxHe'+'ader'](_0x5e432d,_0x5ab65a){if(_0x5ab65a+(-0x1*0x6a1+0x7e1+-0x138)>_0x5e432d['length'])throw new Error('EOF');const _0x3cec24=_0x5e432d[_0x5ab65a]<<0xf91+-0xc78*0x2+0x977|_0x5e432d[_0x5ab65a+(0x6d*-0x27+0x1cc1+-0xc25)]<<-0x1068+-0x1493+0x250b|_0x5e432d[_0x5ab65a+(0x786+0x1b37+-0x22bb)]<<0x1*-0x18df+-0xe26+0x270d|_0x5e432d[_0x5ab65a+(-0xb3*0x26+0x3*0x741+0x4d2)],_0x4bfe5f=String['fromCharCo'+'de'](_0x5e432d[_0x5ab65a+(-0xbe*-0x2b+0xfd*-0xc+0xa*-0x201)],_0x5e432d[_0x5ab65a+(0x2*0xb03+-0x5*-0x7b+-0x1868)],_0x5e432d[_0x5ab65a+(-0x15ff*0x1+-0x7*-0xd5+0x1032)],_0x5e432d[_0x5ab65a+(-0x22*0x10d+0x1fdb+-0x1f3*-0x2)]);return{'size':_0x3cec24,'type':_0x4bfe5f};}['_parseEmsg'](_0xcb45d6){let _0x1c97a9=-0x11b*-0xb+-0x62c+-0x5fd;_0x1c97a9=_0xcb45d6['indexOf'](-0x9ae+-0xf78+0x1926,_0x1c97a9)+(-0xe3+-0xf1f+-0x1003*-0x1),_0x1c97a9=_0xcb45d6['indexOf'](-0x26fe+0x2d1+0x242d,_0x1c97a9)+(-0x26aa+0xa*-0x15b+0x1d*0x1cd),_0x1c97a9+=0x116e+0x856+-0x149*0x14;const _0x15c8f8=_0xcb45d6['slice'](_0x1c97a9);return globalThis['CBOR']['decode'](_0x15c8f8);}}class _0x47887a{constructor(_0x57b198=-0x16+0x1883+0x1*-0x186d,_0x7db28a=-0x76*-0x5+0x1*0x7af+0x1*-0x9fd,_0x3aaab5=-0x1923+0x1979+0x2b*-0x2,_0xa1370c=0x5c6*-0x2+-0x1*-0x17bc+0x1*-0xc2f){this['x']=_0x57b198,this['y']=_0x7db28a,this['z']=_0x3aaab5,this['w']=_0xa1370c;}['set'](_0x11c7b1,_0x54ee38,_0x1e05c5,_0x10237e){return this['x']=_0x11c7b1,this['y']=_0x54ee38,this['z']=_0x1e05c5,this['w']=_0x10237e,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x189265=this){let _0x5b8688=_0x189265['length']();return _0x5b8688===0xf*0x8b+-0x33*0x85+0x36*0x57?(this['x']=this['y']=this['z']=-0x5f8*-0x2+-0xa6+-0xb4a,this['w']=-0x5*0x77b+0x6*-0x3ab+0x3b6a):(_0x5b8688=(0x104d*-0x2+0x1e54+0x1*0x247)/_0x5b8688,this['x']=_0x189265['x']*_0x5b8688,this['y']=_0x189265['y']*_0x5b8688,this['z']=_0x189265['z']*_0x5b8688,this['w']=_0x189265['w']*_0x5b8688),this;}['mulScalar'](_0x1c67eb,_0x4ed841=this){return this['x']=_0x4ed841['x']*_0x1c67eb,this['y']=_0x4ed841['y']*_0x1c67eb,this['z']=_0x4ed841['z']*_0x1c67eb,this['w']=_0x4ed841['w']*_0x1c67eb,this;}}self['onmessage']=async _0x55427d=>{var _0x1b9c92,_0x3e6a40;const {data:_0x472845}=_0x55427d;switch(_0x472845['type']){case'initWorker':importScripts(_0x472845['cborXUrl']);break;case'destroyWor'+'ker':_0x287c73();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x36899f,loadRepresentation:_0x23b8d4}=_0x472845,_0x1eb582=await _0x5c5e27(_0x36899f,_0x23b8d4);globalThis['manifestUr'+'l']=_0x36899f,globalThis['manifest']=_0x1eb582,globalThis['resentatio'+'n']=_0x1eb582['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x4e451e(),globalThis['fetchWorke'+'r']=new _0x4d7ce3(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x1eb582,'url':_0x36899f,'representation':_0x23b8d4});break;case'loadGsdSeg'+'ments':try{const _0x1d6a2d=_0x47baea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x4e0698=await _0x97aea3(globalThis['manifest'],_0x1d6a2d),_0xad78e2=(_0x1b9c92=_0x4e0698==null?void(0x2188+0x1*0x4fd+0x3*-0xcd7):_0x4e0698['elements'][-0x3dd*0x3+0x741+-0x6f*-0xa])==null?void(0x6d*-0x53+0x7bf+0x6e6*0x4):_0x1b9c92['properties']['map'](_0x12d048=>_0x12d048['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x4e0698,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0xad78e2);}catch(_0x550f29){console['error']('Error\x20load'+'ing\x20GSD:',_0x550f29),self['postMessag'+'e']({'type':'error','data':_0x550f29['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x8bbf07}=_0x472845;try{const _0x37f533=_0x47baea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x59ce3a=await _0x4788f8(globalThis['manifest'],_0x37f533,_0x8bbf07),_0x1d721a=(_0x3e6a40=_0x59ce3a==null?void(0x20cc+-0x2*-0xef6+-0x3eb8):_0x59ce3a['elements'][-0x1f1c+-0x162f+-0x79d*-0x7])==null?void(0x8d9+0x2700+0xff3*-0x3):_0x3e6a40['properties']['map'](_0x5609c3=>_0x5609c3['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x59ce3a,'timelineIndexs':_0x8bbf07,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x1d721a);}catch(_0x38bde1){console['error']('Error\x20load'+'ing\x20GSD:',_0x38bde1),self['postMessag'+'e']({'type':'error','data':_0x38bde1['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x287c73=()=>{var _0x52919b;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x52919b=globalThis['fetchWorke'+'r'])==null||_0x52919b['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x4e451e=()=>{const _0x330307=new Set(),_0x288785=_0x47baea(globalThis['manifest'],globalThis['resentatio'+'n']),_0x3383de=globalThis['manifest']['baseUrl'],_0x56885b=_0x288785['segmentTem'+'plate'][0x2e*-0x76+-0x7bb*-0x5+-0x1173];for(const _0x38d2ad of _0x56885b['segmentTim'+'eline'])for(const _0x214726 of _0x38d2ad['nl']){const _0xbeb4c4=''+_0x3383de+_0x56885b['media']['replace']('$SegGroupI'+'ndex$',String(_0x38d2ad['sg']))['replace']('$NodeIndex'+'$',String(_0x214726));_0x330307['add'](_0xbeb4c4);}return Array['from'](_0x330307);},_0x5c5e27=async(_0xa8ad60,_0x52a391)=>{const _0x1ffe6f=await(await fetch(_0xa8ad60))['text'](),_0x48819a=JSON['parse'](_0x1ffe6f);_0x48819a['baseUrl']=_0xa8ad60['replace'](/\/[^\/]*$/,'/');const {schemas:_0xdad4a5,gsiUrl:_0x26f70d,repId:_0x381ff5}=await _0x578410(_0x48819a,_0x52a391);return _0x48819a['schemas']=_0xdad4a5,_0x48819a['gsiUrl']=_0x26f70d,_0x48819a['representa'+'tion']=_0x381ff5,_0x48819a;},_0x578410=async(_0x403069,_0x57af3a)=>{let _0x431e26=null,_0x51ad51=null;for(const _0x25ca04 of _0x403069['adaptation'+'Sets'])if(_0x25ca04['contentTyp'+'e']==='4dgs'){_0x51ad51=_0x25ca04;for(const _0x3f5d59 of _0x25ca04['representa'+'tions'])if(_0x3f5d59['id']===_0x57af3a){_0x431e26=_0x3f5d59;break;}break;}_0x431e26||(_0x431e26=_0x51ad51['representa'+'tions'][0x2*-0x5ff+0x76*-0x2f+0x21a8],console['warn']('Representa'+'tion\x20\x27'+_0x57af3a+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x558f36=_0x431e26['id'],_0x4e9e0a=_0x403069['baseUrl']+_0x558f36+('/init.gsi.'+'json'),_0x1079d5=await(await fetch(_0x4e9e0a))['text'](),_0xe2d751=JSON['parse'](_0x1079d5),_0x2227e3={};return _0x2227e3[_0x558f36]=_0xe2d751,{'schemas':_0x2227e3,'gsiUrl':_0x4e9e0a,'repId':_0x558f36};},_0x47baea=(_0x1567eb,_0x44a192='high-quant'+'ized')=>{let _0x3f38d8=null;for(const _0xd06f62 of _0x1567eb['adaptation'+'Sets'])if(_0xd06f62['contentTyp'+'e']==='4dgs'){for(const _0x501259 of _0xd06f62['representa'+'tions'])if(_0x501259['id']===_0x44a192){_0x3f38d8=_0x501259;break;}break;}if(!_0x3f38d8)throw new Error('Representa'+'tion\x20\x27'+_0x44a192+('\x27\x20not\x20foun'+'d'));return _0x3f38d8;},_0x97aea3=async(_0x1be0b5,_0x41e965)=>{const _0x4ed90b=_0x41e965['id'],_0x4573cb=_0x1be0b5['schemas'][_0x4ed90b]['attributes'],_0xa6afea=_0x41e965['segmentTem'+'plate'][-0x4bc*-0x7+-0x166d+-0xab7*0x1];globalThis['loadedSegm'+'ents']=[];const _0x2f9502=[],_0x3af475=[];for(const _0xa95063 of _0xa6afea['segmentTim'+'eline'])for(const _0x22cccd of _0xa95063['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0xa95063['sg']+'_'+_0x22cccd))continue;globalThis['loadedSegm'+'ents']['push'](_0xa95063['sg']+'_'+_0x22cccd);const _0xa02593=await _0x2365e6(_0x1be0b5,_0x41e965,_0x4573cb,_0xa95063['sg'],_0x22cccd);_0x3af475['push'](_0xa02593['decoded']),_0x2f9502['push'](_0xa02593['metadata']);}return _0x39940d(_0x3af475,_0x4573cb,_0x1be0b5['comments']);},_0x4788f8=async(_0x346269,_0x52080c,_0x32ea87)=>{if(!_0x32ea87||_0x32ea87['length']===0x1fe0+0x10f7+0x1*-0x30d7)return{'decoded':[],'metadata':[]};const _0x1b428d=_0x52080c['id'],_0x516825=_0x346269['schemas'][_0x1b428d]['attributes'],_0x4baebd=_0x52080c['segmentTem'+'plate'][-0x527+0xaf2+0x1*-0x5cb];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x333902=_0x4baebd['segmentTim'+'eline'][_0x32ea87[-0x2150+-0x3*-0xc91+0x463*-0x1]];globalThis['currentLoa'+'dSg']!==_0x333902['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x2a9914=>!_0x2a9914['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x333902['sg']);let _0x483ea6;const _0x8f773=[];for(const _0x4f2822 of _0x32ea87){_0x483ea6=_0x4baebd['segmentTim'+'eline'][_0x4f2822];for(const _0x21c618 of _0x483ea6['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x483ea6['sg']+'_'+_0x21c618)||(globalThis['loadedSegm'+'ents']['push'](_0x483ea6['sg']+'_'+_0x21c618),_0x8f773['push'](_0x21c618));}const _0x5316dd=await _0x2365e6(_0x346269,_0x52080c,_0x516825,_0x483ea6['sg'],_0x8f773);_0x5316dd['metadata'];const _0x3ea3fe=_0x5316dd['decoded'];return _0x39940d(_0x3ea3fe,_0x516825,_0x346269['comments']);},_0x2365e6=async(_0xc3db9f,_0x149c61,_0x32564b,_0x30d951,_0xb12a7c)=>{const _0x10c7dd=_0xc3db9f['baseUrl'],_0x5c9587=_0x149c61['segmentTem'+'plate'][-0x2*-0x38b+0x1*-0x1b0e+0x2*0x9fc]['media'],_0x32b496=_0xb12a7c['map'](_0x314dab=>''+_0x10c7dd+_0x5c9587['replace']('$SegGroupI'+'ndex$',String(_0x30d951))['replace']('$NodeIndex'+'$',String(_0x314dab))),_0x268725=await Promise['all'](_0x32b496['map'](async _0x5b068d=>{const _0x3eb073=await _0x5624d0(_0x5b068d),_0x1c09d2=_0x3eb073['metadata'],_0x18911a=_0x3eb073['segmentDat'+'a'],_0x2fb56b=_0x1c09d2['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x5b068d),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x1c09d2['timeStart'],'segment\x20ti'+'meEnd:',_0x1c09d2['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x2fb56b);let _0x38999e;if(_0x149c61['id']['includes']('quantized')){const _0x36cafe=_0x1c09d2['chunk_boun'+'ds'];_0x38999e=_0x10ac68(_0x18911a,_0x2fb56b,_0x32564b,_0x30d951,_0x36cafe);}else _0x38999e=_0x570047(_0x18911a,_0x2fb56b,_0x32564b,_0x30d951);return{'decoded':_0x38999e,'metadata':_0x1c09d2};})),_0x270b87=_0x268725['map'](_0x4e2c64=>_0x4e2c64['decoded']),_0x5d14ee=_0x268725['map'](_0x3599d9=>_0x3599d9['metadata']);return{'decoded':_0x270b87,'metadata':_0x5d14ee};},_0x39940d=(_0x41ada8,_0x45c59b,_0x3be220)=>{if(_0x41ada8['length']===0x14c4+-0x29*-0xb2+0x173*-0x22)return new _0x5b87a0([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(-0xf6f+0x5bc+0x1*0x9b3),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x2455+-0x84c*0x2+0x1*0x34ed),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(0xfc9+-0x871+-0x758),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(0x1cf6+0x11e5+-0x2edb),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(0xf67+0x46f*-0x2+-0x689),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(0xcf*0x3+-0x13a2+-0x1135*-0x1),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(-0x14b*0x17+-0x1a51*0x1+0x380e),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(0x1f05+-0xbd*-0x15+-0x1e*0x18d),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(-0x15f5+0x1609+-0x2*0xa),'byteSize':0x4}]}],_0x3be220);const _0xfc0f22=_0x192a3e(_0x41ada8),[_0x54978b,_0x58cb01,_0xea9578]=_0x487b38(_0xfc0f22['lifecycle'],0x1d7*0x15+-0xa*-0x3b+-0x28ee,Float32Array),_0x5a9178=_0xfc0f22['time_index'],_0x43fe6c=_0x45c59b['find'](_0x375aee=>_0x375aee['name']==='feature_re'+'st'),_0x542d5c=[];if(_0x43fe6c&&_0xfc0f22['feature_re'+'st']){const _0x4a68aa=_0x43fe6c['dataType']['split'](',')[-0x4b0+0x10df+-0xc2e]['trim']()['replace']('>',''),_0xd6dfb5=_0x487b38(_0xfc0f22['feature_re'+'st'],-0x1cec+0xaf7+0x11f8*0x1,Float32Array);for(const _0x3cb3b0 of _0xd6dfb5){const _0x578c3a=_0x487b38(_0x3cb3b0,_0x4a68aa/(-0x1b00+0x2511*0x1+-0xa0e),Float32Array);for(let _0x695ee5=0x1c6f+-0xb6*-0x33+-0x40b1;_0x695ee5<_0x578c3a['length'];_0x695ee5++)_0x542d5c['push']({'name':'f_rest_'+_0x695ee5,'type':'float','storage':_0x578c3a[_0x695ee5],'byteSize':0x4});}}return new _0x5b87a0([{'name':'vertex','count':_0xfc0f22['position']['length']/(0x138+-0x1482+0x134d),'properties':[{'name':'position','type':'float','storage':_0xfc0f22['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0xfc0f22['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x58cb01,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x54978b,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0xea9578,'byteSize':0x4},{'name':'motion','type':'float','storage':_0xfc0f22['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0xfc0f22['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0xfc0f22['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x5a9178,'byteSize':0x4},..._0x542d5c]}],_0x3be220);},_0x487b38=(_0x32a706,_0x553095,_0x5a7323)=>{const _0x3e8381=new Array(_0x553095),_0x78c4c1=Math['floor'](_0x32a706['length']/_0x553095),_0x337e1f=_0x32a706['length']%_0x553095;for(let _0xb6987a=0x1790+0xdf2+-0x1*0x2582;_0xb6987a<_0x553095;_0xb6987a++){const _0xa925cc=_0xb6987a<_0x337e1f?_0x78c4c1+(0xbf+-0x4*0x99d+0x649*0x6):_0x78c4c1;_0x3e8381[_0xb6987a]=new _0x5a7323(_0xa925cc);}for(let _0x1cd795=0x59*-0x43+0x17e1*0x1+-0x6*0x19;_0x1cd795<_0x32a706['length'];_0x1cd795++){const _0x110855=_0x1cd795%_0x553095,_0x505608=Math['floor'](_0x1cd795/_0x553095);_0x3e8381[_0x110855][_0x505608]=_0x32a706[_0x1cd795];}return _0x3e8381;},_0x5624d0=async _0x243a7a=>{const _0x44c6f8=new _0x24ba8b(_0x243a7a),{metadata:_0x598f07,segmentData:_0x5b396c}=await _0x44c6f8['readFragme'+'nt']();return{'metadata':_0x598f07,'segmentData':_0x5b396c};},_0x4c45dc=(_0x222bc8,_0x18929f)=>{let _0x532d22,_0x1d8f1f,_0x5c1a51=-(-0xec3+-0xd*0xeb+0x1ab3);if(_0x222bc8['encoding']){const _0x5bd06e=_0x222bc8['encoding']['storageTyp'+'e'];if(_0x5bd06e==='uint32')_0x1d8f1f=Uint32Array,_0x532d22=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x5bd06e['startsWith']('array<ucha'+'r')){_0x1d8f1f=Uint8Array;const _0x9df880=_0x5bd06e['split'](',')[-0xe24+-0x3*0xb71+0x3078]['trim']()['replace']('>','');_0x5c1a51=parseInt(_0x9df880),_0x532d22=_0x5c1a51*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x5bd06e);}}else{if(_0x1d8f1f=Float32Array,_0x222bc8['dataType']==='vec3f')_0x532d22=(0x3bc*-0x6+-0x4f*0x7+0x1894)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x222bc8['dataType']==='vec4f')_0x532d22=(0x300+0xd77+-0x1073)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x222bc8['dataType']==='vec2f')_0x532d22=(-0x538+0x1cd4+-0x39*0x6a)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x222bc8['dataType']['startsWith']('array<floa'+'t')){const _0x2b316b=_0x222bc8['dataType']['split'](',')[-0xe*0x5+0xeea+-0x3*0x4e1]['trim']()['replace']('>','');_0x5c1a51=parseInt(_0x2b316b),_0x532d22=_0x5c1a51*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x222bc8['dataType']);}}}}return{'dataSize':_0x18929f*_0x532d22,'datatype':_0x1d8f1f,'arraySize':_0x5c1a51};},_0x1e0350=(_0x292edc,_0x249e91)=>{const _0xd4ea6a=(-0x2030+-0x1*-0x1c80+0x3b1<<_0x249e91)-(0x11*0x2b+0x69f+0x61*-0x19);return(_0x292edc&_0xd4ea6a)/_0xd4ea6a;},_0x4e68cd=_0x51fff8=>{const _0x4295bc=new Float32Array(_0x51fff8['length']*(0x74f+0x535+-0xc81));for(let _0x2a6284=-0x2*-0xb85+-0x1ab3+0x3a9;_0x2a6284<_0x51fff8['length'];_0x2a6284++)_0x4295bc[_0x2a6284*(0x1c0c+0x1c8b*-0x1+0x82)]=_0x1e0350(_0x51fff8[_0x2a6284]>>>-0x1f25+0x3*-0x499+0x2d05,0x116c+0x4f*-0x3+-0x1074),_0x4295bc[_0x2a6284*(-0xa97+-0x61*-0x60+-0x19c6)+(0x2ca+-0xda8+0xfd*0xb)]=_0x1e0350(_0x51fff8[_0x2a6284]>>>0x7*-0xbf+0x1*-0x2289+-0x17*-0x1bb,0x1b6d+0xbe7+0x274a*-0x1),_0x4295bc[_0x2a6284*(0x1c29+-0x204*0x7+-0xe0a)+(0x3*0x969+-0x1ef+-0x1a4a)]=_0x1e0350(_0x51fff8[_0x2a6284],-0x887*0x1+0x6e*0x8+0x522);return _0x4295bc;},_0xe990c5=_0x51aabc=>{const _0x2d9c12=new Float32Array(_0x51aabc['length']*(-0x1b18+-0x347*0x5+0x2b7f));for(let _0x6c8ade=0x80b+-0x18c2+0x10b7;_0x6c8ade<_0x51aabc['length'];_0x6c8ade++)_0x2d9c12[_0x6c8ade*(-0x9d1+0x1be0*0x1+-0x120b)]=_0x1e0350(_0x51aabc[_0x6c8ade]>>>-0x8*-0x215+-0x2*0xe29+-0x1*-0xbc2,0xdae+-0x19f*-0x5+-0x15c1),_0x2d9c12[_0x6c8ade*(0x813*0x3+0x5f3*-0x6+-0xb7d*-0x1)+(0x1*0x383+-0x5ca+0x248)]=_0x1e0350(_0x51aabc[_0x6c8ade]>>>0x2*0x6ff+0x1*-0x755+-0x3*0x233,0x93c+-0x1*0x11a6+-0x439*-0x2),_0x2d9c12[_0x6c8ade*(0x243f*-0x1+-0xb+0x244e)+(-0x1*0x1c58+0x14*0x7f+0x7*0x2a2)]=_0x1e0350(_0x51aabc[_0x6c8ade]>>>0x7*-0x382+-0x12+0x18a8,-0x1ee4+-0x25d6+-0x1a*-0x2a5),_0x2d9c12[_0x6c8ade*(-0x1230+-0x15*-0x31+0xe2f)+(0x4*0x23d+0xc2c+-0x151d)]=_0x1e0350(_0x51aabc[_0x6c8ade],0xf01+0x148f+-0x2388);return _0x2d9c12;},_0x2847c5=_0x4064ba=>{const _0x203c21=new Float32Array(_0x4064ba['length']*(-0x71f*-0x3+0x16*0xfd+-0x2b18)),_0x4e0280=(-0x155d+-0x1*0x15cf+0x2b2d)/(Math['sqrt'](0x122a+-0x12*0xc7+0xd*-0x52)*(-0x1*-0x4a9+0x7a5*-0x3+0x923*0x2+0.5));for(let _0x3d5cd3=-0x7*-0x27b+0x51*-0x35+-0x98;_0x3d5cd3<_0x4064ba['length'];_0x3d5cd3++){const _0x4389fd=(_0x1e0350(_0x4064ba[_0x3d5cd3]>>>-0x5*0x461+-0x15d1+-0x5f*-0x76,0x1cae+-0x6ad*-0x1+-0x1*0x2351)-(0x34b*-0x3+0x26b*0x2+0x50b+0.5))*_0x4e0280,_0x5560db=(_0x1e0350(_0x4064ba[_0x3d5cd3]>>>0x1*0x96d+-0x71c+0xb*-0x35,-0xa*0x18+0x44*0xa+-0x1ae)-(-0x21b1+-0x38*0x62+0x3721+0.5))*_0x4e0280,_0x44c87f=(_0x1e0350(_0x4064ba[_0x3d5cd3],0x981+-0x416*0x1+-0x561)-(-0x443+0x2*0xc0f+-0x13db+0.5))*_0x4e0280,_0xce49fc=Math['sqrt'](-0xc63+0x2525+-0x18c1-(_0x4389fd*_0x4389fd+_0x5560db*_0x5560db+_0x44c87f*_0x44c87f));let _0x5e665b=-0x1*-0x152b+-0x117*0x1d+0xa70,_0x5a05ce=-0x1*0x1e2+-0x1645+0x1827,_0x3144f8=-0x1b44+0x2b*0x1+0x1b19,_0x4d2c11=0xd*-0x249+-0x2ec+-0x1*-0x20a1;switch(_0x4064ba[_0x3d5cd3]>>>0x2*-0xb57+0x489+-0xbb*-0x19){case-0x1db3+0x2f3*0x1+-0x1*-0x1ac0:_0x5e665b=_0xce49fc,_0x5a05ce=_0x4389fd,_0x3144f8=_0x5560db,_0x4d2c11=_0x44c87f;break;case 0x1*-0x761+-0x6c*0xe+0xd4a:_0x5e665b=_0xce49fc,_0x5a05ce=_0x5560db,_0x3144f8=_0x44c87f,_0x4d2c11=_0x4389fd;break;case-0x183d+-0x1fcf+-0x7*-0x802:_0x5e665b=_0x5560db,_0x5a05ce=_0xce49fc,_0x3144f8=_0x44c87f,_0x4d2c11=_0x4389fd;break;case 0x235b+-0x25*-0x32+-0x2a92:_0x5e665b=_0x5560db,_0x5a05ce=_0x44c87f,_0x3144f8=_0xce49fc,_0x4d2c11=_0x4389fd;break;}const _0x5a0229=_0x8872b5(_0x5e665b,_0x5a05ce,_0x3144f8,_0x4d2c11);_0x203c21[_0x3d5cd3*(0x182*-0x18+0xd7e+0x16b5)]=_0x5a0229['x'],_0x203c21[_0x3d5cd3*(0x92f+0x1127+0x125*-0x17)+(-0x1e6b+-0x24f7*-0x1+-0x68b*0x1)]=_0x5a0229['y'],_0x203c21[_0x3d5cd3*(0x1ab7+0xb*-0x1ac+-0x428*0x2)+(0xe1b+0x13*-0x31+-0xa76)]=_0x5a0229['z'];}return _0x203c21;},_0x29ac08=(_0x147a88,_0x550d8f,_0x287bfc)=>{const _0x37b2c7=_0x287bfc-_0x550d8f,_0x221bcc=new Float32Array(_0x147a88['length']);for(let _0x54a496=-0x97*-0x17+0x1790*0x1+-0x2521;_0x54a496<_0x147a88['length'];_0x54a496++)_0x221bcc[_0x54a496]=_0x147a88[_0x54a496]/(-0x23e1+0xce+0xc06*0x3)*_0x37b2c7+_0x550d8f;return _0x221bcc;},_0x554736=new Float32Array(-0x1*-0x120a+0x209e+-0x32a7),_0x453b42=new Int32Array(_0x554736['buffer']),_0x45dac0=_0x1f5f07=>{_0x554736[-0xed8+-0x22ae*-0x1+-0x13d6]=_0x1f5f07;const _0x1726f4=_0x453b42[0x1*-0x2c+0x64d*0x3+-0x12bb];let _0x2afcfb=_0x1726f4>>-0x9e*0x1f+-0x7a0*0x2+-0x1139*-0x2&-0xc3ce+0x2035+-0x12399*-0x1,_0x23e0ea=_0x1726f4>>-0x55*0x17+0x36f*-0x2+0x19*0x95&-0x24a+0x7*-0x1c2+0x1697;const _0x100497=_0x1726f4>>0xf*0x1d8+-0x3b*0x83+0x2a0&-0x346*0x6+-0x15b2+0x2a55;return _0x100497<-0x413*-0x7+-0x22d8+0x6ba?_0x2afcfb:_0x100497>0x5*0x195+-0x2*-0x80+0x17*-0x5d?(_0x2afcfb|=0xb284+0x4984*0x3+-0x11310,_0x2afcfb|=(_0x100497===-0xf58*0x1+-0x1*0xaa9+0x1b00?0x2273*0x1+-0x3*0xcb5+0x3ac:0x121*-0x22+0x1*-0x1753+0x3db6)&&_0x1726f4&0x2d2d86+-0x25fbbc*-0x4+-0x1*0x451c77,_0x2afcfb):_0x100497<-0xf*-0xa3+-0x20b2+0x1796?(_0x23e0ea|=0x12a1+0xbd*0x24+-0x2535,_0x2afcfb|=(_0x23e0ea>>-0x2345+0x6c9*-0x2+0x3149-_0x100497)+(_0x23e0ea>>0x1861+0x1b56+0x19a3*-0x2-_0x100497&-0x788+0x1c0e+-0x1485),_0x2afcfb):(_0x2afcfb|=_0x100497-(-0x264f+0x65f+0x2060)<<-0x1*-0x223f+0x1*-0xb25+-0x24*0xa4|_0x23e0ea>>0x1a73+-0x4d6+-0x159c,_0x2afcfb+=_0x23e0ea&0x23aa+-0xc1*0xf+-0x185a,_0x2afcfb);},_0x1ad9b6=_0x131171=>{const _0x41c476=new Uint16Array(_0x131171['length']);for(let _0x4f8d1d=0xac3+0x1874*0x1+-0x2337;_0x4f8d1d<_0x131171['length']/(0xc*-0x2cf+0x1087*0x2+-0xa*-0x11);++_0x4f8d1d)_0x41c476[_0x4f8d1d*(0x118d*0x2+-0x1b95+0x71*-0x11)]=_0x45dac0(_0x131171[_0x4f8d1d*(0x1567*0x1+-0x1*-0xd37+0x2*-0x114d)]*_0x3bd72b+(-0x261f+-0x18*0x12f+0x4287+0.5)),_0x41c476[_0x4f8d1d*(0x1227+0x10*-0x67+0xbb3*-0x1)+(-0x689+0x1be3+0x5*-0x445)]=_0x45dac0(_0x131171[_0x4f8d1d*(0x6d6+0x242+-0x245*0x4)+(0x1ed1+-0x3ad*-0x9+0x5cf*-0xb)]*_0x3bd72b+(-0x1e5d+0x99b*-0x2+0x1*0x3193+0.5)),_0x41c476[_0x4f8d1d*(0x47d*-0x7+0x6*-0x5e5+0x42cd)+(-0x1c8f+0x292*0x3+-0x119*-0x13)]=_0x45dac0(_0x131171[_0x4f8d1d*(-0xe5b+0x3c*-0x37+0x1b43)+(-0x17*-0x18+0x24cb+-0x26f1)]*_0x3bd72b+(-0x11c2+0x186+0x4*0x40f+0.5)),_0x41c476[_0x4f8d1d*(-0x1941+-0xc5*0x7+0x6*0x51c)+(-0x1594+0x21bb+-0x612*0x2)]=_0x45dac0(_0x131171[_0x4f8d1d*(-0x72*0xd+-0x253d+0x2b0b)+(-0x2*-0x6c5+0x2*0xac+-0xedf)]);return _0x41c476;},_0x4eb19a=new _0x47887a(-0x881+-0x2185*-0x1+-0x1*0x1904,0xbfa*-0x1+0x1*0x737+-0x1*-0x4c3,0x22b3+0x1e2d+-0x15a0*0x3,-0x3fc+-0x2a*0xa8+0x1f8c),_0x8872b5=(_0x1ece16,_0x3c9690,_0x30b851,_0x113aba)=>(_0x4eb19a['set'](_0x3c9690,_0x30b851,_0x113aba,_0x1ece16),_0x4eb19a['normalize'](),_0x4eb19a['w']<0x3*-0x566+0xfae+0x84&&_0x4eb19a['mulScalar'](-(0xec2*-0x1+0x18fb+0x18*-0x6d)),_0x4eb19a);function _0x10ac68(_0x48d3c0,_0x473829,_0x408d08,_0x2dac55,_0x2601ae){const _0x4cfbd1=_0x2601ae[Object['keys'](_0x2601ae)[0x31c*-0xc+-0x645+0x3*0xe87]]['length'],_0x20447e=0x1d97+0x1313+0x2faa*-0x1;let _0x229574=[],_0x37afa8=_0x473829;for(let _0x193111=-0x160e+0xaf*0x1d+-0x23b*-0x1;_0x193111<_0x4cfbd1;_0x193111++){const _0x54326f=Math['min'](_0x20447e,_0x37afa8);_0x229574['push'](_0x54326f),_0x37afa8-=_0x54326f;}let _0x1f9b93=-0x403+-0x4ea*0x5+-0x9*-0x32d,_0x2c8fc7={};for(let _0xf5346c of _0x408d08){const _0x4d7d30=_0xf5346c['name'],{dataSize:_0x428195,datatype:_0x121c1f}=_0x4c45dc(_0xf5346c,_0x473829);let _0x3cde98=_0x48d3c0['buffer']['slice'](_0x1f9b93,_0x1f9b93+_0x428195),_0x535109=new _0x121c1f(_0x3cde98);_0x2c8fc7[_0x4d7d30]=_0x535109,_0x1f9b93+=_0x428195;}let _0x4edebd=[],_0x16b0d2=0x1f00+-0x215d+-0x37*-0xb;for(let _0xbe35a8=0x231e+0x49*0x47+-0x375d;_0xbe35a8<_0x4cfbd1;_0xbe35a8++){const _0x32f77a=_0x3c5987(_0x2c8fc7,_0x2601ae,_0xbe35a8,_0x229574,_0x16b0d2,_0x408d08),_0x224046=_0x32f77a['chunkDecom'+'pressed'];_0x4edebd['push'](_0x224046),_0x16b0d2=_0x32f77a['chunkStart'+'Idx'];}let _0x3cd2db={};for(let _0x3f53ac of Object['keys'](_0x4edebd[0x7d*-0x1a+0x2349+-0x1697])){let _0xa47e4=0x187a+0xab5*0x3+-0x3899;for(let _0x3de08b=-0xa*-0x296+0x7ac*0x2+-0x4*0xa4d;_0x3de08b<_0x4edebd['length'];_0x3de08b++)_0xa47e4+=_0x4edebd[_0x3de08b][_0x3f53ac]['length'];_0x3f53ac==='color_opac'+'ity'||_0x3f53ac==='scale'?_0x3cd2db[_0x3f53ac]=new Uint16Array(_0xa47e4):_0x3cd2db[_0x3f53ac]=new Float32Array(_0xa47e4);let _0xec1512=-0x388*-0x8+0x159f+-0x1*0x31df;for(let _0x105956=0x1*-0x15f1+-0xb6b*-0x3+-0x628*0x2;_0x105956<_0x4edebd['length'];_0x105956++)_0x3cd2db[_0x3f53ac]['set'](_0x4edebd[_0x105956][_0x3f53ac],_0xec1512),_0xec1512+=_0x4edebd[_0x105956][_0x3f53ac]['length'];}return _0x408d08['some'](_0x35b1a9=>_0x35b1a9['name']==='feature_re'+'st')&&(_0x3cd2db['feature_re'+'st']=_0x32e8d5(_0x2c8fc7,_0x408d08)),_0x3cd2db['time_index']=new Float32Array(_0x473829),_0x3cd2db['time_index']['fill'](_0x2dac55-(-0x249f+-0xb2*-0x17+0x14a2)),_0x3cd2db;}const _0x3c5987=(_0x1768fb,_0xa49fd2,_0x1eab03,_0x30680e,_0x1fe9e7,_0x5c6534)=>{const _0x985b=_0x30680e[_0x1eab03],_0x165284=_0x1fe9e7+_0x985b,_0x480328=(_0x3959ad,_0x2fd3c2,_0x26979c)=>_0x3959ad*(-0x994*0x4+-0x1*-0x4b3+0x219e-_0x26979c)+_0x2fd3c2*_0x26979c;let _0x31f61f={};for(let _0x2e78ee of _0x5c6534){const _0x407cf5=_0x2e78ee['name'],_0x2c1983=_0x2e78ee['encoding']['codec'],_0x5761e5=_0x1768fb[_0x407cf5]['slice'](_0x1fe9e7,_0x165284);if(_0x2c1983==='pack_11_10'+'_11'){if(_0x407cf5==='scale'){const _0x264181=_0xa49fd2['min_scales'][_0x1eab03],_0x29d89d=_0xa49fd2['max_scales'][_0x1eab03],_0x17cb11=_0x4e68cd(_0x5761e5),_0x30dd57=_0x17cb11['length'],_0x3acd86=new Uint16Array(_0x30dd57);for(let _0x2493ab=-0xbc*0x25+-0x13d3+0x2eff;_0x2493ab<_0x30dd57;_0x2493ab++)_0x3acd86[_0x2493ab]=_0x45dac0(Math['exp'](_0x480328(_0x264181[_0x2493ab%(0x2*0x1a6+-0x1bc8+-0x187f*-0x1)],_0x29d89d[_0x2493ab%(-0x1885+0x15e3*0x1+0x2a5*0x1)],_0x17cb11[_0x2493ab])));_0x31f61f[_0x407cf5]=_0x3acd86;}else{const _0x276322=_0x4e68cd(_0x5761e5);let _0x494207,_0x3b768c;if(_0x407cf5==='position')_0x494207=_0xa49fd2['min_means'][_0x1eab03],_0x3b768c=_0xa49fd2['max_means'][_0x1eab03];else{if(_0x407cf5==='motion')_0x494207=_0xa49fd2['min_motion'][_0x1eab03],_0x3b768c=_0xa49fd2['max_motion'][_0x1eab03];else{if(_0x407cf5==='lifecycle'){const _0x4eb0e5=_0xa49fd2['min_t_scal'+'e'][_0x1eab03],_0x31dfc1=_0xa49fd2['max_t_scal'+'e'][_0x1eab03],_0x152a36=_0xa49fd2['min_time'][_0x1eab03],_0x35336c=_0xa49fd2['max_time'][_0x1eab03],_0x1104e7=_0xa49fd2['min_cutoff'][_0x1eab03],_0x5ac5b8=_0xa49fd2['max_cutoff'][_0x1eab03];_0x494207=[_0x4eb0e5[0xd8a+0x1*-0x1581+0x7f7],_0x152a36[-0x1f6f*0x1+-0xc34+0x2ba3],_0x1104e7[0x7aa*0x1+0xd11*-0x1+0x1*0x567]],_0x3b768c=[_0x31dfc1[0x2*0x3f6+0x72a+-0xf16],_0x35336c[-0xb8e+0x93c+0x252],_0x5ac5b8[0x260b+-0x6d9*-0x1+-0xd*0x374]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x407cf5);}}for(let _0x48a2ab=0xa97+0x1b1c+-0x25b3;_0x48a2ab<_0x276322['length'];_0x48a2ab++)_0x276322[_0x48a2ab]=_0x480328(_0x494207[_0x48a2ab%(0x1196+-0xe*-0x27c+-0x345b)],_0x3b768c[_0x48a2ab%(-0x1220+0xc2c+0x5f7)],_0x276322[_0x48a2ab]);_0x31f61f[_0x407cf5]=_0x276322;}}else{if(_0x2c1983==='pack_8888'){let _0x417264=_0xe990c5(_0x5761e5);const _0x2f3db1=_0xa49fd2['min_colors'][_0x1eab03],_0x5a3a18=_0xa49fd2['max_colors'][_0x1eab03],_0x518de3=new Uint16Array(_0x417264['length']);for(let _0x29a966=-0x3*0x185+-0x1746+-0x4b*-0x5f;_0x29a966<_0x417264['length'];_0x29a966++){const _0x2310f8=_0x29a966*(-0x35f*0x3+0x1*0x136b+0x29*-0x3a);_0x518de3[_0x2310f8]=_0x45dac0(_0x480328(_0x2f3db1[0xc86+-0x1*0xb45+0x6b*-0x3],_0x5a3a18[0x5*-0x47b+-0x2092+0x36f9],_0x417264[_0x2310f8])),_0x518de3[_0x2310f8+(-0xf5*-0x19+-0x34b*0x7+0xdf*-0x1)]=_0x45dac0(_0x480328(_0x2f3db1[-0x1096+0x9c6+0x6d1],_0x5a3a18[-0x2289+0x9f6+0x1894],_0x417264[_0x2310f8+(-0x21*-0xe7+0x583+-0x2349)])),_0x518de3[_0x2310f8+(0x558+0x22f3+-0x1*0x2849)]=_0x45dac0(_0x480328(_0x2f3db1[0xadf+0x68*-0x33+0x1d*0x57],_0x5a3a18[-0xbb*0x1+-0xbde+0xc9b],_0x417264[_0x2310f8+(0x1*-0x515+0x2*-0x27b+-0x1*-0xa0d)])),_0x518de3[_0x2310f8+(-0x1*0x2609+0x85b+0x1db1)]=_0x45dac0(_0x417264[_0x2310f8+(-0x20ad+-0x1*-0x9a4+0x32*0x76)]);}_0x31f61f[_0x407cf5]=_0x518de3;}else{if(_0x2c1983==='pack_rotat'+'ion_32'){const _0x4e8814=_0x2847c5(_0x5761e5);_0x31f61f[_0x407cf5]=_0x4e8814;}else{if(_0x2c1983==='range_quan'+'t_u8'){if(_0x407cf5==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x2c1983);}}}}}return{'chunkDecompressed':_0x31f61f,'chunkStartIdx':_0x165284};},_0x32e8d5=(_0x19b972,_0xf0c4d8)=>{const _0x3d610a='feature_re'+'st',_0x1e6d5f=_0xf0c4d8['find'](_0x5133b2=>_0x5133b2['name']===_0x3d610a);let _0x4a288a;const _0x2faf85=_0x1e6d5f['encoding']['codec'],_0x7ed360=_0x19b972[_0x3d610a];if(_0x2faf85==='range_quan'+'t_u8'){const [_0x47b388,_0x56ac3c]=_0x1e6d5f['encoding']['range'];_0x4a288a=_0x29ac08(_0x7ed360,_0x47b388,_0x56ac3c);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x2faf85);return _0x4a288a;},_0x570047=(_0x24df7c,_0x258b9b,_0xc2fba2,_0x2837ad)=>{let _0x1cb596=0x7bf+0x257*0xd+-0x262a*0x1;const _0x45be9a={};for(const _0x492269 of _0xc2fba2){const {dataSize:_0x332060}=_0x4c45dc(_0x492269,_0x258b9b);if(['vec3f','vec4f','vec2f']['includes'](_0x492269['dataType']))_0x45be9a[_0x492269['name']]=new Float32Array(_0x24df7c['buffer']['slice'](_0x1cb596,_0x1cb596+_0x332060));else{if(_0x492269['dataType']['startsWith']('array<floa'+'t'))_0x45be9a[_0x492269['name']]=new Float32Array(_0x24df7c['buffer']['slice'](_0x1cb596,_0x1cb596+_0x332060));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x492269['dataType']);}_0x1cb596+=_0x332060;}const _0x4bfa57=new Uint16Array(_0x45be9a['scale']['length']);for(let _0x402473=0x11a1+0x1c4d+-0x2dee;_0x402473<_0x45be9a['scale']['length'];_0x402473++)_0x4bfa57[_0x402473]=_0x45dac0(Math['exp'](_0x45be9a['scale'][_0x402473]));_0x45be9a['scale']=_0x4bfa57;const _0x380d56=_0x45be9a['rotation']['length']/(0xdb7+-0x201*0x11+0x1da*0xb),_0x3dbfbd=new Float32Array(_0x380d56*(0x2693+-0xb*0x17f+-0x161b));for(let _0xe28cdc=-0x1*-0x19f7+-0xd9f*0x2+-0x6d*-0x3;_0xe28cdc<_0x380d56;_0xe28cdc++){const _0x39a336=_0x8872b5(_0x45be9a['rotation'][_0xe28cdc*(-0x4*-0x24+-0x1bce+0x3*0x916)],_0x45be9a['rotation'][_0xe28cdc*(0x1*-0x4cd+-0x1f69+0x1*0x243a)+(0xa22*0x1+0x1cca+-0x26eb)],_0x45be9a['rotation'][_0xe28cdc*(-0xd8e+0x51c+0x876)+(0x130a*0x2+0xbdd+-0x31ef)],_0x45be9a['rotation'][_0xe28cdc*(-0x3*0x80f+0x1b2d*-0x1+0xa46*0x5)+(-0x22*0xf4+0x135c+-0xd0f*-0x1)]);_0x3dbfbd[_0xe28cdc*(0x5*0xb7+-0x12*0x10b+0xb*0x162)]=_0x39a336['x'],_0x3dbfbd[_0xe28cdc*(0x422+0x1283+-0x16a2)+(-0x10a5*0x2+0x11c+-0x4d*-0x6b)]=_0x39a336['y'],_0x3dbfbd[_0xe28cdc*(-0x1*0xf3+-0x1cbb+-0x1*-0x1db1)+(0x1113+-0x254c+-0x143b*-0x1)]=_0x39a336['z'];}return _0x45be9a['rotation']=_0x3dbfbd,_0x45be9a['color_opac'+'ity']=_0x1ad9b6(_0x45be9a['color_opac'+'ity']),_0x45be9a['time_index']=new Float32Array(_0x258b9b),_0x45be9a['time_index']['fill'](_0x2837ad-(-0x1f0b+0x2034+-0x128)),_0x45be9a;},_0x192a3e=(_0x2f0c5e,_0x15a066)=>{const _0x14934e={};if(_0x2f0c5e['length']===-0x1*0x1e7d+-0x6ec+0x2*0x12b5)return _0x2f0c5e[0x137b*0x1+-0x261b+0x12a0];for(const _0x3d68e9 of Object['keys'](_0x2f0c5e[-0x4f3+0x5ef+-0xfc]))if(_0x2f0c5e[-0x572+-0x1*0x14d9+0x1a4b][_0x3d68e9]instanceof Float32Array||_0x2f0c5e[0x19d1+0x881*-0x3+-0x1a*0x3][_0x3d68e9]instanceof Uint16Array){const _0x336308=_0x2f0c5e['reduce']((_0x45b846,_0x5315e7)=>_0x45b846+_0x5315e7[_0x3d68e9]['length'],0x1b40+0x1507+-0x3047);let _0x3b0a20;_0x2f0c5e[-0x268f+0x1970+0xd1f][_0x3d68e9]instanceof Uint16Array?_0x3b0a20=new Uint16Array(_0x336308):_0x3b0a20=new Float32Array(_0x336308);let _0x328749=0x5*-0x6a3+-0x64f+-0x2*-0x13bf;for(const _0x8691ab of _0x2f0c5e)_0x3b0a20['set'](_0x8691ab[_0x3d68e9],_0x328749),_0x328749+=_0x8691ab[_0x3d68e9]['length'];_0x14934e[_0x3d68e9]=_0x3b0a20;}else Array['isArray'](_0x2f0c5e[-0x1bb1+-0x1*0x38b+0x1f3c][_0x3d68e9])?_0x14934e[_0x3d68e9]=_0x2f0c5e['flatMap'](_0x34a35a=>Array['from'](_0x34a35a[_0x3d68e9])):_0x14934e[_0x3d68e9]=_0x2f0c5e['map'](_0x486178=>_0x486178[_0x3d68e9])['flat']();return _0x14934e;};}class xN extends pe{constructor(_0x15ab60){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x15ab60,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+vN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x3861e3){var _0x4ccfef;return(_0x4ccfef=this['worker'])==null||_0x4ccfef['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x3861e3}),new Promise((_0x51936a,_0x39e970)=>{if(!this['worker']){_0x39e970(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x43e43a=>{if(!this['worker'])return;const {data:_0x30bc6b}=_0x43e43a;if(this['manifestUr'+'l']===_0x30bc6b['url'])switch(_0x30bc6b['type']){case'onloadMani'+'fest':_0x51936a({'manifest':_0x30bc6b['data'],'url':_0x30bc6b['url'],'representation':_0x30bc6b['representa'+'tion']});break;case'error':_0x39e970(_0x30bc6b['data']);break;}};});}['loadGsdSeg'+'ments'](_0x140328,_0x311aae){var _0x257b16;return(_0x257b16=this['worker'])==null||_0x257b16['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x2af9b4,_0x1919fd)=>{if(!this['worker']){_0x1919fd(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x7db0c=>{if(!this['worker'])return;const {data:_0x3ebd81}=_0x7db0c;if(this['manifestUr'+'l']===_0x3ebd81['url'])switch(_0x3ebd81['type']){case'progress':_0x140328==null||_0x140328(_0x3ebd81['bytes'],_0x3ebd81['totalLengt'+'h'],_0x3ebd81['url']);break;case'loadGsdSeg'+'mentsDone':_0x2af9b4(_0x3ebd81['data']);break;case'error':_0x311aae==null||_0x311aae(_0x3ebd81['data'],_0x3ebd81['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x26a65f,_0x52733f,_0x5cc52f){var _0x230c78;return(_0x230c78=this['worker'])==null||_0x230c78['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x26a65f}),new Promise((_0x4aec4f,_0x58e6a1)=>{if(!this['worker']){_0x58e6a1(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x53aaef=>{if(!this['worker'])return;const {data:_0x45800c}=_0x53aaef;if(this['manifestUr'+'l']===_0x45800c['url'])switch(_0x45800c['type']){case'progress':_0x52733f==null||_0x52733f(_0x45800c['bytes'],_0x45800c['totalLengt'+'h'],_0x45800c['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x4aec4f(_0x45800c);break;case'error':_0x5cc52f==null||_0x5cc52f(_0x45800c['data'],_0x45800c['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x1e3d+-0x1*-0xde3+0x105a*0x1));}}const gc=class gc{constructor(_0x487286,_0x222f81,_0x38c2cb){h(this,'lastLoadIn'+'dex',-0x116b+0x1*-0x1187+0x3e2*0x9),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x487286,this['representa'+'tion']=_0x222f81,this['gsdAssetPa'+'rser']=_0x38c2cb,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x487286,_0x222f81));}['getSegment'+'Timeline'](_0x3cd45e,_0x255f9d){let _0xfe91a8=null;for(const _0x51cf50 of _0x3cd45e['adaptation'+'Sets'])if(_0x51cf50['contentTyp'+'e']==='4dgs'){for(const _0x1d41b0 of _0x51cf50['representa'+'tions'])if(_0x1d41b0['id']===_0x255f9d){_0xfe91a8=_0x1d41b0;break;}break;}if(!_0xfe91a8)throw new Error('Representa'+'tion\x20\x27'+_0x255f9d+('\x27\x20not\x20foun'+'d'));return _0xfe91a8['segmentTem'+'plate'][0x21fa*0x1+-0x205*0x3+-0x7*0x3fd]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x9daace){const _0x19a873=this['findSegmen'+'tTimeline'](_0x9daace);if(!_0x19a873)return;const _0x1c55e2=_0x19a873['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(0xe68+-0x1e0+-0xc87)?_0x19a873['timelineIn'+'dex']+(-0x117*0x6+0x7bb*0x3+0x10a6*-0x1):-0x1051+-0x13ab+-0x1*-0x23fc;this['lastLoadIn'+'dex']!==_0x1c55e2&&(this['lastLoadIn'+'dex']=_0x1c55e2,this['loadNextSe'+'gment'](_0x1c55e2));}async['loadNextSe'+'gment'](_0x4bab05){const _0x1c9a0c=[];for(let _0x3deeec=0x89*-0x37+0x3*0x64d+0xa88;_0x3deeec<gc['CACHE_COUN'+'T'];_0x3deeec++)_0x1c9a0c['push']((_0x4bab05+_0x3deeec)%this['segmentTim'+'elines']['length']);const _0x3b50b1=_0x1c9a0c[_0x1c9a0c['length']-(-0x13db+-0x7*-0x1bb+0x7bf)],_0x1538ed=this['segmentTim'+'elines'][_0x3b50b1]['t']+this['segmentTim'+'elines'][_0x3b50b1]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x1c9a0c,_0x1538ed);}['findSegmen'+'tTimeline'](_0x41ede8){let _0x43432c=-0x3*0x33f+-0x20ce+0x2a8b,_0x1573f2=this['segmentTim'+'elines']['length']-(0x1cba+0x2c9*-0x3+0x1*-0x145e);for(;_0x43432c<=_0x1573f2;){const _0x1bd853=_0x43432c+_0x1573f2>>0x10b*0x1d+-0x2177+-0x1*-0x339,{t:_0x53f8c4,d:_0xeb0938}=this['segmentTim'+'elines'][_0x1bd853];if(_0x41ede8<_0x53f8c4)_0x1573f2=_0x1bd853-(0x1a7d*0x1+0x1e64*-0x1+-0x14*-0x32);else{if(_0x41ede8>=_0x53f8c4+_0xeb0938)_0x43432c=_0x1bd853+(0x49*0x7d+-0x10*-0x88+0x8d4*-0x5);else return{'timeline':this['segmentTim'+'elines'][_0x1bd853],'timelineIndex':_0x1bd853};}}return null;}};h(gc,'CACHE_COUN'+'T',-0x567+0x1*-0x353+0x8c0);let cu=gc;class TN{constructor(_0x3f7d9e,_0x313592){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0x1*-0xeb1+0x1f84+0x1*-0x2e34)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x3f7d9e,this['maxRetries']=_0x313592,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=0x1a7*0x12+0x116d+-0x23*0x159,this['manifest']={});}async['load'](_0x432d46,_0x1d7b80,_0x3ec1c5){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x432d46['load']);const _0x27b240=_0x3ec1c5['data']['events'];this['events']=_0x27b240,this['asset']=_0x3ec1c5,this['callback']=_0x1d7b80,this['timeOption']=_0x3ec1c5['data']['timeOption'];let _0x5ab9aa=_0x3ec1c5['data']['representa'+'tion']||'high-raw';this['readWorker']=new xN(_0x432d46['load']);const _0x766dc4=await this['readWorker']['loadGsdMan'+'ifest'](_0x5ab9aa);this['manifest']=_0x766dc4['manifest'],_0x5ab9aa=_0x766dc4['manifest']['representa'+'tion']||_0x5ab9aa,this['schedule']=new cu(this['manifest'],_0x5ab9aa,this),this['totalRecei'+'vedCount']=0x134a+0x2217+0x1*-0x3561;const _0x39e977=this['getSegment'+'Timeline'](this['manifest'],_0x5ab9aa),_0x4e18ff=_0x39e977[-0x11*-0x2d+-0x1b62+0x1865]['t']+_0x39e977[-0x5d5*-0x3+-0xa3b+0x744*-0x1]['d'];this['appendload'+'DataTask']([-0x17d2+-0x985+0x2157,0x2f0*-0xd+0x893*0x2+0x1*0x150b],_0x4e18ff),_0x27b240['on']('timeChange'+'d',_0x42d350=>{var _0xcb8386;(_0xcb8386=this['schedule'])==null||_0xcb8386['onTimeChan'+'ged'](_0x42d350);});}['getSegment'+'Timeline'](_0x5c3ecc,_0x2d8212){let _0x57dd74=null;for(const _0x12eaf2 of _0x5c3ecc['adaptation'+'Sets'])if(_0x12eaf2['contentTyp'+'e']==='4dgs'){for(const _0x3c7f9d of _0x12eaf2['representa'+'tions'])if(_0x3c7f9d['id']===_0x2d8212){_0x57dd74=_0x3c7f9d;break;}break;}if(!_0x57dd74)throw new Error('Representa'+'tion\x20\x27'+_0x2d8212+('\x27\x20not\x20foun'+'d'));return _0x57dd74['segmentTem'+'plate'][-0xb8f+0x2470+0x84b*-0x3]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x4c5b44,_0x2fe71f){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x4c5b44,'loadedTime':_0x2fe71f}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(0x6e0*0x4+-0xafe+-0x1082);try{for(;this['loadDataTa'+'skQueue']['length']>-0x25d2+-0x294+0x1433*0x2;){const _0x274e66=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x274e66);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x767*0x4+0x21ea+-0x44d);}}}async['loadGsplat'+'Data'](_0x2325f1){var _0x5e8337,_0x2ef3c0;const {segmentIndexs:_0x36a73a,loadedTime:_0x5ce672}=_0x2325f1,_0x38603c=this['events'],_0x425fa7=this['asset'],_0x4abf00=this['callback'],_0x2c5875=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x36a73a,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x20eb+-0x2379+0x4466));try{const _0x170da6=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x36a73a,(_0x47dfa9,_0x2c619a)=>{this['totalRecei'+'ved']+=_0x47dfa9,_0x425fa7&&_0x38603c['fire']('progress',this['totalRecei'+'ved'],_0x2c619a);},(_0x14102a,_0x218a22)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x218a22,_0x14102a);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x373+-0x1*0x1535+-0x11c4*-0x1),_0x170da6['data']['elements'][0x1428+-0x2*-0x70f+-0x2246]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x170da6['data']['elements'][0x1c91+-0x1b22+0x16f*-0x1]['count']*(-0x1*0x30b9+0x1378+0x4451*0x1))['toFixed'](-0x97*0x25+-0x1eb8+-0xb*-0x4c7));const _0x11b8d4=_0x170da6['data'];if(_0x11b8d4['elements'][0x85*-0x1f+-0x1f1*0x9+0x2194]['count']===-0x1*0x16b7+-0x1730+0x1*0x2de7)return;this['totalRecei'+'vedCount']+=_0x11b8d4['elements'][0x2*-0x1345+-0x31*-0x95+0xa05]['count'];const _0x5132b7=new mb(_0x11b8d4['elements'],_0x11b8d4['comments']);_0x425fa7['fire']('load:data',_0x5132b7);const _0x536952=_0x425fa7['data']['createTime']!==((_0x2ef3c0=(_0x5e8337=this['onlyOneAss'+'et'])==null?void(-0x26b4+0xfe*0x17+0xfe2):_0x5e8337['data'])==null?void(-0x1*-0x1e74+0x7da+-0x264e):_0x2ef3c0['createTime']);this['gsplatReso'+'urce']&&!_0x536952?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x5132b7,_0x2c5875,_0x5ce672,_0x425fa7)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new Ub(this['app']['graphicsDe'+'vice'],_0x5132b7),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x2c5875,this['onlyOneAss'+'et']=_0x425fa7,_0x4abf00&&_0x4abf00(null,this['gsplatReso'+'urce']),_0x38603c['fire']('loadAllAss'+'etsDone'));}catch(_0x48e26b){console['error']('loadGsplat'+'Data','error',_0x48e26b),_0x4abf00&&_0x4abf00(_0x48e26b,null);}}['open'](_0x5f41ef,_0x4b2536){return _0x4b2536;}}class wN extends Ze{constructor(_0xe1d264){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0xe1d264,'gsplat'),this['parsers']={'ply':new yN(_0xe1d264,0x3*0x881+0xd60+-0x1*0x26e0),'json':new TN(_0xe1d264,0x1afc*0x1+-0x1e96+0xb9*0x5)};}['_getUrlWit'+'houtParams'](_0x5bb984){return _0x5bb984['indexOf']('?')>=-0x255b*0x1+0x5*0x74b+0x39*0x4?_0x5bb984['split']('?')[-0x112*0x11+0x23fd+0x5*-0x38f]:_0x5bb984;}['_getParser'](_0x544dda){const _0x424763=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x544dda))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x424763]||this['parsers']['ply'];}['load'](_0x3c101b,_0x50b313,_0x20c752){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x3c101b=='string'&&(_0x3c101b={'load':_0x3c101b,'original':_0x3c101b}),this['_getParser'](_0x3c101b['original'])['load'](_0x3c101b,_0x50b313,_0x20c752);}['open'](_0x23bf6a,_0xab80ad,_0x22e225){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0xab80ad;}}class du{static['setCompres'+'sedPRS'](_0xa6bcaf,_0x11d94c,_0x10ce2b){const _0xb475ec=_0x10ce2b['singleVecs'];let _0x2864c7,_0xc6aa7d;const _0x35f687=_0x11d94c['___1'];_0x35f687||(_0x2864c7=_0x10ce2b['tripleVecs'],_0xc6aa7d=_0x11d94c['___2']);let _0xa15b7d=_0x35f687?_0x35f687[0x9fc+-0x56*-0x6b+-0x2dee]:_0x2864c7[_0xc6aa7d];_0xa6bcaf['setLocalPo'+'sition'](_0xb475ec[_0xa15b7d],_0xb475ec[_0xa15b7d+(-0x18fb+-0x44e+0x2e*0xa3)],_0xb475ec[_0xa15b7d+(-0xb5e+-0xc3b+0x179b)]),_0xa15b7d=_0x35f687?_0x35f687[0x2b6*-0xa+-0x1d7e+0x389b]:_0x2864c7[_0xc6aa7d+(-0x1b60+-0x186*-0x3+0x16cf)],_0xa6bcaf['setLocalEu'+'lerAngles'](_0xb475ec[_0xa15b7d],_0xb475ec[_0xa15b7d+(0x7b8+-0x4e*0x7+-0x1*0x595)],_0xb475ec[_0xa15b7d+(-0x2*-0xd57+-0x165d+-0x44f)]),_0xa15b7d=_0x35f687?_0x35f687[-0x1b*-0x18+-0x12cd+-0x56d*-0x3]:_0x2864c7[_0xc6aa7d+(0x2a6*0xc+-0x1*-0x381+0x2347*-0x1)],_0xa6bcaf['setLocalSc'+'ale'](_0xb475ec[_0xa15b7d],_0xb475ec[_0xa15b7d+(-0x1*0xcf3+0x663+-0x1*-0x691)],_0xb475ec[_0xa15b7d+(-0x1*-0x532+0x196a+-0xf4d*0x2)]);}static['oneCharToK'+'ey'](_0x100f27,_0x3a6ba0){const _0x36297b=_0x100f27['charCodeAt'](0x19e7*-0x1+-0x27*-0xa9+0x28)-_0x3a6ba0['fieldFirst'+'Code'];return _0x3a6ba0['fieldArray'][_0x36297b];}static['multCharTo'+'Key'](_0x2ba60a,_0x9b4911){let _0x87bc32=0x122b*0x1+-0x21a7+0x3df*0x4;for(let _0x5238e5=0x1688+0xcd1+-0x2359*0x1;_0x5238e5<_0x2ba60a['length'];_0x5238e5++)_0x87bc32=_0x87bc32*_0x9b4911['fieldCodeB'+'ase']+_0x2ba60a['charCodeAt'](_0x5238e5)-_0x9b4911['fieldFirst'+'Code'];return _0x9b4911['fieldArray'][_0x87bc32];}}class hc{constructor(_0x1209c0,_0x1a065a){this['_node']=_0x1209c0,this['_data']=_0x1a065a;}['run'](){const _0x303651=Object['prototype']['toString']['call'](this['_node']);return _0x303651==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x303651==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0xcd3e1b){let _0x4b83c9=_0xcd3e1b;const _0xc81db0=_0xcd3e1b['length'];_0xc81db0===0x1b79*0x1+0x19bc+-0x1e*0x1c6?_0x4b83c9=du['oneCharToK'+'ey'](_0xcd3e1b,this['_data']):_0xc81db0===0x1861+-0x883+0xcb*-0x14&&(_0x4b83c9=du['multCharTo'+'Key'](_0xcd3e1b,this['_data'])),this['_result'][_0x4b83c9]=new hc(this['_node'][_0xcd3e1b],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x27e1b8){const _0x279f8d=new hc(_0x27e1b8,this['_data'])['run']();this['_result']['push'](_0x279f8d);}}class Vm{constructor(_0x4239c4,_0x3490d9){this['_app']=_0x4239c4,this['_isTemplat'+'e']=_0x3490d9;}['parse'](_0x474553){const _0x749e37={};let _0x8d4cf6=null;const _0x495a2d=_0x474553['compressed'+'Format'];_0x495a2d&&!_0x474553['entDecompr'+'essed']&&(_0x474553['entDecompr'+'essed']=!(-0x68a+0x128e+0x1*-0xc04),_0x474553['entities']=new hc(_0x474553['entities'],_0x495a2d)['run']());for(const _0x19f2ad in _0x474553['entities']){const _0xdc0992=_0x474553['entities'][_0x19f2ad],_0x14a5dc=this['_createEnt'+'ity'](_0xdc0992,_0x495a2d);_0x749e37[_0x19f2ad]=_0x14a5dc,_0xdc0992['parent']===null&&(_0x8d4cf6=_0x14a5dc);}for(const _0x3ff73b in _0x474553['entities']){const _0x194e4a=_0x749e37[_0x3ff73b],_0x43a692=_0x474553['entities'][_0x3ff73b]['children'],_0x580dee=_0x43a692['length'];for(let _0x2c1eb5=-0x227e+0x19cd+0x8b1;_0x2c1eb5<_0x580dee;_0x2c1eb5++){const _0x4383b4=_0x749e37[_0x43a692[_0x2c1eb5]];_0x4383b4&&_0x194e4a['addChild'](_0x4383b4);}}return this['_openCompo'+'nentData'](_0x8d4cf6,_0x474553['entities']),_0x8d4cf6;}['_createEnt'+'ity'](_0x570464,_0x5864af){const _0x2576fa=new ot(_0x570464['name'],this['_app']);if(_0x2576fa['setGuid'](_0x570464['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x2576fa,_0x570464,_0x5864af),_0x2576fa['_enabled']=_0x570464['enabled']??!(-0x1031*0x1+0x2c3*-0xd+0x683*0x8),this['_isTemplat'+'e']?_0x2576fa['_template']=!(-0x15bd+0x533+0x108a):_0x2576fa['_enabledIn'+'Hierarchy']=_0x2576fa['_enabled'],_0x2576fa['template']=_0x570464['template'],_0x570464['tags']){for(let _0x11d3c9=-0x1366+-0x17d6+0x1*0x2b3c;_0x11d3c9<_0x570464['tags']['length'];_0x11d3c9++)_0x2576fa['tags']['add'](_0x570464['tags'][_0x11d3c9]);}return _0x2576fa;}['_setPosRot'+'Scale'](_0x52e8d2,_0x30630f,_0x114027){if(_0x114027)du['setCompres'+'sedPRS'](_0x52e8d2,_0x30630f,_0x114027);else{const _0xa55ab1=_0x30630f['position'],_0x424918=_0x30630f['rotation'],_0x56c7aa=_0x30630f['scale'];_0x52e8d2['setLocalPo'+'sition'](_0xa55ab1[-0x2618+0x5*-0x12e+0x2bfe],_0xa55ab1[-0x13b+-0x34+0x170],_0xa55ab1[0x1fb5*-0x1+-0x3*-0xb56+0x1*-0x24b]),_0x52e8d2['setLocalEu'+'lerAngles'](_0x424918[0xb88+-0x1*-0x1af2+-0x267a],_0x424918[-0x7dd+-0x1ca9+0xc2d*0x3],_0x424918[0xb80+0xb68+-0x16e6]),_0x52e8d2['setLocalSc'+'ale'](_0x56c7aa[0x1fe8+0x2*0x67e+-0x2ce4],_0x56c7aa[0x227*0x10+-0x5e4+-0x1c8b],_0x56c7aa[0x120b+-0xdf*0x1d+0x172*0x5]);}}['_openCompo'+'nentData'](_0x39f774,_0x19d194){const _0x58ca45=this['_app']['systems']['list'];let _0x449b02=_0x58ca45['length'];const _0x5958ad=_0x19d194[_0x39f774['getGuid']()];for(let _0x5af5f6=0x1052+0x107+-0x1159*0x1;_0x5af5f6<_0x449b02;_0x5af5f6++){const _0x1ebc4c=_0x58ca45[_0x5af5f6],_0x5d0dcb=_0x5958ad['components'][_0x1ebc4c['id']];_0x5d0dcb&&_0x1ebc4c['addCompone'+'nt'](_0x39f774,_0x5d0dcb);}_0x449b02=_0x5958ad['children']['length'];const _0x52fc2f=_0x39f774['_children'];for(let _0x59dd1d=0x5*0x6d7+0x6*-0x2b3+0x1*-0x1201;_0x59dd1d<_0x449b02;_0x59dd1d++)_0x52fc2f[_0x59dd1d]?_0x52fc2f[_0x59dd1d]=this['_openCompo'+'nentData'](_0x52fc2f[_0x59dd1d],_0x19d194):M['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x39f774['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x39f774;}}class Fv{static['load'](_0x154e28,_0x5f05e6,_0x510797){typeof _0x154e28=='string'&&(_0x154e28={'load':_0x154e28,'original':_0x154e28}),nt['get'](_0x154e28['load'],{'retry':_0x5f05e6>-0x23be+0x740+-0x1c7e*-0x1,'maxRetries':_0x5f05e6},(_0x368ae1,_0x253301)=>{if(!_0x368ae1)_0x510797(_0x368ae1,_0x253301);else{let _0xccee7c='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x154e28['original'];_0x368ae1['message']?(_0xccee7c+=':\x20'+_0x368ae1['message'],_0x368ae1['stack']&&(_0xccee7c+='\x0a'+_0x368ae1['stack'])):_0xccee7c+=':\x20'+_0x368ae1,_0x510797(_0xccee7c);}});}}class EN extends Ze{constructor(_0x392624){super(_0x392624,'hierarchy');}['load'](_0x2af7ca,_0x365643){Fv['load'](_0x2af7ca,this['maxRetries'],_0x365643);}['open'](_0x33fb7c,_0x24d278){this['_app']['systems']['script']['preloading']=!(-0x1de8*-0x1+-0x175*0x19+0x685);const _0x26c4b2=new Vm(this['_app'],!(0x264e+0x3*-0x43+-0x2584))['parse'](_0x24d278);return this['_app']['systems']['script']['preloading']=!(0x163a+0x17cf+-0x2e08),_0x26c4b2;}}class AN extends Ze{constructor(_0x2a17f3){super(_0x2a17f3,'html'),h(this,'decoder',null);}['load'](_0x16ed41,_0x5bba31){typeof _0x16ed41=='string'&&(_0x16ed41={'load':_0x16ed41,'original':_0x16ed41}),nt['get'](_0x16ed41['load'],{'retry':this['maxRetries']>0x19e+0x3*-0x2e2+0x708,'maxRetries':this['maxRetries']},(_0x40c8ff,_0x438394)=>{_0x40c8ff?_0x5bba31('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x16ed41['original']+'\x20['+_0x40c8ff+']'):_0x5bba31(null,_0x438394);});}['openBinary'](_0x4a49bd){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x4a49bd);}}class bN extends Ze{constructor(_0x2ae89c){super(_0x2ae89c,'json'),h(this,'decoder',null);}['load'](_0x1dd5f3,_0x30d5f5){typeof _0x1dd5f3=='string'&&(_0x1dd5f3={'load':_0x1dd5f3,'original':_0x1dd5f3});const _0x560eca={'retry':this['maxRetries']>-0x1b4f+0x2d1*0x3+-0x11*-0x11c,'maxRetries':this['maxRetries']};_0x1dd5f3['load']['startsWith']('blob:')&&(_0x560eca['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x1dd5f3['load'],_0x560eca,(_0x1a09a7,_0x20a969)=>{_0x1a09a7?_0x30d5f5('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x1dd5f3['original']+'\x20['+_0x1a09a7+']'):_0x30d5f5(null,_0x20a969);});}['openBinary'](_0x3c1240){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x3c1240));}}class CN{constructor(){this['removeInva'+'lid']=!(0x478+0x7*-0x23e+0x59d*0x2),this['valid']=!(-0x13a4+-0x2067+0x340b),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([py,Kc,_y]),'cull':this['_createEnu'+'mValidator']([xt,Jr,mo,N0]),'blendType':this['_createEnu'+'mValidator']([lm,hm,Gs,ys,bn,cm,Yc,dm,fm,um,mm]),'depthFunc':this['_createEnu'+'mValidator']([k0,Dh,Lh,df,U0,B0,z0,Ni])};}['setInvalid'](_0x29ca72,_0x3bf526){this['valid']=!(0x17d+0x1*-0xeab+0xd2f),M['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x29ca72,_0x3bf526[_0x29ca72]),this['removeInva'+'lid']&&delete _0x3bf526[_0x29ca72];}['validate'](_0x54294b){const _0x5b7819=Mn,_0x117a78=PE,_0x1bb808=_0x54294b['mappingFor'+'mat']==='path';for(const _0x371168 in _0x54294b){const _0x3ccb48=_0x5b7819[_0x371168];if(!_0x3ccb48){_0x117a78[_0x371168]?delete _0x54294b[_0x371168]:(M['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x371168),this['valid']=!(-0x1689+-0x1865+0x2eef));continue;}if(_0x3ccb48['startsWith']('enum')){const _0x1c5ae4=_0x3ccb48['split'](':')[-0x25f+0xd30+-0xad0];this['enumValida'+'tors'][_0x1c5ae4]&&(this['enumValida'+'tors'][_0x1c5ae4](_0x54294b[_0x371168])||this['setInvalid'](_0x371168,_0x54294b));}else{if(_0x3ccb48==='number')typeof _0x54294b[_0x371168]!='number'&&this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='boolean')typeof _0x54294b[_0x371168]!='boolean'&&this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='string')typeof _0x54294b[_0x371168]!='string'&&this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='vec2')_0x54294b[_0x371168]instanceof Array&&_0x54294b[_0x371168]['length']===0x2258+0x22e8*0x1+0x229f*-0x2||this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='rgb')_0x54294b[_0x371168]instanceof Array&&_0x54294b[_0x371168]['length']===0xa*-0x1e9+-0x12a9+-0x5*-0x78e||this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='texture')_0x1bb808?typeof _0x54294b[_0x371168]=='string'||_0x54294b[_0x371168]===null||_0x54294b[_0x371168]instanceof _e||this['setInvalid'](_0x371168,_0x54294b):typeof _0x54294b[_0x371168]=='number'||_0x54294b[_0x371168]===null||_0x54294b[_0x371168]instanceof _e||this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='boundingbo'+'x')_0x54294b[_0x371168]['center']&&_0x54294b[_0x371168]['center']instanceof Array&&_0x54294b[_0x371168]['center']['length']===-0x25f9*0x1+0x2*0x3fd+0x1e02||this['setInvalid'](_0x371168,_0x54294b),_0x54294b[_0x371168]['halfExtent'+'s']&&_0x54294b[_0x371168]['halfExtent'+'s']instanceof Array&&_0x54294b[_0x371168]['halfExtent'+'s']['length']===0x5*0x659+-0x1f14+-0xa6||this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='cubemap')typeof _0x54294b[_0x371168]=='number'||_0x54294b[_0x371168]===null||_0x54294b[_0x371168]===void(-0x58d*-0x7+-0x1ac7+0xc14*-0x1)||_0x54294b[_0x371168]instanceof _e&&_0x54294b[_0x371168]['cubemap']||this['setInvalid'](_0x371168,_0x54294b);else{if(_0x3ccb48==='chunks'){const _0x2ae229=Object['keys'](_0x54294b[_0x371168]);for(let _0x166698=-0x100b+-0x1032+0x203d;_0x166698<_0x2ae229['length'];_0x166698++)typeof _0x54294b[_0x371168][_0x2ae229[_0x166698]]!='string'&&this['setInvalid'](_0x2ae229[_0x166698],_0x54294b[_0x371168]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x3ccb48);}}}}}}}}}}return _0x54294b['validated']=!(-0x8bd+-0xa1*0x23+0x30*0xa4),this['valid'];}['_createEnu'+'mValidator'](_0xe516ab){return function(_0x5d022d){return _0xe516ab['indexOf'](_0x5d022d)>=0x15d7+-0x67*-0x3a+-0x3*0xf0f;};}}class PN{constructor(){this['_validator']=null;}['parse'](_0x33ce71){const _0x45839f=this['migrate'](_0x33ce71),_0x32f3d2=this['_validate'](_0x45839f),_0x3b91cd=new ws();return this['initialize'](_0x3b91cd,_0x32f3d2),_0x3b91cd;}['initialize'](_0x211ace,_0x3afd1b){if(_0x3afd1b['validated']||(_0x3afd1b=this['_validate'](_0x3afd1b)),_0x3afd1b['chunks']&&_0x3afd1b['chunks']&&Object['keys'](_0x3afd1b['chunks'])['length']>0x218c+0x5*0x57a+-0x3cee){const _0x51f056=_0x211ace['shaderChun'+'ks']['glsl'];Object['entries'](_0x3afd1b['chunks'])['forEach'](([_0x17f5b1,_0xc82f53])=>_0x51f056['set'](_0x17f5b1,_0xc82f53));}for(const _0x36a984 in _0x3afd1b){const _0xa3ceef=Mn[_0x36a984],_0x2d8800=_0x3afd1b[_0x36a984];if(_0xa3ceef==='vec2')_0x211ace[_0x36a984]=new J(_0x2d8800[0x21*0x71+0x765+-0x3*0x752],_0x2d8800[0xc4*0x1d+0x1159+-0x9e3*0x4]);else{if(_0xa3ceef==='rgb')_0x211ace[_0x36a984]=new ie(_0x2d8800[0x20a3+0x61*0x31+-0x3334],_0x2d8800[0x5ae*0x2+0x12c5+-0x1e20],_0x2d8800[0x328+-0x3d9+0xb3]);else{if(_0xa3ceef==='texture')_0x2d8800 instanceof _e?_0x211ace[_0x36a984]=_0x2d8800:_0x211ace[_0x36a984]instanceof _e&&typeof _0x2d8800=='number'&&_0x2d8800>0x1019+-0xc1f+0x1fd*-0x2||(_0x211ace[_0x36a984]=null);else{if(_0xa3ceef==='cubemap')_0x2d8800 instanceof _e?_0x211ace[_0x36a984]=_0x2d8800:_0x211ace[_0x36a984]instanceof _e&&typeof _0x2d8800=='number'&&_0x2d8800>0xd6c*0x1+-0x1*-0xdff+-0x1b6b||(_0x211ace[_0x36a984]=null),_0x36a984==='cubeMap'&&!_0x2d8800&&(_0x211ace['prefiltere'+'dCubemaps']=null);else{if(_0xa3ceef==='boundingbo'+'x'){const _0x31e696=new I(_0x2d8800['center'][0x1ac8+-0x22d5+0x80d],_0x2d8800['center'][0x1e2*-0x1+-0x1f5+0x3d8],_0x2d8800['center'][-0xab1+-0x24d2+-0x1*-0x2f85]),_0x1da9f3=new I(_0x2d8800['halfExtent'+'s'][0x14*-0x57+0xa93*0x3+-0x18ed],_0x2d8800['halfExtent'+'s'][-0x4a2*0x1+-0x25af+0x2a52*0x1],_0x2d8800['halfExtent'+'s'][-0x1a5*0x9+-0x52*0x35+0x67*0x4f]);_0x211ace[_0x36a984]=new Ie(_0x31e696,_0x1da9f3);}else _0x211ace[_0x36a984]=_0x3afd1b[_0x36a984];}}}}}_0x211ace['update']();}['migrate'](_0x42f067){_0x42f067['shader']&&delete _0x42f067['shader'],_0x42f067['mapping_fo'+'rmat']&&(_0x42f067['mappingFor'+'mat']=_0x42f067['mapping_fo'+'rmat'],delete _0x42f067['mapping_fo'+'rmat']);let _0x20f90d;const _0x2018f7=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x20f90d=0x1cda+-0x156*-0x1a+0x1fcb*-0x2;_0x20f90d<_0x2018f7['length'];_0x20f90d++){const _0x3d3ab2=_0x2018f7[_0x20f90d][0x3a*0x7+-0x1c46+0x10*0x1ab],_0x13772d=_0x2018f7[_0x20f90d][-0x300*-0xd+-0x531+-0x21ce];_0x42f067[_0x3d3ab2]!==void(0x3*0x147+0x732+0x1*-0xb07)&&(_0x42f067[_0x13772d]===void(0x309*0x1+0x3e*0x39+-0x10d7)&&(_0x42f067[_0x13772d]=_0x42f067[_0x3d3ab2]),delete _0x42f067[_0x3d3ab2]);}const _0x3b54bb=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x20f90d=0x166d+-0x1a27+-0x6a*-0x9;_0x20f90d<_0x3b54bb['length'];_0x20f90d++){const _0x45730d=_0x3b54bb[_0x20f90d];_0x42f067['hasOwnProp'+'erty'](_0x45730d)&&delete _0x42f067[_0x45730d];}return _0x42f067;}['_validate'](_0x55efb6){return _0x55efb6['validated']||(this['_validator']||(this['_validator']=new CN()),this['_validator']['validate'](_0x55efb6)),_0x55efb6;}}const MN={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class IN extends Ze{constructor(_0x45d8e1){super(_0x45d8e1,'material'),this['_assets']=_0x45d8e1['assets'],this['_device']=_0x45d8e1['graphicsDe'+'vice'],this['_parser']=new PN();}['load'](_0x12942b,_0x23a615){typeof _0x12942b=='string'&&(_0x12942b={'load':_0x12942b,'original':_0x12942b}),nt['get'](_0x12942b['load'],{'retry':this['maxRetries']>-0x803+0x1*-0x8f2+0x10f5,'maxRetries':this['maxRetries']},(_0xb17a85,_0x35229b)=>{_0xb17a85?_0x23a615&&_0x23a615('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x12942b['original']+'\x20['+_0xb17a85+']'):_0x23a615&&(_0x35229b['_engine']=!(-0xd2a+0x1f71+0x1*-0x1247),_0x23a615(null,_0x35229b));});}['open'](_0x1123ea,_0x4f08fe){const _0xea3433=this['_parser']['parse'](_0x4f08fe);return _0x4f08fe['_engine']&&(_0xea3433['_data']=_0x4f08fe,delete _0x4f08fe['_engine']),_0xea3433;}['patch'](_0x3b8717,_0x388c7d){_0x3b8717['resource']['_data']&&(_0x3b8717['_data']=_0x3b8717['resource']['_data'],delete _0x3b8717['resource']['_data']),_0x3b8717['data']['name']=_0x3b8717['name'],_0x3b8717['resource']['name']=_0x3b8717['name'],this['_bindAndAs'+'signAssets'](_0x3b8717,_0x388c7d),_0x3b8717['off']('unload',this['_onAssetUn'+'load'],this),_0x3b8717['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x5cba10){delete _0x5cba10['data']['parameters'],delete _0x5cba10['data']['chunks'],delete _0x5cba10['data']['name'];}['_assignTex'+'ture'](_0x4a8eb9,_0x36cae9,_0x2b60c9){_0x36cae9['resource'][_0x4a8eb9]=_0x2b60c9;}['_getPlaceh'+'olderTextu'+'re'](_0x59afc2){const _0x1256f5=MN[_0x59afc2];return M['assert'](_0x1256f5,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x59afc2),Kr(this['_device'],_0x1256f5);}['_assignPla'+'ceholderTe'+'xture'](_0x533001,_0x45524d){_0x45524d['resource'][_0x533001]=this['_getPlaceh'+'olderTextu'+'re'](_0x533001);}['_onTexture'+'Load'](_0x367743,_0x3ead65,_0x22d351){this['_assignTex'+'ture'](_0x367743,_0x3ead65,_0x22d351['resource']),_0x3ead65['resource']['update']();}['_onTexture'+'Add'](_0x486b92,_0xe23580,_0x33d472){this['_assets']['load'](_0x33d472);}['_onTexture'+'RemoveOrUn'+'load'](_0x4858e6,_0x5300e2,_0x321281){const _0x26bb04=_0x5300e2['resource'];_0x26bb04&&_0x5300e2['resource'][_0x4858e6]===_0x321281['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x4858e6,_0x5300e2),_0x26bb04['update']());}['_assignCub'+'emap'](_0x10ecf1,_0x2c81ce,_0x4121e4){if(_0x2c81ce['resource'][_0x10ecf1]=_0x4121e4[-0x1582+0xb63+0xa1f],_0x10ecf1==='cubeMap'){const _0x4a9320=_0x4121e4['slice'](-0x1*0x1355+0xf26+-0x1*-0x430);_0x4a9320['every'](_0x5a01b0=>_0x5a01b0)?_0x2c81ce['resource']['prefiltere'+'dCubemaps']=_0x4a9320:_0x4a9320[-0x7*0x505+-0x16e8+0x3a0b]&&(_0x2c81ce['resource']['envAtlas']=_0x4a9320[0x1f79+-0x6df+-0x189a*0x1]);}}['_onCubemap'+'Load'](_0x5569c2,_0x4c32de,_0x3a4ae8){this['_assignCub'+'emap'](_0x5569c2,_0x4c32de,_0x3a4ae8['resources']),this['_parser']['initialize'](_0x4c32de['resource'],_0x4c32de['data']);}['_onCubemap'+'Add'](_0x31b4c8,_0x544dba,_0x4cef31){this['_assets']['load'](_0x4cef31);}['_onCubemap'+'RemoveOrUn'+'load'](_0x3211ee,_0x366d7f,_0x53147e){const _0x3e1e1c=_0x366d7f['resource'];_0x366d7f['data']['prefiltere'+'dCubeMap12'+'8']===_0x53147e['resources'][0x10*-0x123+-0x440+-0x47d*-0x5]&&(this['_assignCub'+'emap'](_0x3211ee,_0x366d7f,[null,null,null,null,null,null,null]),_0x3e1e1c['update']());}['_bindAndAs'+'signAssets'](_0x474bc5,_0x259a4f){const _0x1cd8cb=this['_parser']['migrate'](_0x474bc5['data']),_0x27bedf=_0x474bc5['resource'],_0x49e522=_0x1cd8cb['mappingFor'+'mat']==='path',_0xc218c6=Qc;let _0x524cce,_0x3e0b0e,_0x5ba3fb;for(_0x524cce=-0x11*0xb1+0x1e*-0xdf+0x35*0xb7;_0x524cce<_0xc218c6['length'];_0x524cce++){_0x3e0b0e=_0xc218c6[_0x524cce],_0x5ba3fb=_0x27bedf['_assetRefe'+'rences'][_0x3e0b0e];const _0x2df38b=_0x1cd8cb[_0x3e0b0e],_0x2ac939=_0x27bedf[_0x3e0b0e],_0x438c4b=_0x2ac939===this['_getPlaceh'+'olderTextu'+'re'](_0x3e0b0e),_0x4b556e=_0x1cd8cb['validated'];_0x2df38b&&(!_0x2ac939||!_0x4b556e||_0x438c4b)?(_0x5ba3fb||(_0x5ba3fb=new Xo(_0x3e0b0e,_0x474bc5,_0x259a4f,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x27bedf['_assetRefe'+'rences'][_0x3e0b0e]=_0x5ba3fb),_0x49e522?_0x5ba3fb['url']=_0x474bc5['getAbsolut'+'eUrl'](_0x2df38b):_0x5ba3fb['id']=_0x2df38b,_0x5ba3fb['asset']&&(_0x5ba3fb['asset']['resource']?this['_assignTex'+'ture'](_0x3e0b0e,_0x474bc5,_0x5ba3fb['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x3e0b0e,_0x474bc5),_0x259a4f['load'](_0x5ba3fb['asset']))):_0x5ba3fb&&(_0x49e522?_0x5ba3fb['url']=null:_0x5ba3fb['id']=null);}const _0x45e15e=Lm;for(_0x524cce=0x2189*0x1+-0x12e2+-0xea7;_0x524cce<_0x45e15e['length'];_0x524cce++)_0x3e0b0e=_0x45e15e[_0x524cce],_0x5ba3fb=_0x27bedf['_assetRefe'+'rences'][_0x3e0b0e],_0x1cd8cb[_0x3e0b0e]&&!_0x474bc5['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x5ba3fb||(_0x5ba3fb=new Xo(_0x3e0b0e,_0x474bc5,_0x259a4f,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x27bedf['_assetRefe'+'rences'][_0x3e0b0e]=_0x5ba3fb),_0x49e522?_0x5ba3fb['url']=_0x1cd8cb[_0x3e0b0e]:_0x5ba3fb['id']=_0x1cd8cb[_0x3e0b0e],_0x5ba3fb['asset']&&(_0x5ba3fb['asset']['loaded']&&this['_assignCub'+'emap'](_0x3e0b0e,_0x474bc5,_0x5ba3fb['asset']['resources']),_0x259a4f['load'](_0x5ba3fb['asset'])));this['_parser']['initialize'](_0x27bedf,_0x1cd8cb);}}class DN{constructor(_0x37eede){this['_device']=_0x37eede['device'],this['_defaultMa'+'terial']=_0x37eede['defaultMat'+'erial'],this['_assets']=_0x37eede['assets'];}['parse'](_0x5d89e9,_0x587a70,_0x186cb6){lc['parse']('filename.g'+'lb','',_0x5d89e9,this['_device'],this['_assets'],(_0x186cb6==null?void(0x1c97*-0x1+0x222e+-0x597):_0x186cb6['options'])??{},(_0xfe0ea9,_0x1bedd0)=>{if(_0xfe0ea9)_0x587a70(_0xfe0ea9);else{const _0x5aaae1=ar['createMode'+'l'](_0x1bedd0,this['_defaultMa'+'terial']);_0x1bedd0['destroy'](),_0x587a70(null,_0x5aaae1);}});}}const LN={'points':Oc,'lines':Fc,'lineloop':wS,'linestrip':ES,'triangles':zs,'trianglestrip':cr,'trianglefan':$r},RN={'int8':Nc,'uint8':Xr,'int16':kc,'uint16':rl,'int32':MS,'uint32':Do,'float32':Be};class ON{constructor(_0x591bb5){this['_device']=_0x591bb5['device'],this['_defaultMa'+'terial']=_0x591bb5['defaultMat'+'erial'];}['parse'](_0x561f7a,_0x5187e6){const _0x5beeb3=_0x561f7a['model'];if(!_0x5beeb3){_0x5187e6(null,null);return;}if(_0x5beeb3['version']<=0x1f*-0x12e+-0x1*-0x134b+0x1148){_0x5187e6('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x4b4791=this['_parseNode'+'s'](_0x561f7a),_0x5227e0=this['_parseSkin'+'s'](_0x561f7a,_0x4b4791),_0x45b4af=this['_parseVert'+'exBuffers'](_0x561f7a),_0x223697=this['_parseInde'+'xBuffers'](_0x561f7a,_0x45b4af),_0x396d79=this['_parseMorp'+'hs'](_0x561f7a,_0x4b4791,_0x45b4af),_0x2610e8=this['_parseMesh'+'es'](_0x561f7a,_0x5227e0['skins'],_0x396d79['morphs'],_0x45b4af,_0x223697['buffer'],_0x223697['data']),_0x22f3fc=this['_parseMesh'+'Instances'](_0x561f7a,_0x4b4791,_0x2610e8,_0x5227e0['skins'],_0x5227e0['instances'],_0x396d79['morphs'],_0x396d79['instances']),_0x17050a=new $i();_0x17050a['graph']=_0x4b4791[0xa7d+0x116f*0x2+-0x2d5b],_0x17050a['meshInstan'+'ces']=_0x22f3fc,_0x17050a['skinInstan'+'ces']=_0x5227e0['instances'],_0x17050a['morphInsta'+'nces']=_0x396d79['instances'],_0x17050a['getGraph']()['syncHierar'+'chy'](),_0x5187e6(null,_0x17050a);}['_parseNode'+'s'](_0x5eca80){const _0x449e50=_0x5eca80['model'],_0x537e0c=[];let _0xb53a90;for(_0xb53a90=0x13*0x42+0x226*-0xd+0x1708;_0xb53a90<_0x449e50['nodes']['length'];_0xb53a90++){const _0x180c04=_0x449e50['nodes'][_0xb53a90],_0x746d16=new He(_0x180c04['name']);_0x746d16['setLocalPo'+'sition'](_0x180c04['position'][-0x1*-0x1d07+-0xfff+-0xd08],_0x180c04['position'][0x883+-0x199a*0x1+-0x2*-0x88c],_0x180c04['position'][0x1*0x13a8+-0x1*0x1e49+0x185*0x7]),_0x746d16['setLocalEu'+'lerAngles'](_0x180c04['rotation'][-0x3*0x9dd+0x2*-0x169+0x2069],_0x180c04['rotation'][0x2177*0x1+-0x2*0x1315+-0x2*-0x25a],_0x180c04['rotation'][-0x4a2+0x15ae+-0x2*0x885]),_0x746d16['setLocalSc'+'ale'](_0x180c04['scale'][0x270f+0x1cee+-0x43fd],_0x180c04['scale'][0xf79+-0x11ec+-0x2*-0x13a],_0x180c04['scale'][0x211b+-0x2617*-0x1+-0x2398*0x2]),_0x746d16['scaleCompe'+'nsation']=!!_0x180c04['scaleCompe'+'nsation'],_0x537e0c['push'](_0x746d16);}for(_0xb53a90=0x10bf+0x2331+-0x33ef;_0xb53a90<_0x449e50['parents']['length'];_0xb53a90++)_0x537e0c[_0x449e50['parents'][_0xb53a90]]['addChild'](_0x537e0c[_0xb53a90]);return _0x537e0c;}['_parseSkin'+'s'](_0x5260cf,_0x2aa408){const _0x253e10=_0x5260cf['model'],_0x580cce=[],_0x3db59c=[];let _0x21143d,_0x4c9713;for(_0x21143d=-0x11bd*-0x1+-0xf0d+-0x56*0x8;_0x21143d<_0x253e10['skins']['length'];_0x21143d++){const _0x384170=_0x253e10['skins'][_0x21143d],_0x51e199=[];for(_0x4c9713=-0xb6f+0x60d*0x1+0x562;_0x4c9713<_0x384170['inverseBin'+'dMatrices']['length'];_0x4c9713++){const _0x215ae1=_0x384170['inverseBin'+'dMatrices'][_0x4c9713];_0x51e199[_0x4c9713]=new te()['set'](_0x215ae1);}const _0x1f7d6a=new zy(this['_device'],_0x51e199,_0x384170['boneNames']);_0x580cce['push'](_0x1f7d6a);const _0x3e48ad=new hl(_0x1f7d6a),_0x3cf8aa=[];for(_0x4c9713=0xbe9*-0x2+0xb08+0xcca;_0x4c9713<_0x1f7d6a['boneNames']['length'];_0x4c9713++){const _0xee810a=_0x1f7d6a['boneNames'][_0x4c9713],_0x24b35a=_0x2aa408[-0x1439+0x261f*-0x1+0x3a58]['findByName'](_0xee810a);_0x3cf8aa['push'](_0x24b35a);}_0x3e48ad['bones']=_0x3cf8aa,_0x3db59c['push'](_0x3e48ad);}return{'skins':_0x580cce,'instances':_0x3db59c};}['_getMorphV'+'ertexCount'](_0x4d4f8d,_0x412891,_0x58fac6){for(let _0x31cdcb=0xfd*-0x4+0x32*0x28+-0x26*0x1a;_0x31cdcb<_0x4d4f8d['meshes']['length'];_0x31cdcb++){const _0xca4b81=_0x4d4f8d['meshes'][_0x31cdcb];if(_0xca4b81['morph']===_0x412891)return _0x58fac6[_0xca4b81['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x7ec607,_0x5cc06b,_0x103966){const _0x3b5e6b=_0x7ec607['model'],_0x37b57c=[],_0x1cd695=[];let _0x9ffb10,_0x3efbac,_0x1de473,_0x11343a,_0x34c5ab,_0x296541;if(_0x3b5e6b['morphs']){const _0x6e164b=function(_0x4310ff,_0x154d45,_0x364605){const _0x314f20=new Float32Array(_0x364605*(-0x43f*-0x1+-0x92f*0x4+0x2080));for(let _0x261760=-0x21ea+-0x1*-0x222b+-0x1*0x41;_0x261760<_0x154d45['length'];_0x261760++){const _0x22d7b7=_0x154d45[_0x261760]*(0x15b*0x4+0x2388+-0x28f1*0x1);_0x314f20[_0x22d7b7]=_0x4310ff[_0x261760*(0x649*0x1+0x6bd+-0xd03)],_0x314f20[_0x22d7b7+(-0x19*0x5+0xf7*0x7+0x1*-0x643)]=_0x4310ff[_0x261760*(-0x1044+0x2*0xa97+-0x4e7)+(-0x2135+0x1392+0xda4)],_0x314f20[_0x22d7b7+(-0x22ff+0x1*-0x156b+0x386c)]=_0x4310ff[_0x261760*(0x31*-0x4+0x17f1+-0x2*0xb95)+(-0x166a+-0x327*0x7+0x2c7d)];}return _0x314f20;};for(_0x9ffb10=0x10fd+0x2590+-0x368d;_0x9ffb10<_0x3b5e6b['morphs']['length'];_0x9ffb10++){for(_0x11343a=_0x3b5e6b['morphs'][_0x9ffb10]['targets'],_0x296541=[],_0x1de473=this['_getMorphV'+'ertexCount'](_0x3b5e6b,_0x9ffb10,_0x103966),_0x3efbac=-0x1867*0x1+0xf69+-0x1*-0x8fe;_0x3efbac<_0x11343a['length'];_0x3efbac++){const _0x5469c9=_0x11343a[_0x3efbac]['aabb'],_0x553a58=_0x5469c9['min'],_0x43f93e=_0x5469c9['max'],_0x201493=new Ie(new I((_0x43f93e[-0x1*0x2537+-0x1fbd+0x44f4]+_0x553a58[-0x113*-0x3+0x13ba+-0x16f3])*(-0xbe7*0x2+-0xab6+0x2284+0.5),(_0x43f93e[-0x2622+-0x5*-0x655+0x67a]+_0x553a58[-0x16d5+-0x1ba6+0x12*0x2ce])*(0x4*0x397+-0x832+-0x62a*0x1+0.5),(_0x43f93e[-0xcd7+-0xcb7+0x199*0x10]+_0x553a58[0x20fc+0x2640+-0x473a])*(0x20b4+-0x2*-0xa27+0x24e*-0x17+0.5)),new I((_0x43f93e[-0xe51*-0x1+0x1960+-0x1*0x27b1]-_0x553a58[0x1*-0x8b3+0x94e+0x1*-0x9b])*(0x1*0x201b+-0x1*-0xfce+0xb*-0x45b+0.5),(_0x43f93e[0x116*-0x14+0x1*-0x2371+0x392a]-_0x553a58[-0x49*-0x7d+-0xcba+0x2*-0xb75])*(0x22c4+0x2*-0xe12+-0x6a0+0.5),(_0x43f93e[0x16a2*0x1+-0x1*0x4bd+-0x11e3]-_0x553a58[0x8ec+-0x12c0+0x9d6])*(0xc25*0x1+-0xe87*-0x2+-0x2933+0.5))),_0x24e813=_0x11343a[_0x3efbac]['indices'];let _0x23b272=_0x11343a[_0x3efbac]['deltaPosit'+'ions'],_0x172a19=_0x11343a[_0x3efbac]['deltaNorma'+'ls'];_0x24e813&&(_0x23b272=_0x6e164b(_0x23b272,_0x24e813,_0x1de473),_0x172a19=_0x6e164b(_0x172a19,_0x24e813,_0x1de473)),_0x34c5ab=new ed({'deltaPositions':_0x23b272,'deltaNormals':_0x172a19,'name':_0x11343a[_0x3efbac]['name'],'aabb':_0x201493}),_0x296541['push'](_0x34c5ab);}const _0x49bb20=new Ny(_0x296541,this['_device']);_0x37b57c['push'](_0x49bb20);const _0x5e8817=new oa(_0x49bb20);_0x1cd695['push'](_0x5e8817);}}return{'morphs':_0x37b57c,'instances':_0x1cd695};}['_parseVert'+'exBuffers'](_0x32652f){const _0x3c039f=_0x32652f['model'],_0x363c19=[],_0x1f7527={'position':Pe,'normal':cs,'tangent':ci,'blendWeight':li,'blendIndices':ns,'color':kt,'texCoord0':Yt,'texCoord1':da,'texCoord2':Qo,'texCoord3':Jo,'texCoord4':el,'texCoord5':tl,'texCoord6':sl,'texCoord7':il};for(let _0x1ab294=-0x1*-0x10ac+0x2203*0x1+-0xa23*0x5;_0x1ab294<_0x3c039f['vertices']['length'];_0x1ab294++){const _0x157d20=_0x3c039f['vertices'][_0x1ab294],_0x3a9d49=[];for(const _0x2d6860 in _0x157d20){const _0x201644=_0x157d20[_0x2d6860];_0x3a9d49['push']({'semantic':_0x1f7527[_0x2d6860],'components':_0x201644['components'],'type':RN[_0x201644['type']],'normalize':_0x1f7527[_0x2d6860]===kt});}const _0x45f3e7=new zt(this['_device'],_0x3a9d49),_0x404d1d=_0x157d20['position']['data']['length']/_0x157d20['position']['components'],_0x5ec40c=new xs(this['_device'],_0x45f3e7,_0x404d1d),_0x220c04=new go(_0x5ec40c);for(let _0x3f09eb=-0xd3a+-0x1*-0x1a59+-0x1*0xd1f;_0x3f09eb<_0x404d1d;_0x3f09eb++){for(const _0x1a4643 in _0x157d20){const _0x472b4e=_0x157d20[_0x1a4643];switch(_0x472b4e['components']){case-0x2060+-0x4*-0x2a2+-0x15d9*-0x1:_0x220c04['element'][_0x1f7527[_0x1a4643]]['set'](_0x472b4e['data'][_0x3f09eb]);break;case-0x2578+0x25*-0x52+0x3154:_0x220c04['element'][_0x1f7527[_0x1a4643]]['set'](_0x472b4e['data'][_0x3f09eb*(-0x243b*-0x1+-0xd*-0xc5+-0x2e3a)],-0x139b+-0x68c+0x1a28-_0x472b4e['data'][_0x3f09eb*(-0xb*0x63+0x1596+-0x377*0x5)+(-0x3b*-0x1d+0x67f*-0x5+0x19cd)]);break;case 0x243+0x7f*-0x1b+0xb25:_0x220c04['element'][_0x1f7527[_0x1a4643]]['set'](_0x472b4e['data'][_0x3f09eb*(-0x1*-0x1a51+-0x1b09+0xbb)],_0x472b4e['data'][_0x3f09eb*(-0xfa*0x6+-0x1362+0x1941)+(-0x1*-0x949+-0x6*-0x233+-0x167a)],_0x472b4e['data'][_0x3f09eb*(-0x14bc+-0x6cf*0x1+0x1b8e)+(-0x60a*-0x2+-0x2e+-0xbe4)]);break;case 0x1ffb*0x1+0x2*0x2e9+0x11*-0x239:_0x220c04['element'][_0x1f7527[_0x1a4643]]['set'](_0x472b4e['data'][_0x3f09eb*(0x155f*0x1+-0xdff+0x3ae*-0x2)],_0x472b4e['data'][_0x3f09eb*(0x1393+0x1399+0x2728*-0x1)+(-0x13b8+0xc*-0x248+0x1*0x2f19)],_0x472b4e['data'][_0x3f09eb*(0xe2c+-0x36f*0x6+0x339*0x2)+(-0xd8e+0x2*-0x3e9+0x1562)],_0x472b4e['data'][_0x3f09eb*(0x7e0+-0x19d*0x17+0x1d3f)+(0x79*-0x33+-0x2011*0x1+0x1*0x382f)]);break;}}_0x220c04['next']();}_0x220c04['end'](),_0x363c19['push'](_0x5ec40c);}return _0x363c19;}['_parseInde'+'xBuffers'](_0x117528,_0x430bfc){const _0x10220c=_0x117528['model'];let _0x4bd4bc=null,_0x2186ca=null,_0x2c1c42,_0x4513f6=0xbdb+0x2*-0x1173+-0x170b*-0x1;for(_0x2c1c42=-0x2ef+0x657*-0x5+0x22a2;_0x2c1c42<_0x10220c['meshes']['length'];_0x2c1c42++){const _0x1aea5d=_0x10220c['meshes'][_0x2c1c42];_0x1aea5d['indices']!==void(0xceb+0x74*-0x21+0x209)&&(_0x4513f6+=_0x1aea5d['indices']['length']);}let _0x28cac3=-0x6*-0x273+0x1*-0x171e+-0xe*-0x9a;for(_0x2c1c42=0x1b0f+-0xf61+-0xbae;_0x2c1c42<_0x430bfc['length'];_0x2c1c42++)_0x28cac3=Math['max'](_0x28cac3,_0x430bfc[_0x2c1c42]['numVertice'+'s']);return _0x4513f6>-0x1bfa+0x38d+-0xa9*-0x25&&(_0x28cac3>-0xc1fb+0x4d5*0x4+0x1aea6*0x1?(_0x4bd4bc=new dr(this['_device'],hr,_0x4513f6),_0x2186ca=new Uint32Array(_0x4bd4bc['lock']())):(_0x4bd4bc=new dr(this['_device'],zi,_0x4513f6),_0x2186ca=new Uint16Array(_0x4bd4bc['lock']()))),{'buffer':_0x4bd4bc,'data':_0x2186ca};}['_parseMesh'+'es'](_0x25e441,_0x58b7e5,_0x49d09e,_0x16f8fe,_0x4d7b30,_0x9d324e){const _0x127e60=_0x25e441['model'],_0x45da19=[];let _0x47e226=-0x4*-0x153+0x6d3*-0x4+0x1600;for(let _0x4393a7=-0xba2*0x2+0x3*-0x4cd+0x25ab;_0x4393a7<_0x127e60['meshes']['length'];_0x4393a7++){const _0x5c59ad=_0x127e60['meshes'][_0x4393a7],_0xe51337=_0x5c59ad['aabb'],_0x3f5d30=_0xe51337['min'],_0x5dc289=_0xe51337['max'],_0x59df2c=new Ie(new I((_0x5dc289[-0xb3f+0x398+0x7a7]+_0x3f5d30[-0x43*0x33+-0x4e0*0x1+-0x3a5*-0x5])*(-0x199+0x5*0x31d+-0xdf8+0.5),(_0x5dc289[-0x6*0x343+-0x1262+0x25f5]+_0x3f5d30[0x185+-0xf*-0x108+-0x10fc*0x1])*(-0x2*0x8ed+0xf*0x219+-0x5*0x2b9+0.5),(_0x5dc289[-0x733+-0x252a+0x2c5f]+_0x3f5d30[-0x1*-0x9fe+0x236c*0x1+-0x2d68])*(-0x10*0x67+0x1*0x260b+0x57*-0x5d+0.5)),new I((_0x5dc289[0xbf*-0x6+0xc37+-0x7bd*0x1]-_0x3f5d30[0x80f+-0x18b5+0x10a6])*(-0x1d4f+-0x34d+0x209c+0.5),(_0x5dc289[0x2379+0x901+0x2c79*-0x1]-_0x3f5d30[-0x2*-0xe27+-0x1def*-0x1+-0x3a3c])*(0x167*-0x11+-0xf4*-0x3+0x14fb+0.5),(_0x5dc289[0x94c+0x2*-0x9db+-0x17*-0x74]-_0x3f5d30[-0x1ffa+0x1a4+-0x1*-0x1e58])*(-0x252f+-0x1648+0x3b77+0.5))),_0x156acc=_0x5c59ad['indices']!==void(-0x1e5*-0x2+-0x26c3+0x22f9),_0x3091b7=new Ge(this['_device']);_0x3091b7['vertexBuff'+'er']=_0x16f8fe[_0x5c59ad['vertices']],_0x3091b7['indexBuffe'+'r'][0x5*0x151+0x10*-0x38+0x315*-0x1]=_0x156acc?_0x4d7b30:null,_0x3091b7['primitive'][-0x244b+-0x682+0x2acd]['type']=LN[_0x5c59ad['type']],_0x3091b7['primitive'][0x2*0xeab+-0x7c1+-0x1595]['base']=_0x156acc?_0x5c59ad['base']+_0x47e226:_0x5c59ad['base'],_0x3091b7['primitive'][0x1550+0x181d*-0x1+0x2cd*0x1]['count']=_0x5c59ad['count'],_0x3091b7['primitive'][0x7*-0x525+0xe91+0xf*0x16e]['indexed']=_0x156acc,_0x3091b7['skin']=_0x5c59ad['skin']!==void(-0x1*-0x21c1+0x19c0+-0x3b81)?_0x58b7e5[_0x5c59ad['skin']]:null,_0x3091b7['morph']=_0x5c59ad['morph']!==void(-0xa9e+-0x23f2+0x2e9*0x10)?_0x49d09e[_0x5c59ad['morph']]:null,_0x3091b7['aabb']=_0x59df2c,_0x156acc&&(_0x9d324e['set'](_0x5c59ad['indices'],_0x47e226),_0x47e226+=_0x5c59ad['indices']['length']),_0x45da19['push'](_0x3091b7);}return _0x4d7b30!==null&&_0x4d7b30['unlock'](),_0x45da19;}['_parseMesh'+'Instances'](_0x3728de,_0x17cfdf,_0x462279,_0x51c532,_0x5924a2,_0x1667c6,_0x28ac94){const _0x494b40=_0x3728de['model'],_0x1ac98d=[];let _0x5d2cdb;for(_0x5d2cdb=0xef3*0x2+-0x24c+0x1*-0x1b9a;_0x5d2cdb<_0x494b40['meshInstan'+'ces']['length'];_0x5d2cdb++){const _0x23e9cc=_0x494b40['meshInstan'+'ces'][_0x5d2cdb],_0x1df439=_0x17cfdf[_0x23e9cc['node']],_0x415e3d=_0x462279[_0x23e9cc['mesh']],_0x264e35=new We(_0x415e3d,this['_defaultMa'+'terial'],_0x1df439);if(_0x415e3d['skin']){const _0x2a3fe5=_0x51c532['indexOf'](_0x415e3d['skin']);if(_0x2a3fe5===-(-0x16b7+0x2ec+-0x1*-0x13cc))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x264e35['skinInstan'+'ce']=_0x5924a2[_0x2a3fe5];}if(_0x415e3d['morph']){const _0x5ea64b=_0x1667c6['indexOf'](_0x415e3d['morph']);if(_0x5ea64b===-(0x26f4+-0x26*-0xa7+-0x6f*0x93))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x264e35['morphInsta'+'nce']=_0x28ac94[_0x5ea64b];}_0x1ac98d['push'](_0x264e35);}return _0x1ac98d;}}class FN extends Ze{constructor(_0x2239b3){super(_0x2239b3,'model'),this['_parsers']=[],this['device']=_0x2239b3['graphicsDe'+'vice'],this['assets']=_0x2239b3['assets'],this['defaultMat'+'erial']=cl(this['device']),this['addParser'](new ON(this),(_0x28aa96,_0x610d7a)=>xe['getExtensi'+'on'](_0x28aa96)==='.json'),this['addParser'](new DN(this),(_0x5179f7,_0x110da9)=>xe['getExtensi'+'on'](_0x5179f7)==='.glb');}['load'](_0x13ca9c,_0x3b52e6,_0x4669ae){typeof _0x13ca9c=='string'&&(_0x13ca9c={'load':_0x13ca9c,'original':_0x13ca9c});const _0x24ac0e={'retry':this['maxRetries']>-0x32f+0xf44+-0xc15*0x1,'maxRetries':this['maxRetries']};(_0x13ca9c['load']['startsWith']('blob:')||_0x13ca9c['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x13ca9c['original'])['toLowerCas'+'e']()==='.glb'?_0x24ac0e['responseTy'+'pe']=Ts['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x24ac0e['responseTy'+'pe']=Ts['ResponseTy'+'pe']['JSON']),nt['get'](_0x13ca9c['load'],_0x24ac0e,(_0x3fed3a,_0x26eea9)=>{if(_0x3b52e6){if(_0x3fed3a)_0x3b52e6('Error\x20load'+'ing\x20model:'+'\x20'+_0x13ca9c['original']+'\x20['+_0x3fed3a+']');else{for(let _0x3fa22f=-0x3e6+0x343*-0x2+-0x3a*-0x2e;_0x3fa22f<this['_parsers']['length'];_0x3fa22f++){const _0x24b92d=this['_parsers'][_0x3fa22f];if(_0x24b92d['decider'](_0x13ca9c['original'],_0x26eea9)){_0x24b92d['parser']['parse'](_0x26eea9,(_0x4a4d28,_0x19513a)=>{_0x4a4d28?_0x3b52e6(_0x4a4d28):_0x3b52e6(null,_0x19513a);},_0x4669ae);return;}}_0x3b52e6('No\x20parsers'+'\x20found');}}});}['open'](_0x2c12d3,_0x11de34){return _0x11de34;}['patch'](_0xdea60f,_0x3540b0){if(!_0xdea60f['resource'])return;const _0x530b2f=_0xdea60f['data'],_0x1d546f=this;_0xdea60f['resource']['meshInstan'+'ces']['forEach']((_0x540b7d,_0x198341)=>{if(_0x530b2f['mapping']){const _0x55d1ef=function(_0x1469cc){_0x1469cc['resource']?_0x540b7d['material']=_0x1469cc['resource']:(_0x1469cc['once']('load',_0x55d1ef),_0x3540b0['load'](_0x1469cc)),_0x1469cc['once']('remove',_0x14974f=>{_0x540b7d['material']===_0x14974f['resource']&&(_0x540b7d['material']=_0x1d546f['defaultMat'+'erial']);});};if(!_0x530b2f['mapping'][_0x198341]){_0x540b7d['material']=_0x1d546f['defaultMat'+'erial'];return;}const _0x28708d=_0x530b2f['mapping'][_0x198341]['material'],_0x152ba9=_0x530b2f['mapping'][_0x198341]['path'];let _0x4e5966;if(_0x28708d!==void(0x196c+-0x25*-0xd0+0x1*-0x377c))_0x28708d?(_0x4e5966=_0x3540b0['get'](_0x28708d),_0x4e5966?_0x55d1ef(_0x4e5966):_0x3540b0['once']('add:'+_0x28708d,_0x55d1ef)):_0x540b7d['material']=_0x1d546f['defaultMat'+'erial'];else{if(_0x152ba9){const _0x465d0e=_0xdea60f['getAbsolut'+'eUrl'](_0x530b2f['mapping'][_0x198341]['path']);_0x4e5966=_0x3540b0['getByUrl'](_0x465d0e),_0x4e5966?_0x55d1ef(_0x4e5966):_0x3540b0['once']('add:url:'+_0x465d0e,_0x55d1ef);}}}});}['addParser'](_0x4e461,_0x4e4646){this['_parsers']['push']({'parser':_0x4e461,'decider':_0x4e4646});}}class NN extends Ze{constructor(_0x57100b){super(_0x57100b,'scene');}['load'](_0xb452e3,_0x13cded){Fv['load'](_0xb452e3,this['maxRetries'],_0x13cded);}['open'](_0xaaa9d6,_0x530ff4){this['_app']['systems']['script']['preloading']=!(0x1b7b+-0x1f5*-0x1+-0x1d70);const _0x3f75b3=new Vm(this['_app'],!(0x1a79*-0x1+0x1*0xc11+0x1f*0x77))['parse'](_0x530ff4),_0x26b97e=this['_app']['scene'];return _0x26b97e['root']=_0x3f75b3,this['_app']['applyScene'+'Settings'](_0x530ff4['settings']),this['_app']['systems']['script']['preloading']=!(-0x1379+0x16d9+-0x35f*0x1),_0x26b97e;}}const Sc=class Sc{static['push'](_0x56dd25){Sc['_types']['push'](_0x56dd25);}};h(Sc,'_types',[]);let Hr=Sc;const kN=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),UN={};qo['reservedNa'+'mes']['forEach']((_0x1f1335,_0x588311,_0x5f31ed)=>{UN[_0x1f1335]=-0x251*-0x4+0x1*0x760+-0x10a3;});function BN(_0x5f043f,_0x1e6e23,_0x20e124){if(typeof _0x5f043f!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x5f043f+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x5f043f['prototype']instanceof qt))throw new Error('script\x20cla'+'ss:\x20\x27'+wo['__getScrip'+'tName'](_0x5f043f)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x1e6e23=_0x1e6e23||_0x5f043f['__name']||wo['__getScrip'+'tName'](_0x5f043f),kN['has'](_0x1e6e23))throw new Error('script\x20nam'+'e:\x20\x27'+_0x1e6e23+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x5f043f['__name']=_0x1e6e23,ec['getApplica'+'tion']()['scripts']['add'](_0x5f043f),Hr['push'](_0x5f043f);}const zN=_0x9f93e3=>_0x9f93e3[-0x1*-0x65c+-0x68a+-0x17*-0x2]['toLowerCas'+'e']()+_0x9f93e3['substring'](-0x1e74*0x1+-0x7*0x502+0x4183);class VN extends Ze{constructor(_0x7a0a4a){super(_0x7a0a4a,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x1af51e in this['_cache']){const _0x1197e2=this['_cache'][_0x1af51e],_0x446801=_0x1197e2['parentNode'];_0x446801&&_0x446801['removeChil'+'d'](_0x1197e2);}this['_cache']={};}['load'](_0x262b7c,_0x36e0c6){typeof _0x262b7c=='string'&&(_0x262b7c={'load':_0x262b7c,'original':_0x262b7c});const _0xf56a2=this;this['_app'];const _0x238942=(_0x262b7c['load'],(_0x5ae642,_0x43444a,_0x16b459)=>{if(_0x5ae642)_0x36e0c6(_0x5ae642);else{const _0x563897={};for(let _0x436e6a=-0x1*0xae3+0xb1*-0x1f+0x2052;_0x436e6a<Hr['_types']['length'];_0x436e6a++)_0x563897[Hr['_types'][_0x436e6a]['name']]=Hr['_types'][_0x436e6a];Hr['_types']['length']=0x4fa+0x18e7+-0x1de1,_0x36e0c6(null,_0x563897,_0x16b459);const _0x2ceebb=_0x43444a['split']('&hash=')[-0xf7*0x8+0x9*-0x38e+0x27b6];delete _0xf56a2['_loader']['_cache'][fn['makeKey'](_0x2ceebb,'script')];}}),[_0x303e49]=_0x262b7c['load']['split']('?');_0x303e49['endsWith']('.mjs')?this['_loadModul'+'e'](_0x303e49,_0x238942):this['_loadScrip'+'t'](_0x262b7c['load'],_0x238942);}['open'](_0x8085d4,_0x7ec4d6){return _0x7ec4d6;}['patch'](_0x1197d3,_0x3a007b){}['_loadScrip'+'t'](_0x4dc577,_0x306013){const _0x1285b4=document['head'],_0x5ab16f=document['createElem'+'ent']('script');this['_cache'][_0x4dc577]=_0x5ab16f,_0x5ab16f['async']=!(0x1*0x1de5+-0x27*0xef+0x685),_0x5ab16f['addEventLi'+'stener']('error',_0x413cdd=>{_0x306013('Script:\x20'+_0x413cdd['target']['src']+('\x20failed\x20to'+'\x20load'));},!(0x445*-0x1+-0x8c+-0x1*-0x4d2));let _0x34bf0a=!(0x3b*-0x25+-0xfb0+-0x64*-0x3e);_0x5ab16f['onload']=_0x5ab16f['onreadysta'+'techange']=function(){!_0x34bf0a&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x34bf0a=!(-0xa39+0x2b8*0x9+-0xe3f),_0x306013(null,_0x4dc577,_0x5ab16f));},_0x5ab16f['src']=_0x4dc577,_0x1285b4['appendChil'+'d'](_0x5ab16f);}['_loadModul'+'e'](_0x1ff2fc,_0x10e432){const _0x438ec3=Me['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x5382d9=new URL(_0x1ff2fc,_0x438ec3);import(_0x5382d9['toString']())['then'](_0x54e548=>{var _0x5291db,_0x402e27;const _0x2db7b1=_0x5382d9['pathname']['split']('/')['pop'](),_0x341b8d=(_0x402e27=(_0x5291db=this['_app']['assets']['find'](_0x2db7b1,'script'))==null?void(0x21d1*0x1+-0x1f*-0x22+-0xd*0x2eb):_0x5291db['data'])==null?void(-0x1*0x22d+-0x18*0x13e+0x1ffd):_0x402e27['scripts'];for(const _0x159add in _0x54e548){const _0x577ed4=_0x54e548[_0x159add];if(_0x577ed4['prototype']instanceof qt){const _0x3aafd2=zN(_0x577ed4['name']);_0x577ed4['scriptName']||M['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x577ed4['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x577ed4['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x3aafd2+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x5c2a33=_0x577ed4['scriptName']??_0x3aafd2;BN(_0x577ed4,_0x5c2a33),_0x341b8d&&this['_app']['scripts']['addSchema'](_0x5c2a33,_0x341b8d[_0x5c2a33]);}}_0x10e432(null,_0x1ff2fc,null);})['catch'](_0x53d8ff=>{_0x10e432(_0x53d8ff);});}}class GN extends Ze{constructor(_0x4f942c){super(_0x4f942c,'shader'),h(this,'decoder',null);}['load'](_0x22fa27,_0x1e6cfc){typeof _0x22fa27=='string'&&(_0x22fa27={'load':_0x22fa27,'original':_0x22fa27}),nt['get'](_0x22fa27['load'],{'retry':this['maxRetries']>-0x3*-0x779+0x7*-0x4af+0xa5e*0x1,'maxRetries':this['maxRetries']},(_0x524f0f,_0x2ebfa8)=>{_0x524f0f?_0x1e6cfc('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x22fa27['original']+'\x20['+_0x524f0f+']'):_0x1e6cfc(null,_0x2ebfa8);});}['openBinary'](_0x20b2de){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x20b2de);}}function Zd(_0x4c1d98){const _0x5e9745=this;_0x5e9745['resource']&&(_0x5e9745['resource']['atlas']=_0x4c1d98['resource']);}function Qd(_0x484b11){this['registry']['load'](_0x484b11);}class HN extends Ze{constructor(_0x38e326){super(_0x38e326,'sprite'),this['_assets']=_0x38e326['assets'],this['_device']=_0x38e326['graphicsDe'+'vice'];}['load'](_0x14908a,_0xec1488){typeof _0x14908a=='string'&&(_0x14908a={'load':_0x14908a,'original':_0x14908a}),xe['getExtensi'+'on'](_0x14908a['original'])==='.json'&&nt['get'](_0x14908a['load'],{'retry':this['maxRetries']>0x110*0x5+-0x19*-0x13d+-0x2445,'maxRetries':this['maxRetries']},(_0x5605f3,_0x1b5d6e)=>{_0x5605f3?_0xec1488(_0x5605f3):_0xec1488(null,_0x1b5d6e);});}['open'](_0x164604,_0xfcfa79){const _0x582e91=new KA(this['_device']);return _0x164604&&(_0x582e91['__data']=_0xfcfa79),_0x582e91;}['patch'](_0x1842f0,_0x3eaff5){const _0xd21e06=_0x1842f0['resource'];if(_0xd21e06['__data']&&(_0x1842f0['data']['pixelsPerU'+'nit']=_0xd21e06['__data']['pixelsPerU'+'nit'],_0x1842f0['data']['renderMode']=_0xd21e06['__data']['renderMode'],_0x1842f0['data']['frameKeys']=_0xd21e06['__data']['frameKeys'],_0xd21e06['__data']['textureAtl'+'asAsset'])){const _0x4230f0=_0x3eaff5['getByUrl'](_0xd21e06['__data']['textureAtl'+'asAsset']);_0x4230f0?_0x1842f0['data']['textureAtl'+'asAsset']=_0x4230f0['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0xd21e06['__data']['textureAtl'+'asAsset']);}_0xd21e06['startUpdat'+'e'](),_0xd21e06['renderMode']=_0x1842f0['data']['renderMode'],_0xd21e06['pixelsPerU'+'nit']=_0x1842f0['data']['pixelsPerU'+'nit'],_0xd21e06['frameKeys']=_0x1842f0['data']['frameKeys'],this['_updateAtl'+'as'](_0x1842f0),_0xd21e06['endUpdate'](),_0x1842f0['off']('change',this['_onAssetCh'+'ange'],this),_0x1842f0['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0xc1c949){const _0x1e888a=_0xc1c949['resource'];if(!_0xc1c949['data']['textureAtl'+'asAsset']){_0x1e888a['atlas']=null;return;}this['_assets']['off']('load:'+_0xc1c949['data']['textureAtl'+'asAsset'],Zd,_0xc1c949),this['_assets']['on']('load:'+_0xc1c949['data']['textureAtl'+'asAsset'],Zd,_0xc1c949);const _0x34364c=this['_assets']['get'](_0xc1c949['data']['textureAtl'+'asAsset']);_0x34364c&&_0x34364c['resource']?_0x1e888a['atlas']=_0x34364c['resource']:_0x34364c?this['_assets']['load'](_0x34364c):(this['_assets']['off']('add:'+_0xc1c949['data']['textureAtl'+'asAsset'],Qd,_0xc1c949),this['_assets']['on']('add:'+_0xc1c949['data']['textureAtl'+'asAsset'],Qd,_0xc1c949));}['_onAssetCh'+'ange'](_0x404459,_0x3af422,_0x4f7e62,_0x443c37){_0x3af422==='data'&&_0x4f7e62&&_0x4f7e62['textureAtl'+'asAsset']&&_0x443c37&&_0x4f7e62['textureAtl'+'asAsset']!==_0x443c37['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x443c37['textureAtl'+'asAsset'],Zd,_0x404459),this['_assets']['off']('add:'+_0x443c37['textureAtl'+'asAsset'],Qd,_0x404459));}}class Fg{constructor(_0x380dfc,_0x5bae8b){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x380dfc,this['_data']=_0x5bae8b);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x512bbf=new Vm(this['_app'],!(0x2448+-0x1298+-0x11b0));this['_templateR'+'oot']=_0x512bbf['parse'](this['_data']);}}class WN extends Ze{constructor(_0x5e9a1c){super(_0x5e9a1c,'template'),h(this,'decoder',null);}['load'](_0x5d55f9,_0x22a9b7){typeof _0x5d55f9=='string'&&(_0x5d55f9={'load':_0x5d55f9,'original':_0x5d55f9});const _0xc00336={'retry':this['maxRetries']>-0x1a9f+-0x54d+0x1fec,'maxRetries':this['maxRetries']};nt['get'](_0x5d55f9['load'],_0xc00336,(_0x1c0506,_0x3cbe07)=>{_0x1c0506?_0x22a9b7('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x5d55f9['original']):_0x22a9b7(_0x1c0506,_0x3cbe07);});}['open'](_0x1a2731,_0x21b47e){return new Fg(this['_app'],_0x21b47e);}['openBinary'](_0x52b89d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new Fg(this['_app'],JSON['parse'](this['decoder']['decode'](_0x52b89d)));}}class $N extends Ze{constructor(_0x123cfe){super(_0x123cfe,'text'),h(this,'decoder',null);}['load'](_0x3aa2b2,_0x19f18d){typeof _0x3aa2b2=='string'&&(_0x3aa2b2={'load':_0x3aa2b2,'original':_0x3aa2b2}),nt['get'](_0x3aa2b2['load'],{'retry':this['maxRetries']>-0x7*-0x45f+0x5*0x1c+-0x11*0x1d5,'maxRetries':this['maxRetries']},(_0x1a371d,_0x3f9a49)=>{_0x1a371d?_0x19f18d('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x3aa2b2['original']+'\x20['+_0x1a371d+']'):_0x19f18d(null,_0x3f9a49);});}['openBinary'](_0x38966a){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x38966a);}}const nh={'repeat':pt,'clamp':ue,'mirror':Tu},oh={'nearest':Te,'linear':_t,'nearest_mip_nearest':xc,'linear_mip_nearest':wc,'nearest_mip_linear':Tc,'linear_mip_linear':ea},XN=/^data\.frames\.(\d+)$/;class qN extends Ze{constructor(_0x18784f){super(_0x18784f,'textureatl'+'as'),this['_loader']=_0x18784f['loader'];}['load'](_0x442003,_0x1b7830){typeof _0x442003=='string'&&(_0x442003={'load':_0x442003,'original':_0x442003});const _0x1cce61=this,_0x4d7284=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x442003['original'])==='.json'?nt['get'](_0x442003['load'],{'retry':this['maxRetries']>-0xa22*0x1+0x1bbc+0x1*-0x119a,'maxRetries':this['maxRetries']},(_0x4a6e0f,_0x44c3cf)=>{if(_0x4a6e0f)_0x1b7830(_0x4a6e0f);else{const _0x131554=_0x442003['original']['replace']('.json','.png');_0x1cce61['_loader']['load'](_0x131554,'texture',(_0xd8146,_0x4a051c)=>{_0xd8146?_0x1b7830(_0xd8146):_0x1b7830(null,{'data':_0x44c3cf,'texture':_0x4a051c});});}}):_0x4d7284['load'](_0x442003,_0x1b7830);}['open'](_0x321a38,_0x101d00,_0x5a180c){const _0x450498=new ZA();if(_0x101d00['texture']&&_0x101d00['data'])_0x450498['texture']=_0x101d00['texture'],_0x450498['__data']=_0x101d00['data'];else{const _0x3f89d0=this['_loader']['getHandler']('texture')['open'](_0x321a38,_0x101d00,_0x5a180c);if(!_0x3f89d0)return null;_0x450498['texture']=_0x3f89d0;}return _0x450498;}['patch'](_0x2558fa,_0x9d63b9){if(!_0x2558fa['resource'])return;_0x2558fa['resource']['__data']&&(_0x2558fa['resource']['__data']['minfilter']!==void(-0xc3*-0x2d+-0x44d+-0x1dfa)&&(_0x2558fa['data']['minfilter']=_0x2558fa['resource']['__data']['minfilter']),_0x2558fa['resource']['__data']['magfilter']!==void(-0xbe7+0x13c2+-0x7db)&&(_0x2558fa['data']['magfilter']=_0x2558fa['resource']['__data']['magfilter']),_0x2558fa['resource']['__data']['addressu']!==void(0x3*-0x4cd+-0x97*-0x36+-0x1173)&&(_0x2558fa['data']['addressu']=_0x2558fa['resource']['__data']['addressu']),_0x2558fa['resource']['__data']['addressv']!==void(0x1af6+0x1395*0x1+0x94f*-0x5)&&(_0x2558fa['data']['addressv']=_0x2558fa['resource']['__data']['addressv']),_0x2558fa['resource']['__data']['mipmaps']!==void(-0x8e5+-0x27*-0x21+0x3de)&&(_0x2558fa['data']['mipmaps']=_0x2558fa['resource']['__data']['mipmaps']),_0x2558fa['resource']['__data']['anisotropy']!==void(0x13e2+-0x1124*0x1+-0x2*0x15f)&&(_0x2558fa['data']['anisotropy']=_0x2558fa['resource']['__data']['anisotropy']),_0x2558fa['resource']['__data']['rgbm']!==void(0x111f+0x19*-0x1+-0x1106)&&(_0x2558fa['data']['rgbm']=!!_0x2558fa['resource']['__data']['rgbm']),_0x2558fa['data']['frames']=_0x2558fa['resource']['__data']['frames'],delete _0x2558fa['resource']['__data']);const _0x4948ca=_0x2558fa['resource']['texture'];if(_0x4948ca&&(_0x4948ca['name']=_0x2558fa['name'],_0x2558fa['data']['hasOwnProp'+'erty']('minfilter')&&_0x4948ca['minFilter']!==oh[_0x2558fa['data']['minfilter']]&&(_0x4948ca['minFilter']=oh[_0x2558fa['data']['minfilter']]),_0x2558fa['data']['hasOwnProp'+'erty']('magfilter')&&_0x4948ca['magFilter']!==oh[_0x2558fa['data']['magfilter']]&&(_0x4948ca['magFilter']=oh[_0x2558fa['data']['magfilter']]),_0x2558fa['data']['hasOwnProp'+'erty']('addressu')&&_0x4948ca['addressU']!==nh[_0x2558fa['data']['addressu']]&&(_0x4948ca['addressU']=nh[_0x2558fa['data']['addressu']]),_0x2558fa['data']['hasOwnProp'+'erty']('addressv')&&_0x4948ca['addressV']!==nh[_0x2558fa['data']['addressv']]&&(_0x4948ca['addressV']=nh[_0x2558fa['data']['addressv']]),_0x2558fa['data']['hasOwnProp'+'erty']('mipmaps')&&_0x4948ca['mipmaps']!==_0x2558fa['data']['mipmaps']&&(_0x4948ca['mipmaps']=_0x2558fa['data']['mipmaps']),_0x2558fa['data']['hasOwnProp'+'erty']('anisotropy')&&_0x4948ca['anisotropy']!==_0x2558fa['data']['anisotropy']&&(_0x4948ca['anisotropy']=_0x2558fa['data']['anisotropy']),_0x2558fa['data']['hasOwnProp'+'erty']('rgbm'))){const _0xd945bc=_0x2558fa['data']['rgbm']?ta:di;_0x4948ca['type']!==_0xd945bc&&(_0x4948ca['type']=_0xd945bc);}_0x2558fa['resource']['texture']=_0x4948ca;const _0xa178c2={};for(const _0x2a655a in _0x2558fa['data']['frames']){const _0x28d097=_0x2558fa['data']['frames'][_0x2a655a];_0xa178c2[_0x2a655a]={'rect':new ae(_0x28d097['rect']),'pivot':new J(_0x28d097['pivot']),'border':new ae(_0x28d097['border'])};}_0x2558fa['resource']['frames']=_0xa178c2,_0x2558fa['off']('change',this['_onAssetCh'+'ange'],this),_0x2558fa['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x40309f,_0x379fb8,_0xc316d0){let _0x52768d;if(_0x379fb8==='data'||_0x379fb8==='data.frame'+'s'){const _0x5704e7={};for(const _0x4a4d0f in _0xc316d0['frames'])_0x52768d=_0xc316d0['frames'][_0x4a4d0f],_0x5704e7[_0x4a4d0f]={'rect':new ae(_0x52768d['rect']),'pivot':new J(_0x52768d['pivot']),'border':new ae(_0x52768d['border'])};_0x40309f['resource']['frames']=_0x5704e7;}else{const _0x27b592=_0x379fb8['match'](XN);if(_0x27b592){const _0xee8627=_0x27b592[-0x18e2+0x1*-0x7f5+-0x2*-0x106c];_0xc316d0?(_0x40309f['resource']['frames'][_0xee8627]?(_0x52768d=_0x40309f['resource']['frames'][_0xee8627],_0x52768d['rect']['set'](_0xc316d0['rect'][-0x13*-0x5e+-0x1123+-0x3*-0x363],_0xc316d0['rect'][-0x1a28+0x20d7+-0x357*0x2],_0xc316d0['rect'][0x6*-0x8b+-0x6b*0x3b+0x1bed],_0xc316d0['rect'][-0x1a8a+0xb85+0xf08]),_0x52768d['pivot']['set'](_0xc316d0['pivot'][-0x2f4+-0x845+0xdd*0xd],_0xc316d0['pivot'][0x1a51+0x13d*0x7+-0x3e3*0x9]),_0x52768d['border']['set'](_0xc316d0['border'][0x8*-0xf2+-0x232c+-0x88c*-0x5],_0xc316d0['border'][-0x1*-0x553+0x94a+-0xe9c],_0xc316d0['border'][0x2091*0x1+-0x24f+-0x2*0xf20],_0xc316d0['border'][-0x2346+-0x247c+0x13*0x3c7])):_0x40309f['resource']['frames'][_0xee8627]={'rect':new ae(_0xc316d0['rect']),'pivot':new J(_0xc316d0['pivot']),'border':new ae(_0xc316d0['border'])},_0x40309f['resource']['fire']('set:frame',_0xee8627,_0x40309f['resource']['frames'][_0xee8627])):_0x40309f['resource']['frames'][_0xee8627]&&(delete _0x40309f['resource']['frames'][_0xee8627],_0x40309f['resource']['fire']('remove:fra'+'me',_0xee8627));}}}}function jN(){const _0x3fe4be={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x482dfb={'astc':_0x3fe4be['cTFASTC_4x'+'4'],'dxt':_0x3fe4be['cTFBC1'],'etc1':_0x3fe4be['cTFETC1'],'etc2':_0x3fe4be['cTFETC1'],'pvr':_0x3fe4be['cTFPVRTC1_'+'4_RGB'],'atc':_0x3fe4be['cTFATC_RGB'],'none':_0x3fe4be['cTFRGB565']},_0x23dd4b={'astc':_0x3fe4be['cTFASTC_4x'+'4'],'dxt':_0x3fe4be['cTFBC3'],'etc1':_0x3fe4be['cTFRGBA444'+'4'],'etc2':_0x3fe4be['cTFETC2'],'pvr':_0x3fe4be['cTFPVRTC1_'+'4_RGBA'],'atc':_0x3fe4be['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x3fe4be['cTFRGBA444'+'4']},_0x2c1eab={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x14436d=(_0x315efb,_0x45e95a)=>{switch(_0x315efb){case _0x3fe4be['cTFETC1']:return _0x45e95a['formats']['etc2']?_0x2c1eab['ETC2_RGB']:_0x2c1eab['ETC1'];case _0x3fe4be['cTFETC2']:return _0x2c1eab['ETC2_RGBA'];case _0x3fe4be['cTFBC1']:return _0x2c1eab['DXT1'];case _0x3fe4be['cTFBC3']:return _0x2c1eab['DXT5'];case _0x3fe4be['cTFPVRTC1_'+'4_RGB']:return _0x2c1eab['PVRTC_4BPP'+'_RGB_1'];case _0x3fe4be['cTFPVRTC1_'+'4_RGBA']:return _0x2c1eab['PVRTC_4BPP'+'_RGBA_1'];case _0x3fe4be['cTFASTC_4x'+'4']:return _0x2c1eab['ASTC_4x4'];case _0x3fe4be['cTFATC_RGB']:return _0x2c1eab['ATC_RGB'];case _0x3fe4be['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x2c1eab['ATC_RGBA'];case _0x3fe4be['cTFRGBA32']:return _0x2c1eab['R8_G8_B8_A'+'8'];case _0x3fe4be['cTFRGB565']:return _0x2c1eab['R5_G6_B5'];case _0x3fe4be['cTFRGBA444'+'4']:return _0x2c1eab['R4_G4_B4_A'+'4'];}},_0x32597=_0x3f946b=>{const _0x4ff8b2=function(_0x4361c6,_0x45f0cd){const _0x59d904=_0x4361c6*(0x3*0x805+0x3*0xacf+0xf*-0x3c4+0.00784313725490196)-(-0xbc5+0x1178+0x12*-0x51),_0x33833e=_0x45f0cd*((-0x2673+-0x16*-0x23+0x2373)/(0x13ac+-0x1ae1+0x20d*0x4))-(-0x1a91+0x111e+0x974),_0x3460a6=Math['sqrt'](0x289*-0x5+0x2b+-0x1*-0xc83-Math['min'](-0x2199+0x31*-0xcb+0x4875,_0x59d904*_0x59d904+_0x33833e*_0x33833e));return Math['max'](0x1e34*-0x1+0x1*-0x99f+0x27d3,Math['min'](0x531*-0x2+0x24f2*0x1+-0x1991,Math['floor']((_0x3460a6+(0x13d1+-0x1859+0x1b*0x2b))*(-0x136e+-0x8e4*-0x2+0x1a6+0.5)*(0x1f6*-0x2+0xa*0x39e+-0x1f41))));};for(let _0x1f750d=-0x16f2+-0x1*0x201b+-0x1*-0x370d;_0x1f750d<_0x3f946b['length'];_0x1f750d+=0x23fd*-0x1+0x227f*-0x1+-0x5e*-0xc0){const _0x22981f=_0x3f946b[_0x1f750d+(-0x577*0x3+0x63a*0x6+-0x14f4)],_0x20dd07=_0x3f946b[_0x1f750d+(0x12a0+-0xff7+-0x2a8)];_0x3f946b[_0x1f750d+(0x918*-0x1+0x1*0x2+0x916)]=_0x22981f,_0x3f946b[_0x1f750d+(-0x1*-0x260f+0xecf*-0x1+-0x173e)]=_0x4ff8b2(_0x22981f,_0x20dd07),_0x3f946b[_0x1f750d+(-0x195b+-0x1001+-0x59*-0x77)]=-0x1*-0xb55+0x1168+-0x43*0x6a;}return _0x3f946b;},_0x1e6abc=_0x38b88f=>{const _0xbc5abe=new Uint16Array(_0x38b88f['length']/(0x18db+0xb62+-0x2439));for(let _0x5f01eb=0xd57+-0x252d+0x17d6*0x1;_0x5f01eb<_0x38b88f['length'];_0x5f01eb+=-0x61e+-0x1b50+0x2172){const _0xf184d4=_0x38b88f[_0x5f01eb+(-0x1*-0xb41+0x11ef*-0x1+-0x6ae*-0x1)],_0xf9066a=_0x38b88f[_0x5f01eb+(0x825+-0x2*0x125+-0x5da)],_0x103f25=_0x38b88f[_0x5f01eb+(0xde5*0x1+-0x22b8+0x1*0x14d5)];_0xbc5abe[_0x5f01eb/(-0x2ef*0x5+0x3fb*-0x2+0x16a5*0x1)]=(_0xf184d4&-0x65f*0x6+0x1b1f+0xc13*0x1)<<0xc52+-0xa6*-0x13+-0x189c|(_0xf9066a&-0x431+0x17*0x9d+-0x8ee)<<-0x15b8+-0x1*0x445+-0xd*-0x200|_0x103f25>>-0x1d1*0x7+0x14c3+-0x1*0x809;}return _0xbc5abe;},_0x636f41=(_0x2dfd22,_0x4f2a80)=>(_0x2dfd22&_0x2dfd22-(0x2027+-0x2322+-0x1*-0x2fc))===-0x1a72+0x2d5+-0xf*-0x193&&(_0x4f2a80&_0x4f2a80-(0x1d*-0x7+-0x6a*-0x59+0x2c6*-0xd))===-0x22b5*0x1+0x13*0x7c+-0x1981*-0x1,_0x619b9c=()=>typeof performance<'u'?performance['now']():-0x1a8*0x7+-0x15*-0x19a+-0x1f*0xb6;let _0x571069,_0x57f425,_0x1aecde;const _0x5aa3fd=(_0x5b3e2c,_0x50d995,_0x339734)=>{if(_0x339734){if(_0x5b3e2c['formats']['astc'])return'astc';}else{if(_0x50d995){if(_0x5b3e2c['formats']['etc2'])return'etc2';}else{if(_0x5b3e2c['formats']['etc2'])return'etc2';if(_0x5b3e2c['formats']['etc1'])return'etc1';}}return(_0x5ed361=>{for(let _0x3aefcd=-0xc2d+0xbe7+0x46;_0x3aefcd<_0x5ed361['length'];++_0x3aefcd){const _0x46844a=_0x5ed361[_0x3aefcd];if(_0x5b3e2c['formats'][_0x46844a])return _0x46844a;}return'none';})(_0x50d995?_0x1aecde:_0x57f425);},_0x32573e=(_0x5ae3e4,_0x148336,_0x2e2158)=>{switch(_0x2e2158){case _0x3fe4be['cTFETC1']:case _0x3fe4be['cTFETC2']:return!(-0x95*0x28+0xfba+0x1*0x78e);case _0x3fe4be['cTFBC1']:case _0x3fe4be['cTFBC3']:return(_0x5ae3e4&0xa3*-0xe+-0x4*-0x254+-0x1*0x63)===0x26ac+-0x102*0x1d+-0x972&&(_0x148336&-0xed*0x23+0x1a5a*-0x1+-0x1*-0x3ac4)===0xdb7+0x26c9+0xa8*-0x50;case _0x3fe4be['cTFPVRTC1_'+'4_RGB']:case _0x3fe4be['cTFPVRTC1_'+'4_RGBA']:return _0x636f41(_0x5ae3e4,_0x148336);case _0x3fe4be['cTFASTC_4x'+'4']:return!(0x9*-0x186+0x11b2+-0x3fc);case _0x3fe4be['cTFATC_RGB']:case _0x3fe4be['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(-0x3c2+-0xe14+0x11d6);}return!(-0x57c+-0x17c4+-0x1d41*-0x1);},_0x12e318=(_0x25efc4,_0x2b03ec,_0x5772e)=>{if(!_0x571069['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x391ee8=_0x619b9c(),_0x5b869b=new _0x571069['KTX2File'](new Uint8Array(_0x2b03ec)),_0x37435b=_0x5b869b['getWidth'](),_0x4972e9=_0x5b869b['getHeight'](),_0xfea155=_0x5b869b['getLevels'](),_0x42fcb1=!!_0x5b869b['getHasAlph'+'a'](),_0x532dcb=_0x5b869b['isUASTC']&&_0x5b869b['isUASTC']();if(!_0x37435b||!_0x4972e9||!_0xfea155)throw _0x5b869b['close'](),_0x5b869b['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x25efc4+'\x20width='+_0x37435b+'\x20height='+_0x4972e9+'\x20levels='+_0xfea155);const _0xf5a714=_0x5aa3fd(_0x5772e['deviceDeta'+'ils'],_0x42fcb1,_0x532dcb),_0x193c97=!!_0x5772e['isGGGR']&&_0xf5a714==='pvr';let _0x147ce7;if(_0x193c97?_0x147ce7=_0x3fe4be['cTFRGBA32']:(_0x147ce7=_0x42fcb1?_0x23dd4b[_0xf5a714]:_0x482dfb[_0xf5a714],_0x32573e(_0x37435b,_0x4972e9,_0x147ce7)||(_0x147ce7=_0x42fcb1?_0x3fe4be['cTFRGBA32']:_0x3fe4be['cTFRGB565'])),!_0x5b869b['startTrans'+'coding']())throw _0x5b869b['close'](),_0x5b869b['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x25efc4);let _0x5e6d7a;const _0x13ae6a=[];for(let _0x85b058=-0x5a7*-0x1+-0x17e7+-0x1*-0x1240;_0x85b058<_0xfea155;++_0x85b058){const _0x31076e=_0x5b869b['getImageTr'+'anscodedSi'+'zeInBytes'](_0x85b058,0x11e9+-0x2*-0x1327+-0x3837,0x24e*-0x5+-0x986+0x150c*0x1,_0x147ce7),_0x444235=new Uint8Array(_0x31076e);if(!_0x5b869b['transcodeI'+'mage'](_0x444235,_0x85b058,-0x25a0+0x508*0x5+0x26*0x54,-0x299+-0x1209+-0x1*-0x14a2,_0x147ce7,-0x3e5*-0x7+-0x6*-0x25f+0x297d*-0x1,-(-0x24a*-0x2+-0x3a6*-0x1+-0x839),-(-0x126e+0x1a7a+0x1d*-0x47)))throw _0x5b869b['close'](),_0x5b869b['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x25efc4);const _0x4ec9c5=_0x147ce7===_0x3fe4be['cTFRGB565']||_0x147ce7===_0x3fe4be['cTFRGBA444'+'4'];_0x13ae6a['push'](_0x4ec9c5?new Uint16Array(_0x444235['buffer']):_0x444235);}if(_0x5b869b['close'](),_0x5b869b['delete'](),_0x193c97){for(_0x147ce7=_0x3fe4be['cTFRGB565'],_0x5e6d7a=-0x1*-0x1beb+0x13e5+-0x2fd0;_0x5e6d7a<_0x13ae6a['length'];++_0x5e6d7a)_0x13ae6a[_0x5e6d7a]=_0x1e6abc(_0x32597(_0x13ae6a[_0x5e6d7a]));}return{'format':_0x14436d(_0x147ce7,_0x5772e['deviceDeta'+'ils']),'width':_0x37435b,'height':_0x4972e9,'levels':_0x13ae6a,'cubemap':!(-0x213f+0x2232+-0x79*0x2),'transcodeTime':_0x619b9c()-_0x391ee8,'url':_0x25efc4,'unswizzledGGGR':_0x193c97};},_0x18f00b=(_0x14cf51,_0x5eb755,_0xa4699e)=>{const _0x1cb958=_0x619b9c(),_0x4cf08f=new _0x571069['BasisFile'](new Uint8Array(_0x5eb755)),_0x3a841c=_0x4cf08f['getImageWi'+'dth'](-0x5*0x5c9+0x1c96+0x1d*0x3,-0x1e60+-0x1b91*0x1+0x39f1),_0x3a2b86=_0x4cf08f['getImageHe'+'ight'](0x16af*-0x1+-0x911+0x1fc0,-0x81+-0x860+0x8e1),_0x40b31e=_0x4cf08f['getNumImag'+'es'](),_0x73e7a0=_0x4cf08f['getNumLeve'+'ls'](-0x502+-0x1b9+0x6bb),_0x22adc9=!!_0x4cf08f['getHasAlph'+'a'](),_0x5a3c2c=_0x4cf08f['isUASTC']&&_0x4cf08f['isUASTC']();if(!_0x3a841c||!_0x3a2b86||!_0x40b31e||!_0x73e7a0)throw _0x4cf08f['close'](),_0x4cf08f['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x14cf51+'\x20width='+_0x3a841c+'\x20height='+_0x3a2b86+'\x20images='+_0x40b31e+'\x20levels='+_0x73e7a0);const _0x4c7a27=_0x5aa3fd(_0xa4699e['deviceDeta'+'ils'],_0x22adc9,_0x5a3c2c),_0x8b933d=!!_0xa4699e['isGGGR']&&_0x4c7a27==='pvr';let _0x5e49e1;if(_0x8b933d?_0x5e49e1=_0x3fe4be['cTFRGBA32']:(_0x5e49e1=_0x22adc9?_0x23dd4b[_0x4c7a27]:_0x482dfb[_0x4c7a27],_0x32573e(_0x3a841c,_0x3a2b86,_0x5e49e1)||(_0x5e49e1=_0x22adc9?_0x3fe4be['cTFRGBA32']:_0x3fe4be['cTFRGB565'])),!_0x4cf08f['startTrans'+'coding']())throw _0x4cf08f['close'](),_0x4cf08f['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x14cf51);let _0x29fedd;const _0x4832db=[];for(let _0x50217b=0xe*0x2a5+0x3*0x15d+-0x291d;_0x50217b<_0x73e7a0;++_0x50217b){const _0x2d52ee=_0x4cf08f['getImageTr'+'anscodedSi'+'zeInBytes'](-0x1107+-0x2c2*-0x7+0x1*-0x247,_0x50217b,_0x5e49e1),_0x34f7f0=new Uint8Array(_0x2d52ee);if(!_0x4cf08f['transcodeI'+'mage'](_0x34f7f0,-0x1*-0x1213+-0x1368+0x155,_0x50217b,_0x5e49e1,-0x1*-0xb51+-0x24b*-0x1+-0xd9c,0xf84+0xce9+-0x1c6d)){if(_0x50217b===_0x73e7a0-(0x1*0x647+-0x2*0xda2+0x14fe)&&_0x2d52ee===_0x4832db[_0x50217b-(-0x206f*0x1+0x1492+0xbde)]['buffer']['byteLength'])_0x34f7f0['set'](new Uint8Array(_0x4832db[_0x50217b-(0xea7*-0x1+0x4*-0x476+-0xa0*-0x34)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x14cf51);else throw _0x4cf08f['close'](),_0x4cf08f['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x14cf51);}const _0xc2789a=_0x5e49e1===_0x3fe4be['cTFRGB565']||_0x5e49e1===_0x3fe4be['cTFRGBA444'+'4'];_0x4832db['push'](_0xc2789a?new Uint16Array(_0x34f7f0['buffer']):_0x34f7f0);}if(_0x4cf08f['close'](),_0x4cf08f['delete'](),_0x8b933d){for(_0x5e49e1=_0x3fe4be['cTFRGB565'],_0x29fedd=0x1680+-0x296+-0x2*0x9f5;_0x29fedd<_0x4832db['length'];++_0x29fedd)_0x4832db[_0x29fedd]=_0x1e6abc(_0x32597(_0x4832db[_0x29fedd]));}return{'format':_0x14436d(_0x5e49e1,_0xa4699e['deviceDeta'+'ils']),'width':_0x3a841c,'height':_0x3a2b86,'levels':_0x4832db,'cubemap':!(-0x885+0x2668+-0x1de2),'transcodeTime':_0x619b9c()-_0x1cb958,'url':_0x14cf51,'unswizzledGGGR':_0x8b933d};},_0x5a5e90=(_0x40d42d,_0x2f6e53,_0x26357f)=>_0x26357f['isKTX2']?_0x12e318(_0x40d42d,_0x2f6e53,_0x26357f):_0x18f00b(_0x40d42d,_0x2f6e53,_0x26357f),_0x3ab157=(_0x191190,_0x551f30,_0x3bd965)=>{try{const _0x9b3260=_0x5a5e90(_0x191190,_0x551f30,_0x3bd965);_0x9b3260['levels']=_0x9b3260['levels']['map'](_0x490cb9=>_0x490cb9['buffer']),self['postMessag'+'e']({'url':_0x191190,'data':_0x9b3260},_0x9b3260['levels']);}catch(_0x3eaff8){self['postMessag'+'e']({'url':_0x191190,'err':_0x3eaff8},null);}},_0x1955bc=(_0x4184db,_0x16ecc1)=>{const _0x3dba39=(_0x324b0b,_0x443d99)=>(WebAssembly['instantiat'+'e'](_0x4184db['module'],_0x324b0b)['then'](_0x4fdf33=>{_0x443d99(_0x4fdf33);})['catch'](_0xe3a934=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0xe3a934);}),{});self['BASIS'](_0x4184db['module']?{'instantiateWasm':_0x3dba39}:null)['then'](_0x219c7a=>{_0x219c7a['initialize'+'Basis'](),_0x571069=_0x219c7a,_0x57f425=_0x4184db['rgbPriorit'+'y'],_0x1aecde=_0x4184db['rgbaPriori'+'ty'],_0x16ecc1(null);});},_0x3ffecf=[];self['onmessage']=_0x8963de=>{const _0x4f2b20=_0x8963de['data'];switch(_0x4f2b20['type']){case'init':_0x1955bc(_0x4f2b20['config'],()=>{for(let _0x52c2da=0x1*0x1d2c+0xff8+0x12*-0x282;_0x52c2da<_0x3ffecf['length'];++_0x52c2da)_0x3ab157(_0x3ffecf[_0x52c2da]['url'],_0x3ffecf[_0x52c2da]['data'],_0x3ffecf[_0x52c2da]['options']);_0x3ffecf['length']=-0x158+0x1674+-0x151c;});break;case'transcode':_0x571069?_0x3ab157(_0x4f2b20['url'],_0x4f2b20['data'],_0x4f2b20['options']):_0x3ffecf['push'](_0x4f2b20);break;}};}const YN=_0x5711b8=>({'astc':!!_0x5711b8['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x5711b8['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x5711b8['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x5711b8['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x5711b8['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x5711b8['extCompres'+'sedTexture'+'PVRTC']}),KN=(_0x3f6c84,_0x5e168a)=>{const _0x3e5058=_0x4a74eb=>{const _0x24765d=['/*\x20basis\x20*'+'/',_0x4a74eb,'','('+jN['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x24765d],{'type':'applicatio'+'n/javascri'+'pt'});},_0x31ed4b=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x378456=new WebAssembly['Module'](Uint8Array['of'](-0x45*0x4f+0xe1d+0x72e,-0x10c4+0xb46+0x5df,-0x8*-0x454+0x2660+-0x488d,-0x17cb*0x1+0x2*-0x687+0x2546*0x1,-0x1303*0x1+0x131e+-0x1a*0x1,-0x1438+-0x255*0x3+-0x1*-0x1b37,-0xad9*0x1+-0x1*-0x16d2+-0xbf9,-0x1500+-0x1*0x21b6+0x36b6));if(_0x378456 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x378456)instanceof WebAssembly['Instance'];}}catch{}return!(-0x18f7*-0x1+0x39*-0x9c+-0x8b*-0x12);},_0x2813b5=(_0x2e8ddc,_0x4d562e)=>{_0x5e168a(null,{'workerUrl':URL['createObje'+'ctURL'](_0x3e5058(_0x2e8ddc)),'module':_0x4d562e,'rgbPriority':_0x3f6c84['rgbPriorit'+'y'],'rgbaPriority':_0x3f6c84['rgbaPriori'+'ty']});},_0x51df9c={'cache':!(-0xa35+0x1f0f+-0x14da),'responseType':'text','retry':_0x3f6c84['maxRetries']>-0x1b*0x9+0x6*-0x24e+-0x4ed*-0x3,'maxRetries':_0x3f6c84['maxRetries']};if(_0x3f6c84['glueUrl']&&_0x3f6c84['wasmUrl']&&_0x31ed4b()){let _0x351ba3=null,_0x19d23d=null;nt['get'](_0x3f6c84['glueUrl'],_0x51df9c,(_0x4d9bb1,_0x484a5a)=>{_0x4d9bb1?_0x5e168a(_0x4d9bb1):_0x19d23d?_0x2813b5(_0x484a5a,_0x19d23d):_0x351ba3=_0x484a5a;});const _0x38e625=fetch(_0x3f6c84['wasmUrl']),_0xc2a875=()=>{_0x38e625['then'](_0x2a11fa=>_0x2a11fa['arrayBuffe'+'r']())['then'](_0xc8691=>WebAssembly['compile'](_0xc8691))['then'](_0x2aa147=>{_0x351ba3?_0x2813b5(_0x351ba3,_0x2aa147):_0x19d23d=_0x2aa147;})['catch'](_0x1635fe=>{_0x5e168a(_0x1635fe,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x38e625)['then'](_0x50a783=>{_0x351ba3?_0x2813b5(_0x351ba3,_0x50a783):_0x19d23d=_0x50a783;})['catch'](_0x3c69fb=>{M['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x3f6c84['wasmUrl']+'\x20('+_0x3c69fb+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0xc2a875();}):_0xc2a875();}else nt['get'](_0x3f6c84['fallbackUr'+'l'],_0x51df9c,(_0xa1172c,_0x22c559)=>{_0xa1172c?_0x5e168a(_0xa1172c,null):_0x2813b5(_0x22c559,null);});};class ZN{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x36cf72,_0x42c012,_0x179860,_0x5e808b){if(this['callbacks']['hasOwnProp'+'erty'](_0x36cf72))this['callbacks'][_0x36cf72]['push'](_0x179860);else{this['callbacks'][_0x36cf72]=[_0x179860];const _0x3205b3={'url':_0x36cf72,'data':_0x42c012,'options':_0x5e808b};this['clients']['length']>0x107e*-0x1+0xa69+-0xad*-0x9?this['clients']['shift']()['run'](_0x3205b3):this['queue']['push'](_0x3205b3);}}['enqueueCli'+'ent'](_0x46407e){this['queue']['length']>-0x10c7*0x2+0x29f*0x1+-0x1eef*-0x1?_0x46407e['run'](this['queue']['shift']()):this['clients']['push'](_0x46407e);}['handleResp'+'onse'](_0x5d792a,_0x1c00bf,_0x499402){const _0x2697cf=this['callbacks'][_0x5d792a];if(_0x1c00bf){for(let _0x469e77=0x1*0x10f4+0x1ee7+-0x2fdb;_0x469e77<_0x2697cf['length'];++_0x469e77)_0x2697cf[_0x469e77](_0x1c00bf);}else{_0x499402['format']===Ec||_0x499402['format']===Ac?_0x499402['levels']=_0x499402['levels']['map'](_0x5cc793=>new Uint16Array(_0x5cc793)):_0x499402['levels']=_0x499402['levels']['map'](_0x1921e5=>new Uint8Array(_0x1921e5));for(let _0x572cfb=-0x626+-0xa*0x301+-0x304*-0xc;_0x572cfb<_0x2697cf['length'];++_0x572cfb)_0x2697cf[_0x572cfb](null,_0x499402);}delete this['callbacks'][_0x5d792a];}}class QN{constructor(_0x4df903,_0x3a2b39,_0xa32a81){this['queue']=_0x4df903,this['worker']=new Worker(_0x3a2b39['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x562778=>{const _0xfda671=_0x562778['data'];this['queue']['handleResp'+'onse'](_0xfda671['url'],_0xfda671['err'],_0xfda671['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x3a2b39}),this['eager']=_0xa32a81;}['run'](_0x47cd1a){const _0x5cdb62=[];_0x47cd1a['data']instanceof ArrayBuffer&&_0x5cdb62['push'](_0x47cd1a['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x47cd1a['url'],'format':_0x47cd1a['format'],'data':_0x47cd1a['data'],'options':_0x47cd1a['options']},_0x5cdb62),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const JN=0x1*-0x1e77+-0xd3c+-0x2*-0x15da,ek=['etc2','etc1','astc','dxt','pvr','atc'],tk=['astc','dxt','etc2','pvr','atc'],sk=-0xd50+0x1304+0x61*-0xf,fu=new ZN();let Ng=null,uu=!(-0x1473+0x389*-0x3+-0x1f0f*-0x1);function ik(_0x14c3a3){if(!uu){if(!_0x14c3a3)_0x14c3a3=Ng||{};else{if(_0x14c3a3['lazyInit']){Ng=_0x14c3a3;return;}}if(!_0x14c3a3['glueUrl']||!_0x14c3a3['wasmUrl']||!_0x14c3a3['fallbackUr'+'l']){const _0x1c3dd2=sS['getConfig']('BASIS');_0x1c3dd2&&(_0x14c3a3={'glueUrl':_0x1c3dd2['glueUrl'],'wasmUrl':_0x1c3dd2['wasmUrl'],'fallbackUrl':_0x1c3dd2['fallbackUr'+'l'],'numWorkers':_0x1c3dd2['numWorkers']});}if(_0x14c3a3['glueUrl']||_0x14c3a3['wasmUrl']||_0x14c3a3['fallbackUr'+'l']){uu=!(0x2b*0xa7+0x1*0x4e1+-0xf*0x232);const _0x5e1a0d=Math['max'](0xd1*0x1c+0x1ef4+0x5f*-0x91,Math['min'](-0x6c1*-0x3+-0x16b5*0x1+-0x6*-0x6b,_0x14c3a3['numWorkers']||JN)),_0x4df6da=_0x14c3a3['numWorkers']===0x15f7+-0x14*0xd5+-0x2*0x2a9||(_0x14c3a3['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x14c3a3['eagerWorke'+'rs']:!(0x1dd3+-0x57c+0xc9*-0x1f));_0x14c3a3['rgbPriorit'+'y']=_0x14c3a3['rgbPriorit'+'y']||ek,_0x14c3a3['rgbaPriori'+'ty']=_0x14c3a3['rgbaPriori'+'ty']||tk,_0x14c3a3['maxRetries']=_0x14c3a3['hasOwnProp'+'erty']('maxRetries')?_0x14c3a3['maxRetries']:sk,KN(_0x14c3a3,(_0x24ecba,_0x299a7f)=>{if(_0x24ecba)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x24ecba);else{for(let _0x2e96bd=0x1795+-0x25da+-0xd*-0x119;_0x2e96bd<_0x5e1a0d;++_0x2e96bd)fu['enqueueCli'+'ent'](new QN(fu,_0x299a7f,_0x4df6da));}});}}}let Jd=null;function Nv(_0x579044,_0x4a5028,_0x1872e9,_0x37432a,_0x42086f){return ik(),Jd||(Jd={'formats':YN(_0x579044)}),fu['enqueueJob'](_0x4a5028,_0x1872e9,_0x37432a,{'deviceDetails':Jd,'isGGGR':!!(_0x42086f!=null&&_0x42086f['isGGGR']),'isKTX2':!!(_0x42086f!=null&&_0x42086f['isKTX2'])}),uu;}class kn{['load'](_0x4b2d35,_0x139bf4,_0x2b8e54){throw new Error('not\x20implem'+'ented');}['open'](_0x426768,_0x200a97,_0xd93654){throw new Error('not\x20implem'+'ented');}}class rk extends kn{constructor(_0x1d27ab,_0x2a91f9){super(),this['device']=_0x2a91f9,this['maxRetries']=0x8ec+-0x1*-0x653+-0xf3f*0x1;}['load'](_0xfe41ab,_0x5b49fc,_0x5ef3b3){const _0x4f7b94=this['device'],_0x20707d=_0x3b4d0e=>{var _0x4e7c06,_0x10ac25,_0x2cc7bf;Nv(_0x4f7b94,_0xfe41ab['load'],_0x3b4d0e,_0x5b49fc,{'isGGGR':(((_0x2cc7bf=(_0x10ac25=(_0x4e7c06=_0x5ef3b3==null?void(0x1b*-0x142+-0x1a92+0x3c88):_0x5ef3b3['file'])==null?void(-0x1181+0x1772+0x5f1*-0x1):_0x4e7c06['variants'])==null?void(-0xb*-0xc5+-0x33*-0xb5+0x116*-0x29):_0x10ac25['basis'])==null?void(0x59b+-0xa39+-0x1*-0x49e):_0x2cc7bf['opt'])&-0x218+0x4*0x24b+-0x16*0x52)!==-0x8a5*0x1+0xa4d*-0x2+0x1*0x1d3f})||_0x5b49fc('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x5ef3b3['name']+']('+_0x5ef3b3['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};me['fetchArray'+'Buffer'](_0xfe41ab['load'],(_0x128c46,_0x4fa1f8)=>{_0x128c46?_0x5b49fc(_0x128c46):_0x20707d(_0x4fa1f8);},_0x5ef3b3,this['maxRetries']);}['open'](_0x53d03a,_0x3122a3,_0x330ea9,_0x345f3b={}){const _0x20dd1b=_0x345f3b['srgb']?Rc(_0x3122a3['format']):_0x3122a3['format'],_0x22a61f=new _e(_0x330ea9,{'name':_0x53d03a,'profilerHint':mr,'addressU':_0x3122a3['cubemap']?ue:pt,'addressV':_0x3122a3['cubemap']?ue:pt,'width':_0x3122a3['width'],'height':_0x3122a3['height'],'format':_0x20dd1b,'cubemap':_0x3122a3['cubemap'],'levels':_0x3122a3['levels'],..._0x345f3b});return _0x22a61f['upload'](),_0x22a61f;}}const kv=new Uint8Array([-0x21f+-0x1b45+0x1ded,-0x1a9*0xa+0xaec*-0x1+0x1bd6,-0xae5+0x1f75+-0x1442*0x1,0x1*0xd23+-0x1177+0x49b,0x1555+0x1170+0xb1*-0x38,0x1bb*-0x5+0x1*0x36d+0x4*0x151,-0x943+0x47*-0x29+-0x14bc*-0x1,0xb7e*0x3+-0x78b+-0x1cb*0xf,-0x18c9+-0x2d0+0x1b99,0x50*-0x60+0xbf7+0x1209,0x1dfe+-0x239*0xa+-0x47*0x1c,0x7f3+-0xfdf+0xd*0x9d,-0x12e+0x9b1*-0x2+-0x1*-0x14d9,0x1*0x1d83+-0x2501+-0xc7*-0xa,0x210+-0x7ab+0x5df,0x128f*0x1+-0xbbb+-0x682,0x3ba+0x13c9+-0x1cf*0xd,-0x1184+-0x1*-0x366+0x116*0xd,0x1956+0x25a8+-0x3efe,-0x1*-0x23f6+0x3*-0x9b+-0x2224,0x262a+-0xb*0x155+-0x1783,-0x77c*-0x5+0x7*-0x41b+-0x8af,0x2468+-0xf9*0x1d+-0x833,0xc18+-0x1*-0x258f+0x18d3*-0x2,0x11*0x29+-0xab2+-0x2ab*-0x3,-0xa53+-0x1dcb*0x1+0x2*0x1412,-0x258a+0x20*0x91+0x136a,0xc86+0x1*0x24b+0xed1*-0x1,-0xb5*0x1a+0x1abd+-0x85b,0x34*0x7+0x794+-0x8e1,-0x11d4+0x1*0x117c+0x6d,-0x509*-0x3+-0x1c80+0x1d*0x7d,0x782*-0x1+-0x1233+0x1*0x1a3e,0x1ea9+-0x1*-0x1a6b+-0x3914,0x94*-0x16+0x157f+0x7*-0x141,-0x193f+0x10e7*0x1+0x858,0x36c+-0xac*-0x6+0x5*-0x17b,-0x1*0x1efd+0x1*0x2681+0x3*-0x269,-0xa38+-0xedb*0x1+0xd*0x1f3,-0x34f+-0x1cd2+-0x1*-0x2062,0xdfc+-0x1*-0x1589+-0x2331,0x606+0x1a20+-0xfd7*0x2,-0x1*-0xd3f+-0x1*0x207e+0x1419,-0x1*-0x1843+-0xb9*0x29+0x5c1*0x1,0x112f*0x1+0x1*-0x25d3+0x542*0x4,-0x831*-0x4+0x14ac*-0x1+-0xbb4,0x1373+0xb*0x371+-0x38ec*0x1,0x17a5+-0x652*-0x4+0x1*-0x3037,0x8d0+0x1cd*-0x9+0x76c,0x1*0x12a9+0x1e53+-0x30fc,0x185*0x15+-0x235b+-0x372*-0x1,0x5dd*-0x2+0x1a8*-0xd+-0x219b*-0x1,0x7*-0x1cf+0x6*-0xff+0x12a3*0x1,-0x1d*0x8+-0x43*-0x87+-0x2226,-0xe1d*-0x1+-0x22bc+-0x14e2*-0x1,0x2fb*0x6+-0x8f3+0x1*-0x86a,0x27+-0x1*0xab7+0x3e*0x2e,0x10a*-0x17+-0x4*-0x297+-0xa1*-0x17,0x23a8+0x191*0x7+0x1f*-0x181,-0x2aa+0x518*-0x2+-0x46*-0x2f,-0x4*0x6b7+0x1843*0x1+-0x13*-0x23,-0x2dc*0x4+-0xc6e+0x17de,0xc0e*-0x1+0x2ef+0x4b4*0x2,0x116*-0x18+-0x1f0d+-0x235*-0x1a,0x1af*0x5+0x2f4+-0xb11,-0x14b5+0x1897+-0x39e,-0xcab+-0x20e2+0x2e3b,-0x19bc+0x2109+-0x1*0x70b,0x3d*0x7a+-0x24be+0x80c,0x20ac+-0x22*0xab+0x1*-0x974]),Uv=(_0x29952d,_0x257396)=>{const _0xd2ce24=new _e(_0x29952d,{'width':0x1,'height':0x1,'format':Oe,'mipmaps':!(0x248+-0x18c6+0x167f),'levels':[_0x257396]}),_0x53668d=new vt({'colorBuffer':_0xd2ce24,'depth':!(-0x2c9*0x5+0x65b*-0x4+0x275a)});_0x29952d['setFramebu'+'ffer'](_0x53668d['impl']['_glFrameBu'+'ffer']),_0x29952d['initRender'+'Target'](_0x53668d);const _0x190bd0=new Uint8ClampedArray(0x1cee+0x1*0x1d35+0x1*-0x3a1f);return _0x29952d['gl']['readPixels'](-0x1319+-0x2e5+0x233*0xa,-0x1eb8+-0xe63*0x1+0x3*0xf09,-0x13ef+-0x12c6+0x2*0x135b,-0x156f*-0x1+-0x228f+-0xd21*-0x1,_0x29952d['gl']['RGBA'],_0x29952d['gl']['UNSIGNED_B'+'YTE'],_0x190bd0),_0x53668d['destroy'](),_0xd2ce24['destroy'](),_0x190bd0[0x75e*-0x2+-0x1dbe+-0x2c7a*-0x1]===-0x9d6*-0x1+-0x7*0x377+0xe6c&&_0x190bd0[-0x2285+0x10f+-0x293*-0xd]===-0x25*0x45+-0x1725+-0x2*-0x1090&&_0x190bd0[-0x1*0x1d63+0x206a+0x1*-0x305]===0x1051+0x1*0x1b2d+0x2b7b*-0x1&&_0x190bd0[-0x1*0x5c+-0x6ad+0x70c]===0x1f0b+-0x1faa+0xde;},ak=_0x4a6f4a=>createImageBitmap(new Blob([kv],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0xa92bf1=>Uv(_0x4a6f4a,_0xa92bf1))['catch'](_0x2bdb5a=>!(0x18*-0x83+0x17*0x95+0x6*-0x2f)),nk=_0x4a6559=>new Promise((_0x1aa652,_0xcb36e0)=>{const _0xae5560=new Image();_0xae5560['src']=URL['createObje'+'ctURL'](new Blob([kv])),_0xae5560['onload']=()=>{_0x1aa652(Uv(_0x4a6559,_0xae5560));};});class ok{static['run'](_0x1b894d){ak(_0x1b894d)['then'](_0x13dfc1=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x13dfc1);}),nk(_0x1b894d)['then'](_0x47f5d1=>{console['log']('imgElement'+'IsCorrect='+_0x47f5d1);});}}class lk extends kn{constructor(_0x6b07ba,_0x29d998){super(),this['crossOrigi'+'n']=_0x6b07ba['prefix']?'anonymous':null,this['maxRetries']=-0x41*-0x70+-0x11b1+0xabf*-0x1,this['device']=_0x29d998,ni['get']('IMG_ALPHA_'+'TEST')&&ok['run'](this['device']);}['load'](_0x697fe1,_0x206504,_0x4d012a){var _0x1eef05;const _0x4a2cdd=!!((_0x1eef05=_0x4d012a==null?void(-0x8a7+0x4ea+-0x21*-0x1d):_0x4d012a['file'])!=null&&_0x1eef05['contents']);if(_0x4a2cdd){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x4d012a['file']['contents']]),_0x206504);return;}_0x697fe1={'load':URL['createObje'+'ctURL'](new Blob([_0x4d012a['file']['contents']])),'original':_0x697fe1['original']};}const _0x31001b=(_0x614a24,_0x205a06)=>{_0x4a2cdd&&URL['revokeObje'+'ctURL'](_0x697fe1['load']),_0x206504(_0x614a24,_0x205a06);};let _0x5edb1f;_0x4d012a&&_0x4d012a['options']&&_0x4d012a['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x5edb1f=_0x4d012a['options']['crossOrigi'+'n']:Ln['test'](_0x697fe1['load'])&&(_0x5edb1f=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x697fe1['load'],_0x697fe1['original'],_0x5edb1f,_0x31001b,_0x4d012a):this['_loadImage'](_0x697fe1['load'],_0x697fe1['original'],_0x5edb1f,_0x31001b);}['open'](_0x4bd171,_0x10b695,_0x498bdf,_0x3a1e0d={}){const _0x15a211=new _e(_0x498bdf,{'name':_0x4bd171,'profilerHint':mr,'width':_0x10b695['width'],'height':_0x10b695['height'],'format':_0x3a1e0d['srgb']?hs:Oe,..._0x3a1e0d});return _0x15a211['setSource'](_0x10b695),_0x15a211;}['_loadImage'](_0x3ed2af,_0x40f6da,_0x2a20b7,_0x4cfb1f){const _0x3d7bf0=new Image();_0x2a20b7&&(_0x3d7bf0['crossOrigi'+'n']=_0x2a20b7);let _0x1b0184=0xf22+-0x1b6b+-0x11*-0xb9;const _0x58c053=this['maxRetries'];let _0x4cdee9;_0x3d7bf0['onload']=function(){_0x4cfb1f(null,_0x3d7bf0);},_0x3d7bf0['onerror']=function(){if(!_0x4cdee9){if(_0x58c053>-0x329+0x547+0x21e*-0x1&&++_0x1b0184<=_0x58c053){const _0x19e1b1=Math['pow'](0xa*0x15b+-0x2640+0x18b4,_0x1b0184)*(-0x7*-0x1db+-0x1eaf+-0x39e*-0x5);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x40f6da+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x19e1b1+'ms...');const _0x50565f=_0x3ed2af['indexOf']('?')>=0x2*0x617+-0x102c+0x49*0xe?'&':'?';_0x4cdee9=setTimeout(()=>{_0x3d7bf0['src']=_0x3ed2af+_0x50565f+'retry='+Date['now'](),_0x4cdee9=null;},_0x19e1b1);}else _0x4cfb1f('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x40f6da+'\x27');}},_0x3d7bf0['src']=_0x3ed2af;}['_loadImage'+'Bitmap'](_0x56f479,_0x194af6,_0x80c95,_0x50e7b3,_0x3f813b){const _0x4cbe05={'cache':!(0x2336+0xa52*-0x1+-0x18e4),'responseType':'blob','retry':this['maxRetries']>-0x1f7f+0xa3d*0x1+0x1542,'maxRetries':this['maxRetries'],'progress':_0x3f813b};nt['get'](_0x56f479,_0x4cbe05,(_0x2717b1,_0x395e56)=>{_0x2717b1?_0x50e7b3(_0x2717b1):this['_loadImage'+'BitmapFrom'+'Blob'](_0x395e56,_0x50e7b3);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x1d99e0,_0x44b2da){createImageBitmap(_0x1d99e0,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x356c1c=>_0x44b2da(null,_0x356c1c))['catch'](_0x1d3c46=>_0x44b2da(_0x1d3c46));}}const ef=[0x8fb08a77+0x374a7962+0x6ea6b82e*-0x1,-0x9290283f+-0xb11952c2+0x49*0x6ff7d19,0xe55aa08+-0x5ca7*0xe8f+0x109434e],hk={0x83f0:bc,0x83f2:bu,0x83f3:Yo,0x8d64:Pc,0x9274:Pu,0x9278:Mu,0x8c00:Mc,0x8c01:Ko,0x8c02:Ic,0x8c03:Zo,0x8051:ur,0x8058:Oe,0x8c41:Cu,0x8c43:hs,0x8c3a:pn,0x881b:ri,0x881a:at};function ck(_0x1f6c86,_0x24d99b,_0xc744d6,_0x484f6b){return _0x1f6c86===pn?new Uint32Array(_0x24d99b,_0xc744d6,_0x484f6b/(-0x213*0x12+0x7d1+-0x1*-0x1d89)):new Uint8Array(_0x24d99b,_0xc744d6,_0x484f6b);}class dk extends kn{constructor(_0x554c5b){super(),this['maxRetries']=0x17*0x75+-0x5*-0x347+-0x1ae6;}['load'](_0x564b12,_0x33f0ea,_0x53e3b5){me['fetchArray'+'Buffer'](_0x564b12['load'],_0x33f0ea,_0x53e3b5,this['maxRetries']);}['open'](_0x44531b,_0x4ad47a,_0x23a2da,_0x135254={}){const _0x297ea9=this['parse'](_0x4ad47a);if(!_0x297ea9)return null;const _0x426225=_0x135254['srgb']?Rc(_0x297ea9['format']):_0x297ea9['format'],_0x23354d=new _e(_0x23a2da,{'name':_0x44531b,'profilerHint':mr,'addressU':_0x297ea9['cubemap']?ue:pt,'addressV':_0x297ea9['cubemap']?ue:pt,'width':_0x297ea9['width'],'height':_0x297ea9['height'],'format':_0x426225,'cubemap':_0x297ea9['cubemap'],'levels':_0x297ea9['levels'],..._0x135254});return _0x23354d['upload'](),_0x23354d;}['parse'](_0x18d05c){const _0x1559ee=new Uint32Array(_0x18d05c);if(ef[-0x1544+0x2*0x3cd+0xdaa]!==_0x1559ee[0x274*0x7+0x1*0x8ed+-0x3*0x8b3]||ef[0x16*0xdd+-0x19b8+-0x6bb*-0x1]!==_0x1559ee[-0x684+-0x178*-0xa+-0x82b]||ef[0x69*-0x34+0x1*0x1454+-0x3*-0x56]!==_0x1559ee[-0x2*-0xb6b+0x1ca6+-0x337a])return M['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x339de4={'endianness':_0x1559ee[0x29*0xa8+0x486*-0x7+0x21*0x25],'glType':_0x1559ee[-0x7b+-0x419*0x3+0xcca*0x1],'glTypeSize':_0x1559ee[-0x97*-0x1f+0x21a*-0x11+0x1176],'glFormat':_0x1559ee[0x11ec*0x1+0x236c+-0xa*0x555],'glInternalFormat':_0x1559ee[0x17c7*0x1+-0xb8*0x22+0xb0],'glBaseInternalFormat':_0x1559ee[0x9*-0x359+-0x37b*0x1+0x4*0x869],'pixelWidth':_0x1559ee[-0x1f3c+-0x1b62+-0x181*-0x27],'pixelHeight':_0x1559ee[0x21c8+0xb00*0x1+-0x2cbe],'pixelDepth':_0x1559ee[0x8ec+0x2*-0xeb4+0x5*0x41b],'numberOfArrayElements':_0x1559ee[0x97*-0x3b+0x1672+0xc67],'numberOfFaces':_0x1559ee[0x179f*-0x1+-0x1*0x96e+0x1*0x211a],'numberOfMipmapLevels':_0x1559ee[-0xf01+0x1*0xaaf+0x8*0x8c],'bytesOfKeyValueData':_0x1559ee[0x1*0x7c3+0xa7a+-0x2*0x917]};if(_0x339de4['pixelDepth']>0x5*0x111+0xd45+-0x17*0xcf)return M['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x339de4['numberOfAr'+'rayElement'+'s']!==-0x599+0xe12*-0x2+0xb3f*0x3)return M['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0xb2ba3f=hk[_0x339de4['glInternal'+'Format']];if(_0xb2ba3f===void(0x12*-0xd9+0x63*0x5d+-0x6e7*0x3))return M['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x339de4['glInternal'+'Format']),null;let _0x5e085c=0x3*0xb69+-0x38d+0x2*-0xf4f+_0x339de4['bytesOfKey'+'ValueData']/(0x1b8*-0x4+-0x6b6*0x2+0x10*0x145);const _0x22b333=_0x339de4['numberOfFa'+'ces']>-0x266a+-0xac9*-0x3+0x308*0x2,_0x23965d=[];for(let _0x5aa006=-0x1*0x1e2b+-0x19ac+0x3b9*0xf;_0x5aa006<(_0x339de4['numberOfMi'+'pmapLevels']||0x933+0x5e9+-0xf1b);_0x5aa006++){const _0x2652df=_0x1559ee[_0x5e085c++];_0x22b333&&_0x23965d['push']([]);const _0x6e77dc=_0x22b333?_0x23965d[_0x5aa006]:_0x23965d;for(let _0x5b3345=0x3*0x794+-0x26c3*-0x1+-0x4bb*0xd;_0x5b3345<(_0x22b333?0xd1*-0x19+-0x1*-0x1ac1+-0x652:-0x879+0x1*-0x25f0+0x2e6a);++_0x5b3345)_0x6e77dc['push'](ck(_0xb2ba3f,_0x18d05c,_0x5e085c*(-0x113d+0x1d4c+-0xc0b),_0x2652df)),_0x5e085c+=_0x2652df+(-0x2235+-0x12a4*-0x1+0xf94)>>0x2*-0x773+-0xb5f+-0x7*-0x3c1;}return{'format':_0xb2ba3f,'width':_0x339de4['pixelWidth'],'height':_0x339de4['pixelHeigh'+'t'],'levels':_0x23965d,'cubemap':_0x22b333};}}const fk={'KHR_DF_MODEL_UASTC':0xa6};class uk extends kn{constructor(_0x5ab765,_0x1722c5){super(),this['maxRetries']=-0x4aa+-0x4e1*-0x1+-0x5*0xb,this['device']=_0x1722c5;}['load'](_0x430ee7,_0x923b9,_0x5de4d2){me['fetchArray'+'Buffer'](_0x430ee7['load'],(_0x263621,_0x203f89)=>{_0x263621?_0x923b9(_0x263621,_0x203f89):this['parse'](_0x203f89,_0x430ee7,_0x923b9,_0x5de4d2);},_0x5de4d2,this['maxRetries']);}['open'](_0x3a357e,_0x1cd991,_0x42affb,_0x53d0e3={}){const _0x582333=_0x53d0e3['srgb']?Rc(_0x1cd991['format']):_0x1cd991['format'],_0x263522=new _e(_0x42affb,{'name':_0x3a357e,'profilerHint':mr,'addressU':_0x1cd991['cubemap']?ue:pt,'addressV':_0x1cd991['cubemap']?ue:pt,'width':_0x1cd991['width'],'height':_0x1cd991['height'],'format':_0x582333,'cubemap':_0x1cd991['cubemap'],'levels':_0x1cd991['levels'],..._0x53d0e3});return _0x263522['upload'](),_0x263522;}['parse'](_0x500f30,_0x263f62,_0x135272,_0x5bb40b){var _0x2e60bb,_0x5855c4,_0x38c93e;const _0x49626f=new iS(_0x500f30),_0x3bddc1=[_0x49626f['readU32be'](),_0x49626f['readU32be'](),_0x49626f['readU32be']()];if(_0x3bddc1[0x26f6+-0x1d8f+0x967*-0x1]!==0x1294e79*0xdb+-0x402ccee*0x4a+0x1*0xd5c46fa1||_0x3bddc1[-0x428+-0x7*0x248+0x1421]!==0x398282dc+-0x3ce98f81+0x23993d60||_0x3bddc1[0x448+0x14d*0x11+-0x1a63]!==-0x2f213*0x402+-0x2*0x583fcfa+0x1630e*0x19de)return M['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0xb4c0dc={'vkFormat':_0x49626f['readU32'](),'typeSize':_0x49626f['readU32'](),'pixelWidth':_0x49626f['readU32'](),'pixelHeight':_0x49626f['readU32'](),'pixelDepth':_0x49626f['readU32'](),'layerCount':_0x49626f['readU32'](),'faceCount':_0x49626f['readU32'](),'levelCount':_0x49626f['readU32'](),'supercompressionScheme':_0x49626f['readU32']()},_0x1142f6={'dfdByteOffset':_0x49626f['readU32'](),'dfdByteLength':_0x49626f['readU32'](),'kvdByteOffset':_0x49626f['readU32'](),'kvdByteLength':_0x49626f['readU32'](),'sgdByteOffset':_0x49626f['readU64'](),'sgdByteLength':_0x49626f['readU64']()},_0x35888a=[];for(let _0x53d1ae=0x24b*0x11+0x195b*0x1+0x5a*-0xb7;_0x53d1ae<Math['max'](0x711+0x7b0+-0xec0,_0xb4c0dc['levelCount']);++_0x53d1ae)_0x35888a['push']({'byteOffset':_0x49626f['readU64'](),'byteLength':_0x49626f['readU64'](),'uncompressedByteLength':_0x49626f['readU64']()});if(_0x49626f['readU32']()!==_0x1142f6['kvdByteOff'+'set']-_0x1142f6['dfdByteOff'+'set'])return M['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x49626f['skip'](0x195a+-0x710*-0x3+-0x2e82);const _0x4be576=_0x49626f['readU8']();_0x49626f['skip'](_0x1142f6['dfdByteLen'+'gth']-(0xf54+0x187f*-0x1+0x2*0x49a)),_0x49626f['skip'](_0x1142f6['kvdByteLen'+'gth']),_0xb4c0dc['supercompr'+'essionSche'+'me']===-0x97*-0x6+-0x1841+0xcc*0x1a||_0x4be576===fk['KHR_DF_MOD'+'EL_UASTC']?Nv(this['device'],_0x263f62['load'],_0x500f30,_0x135272,{'isGGGR':(((_0x38c93e=(_0x5855c4=(_0x2e60bb=_0x5bb40b==null?void(0x200*-0x2+-0x1*-0x2a5+0x15b):_0x5bb40b['file'])==null?void(-0x225+0xb*0x1b0+-0x106b):_0x2e60bb['variants'])==null?void(0x1d88+-0x2339*0x1+0x1f*0x2f):_0x5855c4['basis'])==null?void(0x13c5+0x25ba+-0x397f*0x1):_0x38c93e['opt'])&0x2*0xedd+-0x9*-0x2c7+-0x36b1)!==0x25a9+0x3*-0xaa4+0x5bd*-0x1,'isKTX2':!(-0x1b7c+-0x3be*-0x6+-0x1*-0x508)})||_0x135272('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x5bb40b['name']+']('+_0x5bb40b['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x135272('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class mk extends kn{constructor(_0x36a2dc){super(),this['maxRetries']=0xb56+-0x50e+-0x648;}['load'](_0x43cd85,_0x65f8f1,_0x3a80e4){me['fetchArray'+'Buffer'](_0x43cd85['load'],_0x65f8f1,_0x3a80e4,this['maxRetries']);}['open'](_0x51a852,_0x271349,_0x4c61d3,_0x1634cc={}){const _0x202c3d=new Uint32Array(_0x271349,-0x35*0x3a+0x225*-0x5+0x16bb,0xe21*-0x1+0xdd0+0x71*0x1),_0x1b52b1=_0x202c3d[0x475+0x174d+-0x6a*0x43],_0x46b0ac=_0x202c3d[0x3c9*-0xa+0x1*0x16b4+-0x1*-0xf29],_0x40aac0=Math['max'](_0x202c3d[-0x6*-0x40+-0x1*0x12e3+0x8b5*0x2],0x189b+0xa9*0x14+-0x25ce),_0x30db71=_0x202c3d[-0x213f+-0xa*0xe9+0x2a6d*0x1]===0x24c*0x1+0xccc+0x14*-0xc1,_0xe84867=_0x202c3d[-0x3*-0xa3e+-0x1377+-0xb2e],_0x2c56d9=_0x202c3d[-0x1*-0x949+0xb00+-0x1433],_0x3683b9=_0x202c3d[-0x83*0x49+0x1409+0x17*0xc2]===-0x1cc89+0xa4f9+0x30*0xb73,_0x297fd0=-0x5*0xf62d7d3+-0x2ebde2cd+-0x6eb89b*-0x190,_0x5a6c09=0x696d*0x4438+0x60107613+-0x46d421a7,_0x1541c3=-0x8a9+0x5ba+0x360,_0xdd0a59=0x1*0x18ee+0xc97*0x2+-0x7*0x718,_0x1ee63d=0x38604897+-0x2e9d6f34+0x27807ae2,_0x46ffc0=-0x5*0xf66f80d+0x2ac625b0+-0xbeb69d7*-0x7,_0x4f6e4a=-0x1a79e32c*-0x1+-0x43b8ce90+-0x33af7eb*-0x1c,_0x21f9d1=0x461da37*-0x5+0x10aa0b6*-0x5+0x1d*0x2a1b5e5,_0xf1fce7=-0x29ace2eb+-0x328dc5d5+0x8d6edd10;let _0x2bedeb=!(0xaf6*-0x1+-0x1*-0x259+0x89e),_0x2fd7c1=!(-0x1053*-0x1+0x132e*0x1+-0x2380),_0xa4eed5=!(0x1f3+0x12de+-0x14d0),_0x10f556=!(-0x2de*0x3+0x52f+-0x1*-0x36c),_0x35592a=null,_0x1d2e77=0x7cc+0x2581+0xd*-0x37c,_0x44d0a8;if(_0x30db71?_0xe84867===_0x297fd0?(_0x35592a=bc,_0x2bedeb=!(-0xb49*0x1+0x34a*-0x7+0x224f)):_0xe84867===_0x5a6c09?(_0x35592a=Yo,_0x2bedeb=!(-0x1*-0x2292+0x1968+-0x12*0x355)):_0xe84867===_0x1541c3?(_0x35592a=at,_0x1d2e77=-0x3*-0xa47+0x2615*-0x1+0x742):_0xe84867===_0xdd0a59?(_0x35592a=Bt,_0x1d2e77=-0xd51*0x1+-0x1*-0x80d+0x548):_0xe84867===_0x1ee63d?(_0x35592a=Pc,_0x2bedeb=!(-0x184*-0x7+-0x3b4+-0xd*0x88),_0x2fd7c1=!(-0x1*0x549+0xa39*0x3+-0x1962)):_0xe84867===_0x46ffc0||_0xe84867===_0x4f6e4a?(_0x35592a=_0xe84867===_0x46ffc0?Ko:Zo,_0x2bedeb=!(-0x4ee*-0x1+0x7*-0x504+-0x1e2e*-0x1),_0xa4eed5=!(-0x25ac+0xd0c+0x18a0)):(_0xe84867===_0x21f9d1||_0xe84867===_0xf1fce7)&&(_0x35592a=_0xe84867===_0x21f9d1?Mc:Ic,_0x2bedeb=!(-0x23ad*-0x1+-0x13e7+0x2a1*-0x6),_0x10f556=!(-0x511*0x1+-0xc4f+0x1160)):_0x2c56d9===-0x156b+-0x1664+0xa3*0x45&&(_0x35592a=Oe),!_0x35592a)return M['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x51a852+'.'),_0x44d0a8=new _e(_0x4c61d3,{'width':0x4,'height':0x4,'format':ur,'name':'dds-legacy'+'-empty'}),_0x44d0a8;_0x44d0a8=new _e(_0x4c61d3,{'name':_0x51a852,'profilerHint':mr,'addressU':_0x3683b9?ue:pt,'addressV':_0x3683b9?ue:pt,'width':_0x1b52b1,'height':_0x46b0ac,'format':_0x35592a,'cubemap':_0x3683b9,'mipmaps':_0x40aac0>0x813+0x2242+-0x2a54,..._0x1634cc});let _0x5306df=0xed*-0x25+-0x1621+-0x12*-0x329;const _0x4643be=_0x3683b9?0x2078+0xfa*0xc+0x1*-0x2c2a:-0x1e40+0x29*-0xcd+0x3f16;let _0x13c558;const _0xae9e0c=-0x2a*0x1f+0x1*-0x248d+-0x29a7*-0x1,_0x5563f9=0x1f59+-0xac1+-0x1494,_0x49a518=_0xe84867===_0x297fd0?0x114c+0x254a+-0x368e:-0x70e+-0x94*0x3d+-0x87a*-0x5;let _0x53959d,_0x40de6a,_0x35c301;for(let _0x1496d6=-0x137d+0x97a*-0x2+0x2671;_0x1496d6<_0x4643be;_0x1496d6++){let _0x35924c=_0x1b52b1,_0x155fa2=_0x46b0ac;for(let _0x1f03b8=0x22b8+0x222b+0x5*-0xdc7;_0x1f03b8<_0x40aac0;_0x1f03b8++){_0x2bedeb?_0x2fd7c1?_0x13c558=Math['floor']((_0x35924c+(-0xe90+0x1294+0xcd*-0x5))/(0x577*0x7+-0x2*-0x136+-0x28a9))*Math['floor']((_0x155fa2+(0x17c8+0x1135+-0x28fa))/(0x346+0x1e9d+-0x21df))*(-0x28a+-0x1073+0x1305):_0xa4eed5?_0x13c558=Math['max'](_0x35924c,0xfe+0x35*-0x21+0x5e7)*Math['max'](_0x155fa2,-0x1*0x17c8+-0x9*0x1e1+-0x825*-0x5)/(-0x1a2f+0x1*-0xa39+0x246c):_0x10f556?_0x13c558=Math['max'](_0x35924c,0x1e25+-0x4f6+-0x1*0x1927)*Math['max'](_0x155fa2,0x74c+-0x1759*-0x1+0x1e9d*-0x1)/(-0xa4c+0x1*0xddb+0x3*-0x12f):(_0x53959d=Math['floor']((_0x35924c+_0xae9e0c-(-0x19af+-0x6*0x3fd+0x319e))/_0xae9e0c),_0x40de6a=Math['floor']((_0x155fa2+_0x5563f9-(-0x1132+0xfc4+0x16f))/_0x5563f9),_0x35c301=_0x53959d*_0x40de6a,_0x13c558=_0x35c301*_0x49a518):_0x13c558=_0x35924c*_0x155fa2*(0x138b+-0x859+-0x1*0xb2e);const _0x25b3fa=_0x35592a===Bt?new Float32Array(_0x271349,_0x5306df,_0x13c558):_0x35592a===at?new Uint16Array(_0x271349,_0x5306df,_0x13c558):new Uint8Array(_0x271349,_0x5306df,_0x13c558);_0x3683b9?(_0x44d0a8['_levels'][_0x1f03b8]||(_0x44d0a8['_levels'][_0x1f03b8]=[]),_0x44d0a8['_levels'][_0x1f03b8][_0x1496d6]=_0x25b3fa):_0x44d0a8['_levels'][_0x1f03b8]=_0x25b3fa,_0x5306df+=_0x13c558*_0x1d2e77,_0x35924c=Math['max'](_0x35924c*(-0x94f*-0x3+0xeec+0x61f*-0x7+0.5),0x3e6*0x6+-0x2435+0xcd2),_0x155fa2=Math['max'](_0x155fa2*(-0x587+0x3df+-0xd4*-0x2+0.5),-0x7b5+-0x21a9+-0x7*-0x5e9);}}return _0x44d0a8['upload'](),_0x44d0a8;}}class pk extends kn{constructor(_0x5bb18f){super(),this['maxRetries']=0x1*-0x1a95+0x20b*0x1+0x188a;}['load'](_0x4b0116,_0x4ff42e,_0x1b1ec6){me['fetchArray'+'Buffer'](_0x4b0116['load'],_0x4ff42e,_0x1b1ec6,this['maxRetries']),_0x1b1ec6['data']&&!_0x1b1ec6['data']['type']&&(_0x1b1ec6['data']['type']=Nh);}['open'](_0xa34bf5,_0x1cfdb7,_0x36549f,_0xca0fa8={}){const _0x1f2ff2=this['parse'](_0x1cfdb7);if(!_0x1f2ff2)return null;const _0x398f48=new _e(_0x36549f,{'name':_0xa34bf5,'profilerHint':mr,'addressU':pt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x1f2ff2['width'],'height':_0x1f2ff2['height'],'levels':_0x1f2ff2['levels'],'format':Oe,'type':Nh,'mipmaps':!(-0x4*-0x34b+-0x2*-0xe4e+-0xf*0x2c9),..._0xca0fa8});return _0x398f48['upload'](),_0x398f48;}['parse'](_0x44a1fd){const _0x168f02=new iS(_0x44a1fd);if(!_0x168f02['readLine']()['startsWith']('#?RADIANCE'))return M['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x51f7c9={};for(;;){const _0xc615c3=_0x168f02['readLine']();if(_0xc615c3['length']===0x2*-0xf07+-0xa34+-0x1421*-0x2)break;{const _0x1f83c6=_0xc615c3['split']('=');_0x1f83c6['length']===-0x1ee7+-0x1*-0x23cf+0x1*-0x4e6&&(_0x51f7c9[_0x1f83c6[0x481*0x4+-0x1*0x13f3+0x1*0x1ef]]=_0x1f83c6[-0x40*0x20+-0x9d*-0x30+0x725*-0x3]);}}if(!_0x51f7c9['hasOwnProp'+'erty']('FORMAT'))return M['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x5ac161=_0x168f02['readLine']()['split']('\x20');if(_0x5ac161['length']!==-0x491*0x3+0x205*-0x4+0x15cb)return M['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x335393=parseInt(_0x5ac161[0xc2c*0x1+-0xa5b+-0x1d0],0x1e4*-0x5+0x39f*0x5+0x13b*-0x7),_0x629d9a=parseInt(_0x5ac161[-0x75c+0x103f*0x1+-0x8e0],0x26c5+0x1*0xbff+-0x32ba),_0x504b07=this['_readPixel'+'s'](_0x168f02,_0x629d9a,_0x335393,_0x5ac161[-0x1bb6+0xb7f*0x1+0x251*0x7]==='-Y');return _0x504b07?{'width':_0x629d9a,'height':_0x335393,'levels':[_0x504b07]}:null;}['_readPixel'+'s'](_0x289a24,_0x19ea5a,_0x15b130,_0x3fc96b){if(_0x19ea5a<-0x232e+0x2655+-0x31f||_0x19ea5a>0x5301+0x8af9+-0x7*0xd6d)return this['_readPixel'+'sFlat'](_0x289a24,_0x19ea5a,_0x15b130);const _0xc3b2e=[-0x1d14*0x1+0x1*0x455+0x18bf,-0x1*-0x1b31+-0xed*0x3+-0x186a,-0x8b*0x3b+-0x2*-0x1374+-0x6df,0x212f+0x10d8+-0x3207];if(_0x289a24['readArray'](_0xc3b2e),_0xc3b2e[-0x3c1*0xa+0x18c3+0xcc7]!==0x2058+0x1d6a*-0x1+0x44*-0xb||_0xc3b2e[0x14b1+0xc21+-0x1*0x20d1]!==-0xb*0x356+0x222*-0x1+0x26d6||(_0xc3b2e[-0x2df+0x4*-0x5fc+0x1ad1]&0x226*-0xe+-0x2142+0x3fd6)!==0x136e+-0x399+-0x3*0x547)return _0x289a24['skip'](-(0x114a+0x6*-0x41b+0x75c)),this['_readPixel'+'sFlat'](_0x289a24,_0x19ea5a,_0x15b130);const _0x9c1deb=new ArrayBuffer(_0x19ea5a*_0x15b130*(-0x1877+-0x28*0xe+-0x1aab*-0x1)),_0x5e2285=new Uint8Array(_0x9c1deb);let _0x9fab94=_0x3fc96b?-0x9c4+0x1236+-0x872:_0x19ea5a*(-0x184d+-0x1ee3*-0x1+-0x692)*(_0x15b130-(-0x7*-0x3e8+0x1058+-0x35*0xd3)),_0x5ec979,_0x2b0505,_0x1c6a29,_0xac8934,_0x263ee3,_0x323b2e;for(_0x2b0505=0x19*-0x41+0x8b6+-0xb*0x37;_0x2b0505<_0x15b130;++_0x2b0505){if(_0x2b0505&&_0x289a24['readArray'](_0xc3b2e),(_0xc3b2e[-0x2cf*-0x5+0x21*-0xa2+0x6d9]<<-0xf*-0x1f4+-0x1feb+0x2a7)+_0xc3b2e[0x44f+-0x1*-0x1511+0x195d*-0x1]!==_0x19ea5a)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0xac8934=-0x135+0x2008+0x25f*-0xd;_0xac8934<0x1*0x4d4+0x7a6+0x1d*-0x6e;++_0xac8934)for(_0x5ec979=-0xe*-0x3b+0x50*0x66+-0x2*0x118d;_0x5ec979<_0x19ea5a;)if(_0x263ee3=_0x289a24['readU8'](),_0x263ee3>0x5ef+0x4*0x34a+-0x1297){if(_0x263ee3-=-0x8c5+0x1c4a*-0x1+0x258f,_0x5ec979+_0x263ee3>_0x19ea5a)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x323b2e=_0x289a24['readU8'](),_0x1c6a29=0x2000+0xdee*-0x2+-0x424;_0x1c6a29<_0x263ee3;++_0x1c6a29)_0x5e2285[_0x9fab94+_0xac8934+(-0x4fc+-0x253f*0x1+0x2a3f)*_0x5ec979++]=_0x323b2e;}else{if(_0x263ee3===-0x11f3+-0x125*0xd+0x20d4||_0x5ec979+_0x263ee3>_0x19ea5a)return M['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x1c6a29=-0x1cf9+-0xa75*-0x1+0x1284;_0x1c6a29<_0x263ee3;++_0x1c6a29)_0x5e2285[_0x9fab94+_0xac8934+(-0x15b7+-0x394*0x1+0xb*0x24d)*_0x5ec979++]=_0x289a24['readU8']();}_0x9fab94+=_0x19ea5a*(-0x182*0x17+0x20c0+0x1f2)*(_0x3fc96b?0x175+0x2*0xc31+-0x19d6:-(-0x5*0x15c+-0x2*-0x1274+-0x1e1b));}return _0x5e2285;}['_readPixel'+'sFlat'](_0x291f72,_0x2b3f9f,_0x39c562){return _0x291f72['remainingB'+'ytes']===_0x2b3f9f*_0x39c562*(0x6*-0x269+-0x17*0x86+-0x1*-0x1a84)?new Uint8Array(_0x291f72['arraybuffe'+'r'],_0x291f72['offset']):null;}}const kg={'repeat':pt,'clamp':ue,'mirror':Tu},Ug={'nearest':Te,'linear':_t,'nearest_mip_nearest':xc,'linear_mip_nearest':wc,'nearest_mip_linear':Tc,'linear_mip_linear':ea},_k={'default':di,'rgbm':ta,'rgbe':Nh,'rgbp':Io,'swizzleGGGR':Zu},gk=function(_0x522d3a){const _0x5163ed=Ui['calcMipLev'+'elsCount'](_0x522d3a['_width'],_0x522d3a['_height']),_0x16ab03=function(_0x399ca6){return _0x399ca6 instanceof HTMLCanvasElement||_0x399ca6 instanceof HTMLImageElement||_0x399ca6 instanceof HTMLVideoElement;};if(!(_0x522d3a['_format']===Oe||_0x522d3a['_format']===Bt)||_0x522d3a['_volume']||_0x522d3a['_compresse'+'d']||_0x522d3a['_levels']['length']===-0x2019+-0x1*0x9a9+-0x29c3*-0x1||_0x522d3a['_levels']['length']===_0x5163ed||_0x16ab03(_0x522d3a['_cubemap']?_0x522d3a['_levels'][-0xb*0x30d+-0x954+-0x1*-0x2ae3][0x977*-0x1+-0xc*-0x104+-0x11*0x29]:_0x522d3a['_levels'][-0xf2e*0x2+-0x2244+-0x205*-0x20]))return;const _0x537db9=function(_0x8a544c,_0x427624,_0x12b0ce){const _0x3686f3=Math['max'](-0x2*-0xe3b+-0x17b*0xe+-0x7bb,_0x8a544c>>0x1f9*0x10+0x2025+-0x3fb4),_0x21d638=Math['max'](-0x93f+0x40e+0x7*0xbe,_0x427624>>0x252d+0x21*0x20+-0x294c),_0x2c31b3=new _0x12b0ce['constructo'+'r'](_0x3686f3*_0x21d638*(-0x20b0*0x1+0x14*-0x190+-0x1*-0x3ff4)),_0x3191b1=Math['floor'](_0x8a544c/_0x3686f3),_0x2f1a49=Math['floor'](_0x427624/_0x21d638),_0x1a8531=_0x3191b1*_0x2f1a49;for(let _0x564f2b=0x1*-0x2683+-0x409*-0x1+0x227a;_0x564f2b<_0x21d638;++_0x564f2b)for(let _0x3a854e=-0x1930+-0x4d0+0x1e00;_0x3a854e<_0x3686f3;++_0x3a854e)for(let _0x29f9d4=-0xd8*-0x2+-0x1778*-0x1+0x118*-0x17;_0x29f9d4<0x72*0x49+0xbc3*0x1+-0x2c41*0x1;++_0x29f9d4){let _0x5ca11e=-0x625+-0xc11*0x1+-0x2a*-0x6f;for(let _0xb7cbc7=-0xb3b+-0x1286+0x3*0x9eb;_0xb7cbc7<_0x2f1a49;++_0xb7cbc7)for(let _0x466dd3=-0xb*0x53+0x11*-0x1f5+0x24d6;_0x466dd3<_0x3191b1;++_0x466dd3)_0x5ca11e+=_0x12b0ce[(_0x3a854e*_0x3191b1+_0x466dd3+(_0x564f2b*_0x2f1a49+_0xb7cbc7)*_0x8a544c)*(0x3ec+0x354+-0x73c)+_0x29f9d4];_0x2c31b3[(_0x3a854e+_0x564f2b*_0x3686f3)*(-0x16e4+0x2359*0x1+0x27d*-0x5)+_0x29f9d4]=_0x5ca11e/_0x1a8531;}return _0x2c31b3;};for(let _0x3889c6=_0x522d3a['_levels']['length'];_0x3889c6<_0x5163ed;++_0x3889c6){const _0x121e18=Math['max'](-0x1ca2+0x236b+-0x7c*0xe,_0x522d3a['_width']>>_0x3889c6-(0x2640+-0x4d*0x7f+-0x3*0x4)),_0x198ac4=Math['max'](0x11*-0x46+-0x19*0x145+0x2464,_0x522d3a['_height']>>_0x3889c6-(0x1bf+-0x11d8+0x101a));if(_0x522d3a['_cubemap']){const _0x504824=[];for(let _0x23862e=0x82*-0x35+0x1*0xe3+0x1a07;_0x23862e<0x2*0xd2d+-0x20a9*0x1+0x655;++_0x23862e)_0x504824['push'](_0x537db9(_0x121e18,_0x198ac4,_0x522d3a['_levels'][_0x3889c6-(0x135a*0x2+0x14e3+0x107*-0x3a)][_0x23862e]));_0x522d3a['_levels']['push'](_0x504824);}else _0x522d3a['_levels']['push'](_0x537db9(_0x121e18,_0x198ac4,_0x522d3a['_levels'][_0x3889c6-(0x1bf5+0x22de+-0x3ed2)]));}_0x522d3a['_levelsUpd'+'ated']=_0x522d3a['_cubemap']?[[!(0xd92+0xb45*-0x1+0x24d*-0x1),!(-0x163e+-0xa51+0x208f),!(0x24b0+-0x2045+0x3*-0x179),!(0xd42+-0x1bb9*-0x1+-0x28fb),!(0x92f+-0x22a4+0x1975),!(-0xc9f*-0x2+0x117*0x6+-0x3f9*0x8)]]:[!(0x2264+-0x1dcc+-0x498)];};class Sk extends Ze{constructor(_0x7ebe5f){super(_0x7ebe5f,'texture');const _0x10d0b2=_0x7ebe5f['assets'],_0x202c61=_0x7ebe5f['graphicsDe'+'vice'];this['_device']=_0x202c61,this['_assets']=_0x10d0b2,this['imgParser']=new lk(_0x10d0b2,_0x202c61),this['parsers']={'dds':new mk(_0x10d0b2),'ktx':new dk(_0x10d0b2),'ktx2':new uk(_0x10d0b2,_0x202c61),'basis':new rk(_0x10d0b2,_0x202c61),'hdr':new pk(_0x10d0b2)};}set['crossOrigi'+'n'](_0x361a10){this['imgParser']['crossOrigi'+'n']=_0x361a10;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x23faf4){this['imgParser']['maxRetries']=_0x23faf4;for(const _0x34ed3e in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x34ed3e)&&(this['parsers'][_0x34ed3e]['maxRetries']=_0x23faf4);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x19c21f){return _0x19c21f['indexOf']('?')>=0x3*-0x14d+0xc1d*-0x2+0x1c21?_0x19c21f['split']('?')[-0x18ac+0x2*0x825+0x862]:_0x19c21f;}['_getParser'](_0x1bb637){const _0x58644f=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x1bb637))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x58644f]||this['imgParser'];}['_getTextur'+'eOptions'](_0x5a61fb){var _0x15dd1e;const _0x1570f5={'profilerHint':mr};if(_0x5a61fb){((_0x15dd1e=_0x5a61fb['name'])==null?void(-0xb83*-0x1+0x1fc3+-0x2b46):_0x15dd1e['length'])>-0x6ac+-0x1af4+0x21a0&&(_0x1570f5['name']=_0x5a61fb['name']);const _0x3f1757=_0x5a61fb['data'];_0x3f1757['hasOwnProp'+'erty']('minfilter')&&(_0x1570f5['minFilter']=Ug[_0x3f1757['minfilter']]),_0x3f1757['hasOwnProp'+'erty']('magfilter')&&(_0x1570f5['magFilter']=Ug[_0x3f1757['magfilter']]),_0x3f1757['hasOwnProp'+'erty']('addressu')&&(_0x1570f5['addressU']=kg[_0x3f1757['addressu']]),_0x3f1757['hasOwnProp'+'erty']('addressv')&&(_0x1570f5['addressV']=kg[_0x3f1757['addressv']]),_0x3f1757['hasOwnProp'+'erty']('mipmaps')&&(_0x1570f5['mipmaps']=_0x3f1757['mipmaps']),_0x3f1757['hasOwnProp'+'erty']('anisotropy')&&(_0x1570f5['anisotropy']=_0x3f1757['anisotropy']),_0x3f1757['hasOwnProp'+'erty']('flipY')&&(_0x1570f5['flipY']=!!_0x3f1757['flipY']),_0x3f1757['hasOwnProp'+'erty']('srgb')&&(_0x1570f5['srgb']=!!_0x3f1757['srgb']),_0x1570f5['type']=di,_0x3f1757['hasOwnProp'+'erty']('type')?_0x1570f5['type']=_k[_0x3f1757['type']]:_0x3f1757['hasOwnProp'+'erty']('rgbm')&&_0x3f1757['rgbm']?_0x1570f5['type']=ta:_0x5a61fb['file']&&(_0x5a61fb['file']['opt']&-0x1dd+-0x15db+0x5f*0x40)!==0x1e76+0xab1+-0x2927*0x1&&(_0x1570f5['type']=Zu);}return _0x1570f5;}['load'](_0x38dfb4,_0x37a6b6,_0x2153b1){typeof _0x38dfb4=='string'&&(_0x38dfb4={'load':_0x38dfb4,'original':_0x38dfb4}),this['_getParser'](_0x38dfb4['original'])['load'](_0x38dfb4,_0x37a6b6,_0x2153b1);}['open'](_0x21994d,_0x111201,_0x3652f3){if(!_0x21994d)return;const _0x570278=this['_getTextur'+'eOptions'](_0x3652f3);let _0xdbe237=this['_getParser'](_0x21994d)['open'](_0x21994d,_0x111201,this['_device'],_0x570278);return _0xdbe237===null?_0xdbe237=new _e(this['_device'],{'width':0x4,'height':0x4,'format':ur}):(gk(_0xdbe237),_0x111201['unswizzled'+'GGGR']&&(_0x3652f3['file']['variants']['basis']['opt']&=-(0x10a6+0x39a+-0x1437))),_0xdbe237;}['patch'](_0x5b7748,_0x1b9e1c){const _0x483467=_0x5b7748['resource'];if(!_0x483467)return;const _0x6b677b=this['_getTextur'+'eOptions'](_0x5b7748);for(const _0x80d99b of Object['keys'](_0x6b677b))_0x483467[_0x80d99b]=_0x6b677b[_0x80d99b];}}const yk='inline',vk='immersive-'+'vr',Eo='immersive-'+'ar',Bg='viewer',xk='left',Tk='cpu-optimi'+'zed',Bv='gpu-optimi'+'zed',zv='luminance-'+'alpha',Vv='unsigned-s'+'hort',Gv='float32';class wk{constructor(_0x250876){h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x250876;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x329320){!this['_supported']||this['_manager']['active']||(this['_root']=_0x329320);}get['root'](){return this['_root'];}}const lh=[],zg=[];class mu extends pe{constructor(_0x4679da,_0x16e802,_0x3364e0,_0x6b84f1=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x4679da,this['_xrHitTest'+'Source']=_0x16e802,this['_transient']=_0x3364e0,this['_inputSour'+'ce']=_0x6b84f1);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x287bd6=this['manager']['hitTest']['sources'],_0xbb230f=_0x287bd6['indexOf'](this);_0xbb230f!==-(-0xde7*-0x2+-0x1668+-0x565*0x1)&&_0x287bd6['splice'](_0xbb230f,-0xdf6*-0x2+0x2572+-0x415d),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x2d4e85){if(this['_transient']){const _0x2fcf54=_0x2d4e85['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x423830=0xf6c*0x2+-0x1784+-0xe*0x86;_0x423830<_0x2fcf54['length'];_0x423830++){const _0x242c34=_0x2fcf54[_0x423830];if(!_0x242c34['results']['length'])continue;let _0x4c4cfd;_0x242c34['inputSourc'+'e']&&(_0x4c4cfd=this['manager']['input']['_getByInpu'+'tSource'](_0x242c34['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x242c34['results'],_0x4c4cfd);}}else{const _0x160d48=_0x2d4e85['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x160d48['length'])return;this['updateHitR'+'esults'](_0x160d48);}}['updateHitR'+'esults'](_0x392e27,_0x1da157){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x1da157)return;const _0x1e91f4=lh['pop']()??new I();_0x1da157?_0x1e91f4['copy'](_0x1da157['getOrigin']()):_0x1e91f4['copy'](this['manager']['camera']['getPositio'+'n']());let _0x2649b5=(-0x157*0x1+0x1d11+0x2f*-0x97)/(-0x3b*-0x1c+-0x7a3*-0x5+-0x27*0x125),_0x158d32=null;const _0x283e0a=lh['pop']()??new I(),_0xca4724=zg['pop']()??new le();for(let _0x2e88b3=-0x42*-0x41+0x19dd+-0x1*0x2a9f;_0x2e88b3<_0x392e27['length'];_0x2e88b3++){const _0x45c2e9=_0x392e27[_0x2e88b3]['getPose'](this['manager']['_reference'+'Space']),_0x48d79d=_0x1e91f4['distance'](_0x45c2e9['transform']['position']);_0x48d79d>=_0x2649b5||(_0x2649b5=_0x48d79d,_0x158d32=_0x392e27[_0x2e88b3],_0x283e0a['copy'](_0x45c2e9['transform']['position']),_0xca4724['copy'](_0x45c2e9['transform']['orientatio'+'n']));}this['fire']('result',_0x283e0a,_0xca4724,_0x1da157||this['_inputSour'+'ce'],_0x158d32),this['manager']['hitTest']['fire']('result',this,_0x283e0a,_0xca4724,_0x1da157||this['_inputSour'+'ce'],_0x158d32),lh['push'](_0x1e91f4),lh['push'](_0x283e0a),zg['push'](_0xca4724);}}h(mu,'EVENT_REMO'+'VE','remove'),h(mu,'EVENT_RESU'+'LT','result');class Or extends pe{constructor(_0x58b6ff){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(0x1*0xcc9+0x1c70+-0x2938)),h(this,'_checkingA'+'vailabilit'+'y',!(0x1079+-0xbcc+-0x4ac)),h(this,'sources',[]),(this['manager']=_0x58b6ff,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x4c662a=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(0x19b9+-0x1ced+-0x335*-0x1);if(!_0x4c662a)return;this['_available']=_0x4c662a,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(-0x65*0x3+-0x11eb+-0x1e9*-0xa),this['manager']['session']['requestRef'+'erenceSpac'+'e'](Bg)['then'](_0x272689=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x272689})['then'](_0x2092bb=>{_0x2092bb['cancel'](),this['manager']['active']&&(this['_available']=!(-0x766*0x2+0xc00*0x1+0x2cc),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(-0x49d+0xe*-0x265+0x4*0x989);for(let _0x583fe7=0x60e*0x6+0xb0f+-0x6c5*0x7;_0x583fe7<this['sources']['length'];_0x583fe7++)this['sources'][_0x583fe7]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x101a23={}){var _0xc6580a,_0x1cf137;if(!this['_supported']){(_0xc6580a=_0x101a23['callback'])==null||_0xc6580a['call'](_0x101a23,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x1cf137=_0x101a23['callback'])==null||_0x1cf137['call'](_0x101a23,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x101a23['profile']&&!_0x101a23['spaceType']&&(_0x101a23['spaceType']=Bg);let _0xa9b26b;const _0x4d3578=_0x101a23['offsetRay'];if(_0x4d3578){const _0x23c21a=new DOMPoint(_0x4d3578['origin']['x'],_0x4d3578['origin']['y'],_0x4d3578['origin']['z'],0xc07+0x35*0x21+-0x649*0x3),_0x49f012=new DOMPoint(_0x4d3578['direction']['x'],_0x4d3578['direction']['y'],_0x4d3578['direction']['z'],0x17e5*-0x1+0x17e5*0x1+0x0);_0xa9b26b=new XRRay(_0x23c21a,_0x49f012);}const _0x4d6203=_0x101a23['callback'];_0x101a23['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x101a23['spaceType'])['then'](_0x2907c2=>{if(!this['manager']['session']){const _0x299876=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x4d6203&&_0x4d6203(_0x299876),this['fire']('error',_0x299876);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x2907c2,'entityTypes':_0x101a23['entityType'+'s']||void(0x1c04+-0x25c6+0x9c2),'offsetRay':_0xa9b26b})['then'](_0x5ad1f6=>{this['_onHitTest'+'Source'](_0x5ad1f6,!(-0x16a2+0x179+0x25a*0x9),_0x101a23['inputSourc'+'e'],_0x4d6203);})['catch'](_0x3300d2=>{_0x4d6203&&_0x4d6203(_0x3300d2),this['fire']('error',_0x3300d2);});})['catch'](_0x47a6bb=>{_0x4d6203&&_0x4d6203(_0x47a6bb),this['fire']('error',_0x47a6bb);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x101a23['profile'],'entityTypes':_0x101a23['entityType'+'s']||void(0x1fcb+-0x11a*-0x1d+-0x3fbd),'offsetRay':_0xa9b26b})['then'](_0x5be8d4=>{this['_onHitTest'+'Source'](_0x5be8d4,!(-0x15*-0xbc+-0x21f4+0x1288),_0x101a23['inputSourc'+'e'],_0x4d6203);})['catch'](_0x1678a4=>{_0x4d6203&&_0x4d6203(_0x1678a4),this['fire']('error',_0x1678a4);});}['_onHitTest'+'Source'](_0x79a9ce,_0x2b3de1,_0x109d40,_0x3b558b){if(!this['manager']['session']){_0x79a9ce['cancel']();const _0x1429f2=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x3b558b&&_0x3b558b(_0x1429f2),this['fire']('error',_0x1429f2);return;}const _0x3494c3=new mu(this['manager'],_0x79a9ce,_0x2b3de1,_0x109d40??null);this['sources']['push'](_0x3494c3),_0x3b558b&&_0x3b558b(null,_0x3494c3),this['fire']('add',_0x3494c3);}['update'](_0x596866){if(this['_available']){for(let _0x51bb05=-0x11*0x49+0x1*0x1c3a+-0x1761;_0x51bb05<this['sources']['length'];_0x51bb05++)this['sources'][_0x51bb05]['update'](_0x596866);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(Or,'EVENT_AVAI'+'LABLE','available'),h(Or,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Or,'EVENT_ADD','add'),h(Or,'EVENT_REMO'+'VE','remove'),h(Or,'EVENT_RESU'+'LT','result'),h(Or,'EVENT_ERRO'+'R','error');class pu extends pe{constructor(_0x64a5e4,_0x1d684b){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',0x2*-0x12d9+0x2cc*-0xd+-0x4a0e*-0x1),h(this,'_trackable',!(0x541+-0x492+0x3a*-0x3)),h(this,'_tracking',!(0xd10+-0x1660+0x951)),h(this,'_emulated',!(0x16af*0x1+-0x1faf+-0x5*-0x1cd)),h(this,'_pose',null),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_image']=_0x64a5e4,this['_width']=_0x1d684b);}get['image'](){return this['_image'];}set['width'](_0x4679ef){this['_width']=_0x4679ef;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x402389=>(this['_bitmap']=_0x402389,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(pu,'EVENT_TRAC'+'KED','tracked'),h(pu,'EVENT_UNTR'+'ACKED','untracked');class Hv extends pe{constructor(_0x2de33f){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(-0x1b66+-0x2142+-0x3ca9*-0x1)),h(this,'_images',[]),(this['_manager']=_0x2de33f,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x589507,_0x10e104){if(!this['_supported']||this['_manager']['active'])return null;const _0x1a4500=new pu(_0x589507,_0x10e104);return this['_images']['push'](_0x1a4500),_0x1a4500;}['remove'](_0x1b46dc){if(this['_manager']['active'])return;const _0x1267f9=this['_images']['indexOf'](_0x1b46dc);_0x1267f9!==-(-0x54d*0x6+0x219f+0x3a*-0x8)&&(_0x1b46dc['destroy'](),this['_images']['splice'](_0x1267f9,0x25f3+-0x1*-0x16d+-0x275f*0x1));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x1d5ab6=>{this['_available']=!(-0x52f+-0x19a6+0x1ed5);for(let _0x30400c=-0x5d1+-0x4*0x18d+0xc05;_0x30400c<_0x1d5ab6['length'];_0x30400c++)this['_images'][_0x30400c]['_trackable']=_0x1d5ab6[_0x30400c]==='trackable';})['catch'](_0x5269b1=>{this['_available']=!(0x437+-0x88d+0x457),this['fire']('error',_0x5269b1);});}['_onSession'+'End'](){this['_available']=!(0x20b4+0xd18*0x2+-0x68b*0x9);for(let _0xf40651=-0x1*0xffb+0x15a1+-0x5a6;_0xf40651<this['_images']['length'];_0xf40651++){const _0x1d6d40=this['_images'][_0xf40651];_0x1d6d40['_pose']=null,_0x1d6d40['_measuredW'+'idth']=-0x181c+-0xac6+0x22e2,_0x1d6d40['_tracking']&&(_0x1d6d40['_tracking']=!(0x24a*0x3+0x1337+-0x1a14),_0x1d6d40['fire']('untracked'));}}['prepareIma'+'ges'](_0x351e4b){this['_images']['length']?Promise['all'](this['_images']['map'](_0x3ba3a2=>_0x3ba3a2['prepare']()))['then'](_0x11c67a=>{_0x351e4b(null,_0x11c67a);})['catch'](_0x544eeb=>{_0x351e4b(_0x544eeb,null);}):_0x351e4b(null,null);}['update'](_0x4993c1){if(!this['_available'])return;const _0x207fe0=_0x4993c1['getImageTr'+'ackingResu'+'lts'](),_0x31c2f3={};for(let _0x47260c=-0x2704+0x74f*-0x5+0x4b8f;_0x47260c<_0x207fe0['length'];_0x47260c++){_0x31c2f3[_0x207fe0[_0x47260c]['index']]=_0x207fe0[_0x47260c];const _0x2b6492=this['_images'][_0x207fe0[_0x47260c]['index']];_0x2b6492['_emulated']=_0x207fe0[_0x47260c]['trackingSt'+'ate']==='emulated',_0x2b6492['_measuredW'+'idth']=_0x207fe0[_0x47260c]['measuredWi'+'dthInMeter'+'s'],_0x2b6492['_pose']=_0x4993c1['getPose'](_0x207fe0[_0x47260c]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x589280=-0xe*-0x11e+0x11c1*-0x1+0x1*0x21d;_0x589280<this['_images']['length'];_0x589280++)this['_images'][_0x589280]['_tracking']&&!_0x31c2f3[_0x589280]?(this['_images'][_0x589280]['_tracking']=!(-0x901*0x1+-0x2547+-0x29*-0x121),this['_images'][_0x589280]['fire']('untracked')):!this['_images'][_0x589280]['_tracking']&&_0x31c2f3[_0x589280]&&(this['_images'][_0x589280]['_tracking']=!(-0x25c7+-0x271+0x2838),this['_images'][_0x589280]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(Hv,'EVENT_ERRO'+'R','error');class Ek{constructor(_0x581ece,_0x2b1de1){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x581ece,this['_hand']=_0x2b1de1,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const Vg=Me['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],Wv={};for(let c=0x1f07+-0x268b+0x784;c<Vg['length'];c++)Wv[Vg[c]]=!(-0x240+0x103*-0x4+0x64c);class Gg{constructor(_0x5d4883,_0x5b3eff,_0x1b627e,_0xee04f1=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new I()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(-0x10fa+-0x124b*-0x1+-0x151)),(this['_index']=_0x5d4883,this['_id']=_0x5b3eff,this['_hand']=_0x1b627e,this['_finger']=_0xee04f1,this['_wrist']=_0x5b3eff==='wrist',this['_tip']=this['_finger']&&!!Wv[_0x5b3eff]);}['update'](_0x1b6896){this['_dirtyLoca'+'l']=!(-0x17ad+-0x6*0x33c+0x2b15),this['_radius']=_0x1b6896['radius'],this['_localPosi'+'tion']['copy'](_0x1b6896['transform']['position']),this['_localRota'+'tion']['copy'](_0x1b6896['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x19b*0xd+0xd8f+-0x226d),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],I['ONE']));const _0x48ce75=this['_hand']['_manager']['camera']['parent'];_0x48ce75?this['_worldTran'+'sform']['mul2'](_0x48ce75['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||-0x812+-0x2129+0x83f*0x5+0.005;}}let Ah=[];const Mr=new I(),hh=new I(),Hg=new I();Me['browser']&&window['XRHand']&&(Ah=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class _u extends pe{constructor(_0x3483eb){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(-0x2e*0xc7+-0x6*0x9d+-0x1*-0x2771)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x433c72=_0x3483eb['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x3483eb['_manager'],this['_inputSour'+'ce']=_0x3483eb,_0x433c72['get']('wrist')){const _0x5b2cdb=new Gg(0x3ab+-0x4*0x2dd+-0x7c9*-0x1,'wrist',this,null);this['_wrist']=_0x5b2cdb,this['_joints']['push'](_0x5b2cdb),this['_jointsByI'+'d']['wrist']=_0x5b2cdb;}for(let _0xeaa90e=0x246*-0x3+-0x266c+0x1*0x2d3e;_0xeaa90e<Ah['length'];_0xeaa90e++){const _0x2e82f3=new Ek(_0xeaa90e,this);for(let _0x1f6e6c=0x56e+-0x2*0x3f5+0x27c;_0x1f6e6c<Ah[_0xeaa90e]['length'];_0x1f6e6c++){const _0x660437=Ah[_0xeaa90e][_0x1f6e6c];if(!_0x433c72['get'](_0x660437))continue;const _0x44ef6f=new Gg(_0x1f6e6c,_0x660437,this,_0x2e82f3);this['_joints']['push'](_0x44ef6f),this['_jointsByI'+'d'][_0x660437]=_0x44ef6f,_0x44ef6f['tip']&&(this['_tips']['push'](_0x44ef6f),_0x2e82f3['_tip']=_0x44ef6f),_0x2e82f3['_joints']['push'](_0x44ef6f);}}}['update'](_0x348457){const _0x294fcd=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0xa8f168=-0xc64+0x2433*0x1+-0x17cf;_0xa8f168<this['_joints']['length'];_0xa8f168++){const _0x113606=this['_joints'][_0xa8f168],_0x4c5e26=_0x294fcd['hand']['get'](_0x113606['_id']);if(_0x4c5e26){let _0x190e7b;if(_0x348457['session']['visibility'+'State']!=='hidden'&&(_0x190e7b=_0x348457['getJointPo'+'se'](_0x4c5e26,this['_manager']['_reference'+'Space'])),_0x190e7b)_0x113606['update'](_0x190e7b),_0x113606['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0x1*-0x1c79+0x3cb*0x1+-0x2044),this['fire']('tracking'));else{if(_0x113606['wrist']){this['_tracking']&&(this['_tracking']=!(-0x247*0x7+0x5ba*-0x5+-0x6*-0x76e),this['fire']('trackinglo'+'st'));break;}}}}const _0x2a67ab=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x2b936d=this['_jointsByI'+'d']['thumb-tip'],_0x5e3f96=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x3ac1d2=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x17fe81=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x45d61e=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x2a67ab&&_0x2b936d&&_0x5e3f96&&_0x3ac1d2&&_0x17fe81&&_0x45d61e){this['_inputSour'+'ce']['_dirtyRay']=!(-0x198b+-0x16b8+0x3043),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x2b936d['_localPosi'+'tion'],_0x3ac1d2['_localPosi'+'tion'],0xb40+-0xa75+-0xcb+0.5);let _0x2bed74=_0x2a67ab,_0x75a109=_0x45d61e;if(this['_inputSour'+'ce']['handedness']===xk){const _0x56a6cb=_0x2bed74;_0x2bed74=_0x75a109,_0x75a109=_0x56a6cb;}Mr['sub2'](_0x2bed74['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),hh['sub2'](_0x75a109['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Hg['cross'](Mr,hh)['normalize'](),Mr['lerp'](_0x5e3f96['_localPosi'+'tion'],_0x17fe81['_localPosi'+'tion'],-0x1339+0x5b6+0xd83+0.5),Mr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](Hg,Mr,-0x1740+0x132b+-0x5f*-0xb+0.5)['normalize']();}this['_fingerIsC'+'losed'](-0xa1*0x2f+-0x1*-0x1f4b+-0x1bb)&&this['_fingerIsC'+'losed'](-0x5*0x242+-0x24b4+0x300*0x10)&&this['_fingerIsC'+'losed'](-0x195b+-0x12d*-0x19+-0x407)&&this['_fingerIsC'+'losed'](0x247d+0x3ef+-0x2868)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x1456*0x1+-0x6df*0x1+-0x3*0x47d),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x1d0b+-0xa00+0x130a*-0x1),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x47e9df){const _0x54788e=this['_fingers'][_0x47e9df];return Mr['sub2'](_0x54788e['joints'][-0x23ee+0x2111+0x2dd]['_localPosi'+'tion'],_0x54788e['joints'][0x172+-0x1a21+-0x1*-0x18b0]['_localPosi'+'tion'])['normalize'](),hh['sub2'](_0x54788e['joints'][-0x1501+0x1*0x1eff+-0x1*0x9fc]['_localPosi'+'tion'],_0x54788e['joints'][-0x1d59+-0x1*-0x1288+0xad4]['_localPosi'+'tion'])['normalize'](),Mr['dot'](hh)<-(0x45*-0x8b+0x1*0x1a09+-0xb*-0x10a+0.8);}['getJointBy'+'Id'](_0x2f3712){return this['_jointsByI'+'d'][_0x2f3712]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(_u,'EVENT_TRAC'+'KING','tracking'),h(_u,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const Wg=new I(),$g=new le();let Ak=0x581+-0x11a7*-0x2+-0x28cf;class Ls extends pe{constructor(_0x17de24,_0x48f80){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new cf()),h(this,'_rayLocal',new cf()),h(this,'_grip',!(0x9*0x2d3+-0x260a+0xca0)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x21e6+-0x9e*0x7+-0x43*0x71)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x30a+-0xe70+0xb66)),h(this,'_dirtyRay',!(0x3e*0x5+0x18bb+-0x19f0)),h(this,'_selecting',!(-0x7*0x3df+-0xb81+-0x269b*-0x1)),h(this,'_squeezing',!(-0x1*-0x1df+0x4*0xd3+-0x52a)),h(this,'_elementIn'+'put',!(-0x18*0xce+0x2535+-0x1fd*0x9)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++Ak,this['_manager']=_0x17de24,this['_xrInputSo'+'urce']=_0x48f80,_0x48f80['hand']&&(this['_hand']=new _u(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x3f859d){this['_elementIn'+'put']!==_0x3f859d&&(this['_elementIn'+'put']=_0x3f859d,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x56475c){if(this['_hand'])this['_hand']['update'](_0x56475c);else{const _0x1a1b22=this['_xrInputSo'+'urce']['gripSpace'];if(_0x1a1b22){const _0x4ed9c2=_0x56475c['getPose'](_0x1a1b22,this['_manager']['_reference'+'Space']);if(_0x4ed9c2){this['_grip']||(this['_grip']=!(0x1*0x24cb+-0x216c+-0x35f),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new I(),this['_localPosi'+'tion']=new I(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new I());const _0x452b31=de(),_0x5de6ae=(_0x452b31-this['_velocitie'+'sTimestamp'])/(-0x1430+0x4fd+-0x43*-0x49);this['_velocitie'+'sTimestamp']=_0x452b31,this['_dirtyLoca'+'l']=!(0xdc4*-0x1+-0x1eb9+0x2c7d*0x1),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x4ed9c2['transform']['position']),this['_localRota'+'tion']['copy'](_0x4ed9c2['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x2698+-0x2*-0xe8f+0x97a),this['_manager']['input']['velocities'+'Supported']&&_0x4ed9c2['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x4ed9c2['linearVelo'+'city']):_0x5de6ae>-0x1565+-0x7c4+-0x1*-0x1d29&&(Wg['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x5de6ae),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],Wg,0x24b9+-0x1a15+0xc*-0xe3+0.15));}else this['_velocitie'+'sAvailable']=!(-0x2*-0xceb+-0x1*-0x223f+0xf05*-0x4);}const _0x58155a=_0x56475c['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x58155a&&(this['_dirtyRay']=!(-0x10f2+0x179e+-0x6ac),this['_rayLocal']['origin']['copy'](_0x58155a['transform']['position']),this['_rayLocal']['direction']['set'](0x17a*-0x19+0x1*0x511+0x1fd9*0x1,0x919+-0x16c1+0x8*0x1b5,-(0x1552+-0xcd3+-0x87e)),$g['copy'](_0x58155a['transform']['orientatio'+'n']),$g['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x646+0xa20+0x1065*-0x1),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],I['ONE']));const _0x48caff=this['_manager']['camera']['parent'];_0x48caff?this['_worldTran'+'sform']['mul2'](_0x48caff['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x3ab05a=this['_dirtyRay'];if(this['_dirtyRay']=!(0x24ba+0x16d9+-0x1*0x3b92),this['_manager']['camera']['parent']){const _0x52627e=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x52627e['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x52627e),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x3ab05a&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x53a6ef={}){_0x53a6ef['inputSourc'+'e']=this,_0x53a6ef['profile']=this['_xrInputSo'+'urce']['profiles'][0x278+-0x11de*0x1+-0x92*-0x1b];const _0x47678b=_0x53a6ef['callback'];_0x53a6ef['callback']=(_0x5f57e6,_0x1ccd2c)=>{_0x1ccd2c&&this['onHitTestS'+'ourceAdd'](_0x1ccd2c),_0x47678b&&_0x47678b(_0x5f57e6,_0x1ccd2c);},this['_manager']['hitTest']['start'](_0x53a6ef);}['onHitTestS'+'ourceAdd'](_0x447f35){this['_hitTestSo'+'urces']['push'](_0x447f35),this['fire']('hittest:ad'+'d',_0x447f35),_0x447f35['on']('result',(_0x54be29,_0x32d5b4,_0x4e76dc,_0x45339c)=>{_0x4e76dc===this&&this['fire']('hittest:re'+'sult',_0x447f35,_0x54be29,_0x32d5b4,_0x45339c);}),_0x447f35['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x447f35),this['fire']('hittest:re'+'move',_0x447f35);});}['onHitTestS'+'ourceRemov'+'e'](_0x2323cf){const _0x1f82f6=this['_hitTestSo'+'urces']['indexOf'](_0x2323cf);_0x1f82f6!==-(-0x10ea+-0xdd3+0x313*0xa)&&this['_hitTestSo'+'urces']['splice'](_0x1f82f6,-0x4*0x424+-0xa13*0x1+-0x136*-0x16);}}h(Ls,'EVENT_REMO'+'VE','remove'),h(Ls,'EVENT_SELE'+'CT','select'),h(Ls,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Ls,'EVENT_SELE'+'CTEND','selectend'),h(Ls,'EVENT_SQUE'+'EZE','squeeze'),h(Ls,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Ls,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Ls,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Ls,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Ls,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Ai extends pe{constructor(_0xf2405){var _0x4abb2e,_0x1cdcf0;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(0xa*0x342+0x1227*-0x1+-0x8e*0x1a)),(this['manager']=_0xf2405,this['velocities'+'Supported']=!!(Me['browser']&&((_0x1cdcf0=(_0x4abb2e=window['XRPose'])==null?void(0x3f*-0x15+-0x83*-0x35+-0x15f4):_0x4abb2e['prototype'])!=null&&_0x1cdcf0['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x247b50=>{this['_onInputSo'+'urcesChang'+'e'](_0x247b50);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x5581a4=this['manager']['session'];_0x5581a4['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x5581a4['addEventLi'+'stener']('select',_0x5ead8a=>{const _0xff0272=this['_getByInpu'+'tSource'](_0x5ead8a['inputSourc'+'e']);_0xff0272['update'](_0x5ead8a['frame']),_0xff0272['fire']('select',_0x5ead8a),this['fire']('select',_0xff0272,_0x5ead8a);}),_0x5581a4['addEventLi'+'stener']('selectstar'+'t',_0xf64ec8=>{const _0x4af6ca=this['_getByInpu'+'tSource'](_0xf64ec8['inputSourc'+'e']);_0x4af6ca['_selecting']||(_0x4af6ca['update'](_0xf64ec8['frame']),_0x4af6ca['_selecting']=!(-0xaca*0x1+0x2f*0x54+-0x4a2*0x1),_0x4af6ca['fire']('selectstar'+'t',_0xf64ec8),this['fire']('selectstar'+'t',_0x4af6ca,_0xf64ec8));}),_0x5581a4['addEventLi'+'stener']('selectend',_0x6617b0=>{const _0x184a61=this['_getByInpu'+'tSource'](_0x6617b0['inputSourc'+'e']);_0x184a61['update'](_0x6617b0['frame']),_0x184a61['_selecting']=!(0xce*-0x2a+0x1baa+0x623),_0x184a61['fire']('selectend',_0x6617b0),this['fire']('selectend',_0x184a61,_0x6617b0);}),_0x5581a4['addEventLi'+'stener']('squeeze',_0x3a22a5=>{const _0x50df46=this['_getByInpu'+'tSource'](_0x3a22a5['inputSourc'+'e']);_0x50df46['update'](_0x3a22a5['frame']),_0x50df46['fire']('squeeze',_0x3a22a5),this['fire']('squeeze',_0x50df46,_0x3a22a5);}),_0x5581a4['addEventLi'+'stener']('squeezesta'+'rt',_0x443f88=>{const _0x1b9ca2=this['_getByInpu'+'tSource'](_0x443f88['inputSourc'+'e']);_0x1b9ca2['update'](_0x443f88['frame']),_0x1b9ca2['_squeezing']=!(0xf2a+0x1bfa+-0xfb*0x2c),_0x1b9ca2['fire']('squeezesta'+'rt',_0x443f88),this['fire']('squeezesta'+'rt',_0x1b9ca2,_0x443f88);}),_0x5581a4['addEventLi'+'stener']('squeezeend',_0x1eda19=>{const _0x41563a=this['_getByInpu'+'tSource'](_0x1eda19['inputSourc'+'e']);_0x41563a['update'](_0x1eda19['frame']),_0x41563a['_squeezing']=!(-0x181f+-0xd1e+0x253e),_0x41563a['fire']('squeezeend',_0x1eda19),this['fire']('squeezeend',_0x41563a,_0x1eda19);});const _0x4803a0=_0x5581a4['inputSourc'+'es'];for(let _0x2d4b20=-0x7*-0x254+0xb3*-0x2f+0x1091;_0x2d4b20<_0x4803a0['length'];_0x2d4b20++)this['_addInputS'+'ource'](_0x4803a0[_0x2d4b20]);}['_onSession'+'End'](){let _0x3e81bb=this['_inputSour'+'ces']['length'];for(;_0x3e81bb--;){const _0x1bea55=this['_inputSour'+'ces'][_0x3e81bb];this['_inputSour'+'ces']['splice'](_0x3e81bb,0x16*0x37+-0x116d+-0xc*-0x10f),_0x1bea55['fire']('remove'),this['fire']('remove',_0x1bea55);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x2bf893){for(let _0x74657a=-0x22e6+-0x17f5*-0x1+-0xaf1*-0x1;_0x74657a<_0x2bf893['removed']['length'];_0x74657a++)this['_removeInp'+'utSource'](_0x2bf893['removed'][_0x74657a]);for(let _0x43e6aa=-0x2*0xc4+-0x1*-0x1f39+0xb*-0x2b3;_0x43e6aa<_0x2bf893['added']['length'];_0x43e6aa++)this['_addInputS'+'ource'](_0x2bf893['added'][_0x43e6aa]);}['_getByInpu'+'tSource'](_0x20471a){for(let _0x5c3cc6=-0x1*0x757+-0xf3*-0xb+-0x31a;_0x5c3cc6<this['_inputSour'+'ces']['length'];_0x5c3cc6++)if(this['_inputSour'+'ces'][_0x5c3cc6]['inputSourc'+'e']===_0x20471a)return this['_inputSour'+'ces'][_0x5c3cc6];return null;}['_removeApp'+'Entity'](_0x4d7fea){const _0x1d9e5b=this['manager']['app']['root']['findByName']('Armature_'+_0x4d7fea);_0x1d9e5b&&this['manager']['app']['root']['removeChil'+'d'](_0x1d9e5b);}['_addInputS'+'ource'](_0x507e4e){if(this['_removeApp'+'Entity'](_0x507e4e['handedness']),this['_getByInpu'+'tSource'](_0x507e4e))return;const _0xedb4b1=new Ls(this['manager'],_0x507e4e);this['_inputSour'+'ces']['push'](_0xedb4b1),this['fire']('add',_0xedb4b1);}['_removeInp'+'utSource'](_0x524132){for(let _0x14cd7c=0x1*-0xfef+0x9ef+-0x600*-0x1;_0x14cd7c<this['_inputSour'+'ces']['length'];_0x14cd7c++){if(this['_inputSour'+'ces'][_0x14cd7c]['inputSourc'+'e']!==_0x524132)continue;const _0x562a5a=this['_inputSour'+'ces'][_0x14cd7c];this['_inputSour'+'ces']['splice'](_0x14cd7c,-0x343*-0x4+0x110c+-0x1e17);let _0xd5c3be=_0x562a5a['hitTestSou'+'rces']['length'];for(;_0xd5c3be--;)_0x562a5a['hitTestSou'+'rces'][_0xd5c3be]['remove']();this['_removeApp'+'Entity'](_0x562a5a['handedness']),_0x562a5a['fire']('remove'),this['fire']('remove',_0x562a5a);return;}}['update'](_0x21aaff){for(let _0x2687fd=-0x2e1*0x1+-0x160e+-0x1eb*-0xd;_0x2687fd<this['_inputSour'+'ces']['length'];_0x2687fd++)this['_inputSour'+'ces'][_0x2687fd]['update'](_0x21aaff);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Ai,'EVENT_ADD','add'),h(Ai,'EVENT_REMO'+'VE','remove'),h(Ai,'EVENT_SELE'+'CT','select'),h(Ai,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Ai,'EVENT_SELE'+'CTEND','selectend'),h(Ai,'EVENT_SQUE'+'EZE','squeeze'),h(Ai,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Ai,'EVENT_SQUE'+'EZEEND','squeezeend');const za=new I(),Xg=new I(),tf=new te(),qg=new te();class gu extends pe{constructor(_0x51c450){super(),h(this,'_manager'),h(this,'_supported',!(-0x8*-0x35f+-0x1871+0x11*-0x26)),h(this,'_available',!(0x60d+-0xd*0x292+0x1b5e)),h(this,'_lightProb'+'eRequested',!(-0x1*-0x7c9+-0x2*-0xb47+-0x1e56)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0x1ea0+0x6fa+0x17a6),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(0x175*-0x13+-0x17c3+0x35*0xf9)),(this['_manager']=_0x51c450,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(0x1*0x1241+0xa9e+-0x1cdf*0x1));}['_onSession'+'End'](){this['_supported']=!(-0x1467+0xc1*0x2b+0xc03*-0x1),this['_available']=!(-0xf27+0x2*0x8+0xf18),this['_lightProb'+'eRequested']=!(0x1d80+-0xff3+-0x11*0xcc),this['_lightProb'+'e']=null;}['start'](){let _0xdee2a0;if(this['_manager']['session']||(_0xdee2a0=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0xdee2a0&&this['_manager']['type']!==Eo&&(_0xdee2a0=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0xdee2a0&&!this['_supported']&&(_0xdee2a0=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0xdee2a0&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0xdee2a0=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0xdee2a0){this['fire']('error',_0xdee2a0);return;}this['_lightProb'+'eRequested']=!(0x1eb3+-0x1*-0x15cd+0x5*-0xa80),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x5769c3=>{const _0x417cc9=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(-0x85*-0x6+-0x140e+0x10f1*0x1),this['_manager']['active']?_0x417cc9&&(this['_lightProb'+'e']=_0x5769c3):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x3974d1=>{this['_lightProb'+'eRequested']=!(0xae9+-0x1c9e+-0x1*-0x11b6),this['fire']('error',_0x3974d1);});}['end'](){this['_lightProb'+'eRequested']=!(-0x2397*-0x1+0x1*0x89e+-0x1ec*0x17),this['_lightProb'+'e']=null,this['_available']=!(0x257a+0x177c+-0x5*0xc31);}['update'](_0x5cc340){if(!this['_lightProb'+'e'])return;const _0x4ea657=_0x5cc340['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x4ea657)return;this['_available']||(this['_available']=!(0x7*0x3b+-0x9*-0x153+0x8*-0x1b1),this['fire']('available'));const _0x4b84ad=_0x4ea657['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](0x1988+0x9*-0x7a+-0x1*0x153d,Math['max'](_0x4b84ad['x'],Math['max'](_0x4b84ad['y'],_0x4b84ad['z']))),za['copy'](_0x4b84ad)['mulScalar']((-0x1*-0x24a3+0x31*-0xbf+-0x13*0x1)/this['_intensity']),this['_color']['set'](za['x'],za['y'],za['z']),za['set'](0x2*0x92b+0x3c1*0x1+0x1*-0x1617,0x1*-0x157b+-0x15c1+0x2b3c,-0x3*0x42d+0xe6+0xba1),Xg['copy'](_0x4ea657['primaryLig'+'htDirectio'+'n']),tf['setLookAt'](Xg,za,I['UP']),qg['setFromAxi'+'sAngle'](I['RIGHT'],0x34*0x53+-0x8f*0x6+0x1*-0xd28),tf['mul'](qg),this['_rotation']['setFromMat'+'4'](tf),this['_spherical'+'Harmonics']['set'](_0x4ea657['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(gu,'EVENT_AVAI'+'LABLE','available'),h(gu,'EVENT_ERRO'+'R','error');let bk=-0x216e+0x4*-0x371+0x2*0x1799;class Su extends pe{constructor(_0x3e3373,_0x13a717){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_id']=++bk,this['_planeDete'+'ction']=_0x3e3373,this['_xrPlane']=_0x13a717,this['_lastChang'+'edTime']=_0x13a717['lastChange'+'dTime'],this['_orientati'+'on']=_0x13a717['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x272ebe){const _0x5c03d8=this['_planeDete'+'ction']['_manager'],_0x58671e=_0x272ebe['getPose'](this['_xrPlane']['planeSpace'],_0x5c03d8['_reference'+'Space']);_0x58671e&&(this['_position']['copy'](_0x58671e['transform']['position']),this['_rotation']['copy'](_0x58671e['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Su,'EVENT_REMO'+'VE','remove'),h(Su,'EVENT_CHAN'+'GE','change');class ho extends pe{constructor(_0x39990b){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRPlane']),h(this,'_available',!(-0x1e66+-0x130f+0x18bb*0x2)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x39990b,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(0x1844+-0x2509+-0xcc6*-0x1)&&(this['_available']=!(-0x1*-0x67+-0x73*-0x2b+-0x4*0x4ee),this['fire']('available'));}['_onSession'+'End'](){for(let _0x3e4288=-0x26aa+0x2*-0x6bc+-0x1a11*-0x2;_0x3e4288<this['_planes']['length'];_0x3e4288++)this['_planes'][_0x3e4288]['destroy'](),this['fire']('remove',this['_planes'][_0x3e4288]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=0xabe+-0x1092+-0x175*-0x4,this['_available']&&(this['_available']=!(0x475+-0x1*-0x185c+-0x1cd0),this['fire']('unavailabl'+'e'));}['update'](_0x1f6013){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x1f6013['detectedPl'+'anes']['size'])this['_available']=!(-0xdfa+0x8e2+0x2*0x28c),this['fire']('available');else return;}const _0x3ceb1a=_0x1f6013['detectedPl'+'anes'];for(const [_0x35a84d,_0x21e72c]of this['_planesInd'+'ex'])_0x3ceb1a['has'](_0x35a84d)||(this['_planesInd'+'ex']['delete'](_0x35a84d),this['_planes']['splice'](this['_planes']['indexOf'](_0x21e72c),-0x2*-0xf6b+0xd24+-0x2bf9),_0x21e72c['destroy'](),this['fire']('remove',_0x21e72c));for(const _0x44f47a of _0x3ceb1a){let _0x33699b=this['_planesInd'+'ex']['get'](_0x44f47a);_0x33699b?_0x33699b['update'](_0x1f6013):(_0x33699b=new Su(this,_0x44f47a),this['_planesInd'+'ex']['set'](_0x44f47a,_0x33699b),this['_planes']['push'](_0x33699b),_0x33699b['update'](_0x1f6013),this['fire']('add',_0x33699b));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(ho,'EVENT_AVAI'+'LABLE','available'),h(ho,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(ho,'EVENT_ADD','add'),h(ho,'EVENT_REMO'+'VE','remove');class co extends pe{constructor(_0x266486,_0x237df7,_0x78c335=null){super(),h(this,'_position',new I()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x266486,this['_xrAnchor']=_0x237df7,this['_uuid']=_0x78c335);}['destroy'](){if(!this['_xrAnchor'])return;const _0x5a67f2=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x5a67f2,this);}['update'](_0x546cef){if(!this['_xrAnchor'])return;const _0x28ae34=_0x546cef['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x28ae34){if(this['_position']['equals'](_0x28ae34['transform']['position'])&&this['_rotation']['equals'](_0x28ae34['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x28ae34['transform']['position']),this['_rotation']['copy'](_0x28ae34['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x42ec54){if(!this['_anchors']['persistenc'+'e']){_0x42ec54==null||_0x42ec54(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x42ec54==null||_0x42ec54(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x42ec54&&this['_uuidReque'+'sts']['push'](_0x42ec54);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x1d2b54=>{this['_uuid']=_0x1d2b54,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x42ec54==null||_0x42ec54(null,_0x1d2b54);for(const _0x34440a of this['_uuidReque'+'sts'])_0x34440a(null,_0x1d2b54);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x1d2b54);})['catch'](_0x1fbad6=>{_0x42ec54==null||_0x42ec54(_0x1fbad6,null);for(const _0x2b8612 of this['_uuidReque'+'sts'])_0x2b8612(_0x1fbad6,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x961372){if(!this['_uuid']){_0x961372==null||_0x961372(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x286945=>{this['_uuid']=null,_0x961372==null||_0x961372(_0x286945),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(co,'EVENT_DEST'+'ROY','destroy'),h(co,'EVENT_CHAN'+'GE','change'),h(co,'EVENT_PERS'+'IST','persist'),h(co,'EVENT_FORG'+'ET','forget');var jg;class $a extends pe{constructor(_0xa5b19){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!window['XRAnchor']),h(this,'_available',!(0x1*0x169b+0x123f+-0x28d9)),h(this,'_checkingA'+'vailabilit'+'y',!(0x1b2a+-0x139+-0x19f0)),h(this,'_persisten'+'ce',Me['browser']&&!!((jg=window==null?void(-0x258+-0x18b9*0x1+-0xa9*-0x29):window['XRSession'])!=null&&jg['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0xa5b19,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x312d3c;const _0x5a50b=((_0x312d3c=this['manager']['session']['enabledFea'+'tures'])==null?void(0xb*0xe9+-0x97f+-0x84):_0x312d3c['indexOf']('anchors'))>=0x2614+-0x1*-0x53+0x2667*-0x1;_0x5a50b&&(this['_available']=_0x5a50b,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(0x11*0x18b+0xe3e+-0x2878);for(let _0x22f1c2=-0x2185*-0x1+0x11e2+-0x3367;_0x22f1c2<this['_creationQ'+'ueue']['length'];_0x22f1c2++)this['_creationQ'+'ueue'][_0x22f1c2]['callback']&&this['_creationQ'+'ueue'][_0x22f1c2]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=0x1*0x1915+0x473+-0x276*0xc,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x1accab=this['_list']['length'];for(;_0x1accab--;)this['_list'][_0x1accab]['destroy']();this['_list']['length']=0x9*-0x177+-0x83*-0x3d+-0x482*0x4,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x36e0f9,_0x418e21=null){const _0x1711da=new co(this,_0x36e0f9,_0x418e21);return this['_index']['set'](_0x36e0f9,_0x1711da),_0x418e21&&this['_indexByUu'+'id']['set'](_0x418e21,_0x1711da),this['_list']['push'](_0x1711da),_0x1711da['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x1711da;}['_onAnchorD'+'estroy'](_0x3b44a7,_0x373d14){this['_index']['delete'](_0x3b44a7),_0x373d14['uuid']&&this['_indexByUu'+'id']['delete'](_0x373d14['uuid']);const _0x2a6e56=this['_list']['indexOf'](_0x373d14);_0x2a6e56!==-(0x228e+-0x5fd+0x392*-0x8)&&this['_list']['splice'](_0x2a6e56,0x4*0x3c7+0x11ad+0x8*-0x419),this['fire']('destroy',_0x373d14);}['create'](_0x20406e,_0x19bf5b,_0x382ff4){if(!this['_available']){_0x382ff4==null||_0x382ff4(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x20406e instanceof XRHitTestResult){const _0x13ff22=_0x20406e;if(_0x382ff4=_0x19bf5b,!this['_supported']){_0x382ff4==null||_0x382ff4(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x13ff22['createAnch'+'or']){_0x382ff4==null||_0x382ff4(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x13ff22['createAnch'+'or']()['then'](_0x3f32ba=>{const _0x51539f=this['_createAnc'+'hor'](_0x3f32ba);_0x382ff4==null||_0x382ff4(null,_0x51539f),this['fire']('add',_0x51539f);})['catch'](_0x31c4b2=>{_0x382ff4==null||_0x382ff4(_0x31c4b2,null),this['fire']('error',_0x31c4b2);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x20406e,_0x19bf5b),'callback':_0x382ff4});}['restore'](_0x1fb0a5,_0x30a0bf){if(!this['_available']){_0x30a0bf==null||_0x30a0bf(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x30a0bf==null||_0x30a0bf(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x30a0bf==null||_0x30a0bf(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x1fb0a5)['then'](_0x406996=>{const _0x370dae=this['_createAnc'+'hor'](_0x406996,_0x1fb0a5);_0x30a0bf==null||_0x30a0bf(null,_0x370dae),this['fire']('add',_0x370dae);})['catch'](_0x384280=>{_0x30a0bf==null||_0x30a0bf(_0x384280,null),this['fire']('error',_0x384280);});}['forget'](_0x33266b,_0x44d0a5){if(!this['_available']){_0x44d0a5==null||_0x44d0a5(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x44d0a5==null||_0x44d0a5(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x44d0a5==null||_0x44d0a5(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x33266b)['then'](()=>{_0x44d0a5==null||_0x44d0a5(null);})['catch'](_0x36211c=>{_0x44d0a5==null||_0x44d0a5(_0x36211c),this['fire']('error',_0x36211c);});}['update'](_0x3ff779){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(0x3ed+0x5*-0x525+0x15cc),_0x3ff779['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x574d41=>{_0x574d41['delete'](),this['manager']['active']&&(this['_available']=!(-0xee9+-0x1a*0x161+-0x1*-0x32c3),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x3d68cd=0xb*-0x378+-0x1658+-0x2c0*-0x16;_0x3d68cd<this['_creationQ'+'ueue']['length'];_0x3d68cd++){const _0x193f0c=this['_creationQ'+'ueue'][_0x3d68cd];_0x3ff779['createAnch'+'or'](_0x193f0c['transform'],this['manager']['_reference'+'Space'])['then'](_0x509f6e=>{_0x193f0c['callback']&&this['_callbacks'+'Anchors']['set'](_0x509f6e,_0x193f0c['callback']);})['catch'](_0x2338d7=>{_0x193f0c['callback']&&_0x193f0c['callback'](_0x2338d7,null),this['fire']('error',_0x2338d7);});}this['_creationQ'+'ueue']['length']=0x6*-0x653+0x209f+0x2f*0x1d;}for(const [_0x5098a7,_0x134006]of this['_index'])_0x3ff779['trackedAnc'+'hors']['has'](_0x5098a7)||(this['_index']['delete'](_0x5098a7),_0x134006['destroy']());for(let _0x1575d2=-0x141d+-0x5*-0x69f+-0x67f*0x2;_0x1575d2<this['_list']['length'];_0x1575d2++)this['_list'][_0x1575d2]['update'](_0x3ff779);for(const _0x1e4aa4 of _0x3ff779['trackedAnc'+'hors']){if(this['_index']['has'](_0x1e4aa4))continue;try{const _0x7a6d37=_0x1e4aa4['anchorSpac'+'e'];}catch{continue;}const _0x4d877b=this['_createAnc'+'hor'](_0x1e4aa4);_0x4d877b['update'](_0x3ff779);const _0x207e74=this['_callbacks'+'Anchors']['get'](_0x1e4aa4);_0x207e74&&(this['_callbacks'+'Anchors']['delete'](_0x1e4aa4),_0x207e74(null,_0x4d877b)),this['fire']('add',_0x4d877b);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h($a,'EVENT_AVAI'+'LABLE','available'),h($a,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h($a,'EVENT_ERRO'+'R','error'),h($a,'EVENT_ADD','add'),h($a,'EVENT_DEST'+'ROY','destroy');class yu extends pe{constructor(_0xa8170a,_0x218066){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',0x8e*-0x39+-0x17e*-0x5+0x1828),h(this,'_position',new I()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0xa8170a,this['_xrMesh']=_0x218066,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x161fb9){const _0x3c9dcf=this['_meshDetec'+'tion']['_manager'],_0x2c3882=_0x161fb9['getPose'](this['_xrMesh']['meshSpace'],_0x3c9dcf['_reference'+'Space']);_0x2c3882&&(this['_position']['copy'](_0x2c3882['transform']['position']),this['_rotation']['copy'](_0x2c3882['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(yu,'EVENT_REMO'+'VE','remove'),h(yu,'EVENT_CHAN'+'GE','change');class fo extends pe{constructor(_0x5a7097){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRMesh']),h(this,'_available',!(0x2d*0x43+-0xb9f+-0x27)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x5a7097,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x506e6f){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x506e6f['detectedMe'+'shes']['size'])this['_available']=!(0xdf0+0x1170+-0x1f60),this['fire']('available');else return;}for(const _0x4595c2 of _0x506e6f['detectedMe'+'shes']){let _0x22683a=this['_index']['get'](_0x4595c2);_0x22683a?_0x22683a['update'](_0x506e6f):(_0x22683a=new yu(this,_0x4595c2),this['_index']['set'](_0x4595c2,_0x22683a),this['_list']['push'](_0x22683a),_0x22683a['update'](_0x506e6f),this['fire']('add',_0x22683a));}for(const _0x36045f of this['_index']['values']())_0x506e6f['detectedMe'+'shes']['has'](_0x36045f['xrMesh'])||this['_removeMes'+'h'](_0x36045f);}['_removeMes'+'h'](_0x4bef48){this['_index']['delete'](_0x4bef48['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x4bef48),-0x983*-0x3+-0x1423+0x133*-0x7),_0x4bef48['destroy'](),this['fire']('remove',_0x4bef48);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x58ba56=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x1*0x1862+-0x339*-0x1+0x152a);if(!_0x58ba56)return;this['_available']=_0x58ba56,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0xa07+0x177d+-0x17*0x175);for(const _0x57ae6a of this['_index']['values']())this['_removeMes'+'h'](_0x57ae6a);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(fo,'EVENT_AVAI'+'LABLE','available'),h(fo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(fo,'EVENT_ADD','add'),h(fo,'EVENT_REMO'+'VE','remove');class $v extends pe{constructor(_0x5177bb,_0x48070f,_0x428129){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(-0x1eb9+-0xf7b+0x2e37)),h(this,'_viewport',new ae()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new oi()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(0x7a5*0x1+0x670+-0x9*0x18d)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x5177bb,this['_xrView']=_0x48070f);const _0x5946e7=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x5946e7,{'format':ur,'mipmaps':!(-0x3c8*-0x4+-0xc10+-0x30f*0x1),'addressU':ue,'addressV':ue,'minFilter':_t,'magFilter':_t,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x28ef52=this['_manager']['views']['depthGpuOp'+'timized']?Te:_t;this['_textureDe'+'pth']=new _e(_0x5946e7,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x428129===-0x110d+0x407+0xd07?-0x1674*0x1+-0x2*-0x749+-0x7e2*-0x1:_0x428129,'mipmaps':!(-0x2381+-0x3d1*-0x3+-0x180f*-0x1),'addressU':ue,'addressV':ue,'minFilter':_0x28ef52,'magFilter':_0x28ef52,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x46c6df=-0xa9*0x27+-0x1f5*0x13+0x3eee;_0x46c6df<this['_textureDe'+'pth']['_levels']['length'];_0x46c6df++)this['_textureDe'+'pth']['_levels'][_0x46c6df]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x5946e7['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x7f79c8;return((_0x7f79c8=this['_depthInfo'])==null?void(0xb*0x257+-0x35*-0x17+-0x1e80):_0x7f79c8['rawValueTo'+'Meters'])||-0x229e*0x1+0x1b*0x81+0x701*0x3;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x78e923,_0x7655d){this['_xrView']=_0x7655d,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x2e537a=_0x78e923['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x2e537a['x'],this['_viewport']['y']=_0x2e537a['y'],this['_viewport']['z']=_0x2e537a['width'],this['_viewport']['w']=_0x2e537a['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x78e923);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x3041ee=this['_manager']['webglBindi'+'ng'];if(!_0x3041ee)return;const _0x2837ff=_0x3041ee['getCameraI'+'mage'](this['_xrCamera']);if(!_0x2837ff)return;const _0xfc9392=this['_manager']['app']['graphicsDe'+'vice'],_0x4b9105=_0xfc9392['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x4b9105['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x4b9105['createFram'+'ebuffer']();else{const _0x39f856=_0x4b9105['COLOR_ATTA'+'CHMENT0'],_0x375be3=this['_xrCamera']['width'],_0x58af69=this['_xrCamera']['height'];_0xfc9392['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x4b9105['framebuffe'+'rTexture2D'](_0x4b9105['FRAMEBUFFE'+'R'],_0x39f856,_0x4b9105['TEXTURE_2D'],_0x2837ff,-0x1304+-0xa3*-0x24+-0x3e8*0x1),_0xfc9392['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x4b9105['framebuffe'+'rTexture2D'](_0x4b9105['FRAMEBUFFE'+'R'],_0x39f856,_0x4b9105['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0x11b8+0x1*-0x201b+0xe63),_0x4b9105['bindFrameb'+'uffer'](_0x4b9105['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x4b9105['bindFrameb'+'uffer'](_0x4b9105['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x4b9105['blitFrameb'+'uffer'](-0x14d+0x79f+-0x2*0x329,_0x58af69,_0x375be3,0x1366+0x1af*-0x2+-0x1008,-0x1*-0x1b0+0x4eb*0x5+-0x1a47,0x2d3*-0x1+-0x72+0x345,_0x375be3,_0x58af69,_0x4b9105['COLOR_BUFF'+'ER_BIT'],_0x4b9105['NEAREST']);}}['_updateDep'+'th'](_0x51e707){var _0x19fdf6,_0x444332;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x161c45=this['_manager']['views']['depthGpuOp'+'timized'],_0x1a73fd=_0x161c45?this['_manager']['webglBindi'+'ng']:_0x51e707;if(!_0x1a73fd){this['_depthInfo']=null;return;}const _0x574c30=_0x1a73fd['getDepthIn'+'formation'](this['_xrView']);if(!_0x574c30){this['_depthInfo']=null;return;}let _0x54c6b7=!this['_depthInfo']!=!_0x574c30;this['_depthInfo']=_0x574c30;const _0x5d6413=((_0x19fdf6=this['_depthInfo'])==null?void(-0x2327+0x1711*-0x1+-0xa2*-0x5c):_0x19fdf6['width'])||-0x55b*-0x7+0xb*-0x1d2+0x1*-0x1173,_0x5d55fe=((_0x444332=this['_depthInfo'])==null?void(0xb*0x1b7+-0x154c+0x26f*0x1):_0x444332['height'])||-0x84*-0x16+-0x1*0x1e48+0x12f4;let _0x320fe1=!(0x216d+-0x417*-0x9+-0x463b);if((this['_textureDe'+'pth']['width']!==_0x5d6413||this['_textureDe'+'pth']['height']!==_0x5d55fe)&&(this['_textureDe'+'pth']['_width']=_0x5d6413,this['_textureDe'+'pth']['_height']=_0x5d55fe,_0x54c6b7=!(0x11e6+-0x11*0x11+0x9f*-0x1b),_0x320fe1=!(0x53f*0x7+0xa3b+-0x2ef4)),_0x54c6b7&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x161c45){if(this['_depthInfo']['texture']){const _0x1608a5=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x1608a5['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x1608a5['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Hi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x1608a5['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x1608a5['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x1608a5['RED'];break;case ki:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x1608a5['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x1608a5['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x1608a5['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(-0x1*-0x683+-0x399+-0x2ea);}}else this['_textureDe'+'pth']['_levels'][0x2a9*0xd+0x1*0xe5c+-0x30f1]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][0x7d4+0xe14+-0x15e8]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x320fe1&&this['fire']('depth:resi'+'ze',_0x5d6413,_0x5d55fe);}['updateTran'+'sforms'](_0x3fb144){_0x3fb144?(this['_viewInvOf'+'fMat']['mul2'](_0x3fb144,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][-0x2*-0x780+-0xc58+-0x2a8]=this['_viewInvOf'+'fMat']['data'][0xc2f*0x2+-0x1b9f+-0x5*-0xa9],this['_positionD'+'ata'][0x2*0x5e0+0x11*0x13+-0xd02]=this['_viewInvOf'+'fMat']['data'][0x21de+0x2445+-0x4616],this['_positionD'+'ata'][-0xa29+0x7b*-0x11+0x1256]=this['_viewInvOf'+'fMat']['data'][0x25*0x98+0x174d*-0x1+0x163];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0xdf5972,_0x119018){var _0x3148ca;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x3148ca=this['_depthInfo'])==null?void(-0x1448*-0x1+-0x1d*-0x10d+-0x32c1):_0x3148ca['getDepthIn'+'Meters'](_0xdf5972,_0x119018))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x1edb71=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x1edb71['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x1edb71['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h($v,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class cc extends pe{constructor(_0x51273b){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Me['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Me['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(0x6ae+0x2687+-0x2d34)),h(this,'_available'+'Depth',!(0xb46*0x1+0x1*0xbcb+-0x1710)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[zv]:Eu,[Vv]:ki,[Gv]:Hi}),(this['_manager']=_0x51273b,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===Bv;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x2f242b,_0x187b9c){for(let _0x336daf=-0x188e+-0xfe6+0x2874;_0x336daf<_0x187b9c['length'];_0x336daf++)this['_indexTmp']['set'](_0x187b9c[_0x336daf]['eye'],_0x187b9c[_0x336daf]);for(const [_0xfc3412,_0xd0d1eb]of this['_indexTmp']){let _0x540246=this['_index']['get'](_0xfc3412);_0x540246?_0x540246['update'](_0x2f242b,_0xd0d1eb):(_0x540246=new $v(this['_manager'],_0xd0d1eb,_0x187b9c['length']),this['_index']['set'](_0xfc3412,_0x540246),this['_list']['push'](_0x540246),_0x540246['update'](_0x2f242b,_0xd0d1eb),this['fire']('add',_0x540246));}for(const [_0x3f4c34,_0x299881]of this['_index']){if(this['_indexTmp']['has'](_0x3f4c34))continue;_0x299881['destroy'](),this['_index']['delete'](_0x3f4c34);const _0x207128=this['_list']['indexOf'](_0x299881);_0x207128!==-(0xd72+0xdd5+-0x1b46*0x1)&&this['_list']['splice'](_0x207128,0x2475+0x765+-0x1*0x2bd9),this['fire']('remove',_0x299881);}this['_indexTmp']['clear']();}['get'](_0x639eba){return this['_index']['get'](_0x639eba)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===Eo&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(-0x8f8*-0x2+0x6*-0x53d+0xd7f),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(-0x4*-0x3ba+0x29*0xe+-0x39*0x4d),this['_available'+'Depth'])){const _0x12e55e=this['_manager']['session'];this['_depthUsag'+'e']=_0x12e55e['depthUsage'],this['_depthForm'+'at']=_0x12e55e['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x57e481 of this['_index']['values']())_0x57e481['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(0x2*0x1375+-0x11b3+0x712*-0x3),this['_available'+'Depth']=!(0x14d6+-0x661+0x39d*-0x4),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=0x1*0x1f75+0x1fdc+-0x3*0x151b;}}h(cc,'EVENT_ADD','add'),h(cc,'EVENT_REMO'+'VE','remove');class Xa extends pe{constructor(_0x274eda){super(),h(this,'app'),h(this,'_supported',Me['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new I()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x3*-0x9d5+-0xd86+-0x3*0x553+0.1),h(this,'_depthFar',-0xe0d*-0x1+0x7d6+-0x11fb*0x1),h(this,'_supported'+'FrameRates',null),h(this,'_width',0x3*-0x62b+-0x24*-0xf7+-0x103b),h(this,'_height',0xb2a*-0x3+0x1c7f+-0x4ff*-0x1),h(this,'_framebuff'+'erScaleFac'+'tor',-0x6d*0x21+-0x22e0+-0x1*-0x30ee),(this['app']=_0x274eda,this['_available'][yk]=!(0xf77*-0x1+-0x21ba+0x2*0x1899),this['_available'][vk]=!(0x730*-0x2+0x198a+0xb29*-0x1),this['_available'][Eo]=!(0x10ea+0x5*0x45c+-0x26b5),this['views']=new cc(this),this['domOverlay']=new wk(this),this['hitTest']=new Or(this),this['imageTrack'+'ing']=new Hv(this),this['planeDetec'+'tion']=new ho(this),this['meshDetect'+'ion']=new fo(this),this['input']=new Ai(this),this['lightEstim'+'ation']=new gu(this),this['anchors']=new $a(this),this['views']=new cc(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=Kv());}['destroy'](){}['start'](_0x16a6d0,_0x29f4c2,_0x405cda,_0x14ec28){let _0x5c06c2=_0x14ec28;if(typeof _0x14ec28=='object'&&(_0x5c06c2=_0x14ec28['callback']),!this['_available'][_0x29f4c2]){_0x5c06c2&&_0x5c06c2(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x5c06c2&&_0x5c06c2(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x16a6d0,this['_camera']['camera']['xr']=this,this['_type']=_0x29f4c2,this['_spaceType']=_0x405cda,this['_framebuff'+'erScaleFac'+'tor']=(_0x14ec28==null?void(-0x6a3*-0x2+0x1*-0x99d+0x3a9*-0x1):_0x14ec28['framebuffe'+'rScaleFact'+'or'])??0x1*-0x153d+-0x26ef+0x3c2d,this['_setClipPl'+'anes'](_0x16a6d0['nearClip'],_0x16a6d0['farClip']);const _0x31dcbc={'requiredFeatures':[_0x405cda],'optionalFeatures':[]},_0x9c848c=this['app']['graphicsDe'+'vice'];_0x9c848c!=null&&_0x9c848c['isWebGPU']&&_0x31dcbc['requiredFe'+'atures']['push']('webgpu');const _0x5c1388=_0x9c848c==null?void(-0x1c*-0x133+0x1*0xce7+-0x1*0x2e7b):_0x9c848c['isWebGL2'];if(_0x29f4c2===Eo){if(_0x31dcbc['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x31dcbc['optionalFe'+'atures']['push']('hit-test'),_0x14ec28&&(_0x14ec28['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x31dcbc['optionalFe'+'atures']['push']('image-trac'+'king'),_0x14ec28['planeDetec'+'tion']&&_0x31dcbc['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x14ec28['meshDetect'+'ion']&&_0x31dcbc['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x31dcbc['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x31dcbc['domOverlay']={'root':this['domOverlay']['root']}),_0x14ec28&&_0x14ec28['anchors']&&this['anchors']['supported']&&_0x31dcbc['optionalFe'+'atures']['push']('anchors'),_0x14ec28&&_0x14ec28['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x31dcbc['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x124caf=[],_0x3492b0=[];if(_0x124caf['push'](Bv,Tk),_0x3492b0['push'](Gv,zv,Vv),_0x14ec28['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x155b90=_0x124caf['indexOf'](_0x14ec28['depthSensi'+'ng']['usagePrefe'+'rence']);_0x155b90!==-(0x101*-0x9+0x4a9*0x7+-0x1795)&&_0x124caf['splice'](_0x155b90,-0xb31+-0x1dbc*0x1+-0x28ee*-0x1),_0x124caf['unshift'](_0x14ec28['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x14ec28['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x44a211=_0x3492b0['indexOf'](_0x14ec28['depthSensi'+'ng']['dataFormat'+'Preference']);_0x44a211!==-(-0x274*0xf+-0x4*-0x3d+-0x51f*-0x7)&&_0x3492b0['splice'](_0x44a211,0xca3+-0x1*0xdd8+-0x1*-0x136),_0x3492b0['unshift'](_0x14ec28['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x31dcbc['depthSensi'+'ng']={'usagePreference':_0x124caf,'dataFormatPreference':_0x3492b0};}_0x5c1388&&_0x14ec28&&_0x14ec28['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x31dcbc['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x31dcbc['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x14ec28&&_0x14ec28['optionalFe'+'atures']&&(_0x31dcbc['optionalFe'+'atures']=_0x31dcbc['optionalFe'+'atures']['concat'](_0x14ec28['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x48457b,_0x5e02a4)=>{if(_0x48457b){_0x5c06c2&&_0x5c06c2(_0x48457b),this['fire']('error',_0x48457b);return;}_0x5e02a4!==null&&(_0x31dcbc['trackedIma'+'ges']=_0x5e02a4),this['_onStartOp'+'tionsReady'](_0x29f4c2,_0x405cda,_0x31dcbc,_0x5c06c2);}):this['_onStartOp'+'tionsReady'](_0x29f4c2,_0x405cda,_0x31dcbc,_0x5c06c2);}['_onStartOp'+'tionsReady'](_0x3f5a4c,_0x3e3eab,_0x5109c4,_0x56200f){const _0x1c87d3=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x5109c4;navigator['xr']['requestSes'+'sion'](_0x3f5a4c,_0x1c87d3)['then'](_0x5a75b8=>{this['_onSession'+'Start'](_0x5a75b8,_0x3e3eab,_0x56200f);})['catch'](_0x3ca764=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x56200f&&_0x56200f(_0x3ca764),this['fire']('error',_0x3ca764);});}['end'](_0x535fae){if(!this['_session']){_0x535fae&&_0x535fae(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x535fae&&this['once']('end',_0x535fae),this['_session']['end']();}['isAvailabl'+'e'](_0x42477a){return this['_available'][_0x42477a];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x4ea81d in this['_available'])this['_sessionSu'+'pportCheck'](_0x4ea81d);}['initiateRo'+'omCapture'](_0x12266d){if(!this['_session']){_0x12266d(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x12266d(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x12266d&&_0x12266d(null);})['catch'](_0x28cfee=>{_0x12266d&&_0x12266d(_0x28cfee);});}['updateTarg'+'etFrameRat'+'e'](_0x52754d,_0x36405c){var _0xc5d86d;if(!((_0xc5d86d=this['_session'])!=null&&_0xc5d86d['updateTarg'+'etFrameRat'+'e'])){_0x36405c==null||_0x36405c(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x52754d)['then'](()=>{_0x36405c==null||_0x36405c();})['catch'](_0x8fa597=>{_0x36405c==null||_0x36405c(_0x8fa597);});}['_sessionSu'+'pportCheck'](_0x3d2b08){navigator['xr']['isSessionS'+'upported'](_0x3d2b08)['then'](_0x1f8110=>{this['_available'][_0x3d2b08]!==_0x1f8110&&(this['_available'][_0x3d2b08]=_0x1f8110,this['fire']('available',_0x3d2b08,_0x1f8110),this['fire']('available:'+_0x3d2b08,_0x1f8110));})['catch'](_0x20de66=>{this['fire']('error',_0x20de66);});}['_onSession'+'Start'](_0x124583,_0x552846,_0x2b3ed6){let _0x415da0=!(0x53*0x4b+-0x31*-0xc5+-0x3e05*0x1);this['_session']=_0x124583;const _0x5b2f63=()=>{this['fire']('visibility'+':change',_0x124583['visibility'+'State']);},_0x3e579a=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x46c4ad=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x3e579a),this['_camera']['off']('set_farCli'+'p',_0x3e579a),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x124583['removeEven'+'tListener']('end',_0x46c4ad),_0x124583['removeEven'+'tListener']('visibility'+'change',_0x5b2f63),_0x415da0||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=-0x9aa+-0x242c+0x2dd6,this['_height']=-0x24b7+0x15b6+0xf01,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x124583['addEventLi'+'stener']('end',_0x46c4ad),_0x124583['addEventLi'+'stener']('visibility'+'change',_0x5b2f63),this['_camera']['on']('set_nearCl'+'ip',_0x3e579a),this['_camera']['on']('set_farCli'+'p',_0x3e579a),M['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x516996;this['fire']('frameratec'+'hange',(_0x516996=this['_session'])==null?void(-0xfc+0xb5f*0x3+-0x303*0xb):_0x516996['frameRate']);}),_0x124583['requestRef'+'erenceSpac'+'e'](_0x552846)['then'](_0x4ac33f=>{this['_reference'+'Space']=_0x4ac33f,this['app']['tick'](),_0x2b3ed6&&_0x2b3ed6(null),this['fire']('start');})['catch'](_0x2d4be9=>{_0x415da0=!(-0xe25+-0x220f+0x3034),_0x124583['end'](),_0x2b3ed6&&_0x2b3ed6(_0x2d4be9),this['fire']('error',_0x2d4be9);});}['_setClipPl'+'anes'](_0x98d113,_0x178af8){this['_depthNear']===_0x98d113&&this['_depthFar']===_0x178af8||(this['_depthNear']=_0x98d113,this['_depthFar']=_0x178af8,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x133707=this['app']['graphicsDe'+'vice'],_0x206f16=_0x133707['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x133707['gl'],{'alpha':!(-0x1*0xf3b+0xa85+0x4b6*0x1),'depth':!(0x6f0+-0x1*-0x22f9+-0x29e9),'stencil':!(0x1*-0xa75+-0x1b77+0x25ec),'framebufferScaleFactor':_0x206f16,'antialias':!(-0x17f*0x3+0xf53+-0xad5)}),_0x133707!=null&&_0x133707['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x133707['gl']);}catch(_0x3b293e){this['fire']('error',_0x3b293e);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x3d3254=>{this['fire']('error',_0x3d3254);});},0xec2+-0x3e2+0x4*-0x2b8);}['update'](_0x49c936){if(!this['_session'])return!(0x1016+0x1d17+-0x2d2c);const _0x3ce8ee=_0x49c936['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x14c68d=_0x49c936['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x3ce8ee||this['_height']!==_0x14c68d)&&(this['_width']=_0x3ce8ee,this['_height']=_0x14c68d,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x3ce8ee,_0x14c68d));const _0x27eccc=_0x49c936['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x27eccc)return!(0x1422+0xc*0x31f+-0x1*0x3995);const _0xcde969=this['views']['list']['length'];this['views']['update'](_0x49c936,_0x27eccc['views']);const _0xa2ab6d=_0x27eccc['transform']['position'],_0x2b2f4c=_0x27eccc['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0xa2ab6d['x'],_0xa2ab6d['y'],_0xa2ab6d['z']),this['_localRota'+'tion']['set'](_0x2b2f4c['x'],_0x2b2f4c['y'],_0x2b2f4c['z'],_0x2b2f4c['w']),_0xcde969===-0xa34+-0x13a7+-0x1ddb*-0x1&&this['views']['list']['length']>0x6d*-0x17+-0x7*0x3df+0x24e4){const _0x4e8707=new te(),_0x2ff0b8=this['views']['list'][0xfa4+-0xa93+-0x511];_0x4e8707['copy'](_0x2ff0b8['projMat']);const _0x532fbb=_0x4e8707['data'],_0x2592c2=(-0x1*-0x113d+0x2488+-0x35c3*0x1)*Math['atan']((0xb*0xc2+-0x59*-0x6c+-0x2de1)/_0x532fbb[0xe3*0x27+0x1258+-0x34e8])*(-0x2551+0xb9*-0x2+0x2777)/Math['PI'],_0x165a1c=_0x532fbb[-0x1*0x10f1+0x478+0x3*0x42a]/_0x532fbb[0xee7+-0x35b*-0x9+-0x2d1a],_0x2a649b=_0x532fbb[0x11e9+-0x5*0x1ca+-0x8e9]/(_0x532fbb[0x3a7+0x1*-0x1641+0x2*0x952]+(0x2e5+-0x122*0x2+-0xa0)),_0x2282fb=_0x532fbb[0xf90+-0xe*0x79+0x239*-0x4]/(_0x532fbb[0x6*-0x18b+-0x3f8+0x351*0x4]-(0x1777+-0x1*0x7c3+-0xfb3));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x165a1c,'farClip':_0x2a649b,'fov':_0x2592c2,'horizontalFov':!(0xe96+-0x1559+0x6c4),'nearClip':_0x2282fb});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x49c936),this['_type']===Eo&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x49c936),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x49c936),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x49c936),this['anchors']['supported']&&this['anchors']['update'](_0x49c936),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x49c936),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x49c936)),this['fire']('update',_0x49c936),!(-0xad*0x15+0x22e+0xc03);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x4cf7c1;return((_0x4cf7c1=this['_session'])==null?void(0x112+0x223a+-0x3*0xbc4):_0x4cf7c1['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x5c4c96){var _0x2952b2;(((_0x2952b2=this['_baseLayer'])==null?void(0x85*0x4b+0x1e8f*-0x1+-0x868):_0x2952b2['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>-0xe*-0x1f7+-0x9*0x383+0x41a&&M['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x5c4c96);}get['fixedFovea'+'tion'](){var _0x5217af;return((_0x5217af=this['_baseLayer'])==null?void(-0x6*0x1ff+0x1d9c+0x7a*-0x25):_0x5217af['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(Xa,'EVENT_AVAI'+'LABLE','available'),h(Xa,'EVENT_STAR'+'T','start'),h(Xa,'EVENT_END','end'),h(Xa,'EVENT_UPDA'+'TE','update'),h(Xa,'EVENT_ERRO'+'R','error');class Qk extends ec{constructor(_0x25340d,_0x3b353c={}){super(_0x25340d);const _0xd46b48=new fD();_0xd46b48['graphicsDe'+'vice']=_0x3b353c['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x25340d,_0x3b353c),this['addCompone'+'ntSystems'](_0xd46b48),this['addResourc'+'eHandles'](_0xd46b48),_0xd46b48['elementInp'+'ut']=_0x3b353c['elementInp'+'ut'],_0xd46b48['keyboard']=_0x3b353c['keyboard'],_0xd46b48['mouse']=_0x3b353c['mouse'],_0xd46b48['touch']=_0x3b353c['touch'],_0xd46b48['gamepads']=_0x3b353c['gamepads'],_0xd46b48['scriptPref'+'ix']=_0x3b353c['scriptPref'+'ix'],_0xd46b48['assetPrefi'+'x']=_0x3b353c['assetPrefi'+'x'],_0xd46b48['scriptsOrd'+'er']=_0x3b353c['scriptsOrd'+'er'],_0xd46b48['soundManag'+'er']=new UT(),_0xd46b48['lightmappe'+'r']=AD,_0xd46b48['batchManag'+'er']=Vw,_0xd46b48['xr']=Xa,this['init'](_0xd46b48);}['createDevi'+'ce'](_0x17f183,_0x5bad1a){return _0x5bad1a['graphicsDe'+'viceOption'+'s']||(_0x5bad1a['graphicsDe'+'viceOption'+'s']={}),Me['browser']&&navigator['xr']&&(_0x5bad1a['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(-0x2304+0x1f99*-0x1+0x429d)),_0x5bad1a['graphicsDe'+'viceOption'+'s']['alpha']=_0x5bad1a['graphicsDe'+'viceOption'+'s']['alpha']||!(0xf57+0x8c9+-0x181f),new pT(_0x17f183,_0x5bad1a['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x2bfb8a){_0x2bfb8a['componentS'+'ystems']=[gv,gL,qL,WD,KD,oR,Z3,LO,OO,jO,xO,QD,j3,nO,HL,sL,_O,SO,bO,iR,YL,PO,KO];}['addResourc'+'eHandles'](_0x412333){_0x412333['resourceHa'+'ndlers']=[ZO,tN,sN,iN,FN,IN,Sk,$N,bN,aN,VN,NN,cN,AN,hN,GN,EN,dN,fN,nN,qN,HN,WN,lN,wN];}}class Jk extends pe{constructor(_0x2a56a8,_0x1b0809){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(-0x2217+-0x17ce+0x39e6)),h(this,'_loaded',!(0x1720+0xa45+0x2*-0x10b2)),h(this,'_failed',[]),(this['_registry']=_0x1b0809,_0x2a56a8['forEach'](_0x233436=>{if(_0x233436 instanceof me)_0x233436['registry']||(_0x233436['registry']=_0x1b0809),this['_assets']['add'](_0x233436);else{const _0x3f3e36=_0x1b0809['get'](_0x233436);_0x3f3e36?this['_assets']['add'](_0x3f3e36):this['_waitForAs'+'set'](_0x233436);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x3032d5=>{this['_registry']['off']('add:'+_0x3032d5,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x1913ef){var _0x9eb499;return _0x1913ef['type']==='model'&&((_0x9eb499=_0x1913ef['file'])==null?void(0x8*-0x163+-0x21bf+0x2cd7):_0x9eb499['url'])&&_0x1913ef['file']['url']&&_0x1913ef['file']['url']['match'](/.json$/g);}['load'](_0x5f5b69,_0x5e7a57){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(0x4*-0x51a+-0x10af*0x1+0x76b*0x5),this['_callback']=_0x5f5b69,this['_scope']=_0x5e7a57,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x44365d=!(-0x17d*0x1+-0x1ad7*0x1+-0x1*-0x1c55);this['_assets']['forEach'](_0x486c15=>{_0x486c15['loaded']||(_0x44365d=!(-0x1*0x3ef+-0x1b18+0x263*0xd),this['_assetHasD'+'ependencie'+'s'](_0x486c15)&&this['_registry']['loadFromUr'+'l'](_0x486c15['file']['url'],_0x486c15['type'],(_0x27b3b0,_0x63993d)=>{if(_0x27b3b0){this['_onError'](_0x27b3b0,_0x486c15);return;}this['_onLoad'](_0x486c15);}),this['_loadingAs'+'sets']['add'](_0x486c15),this['_registry']['add'](_0x486c15));}),this['_loadingAs'+'sets']['forEach'](_0x1ebfb5=>{this['_assetHasD'+'ependencie'+'s'](_0x1ebfb5)||this['_registry']['load'](_0x1ebfb5);}),!_0x44365d&&this['_waitingAs'+'sets']['size']===0x16*-0x8a+0x5af+0x33*0x1f&&this['_loadingCo'+'mplete']();}['ready'](_0x22ce27,_0x27ed3a=this){this['_loaded']?_0x22ce27['call'](_0x27ed3a,Array['from'](this['_assets'])):this['once']('load',_0x2127d9=>{_0x22ce27['call'](_0x27ed3a,_0x2127d9);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(0x511*-0x7+-0x1af1+0x3e68),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x5e522c){this['_loadingAs'+'sets']['has'](_0x5e522c)&&(this['fire']('progress',_0x5e522c),this['_loadingAs'+'sets']['delete'](_0x5e522c)),this['_loadingAs'+'sets']['size']===-0x8eb+0xaab*0x2+0xbb*-0x11&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x36*-0x26+-0xd*0x1ee+0x1b5*0xa);}['_onError'](_0x5cec31,_0x1e7104){this['_loadingAs'+'sets']['has'](_0x1e7104)&&(this['_failed']['push'](_0x1e7104),this['_loadingAs'+'sets']['delete'](_0x1e7104)),this['_loadingAs'+'sets']['size']===-0x644*-0x5+0x2376+0xa6*-0x67&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x1c0b+-0x9a5*0x3+0xe4);}['_onAddAsse'+'t'](_0x1dd95d){this['_waitingAs'+'sets']['delete'](_0x1dd95d),this['_assets']['add'](_0x1dd95d),_0x1dd95d['loaded']||(this['_loadingAs'+'sets']['add'](_0x1dd95d),this['_registry']['load'](_0x1dd95d));}['_waitForAs'+'set'](_0x33830b){this['_waitingAs'+'sets']['add'](_0x33830b),this['_registry']['once']('add:'+_0x33830b,this['_onAddAsse'+'t'],this);}}const ch=[],Ck=[[],[],[]];class Pk extends fs{constructor(_0x206422,_0x23d343){super(_0x206422),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x23d343;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x4c1a14=>{_0x4c1a14['defaultUni'+'formBuffer']['destroy'](),_0x4c1a14['destroy']();}),this['viewBindGr'+'oups']['length']=-0x228b+-0x28*0x68+0x1*0x32cb;}['update'](_0x59002d,_0xbddd97,_0x31843c,_0x2a6df8){this['camera']=_0x59002d,this['scene']=_0xbddd97,this['layers']=_0x31843c,this['mapping']=_0x2a6df8;}['execute'](){const _0x250989=this['device'],{renderer:_0x9a7f,camera:_0x487abc,scene:_0x3a813a,layers:_0x210975,mapping:_0x2ecb8e,renderTarget:_0x2a6b9c}=this,_0x5deb2f=_0x3a813a['layers']['layerList'],_0x5f3ff1=_0x3a813a['layers']['subLayerEn'+'abled'],_0x4a7458=_0x3a813a['layers']['subLayerLi'+'st'];for(let _0x179649=-0x1a13+0x103c*0x1+0x9d7*0x1;_0x179649<_0x5deb2f['length'];_0x179649++){const _0x2e9dc4=_0x5deb2f[_0x179649];if(!(_0x210975&&_0x210975['indexOf'](_0x2e9dc4)<-0xd00*-0x1+-0x1698+0x998)&&_0x2e9dc4['enabled']&&_0x5f3ff1[_0x179649]&&_0x2e9dc4['camerasSet']['has'](_0x487abc['camera'])){const _0x46c3b7=_0x4a7458[_0x179649];Q['pushGpuMar'+'ker'](_0x250989,_0x2e9dc4['name']+'('+(_0x46c3b7?'TRANSP':'OPAQUE')+')'),_0x2e9dc4['_clearDept'+'hBuffer']&&_0x9a7f['clear'](_0x487abc['camera'],!(-0x1*0x6fd+0xd3f+-0x641),!(0x2441+-0x1fcf*0x1+-0x472),!(0x2531+0xc1e+-0x314e));const _0x4bfa89=_0x2e9dc4['meshInstan'+'ces'];for(let _0x1d43c7=-0x50b+0x18a0+-0x1395;_0x1d43c7<_0x4bfa89['length'];_0x1d43c7++){const _0x2c3cd1=_0x4bfa89[_0x1d43c7];_0x2c3cd1['pick']&&_0x2c3cd1['transparen'+'t']===_0x46c3b7&&(ch['push'](_0x2c3cd1),_0x2ecb8e['set'](_0x2c3cd1['id'],_0x2c3cd1));}ch['length']>-0xd*0xbc+0x2580+-0x1bf4&&(_0x3a813a['clusteredL'+'ightingEna'+'bled']&&_0x9a7f['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x9a7f['setCameraU'+'niforms'](_0x487abc['camera'],_0x2a6b9c),_0x250989['supportsUn'+'iformBuffe'+'rs']&&_0x9a7f['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x9a7f['viewUnifor'+'mFormat'],_0x9a7f['viewBindGr'+'oupFormat'],null),_0x9a7f['renderForw'+'ard'](_0x487abc['camera'],_0x2a6b9c,ch,Ck,Fn,_0x2af8b5=>{_0x250989['setBlendSt'+'ate'](Ct['NOBLEND']);}),ch['length']=-0x66f+-0x1f94+-0x2603*-0x1),Q['popGpuMark'+'er'](_0x250989);}}}}const sf=new Set(),Mk=new ae();let eU=class{constructor(_0x400f2f,_0x1630e7,_0x2d8261){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(-0x1dda+0x29*-0xe9+-0x13*-0x389)),(M['assert'](_0x400f2f),this['renderer']=_0x400f2f['renderer'],this['device']=_0x400f2f['graphicsDe'+'vice'],this['renderPass']=new Pk(this['device'],_0x400f2f['renderer']),this['width']=-0x1*0x95c+0x4ff*0x7+-0x199d,this['height']=0x1318+-0x1*0x133c+-0x12*-0x2,this['resize'](_0x1630e7,_0x2d8261),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0x7cf+-0x581+-0x24d);}));}['getSelecti'+'on'](_0x48b53c,_0x20f38e,_0x6b8d07=0x27b*-0x8+-0x1f5*0x7+0x218c*0x1,_0x276590=0x39f+-0x1*0x4a3+0x105){const _0x109982=this['device'];if(_0x109982['isWebGPU'])return M['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];M['assert'](typeof _0x48b53c!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x20f38e=this['renderTarg'+'et']['height']-(_0x20f38e+_0x276590);const _0x255ac3=this['sanitizeRe'+'ct'](_0x48b53c,_0x20f38e,_0x6b8d07,_0x276590);_0x109982['setRenderT'+'arget'](this['renderTarg'+'et']),_0x109982['updateBegi'+'n']();const _0x5c54c=new Uint8Array((-0x29b+0x1*-0x1bbb+0x1e5a)*_0x255ac3['z']*_0x255ac3['w']);return _0x109982['readPixels'](_0x255ac3['x'],_0x255ac3['y'],_0x255ac3['z'],_0x255ac3['w'],_0x5c54c),_0x109982['updateEnd'](),this['decodePixe'+'ls'](_0x5c54c,this['mapping']);}['getSelecti'+'onAsync'](_0x2ce7ef,_0x4e94bf,_0x32c8ef=0x86f+0x1c4*-0x5+0x6*0x11,_0x18d746=0x6*-0x2c4+-0x15a*-0x17+-0xe7d){var _0xe2ebc5;(_0xe2ebc5=this['device'])!=null&&_0xe2ebc5['isWebGL2']&&(_0x4e94bf=this['renderTarg'+'et']['height']-(_0x4e94bf+_0x18d746));const _0x2eb1c9=this['sanitizeRe'+'ct'](_0x2ce7ef,_0x4e94bf,_0x32c8ef,_0x18d746);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x2eb1c9['x'],_0x2eb1c9['y'],_0x2eb1c9['z'],_0x2eb1c9['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(0x24*0xa9+-0x3be*-0x9+-0x102*0x39)})['then'](_0x7632a3=>this['decodePixe'+'ls'](_0x7632a3,this['mapping']));}['sanitizeRe'+'ct'](_0x502509,_0xc3b12,_0x1c39e1,_0x500a7d){const _0x4d525a=this['renderTarg'+'et']['width'],_0x416783=this['renderTarg'+'et']['height'];return _0x502509=Y['clamp'](Math['floor'](_0x502509),0xa3+0x1*0x17e+-0x221,_0x4d525a-(0x2042+0x7f9*-0x2+-0x104f)),_0xc3b12=Y['clamp'](Math['floor'](_0xc3b12),-0x143f*0x1+0x107*0x15+-0x2*0xaa,_0x416783-(0x6b*-0x2d+0x7bb+0x1*0xb15)),_0x1c39e1=Math['floor'](Math['max'](_0x1c39e1,-0xa63+-0x261f+0x3083)),_0x1c39e1=Math['min'](_0x1c39e1,_0x4d525a-_0x502509),_0x500a7d=Math['floor'](Math['max'](_0x500a7d,-0x9*0x453+-0x11fe+-0x1d6*-0x1f)),_0x500a7d=Math['min'](_0x500a7d,_0x416783-_0xc3b12),Mk['set'](_0x502509,_0xc3b12,_0x1c39e1,_0x500a7d);}['decodePixe'+'ls'](_0x22c193,_0x225aea){const _0x53caba=[];if(this['deviceVali'+'d']){const _0x2c8abc=_0x22c193['length'];for(let _0x4977ce=0x75d+-0xfd4+0xb*0xc5;_0x4977ce<_0x2c8abc;_0x4977ce+=0x16b2+-0x165c+-0x52){const _0x4d2099=_0x22c193[_0x4977ce+(0x129a+-0x1461+-0x7*-0x41)],_0x3a95b3=_0x22c193[_0x4977ce+(0x1570+-0x7c4+-0xdab)],_0x46fd96=_0x22c193[_0x4977ce+(0x1cd2+0x22bf+-0x3f8f)],_0x4e865c=(_0x22c193[_0x4977ce+(0x1551+0x1312+-0x2860)]<<0x6e*0x2f+-0x180e*-0x1+-0x2*0x1614|_0x4d2099<<0x1b1*0x1+0x917*-0x2+0x108d|_0x3a95b3<<-0x155*-0x11+-0x4+-0x1699|_0x46fd96)>>>0x1ade+0x1328+-0x2e06;_0x4e865c!==0xb015718b+0x9e2ad93c+-0x4e404ac8&&sf['add'](_0x225aea['get'](_0x4e865c));}sf['forEach'](_0x336219=>{_0x336219&&_0x53caba['push'](_0x336219);}),sf['clear']();}return _0x53caba;}['allocateRe'+'nderTarget'](){const _0x1e2bdc=new _e(this['device'],{'format':Oe,'width':this['width'],'height':this['height'],'mipmaps':!(-0x39*0x42+-0x33*-0x95+-0xefc),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new vt({'colorBuffer':_0x1e2bdc,'depth':!(0x63f+-0xc5*0x5+-0x266)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x1d64ec,_0x24e159,_0x54e40c){_0x54e40c instanceof Dr&&(_0x54e40c=[_0x54e40c]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x4d280d=this['renderPass'];_0x4d280d['init'](this['renderTarg'+'et']),_0x4d280d['colorOps']['clearValue']=ie['WHITE'],_0x4d280d['colorOps']['clear']=!(-0x2*0x132b+0x1437+0x1*0x121f),_0x4d280d['depthStenc'+'ilOps']['clearDepth']=!(-0x289*0xa+-0x20ab+0x1*0x3a05),_0x4d280d['update'](_0x1d64ec,_0x24e159,_0x54e40c,this['mapping']),_0x4d280d['render']();}['resize'](_0x7f1882,_0x652d4a){this['width']=Math['floor'](_0x7f1882),this['height']=Math['floor'](_0x652d4a);}};class Ik{constructor(_0x4aa114){this['_frameInde'+'x']=-0x4ff+0xe*0x19d+-0x1197,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x548+0x60*-0x16+-0x3*-0x483,this['enabled']=!(-0x11bb+0x116*-0xd+0x1fd9),_0x4aa114['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x4aa114['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x4aa114['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x1d9de0){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x3d3dc6=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x3d3dc6,this['_frameInde'+'x']=0x16ed+0x1e7c+0x3569*-0x1,this['mark'](_0x1d9de0);}['mark'](_0x483f00){if(!this['enabled'])return;const _0x1420fb=de();if(this['_frameInde'+'x']>0x819+-0xbb6*-0x1+-0x13cf){const _0x591156=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(-0x6ae+0x27*-0xfd+0x2d3a)];_0x591156[0x1343*-0x1+-0x202d+0x3371]=_0x1420fb-_0x591156[0x1de2+0x105b+-0x2e3c];}else{if(this['_timings']['length']>0x14f7+-0x1702+0x20b){const _0x30d507=this['_timings'][this['_timings']['length']-(-0x1*-0x606+-0x7*-0x49e+-0x2657)];_0x30d507[0xb*0x1c1+-0x1397+0x4d]=_0x1420fb-_0x30d507[-0x1878+-0x11a7*0x1+0x20*0x151];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x483f00,_0x1420fb]);else{const _0x3f4be0=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x3f4be0[0x12ad+-0x646*0x1+-0xc67]=_0x483f00,_0x3f4be0[-0x697*0x4+-0x4*-0x8f9+-0x1*0x987]=_0x1420fb;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0x4*-0x338+-0x16da+0x23ba,-(-0x7*-0xf+0x1*0x2642+-0x65*0x62))['map'](_0x22d253=>_0x22d253[0x1252+0x5f4*0x3+-0x242d]);}}class Dk{constructor(_0x598f4b){this['device']=_0x598f4b,_0x598f4b['gpuProfile'+'r']['enabled']=!(0x280*-0x2+-0x3c6+0x8c6),this['enabled']=!(-0x3*0x5cf+0xbae*0x2+-0x5ef),this['unitsName']='ms',this['decimalPla'+'ces']=-0xbe8+0x60+0x1*0xb89,this['_timings']=[];}get['timings'](){return this['_timings'][-0x1c2d+0x25b9*0x1+-0x98c]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class Lk{constructor(_0xededda,_0x32ae5d,_0x4419b5,_0xe19ceb,_0x5e6f1a){this['app']=_0xededda,this['values']=[],this['statNames']=_0x32ae5d,this['statNames']['length']>-0xf*0x285+-0x275+0x2843&&(this['statNames']['length']=-0x1a*-0x161+0x190b+0x1e71*-0x2),this['unitsName']=_0xe19ceb,this['decimalPla'+'ces']=_0x4419b5,this['multiplier']=_0x5e6f1a||0x4c6*-0x1+0x1*-0x203b+0x3*0xc56;const _0x3ba740=(_0x5e8078,_0x164163)=>_0x5e8078['split']('.')['reduce']((_0x427dd5,_0x5e64a9)=>_0x427dd5?_0x427dd5[_0x5e64a9]:null,_0x164163||this);_0xededda['on']('frameupdat'+'e',_0x5e0374=>{for(let _0x263873=-0x784+0x6c*-0x57+0x2c38;_0x263873<this['statNames']['length'];_0x263873++)this['values'][_0x263873]=_0x3ba740(this['statNames'][_0x263873],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class rf{constructor(_0x3ee4fd,_0x435d80,_0x1cf4fa,_0xb8be27,_0xa59932){this['app']=_0x435d80,this['name']=_0x3ee4fd,this['device']=_0x435d80['graphicsDe'+'vice'],this['timer']=_0xa59932,this['watermark']=_0x1cf4fa,this['enabled']=!(-0x885+0x1*-0x9bb+-0x1*-0x1241),this['textRefres'+'hRate']=_0xb8be27,this['avgTotal']=-0xbb8+-0x121b+-0x9f1*-0x3,this['avgTimer']=0x2692+-0x1b9+-0x24d9,this['avgCount']=-0x131e+-0x156a+0x2888,this['timingText']='',this['texture']=null,this['yOffset']=-0x1b2f+0x97e+-0x7*-0x287,this['cursor']=-0xf1*-0x9+-0x125b*0x2+0x1c3d,this['sample']=new Uint8ClampedArray(-0x1487+0x1a56+-0x5cb),this['sample']['set']([0x116f+-0x2*-0xf3+-0x1355,-0x7d5+-0x1*0x1245+0x101*0x1a,0x365+-0x2*0x608+-0x8ab*-0x1,-0xd6d+-0x164*-0x6+0x4*0x185]),this['counter']=0x39*0x3b+-0x135d+0x63a,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x501909){const _0xc368ed=this['timer']['timings'],_0x56136b=_0xc368ed['reduce']((_0x516978,_0x50d0c5)=>_0x516978+_0x50d0c5,0x9*-0x36c+0x7*0x46b+-0x21);if(this['avgTotal']+=_0x56136b,this['avgTimer']+=_0x501909,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=-0x1b40*0x1+-0x364+0x1ea4,this['avgTotal']=-0x10c6+0xb1f+0x5a7*0x1,this['avgCount']=0xca6+-0x11e3*-0x1+-0x1e89),this['enabled']){let _0x264948=-0xed0+-0x3c2+0x1292;const _0x578450=(0x5*-0x30f+-0x6b*0x4f+0x3051+0.5)*this['watermark'];for(let _0x3cea04=-0x1c01+0x2475+-0x874;_0x3cea04<_0xc368ed['length'];++_0x3cea04)_0x264948+=Math['floor'](_0xc368ed[_0x3cea04]/_0x578450*(0x174e+-0xf6a+0x1*-0x6e5)),this['sample'][_0x3cea04]=_0x264948;this['sample'][-0x1*0x11af+-0x13*0x1d+0x13d9*0x1]=this['watermark']/_0x578450*(0x1e4+0x3*-0x79e+0xb*0x1ff),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(-0x1*0x1678+-0x2588*-0x1+-0x1*0xf0c)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=-0x3fb*0x5+-0x1095+-0x3a6*-0xa);}}['render'](_0x4d85c4,_0x5ad5d6,_0x27a62b,_0xcee9a0,_0x4e6d83){_0x4d85c4['quad'](_0x5ad5d6+_0xcee9a0,_0x27a62b,-_0xcee9a0,_0x4e6d83,this['enabled']?this['cursor']:0x1316+-0x321+-0xff5,this['enabled']?-0x6b*0x6+-0xaa2+0xd24+0.5+this['yOffset']:this['texture']['height']-(0x1b3*0x8+0x2d*-0xa2+0xee3),-_0xcee9a0,-0x1dd2+-0x21*-0xb1+0xb*0xa3,this['texture'],-0x1c7+-0x210a+0xb9b*0x3);}}class Rk{constructor(_0x2f5c0e,_0x3cc068){const _0x4ca11b=_0x18cc3d=>{_0x18cc3d['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x18cc3d['textAlign']='left',_0x18cc3d['textBaseli'+'ne']='alphabetic';},_0x420f6b=_0x308205=>_0x308205==='.'||_0x308205['length']===-0x181a*0x1+0x21ba+-0x99f&&_0x308205['charCodeAt'](0x2*0xe78+0xa9*-0x23+0x1*-0x5d5)>=-0x1162+-0x99*-0x36+-0xeb4*0x1&&_0x308205['charCodeAt'](0x57c+0x47*-0x7+-0x38b*0x1)<=-0x1cd2+0x32c+0x19df,_0x10b40e=document['createElem'+'ent']('canvas'),_0xfa851b=_0x10b40e['getContext']('2d',{'alpha':!(-0x15a+-0x250f+0x2669)});_0x4ca11b(_0xfa851b);const _0x4c1b95=new Map(),_0x56a3b7=0x26*-0x7d+0x2310+-0x107d,_0x37f7ee=0x1a43+0x1147+-0xd*0x332;let _0x292c17=_0x56a3b7,_0x3c7fcc=_0x56a3b7;_0x3cc068['forEach'](_0x475783=>{const _0x3c1a54=_0xfa851b['measureTex'+'t'](_0x475783),_0x395431=Math['ceil'](-_0x3c1a54['actualBoun'+'dingBoxLef'+'t']),_0x32bc50=Math['ceil'](_0x3c1a54['actualBoun'+'dingBoxRig'+'ht']),_0x48d9b2=Math['ceil'](_0x3c1a54['actualBoun'+'dingBoxAsc'+'ent']),_0x57d548=Math['ceil'](_0x3c1a54['actualBoun'+'dingBoxDes'+'cent']),_0x254486=_0x395431+_0x32bc50,_0x3ee993=_0x48d9b2+_0x57d548;_0x292c17+_0x254486+_0x56a3b7>=_0x37f7ee&&(_0x292c17=_0x56a3b7,_0x3c7fcc+=0xee*0x1+-0x4ab+-0x7*-0x8b),_0x4c1b95['set'](_0x475783,{'l':_0x395431,'r':_0x32bc50,'a':_0x48d9b2,'d':_0x57d548,'w':_0x254486,'h':_0x3ee993,'x':_0x292c17,'y':_0x3c7fcc}),_0x292c17+=_0x254486+_0x56a3b7;}),_0x10b40e['width']=0x6*0x41b+0xd2e+-0x23d0,_0x10b40e['height']=Y['nextPowerO'+'fTwo'](_0x3c7fcc+(-0x9bb*0x2+-0xb7*0x3+0x81*0x2b)+_0x56a3b7),_0x4ca11b(_0xfa851b),_0xfa851b['fillStyle']='rgb(0,\x200,\x20'+'0)',_0xfa851b['fillRect'](0x194b+-0x1496+-0x4b5,-0x1509*0x1+-0x1*-0x417+-0x3*-0x5a6,_0x10b40e['width'],_0x10b40e['height']),_0x4c1b95['forEach']((_0x2276e7,_0x4c14c1)=>{_0xfa851b['fillStyle']=_0x420f6b(_0x4c14c1)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0xfa851b['fillText'](_0x4c14c1,_0x2276e7['x']-_0x2276e7['l'],_0x2276e7['y']+_0x2276e7['a']);}),this['placements']=_0x4c1b95;const _0x49fac5=_0xfa851b['getImageDa'+'ta'](-0x12c8+0x195e+-0x696,0x1*-0x1836+0x1d*-0x130+-0x2*-0x1d53,_0x10b40e['width'],_0x10b40e['height'])['data'];for(let _0xce5713=0x1fb9+0x90b*-0x1+0x1*-0x16ae;_0xce5713<_0x49fac5['length'];_0xce5713+=0x13*0x19c+-0x2*0x43f+-0xb09*0x2)_0x49fac5[_0xce5713+(0x1*-0xd23+0x19f5+0x445*-0x3)]=_0x49fac5[_0xce5713+(0x3c*-0x16+0xa1*-0x35+-0x267d*-0x1)],_0x49fac5[_0xce5713+(-0x3*-0x3bb+-0x813+0xe*-0x39)]=-0x1510+0x152b+-0xc*-0x13,_0x49fac5[_0xce5713+(0x1*0x8c0+-0x216a+0x18ab)]=-0xc25*-0x1+0x15*0xe9+0x7f*-0x3d,_0x49fac5[_0xce5713+(-0x97*-0x38+0x9e*-0x13+-0x154c*0x1)]=0x5*0x282+-0x11*-0x177+0x5*-0x74a;this['texture']=new _e(_0x2f5c0e,{'name':'mini-stats'+'-word-atla'+'s','width':_0x10b40e['width'],'height':_0x10b40e['height'],'mipmaps':!(0xa3d+0xd21+-0x175d),'minFilter':Te,'magFilter':Te,'levels':[_0x49fac5]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x890f6e,_0x3ab624,_0x409b5c,_0x550d79){const _0x1510cd=this['placements']['get'](_0x3ab624);return _0x1510cd?(_0x890f6e['quad'](_0x409b5c+_0x1510cd['l']-(-0xb39+-0x618+0x1152),_0x550d79-_0x1510cd['d']+(-0x902*0x1+0x1ee5+-0x15e2),_0x1510cd['w']+(-0xa8b*-0x3+-0x238f+0x15*0x30),_0x1510cd['h']+(0xf4a+0x1c91+-0x8c5*0x5),_0x1510cd['x']-(-0x82d+-0x8c2+0x10f0),this['texture']['height']-_0x1510cd['y']-_0x1510cd['h']-(0x387*0x5+-0x128c+0x9*0x1a),void(0x2*0x8e9+0x200a+0xc77*-0x4),void(0x8*0x320+0x1e75+0x1*-0x3775),this['texture'],0x38*0x6b+0xb8d+0x1*-0x22f4),_0x1510cd['w']):-0x1975+-0x32f*0x7+0x2fbe;}}const Ok='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',Fk='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',Nk='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',kk='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class Uk{constructor(_0x30f51f,_0xab3ffb=0x226d*0x1+-0x268b+-0x1*-0x61e){const _0xf59258=new zt(_0x30f51f,[{'semantic':Pe,'components':0x3,'type':Be},{'semantic':Yt,'components':0x4,'type':Be}]),_0x5c01ea=new Uint16Array(_0xab3ffb*(-0x1921+0xaa8+0x1*0xe7f));for(let _0x4711fb=-0xfd8+-0x2166+-0xb*-0x47a;_0x4711fb<_0xab3ffb;++_0x4711fb)_0x5c01ea[_0x4711fb*(-0x2538+0x166c+0xed2)+(-0x1fb3+0x86*0x2d+0x825)]=_0x4711fb*(-0xf67+-0xb00+0x1a6b*0x1),_0x5c01ea[_0x4711fb*(-0x1*-0x123a+-0x1867+0x211*0x3)+(0x33*-0x65+-0x63d*-0x4+-0x4d4)]=_0x4711fb*(0x31*-0xbf+-0xade+0x2f71)+(0x2*-0xf58+-0x3*-0x9f7+0xcc),_0x5c01ea[_0x4711fb*(-0xed5+-0x2380+0x10c9*0x3)+(-0x6*0x262+0xa7f*-0x3+0x2dcb)]=_0x4711fb*(0x4*0x22d+0x1738+0x4*-0x7fa)+(0x1f*0x6b+0x1*0xef2+-0x1*0x1be5),_0x5c01ea[_0x4711fb*(-0x4*-0x905+-0x1*0x11e3+-0x122b)+(0x2211+0x4ed+-0x26fb)]=_0x4711fb*(0xaed*-0x1+0xf02+-0x411),_0x5c01ea[_0x4711fb*(0x13a*-0x5+-0xc*0x2c5+0x2764)+(-0x1*0x14d5+-0x943*0x3+-0x33e*-0xf)]=_0x4711fb*(-0xca4*0x2+-0x1e34+0x3780)+(-0xde7*0x2+-0x1*0x24e6+0x40b6),_0x5c01ea[_0x4711fb*(-0xa1*0x1f+-0x89a*-0x1+0xaeb)+(-0xadf*-0x1+-0x44b+0x17*-0x49)]=_0x4711fb*(-0x1*-0x539+-0x1729+-0x4*-0x47d)+(-0x9dc+-0xab*-0x5+0x2*0x344);this['device']=_0x30f51f,this['buffer']=new xs(_0x30f51f,_0xf59258,_0xab3ffb*(0x974*-0x2+-0x26c0+0x4*0xe6b),{'usage':oS}),this['data']=new Float32Array(this['buffer']['numBytes']/(0x4ee+0x32*-0x73+0x1*0x118c)),this['indexBuffe'+'r']=new dr(_0x30f51f,zi,_0xab3ffb*(0x2*0x136f+-0x2534+-0x3c*0x7),ls,_0x5c01ea),this['prim']={'type':zs,'indexed':!(-0x1f56+-0x1b1*0xa+0x3040),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=-0x1468+-0x1f11+0x1*0x3379,this['mesh']=new Ge(_0x30f51f),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][-0x20f8+-0x1*-0x14af+0xc49]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x2fbfef=new In({'uniqueName':'MiniStats','vertexGLSL':Ok,'fragmentGLSL':Nk,'vertexWGSL':Fk,'fragmentWGSL':kk,'attributes':{'vertex_position':Pe,'vertex_texCoord0':Yt}});this['material']=_0x2fbfef,_0x2fbfef['cull']=xt,_0x2fbfef['depthState']=Kt['NODEPTH'],_0x2fbfef['blendState']=new Ct(!(0x6*-0x350+-0x21e8+0x35c8),as,yc,vc,as,Dt,Dt),_0x2fbfef['update'](),this['meshInstan'+'ce']=new We(this['mesh'],_0x2fbfef,new He('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(-0x85*-0x1f+-0x11f6+0x1df)},this['targetSize']={'width':_0x30f51f['width'],'height':_0x30f51f['height']};}['quad'](_0x1673f2,_0x3edc64,_0x48e869,_0x3d93da,_0x42f88c,_0x3adf49,_0x172e2e,_0x3056a7,_0x27b306,_0x5be3d9=-0x3a2*0x4+-0x1027+0x1eaf){const _0x404b21=this['targetSize']['width'],_0x500592=this['targetSize']['height'],_0x447d4f=_0x1673f2/_0x404b21,_0x9c644=_0x3edc64/_0x500592,_0x329158=(_0x1673f2+_0x48e869)/_0x404b21,_0x2185ec=(_0x3edc64+_0x3d93da)/_0x500592,_0x57a97c=_0x27b306['width'],_0x1357ad=_0x27b306['height'],_0x42eae4=_0x42f88c/_0x57a97c,_0x5f2738=_0x3adf49/_0x1357ad,_0xd01792=(_0x42f88c+(_0x172e2e??_0x48e869))/_0x57a97c,_0x4c72ab=(_0x3adf49+(_0x3056a7??_0x3d93da))/_0x1357ad;this['data']['set']([_0x447d4f,_0x9c644,_0x5be3d9,_0x42eae4,_0x5f2738,-0xc70+-0x6c5+0x1335,0x6*-0x2ab+-0x19*-0xfb+-0x1*0x881,_0x329158,_0x9c644,_0x5be3d9,_0xd01792,_0x5f2738,0x1ffe+-0x4*-0x90c+-0x442d,-0x2e*0x73+0x1478+-0x32*-0x1,_0x329158,_0x2185ec,_0x5be3d9,_0xd01792,_0x4c72ab,-0x2178+0x1aa8+0x5*0x15d,0x1369*-0x1+-0x28*0x90+0x29ea,_0x447d4f,_0x2185ec,_0x5be3d9,_0x42eae4,_0x4c72ab,0xb92+-0x270f+0x1b7d,0x138f+-0x1*0xf1+0x5*-0x3b9],(-0xf75+0xb6f+-0x422*-0x1)*this['quads']),this['quads']++,this['prim']['count']+=0x5f+-0x136e*-0x1+0x53*-0x3d;}['startFrame'](){this['quads']=0x113b+-0xe29+-0x3*0x106,this['prim']['count']=0xd*-0x193+0x1*-0x99b+0xa06*0x3,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x3545b2,_0x569d73,_0x2c7bb3,_0x48c710,_0x8f516b,_0x127323){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x8f516b,-0x1a*0xc9+-0x1*0x4f+0x14b9),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x2c7bb3),this['material']['setParamet'+'er']('wordsTex',_0x48c710),_0x3545b2['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x569d73);}}class Xv{constructor(_0x6f9120,_0x3a6856){const _0x198456=_0x6f9120['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x198456['height']/_0x198456['maxPixelRa'+'tio'],_0x3a6856={...Xv['getDefault'+'Options'](),..._0x3a6856},this['options']=_0x3a6856,this['initGraphs'](_0x6f9120,_0x198456,_0x3a6856);const _0x10e6f7=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x543ace=>_0x543ace['name']))['concat'](_0x3a6856['stats']?_0x3a6856['stats']['map'](_0x279ac2=>_0x279ac2['unitsName']):[])['filter'](_0x4ad2f1=>!!_0x4ad2f1));this['wordAtlas']=new Rk(_0x198456,_0x10e6f7),this['sizes']=_0x3a6856['sizes'],this['_activeSiz'+'eIndex']=_0x3a6856['startSizeI'+'ndex'];const _0x1ff06a=document['createElem'+'ent']('div');_0x1ff06a['setAttribu'+'te']('id','mini-stats'),_0x3a6856['position']==='top'?_0x1ff06a['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x1ff06a['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x1ff06a['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x1ff06a),_0x1ff06a['addEventLi'+'stener']('mouseenter',_0x352713=>{this['opacity']=0x1fed+0xa67+0x877*-0x5;}),_0x1ff06a['addEventLi'+'stener']('mouseleave',_0x3022e0=>{this['opacity']=-0x739*-0x1+-0xcf5+0x2*0x2de+0.7;}),_0x1ff06a['addEventLi'+'stener']('click',_0x26559c=>{_0x26559c['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(0xd*-0x2bd+-0x2*0x703+-0x20*-0x18d))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x198456['on']('resizecanv'+'as',this['updateDiv'],this),_0x198456['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x6f9120['on']('postrender',this['postRender'],this),this['app']=_0x6f9120,this['drawLayer']=_0x6f9120['scene']['layers']['getLayerBy'+'Id'](nl),this['device']=_0x198456,this['render2d']=new Uk(_0x198456),this['div']=_0x1ff06a,this['width']=0x24c3*0x1+0x2*0x8aa+0xe3*-0x3d,this['height']=0xf62+-0x15b*-0x1b+-0x33fb,this['gspacing']=-0x15d8+-0xb55+0x212f,this['clr']=[0x6e6*0x1+-0x105b*-0x1+-0x1740,0x1dc9*-0x1+0x183*0xf+-0x71d*-0x1,0x18d*-0xb+0x3*-0x2b+0x1191,0x49*0x57+-0x771+-0x72*0x27+0.5],this['_enabled']=!(-0x8*0x363+0x24d2+0x33e*-0x3),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x2aa790=>_0x2aa790['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(0x191d*-0x1+0x2ae*-0x7+0x2be0)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(-0x1170+-0x119c+0x1*0x230c)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(-0x6*0x209+0x112d*-0x2+-0x950*-0x5)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x11*-0x226+0xce9+0x179d),'watermark':0x21},'gpu':{'enabled':!(0x20*0xce+0x1712+0x823*-0x6),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x2f1203){this['_activeSiz'+'eIndex']=_0x2f1203,this['gspacing']=this['sizes'][_0x2f1203]['spacing'],this['resize'](this['sizes'][_0x2f1203]['width'],this['sizes'][_0x2f1203]['height'],this['sizes'][_0x2f1203]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x8514e7){this['clr'][-0x1e*-0xb2+-0x20f0+0xc17]=_0x8514e7;}get['opacity'](){return this['clr'][0xa6f*0x2+0x12d7+-0x27b2];}get['overallHei'+'ght'](){const _0x4f1ae3=this['graphs'],_0x446cb8=this['gspacing'];return this['height']*_0x4f1ae3['length']+_0x446cb8*(_0x4f1ae3['length']-(-0x1e17+-0x1*-0x47f+0x1999));}set['enabled'](_0x213171){if(_0x213171!==this['_enabled']){this['_enabled']=_0x213171;for(let _0x4478de=-0x5*0x122+0x39d+-0x69*-0x5;_0x4478de<this['graphs']['length'];++_0x4478de)this['graphs'][_0x4478de]['enabled']=_0x213171,this['graphs'][_0x4478de]['timer']['enabled']=_0x213171;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x18a3c9,_0x52f6e5,_0x707e87){if(this['graphs']=[],_0x707e87['cpu']['enabled']){const _0x4a7116=new Ik(_0x18a3c9),_0x351b13=new rf('CPU',_0x18a3c9,_0x707e87['cpu']['watermark'],_0x707e87['textRefres'+'hRate'],_0x4a7116);this['graphs']['push'](_0x351b13);}if(_0x707e87['gpu']['enabled']){const _0x3c7d22=new Dk(_0x52f6e5),_0x576812=new rf('GPU',_0x18a3c9,_0x707e87['gpu']['watermark'],_0x707e87['textRefres'+'hRate'],_0x3c7d22);this['graphs']['push'](_0x576812);}_0x707e87['stats']&&_0x707e87['stats']['forEach'](_0xc32e1f=>{const _0x1d1c93=new Lk(_0x18a3c9,_0xc32e1f['stats'],_0xc32e1f['decimalPla'+'ces'],_0xc32e1f['unitsName'],_0xc32e1f['multiplier']),_0x450949=new rf(_0xc32e1f['name'],_0x18a3c9,_0xc32e1f['watermark'],_0x707e87['textRefres'+'hRate'],_0x1d1c93);this['graphs']['push'](_0x450949);});const _0x44234d=_0x707e87['sizes']['reduce']((_0x1db55f,_0x59348c)=>_0x59348c['width']>_0x1db55f?_0x59348c['width']:_0x1db55f,0x24e7*-0x1+0x1ce2+0x805);this['texture']=new _e(_0x52f6e5,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x44234d),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(0x3f*0x12+-0x91*0x23+0x1b6*0x9),'minFilter':Te,'magFilter':Te,'addressU':pt,'addressV':pt}),this['graphs']['forEach']((_0x8e2d37,_0x54747a)=>{_0x8e2d37['texture']=this['texture'],_0x8e2d37['yOffset']=_0x54747a;});}['render'](){const _0x534eab=this['graphs'],_0x50379e=this['wordAtlas'],_0x101995=this['render2d'],_0x3cc0b3=this['width'],_0x59bb7d=this['height'],_0xf9c6b9=this['gspacing'];_0x101995['startFrame']();for(let _0x3654cf=0x1024+0x15c1+-0x25e5;_0x3654cf<_0x534eab['length'];++_0x3654cf){const _0x74b605=_0x534eab[_0x3654cf];let _0x53bbaa=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x3654cf+(0x1cc8+-0x1327+-0x9a0))*(_0x59bb7d+_0xf9c6b9):_0x3654cf*(_0x59bb7d+_0xf9c6b9);_0x74b605['render'](_0x101995,0x2*0x482+-0x7b*0x3b+0x65*0x31,_0x53bbaa,_0x3cc0b3,_0x59bb7d);let _0x3c9b9a=0x1f20+-0x1222*-0x2+-0x4363*0x1;_0x53bbaa+=_0x59bb7d-(0xe87+0x18a1+-0x271b),_0x3c9b9a+=_0x50379e['render'](_0x101995,_0x74b605['name'],_0x3c9b9a,_0x53bbaa)+(-0x16*-0x4f+-0x3c2+0x2fe*-0x1);const _0x238a5b=_0x74b605['timingText'];for(let _0x51fa3c=0x5*0xe+0x99d+-0x1*0x9e3;_0x51fa3c<_0x238a5b['length'];++_0x51fa3c)_0x3c9b9a+=_0x50379e['render'](_0x101995,_0x238a5b[_0x51fa3c],_0x3c9b9a,_0x53bbaa);_0x74b605['timer']['unitsName']&&(_0x3c9b9a+=0x25*-0xe5+0xb*0x1af+0x3*0x4dd,_0x50379e['render'](_0x101995,_0x74b605['timer']['unitsName'],_0x3c9b9a,_0x53bbaa));}_0x101995['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x59bb7d);}['resize'](_0x5dd321,_0x3aab30,_0x30c05d){const _0x5f0df8=this['graphs'];for(let _0x53e126=-0xa6b*-0x3+0x2362+-0x42a3;_0x53e126<_0x5f0df8['length'];++_0x53e126)_0x5f0df8[_0x53e126]['enabled']=_0x30c05d;this['width']=_0x5dd321,this['height']=_0x3aab30,this['updateDiv']();}['updateDiv'](){const _0x75c521=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x75c521['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x75c521['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0xac23a5=>_0xac23a5['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}Jv();class Bk extends qt{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x1b4b74,_0x30f479,_0x3002e7)=>{_0x1b4b74['on'](_0x30f479,_0x3002e7),this['eventsList']=this['eventsList']['concat']({'e':_0x1b4b74,'ty':_0x30f479,'fn':_0x3002e7});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x33a555,ty:_0x43582b,fn:_0x7ae932})=>{_0x33a555['off'](_0x43582b,_0x7ae932);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x3c7762=>{var _0x20c291;if(console['log']('add\x20xr\x20inp'+'ut',_0x3c7762['handedness']),!((_0x20c291=_0x3c7762['profiles'])!=null&&_0x20c291['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x37ffb5=_0x3c7762['profiles']['map'](async _0x5aa9c0=>{var _0x399296;const _0x2a7642=this['basePath']+'/'+_0x5aa9c0+('/profile.j'+'son');try{const _0x5b19b6=await fetch(_0x2a7642);if(!_0x5b19b6['ok'])return null;const _0x9c0f41=await _0x5b19b6['json'](),_0x5f2de8=((_0x399296=_0x9c0f41['layouts'][_0x3c7762['handedness']])==null?void(-0x2645+0x24e8+0x1*0x15d):_0x399296['assetPath'])||'',_0x473b2f=this['basePath']+'/'+_0x9c0f41['profileId']+'/'+_0x3c7762['handedness']+_0x5f2de8['replace'](/^\/?(left|right)/,''),_0x2ee7f6=await new Promise((_0x15fe2d,_0x1012a9)=>{this['app']['assets']['loadFromUr'+'l'](_0x473b2f,'container',(_0x19b0ae,_0x43dfe6)=>{_0x19b0ae?_0x1012a9(_0x19b0ae):_0x15fe2d(_0x43dfe6);});});return{'profileId':_0x5aa9c0,'asset':_0x2ee7f6};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x5aa9c0),null;}}),_0x423b80=(await Promise['all'](_0x37ffb5))['find'](_0x3f0a3a=>_0x3f0a3a!==null);if(_0x423b80){const {asset:_0xabbb7f}=_0x423b80,_0x10b4f7=_0xabbb7f['resource']['instantiat'+'eRenderEnt'+'ity']();_0x10b4f7['name']='Armature_'+_0x3c7762['handedness'],this['app']['root']['addChild'](_0x10b4f7),this['preEntitie'+'s']['set'](_0x3c7762,_0x10b4f7);const _0x4b1196=new Map();if(_0x3c7762['hand'])for(const _0x1d7d99 of _0x3c7762['hand']['joints']){const _0x2c3e28=_0x10b4f7['findByName'](_0x1d7d99['id']);_0x2c3e28&&_0x4b1196['set'](_0x1d7d99,_0x2c3e28);}this['controller'+'s']['set'](_0x3c7762,{'entity':_0x10b4f7,'jointMap':_0x4b1196});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x37ef2e=>{var _0x1536bf;const _0xdd3b54=this['controller'+'s']['get'](_0x37ef2e);_0xdd3b54&&((_0x1536bf=_0xdd3b54['entity'])==null||_0x1536bf['destroy'](),this['app']['root']['removeChil'+'d'](_0xdd3b54==null?void(-0x156c+-0x86d+0x11b*0x1b):_0xdd3b54['entity']),this['controller'+'s']['delete'](_0x37ef2e));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x277c54,_0x3572f6,_0x2e7d39;const _0x4dfa41=this['app'];(_0x277c54=this['controller'+'s'])==null||_0x277c54['forEach'](_0x347b94=>{var _0x108b54;_0x4dfa41['root']['removeChil'+'d'](_0x347b94==null?void(-0x1*-0x459+0x18d3+-0x74b*0x4):_0x347b94['entity']),(_0x108b54=_0x347b94['entity'])==null||_0x108b54['destroy']();}),(_0x3572f6=this['controller'+'s'])==null||_0x3572f6['clear'](),(_0x2e7d39=this['preEntitie'+'s'])==null||_0x2e7d39['forEach'](_0x1ae2dc=>{_0x4dfa41['root']['removeChil'+'d'](_0x1ae2dc),_0x1ae2dc==null||_0x1ae2dc['destroy']();});const _0x5ae75d=()=>{const _0x37c687=_0x4dfa41['root']['findByName']('Armature_l'+'eft'),_0x550972=_0x4dfa41['root']['findByName']('Armature_r'+'ight');for(_0x37c687&&_0x4dfa41['root']['removeChil'+'d'](_0x37c687),_0x550972&&_0x4dfa41['root']['removeChil'+'d'](_0x550972);_0x4dfa41['root']['findByName']('Armature_l'+'eft')||_0x4dfa41['root']['findByName']('Armature_r'+'ight');)_0x5ae75d();};_0x5ae75d();});}['update'](_0x577178){var _0x2b5267;if((_0x2b5267=this['app']['xr'])!=null&&_0x2b5267['active']){for(const [_0xd3af59,{entity:_0x501395,jointMap:_0x54d16a}]of this['controller'+'s'])if(_0xd3af59['hand']){for(const [_0x42e1f3,_0x31b90a]of _0x54d16a)_0x31b90a['setPositio'+'n'](_0x42e1f3['getPositio'+'n']()),_0x31b90a['setRotatio'+'n'](_0x42e1f3['getRotatio'+'n']());}else _0x501395['setPositio'+'n'](_0xd3af59['getPositio'+'n']()),_0x501395['setRotatio'+'n'](_0xd3af59['getRotatio'+'n']());}}}h(Bk,'scriptName','xrControll'+'ers');class zk extends qt{constructor(){super(...arguments),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(-0x1d*0x112+0x85*0xb+0x1953,-0x9*-0x2ab+0xad8+-0x22da,0x1*0x1261+-0x92*-0x3d+-0x15d*0x27)),h(this,'invalidCol'+'or',new ie(0x4e3+0x23d5+-0x28b7,0xbcb+-0x2*-0x55d+-0x1685,-0xf50+0x940+0x61*0x10)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(0x208*0x7+0x146*-0xd+0x257)),h(this,'teleportLe'+'ftOpenStat'+'us',!(0x24c7+-0xb*-0x371+0x5*-0xeed));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x1d3293=>{const _0x11d633=()=>{this['activePoin'+'ters']['set'](_0x1d3293,!(0x15fa+0xb*-0xd+-0x156b));},_0xd0eae7=()=>{this['activePoin'+'ters']['set'](_0x1d3293,!(0x602+0x7ec+0x2c9*-0x5)),this['tryTelepor'+'t'](_0x1d3293);};_0x1d3293['on']('selectstar'+'t',_0x11d633),_0x1d3293['on']('selectend',_0xd0eae7),this['inputHandl'+'ers']['set'](_0x1d3293,{'handleSelectStart':_0x11d633,'handleSelectEnd':_0xd0eae7}),this['inputSourc'+'es']['add'](_0x1d3293);}),this['app']['xr']['input']['on']('remove',_0x5878f1=>{const _0x54d20c=this['inputHandl'+'ers']['get'](_0x5878f1);_0x54d20c&&(_0x5878f1['off']('selectstar'+'t',_0x54d20c['handleSele'+'ctStart']),_0x5878f1['off']('selectend',_0x54d20c['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x5878f1)),this['activePoin'+'ters']['delete'](_0x5878f1),this['inputSourc'+'es']['delete'](_0x5878f1);});}['findPlaneI'+'ntersectio'+'n'](_0x3917b8,_0x30196d){if(Math['abs'](_0x30196d['y'])<-0x2143+-0x20a8+0x41eb+0.00001)return null;const _0xe0738d=-_0x3917b8['y']/_0x30196d['y'];return _0xe0738d<-0x1fa5+-0xd5c+0x29*0x119?null:new I(_0x3917b8['x']+_0x30196d['x']*_0xe0738d,-0x1e6b+-0x7a2*0x2+0x2daf,_0x3917b8['z']+_0x30196d['z']*_0xe0738d);}['tryTelepor'+'t'](_0x10181b){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x8d2370=_0x10181b['getOrigin'](),_0x2201bb=_0x10181b['getDirecti'+'on'](),_0x2bf117=this['findPlaneI'+'ntersectio'+'n'](_0x8d2370,_0x2201bb);if(_0x2bf117){const _0x2158f7=this['entity']['getPositio'+'n']()['y'];_0x2bf117['y']=_0x2158f7,this['entity']['setPositio'+'n'](_0x2bf117);}}}['update'](){for(const _0x4ea8fd of this['inputSourc'+'es']){if(_0x4ea8fd['gamepad']&&!_0x4ea8fd['hand']){const _0x2ec5a6=_0x4ea8fd['gamepad'];for(let _0xdde75=0x19cb+-0x22ec+0x921;_0xdde75<_0x2ec5a6['buttons']['length'];++_0xdde75)_0x4ea8fd['handedness']==='right'&&_0xdde75===-0xf49+-0xc81+0x5*0x58f&&(this['teleportOp'+'enStatus']=_0x2ec5a6['buttons'][0x1040+0xca*-0x25+0xcf3]['pressed']),_0x4ea8fd['handedness']==='left'&&_0xdde75===0x59e+-0x1d5+-0x3c8&&(this['teleportLe'+'ftOpenStat'+'us']=_0x2ec5a6['buttons'][-0x132e+0x25b2+-0x7*0x2a5]['pressed']);}const _0x4fa317=_0x4ea8fd['handedness'];if(!this['teleportOp'+'enStatus']&&_0x4fa317==='right'||_0x4fa317==='left'&&!this['teleportLe'+'ftOpenStat'+'us'])continue;const _0x2faa0f=_0x4ea8fd['getOrigin'](),_0x42d1f4=_0x4ea8fd['getDirecti'+'on'](),_0x1c89c7=this['findPlaneI'+'ntersectio'+'n'](_0x2faa0f,_0x42d1f4);if(_0x1c89c7)this['app']['drawLine'](_0x2faa0f,_0x1c89c7,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x1c89c7);else{const _0xce5993=_0x2faa0f['clone']()['add'](_0x42d1f4['clone']()['mulScalar'](0x1*0xf7c+-0x1*-0x12c3+0x21db*-0x1));this['app']['drawLine'](_0x2faa0f,_0xce5993,this['invalidCol'+'or']);}}}['drawTelepo'+'rtIndicato'+'r'](_0x1cd562){for(let _0x3ea5a4=0x1813+0x2*0xc3e+0x1f*-0x191;_0x3ea5a4<0x2567+-0x1d58+0x2a5*-0x3;_0x3ea5a4++){const _0x12071d=_0x3ea5a4/(-0x152*0x4+0x22*0x5b+-0x6ae)*Math['PI']*(-0x1*-0x23f9+0x6*-0x2f4+-0x123f),_0xa5d6ac=(_0x3ea5a4+(-0x179d+-0x26b2+0x3e50))/(-0x11f8+0x1*-0x11f9+0x2411)*Math['PI']*(-0x1*-0x5e7+0x2488+-0x2a6d),_0x5737fe=_0x1cd562['x']+Math['cos'](_0x12071d)*(0x1*-0x2461+-0x1c3d+0x409e+0.2),_0x1eb790=_0x1cd562['z']+Math['sin'](_0x12071d)*(0x3*-0xb7b+0x1c60*-0x1+0x4d5*0xd+0.2),_0x14ac4c=_0x1cd562['x']+Math['cos'](_0xa5d6ac)*(-0x543*0x1+-0x74*0x1a+0x1*0x110b+0.2),_0x14b52c=_0x1cd562['z']+Math['sin'](_0xa5d6ac)*(0x140*0x2+-0x16e9+0x13*0x113+0.2);this['app']['drawLine'](new I(_0x5737fe,0x14*-0x11d+0x2004+-0x9c0+0.01,_0x1eb790),new I(_0x14ac4c,-0x123c+0x21ff+-0xfc3+0.01,_0x14b52c),this['validColor']);}}}h(zk,'scriptName','xrNavigati'+'on');export{Ie as $,Qk as A,Zg as B,ie as C,Wk as D,ot as E,Bb as F,uh as G,We as H,In as I,kt as J,Ap as K,_m as L,bl as M,Pe as N,Gs as O,eU as P,le as Q,U_ as R,ks as S,uy as T,xt as U,I as V,sS as W,vk as X,Ge as Y,zs as Z,te as _,ae as a,Gk as a0,Bk as a1,zk as a2,Hk as a3,sv as a4,Kv as a5,Xv as a6,pe as a7,Jk as a8,So as a9,Ce as aa,Kg as ab,ik as b,J as c,me as d,ol as e,hn as f,Ks as g,Tm as h,$k as i,Xk as j,qk as k,jk as l,Yk as m,hy as n,ly as o,cy as p,jT as q,qT as r,bf as s,ym as t,No as u,ws as v,rO as w,Ua as x,My as y,Yv as z};function _0x15e975(_0x559cd1){function _0x2f43d8(_0x4a1b91){if(typeof _0x4a1b91==='string')return function(_0x3ca685){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x4a1b91/_0x4a1b91)['length']!==-0x1241*0x1+0x2*-0xbbf+0x29c0||_0x4a1b91%(0x2589+0xa9*-0x1d+-0x1250)===-0x99e+0x18be+-0x8*0x1e4?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x2f43d8(++_0x4a1b91);}try{if(_0x559cd1)return _0x2f43d8;else _0x2f43d8(-0x142d+-0x4c*-0x47+-0xe7*0x1);}catch(_0x3af755){}}